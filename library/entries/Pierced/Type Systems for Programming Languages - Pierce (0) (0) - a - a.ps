%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: top.dvi
%%Pages: 332
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Palatino-Bold Palatino-Roman Palatino-Italic Courier
%%+ Symbol Times-Italic
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o book.ps top.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2000.03.02:0717
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin @defspecial

 TeXDict begin /box{newpath 2 copy moveto 3 copy pop exch lineto 4
copy pop pop lineto 4 copy exch pop exch pop lineto closepath } bind
def /min{ 2 copy gt { exch } if pop } bind def/max{ 2 copy lt { exch
} if pop } bind def/roundedbox{/radius exch store 3 2 roll 2 copy min
radius sub /miny exch store max radius add /maxy exch store 2 copy
min radius sub /minx exch store max radius add /maxx exch store newpath
minx radius add miny moveto maxx miny maxx maxy radius arcto maxx maxy
minx maxy radius arcto minx maxy minx miny radius arcto minx miny maxx
miny radius arcto 16 {pop} repeat closepath }bind def /rectcartouche{box
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def /cartouche{roundedbox
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def end

 TeXDict begin /box{newpath 2 copy moveto 3 copy pop exch lineto 4
copy pop pop lineto 4 copy exch pop exch pop lineto closepath } bind
def /min{ 2 copy gt { exch } if pop } bind def/max{ 2 copy lt { exch
} if pop } bind def/roundedbox{/radius exch store 3 2 roll 2 copy min
radius sub /miny exch store max radius add /maxy exch store 2 copy
min radius sub /minx exch store max radius add /maxx exch store newpath
minx radius add miny moveto maxx miny maxx maxy radius arcto maxx maxy
minx maxy radius arcto minx maxy minx miny radius arcto minx miny maxx
miny radius arcto 16 {pop} repeat closepath }bind def /rectcartouche{box
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def /cartouche{roundedbox
gsave .95 setgray fill grestore 1 setlinewidth stroke }bind def end
 
@fedspecial end TeXDict begin
39158280 55380996 1000 600 600 (top.dvi) @start
%DVIPSBitmapFont: Fa eufm9 9 2
/Fa 2 62 df<123C127F5A1380A4EA7F00123CC7FCB1123C127F5A1380A4EA7F00123C09
237CA111>58 D<007FB812E0B9FCA2CCFCAB007FB812E0B9FCA233117C9A3A>61
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb msbm9 9 2
/Fb 2 79 df<007FB67EB712F86C15FE3A03C0783FFF00019039F00F8F809139E00383C0
EEC1E0ED01C016E0030013F01770A517F0030113E016C1EEC3C0923803CF80923807BF00
ED3FFE91B512F88216FF02E1EBBF809139E007C7E0923801E1F0ED00E0EEF078EE703CEE
781C1638171E170EA5171E171C1678EE703CEEF078EEE1F0923801E3E09139F007DFC000
039039781FFF00007FB65AB712F06C92C7FC2F3380B223>66 D<267FFFC0903807FFF0B5
6C5B6C6D7F260F00709038007E0026078078143C6C6C6C141C6C6C7E6D7E8001F87F6D6C
7E9038DE01E09038CF00F001C71370EC80789038C3C03C9038C1E01E9038C0F00FEC7807
0238138091383C03C091381E01E091380F00F0913807807002031378EDC03C913801E01E
913800F00FED78070338139C92383C03DC92381E01FCED0F00ED07800303137CEEC03C92
3801E01CED00F01678163C161C161E160FEE079CEE03DC1601486C15FC486C1400267FFF
80147CB5153C6C161CCA120C34347FB22F>78 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc eusm6 6 2
/Fc 2 104 df<EB7F80EBF000EA01C012035BAE90C7FCA212065A12F81218120412067E
A37FAB7FA21201EA00F0EB7F80112D7EA317>102 D<12FEEA0780EA01C0A27F1200AC13
60A313701330131CEB078090C7FC13105B1360A313E0AC485AA2EA078000FEC7FC112E7D
A417>I E
%EndDVIPSBitmapFont
/Fd 148[22 4[14 102[{TeXBase1Encoding ReEncodeFont}2
49.8132 /Palatino-Italic rf /Fe 202[37 3[37 49[{
TeXBase1Encoding ReEncodeFont}2 74.7198 /Palatino-Bold
rf
%DVIPSBitmapFont: Ff eufm6 6 2
/Ff 2 59 df<14201460AFB712F8A2C70060C7FCAF144025227B9D30>43
D<127812FC12FEA312781200AC127812FC12FEA3127807187B9611>58
D E
%EndDVIPSBitmapFont
/Fg 75[25 11[25 17[37 28[37 37 54 37 42 25 29 29 35 37
33 42 58 21 33 21 21 37 37 21 29 37 30 35 33 9[71 54
58 46 42 50 1[46 58 58 71 42 1[25 25 58 54 42 46 58 50
46 54 6[19 37 37 37 37 37 37 37 37 37 37 1[19 25 19 2[25
25 21 8[25 27[39 2[{TeXBase1Encoding ReEncodeFont}68
74.7198 /Palatino-Italic rf
%DVIPSBitmapFont: Fh cmmi9 9 1
/Fh 1 47 df<126012F812FE7E13C013F0EAF3FCEAF1FE38F07F80EB1FE0EB07F0EB03FC
EB00FFEC3FC06E7EEC07F8EC01FEEC007FED3F80A2ED7F00EC01FEEC07F8EC1FE04A5A02
FFC7FCEB03FCEB07F0EB1FE0EB7F80D8F1FEC8FCEAF3FCEAFFF013C090C9FC5A12F81260
21267EA526>46 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmmi10 10 1
/Fi 1 47 df<126012F812FE6C7E7F13F0EAF3FCEAF0FEEB7F80EB1FE0EB07F86D7EEB00
FFEC3FC0EC0FE0EC07F8EC01FE9138007F80ED3FC0ED0FE0A2ED3FC0ED7F80913801FE00
EC07F8EC0FE0EC3FC002FFC7FCEB03FC495AEB1FE0EB7F8001FEC8FCEAF3FCEAFFF013C0
5B48C9FC12F8126023287DA82A>46 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj msam10 10 3
/Fj 3 87 df<12C07EA27E7E7E7E7EEAF780EAF3E0EAF1F0EAF0FC133F130F13031300B3
B3B3A41260104A71B923>22 D<00E019708612701A3C6C191C867E6C85000FF103806C6C
19C06C6CF001E06C6CF000F090BB12FC1BFEA21BFC01E0CC12F04848F001E04848F003C0
48CC1380000EF1070048190E5A6248193C1A385A624F1C7AA25C>26
D<1778A2177C173C173EA2171E171F8384170784B97EA28484CB1278187C848484727E85
727E727E727E197E191FF10F80F107C0BB12F01AF8A21AF0CCEA07C0F10F80F11F00197E
19F84E5A4E5A4E5A614EC7FC60183E601878B912F86060A2CAEA07C060170F95C8FC5F17
1E173EA2173C177C1778A245407BB453>86 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmsy10 14.4 1
/Fk 1 64 df<EE03804C7EB3B3B3B3007FBB12FCBC12FEA36C1AFC4F4F79CE5E>63
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fl msbm6 6 1
/Fl 1 79 df<3AFFF003FF80A23A3838003C006C6C13186C7EEA0F061307EB8380380DC1
C0EA0CE0EB60E0EB7070EB3838EB1C18EB0C1CEB0E0EEB0707EB038301011398ECC1D890
3800E0F8EC70781438EC1838EC1C18140E140714031598EC01D8EC00F8001E1478EAFFE0
1538C8121821237EA138>78 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmsy6 6 3
/Fm 3 51 df<136013701360A20040132000E0137038F861F0387E67E0381FFF803807FE
00EA00F0EA07FE381FFF80387E67E038F861F038E060700040132000001300A213701360
14157B9620>3 D<ED01C01507151FED7F00EC01FCEC07F0EC1FC0027FC7FC14FCEB03F0
EB0FC0EB3F8001FEC8FCEA03F8EA0FE0EA3F8000FEC9FC12F812FEEA3F80EA0FE0EA03F8
EA00FEEB3F80EB0FC0EB03F0EB00FC147FEC1FC0EC07F0EC01FCEC007FED1FC015071501
92C7FCA9007FB61280B712C0A2222F7AA230>20 D<903807FFF0133F5BD801FCC7FCEA03
E0485A48C8FC121E121C123C5A1270A212F05AA2B612F0A300E0C8FCA27E1270A212787E
121C121E7E6C7EEA03E0EA01FC6CB512F0133F13071C237A9D2A>50
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fn msbm7 7 1
/Fn 1 79 df<D8FFFCEB0FFF7FD81C06EB00F0D80E0714606C6C7EEB81C0EB80E0EBC060
3806E070EB7038EB301CEB380CEB1C0E6D7E9038070380EB0301EC81C0903801C0E09038
00E070EC6030EC7038EC381CEC1C0EEC0E06EC060791380703E0EC0381EC01C002001360
15E015701538151C150C150E1507ED03E0000F1401EAFFF01500C9126028297FA72B>78
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fo euex8 8 1
/Fo 1 34 df<1870A284A384A284A28419801803F001C019E0F000F0BA12F819FC19F8CC
12F0F001E019C0F0038018071900180EA260A260A360A23E217CA047>33
D E
%EndDVIPSBitmapFont
/Fp 185[66 70[{TeXBase1Encoding ReEncodeFont}1 119.552
/Palatino-Roman rf
%DVIPSBitmapFont: Fq eurm10 14.4 1
/Fq 1 71 df<B912F0A4120FC649C67E6D489038003FE0013F92C7FC5CA2131FB3A2133F
A5806E903807FFC091B7FCA402FCC9FC14F0B3A980137FAB017CCAFC34527CD13C>70
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fr eusm9 9 1
/Fr 1 95 df<1506A2150FA24B7E153F82ED7BE0A2EDF1F0A2913801E0F81403EDC07C14
074B7E140F4B7E5C021E6D7E143E4A6D7E02788002F813034A80010114014A8001031400
494880177C4948147E173E49C8123F83013E82017E150F017C8201FC6F7E491503000183
49150100038348481500844848167C49167E001F173E90CA123F4883007E1880F00FC05A
F007E0CBEA04003B367FB43C>94 D E
%EndDVIPSBitmapFont
/Fs 139[14 18 5[37 3[12 3[20 101[{TeXBase1Encoding ReEncodeFont}5
41.511 /Palatino-Roman rf
%DVIPSBitmapFont: Ft eufm8 8 6
/Ft 6 94 df<1318137013E0EA01C0EA0380EA07005A120E121E121CA2123CA21238A212
78A5127012F0B3A21270A21278A51238123CA3121C121E120EA27EEA0380EA01C0EA00E0
13380D3D78B01B>40 D<7E12E01278121C121E120E7E1380120313C01201A213E0A21200
A213F0A413701378B3A21370A413F0A313E0A3120113C0A2EA0380A2EA07001206121C5A
12E00D3D79B01B>I<811403B3A2007FB712FC17F8B8FCC7D80380C7FCB3A292C8FC2E2D
7DA734>43 D<B812FCA217F8CBFCAAB812FCA217F82E107C9834>61
D<EAFFE0A2EAE000B3B3B1EAFF8013E0EAC0000B3A78B013>91 D<EAFFE0A21200B3B3B1
120F12FF12000B3A80B013>93 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fu cmsy8 8 3
/Fu 3 58 df<123C127E12FFA4127E123C08087A9414>1 D<0060150600E0150E6C151E
0070151CA20078153C00381538003C1578001C1570A2001E15F0000E15E0000F14016C15
C06D13036CB61280A33A01C00007006D5B0000140EA26D131E0170131C0178133C013813
38A2013C1378011C1370011E13F0010E5BA2EB0F0101075B148301035B14C7010190C7FC
A214EFEB00EE14FE147CA31438A2272F80AD28>56 D<B612FCA3C8121CB2003FB512FC5A
A2C8121CB3B612FCA31E2E7CAD27>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fv cmsy9 9 4
/Fv 4 84 df<007FB712FCB812FEA26C16FC2F047A943C>0 D<0060ED018000F0ED03C0
6C1507A200781680007C150FA2003C1600003E5DA26C153EA26C153C6D147CA26C6C5CA2
00035D90B6FCA26C5DA29038F000036C6C495AA201785C017C130FA2013C91C7FC013E5B
A26D133EA26D133CEC807CA201071378ECC0F8A2903803E1F0A201015B14F3A26DB45AA2
6E5AA36EC8FCA3141E140C2A3680B32B>56 D<007FB61280B712C0A27EC81203B3A2003F
B6FC5AA27EC81203B3A2007FB6FCB7FCA26C158022347CB32B>I<ED03FF031F13E092B5
12F8020314FC913907C07FFE91381E000F4A1303027C13014A130013014A14FC010315F8
17F00107EC01C093C7FCA280A280806D7E15C06D13F06D13FC6EB4FC021F13C002077F02
0113F86E6C7EED1FFE6F7E15036F138001F07FD803E0147FEA0F8048C8123F5A127EA217
0012FE163E6C157E167C6D5C6D5C6C6C495A6D495AD83FFC010FC7FC391FFF80FE6CEBFF
F86C14E0000191C8FC38003FF02F377FB42F>83 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fw cmmi7 7 1
/Fw 1 64 df<1303A5497EA500C0140C00FC14FC397FE79FF8000FB512C000031400C613
FCEB3FF06D5A497EA2EB7CF8EB7878EBF87CEBF03C48487E48487E497E39070003800006
13011E1D7E9C22>63 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fx msam5 5 1
/Fx 1 74 df<126012F812FE6C7E13E013F813FE6D7E14E014F814FEECFF8015E015F815
FE15FF15FE15F815E01580ECFE0014F814E0148049C7FC13F813E0138048C8FC12F812E0
201F7A982D>73 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fy eufm5 5 2
/Fy 2 46 df<497EADB7FCA23900018000AD201C79982E>43 D<B7FC2001798A2E>45
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fz cmsy5 5 2
/Fz 2 51 df<EA0380EA07C0A3EA0F80A313005A121EA2123E123CA212381278A21270A2
5AA20A157D9612>48 D<90381FFF80137F48B5FCD803F0C7FCEA07C048C8FC121E5A1238
12781270A212F05AB61280A300E0C8FC7E1270A212781238123C7E7EEA07C0EA03F06CB5
12806C7E131F191F7A9927>50 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FA eusm7 7 3
/FA 3 111 df<EB1FE0EB7C005B5B12015BAE5BA3485AA2000EC7FC12F8A2120EEA0380
A27F1201A37FAD7F12007F137CEB1FE013347EA919>102 D<B4FCEA07E0EA01F01200A2
7F1378AD1338A47F130C1307EB01F014E0EB0600131CA25BA31378AE5BA3EA03E0EAFF80
14357DAA19>I<12C07EA21270A27EA27EA27EA27EA26C7EA212017F12007F1360137013
3013381318131C130C130E130613077F80130180130080A21470A280A280A280A280A2EC
0380A2EC01C0A2EC00E0A215401B357BA924>110 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FB eurm5 5 10
/FB 10 111 df<EA01FC3807FF80381E07C0383C03E0EA38011270EB00F01260A212E0A4
EB01E012F0EB03C038F8078038EC1F00EAE7FEEAE1F800E0C7FCA47EA31260141C779323
>26 D<1320EA03E0123F12FF12071203B3A613800B1E779D21>49
D<137F3801FF80000713E0EA0E0F381807F0EA1003EA0001A314E0A214C013031480EB07
00A2130E5B13185B5B5B485A48C7FC12065A381FFFFC5A5AB512F8161E7B9D21>I<137E
3803FF804813C0381C0FE0EA00031301A314C013031480EB0600131C13E0EA07FF38001F
C0EB07F01303EB01F81300A414F0EA2001007013E038F803C038FC0F80383FFE00EA0FF0
151E7B9C21>I<127812FCA312780605778316>58 D<EA03C0487EA36C5AC8FCA5EA0780
EA3FC012E31201ACEBE180EBFF005BEA0078111D7C9C1A>105 D<EA03C0EA07E0A3EA03
C0C7FCA4EA0780121FEA3FC012E31201B0EA0380A2130012065A5A5A12400B257C9C19>
I<1203B4FC121F7E7EA5140C143E147814E0EB03C049C7FC130C5B137013F813787F131F
6D7E6D7E6D7E903801F0C09038007F80EC3F00141C1A1D7B9C24>I<3A0F80F80FE03A3F
C3FC7FF03AC3CC3FC0F83A01F01F0078D9E00E133813C0AA1710EE3C70EE3FE01780C9EA
1E002C147B9236>109 D<000F13FC387F87FE38C7B81F3803E00FEB8007AB158715FE15
F890380003E020137B9229>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FC euex7 7 2
/FC 2 42 df<1707A2717EA2717EA28417001870A284183C84BAFC19801900CB121E6018
3860A260170160A24D5AA24DC7FCA2391D7D9C41>33 D<161CA2161E160EA282707EA270
7E831600177083B812FC8383CAEA03C0EF01E0EF00F0187C181FA2187C18F8EF01E0EF03
C0EF0780B912005F5FCA127817705F4C5AA24C5A160794C7FC160EA25EA3382B7DA341>
41 D E
%EndDVIPSBitmapFont
/FD 71[25 3[25 11[25 17[37 1[37 37 10[25 13[37 42 39
62 42 45 24 32 30 42 45 41 43 66 22 42 17 22 43 42 25
36 46 33 41 37 3[25 1[25 50 50 50 75 54 58 46 39 50 59
45 59 62 71 46 54 25 25 62 57 42 46 58 53 46 58 1[33
3[19 19 37 37 37 37 37 37 37 37 37 37 45 19 25 19 45
1[25 25 21 3[37 4[25 12[21 13[45 45 2[{TeXBase1Encoding ReEncodeFont}87
74.7198 /Palatino-Roman rf /FE 166[40 40 60 43 47 37
31 40 47 36 47 50 57 37 43 20 20 50 46 33 37 46 42 37
47 65[{TeXBase1Encoding ReEncodeFont}25 59.7758 /Palatino-Roman
rf
%DVIPSBitmapFont: FF cmtt12 12 2
/FF 2 61 df<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F00C7FCB3A3121FEA3F80
EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B2B6CAA33>58 D<161E167E16FF15035DED1FFE
157FEDFFF8020313F04A13C0021F138091383FFE00ECFFF8495B010713C0495BD93FFEC7
FC495A3801FFF0485B000F13804890C8FCEA7FFC5BEAFFE05B7FEA7FF87FEA1FFF6C7F00
0313E06C7F38007FFC6D7E90380FFF806D7F010113F06D7FEC3FFE91381FFF80020713C0
6E13F0020013F8ED7FFE151FED07FF811500167E161E28337BB733>60
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FG eurm8 8 10
/FG 10 121 df<EA01FCEA1FFF127F38207F80C66C7E131F6D7EA26D7EA26D7EA3130180
A21300A2497EA2EB03BEEB073F80010E7FA2EB1C0F81EB380701787F13709038F003F013
E000016D7E13C000036D7E485A8148C7127E157F001E80003E1580123C007CEC1FC0A248
EC0FE0481580C8EA0400232F7EAD27>21 D<EB1FF0EBFFFC000313FF3907F03F80390F80
1FC0391F000FE0001E1307003EEB03F0123C127C007814F81401A212F8A615F0A2140315
E06C130715C0140F00F6EB1F8000F7EB3F0038F3C1FE38F1FFFC38F07FF0EB1FC06CC8FC
A77EA45A12401D2D799F27>26 D<130F137FEA07FF127FB5FCA212017E137FA7137EAF13
7FAE13FFA213F0102F79AE24>49 D<EB01FE90380FFF80013F7F90B512F03801F03F3903
C00FF838070007000E6D7EC7FCA21401A45DA25D14035DA24A5AA25D4AC7FC141EA25C5C
14705C495A1303495A49C8FC131E5B5B5B5B485A485A000FB612805A4815005AB7FC5D21
2F7FAE24>I<123C127E12FFA4127E123C08087A8614>58 D<127012F812FC12FEA2127E
123F121FA2120FA2120EA2120C121C121812301220126012400814798614>I<141FEC7F
C014FF0103138014879038070300EB0E0191C7FC131E131C133CA4137CA4B512FEA2D800
7CC7FCB3A6137EA2137C13401A307DAE1E>102 D<D801F001FCEB1FC03C07F803FF01FF
E0261FFC0F01877F007F013F01DF7F00F09039F83FFE073B007FC01FF0039139000FC001
137E017C01071300B1F0FC07F0FE1FF0FFFE19F819F0017891C7EA7FC0014090C8EA3F00
40207E9E42>109 D<01F8137F3A07FC03FFC0000F010F7F383FFE3F3AF87EF81FF03940
7FE00739003F8003EB3E001501B01706170EEEFC3CEEFFF817F06F13C00130150090C812
3C2F20809E30>I<D801E01306D807F8130F001FEC1F80486CEB3F00D8F0FE137CD8407E
5BC66C485AEC83E0011F5B90380FC78002CFC7FCEB07FE5C6D5A6D5A80A280497EEB077E
EB0E3F011E7FEB1C1F496C7E0178EBE0109039F007F03801E0EBF8F00001903803FFE048
486C13C0168090398000FE00C8123C2520809E26>120 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FH cmtt8 8 27
/FH 27 126 df<EB0380EB0FC0131FEB3F80EBFF005BEA01F81203485A485A5B485AA248
C7FCA2123E127EA2127CA212FCA25AA87EA2127CA2127EA2123E123FA26C7EA26C7E7F6C
7E6C7E1201EA00FE7FEB3F80EB1FC0130FEB0380123476AD23>40
D<127012FC7E127FEA3FC0121FEA07E07F6C7E6C7E1200137EA27FA27F1480A2130FA214
C0A21307A8130FA21480A2131FA214005BA2137EA25B1201485A485A5BEA1FC0123F48C7
FC12FE5A127012347AAD23>I<121FEA3F80EA7FC013E0A4123F121F1207A2EA0FC0121F
EA7F80EAFF005A5A12700B12748823>44 D<123E127FEAFF80A5EA7F00123E0909738823
>46 D<121FEA3F80EA7FC0A5EA3F80EA1F00C7FCAB121EEA3F80127F13C0A4123F121F12
0FA2EA1F80123FEA7F005A5A12F812700A26749C23>59 D<007FB512F8B612FCA4003F14
F8C9FCA6003FB512F8B612FCA46C14F81E127E9C23>61 D<B512F014FE80158015C0390F
800FE01407EC03F01401A5140315E01407EC1FC090B5128015005C8015C09038800FE014
07EC03F0140115F81400A5140115F01403EC0FE0B6FC15C01580150014FC1D297EA823>
66 D<397FC01FF800FFEB3FFC13E0A2397FF01FF8390F7003C0A213781338A2133CA213
1C131EA2130E130FA3EB0783A3EB03C3A3130114E3A2130014F3A21473A2147B143BA238
7FE03F38FFF01FA2140FD87FE013801E297EA823>78 D<387FFFC0B512F88014FF7E390F
807F80EC1FC0140F6E7E1403A514074A5A141FEC7F8090B5C7FCA214FC8080EB807F6E7E
141F140FA61587ED8F80A215CFD87FF013DF39FFF807FF1600806C486C5AC812F8212A7F
A823>82 D<9038FF83800003EBE3C04813FF121F5AEA7FC0EB003F00FE131F48130FA25A
1407A26CEB038091C7FC127E127FEA3FF06CB4FC6C13F06C13FC00017F39001FFF800101
13C0EB001FEC0FE01407EC03F0A20070130112F8A36C1303A26CEB07E06C130F9038E03F
C090B5FC15005C00F15B38703FE01C2B7DA923>I<007FB512F8B612FCA439F807C07CA5
0070143800001400B3A7EBFFFE487FA36C5B1E297EA823>I<397FF07FF0EBF8FFA3EBF0
7F3907E03F000003133EEBF07E0001137CEBF8FC00005B13FDEB7DF0137F6D5AA26D5AA2
6D5AA280131F80133F80137DEB7CF813F8147CEA01F0801203497E12079038C00F80120F
397FE03FF8D8FFF013FCA3D87FE013F81E297EA823>88 D<387FFFC0B512E0A314C000F8
C7FCB3B3A6B512C014E0A36C13C0133473AD23>91 D<387FFFC0B512E0A37EEA0003B3B3
A6EA7FFFB5FCA36C13C013347EAD23>93 D<3803FF80000F13E04813F8487F80EB80FFEC
3F80381F001FC7FC140F14FF137F0003B5FC120F5A387FF00F130012FCA25A141F7E6C13
3F387F81FF90B512FC6C14FE7E000713C73901FE01FC1F1D7D9C23>97
D<ECFF8015C0A41407A7EB7F873801FFE74813F7000F13FF5A13E0383F803F387F001F00
7E130FA2481307A25AA56C130FA2127E141F007F133F383F807FEBE0FF6CB512FE7E0003
13F76C13C738007F031F297EA823>100 D<EB3FC0EBFFF800037F4813FF481480381FF0
7F393F801FC0EB000F007E130715E05AB6FCA415C000F8C8FC7EA2007EEB01C0007FEB03
E0383F800713E0391FF81FC06CB5FC6C14800001EBFE006C6C5AEB1FE01B1D7D9C23>I<
147F903801FFC0010713E05B5BEB3FCF140F90383E07C091C7FCA4007FB51280B612C0A3
6C1480D8003EC7FCB3383FFFFE487FA36C5B1B297EA823>I<133813FEA5133890C7FCA6
EA7FFC487EA3127FEA003EB3387FFFFEB6FCA36C13FE182A7AA923>105
D<EA7FFEB5FCA37EEA001FB3AD007FB512C0B612E0A36C14C01B297CA823>108
D<38FF81FCEBC7FF01DF138090B512C0A23907FE0FE0EBF807EBF00313E0A313C0AD39FF
FE1FFF5CA380201D7F9C23>110 D<133F3801FFE0487F487F487F381FC0FE383F807F38
3E001F007E1480007C130F00FC14C0481307A66C130FA2007C1480007E131F6CEB3F006D
5A381FE1FE6CB45A6C5B6C5B6C5BD8003FC7FC1A1D7C9C23>I<38FF81FCEBC7FF01DF13
C090B512E015F03907FE0FF8EBF8039038F001FCEBE000A249137EA2153EA5157E7F15FC
7F14019038F803F89038FE0FF090B5FC15E001DF138001CF1300EBC3F801C0C7FCAAEAFF
FEA51F2C7F9C23>I<137013F8A7007FB51280B612C0A36C1480D800F8C7FCACEC01C0EC
03E0A3EBFC07140F9038FE1FC0EB7FFF158090383FFE00EB0FFCEB07F01B257EA423>
116 D<397FF07FF039FFF8FFF8A3397FF07FF03903E03E003801F03C3800F87CEB78F8EB
7CF0EB3FE0131F6D5A5C1307497E497E133DEB3CF0EB7878EBF07C0001133C497E3803C0
1F397FF03FF839FFF87FFCA3397FF03FF81E1D7E9C23>120 D<EC1FE0ECFFF05B130715
E090380FF00014C05CAE131F137FD87FFFC7FC485A5BA27F6C7EC66C7E131F130FAE8014
F0903807FFE015F013017FEC1FE01C347DAD23>123 D<EA7FC0EAFFF87F13FF7EC66C7E
131F130FAE8014F0903807FFE06D13F07FA25B4913E090380FF00014C05CAE131F137FD8
7FFFC7FCB5FC13FC5BEA7FC01C347DAD23>125 D E
%EndDVIPSBitmapFont
/FI 134[33 2[33 37 22 26 26 1[33 29 37 1[18 2[18 1[33
1[26 33 27 31 29 51[22 45[{TeXBase1Encoding ReEncodeFont}18
66.4176 /Palatino-Italic rf /FJ 153[17 24 30 47[25 25
25 25 49[{TeXBase1Encoding ReEncodeFont}7 49.8132 /Palatino-Roman
rf /FK 140[25 3[32 34 51 3[17 2[19 28 36 1[32 45[29 29
29 29 49[{TeXBase1Encoding ReEncodeFont}13 58.1154 /Palatino-Roman
rf
%DVIPSBitmapFont: FL eurm6 6 16
/FL 16 121 df<EB7F803803FFE03807C1F8380F007C001E137E48133E1238141F1278A2
1270A312F0A2141E6C133E143C147C6C13F838F601F038F307E038F1FFC038F07E0090C7
FC12701278A5127C12781821799724>26 D<D9E006131C2603C01E133ED80780143FEA0F
00001E8148ED0F80A2007C15071278A212F81700A3160E141F6C495BED8018007E016F13
70007F9038CFE0E03A3FC387FFC0261FFE0390C7FC390FFC01FCD803F0C9FC29187A9636
>33 D<1302EB1F80EB7FC0497E3801C3F0380381F848C67E000E7F48137E805A80127800
701480140F12F0A21407A66C1400A3007C130EA2007E5B123E003F5B6C6C5AEBE1E06CB4
5A6C90C7FCEA01FC19247CA222>48 D<1378EA03F8123F12FF12011200B3AB13E00D2379
A222>I<EB1FC0EBFFF000037F380783FCEA0E000018137EC7FC143EA4143CA25CA21470
5CA2495A495A91C7FC5B130E5B5B5B5B485A485A48C8FC120E001FB512C05A481480B6FC
1A237DA222>I<EB1F80EBFFE0487F380783F8380C01FCEA0800C7127CA414785CA2EB01
C0EB0780011EC7FC13FC3803FFE0380007FCEB00FE147F80EC1F80A2140FA31500A20020
131E127000785B00FC5B387F01E0381FFF80D803FCC7FC19247DA222>I<1418147814F8
130113031307EB0678130E131C13381330136013E0EA01C0EA038013005A120E5AA25A5A
12F0B612E0A2C7EA7800A8147014801B237EA222>I<380FFFFEA25CA2000CC8FCA8EB3F
C0380DFFF0380F03FC380C00FEC7127F801580141FA61500A200205B0060133E00F05B6C
5B6C485A387E07E0381FFF80D803FCC7FC19237DA122>I<147FEB01FE1307EB1F02EB38
0013F0EA01C0485A48C7FC1206120E5AA25AA21278EB0FC0EB7FF03871FFFCEAF78338FE
00FE48137E48133FA2141FA27E141E127C007E131C003E133C003F13386C1370380FC1E0
3807FF803801FC0018247BA222>I<EB1F80EB7FF03803FFFC380701FE381E007F003E7F
003C148048131F140F12F8A21500A27E6C131E127E387F807C6CB45A6C13B83807FC70C7
5A5C1301495A49C7FC1306130E5B5B13785B12015B1203485A19237CA222>57
D<1670ED03E0ED0F80ED7C00EC01F0EC0F80023EC7FCEB01F0EB07C0013EC8FCEA01F8EA
07C0003FC9FC12F8123EEA0FC0EA01F0EA007EEB0F80EB03F0EB007CEC1F80EC03E0EC00
FC151FED07E0ED00F01630241C7B9930>60 D<B612C06C14FC3A0F8000FF8090C7EA0FE0
ED07F0ED01F8A2ED00FC167CA2167E163EA9167CA316F8A2ED01F01503ED07E0ED0FC0ED
1F806DEBFF00EC0FFC48B512E04AC7FC27227AA134>68 D<B612FEA239000780041500B3
AB130F91C7FC1F227BA128>84 D<EA0780261FE03E137E3B7FE1FF83FF80D8E3E701DF7F
3A81FE0FFC0F3A01F007E0079038E003C01603AC184018E0EFE180EFFF0001C090388001
FCC913F033197B973A>109 D<EA0780391FC03F80393FE1FFE0EAE3EF39C1FF07F03801
F80113E01400AC1618EDF878EDFFE016C00180EB7F00C8123C25197D972B>I<38078001
391FC003C0397FE0078039C3F00F000001131E3800F838EB7870EB7CE0EB3FC05C6DC7FC
7F80497E133FEB73E0EBE1F013C13901C0F8083903807E383907007FF048EB3FC0000EEB
1F80C7EA0F001D187D9623>120 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FM eurm9 9 8
/FM 8 71 df<49B4FC010F13C0013F7F497F9038FC0FF83901F003FC3803E00148486C7E
5B000F147EA248C7FCA2157C5A123E5D5D4A5A007E495A4A5A021FC7FC14FCEB0FF0ECFF
E015F890380003FEEC00FFED7F80ED3FC0151FED0FE0A216F01507A212FEA516E0150FA2
010414C0010CEB1F80010E133F011EEB7F00013F13FEEC83FCECFFF0010F13C0D903FCC7
FC90C9FCA97EA312F81260244378B333>12 D<ED1FC0D801F0EBFFF02607FC0313F8381F
FE0F007F5B00F090387E07FC39C0FFF00339007FC0011480EB7E001500B3A6137C136090
C8FCA216FEAA16F01680273282A22B>17 D<EA01FEEA1FFF007F7F38307FC038001FE06D
7EA26D7EA21303801301A26D7EA4147FA35C81EB01DF1303EC8FC01307EC07E0130F130E
90381E03F0131C90383C01F8137881EBF000814848137EA24848137F8148481480151F48
C713C05AED0FE0123E16F048140716F800FC140300F015E0C8EA010025347EB22A>21
D<1504000F141C007F14FC5A7EA77EAFEB80014A6C13800207EB01C0903AC01FFF0F80D9
E07CEBFF009039FFF07FFC02E05B028013E03A3BFE001F80D838F090C8FC90CAFCA7123C
A6123812202A3379A230>I<170C177C0003B712F8000F16F05A4816C0EEFE003A7C00E0
03E0267801C05B12700060140712E038C00380A2128038000700A2150F5B130E131EA213
1C133CA24980A213F85B000181EEF8604848903807FFF017E000071680496D1300ED01F8
C64890C8FC2E257EA32F>25 D<170F173F17FCEE03F0EE1FC0EE7F00ED01FCED07E0ED3F
8003FEC7FCEC03F8EC0FE0027FC8FCEB01FCEB07F0EB1FC001FEC9FCEA03F8EA0FE0EA7F
8000FECAFCEA3F80EA0FF0EA03FCEA007FEB1FC0EB07F0EB01FE9038003F80EC0FE0EC03
F8EC00FFED3FC0ED07F0ED01FCED007FEE1FE0EE07F8EE00FE173F170F1702302A7CA63A
>60 D<12F012FC123FEA0FE0EA03F8EA00FEEB1F80EB07F0EB01FCEB007FEC1FC0EC03F8
EC00FEED3F80ED0FE0ED01FCED007FEE1FC0EE07F0EE01FEEE007FEE01FCEE07F0EE3FC0
EEFF00ED03F8ED0FE0ED7F80DA01FEC7FCEC07F0EC1FC0027FC8FCEB03FCEB0FF0EB3F80
01FEC9FCEA03F8EA1FE0EA7F8000FCCAFC12F01240302A7AA63A>62
D<B71280A27E3807FC016C48C8FC1201B16D137F90B6FCA301FCC8FC5BB3A47FEA03E021
337DB226>70 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FN msbm10 10 2
/FN 2 79 df<007FB612C0B712F86C15FE3B03E01E1F7F80000090393C070FC002381383
92380381E0EE80F0177016C0030113781738A61778177017F003035B168192380787C04C
5ADB0F3FC7FCED3FFC91383FFFF816FE707E9139383FDFE0923801E3F0923800F0F8EE78
3CEE381E170E170FEE3C07041C13801703A71707043C1300EE380F171EEE783CEE707CEE
F1F891393C01E7E0000390391E07FFC0007FB7C7FCB712FC6C15C031397EB826>66
D<B500E0903801FFFE6E5B6E7F261F003C9038000FE02607801CEC07C02603C01EEC0380
6C6C7E6D6C7E140301F87F6D6C7E9038DE00F001CE137001CF13789038C7803C9038C3C0
1C01C1131E6E7E9039C0F00780EC7803023813C091383C01E091381E00F06E13706E1378
ED803C913803C01E913801E00E0200130F9238F0078392387803C3ED3C01031C13E39238
1E00F36F137B923807803B0303133FEEC01F923801E00F923800F0071678EE3803163C16
1E160F16071783EE03C3EE01E3160017F3177B486C153F486C151F387FFFC0B5150F6C16
07CA12031701373B7DB832>78 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FO euex9 9 4
/FO 4 42 df<131E5BA35BA35BA2485A12035B12075B48CDFC5A123E007FBA12E0BB12F0
A26C19E0003ECDFC7E7E6C7E7F12037F12016C7EA21378A37FA37F44267CA54D>32
D<F00780727EA3727EA3727EA21978197C193C193E191E851A80F107C0007FBA12E0BB12
F0A26C19E0CCEA07C0F10F801A00191E193E193C197C197861A24E5AA34E5AA34E5A4426
7CA54D>I<011EEE078049707EA349707EA349707EA2484817780003187C49173C000718
3E49171E48CB7E481980003EF007C0007FBA12E0BB12F0A26C19E0003ECBEA07C06CF00F
806C19006C6C171E6D173E0003183C6D177C000118786C6C5FA201784C5AA36D4C5AA36D
4C5A44267CA54D>36 D<1778A283A383A283841707717EA2717E717E84187C183C007FB8
12FEBAFC856C18E0CBEA03F0727E727E193FF11F80F10FE0A2F11F80F13F0019FC4E5A4E
5A007FB95ABA128096C7FC6C5FCB123C187C60604D5A4D5AA24D5A170F95C8FC171EA25F
A35FA243367CAD4D>41 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FP euex10 20.74 1
/FP 1 41 df<F00FE0A34E5AA24E5AA34ED1FCA218FEA24D5AA24D5AA24D5A170F60171F
604D5A177F95D2FC5F4C5A5F16034C5A4C5A5F161F4C5A4C5A4CD3FC5D4B5A5E4B5A4B5A
4BC112F85D92C212FC5C5C4A21F84A21F0DA1FF0D4FCEC7FE04A5A495B010790D5FC495A
EB3FF8495A48485A481380000F90D6FCEA3FFEEAFFF8A2EA3FFCEA0FFF6C7F00017F3800
7FF06D7EEB0FFC6D7E6D7E010013C06E7E6E7E6E7E0207C212F06E21F86E21FC80816F20
F881DB0FF0D3FC6F7E6F7E6F7E6F7E707EA2707E707E707E160783707E1601707E838371
7EA2717E84170F717EA2717EA2717EA2717EA2187FA2727EA3727EA2727EA3967975E7AC
>40 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FQ cmitt10 10 17
/FQ 17 119 df<EA0F80EA1FC0EA3FE0127FA212FFA3EA7FC0EA3F80EA1E000B0B6F8A2C
>46 D<EC03F0EC1FFCEC7FFF91B512801303903907F83FC090390FE00FE0EB1FC090383F
800791380003F0137E5B485A1501484814F85B12075B120FA2484814F0150390C7FC5AA3
007EEC07E0A3150F16C05AED1F80A2153F1600A2157E15FE6C5C4A5A007E13035D007F49
5A4A5A6C6C485A147F261FE0FEC7FCEBFFFC6C5B6C5B6C13C0D8007EC8FC253577B32C>
48 D<15E0EC01F0A214031407140F141FEC3FE0147FEB01FF133F4913C0A214DFEB3F1F
01001380A2143FA21500A25CA2147EA214FEA25CA21301A25CA21303A25CA21307A25CA2
130FA25CA2131FA2007FB512C0B612E0A36C14C01C3477B32C>I<000FB7FC481680A35A
903A803F803F0001001300A248495B167E007E137EA2003C01FE133CC791C7FC5CA21301
A25CA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA291C9FCA25BA2137EA213
FEA2387FFFF0B57EA36C5B293375B22C>84 D<91B512F04914F8A25B16F002F0C7FCA213
07A25CA2130FA25CA2131FA25CA2133FA291C8FCA25BA2137EA213FEA25BA21201A25BA2
1203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C9FCA25AA2127EA212FEB512
F880A36C5B254170B92C>91 D<91B512F04914F8A37F91380003F0A3150716E0A3150F16
C0A3151F1680A3153F1600A35D157EA315FE5DA314015DA314035DA314075DA3140F5DA3
141F5DA3143F92C7FCA35C147EA3387FFFFEB55AA36C5B25417EB92C>93
D<EB03F090380FFC7890383FFFFC5B90B5FC3801FE1F48486C5AEA07F8380FF00713E0D8
1FC05B1380123F1300485C127EA2140F12FE485CA291381FC180ED87E0143FA2EC7F8F91
38FF0FC05B6C5AD87E07EB1F80D87F0F133F6CB612006C13DFEC8FFE3907FE07FC3901F8
01F0232476A32C>97 D<EC7F80903803FFE0010F13F8013F13FC5B9038FFC1FE3801FE00
3803FC01EA07F8EA0FF001E013FCEA1FC0393F80007090C8FCA2127EA312FE5AA77E007E
141C007F143E6C6C13FEEBC00F6CB5FC6C14FC6C14F0000114C039007FFE001F2475A32C
>99 D<147F903803FFC0010F13F0013F13F84913FCEBFFC13801FE004848137E485AD80F
E013FE15FC485A383F800190380007F848133F90B512F015E01580B5EAFE0014F000FCC8
FCA6127E151C007F143E6C6C13FEEBC00F6CB5FC6C14FC6C14F0000114C039007FFE001F
2475A32C>101 D<ED03FCED1FFF4B13C05D17E0EDFE1F15FCA30201EB0FC09238F80780
93C7FCA40103B512F8825B7F5E90260007F0C7FC5DA5140F5DA5141F5DA5143F92C8FCA4
5C147EA514FE5CA313015CA31303001C5B127F130700FF5B130F495AEBFF807E6C90C9FC
EA1FFCEA07F02B457DB22C>I<EA7FFFB51280A37EEA003F1400A25BA2137EA213FEA25B
A21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2003F1318147E1300A248
13FE14FC127EEB01F81303387F87F0EA3FFF6C13E06C13C06C1300EA01FE173370B22C>
108 D<3901F007F03907F81FFC390FFC7FFE486CB5FC48B6128090383FFE1F14F8007E13
F014E0EB7FC012FE00FC1380140049133FC6481400A348485B157EA24913FE0003ECFC18
167EEBF00115F8000715FE020313FC01E013F015F1000F15F8EDF3F001C013FF6E13E016
C0496C13806CC7EA3E0027247AA32C>110 D<903907C00FC090391FF03FF090393FF8FF
FCEB7FFD91B57E9039FE7FF87F01FC497ED801F801E01380EDC01FECFF8000031400495A
A2EBF1FCEA00015CA20103143FA24A1400A201075C167E16FE5E010F13014B5A15076E48
5A011F495A6E485A91B55A93C7FC495BEC9FF8EC07E091C9FC5BA2137EA213FEA25BA212
01A25BA2387FFFE0A2B57E6C5BA2293680A32C>112 D<ECFFE0010713FC011F7F497F49
14809038FF807FEBFC00485A5BA20003EC3F00151C6C6C90C7FC13FEEBFFF86C13FF6D13
C0011F13F001077F9038003FFC1401EC007EA2001C143E127F157E48147C15FC14014849
5A39FF803FF06CB55A6C5C6C5C000749C7FCC613E0212478A32C>115
D<EB01E0497EA31307A25CA2130FA25CA2131FA25C007FB5128015C0B6FC7E1580C66CC7
FCA2137EA213FEA25BA21201A25BA21203A25BA2000714C0EC03F013E0A2000F1307EC0F
E0EBC01FEC3FC0EC7F809038E1FF006CB45A5C6C5B6C13E06C6CC7FC1C3374B22C>I<01
F8EB01C0D803FEEB03E0486C13075A481380D83F9F130F131F007F15C0127E013F131F00
FE130000FC15805B017E133F120001FE14005B5D120149137EA2EDFE180003157E9038F0
01FCA2140316FE913807F8FC140F9038F81FF92601FC3F13F890B6FC6C15F090397FFE7F
E090393FF83FC090390FE00F8027247AA32C>I<017E14F03901FF8001000701C013F85A
4813E001C714FCD83F8713001307007F1401007E15F8EAFE0F00FC13C0131FEC80030000
15F0133F140015074914E0137EA2ED0FC013FE49131F1680A2ED3F005D017E137E5DEB7F
836DB45A6D5B6D5B6D1380D900FEC7FC26247AA32C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FR msam7 7 1
/FR 1 74 df<126012F812FE6C7E13E013F813FE6D7E14E014F814FE6E7E15E015F815FE
EDFF8016E016F816FE16FF16FE16F816E01680EDFE0015F815E015804AC7FC14F814E014
8049C8FC13F813E0138048C9FC12F812E028277AA034>73 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FS msam6 6 1
/FS 1 74 df<126012F812FE6C7E13E013F813FE6D7E14E014F814FE6E7E15E015F815FE
EDFF8016C016E016C01680EDFE0015F815E015804AC7FC14F814E0148049C8FC13F813E0
138048C9FC12F812E023237A9C30>73 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FT cmtt9 9 89
/FT 89 127 df<123C127E12FFAF127EAE123C1200A7123C127E12FFA4127E123C082F71
AE27>33 D<00101320007C13F838FE01FCAAEAFC00007C13F8A900381370161778AE27>
I<90383C03C090387E07E0A7EBFE0F01FC13C0A2007FB512FEB7FCA4003F14FE3901F81F
80AC003FB512FEB7FCA46C14FE3903F03F00A200075BEBE07EA73803C03C202E7DAD27>
I<EB0380497EA5EB1FF0EBFFFE0003EBFF804814C0001F14E09038E7DFF0393F87C7F838
7E07C3007C13C100FCEBC0FC12F814C1A300FCEBC0F800FE1470007F14001387EA3FFF7E
6C13F86C13FE6CEBFF80C614C0010F13E06D13F014CFECC3F814C10038EBC0FC127C00FE
147CA412FC00FE14F8007E13C1007FEBC3F0383F87C79038F7FFE06CB512C06C14800003
14006C13FC38003FE0EB07C0A56D5A1E3A7CB327>I<000F1470486C13F8383FC001EA7F
E0140315F038FFF00700F914E0A2140F15C0A2141F00FF1480387FE03F1500A26C485A38
1F807E380F00FEC75AA213015CA213035C13075CA2130F5C131F5CA2133F91C7FCA24913
F090387E01F89038FE03FC9038FC07FEA212019038F80FFF0003149F13F0A2120713E0A2
000F14FF9038C007FE121F1380EC03FC000FEB01F86CC712F0203A7DB327>I<131FEB7F
C0497E5A80EA03F1EBE1F8EA07E013C0A513C15C9039C3F1FF80D9E3E113C03803E7E3EB
EFC101FF1480913881F800EC01F0EA01FEEBFC0301F85B00031307D807FC5B120F381FFE
0FD83FBE5BEB3F1FD87E1F90C7FC149F38FC0FBF14FE1307ECFC020103EB0F80EB01F8A2
38FE03FC387E07FE397F1FFF9F6CB61200149F6CEB0FFE390FFC03FC3903F000F822307E
AE27>I<120FEA1FC0123F13E0A213F0121F120F1201A4120313E01207EA0FC0A2EA3F80
EA7F005A5A12F812700C1773AD27>I<EB01C0EB03E0130F131FEB3FC0EB7F80EBFE0048
5A5B1203485A5B485AA2485AA248C7FCA3127EA45AAC127EA47EA36C7EA26C7EA26C7E7F
6C7E12017F6C7EEB7F80EB3FC0EB1FE0130F1303EB01C0133A73B327>I<127012F812FE
7E6C7E6C7EEA0FE06C7E12037F6C7E1200137EA27FA2EB1F80A3EB0FC0A4EB07E0ACEB0F
C0A4EB1F80A3EB3F00A2137EA25B1201485A5B1207485AEA3FC0485A48C7FC5A12F81270
133A7AB327>I<130F497EA60078EB81E000FEEB87F000FF138FEBDFBF6CB512E06C14C0
000F1400000313FCC613F0A2000313FC000F13FF003F14C04814E039FFDFBFF0EB1F8F00
FE13870078EB81E00000EB8000A66DC7FC1C207BA627>I<EB03C0497EAD007FB512FEB7
FCA46C14FE390007E000AD6D5A20227DA727>I<120FEA3FC013E0EA7FF0A213F8A2123F
A2120F120113F01203EA07E0121FEA7FC0EAFF8013005A12700D14738927>I<007FB512
F8B612FCA46C14F81E067C9927>I<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A7289
27>I<1538157C15FCA2140115F8140315F0140715E0140F15C0141F1580143F1500A25C
147E14FE5C13015C13035C13075C130F5CA2131F5C133F91C7FC5B137E13FE5B12015B12
035BA212075B120F5B121F5B123F90C8FC5A127E12FE5AA25A12781E3A7CB327>I<EB07
E0EB3FFC497E90B5FC4814803903FC3FC03907F00FE0390FE007F0EBC003391F8001F8A2
48C712FCA2003E147C007E147EA3007C143E00FC143FAC007E147EA46C14FCA2EB800100
1F14F8EBC003000F14F0EBE0073907F00FE03903FC3FC06CB512806C14006D5A6D5AEB07
E020307DAE27>I<130E131FA25B5BA25B5A5A127FB5FCA213BFEA7E3F1200B3AA003FB5
12805A15C01580A21A2F79AE27>I<EB3FE03801FFF84813FE000FEBFF804814C0393FE0
7FE0EB800F397F0007F0007EEB03F800FE13015A6C14FC1400A3127CC8FCA2140115F8A2
140315F01407EC0FE0EC1FC0143FEC7F80ECFF00495A495A495A495A495A495A495A01FE
C7FC485AD807F81378484813FC485A485A48B5FCB6FCA36C14F81E2F7CAE27>I<EB1FF8
EBFFFE0003EBFF80000F14C015E0391FF01FF0393FC007F8EB800115FC1400A26CC7FC12
04C8FC140115F81403EC07F0140FEC3FE090381FFFC0491380A215E06D13F09038001FF8
EC03FC1401EC00FE157E157F153FA21238127C12FEA2157F48147E6C14FE007FEB01FCEB
8003393FF01FF86CB512F06C14E000031480C6EBFE00EB1FF820307DAE27>I<EC3F804A
7EA214FF5BA2EB03F7EB07E7A2EB0FC71487131FEB3F07A2137E13FCA2EA01F813F01203
EA07E0A2EA0FC0EA1F80A2EA3F00123E127E5AB7128016C0A36C1580C73807C000A849B5
FC491480A36D1400222F7EAE27>I<001FB512E04814F0A315E090C8FCACEB1FF0EBFFFC
14FF158015C09038F03FE09038C00FF0EB0007003EEB03F8001C1301C7FC15FC1400A312
7C12FEA2140115F84813036C14F0007F130F9038801FE0393FE07FC06CB512806C14006C
5B000113F838007FC01E2F7CAD27>I<14FF010713C0011F13F04913F890B5FC48EB81FC
3803FE0113F8EA07F0EA0FE09038C000F8001F1400485A90C8FCA25A127EEB0FF838FE3F
FE48B51280B612C015E09038F80FF09038E007F890388001FC90C7FC15FE48147E157F15
3F5A7E127EA3127F6C147F157E6C6C13FE9038C001FC120F9038F007F83907F81FF06CB5
12E06C14C06C148090383FFE00EB0FF820307DAE27>I<1278B612FE15FFA315FE39FC00
01FCEC03F8EC07F0007814E0C7120FEC1FC01580143FEC7F00147E14FE5C13015C13035C
13075CA2495AA3495AA3133F91C7FCA55B137EA9133C20307DAE27>I<EB0FF0EB7FFE48
B512804814C0000F14F0EBF81F391FE007F8393F8001FC90C7FC4814FE007E147EA56C14
FCEB8001391FC003F8390FE007F03907FC3FE00001B5128039007FFE006D5A90B5FC0003
14C0390FF00FF0391FC003F8393F8001FC90C7FC007E147EA248143FA6007E147EA2007F
14FE393F8001FC391FE007F8EBF81F6CB512F06C14E00001148039007FFE00EB0FF02030
7DAE27>I<EB0FF0EB7FFC48B5FC4814804814C0390FF81FE0391FE007F0393FC003F8EB
8001D87F0013FC007E130012FE48147EA4157F153F157F7E127E007F14FF7E6D5A381FE0
07380FF01F6CB6FC7E6C143F39007FFC7F90381FF07E90C7FCA215FCA2140115F8001F13
03393F8007F0EC0FE0141FEC3FC09038C0FF806CB512005C6C13F8000313E0C613802030
7DAE27>I<121EEA7F80A2EAFFC0A4EA7F80A2EA1E00C7FCAC121EEA7F80A2EAFFC0A4EA
7F80A2EA1E000A20729F27>I<120FEA3FC0A2EA7FE0A4EA3FC0A2EA0F00C7FCAC120FEA
3F8013C0127F13E0A3123FA2120F120713C0120FA2EA3F80EA7F005A5A12F812700B2A73
9F27>I<153815FC14011407140FEC3FF8EC7FE0ECFFC001031300495AEB1FF8495A495A
3801FF804890C7FCEA0FFC485AEA7FF0EAFFC05BA27FEA7FF0EA1FF86C7EEA03FF6C7F38
007FE06D7E6D7EEB07FE6D7E010013C0EC7FE0EC3FF8EC0FFC14071401140015381E287C
AA27>I<007FB512FEB7FCA4003F14FEC9FCA6003FB512FEB7FCA46C14FE20127D9F27>I<
127012FC7E6C7E7FEA7FF0EA1FF86C7EEA03FF6C7F38007FE06D7E6D7EEB07FE6D7E0100
13C0EC7FE0EC3FF8EC0FFC1407A2140FEC3FF8EC7FE0ECFFC001031300495AEB1FF8495A
495A3801FF804890C7FCEA0FFC485AEA7FF0EAFFC05B48C8FC5A12701E287CAA27>I<EB
FFF8000313FF000F14C0003F14E04814F09038C01FF839FF0003FC4813011400A2140100
7C1303C7EA0FF8EC1FF0EC7FE0ECFFC0491300EB03FC495A5C495A5C131F5CA76DC7FC90
C8FCA7130F497E497EA46D5A6DC7FC1E2E7CAD27>I<EB03F0497EA2497EA4143CEB1F3E
A5EB3F3FA3EB3E1FA2017E7FA4496C7EA548486C7EA390B5FCA24880A3EBF003A248486C
7EA4000F803A7FFC0FFF8000FF15C06D5A497E007F1580222F7EAE27>65
D<007FB5FCB612C08115F87E3907E003FCEC00FE157E157F81A6157EA25D1403EC0FF890
B55A15C015F081819038E000FE157FED3F80151FA2ED0FC0A6151F1680153FED7F004A5A
007FB55AB65A5D15E06C1480222E7FAD27>I<903803F80E90381FFE1F90383FFFBF90B6
FC5A3803FE0F3807F803497E48487E485A49137FA248C7123FA25A127E151E150012FE5A
AA7E127EA2151E007F143F7EA26C7E157F6D137E6C6C13FE3907F001FCEBF8033903FE0F
F86CB512F06C14E0013F13C06D1300EB03F820307DAE27>I<387FFFFC14FFB612C06C80
813907E00FF81407EC01FC6E7EA2157E157F811680151FA316C0150FABED1F80A3153F16
00A25D15FEA24A5A4A5A140F007FB55A5DB65A6C91C7FC14FC222E7FAD27>I<007FB612
80B712C0A37E3907E0000FA6ED078092C7FCA4EC07804A7EA390B5FCA5EBE00FA36E5A91
C8FCA4ED03C0ED07E0A7007FB6FCB7FCA36C15C0232E7FAD27>I<007FB61280B712C0A3
7E3907E0000FA6ED078092C7FCA4EC07804A7EA390B5FCA5EBE00FA36E5A91C8FCAC387F
FF80B57EA36C5B222E7EAD27>I<903807F03890381FFC7C90387FFFFC90B5FC5A3803FC
1F3807F00F380FE007EBC003001F13011380123F90C7FCA2127EA2157892C7FC5AA8EC1F
FF4A1380A3007E6D1300EC00FCA36C1301A21380121FEBC003120FEBE0073807F00F3803
FC1F6CB5FC7EEB7FFE90381FFC78D907F0C7FC21307DAE27>I<3A7FFE07FFE0B54813F0
A36C486C13E03A07E0007E00AF90B512FEA59038E0007EB03A7FFE07FFE0B54813F0A36C
486C13E0242E7FAD27>I<007FB512E0B612F0A36C14E039001F8000B3B2007FB512E0B6
12F0A36C14E01C2E7BAD27>I<387FFFC080B5FC7E5CD803F0C8FCB3AAED0780ED0FC0A7
007FB6FCA2B7FC7E1680222E7FAD27>76 D<D87FE0EB7FE0486CEBFFF0A26D5A007F15E0
000F150001B813DFEBBC03A3EBBE07019E139FA3EB9F0FA2018F131FA2149FA2EB879EA4
EB839C14FCA3EB81F8A2EB80F01400AAD87FF0EBFFE0486C4813F0A36C486C13E0242E7F
AD27>I<3A7FF003FFE0486C4813F0A213FC007F6D13E000079038003E0013DEA313CFA3
148013C714C0A213C314E0A213C114F0A3EBC0F8A31478147CA2143C143EA2141E141F14
0FA3EC07BEA3EC03FEEA7FFCEAFFFE1401A26C486C5A242E7FAD27>I<EBFFFC0007EBFF
80001F14E0A24814F0EBC00F397F8007F8EB0003007E1301A348EB00FCB3A76C1301007E
14F8A3007F1303EB8007393FE01FF090B5FC6C14E0A200071480C6EBFC001E307CAE27>
I<007FB5FCB612E081816C803907E003FEEC00FF81ED3F80151F16C0150FA6151F168015
3FED7F005DEC03FE90B55A5D5D5D92C7FC01E0C8FCADEA7FFEB5FCA36C5A222E7FAD27>
I<EBFFFC0007EBFF80001F14E0A24814F0EBE01F397F8007F8EB0003007E1301A300FE14
FC481300B3A4EB07E0A200FE13F1007E14F8EB03F9A2387F01FF1381D83FE013F090B5FC
6C14E0A200071480C6FC9038001FC0A2EC0FE0A2EC07F0A2EC03F8A2EC01F01E397CAE27
>I<387FFFF0B512FE6E7E816C803907E01FF014076E7E1401811400A514015D14034A5A
141F90B55A5D5DA281EBE01F6E7E14076E7EA816F0EDF1F8A4397FFE01FBB5EBFFF08016
E06C48EB7FC0C8EA1F00252F7FAD27>I<90387FC0E03901FFF1F0000713FF5A5AEA3FE0
EB801F387F000F007E130712FE5A1403A3EC01E06C90C7FC127E127FEA3FC013F86CB47E
6C13F86C13FE6CEBFF80C614C0010F13E0010013F0140FEC07F81403140115FC14001278
12FCA46CEB01F8A26C130390388007F09038F01FE090B5FC15C0150000F85B38701FF81E
307CAE27>I<007FB61280B712C0A439FC03F00FA60078EC0780000091C7FCB3AB90B512
C04880A36C5C222E7EAD27>I<3A7FFE01FFF8B54813FCA36C486C13F83A07E0001F80B3
AB6D133F00031500A26D5B0001147E6D13FE6C6C485A90387F87F814FF6D5B010F13C06D
5BD901FEC7FC262F80AD27>I<3A7FFC03FFE06D5A00FF15F0007F15E0497E3A07E0007E
00A46C6C5BA4EBF80100015CA46C6C485AA490387E07E0A56D485AA4011F5B149FA3010F
90C7FCA5EB07FEA46D5AA26D5A242F7FAD27>I<D87FE0EB7FE0486CEBFFF0A36C48EB7F
E0001FC7EA0F80A76C6CEB1F00A614F0EB81F83907C3FC3EA4149CEBC79EA30003143CA3
01E7137CEBEF9FA2140FA200011478A49038FE07F8A300005CA2EBFC0390387801E0242F
7FAD27>I<393FFC1FFE387FFE3F815D383FFC1F3903F00FE001F85B1201EBFC1F00005C
EBFE3F017E90C7FCEB7F7FEB3F7E14FE6D5AA26D5AA26D5AA21303130780130F80131F80
EB3F7E147F497E017E7F141F01FC7F140FD801F87F14071203496C7E120701E07F3A7FFC
0FFF8000FF15C06D5A497E007F1580222E7EAD27>I<3A7FFC03FFE06D5A00FF15F0007F
15E0497E3A07F000FE0000035CEBF80100015CA2EBFC0300005CEBFE07017E5BA26D485A
A290381F9F80A3010F90C7FCA2EB07FEA26D5AA26D5AAF90381FFF80497FA36D5B242E7F
AD27>I<003FB512FE4814FFA4007EC712FEEC01FCA2EC03F8EC07F0A2003CEB0FE0C7EA
1FC0A2EC3F80EC7F00A214FE5C1301495A5C1307495A5C131F495A91C7FC5B13FEA2485A
4848131E153F485A485AA2485A485AA248C7FCB7FCA46C14FE202E7DAD27>I<387FFFF0
B512F8A314F000FCC7FCB3B3ACB512F014F8A36C13F0153A71B327>I<387FFFF0B512F8
A37EEA0001B3B3ACEA7FFFB5FCA36C13F0153A7EB327>93 D<131C137E3801FF80000713
E0001F13F84813FC38FFE7FF13C3130000FC133F0078131E180B79AD27>I<007FB512F8
B612FCA46C14F81E067C7E27>I<3803FFC0000F13F04813FC4813FF811380EC1FC0381F
000F000480C71207A2EB0FFF137F0003B5FC120F5A383FFC07EA7FC0130012FE5AA46C13
0F007F131FEBC0FF6CB612806C15C07E000313F1C69038807F8022207C9F27>97
D<EA7FE0487EA3127F1203A914FF01F313C090B512F08181EC81FE49C67E49EB3F804913
1F16C049130FA216E01507A6150F16C07F151F6DEB3F80157F6DEBFF009038FF83FEECFF
FC5D5D01F313C02601E0FEC7FC232E7FAD27>I<EB0FFF017F13C048B512E04814F05A38
0FF807EA1FE0393FC003E0903880008048C8FC127EA212FE5AA67E127EA2007F14F0393F
8001F813C0381FE003390FF80FF06CB5FC6C14E06C14C06C6C1300EB0FF81D207B9F27>
I<EC3FF04A7EA3143F1401A9EB0FE1EB7FFD48B5FC5A5A380FF83F381FE00F383FC007EB
8003EA7F00007E1301A212FE5AA67E007E1303A2127F6C1307EB800F381FE01F380FF03F
6CB612C06C15E06C13FD38007FF9D91FE013C0232E7EAD27>I<EB0FF8EB3FFE90B51280
000314C04814E0390FFC0FF0391FE003F8EBC001D83F8013FC48C7FC127E157E12FEB612
FEA415FC00FCC8FC7E127E127F6C143C6D137E6C7E01F013FE390FFC07FC6CB5FC000114
F86C14F0013F13C0903807FE001F207D9F27>I<EC1FF0ECFFF84913FC4913FE5BEB0FF0
14C0011F137CEC8000A6007FB512F0B612F8A36C14F039001F8000B3A4003FB512C04814
E0A36C14C01F2E7EAD27>I<153F90391FC0FF80D97FF313C048B612E05A4814EF390FF0
7F873A1FC01FC3C0EDC000EB800F48486C7EA66C6C485AEBC01FA2390FF07F8090B5C7FC
5C485BEB7FF0EB1FC090C9FCA27F6CB5FC15E015F84814FE4880EB8001007EC7EA3F8000
7C140F00FC15C0481407A46C140F007C1580007F143F6C6CEB7F009038F807FF6CB55A00
0714F86C5CC614C0D90FFCC7FC23337EA027>I<EA7FE0487EA3127F1203A9147F9038F1
FFC001F713F090B5FC8114C1EC01FCEBFE005B5BA25BB03A7FFF83FFE0B500C713F0A36C
018313E0242E7FAD27>I<130F497E497EA46D5A6DC7FC90C8FCA7383FFF80487FA37EEA
000FB3A4007FB512F0B6FC15F815F07E1D2F7BAE27>I<143C147E14FFA4147E143C1400
A73801FFFE4813FFA37EC7123FB3B0147E1238007C13FE38FE01FC1303B512F814F06C13
E06C13803807FE0018407CAE27>I<EA7FE07F12FF127FA21201A991383FFFC04A13E0A3
6E13C0913803F8004A5A4A5A4A5A4A5A02FFC7FCEBF1FEEBF3FCEBF7F8EBFFFC8080143F
496C7E496C7E01F87FEBF0076E7E6E7E816E7E157E3A7FFFC1FFF002C313F8B512E36C13
C316F0252E80AD27>I<387FFF80B57EA37EEA000FB3B2007FB512F8B612FCA36C14F81E
2E7CAD27>I<397F07C01F3AFF9FF07FC09039FFF9FFE091B57E7E3A0FFC7FF1F89038F0
3FC001E0138001C01300A3EB803EB03A7FF0FFC3FF486C01E3138001F913E701F813E36C
4801C313002920819F27>I<387FE07F39FFF1FFC001F713F090B5FC6C80000313C1EC01
FCEBFE005B5BA25BB03A7FFF83FFE0B500C713F0A36C018313E024207F9F27>I<EB1FE0
EB7FF83801FFFE487F481480390FF03FC0391FC00FE0393F8007F0EB00034814F8007E13
01A248EB00FCA76C1301007E14F8A2007F1303393F8007F0A2391FE01FE0390FF03FC06C
B512806C14006C5B38007FF8EB1FE01E207C9F27>I<387FE0FFD8FFF313C090B512F081
6C800003EB81FE49C67E49EB3F8049131F16C049130FA216E01507A6150F16C07F151F6D
EB3F80157F6DEBFF009038FF83FEECFFFC5D5D01F313C0D9F0FEC7FC91C8FCAC387FFF80
B57EA36C5B23317F9F27>I<90380FF03C90383FFE7E90B5FC000314FE5A380FFC1F381F
E007EBC003383F800148C7FC127EA200FE147E5AA67E007E14FEA2007F1301EA3F80EBC0
03381FE007380FF81F6CB5FC7E6C147E38007FFCEB0FF090C7FCAC91381FFFF8A24A13FC
6E13F8A226317E9F27>I<397FFC03FC39FFFE0FFF023F13804A13C0007F90B5FC39007F
FE1F14F89138F00F809138E002004AC7FC5CA291C8FCA2137EAD007FB57EB67EA36C5C22
207E9F27>I<9038FFF3800007EBFFC0121F5A5AEB803F38FC000F5AA2EC07806C90C7FC
EA7F8013FC383FFFF06C13FC000713FF00011480D8000F13C09038003FE014070078EB03
F000FC1301A27E14036CEB07E0EBE01F90B512C01580150000FB13FC38707FF01C207B9F
27>I<133C137EA8007FB512F0B612F8A36C14F0D8007EC7FCAE1518157EA415FE6D13FC
1483ECFFF86D13F06D13E0010313C0010013001F297EA827>I<397FE01FF8486C487EA3
007F131F00031300B21401A21403EBFC0F6CB612E016F07EEB3FFE90390FF87FE024207F
9F27>I<3A7FFC0FFF80486C4813C0A36C486C13803A07C000F800EBE00100035CA2EBF0
0300015CA2EBF80700005CA390387C0F80A36D48C7FCA3EB3F3FEB1F3EA214FE6D5AA36D
5AA26D5A22207E9F27>I<3A7FFE07FFE000FF15F06D5A497E007F15E03A0F80001F00A3
6D5B0007143EA414F0EBC1F83903E3FC7CA4EBE79EA200011478A301F713F8A2EBFF0F6C
5CA3EBFE0790387C03E024207F9F27>I<393FFC1FFF486C5A168016006C487E3901F807
E06C6C485A4A5A017E90C7FC6D5AEB1F7E5C6D5A13076D5A5C80497E130F497E143EEB3E
3FEB7E1F90387C0F8001F87F00016D7E3803F0033A7FFE1FFF80A2B54813C06C486C1380
A222207E9F27>I<3A7FFC0FFF80486C4813C0A36C486C13803A07E000F800000313015D
13F00001130301F85B1200A26D485A137CA290387E0F80133EA2011F90C7FC5CA2130F14
9E14BE130714FC1303A25C1301A25CA213035CA213075C1208EA3E0F007F5B131FD87E7F
C8FCEA7FFE6C5A5B6C5AEA07C022317E9F27>I<001FB512FE4814FFA490380001FEEC03
FCEC07F8EC0FF0001EEB1FE0C7EA3FC0EC7F80ECFF00495A495A495AEB1FE0495A495A49
C7FC485A4848131E4848133F485A485A485A485AB7FCA46C14FE20207E9F27>I<EC07F8
EC3FFC14FF130315F8903807FE00EB0FF05C5CB0131FEB7F80EA3FFFB5C7FC5BA27F003F
7FEA007FEB1FC0130FB08080EB07FE903803FFF815FC1300143FEC07F81E3A7CB327>I<
127812FCB3B3B3A21278063A70B327>I<EA7F80EAFFF013FC13FF7E00017F38003FC013
1F130FB080EB07F8ECFFF06D13FC7FA25B4913F0ECF800EB0FE05CB0131F133F48B45A00
7F90C7FCB5FC13FC13F0EA7F801E3A7CB327>I<3901F003803903FC07C0000F130F381F
FE1F393FFF7F80397FBFFF0038FE1FFE486C5A00F813F0387003E01A0A7AAD27>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FU cmex10 10 4
/FU 4 92 df<0078EF078000FCEF0FC0B3B3B3B3A4BAFCA47E6C18803A537B7F45>70
D<0078EF078000FCEF0FC0B3B3B3A46C171F007E1880A2007F173F6C1800A26D5E001F17
7E6D16FE6C6C4B5A6D15036C6C4B5A6C6C4B5A6C6C4B5A6C6C6CEC7FC06D6C4A5AD93FF8
010790C7FC6DB4EB3FFE6D90B55A010315F06D5D6D6C1480020F01FCC8FC020113E03A53
7B7F45>83 D<913801FFE0020F13FC027FEBFF8049B612E04981010F15FC499038003FFE
D93FF8EB07FFD97FC001007F49486E7E4848C8EA1FE048486F7E48486F7E48486F7E4915
0148486F7E49167E003F177F90CA7EA2481880007E171FA200FE18C048170FB3B3B3A400
78EF07803A537B7F45>I<007C1A1FA200FEF23F80B3B3B3B3A76C1A7FA26C1B00A26D61
A2003F626D1801A2001F626D1803A26C6C4E5A6D180F0007626C6C4E5A6D183F6C6C4E5A
6C6D4D5A6E5E6D6C4C90C7FCD93FF8EE0FFE6D6C4C5A6DB4EE7FF86D01C04A485A6D01F0
02075B6D01FC021F5B9028007FFFE003B5C8FC6E90B65A020F16F8020316E00200168003
3F4AC9FC030714F09226003FFECAFC51747B7F5C>91 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FV euex10 10 16
/FV 16 126 df<161E167EED01FE1507ED0FF8ED3FE0ED7FC0EDFF80913801FE004A5A4A
5A5D140F4A5A5D143F5D147F92C7FCA25C5CB3B3B3A313015CA3495AA213075C495AA249
5A495A137F49C8FC485A485AEA07F0EA1FE0485AB4C9FC12FCA2B4FCEA3FC06C7EEA07F0
EA03FC6C7E6C7E6D7E133F6D7E6D7EA26D7E801303A26D7EA3801300B3B3B3A38080A281
143F81141F816E7E1407816E7E6E7E913800FF80ED7FC0ED3FE0ED0FF8ED07FE1501ED00
7E161E27C675823E>12 D<130F131EA35BA35BA25BA2485AA2485A12075B48CDFC5A123E
007FBA12FEBCFCA26C19FE003ECDFC7E7E6C7E7F12036C7EA26C7EA21378A27FA37FA37F
482A7BA953>32 D<19F01978A385A385A285A2F10780A2F103C01AE01901F100F01AF81A
7C007FBA12FEBCFCA26C19FECD127C1AF81AF0F101E019031AC0F10780A2F10F00A2191E
A261A361A361482A7BA953>I<146014F0497E497EEB0FFF497F017F13E09038FEF7F039
03F8F1FC390FF0F0FFD87FC0EB3FE0D8FF00EB0FF000FC140300F0140000801510C71400
B3B3B3A3146024497DB82A>I<010F17F0011E1778A34983A34983A24983A24848EF0780
A24848EF03C0000719E049170148CC12F04819F8003E197C007FBA12FEBCFCA26C19FE00
3ECC127C6C19F86C19F06C6CEF01E06D1703000319C06C6CEF0780A26C6CEF0F00A20178
171EA26D5FA36D5FA36D5F482A7BA953>36 D<15F0A24A5AA34A5AA24A5AA24ACBFC5C14
1E5C147C14785C1301495A495A91B912FC4918FE5B4918FC01FCCCFC485A485A485AEA1F
8048CDFC12FEA2123F6C7EEA07E06C7E6C7E6C7E013FB912FC6D18FE7F6D18FC02C0CBFC
6D7E6D7E13001478147C143C80141F806E7EA26E7EA26E7EA36E7EA2473C7AB253>40
D<171EA283A3717EA2717EA2717E8417001878187C183C84181F727E727E007FB9FCBA7E
856C84CC127E85F11F80F10FC0F103F0F101F8F100FEA2F101F8F103F0F10FC0F11F80F1
3F00197E007FB912F8BA5A616C60CB12074E5A4EC7FC181E60187C1878601701604D5AA2
4D5AA24DC8FCA3171EA2473C7BB253>I<1530A21578A215FC4A7EA2EC03CF02077F1587
91380F03C0021F7F91383E01F04A6C7E4A137C49487F0103143F010781011F15E0013F81
017CEC3CF8D801F8157ED807F0ED3F80D81FC0ED0FE0D87F80ED07F8D8FE00ED01FC00F8
EE007C00E0171C00801704C71600B3B3A702601318364980B837>I<EC01F01407140F14
3F147F903801FFC0491380903807FE00495A495A495A495A5C495A4890C7FC5A5B485AA2
485AA2485AA2485AA25B127FA35BA212FFA390C8FCB3B3A51C4B607E4A>56
D<B4FCB3B3A57FA3127FA27FA3123F7FA26C7EA26C7EA26C7EA26C7E7F7E6C7F6D7E806D
7E6D7E6D7E6D7E903803FF806D13C09038007FF0143F140F140714011C4B60804A>58
D<EC1FE0B3B3A7143FA315C0A2147FA21580A214FF15005B5CA2495AA2495A130F5C131F
495A5C495A49C7FC5A485A485A485AEA1FE0EA7FC0485A48C8FC5A7E6C7E6C7EEA1FE0EA
0FF86C7E6C7E6C7E7E6D7E6D7E806D7E130F8013076D7EA26D7EA2807F1580147FA215C0
A2143FA215E0A3141FB3B3A71B9773804A>60 D<12FFB3A9081B60804A>62
D<923801FF80151F92B5FC1403141F147F91B6FC130349EC8000011F01F0C7FC4990C8FC
EB7FFCEBFFF04813C04890C9FC485AEA0FF8485A485A5B485A48CAFCA25A5A5A291A8387
25>122 D<EAFFC013FCEBFF8014E014FC14FF8115E0C680010713FC9038007FFEEC1FFF
02077F02017F6E6C7E6F7EED0FF86F7E6F7E15016F7EEE7F80A2163F161F160F291A8187
25>I<12F87E7EA27E6C7E6C7E7F6C7E6C7E6C7E6CB4FC806C13E06C13F8EB3FFE90381F
FFC06D13F86DEBFFF00101ECFF806D7E80140F14016E7E150FED007F291B839A25>I<EE
0F80161F163FA2167FEEFF004B5A15034B5A4B5A4B5AED7FE015FF02035B020F5BDA3FFE
C7FC49B45A010F5B0007B55AB612C092C8FC5C14F814C091C9FC13F890CAFC291B819A25
>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FW cmr10 10 1
/FW 1 62 df<007FB812F8B912FCA26C17F8CCFCAE007FB812F8B912FCA26C17F836167B
9F41>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FX cmsy7 7 9
/FX 9 92 df<1338A50060130C00F8133E00FC137E00FE13FE383FBBF83807FFC0000113
00EA007C48B4FC000713C0383FBBF838FE38FE00FC137E00F8133E0060130C00001300A5
17197B9A22>3 D<49B512FE130F133F01FFC8FCEA01F8EA03E0EA078048C9FC121E121C
123C123812781270A212F05AA77E1270A212781238123C121C121E7E6C7EEA03E0EA01F8
6CB4FC013FB512FE130F130190C9FCAB003FB612FE5A7E27357AA734>18
D<13E0EA01F0EA03F8A3EA07F0A313E0A2120F13C0A3EA1F80A21300A25A123EA35AA312
7812F8A25A12100D1E7D9F13>48 D<49B5FC130F133F01FFC7FCEA01F8EA03E0EA078048
C8FC121E121C123C123812781270A212F05AA2B7FCA300E0C8FCA27E1270A21278123812
3C121C121E7E6C7EEA03E0EA01F86CB4FC013FB5FC130F130120277AA12D>50
D<124012E0A912F012F812F012E0A9124005177C9900>55 D<140C141CA2143CEB3FB8EB
FFF8EA03E03807807C380F007E001E13FF001C13E7003C1480A2D87C0113C0007813C3A2
130300F8EB83E0A213071403A2130F130EA3131E131CA2133C1338A21378D8787013C0A2
387CF00713E0003C1480A2001FEB0F0013C0000F131E00075B3803E0F8EBFFF03807BF80
90C8FCA31B317DAC22>59 D<1406140EB3B2007FB712E0B8FC7E2B287CA734>63
D<027F143E49486C137F010715FF90260F1FC0133FD91E0F141F131C90260007E0131E17
3C1778020314E0EE03C0EE0780EE1E00167CEDF0F0EDF3C0EDFF806E48C7FC15F85D1407
141FEC7DF8EB01F1EB03C1EB0F00133E1378EA01E0485A48C77E121E5A48147C00F8EC7E
075E6CEC7F1EB4EC3FFC4815F0007CEC1FC030287CA730>88 D<0060153000E01570B3A7
6C15F0007015E0007814016CEC03C0001FEC0F80D80FC0EB3F003907F801FE0001B512F8
6C6C13E0010F90C7FC24247CA22D>91 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FY eufm10 10 9
/FY 9 95 df<1304131C137813E0120113C0EA0380120713005A120E121EA2121CA2123C
A312381278A75AB3A712701278A61238A2123CA3121C121EA2120EA27EA2EA0380EA01C0
EA00E013701338130C0E4C76BC20>40 D<7E12E012787E7E7E7EEA038013C0120113E012
00A213F0A213701378A31338133CA6131C131EB3A6131CA3133CA41338A413781370A313
E0A3EA01C013801203EA0700121E127812E00F4C78BC20>I<1538B3A8007FB812FE18FC
B9FCC80038C8FCB3A8152037387CB03F>43 D<007FB812FCA2B9FC36037C963F>45
D<121E127F1380EAFFC0A4EA7F801300123EC7FCB3123E127F1380EAFFC0A41380127FEA
3E000A277CA512>58 D<B912FEA3CCFCADB912FEA337137B9D3F>61
D<EAFFF8A2130012E0B3B3B3ACEAFFF8A2EAE0000D4876BC17>91
D<EAFFF8A2120FEA0038B3B3B3ACEAFFF8A2EA00780D4880BC17>93
D<1408141C141E143F4A7EECF7C0903801E3E0903803C1F090380780F890380F007C011E
7F497F496D7E496D7E48486D7E48486D7E496D7E48C8127C000E81488148ED0F8048ED07
00481504291780BC29>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: FZ lasy9 9 1
/FZ 1 51 df<003FB712E0B812F0A300F0C9FCB3B2B8FCA42C2C7AAF38>50
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: F0 eusm10 10 8
/F0 8 111 df<EA01F8EA07FF4813C0487F381C0FF8263001FC1480486CB414C091393F
C0018048EB0FE00040903907F80300C73801FE0E9138007FFC6F5AED07E02A0E7E9C2E>
24 D<B912C0A3CA1203A61701A832117EA139>58 D<4B7EA24B7EA24B7EA24B7EA2ED1E
F8153EED3C7C157CED783EEDF83F4B7E020180EDE00F020380EDC00702078091380F8003
8391381F000183023E1300834A147C177E4A143E173F4948800103824A140F0107824A14
07010F825C011F6F7E91C8FC496F7E133E017E6F7E5B187E485A84485AF01F80485AF00F
C0485AF007E0485A003FEF03F090CAFC48EF01F8007E18FC00FE17004818FECC12403F3C
7FBA40>94 D<003C18FC00FCEF01F87E007EEF03F0007F18E06C17076D17C0001F170F6C
6C1780181F6C6C1700606C6C163E187E6C6C167C18FC6C6C5E4D5A137C017E4B5A133E01
3F4B5A7F6E4A5A130F6E4AC7FC13076E143E13036E5C010115786D6C14F85F027C13015F
6E13035F6E13075F91380F800F94C8FC6E6C5A161E6E6C5AA26E6C5AA26E6C5AA2ED7DE0
A2ED3FC0151F5E150F93C9FC1506A23E3A7FB840>I<EB03FFEB0FC0EB1F00131E5BA213
7CA21378B31370A45BA25B485A0007C7FC12FCA2B4FCEA03806C7E6C7EA37F1370A41378
B1137CA2133CA2133E131E131FEB0FC0EB01FF184B80BB1B>102
D<12FEEA07E0EA00F813787FA3133EA2131EB1130EA5130613077F1480EB01C0EB007014
1FA214F0EB0180EB03005BA2130EA5131EB35BA3137C5B1203B45A1380184C7EBC1B>I<
122012E0B3B3B3B312C0034B79BC12>106 D<122012F0127012781238123CA2121C121E
120E120F7E7FA212037F12017F12007F13701378A21338133C131C131E130E130FA27F80
130380130180A2130080147014781438143CA2141C141E140E140F8081140381A2140181
14008115701578A21538153C151C151E150E150FA2811680150316C0150116E01500A216
80234C7DBB2A>110 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: F1 eurm7 7 35
/F1 35 121 df<B612F07E383F8003001FEB007090C712781538A31518A21500B3AB121E
1D2879A727>0 D<000C497E00FC1307140FA6127CAC007E131F91383FC040007F9038FF
E1C0903983CFFF80D9FF8713009038FE07FC9038F803F0D873C0C8FC0070C9FCA9127812
702227779A2C>22 D<160E0007B612FC121F4815F84815C03A780700380000701478EA60
06EAC00EA2130CEA801C000014F813181338A25BA213F05B000180A2485AEDFE184848EB
7FF816F0000F15C06CC7EA3F00271C7C9B2C>25 D<EB7FC03801FFF03807C1FC380F007E
001E7F48EB1F80123812780070EB0FC0A312F0A61580141FA2EC3F007E6C137E00EE5B38
E707F838E3FFF000E113C0D8E03FC7FC6CC8FCA77EA312E01A27779B28>I<011FB512E0
90B6FC3A03F1F03FC03A07C03C004048486C130048487E003E80007E6D7E127CA200FC6D
7EA77E5D007E1307127F5D6C6C48C7FCEBC01E381FF07C3807FFF86C13E0C690C8FC231C
799A2B>I<017001E013C03B01E007C001E0D803C0EC03F0D8078015F8D80F001401001E
1500003E16FC003C167CA248163CA312F81738A31770816C010F146017E06C90391FF001
C0007E9138F803803B7F807BFC0F003A3FC1E1FFFE261FFFC05B4A13F03A07FE003F80D8
01F890C8FC2E1C799A3B>33 D<5BEB07C0EB1FE0EB7FF0EBF7F83801C3FC380380FE4848
7E00067F000EEB3F8048131F15C048130FA200781307007014E01403A212F0A21401A66C
14C0A31403007C1480A2007E130715006C5BEB800E381FC03CEBF0786CB45A6C5B6C1380
C648C7FC1B2A7BA824>48 D<130E13FE1207123F12FFA21200137EB3AF13F00F2978A824
>I<EB07F0EB3FFE90B5FC481480D807E013C0380F003F001CEB1FE00008130FC7FC1407
A315C0A31580140F1500141EA25C14385C5CA2495A495A49C7FC130E5B5B5B5B485A485A
120748B512FC5A4814F8B6FCA21E297DA824>I<EB07E0EB3FFCEBFFFE487FEA07C0390F
003F80000C131FC7120FA415005C141E5C5C495AEB07C0013EC7FC3801FFC014FC380003
FF9038007F80EC1FC0EC0FE0A2EC07F0A21403A415E0A20010EB07C0003814800078130F
007CEB1F00B4133C383FC0F8380FFFE0000190C7FC1C2A7DA824>I<127812F812FC12FE
127E123F121FA2120FA2120EA2121C12181230126012400811788516>59
D<B612F8EDFFC03A3FE0001FF8D807C0EB01FEED007FEE3F80EE1FC0EE0FE0160717F016
03A217F81601AAEE03F0A4EE07E0A2EE0FC0A2EE1F80EE3F00167E5EED03F86DEB1FF090
39F001FFC048B548C7FC4814C02D287AA73A>68 D<B612F8A2D80FF0C8FC6C5A1203AC90
B512F05DA201E0C8FCAE7FA26DEB07C090B6FC16807E22277BA62B>I<B612F0A2380FF0
036C48C7FC1203AA1207A36D13E090B5FCA201E0C7FC5BB25B1C287BA724>I<EC1FF849
B5FC010F14C090393F803FF09039FC000FF84848EB03FCD803E0130148481300000F1578
4848143090C9FC5A123E127EA35AA7167891381FFFF8A26CEB003F007E14011500127FA2
6C7EA26C7E6C7E7FEA07FC6CB4FCC6EBE0036DB512F0011FEBFE0001011380262A78A836
>I<B51280A2381FF000EA07E01203B3AE7F487E381FFFC0B5FC122879A71D>73
D<B5FC121FEA07E05BB3AE7F153E48B512FEA215FC1F287AA728>76
D<D8FFF8EB1FE090B6FCA202F0C7FCEA0001B3AF130380A214E023297BA82B>84
D<D8FFE01403161F003F5D120F1207A3163EA25BB3A27FA212037F7F6D14FE6C6C130390
39FFC03FBF9139FFFE3FFC6C02F813F8013F01C01380D907FEC8FC2E297BA736>I<9038
1FE0409038FFFDC03803F83F3807E00F380F8007EA1F00A2123E127EA2127C12FCA87EA2
007F130FEB801F3A3FE07FE1809038FFF7FF6C9038C7FE006CEB03F83903F801E0211C78
9A2C>97 D<EB0FF8EB7FFE3801F07F3803C03F390F801F80EA1F00001EEB0F00003E130E
007E130C007C90C7FCA212FCA87E127E007F14C01401393FC007809038E01E00381FFFFC
6C13F06C13C0D801FEC7FC1A1D7B9B24>99 D<EC1FC0EB01FFEB001F140F1407A8EB1FE7
90B5FC3803F83F3807E01F380FC00F381F80071300123EA2127E127CA212FCA77EA2127F
EB801F3A3FC07FE3809038FFF7FF6C9038C7FE006CEB03F83903F801E0212878A62B>I<
EB0FF8EB7FFC3801E0FE3807803F390F001F80121E003E130F123C127C0078EB3E0038F8
01F0EB0FC0013EC7FCEAF9F0EAFFC048C8FC12F8A37E007C1480007EEB03C0007FEB0F00
383FC07EEBFFF86C5B6C1380D803FEC7FC1A1C799B24>I<13F0487E487EA36C5A6C5A90
C7FCA6EA03E0EA0FF8123F12F112C01200B0140EEBFC3CEBFFF814F0EB7FC0EB1F001728
7EA71B>105 D<13F0EA01F8EA03FCA3EA01F8EA00F01300A6EA01F0EA07F8121FEA7FFC
12E01200137CB3A213FC13F8A213F0EA01E0A2EA03C0EA0780EA0E005A127012600E337D
A719>I<1370EA1FF012FFEA1FE012071203A71538157E5DEC01F0EC07C04A5A021EC7FC
5C14F0EBE1E0EBE38001E7C8FC13EFEBFF8013EFEBE7C0EBE3E0EBE1F0EBE0F8147C8000
077F91380FC060913807E1C0913803FF806E13006E5A49137823287CA728>I<EA07F012
FFA212071203A55BB3A61410EBF038EBF8F0EBFFE06C13C01400EA007C15287CA71C>I<
EA03E03B0FF003F001FC3B3FF81FF80FFF00F19038FFFC7F3C00FBC1FFE07F80903AFF00
7F803F01FC90387E001F49013E130FAF19E0F0C3C0F0FF80F0FE0049013CEB07F8018090
C7EA03E03B1C7C9A40>I<3903E003F8390FF01FFE383FF87F38F1F9E039C1FF007FC648
7F13F881AE1740EE01C0EE8780EEFE005E01C0EB0FF090C7EA07C02A1C7D9A2F>I<EB1F
F890B5FC3903F03F803907C00FC0390F8007E0EA1F00003EEB03F0127E15F8007C130112
FCA715F06C1303127E007F14E06CEB07C01380391FC01F00380FF03E3803FFF8C613C01D
1B7A9A29>I<3803E01F390FF07F80383FF8FFD871F913C03881FF0F3900FE07809038FC
020049C7FCB313E01A1B7D9A20>114 D<EB3F803801FFE03807C1F0380F00F85A001E13
70003E13401400123FA213C0EA1FF0EA0FFC3807FF806C13E038007FF0EB0FF8EB03FC13
01EA10000030137C127800F813786C13F8007E13F0383F83C0381FFF803803FC00161C7B
9A21>I<D807C0130CD81FE0133C007F147EEAC3F00001143FA26C6C131FA21378017C13
1EA2153C7F15381570011E13E0131FEC01C090380F0380EC8700148EEB079C14F85C6D5A
5C5C201B7F9A24>118 D<D803C0010614C0D81FF0011EEB03E0003F023F1307D8E1F816
F000804A130300005C0178EBCF80D97C011401038F14E0EC0307020713C0D93C06EC03C0
DA0C031480021CEBE007D93E181500DA3801130E0270EBF01E0260141C02E05C903A1EC0
00F870011F5D4AEBF9C0EE7F8091C790C7FC163E011E143C011C1418341B7E9A39>I<D8
07C01320D81FE01378D87FF013F800C3495A3901F803C06C6C485AD97C0FC7FCEB3E1E5C
6D5A5C6D5A6D5AA280130FEB1DF0EB18F81338EB707CEBE07E0001013E13809038C03F03
3A03801FC7000007EB0FFE390F0007F85DC7EA01C0211C7E9A26>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: F2 eufm7 7 6
/F2 6 94 df<132013E0EA01C0EA0380EA0700120EA25AA2123CA212381278A5127012F0
B312701278A51238123CA2121CA27E12067EEA0180EA00C013200B3677AA1C>40
D<7E12707E7E7E7E7E1380A2120113C0A2120013E0A51370B31360A313E0A313C0A21201
1380A21203130012065A123812C00C3679AA1C>I<1404141CB2007FB71280B8FCC7001C
C8FCB2141029287BA233>43 D<007FB71280B8FC29027B8F33>45
D<EAFFC0A2EAE000B3B3AA12F8EAFFC0EA80000A3377AA15>91 D<EAFFC0A21201B3B3AA
120712FFEA00400A337EAA15>93 D E
%EndDVIPSBitmapFont
/F3 135[86 3[57 1[67 1[105 1[105 4[57 105 2[86 105 2[86
27[105 143 124 115 134 7[86 86 86 86 86 86 86 86 86 86
48[{TeXBase1Encoding ReEncodeFont}25 172.188 /Palatino-Bold
rf
%DVIPSBitmapFont: F4 cmtt10 10 80
/F4 80 127 df<121C127FEAFF80B1EA7F00AF123EC7FCA8121C127FA2EAFF80A3EA7F00
A2121C09346FB32C>33 D<003C131E007F137F481480A66C1400A6007E7FA6003E133EA3
003C131E001C131C191977B32C>I<010F133C90381F807EA8013F13FE4A5AA4007FB612
F0B712F8A4003F15F03A007E01F800A5EBFE0301FC5BA6003FB612F0B712F8A46C15F03A
01F807E000A30003130F01F05BA86C486C5A25337DB22C>I<EA0F80EA1FC0EA3FE013F0
A213F8A2121F120F1200A4120113F0A2120313E01207EA0FC0121FEA3F80EA7F0012FE5A
5A12700D1B71B22C>39 D<143814FC13011303EB07F8EB0FF0EB1FC0EB3F80EB7F0013FE
485A485A5B12075B120F5B485AA2123F90C7FCA25A127EA312FE5AAC7E127EA3127F7EA2
7F121FA26C7E7F12077F12037F6C7E6C7E137FEB3F80EB1FC0EB0FF0EB07F8EB03FC1301
13001438164272B92C>I<127012FC7E7E6C7E6C7EEA0FE06C7E6C7E6C7E6C7E137F7F14
80131F14C0130FEB07E0A214F01303A214F81301A314FC1300AC130114F8A3130314F0A2
130714E0A2EB0FC0131F1480133F14005B13FE485A485A485A485AEA3FC0485A48C7FC5A
5A1270164279B92C>I<EB0380497EA60020140800F8143E00FE14FE00FF13C1EBC7C7EB
E7CF003FB512F8000F14E0000314806C140038007FFCA248B5FC481480000F14E0003F14
F839FFE7CFFEEBC7C7EB07C100FE13C000F8143E0020140800001400A66D5A1F247AAA2C
>I<EA0F80EA1FE0EA3FF0EA7FF8A213FCA3123F121F120F120013F8A21201EA03F01207
EA1FE0EA7FC0EAFF80130012FC12700E17718A2C>44 D<007FB6FCB71280A46C15002106
7B9B2C>I<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B0B708A2C>I<1507ED0F
80151FA2153F16005D157E15FE5D14015D14035DA214075D140F5D141F5D143F92C7FC5C
147E14FE5CA213015C13035C13075C130F5C131F5CA2133F91C8FC5B137E13FE5B12015B
12035B12075BA2120F5B121F5B123F90C9FC5A127E12FE5AA25A127821417BB92C>I<EB
03F8EB0FFE90383FFF80497F90B57E3901FE0FF03903F803F848486C7EEBE0004848137E
A248487FA248C7EA1F80A2003E140F007E15C0A3007C140700FC15E0AC6C140F007E15C0
A46CEC1F80A36C6CEB3F00A26C6C137E6D13FE00075CEBF0016C6C485A3901FE0FF06CB5
5A6D5B6D5BD90FFEC7FCEB03F823357CB32C>I<1307497EA2131FA2133F137F13FF5A12
07127FB5FC13DF139FEA7C1F1200B3AE007FB512E0B612F0A36C14E01C3477B32C>I<EB
0FF890387FFF8048B512E00007804814FC391FF80FFE393FE001FF903880007F48C7EA3F
80007E141F00FE15C0150F6C15E01507A3127E123CC8FCA2150F16C0151F1680153F1600
5D15FE4A5A14034A5A4A5A4A5A4A5AECFF804948C7FC495A495A495AEB3FE0EB7F8049C8
FC485A4848EB03C04848EB07E0EA1FE0485A48B6FCB7FCA36C15C023347CB32C>I<EB0F
FC90387FFF8048B512E0000714F84880391FF807FEEBC0004848137F6D7F1680151FA26C
5A6CC7FCC8FC153F16005D15FE14014A5AEC1FF890381FFFF0495BA215F86D7F90380007
FEEC00FF81ED3F80ED1FC0150FA216E01507A2123C127EB4FC150F16C0A248141F007FEC
3F806DEB7F006C6C5B391FF807FE6CB55A6C5C6C14E0C66C1380D90FFCC7FC23357CB32C
>I<EC07F04A7E141F143FA2147EA214FCEB01F8A2EB03F0EB07E0A2EB0FC0EB1F80A2EB
3F00137EA25B485AA2485A5B1207485AA2485A48C7FCA2127E5AB712FC16FEA36C15FCC8
EAF800AA91387FFFF091B512F8A36E13F027347EB32C>I<000FB512FE4880A35D0180C8
FCADEB83FE90389FFF8090B512E015F8819038FE03FE9038F000FF01C07F49EB3F8090C7
121F6C15C0C8120FA2ED07E0A4123C127EB4FC150F16C0A248141F007EEC3F80007FEC7F
006C6C5B6D485A391FF80FFC6CB55A6C5C000114C06C6C90C7FCEB0FF823347CB22C>I<
EC3FC0903801FFF801077F011F7F497F90387FE07F9039FF003F804848137FEA03F8485A
5B000FEC3F004848131E4990C7FC123F90C9FCA25A127EEB03FE90381FFF80D8FC7F13E0
00FDB57EB67E9038FE07FC9038F001FE9038C0007F49EB3F8090C7121F16C048140F16E0
1507A3127EA47E150F6D14C0001F141F6D1480000F143F6DEB7F003907F801FE3903FE07
FC6CB55A6C5C6D5B011F1380D907FCC7FC23357CB32C>I<121FEA3F80EA7FC0EAFFE0A5
EA7FC0EA3F80EA1F00C7FCAE121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B2470
A32C>58 D<EA0F80EA1FC0EA3FE0EA7FF0A5EA3FE0EA1FC0EA0F80C7FCAEEA0F80EA1FC0
EA3FE0127F13F0A4123F121F120F1201120313E01207EA0FC0A2EA3F80EA7F005A5A12F8
12700C3071A32C>I<1507ED1F80153F15FF14034A1300EC1FFC4A5AECFFE04913800107
90C7FCEB0FFCEB3FF8EB7FE048485A4890C8FCEA0FFEEA1FF8EA7FF0EAFFC05BA27FEA7F
F0EA1FF8EA0FFEEA03FF6C13C06C6C7EEB3FF8EB0FFC6DB4FC01017F6D13E0EC3FF86E7E
EC07FF6E13801400153F151FED0700212A7BAD2C>I<007FB612F0B712F8A4003F15F0CA
FCA8003FB612F0B712F8A46C15F025147DA22C>I<127012FC7E6C7E13E06C7EEA1FFC6C
7E3803FF80C67FEB7FF0EB1FF8EB0FFEEB03FF6D13C06D6C7EEC3FF8EC0FFC6EB4FC0201
138080A25C02071300EC0FFCEC3FF8EC7FE049485A4990C7FCEB0FFEEB1FF8EB7FF0EBFF
C000035BD80FFEC8FC485AEA7FF0485A138048C9FC5A1270212A7BAD2C>I<14FE497EA4
497FA214EFA2130781A214C7A2010F7FA314C390381F83F0A590383F01F8A490387E00FC
A549137E90B512FEA34880A29038F8003FA34848EB1F80A4000715C049130FD87FFEEBFF
FC6D5AB514FE6C15FC497E27347EB32C>65 D<007FB512E015F8B612FE6C8016C03903F0
003FED0FE0ED07F01503A2ED01F8A6ED03F0A21507ED0FE0ED1FC0EDFF8090B612005D5D
15FF16C09039F0001FE0ED07F0ED03F81501ED00FCA216FE167EA616FE16FC1501ED03F8
150FED3FF0007FB612E016C0B712806CECFE0015F027337FB22C>I<02FF13700107EBE0
F84913F9013F13FD4913FFEBFF813901FE007F4848131FD807F0130F1507485A49130348
5A150148C7FCA25A007EEC00F01600A212FE5AAB7E127EA3007F15F06CEC01F8A26C7EA2
6C6C13036D14F06C6C130716E0D803FC131F6C6CEB3FC03A00FF81FF806DB512006D5B01
0F5B6D13F00100138025357DB32C>I<007FB5FCB612C015F0816C803907E003FEEC00FF
ED7F80153FED1FC0ED0FE0A2150716F0150316F81501A4ED00FCACED01F8A3150316F0A2
150716E0150FED1FC0153FED7F80EDFF00EC03FE007FB55AB65A5D15C06C91C7FC26337E
B22C>I<007FB612F0B712F8A37E3903F00001A7ED00F01600A4EC01E04A7EA490B5FCA5
EBF003A46E5A91C8FCA5163C167EA8007FB612FEB7FCA36C15FC27337EB22C>I<007FB6
12F8B712FCA37ED803F0C7FCA716781600A515F04A7EA490B5FCA5EBF001A46E5A92C7FC
AD387FFFE0B5FC805C7E26337EB22C>I<007FB512F8B612FCA36C14F839000FC000B3B3
A5007FB512F8B612FCA36C14F81E3379B22C>73 D<0107B512804914C0A36D1480903900
03F000B3AF1218127EA2B4FCA24A5A48130F007F131F9038C07FC06CB55A6C91C7FC6C5B
000313F838007FC022347BB22C>I<D87FFCEB7FF8486CEBFFFCA36C48EB7FF8D807C0EB
1F80153FED7F00157E5D4A5A14034A5A5D4A5A4A5A143F4AC7FC147E5CEBC1F813C3EBC7
FCA2EBCFFEEBDFBEEBFFBF141F01FE7F496C7E13F86E7EEBF00301E07FEBC001816E7EA2
157E153E153F811680ED0FC0A2ED07E0D87FFCEB1FFC486CEB3FFEA36C48EB1FFC27337E
B22C>I<387FFFE0B57EA36C5BD803F0C8FCB3AE16F0ED01F8A8007FB6FCB7FCA36C15F0
25337DB22C>I<D87FE0EB0FFC486CEB1FFEA26D133F007F15FC000F15E001BC137BA401
9E13F3A3EB9F01A2018F13E3A21483A2018713C314C7A201831383A214EFA201811303A2
14FFEB80FEA3147C14381400ACD87FF0EB1FFC486CEB3FFEA36C48EB1FFC27337EB22C>
I<D87FF0EB7FFC486CEBFFFEA27F007FEC7FFCD807FEEB07C013DEA213DF13CFA2148013
C714C0A213C314E0A213C114F0A213C014F8A2147CA3143EA2141E141FA2140F1587A214
0715C7A2140315E71401A215F71400A215FFD87FFC137F487E153FA26C48EB1F8027337E
B22C>I<EB7FFF0003B512E0000F14F848804880EBE003EB800048C7127FA2007E80A300
FE158048141FB3A86C143FA2007E1500A3007F5CA26C6C13FEEBF00790B5FC6C5C6C5C00
0314E0C66C90C7FC21357BB32C>I<007FB512C0B612F88115FF6C15802603F00013C015
3FED0FE0ED07F0A2150316F81501A6150316F01507A2ED0FE0ED3FC015FF90B612801600
15FC5D15C001F0C8FCB0387FFF80B57EA36C5B25337EB22C>I<EB7FFF0003B512E0000F
14F848804880EBF007EB800048C7127FA2007E80A300FE158048141FB3A7EB01F0EB03F8
00FE143F267E01FC1300A2EB00FE007F5C147FD83F8013FEEBF03F90B5FC6C5C6C5C0003
14E0C67E90380007F0A26E7EA26E7EA26E7EA2157FA2153E21407BB32C>I<387FFFFCB6
7E15E015F86C803907E007FE1401EC007F6F7E151FA26F7EA64B5AA2153F4BC7FCEC01FE
140790B55A5D15E081819038E007FCEC01FE1400157F81A8160FEE1F80A5D87FFEEB1FBF
B5ECFF00815E6C486D5AC8EA01F029347EB22C>I<90381FF80790B5EA0F804814CF0007
14FF5A381FF01F383FC003497E48C7FC007E147F00FE143F5A151FA46CEC0F00007E91C7
FC127F7FEA3FE0EA1FFCEBFFC06C13FC0003EBFFC06C14F06C6C7F01077F9038007FFEEC
07FF02001380153FED1FC0A2ED0FE0A20078140712FCA56CEC0FC0A26CEC1F806D133F01
E0EB7F009038FE01FF90B55A5D00F914F0D8F83F13C0D8700790C7FC23357CB32C>I<00
7FB612FCB712FEA43AFC007E007EA70078153CC71400B3AF90383FFFFCA2497F6D5BA227
337EB22C>I<3B7FFF803FFFC0B56C4813E0A36C496C13C03B03F00001F800B3AF6D1303
00015DA26D130700005D6D130F017F495A6D6C485AECE0FF6DB5C7FC6D5B010313F86D5B
9038003F802B3480B22C>I<D87FFCEB7FFC486CEBFFFEA36C48EB7FFCD80FC0EB07E06D
130F000715C0A36D131F00031580A36D133F00011500A36D5B0000147EA4017E5BA46D48
5AA490381F83F0A4010F5B14C7A301075BA214EFA201035BA214FFA26D90C7FCA46D5A27
347EB22C>I<D87FF0EB07FF486C491380A36C486D1300001FC8127CA46C6C5CA76C6C49
5AA4143E147FA33A03E0FF83E0A214F7A201E113C3A3000101E35BA201F113C701F313E7
A314C1A200005DA201F713F71480A301FF13FF017F91C7FC4A7EA4013E133E29347FB22C
>I<3A3FFF03FFE0484913F0148714076C6D13E03A01F800FE007F0000495A13FE017E5B
EB7F03013F5B1487011F5B14CF010F5B14FF6D5BA26D90C7FCA26D5AA26D5AA2497EA249
7EA2497F81EB0FCF81EB1FC7EC87F0EB3F83EC03F8EB7F01017E7FEBFE00497F0001147E
49137F000380491480151FD87FFEEBFFFC6D5AB514FE6C15FC497E27337EB22C>I<D87F
FCEB7FFC486CEBFFFEA36C48EB7FFCD807F0EB0FC0151F000315806D133F12016DEB7F00
12006D137E017E13FE017F5BEB3F01EC81F8131FEC83F0EB0FC314C7903807E7E0A20103
5B14EF6DB45AA292C7FC7F5C147EB0903807FFE0497FA36D5B27337EB22C>I<003FB612
C04815E0A4007EC7EA1FC0ED3F80A2ED7F00157E15FE4A5A003C5CC712034A5AA24A5A4A
5AA24A5A4AC7FCA214FE495AA2495A495AA2495A495AA2495A49C8FCA213FE485AA24848
EB03C049EB07E01207485A5B121F485AA248C7FCB7FCA46C15C023337CB22C>I<387FFF
FCB512FEA314FC00FCC7FCB3B3B3B512FC14FEA36C13FC17416FB92C>I<387FFFFCB512
FEA37EC7127EB3B3B3387FFFFEB5FCA36C13FC17417DB92C>93 D<007FB6FCB71280A46C
150021067B7D2C>95 D<3801FFF0000713FE001F6D7E15E048809038C01FF81407EC01FC
381F80000006C77EC8127EA3ECFFFE131F90B5FC1203120F48EB807E383FF800EA7FC090
C7FC12FE5AA47E007F14FEEB8003383FE01F6CB612FC6C15FE6C14BF0001EBFE1F3A003F
F007FC27247CA32C>97 D<EA7FF0487EA3127F1201AAEC1FE0ECFFF801FB13FE90B6FC16
809138F07FC09138801FE091380007F049EB03F85BED01FC491300A216FE167EA816FE6D
14FCA2ED01F86D13036DEB07F0150F9138801FE09138E07FC091B51280160001FB5B01F8
13F83900F03FC027337FB22C>I<903803FFE0011F13F8017F13FE48B5FC48804848C6FC
EA0FF0485A49137E4848131890C9FC5A127EA25AA8127EA2127F6C140F6DEB1F806C7E6D
133F6C6CEB7F003907FE03FF6CB55A6C5C6C6C5B011F13E0010390C7FC21247AA32C>I<
EC0FFE4A7EA380EC003FAAEB07F8EB3FFE90B512BF4814FF5A3807FC0F380FF00348487E
497E48487F90C7FC007E80A212FE5AA87E007E5CA2007F5C6C7E5C6C6C5A380FF0073807
FC1F6CB612FC6CECBFFE6C143FEB3FFC90390FF01FFC27337DB22C>I<EB03FE90381FFF
C0017F13F048B57E48803907FE03FE390FF800FFD81FE0EB3F805B4848EB1FC090C7120F
5A007E15E015075AB7FCA416C000FCC9FC7E127EA2127F6CEC03C06DEB07E06C7ED80FF0
130F6C6CEB3FC001FF13FF000190B512806C1500013F13FC010F13F00101138023247CA3
2C>I<EC0FF8EC3FFE91B5FC4914805B903807FC7F14F090390FE03F0014C092C7FCA600
7FB512FEB7FCA36C5C26000FC0C7FCB3A8003FB512F04880A36C5C21337DB22C>I<ED03
F8903907F80FFC90391FFE3FFE017FB6FC48B7FC48ECFE7F9038FC0FF82607F003133E3A
0FE001FC1CD9C0001300001F8049137EA66D13FE000F5CEBE0016C6C485A3903FC0FF048
B5FC5D481480D99FFEC7FCEB87F80180C8FCA37F6C7E90B512F06C14FE48ECFF804815E0
4815F03A3FC0001FF848C7EA03FC007E1400007C157C00FC157E48153EA46C157E007E15
FCD87F801303D83FE0EB0FF8D81FFCEB7FF06CB612E0000315806C1500D8003F13F80107
13C028387EA42C>I<EA7FF0487EA3127F1201AAEC1FE0EC7FFC9038F9FFFE01FB7F90B6
FC9138F03F80ECC01F02807FEC000F5B5BA25BB3267FFFE0B5FCB500F11480A36C01E014
0029337FB22C>I<1307EB1FC0A2497EA36D5AA20107C7FC90C8FCA7387FFFC080B5FC7E
A2EA0007B3A8007FB512FCB612FEA36C14FC1F3479B32C>I<140EEC3F80A2EC7FC0A3EC
3F80A2EC0E0091C7FCA748B512804814C0A37EC7120FB3B3A2141F003C1480007E133FB4
14005CEB01FEEBFFFC6C5B5C001F5B000790C7FC1A467CB32C>I<EA7FE0487EA3127F12
01AA91381FFFF04A13F8A36E13F0913800FE004A5A4A5A4A5A4A5A4A5A4A5A4AC7FC14FE
EBF1FC13F3EBF7FE90B5FCA2EC9F80EC0FC001FE7FEBFC07496C7E496C7E811400157E81
1680151F3A7FFFC0FFFCB500E113FEA36C01C013FC27337EB22C>I<387FFFE0B57EA37E
EA0003B3B3A5007FB61280B712C0A36C158022337BB22C>I<3A7F83F007E09039CFFC1F
F83AFFDFFE3FFCD87FFF13FF91B57E3A07FE1FFC3E01FCEBF83F496C487E01F013E001E0
13C0A301C01380B33B7FFC3FF87FF0027F13FFD8FFFE6D13F8D87FFC4913F0023F137F2D
2481A32C>I<397FF01FE039FFF87FFC9038F9FFFE01FB7F6CB6FC00019038F03F80ECC0
1F02807FEC000F5B5BA25BB3267FFFE0B5FCB500F11480A36C01E0140029247FA32C>I<
EB07FCEB1FFF017F13C048B512F048803907FC07FC390FF001FE48486C7E0180133F003F
158090C7121F007EEC0FC0A348EC07E0A76C140F007E15C0A2007F141F6C15806D133F6C
6CEB7F006D5B6C6C485A3907FC07FC6CB55A6C5C6C6C13C0011F90C7FCEB07FC23247CA3
2C>I<397FF01FE039FFF8FFF801FB13FE90B6FC6C158000019038F07FC09138801FE091
380007F049EB03F85BED01FC491300A216FE167EA816FE6D14FCA2ED01F86D13036DEB07
F0150F9138801FE09138E07FC091B51280160001FB5B01F813F8EC3FC091C8FCAD387FFF
E0B57EA36C5B27367FA32C>I<903903FC078090391FFF0FC0017F13CF48B512EF4814FF
3807FE07380FF00148487E49137F4848133F90C7FC48141F127E150F5AA87E007E141FA2
6C143F7F6C6C137F6D13FF380FF0033807FC0F6CB6FC6C14EF6C6C138F6D130FEB07F890
C7FCAD0203B5FC4A1480A36E140029367DA32C>I<D87FFEEB3FC0B53801FFF0020713F8
021F13FC6C5B39003F7FE1ECFF019138FC00F84A13704A13005CA25C5CA391C8FCAF007F
B512E0B67EA36C5C26247EA32C>I<90387FF8700003B512F8120F5A5A387FC00F387E00
034813015AA36CEB00F0007F140013F0383FFFC06C13FE6CEBFF80000314E0C66C13F801
0113FCEB0007EC00FE0078147F00FC143F151F7EA26C143F6D133E6D13FE9038F007FC90
B5FC15F815E000F8148039701FFC0020247AA32C>I<131E133FA9007FB6FCB71280A36C
1500D8003FC8FCB1ED03C0ED07E0A5EC800F011FEB1FC0ECE07F6DB51280160001035B6D
13F89038003FE0232E7EAD2C>I<3A7FF003FF80486C487FA3007F7F0001EB000FB3A315
1FA2153F6D137F3900FE03FF90B7FC6D15807F6D13CF902603FE07130029247FA32C>I<
3A7FFF01FFFCB514FE148314016C15FC3A03E0000F80A26D131F00011500A26D5B000014
3EA26D137E017C137CA2017E13FC013E5BA2EB3F01011F5BA21483010F5BA214C701075B
A214EF01035BA214FF6D90C7FCA26D5A147C27247EA32C>I<D87FFFEB7FFF6EB5FCB515
806C16004A7ED807C0EB01F0A66C6C495AA3143E147FA2D801F0495AECFF87A214F7A201
F113C700005D9038F9E3CFA201FB13EFA3D97BC190C7FC017F13FFA21480A2013F5B9038
1F007C29247FA32C>I<3A3FFF03FFF048018713F8A36C010313F03A00FC007E005D9038
7E01F8013F5BEB1F83EC87E090380FCFC0903807EF80EB03FF6D90C7FC5C6D5A147C14FE
130180903803EF80903807CFC0EB0FC7EC83E090381F01F0013F7FEB7E00017C137C4913
7E0001803A7FFF01FFFC1483B514FE6C15FC140127247EA32C>I<3A7FFF01FFFCB50081
13FE148314816C010113FC3A03E0000F806C7E151F6D140012005D6D133E137C017E137E
013E137CA2013F13FC6D5BA2EB0F815DA2EB07C1ECC3E0A2EB03E3ECE7C0130114F75DEB
00FFA292C7FC80A2143EA2147E147CA214FC5CA2EA0C01003F5BEA7F83EB87E0EA7E0F49
5A387FFF806C90C8FC6C5A6C5AEA07E027367EA32C>I<003FB612E04815F0A4007EC7EA
1FE0ED3FC0ED7F80EDFF004A5A003C495AC7485A4A5A4A5A4A5A4A5A4AC7FCEB01FC495A
EB0FF0495A495A495A49C8FC4848EB01E04848EB03F0485A485A485A485A485AB7FCA46C
15E024247DA32C>I<15FF02071380141F147F91B512004913C04AC7FCEB03F85CB31307
EB1FE013FF007F5BB55A49C8FC6D7E6C7FC67F131FEB07F01303B380EB01FEECFFC06D13
FF6E1380141F14070200130021417BB92C>I<127812FCB3B3B3A9127806416DB92C>I<EA
7FC0EAFFF813FE6D7E6C7FC67F131FEB07F01303B380EB01FEECFFC06D13FF6E1380141F
147F91B512004913C04AC7FCEB03F85CB31307EB1FE013FF007F5BB55A49C8FC13F8EA7F
C021417BB92C>I<01F81370D803FE13F8380FFF0148138748EBCFF0397F9FFFE0D8FF0F
13C0D8FC07138039F803FE00387000F81D0A79B22C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: F5 cmsy10 10 34
/F5 34 119 df<007FB81280B912C0A26C17803204799641>0 D<121C127FEAFF80A5EA
7F00121C0909799917>I<0060150600F8150F6C151F007E153F6C157E6C6C14FC6C6CEB
01F86C6CEB03F06C6CEB07E06C6CEB0FC06C6CEB1F80017EEB3F006D137E6D6C5A90380F
C1F8903807E3F0903803F7E06DB45A6D5B6EC7FCA24A7E497F903803F7E0903807E3F090
380FC1F890381F80FC90383F007E017E7F49EB1F804848EB0FC04848EB07E04848EB03F0
4848EB01F84848EB00FC48C8127E007E153F48151F48150F00601506282874A841>I<EB
0380497EA7397803803C00FC147E00FE14FE397F8383FC393FC387F8390FE38FE03903FB
BF803900FFFE00EB3FF8EB0FE0A2EB3FF8EBFFFE3903FBBF80390FE38FE0393FC387F839
7F8383FC39FE0380FE00FC147E0078143C390007C000A76D5A1F247BA62A>I<1430147C
14FE497E497F903807EFC090380FC7E090381F83F090383F01F890387E00FC49137E4848
7F4848EB1F804848EB0FC04848EB07E04848EB03F048C7EA01F8007EEC00FC48157CA200
7E15FC6CEC01F86C6CEB03F06C6CEB07E06C6CEB0FC06C6CEB1F806C6CEB3F006C6C137E
017E5B6D485A90381F83F090380FC7E0903807EFC06DB45A6D90C7FC6D5A147C14302626
7EA72B>5 D<EC03FF023F13F09138FC30FCD903C0130FD90F00EB03C0013CEC00F00170
1538498148488148488148C7EC038000061601000E17C048EE00E0001817600038177000
301730A20070173800601718A200E0171C48170CA4B912FCA200C0C70030C7120CA46C17
1C00601718A20070173800301730A20038177000181760001C17E06CEE01C00006178000
0716036C6CED07006C6C150E6C6C5D01705D013C15F0010FEC03C0D903C0010FC7FCD900
FC13FC91383FFFF0020390C8FC36367BAF41>8 D<EB1FF0EBFFFE487F000714C0390FF0
1FE0391F8003F0393F0001F8003E130048147CA20078143C00F8143EA248141EA56C143E
A20078143C007C147CA26C14F8003F1301391F8003F0390FF01FE06CB512C0000114006C
5BEB1FF01F1F7BA42A>14 D<EB1FF0EBFFFE487F000714C04814E04814F04814F8A24814
FCA3B612FEA96C14FCA36C14F8A26C14F06C14E06C14C0000114006C5BEB1FF01F1F7BA4
2A>I<020FB6128091B712C01303010F1680D91FF8C9FCEB7F8001FECAFCEA01F8485A48
5A485A5B48CBFCA2123EA25AA2127812F8A25AA87EA21278127CA27EA27EA26C7E7F6C7E
6C7E6C7EEA00FEEB7F80EB1FF86DB71280010316C01300020F158091CAFCAE001FB81280
4817C0A26C1780324479B441>18 D<007FB512FCB712C016F06C15FCC8EA07FE9238007F
80EE1FC0EE07E0707E707E707E177C83A283A2EF0F80A2170718C0A21703A81707A21880
170FA2EF1F00A2173EA25F17FC4C5A4C5A4C5AEE1FC0EE7F80DB07FEC7FC007FB65AB712
F016C06C02FCC8FCCCFCAE007FB712FEB9FCA26C5E324479B441>I<EF0180EF07C0171F
EF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A48C8FCEC07
FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA3FF0EA7FC048CBFC
5AEA7F80EA3FE0EA0FF8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8
EC03FE913800FF80ED3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80
EF3FC0170FEF038094C7FCAE007FB81280B912C0A26C1780324479B441>I<126012F812
FEEA7F80EA3FE0EA0FF8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8
EC03FE913800FF80ED3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE933800FF80
EF3FC0171FEF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED1FF0ED7FC04A
48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA07FCEA1FF0EA
7FC048CBFC12FC1270CCFCAE007FB81280B912C0A26C1780324479B441>I<91381FFFFE
91B6FC1303010F14FED91FF0C7FCEB7F8001FEC8FCEA01F8485A485A485A5B48C9FCA212
3EA25AA2127812F8A25AA2B712FE16FFA216FE00F0C9FCA27EA21278127CA27EA27EA26C
7E7F6C7E6C7E6C7EEA00FEEB7F80EB1FF06DB512FE010314FF1300021F13FE283279AD37
>50 D<EE0180EE03C01607A2EE0F80A2EE1F00A2163EA25EA25EA24B5AA24B5AA24B5A15
0F5E4BC7FCA2153EA25DA25DA24A5AA24A5AA24A5AA24A5AA24AC8FCA2143EA25CA25CA2
495AA2495AA2495AA2495AA249C9FCA2133EA25B13FC5B485AA2485AA2485AA2485AA248
CAFCA2123EA25AA25AA25A12602A4E75BB00>54 D<126012F0AD12FCA412F0AD12600620
7BA400>I<0060161800F0163C6C167CA200781678007C16F8A2003C16F0003E1501A26C
ED03E0A26C16C06D1407A2000716806D140FA26C6CEC1F00A26CB612FEA36C5D01F8C712
7CA2017C5CA2013C5C013E1301A2011E5C011F1303A26D6C485AA201075CECC00FA20103
91C7FC6E5AA2903801F03EA20100133CECF87CA2EC7878EC7CF8A2EC3FF0A26E5AA36E5A
A36E5A6EC8FC2E3C80B92F>I<007FB612F0B712F8A27EC91278B3A5003FB612F85AA27E
C91278B3A5007FB612F8B7FCA26C15F0253A7CB92E>I<156015F0A21401EB07F190383F
FFE0EB7C1FEBF00748486C5AD803C07F4848487ED80F007FA248497E001E14BC153C003E
143E141FA248EB1E1F143EA2143CA2147C00FC1580147814F8A214F0A21301A214E01303
A214C0A21307A21480A2130FA214005B007C1500131EA2D87E3E5BA2D83E3C133E137CA2
1378001F5C13F8000F14784913F800075C0003495AEBE0033901F007802603FC1FC7FCEB
FFFEEBC7F0D807C0C8FCA25BA26CC9FC21477CBF2A>59 D<15301578B3B3AD007FB812F8
B912FCA26C17F836367BB541>63 D<0203B512F0027F14FF49B712E0010F16F890273FC3
F00713FED978039038007FFF2601E007020F1380D803C0030313C0D80780030013E0000F
177FD81F00EE3FF048EF1FF8003E4A140F5A0078EF07FC00C0010F1503C7FCA24B1401A3
141F5DA3023F16F8A292C8FCF003F0A25C027EED07E0A219C04A150F1980F01F00495A18
3E6049481578604D5A49484A5A4D5A050EC7FC4948143C5FEE01E04948EB07C0043FC8FC
91380001FC49EB3FF049B5128048B500FCC9FC4814E04801FCCAFC3E397FB840>68
D<057FB512800407B61200041F5C93B612F8922701F8000FC7FCDB0780131E4BC75A033C
147C4B5C4B495A14014A48495A4A48130760020F140F4A485C171F92C790C8FC023E5C14
3891C8127EA35FA34C5AA316035FA34C5AA3160F5FA3161F5FA3163F94C9FCA2120E003E
157E127E00FE157C16FC5E4B5AA26C4A5A4B5A6D5C4BCAFC6C6C131E6D5BD83FF813F090
38FE03E06CB512806C49CBFC000313F8C613C041437CB838>74 D<EE01FCEE0FFEEE7FFF
4BB5FC4B1480ED0F03ED1E014B7E157C4B137F4A5A020315004B137E0207147C4A481370
17C04A4890C7FCA24AC9FCA25C147E14FEA25C1301A25C1303A3495AA4495AA4495AA35C
133F91CAFCA2137E182049ED01E017034848ED0FC0D9F7F8141F48B56C148003F0140048
02FF133E48EDF03C0107ECFFF8261E007F14E048010F5C0070010049C7FC00C0EC0FF033
3D7EBA39>76 D<0203B512F8027FECFF8049B712F0010F8290273FC3F00313FED9780390
38003FFF2601E00702071380D803C06F13C0D807801500000F177FD81F00EE3FE0484A14
1F123E5A0078010F150F12C0C7FC4B15C0A3021FED1F80A24B1500183EA2023F5D6092C8
5A4D5A4D5A4A4A5A027E020EC7FC173C17F84AEB03E0EE3F80DB1FFEC8FC0101EB7FF891
38F8FFC0DAF9FCC9FC02F8CAFC495AA3495AA3495AA3495AA291CBFC5BA2137EA35B13F0
13C03B3D7FB83A>80 D<EE3FF0923803FFFE030FEBFF80033F14C0DBFC0713E0913801E0
00DA0780EB3FF04AC7121F4A140F143E027E1407027C15E014FC18800101ED0F0094C7FC
A280A280816D7F81EC7FF86E7E6EB4FC6E13C0020313F06E13FC6E6C7E92381FFF800307
7F03017F6F7FEE3FF8161F160F01706E7E48481403EA07C048C8FC4815015A127E5FA200
FE5E16036C5E4C5A6D5D6D4AC7FC6C6C141E6D5CD83FFC14F06CB4EB03E06C9038E03F80
6CD9FFFEC8FC000114F86C6C13C0D90FFCC9FC343D7FBA32>83 D<1A801907F10F00023F
B712FE49B85A010F17F0013F17C0494CC7FC2801E00003F0C9FC48481307485A120F48C7
485A5A5AA200FE4A5A5A12F01280C8485AA44BCAFCA415FEA44A5AA44A5AA44A5AA4140F
5DA35D141FA25D143FA292CBFC5CA2147E14FE5CA2495A5C495A5C0102CCFC41427DBB2D
>I<D907F0ED01C0D93FF8ED0780D801FF160F48171FD80F87163FD81E03170012300000
49157EA301075E5C4D5A5C130F4D5A495A170791C85B49150F133E017E4B5AA249153F60
49157F000116FF5B00034B90C7FCA248485C4C5A5B000F150F161F4848EC1EFC163E167C
48C8EAF9F816F1150148EC03E3007E913807C3F01683ED0F0300FEEC1E07153C157803F0
5B6CEB01E0EC03C0913807000FEB801E6C6C5AD9F0F0ECF180D9FFE014FF6C01804AC7FC
6C48C75BD807F0EC07E03A3B81B834>I<D81F80153CD83FF0153FB46CED7F806D16C0D8
1FFE15FF000317E06C7E6C7F017F150F17036D6C1401131F170080010F16C0A30107ED01
80A217036E15005F1706170E01035DA25F17785F4C5A16035F4C5A160F4CC7FC163E5E5E
4B5A15034B5A4B5A4A485A4BC8FC157E01075BECE3F8ECE7F0ECEFE0ECFFC05D92C9FC5C
5C14F0495A5C5C91CAFC130C1308333D7DB833>I<03FF15F802076DEB01FC4A6D130702
3F150FDA7C7F14034A6C6C1301903801F01F02C016F890C7FC030F15F0F003E07014C0F0
0780F00F00181C0307147860EF03C04D5A051EC7FC5F17F0EEF9E0EEFF8094C8FC16FC6F
5AA21507151F153F15F3EC03E3EC078391381E03FC143C14F0EB01E09038078001EB0F00
133C5B13E0EA03C048488048C7FC5A123E007E14007013E000FE1603EF87C06CEECF8001
C06EB4C7FC4915FC90C86C5A007CED1FC03E397CB83B>88 D<0060161800F0163CB3B26C
167CA2007C16F8A26CED01F0003F15036C6CEC07E06C6CEC0FC0D807F0EC3F80D803FE90
3801FF003A00FFC00FFC6DB55A011F14E0010391C7FC9038007FF82E347CB137>91
D<EC7FF80103B5FC011F14E0017F14F89039FFC00FFC3A03FE0001FFD807F09038003F80
D80FC0EC0FC04848EC07E048C8EA03F0003E150148ED00F8A248167CA248163CB3B20060
16182E347CB137>I<126012F0B3A8B712FE16FFA216FE00F0C9FCB3A81260283A7BB933>
96 D<14C0EB01E01303A214C01307A21480130FA2EB1F00A2131E133EA25BA2137813F8
A2485AA25B1203A25B1207A2485AA290C7FC5AA2123EA2123C127CA2127812F8A4127812
7CA2123C123EA27EA27E7FA26C7EA212037FA212017FA26C7EA21378137CA27FA2131E13
1FA2EB0F80A2130714C0A2130314E0A21301EB00C0135278BD20>104
D<126012F07EA21278127CA2123C123EA27EA27E7FA26C7EA212037FA26C7EA212007FA2
1378137CA27FA2131E131FA2EB0F80A2130714C0A2130314E0A414C01307A21480130FA2
EB1F00A2131E133EA25BA2137813F8A25B1201A2485AA25B1207A2485AA290C7FC5AA212
3EA2123C127CA2127812F8A25A126013527CBD20>I<003FB812E04817F0A218E00078CB
FCB3B3A6007FB812E018F0A26C17E0CCFCAE007FB812E0B912F0A26C17E0344479B441>
118 D E
%EndDVIPSBitmapFont
/F6 107[33 33 24[33 37 34 55 38 40 22 28 26 37 40 36
39 59 19 37 16 19 39 37 22 32 41 29 37 33 3[22 1[22 44
44 44 66 48 52 41 35 44 52 40 52 55 63 41 48 22 22 55
51 37 41 51 47 41 52 5[17 17 33 33 3[33 4[40 17 22 17
4[18 36[40 2[{TeXBase1Encoding ReEncodeFont}67 66.4176
/Palatino-Roman rf /F7 87[28 16[83 2[42 42 24[37 42 42
60 42 46 28 32 32 38 42 37 46 65 23 37 23 23 42 42 23
32 42 34 38 37 3[28 1[28 1[55 1[78 60 65 51 46 55 65
51 65 65 78 46 55 28 28 65 60 46 51 65 55 51 60 1[42
3[21 21 42 42 42 42 42 42 42 42 42 42 1[21 28 21 2[28
28 23 5[28 29[45 44 2[{TeXBase1Encoding ReEncodeFont}78
83.022 /Palatino-Italic rf /F8 133[50 55 50 83 55 61
33 44 39 1[61 55 61 89 33 61 33 33 61 55 39 50 61 44
61 50 9[100 78 78 66 61 72 1[61 83 83 100 61 78 1[39
83 1[55 61 83 72 1[78 3[60 4[50 3[50 1[50 3[25 33 25
60 40[61 2[{TeXBase1Encoding ReEncodeFont}53 99.6264
/Palatino-Bold rf
%DVIPSBitmapFont: F9 cmtt8 5 2
/F9 2 61 df<127812FCA412781200A6127812FCA412780612789116>58
D<1303EB0F80131FEB7F0013FEEA03F8485AEA0FC0EA3F8048C7FC12FCA2127F6C7EEA0F
C0EA07F06C7EEA00FE137FEB1F80130FEB030011167E9716>60 D
E
%EndDVIPSBitmapFont
/Ga 148[26 4[16 102[{TeXBase1Encoding ReEncodeFont}2
58.1154 /Palatino-Italic rf
%DVIPSBitmapFont: Gb eurm10 10 65
/Gb 65 123 df<B712E0A3123F9038F0001F6C481303150149130016F0A21670A31630A2
1600B3AE123FA27FA8003EC9FC1210243B7AB92D>0 D<821503150F4B7EA2153F82157F
A24B7EA24A7FEC03EF15E7913807C7FC1583140FED03FEEC1F01141E91383E00FF143C4A
7F835C707E495A161F494880A249486D7E130F91C712074981131E013E6E7E133C017C6E
7E137813F8496E7E120149ED7F8012034916C00007163F4916E0000F161F48C913F0170F
003E17F8A248EE07FC007FB812FEB9FCA218F8CAEA7FE0373A7EB93B>I<12F8BAFC7E00
0F17F8D803FEC81380EF7F0012015BB3B3A51880A51203A301E01600CA1278383A7EB83C
>5 D<923803FFE048B7FC5A000F16C05AD80FF8C9FC7F12076C7E7F7E6C7F137F806D7E
131F806D7E13078013036D7E807F6E7EA26EC8FCA2143E143C147C14785CA2495A495A13
07495A91C9FC131E133E5B137813F8485A485A12075B4848151848B712F85A5AA2B8FCA2
17F000F8CAFC2D397CB836>I<923803FFE0037F13FE0203B612C091260FFC0013F0DA3F
E0EB1FF8DA7F80EB07FED901FEC76C7E49488049486E7F49486F7E4A6F7E495A013F707E
5C017F160F8549C91207A3484883A21803A2485AA961A21807A26C6C5FA34E5A12006D4C
5A616D6C153F96C7FC6D6C157E011F5E6D6C4A5A6D6C4A5A6D6C4A5AD900FCEC1F80027F
027EC8FC3E7FFC1FC003F803FFE090B500F890B6FC4B5AB6FC1AC0C7D801E0C9FC433A7E
B849>10 D<D901FC5BD907FFEB03C0011F018013E0017F9038C007C090B512E02601F07F
EB0F803B03C01FF01F003807800F3A0F0007F83E0203133C001EECFC7C02015B485DEC00
FDEDFFE0007C5D0078147F5E93C7FC00F880A34B7E15FF5CEDEFC06CEB03CFEC078F9138
0F87E06CEB1F07007E013E7F007FD97C031301D980F8EBF807D9C3F0EBFC0F3B3FFFE001
FE3C02C0EBFFF86C018014F06C90C713E0D807FC1580D803F0EC7F00C9123C302979A637
>I<14FF010713C0011F13F0497F90387C07FCEBF00348486C7E3803C0000007147F5B00
0F80A290C7FC5AA2153E5A003E5CA2157815F8007E495A4A5AEC0780021FC7FC14FC9038
0FFF8015F815FE90390001FF809138007FC0ED1FE0150FED07F0A2ED03F8A216FC1501A2
12FEA516F8A2150316F0A20106EB07E0010E130F16C0011FEB1F8090393F807F00ECE0FE
90381FFFF86D13E0D903FEC7FC90C9FCAA7EA35A12F01240264B77B937>I<D97F80141C
2601FFE0141F00076D1580486D143F486D1500263E07FE147EEA7801267000FF5C487F48
6E485AC7003F5C1603DA1FC05B4C5AA2020F495A03E090C7FC5E0207131E5EA25E14035E
6F5A15F1EDF3C002015B15F793C8FC15FF5D5D14005DA25DA31401A41403A41407A44A5A
A21407EC01C0313782A633>I<903801FFE0130F013F13C05B01E0C7FC485A5B1203A248
7E7F7F7F6C7E7F6C7E6C7F6D7E6D7E6D7E6D7E6D7E497E497E013C13809038787FC09038
F03FE03801E01F9038C00FF00003EB07F8EA078090380003FC4813015A001EEB00FE123E
157E123C007C143EA312FC153CA36C1478A36C14F07E90388001E0EC03C0393FC0078090
38E00F00381FF83E380FFFFC6C13F06C5BC690C7FC1F3B7BB92A>I<120E127E12FEA65A
B3A37E146014E038FF01C0EB8780387FFF005B6C5A5BEA1FE0EA0780132878A61C>19
D<13FF000713C0003F7FA238383FF0C66C7E130F6D7E1303801301A26D7EA38081A2143F
A281A3147F8114FF14E701017F14C301037F1483EB078190380F01FC1400011E7FA24913
7FA2497F16805BED1FC012014914E00003140F484814F01507485A16F848C7120316FC00
3E140116FE127E007CEC00FF12FC4815FCC91260283A7EB82D>21
D<0007EC0380007F140F48141F7EA87EB07F4B7E157F9026C001FF1338D9E007EBE0F890
3AF01F9FFFF090B5001F13E0DAF80F138002E01400003D90388007FC3A3C7C0003F090CA
FCAC123EA2123C12202D3679A533>I<EF01C0EF0F8048B8FC000F1700485E5A17F81780
287E00700078C7FC007815F8007013F05C5AA2EAC0015C1280D8000313011480A21307A2
14005BA2131EA34980A2137C137801F880A24848903800FF0617FE00035E496E5A000716
E0EE3F80D801C091C8FC32297EA733>25 D<EB03FE90381FFFC0017F13F03901FE07F839
03F003FC4848C67E497F48487FA248C7EA3F80A2123E16C0151FA2127E127CA700FE1580
A2153FA216006C5C157E15FE6D485A39FDC003F89038E00FF039FCF83FE090387FFFC06D
5B267C0FFEC7FCEB03F890C9FCA2127EA6127FA6127E1230223779A62D>I<92B512E001
0FB6FC133F90B5008F13C03A01F80F800F2703E003E0C7FC3907C001F8000F6D7E48487F
003F147E90C7127F814881127EA200FE6E7EA97E5EA26C143F7F93C7FC6C6C5B157E6D5B
6C6C485A6C6C485A3907FE0FE06CB55A6C91C8FC38007FFCEB1FE02B2879A632>I<141C
147E49B4FC010713C0497F90381F3FF0EB3C1F496C7E496C7E3801E00301C07F00036D7E
48487EA248C7EA7F80A2001E143F16C048141FA3007CEC0FE01278A21507A212F8A21503
A77E16C0A47E007EEC0780A3007F15005D6C6C130E151E6D131C6C6C133C5D6C6C5BEBFC
013907FE07E090B55A6C5C6C49C7FC38007FF8EB1FC0233B7DB929>48
D<14C01307133FEA01FF120F127FB5FCA2C6FC137F133FA51480B3AF14C0A5137FA41480
EB7800123B78BA29>I<EC3FC0903801FFF0010713FC011F7F497FD97E0F13803801F801
2603E00013C0D80780137F48C713E00006143FC8FC151FA516C0A31680153F1600A2153E
157E157C15FC5D5D14014A5A5D14074A5A92C7FC141E143E5C14785C495A1303495A495A
49C8FC131E5B5B13F8485A485A48B612FC5A5A4815F85AB7FC16F0263B7FBA29>I<14FE
903807FFC0011F7F497F90B57E3901F01FFC3807C007380F000300066D7EC7FC1400A55D
A214015D14034A5A5DEC1FC04A5A02FEC7FCEB03F8EB1FE013FFECFF80010113F0903800
1FFCEC07FEEC01FF6E1380A2ED7FC0153F16E0A2151FA616C0A2153F001015800038EC7F
00A2007C14FE00FE495A6C495A9038C007F09038F01FE0003FB55A6C91C7FC000313FC38
007FC0233C7EB929>I<150C157CEC01FCA214031407A2140F141F141E143C1478147014
E0130114C0EB0380A2EB07005B130E5B133C13385B13F05B1201485AA2485A120F90C7FC
121E123E123C127C5AB712FEA316FCC8EAFC00A981A515F015C0273A80B929>I<0003B6
12C0A21680A31600A20180C8FCADECFF80018F13F001BF13FC90B57E9038F80FFFD9E003
1380EB800090C7EA7FC0C813E0153F151FA216F0A2150FA716E0A2151F16C0A212180038
EC3F80003C1500007C5C00FE14FE6C495A6C495A393FC007F0391FF03FC06CB5C7FC0003
13FC38007FE0243A7FB829>I<ED3F80913801FFC01407141F5C9138FF0180D901F8C7FC
EB03E0495A49C8FC131E5B5B5B12015B485A12075B120FA248C9FCA35A123EA2007EEB3F
C0903801FFF0010F13FC013F7F497F26FEFC0F138038FFE001D9800013C090C7127F4814
3F16E0151FA2150F7EA36C15C0A27FED1F806C7E16006D5B001F143E6C6C5B6D485A3907
FE07F06CB55A6C14806C6C48C7FCEB0FF0233B7CB929>I<123C127FA2EAFF80A4EA7F00
A2123C090A788817>58 D<1238127C12FEA27E1380127F123F13C0121F120FA21207A213
80A213005A120E5AA25A12305A0A18788817>I<1830EF01F01707EF1FC0EF7F00EE01FC
EE07F0EE3FC004FEC7FCED03F8ED0FE0ED3F80DA01FEC8FCEC07F8EC1FE0027FC9FCEB01
FCEB0FF0EB3FC001FFCAFCEA03FCEA0FF0EA7F8048CBFCEA3FC0EA07F8EA01FE38007F80
EB1FE0EB07F8EB01FE9038007F80EC0FF0EC03FCEC00FFED3FC0ED0FF0ED03FCED00FFEE
1FE0EE07F8EE01FE9338007F80EF1FE0EF07F017001820342F7CAB3F>I<16C016E01501
16C0A215031680150716005D150E151EA2151C153C15381578157015F0A25D14015D1403
5D140792C7FCA25C140E141E141C143C14381478A2147014F05C13015C1303A25C130791
C8FC5B130E131EA2131C133C13381378137013F05B1201A25B12035B120790C9FC5AA212
0E121E121C123C12381278A2127012F0234B7DBB2A>I<1260127812FEEA1FC0EA07F0EA
01FCEA007FEB1FC0EB07F8EB01FE9038003F80EC0FE0EC03F8EC00FFED3FC0ED0FF0ED03
FCED007FEE1FE0EE07F8EE01FE9338007F80EF1FE0EF07F0EF3FC0EFFF00EE03FCEE0FF0
EE3FC004FFC7FCED07F8ED1FE0ED7F80DA01FEC8FCEC07F8EC1FE0EC7F80D903FCC9FCEB
0FF0EB3FC001FFCAFCEA03FCEA0FF0EA3FC000FECBFC12781260342F7AAB3F>I<ED7FF0
91380FFFFE027FEBFFC049B612E0903A07FE007FF8D90FF0EB0FFCD93FC0130749C7EA03
FE01FEEC01FF4848804848157E0007167C491538485A001F16005BA2123F5B127FA490CA
FC5AAC7F127FA37FA26C7EA27F121F7F6C7EA26C6C15086C6C15186C01C0147C6C6DEB01
F0D97FF8EB07E06DB4EB3F806D9038FFFE00010714F8010014E0DA0FFEC7FC303B79B93B
>67 D<007FB612F0B812C0003F16F8000716FFD801FEC7003F13C04902037F9338007FF0
EF1FF8717E717E17038483831980A2187FA219C0A2183FAC1980187FA4F0FF00A34D5AA2
4D5AA24D5A170F604D5A4D5AEFFF806D4A90C7FCEE0FFEEE3FF8903AFF8007FFF091B612
804803FCC8FC4815803A397DB845>I<ED0780B712F0A3390FFC00016C4890C8FCA21203
A81201A97F90B612C0A401FCC9FC5BA77FAC7FA27F6EEB1FC091B6FCA26C1680A22A397C
B832>I<B712E0A3390FFE007F000391C7FC5B1201B36DEB1FC090B6FCA349C8FC5BB3A4
7F1203A313E023397DB829>I<ED7FF0020FB5FC027F14C049B612F0902607FE007FD90F
F0EB1FFCD93FC0EB07FE49C76C7E01FE8048486E13804848ED7F000007163E49153C4848
1518001F93C7FC5BA2123F5B127FA490CBFC5AA9EE07FE92B5FCA26D131F007FEC000116
00A27FA2123F7F121F7FA26C7E6C7E7F6C7E6C7F6C13E0D97FF8130190393FFF8007010F
90B512F801031580010002F8C7FCDA0FFEC8FC313B79B940>I<B512FCA2003F13F80001
1380EBFE001200B3B3A97F5A481380001F13F8007F13FEA217387AB721>73
D<D8FFFEEC07F849140F007F4B5A000F16C000074B5A6C484AC7FC16FE4B5A4B5A4B5A4B
5A4B5A4B5A93C8FC157E5D4A5A4A5A4A5A4A5A4A5A4AC9FC147E5C5CEBF9F013FBEBFFF8
80808001FB7F01F97F01F87F6E7E6E7E6E7E6E7EEC03FF6E7F6E7F6F7E6F7E6F7E6F7E6F
7E6F7E6F7F6F7F6D6E7E707E707E707E707E933803FF8001F0913801FE000180EC00F031
397CB838>75 D<B512F8A2003F5BD807FEC8FC6C5AA35BB3B3A47FA56DEB03FF48B7FCA2
4815FEC8FC28397CB82E>I<D87FFFEF0FF06E4C5A121F0003183FC67F4F5A137F6E16FF
A2496C5DA201E7EE03DFD9F7F816CF01E304077F6E168F01E1160F00016DED1F0F13E018
3E806E157C01C07F0003013F15F86F14F0021F14016F14E0020F140318C000076E130702
07158001806D130F020315006F5B0201141E000F6E133E173C6E6C5B17F86F6C48130790
C71381485EED3FC35FDB1FE7815F48EC0FFF94C7FCA26F5AA2003E6E4881127E4C15FE03
01EEFFFC4C16F8007C02006F13C000E04BEDFC004E397AB857>I<B612FEEDFFE0001F15
F83A07FE003FFE0003EC07FF00016E1380816F13C049147FA2EE3FE0A7167F17C0A216FF
17805D4B13004B5AED1FFCED7FF8913807FFF090B612C093C7FC15F802FCC8FC49C9FC5B
A97FAC5B13C02B387DB732>80 D<B612FCEDFFC0003F15F02607FC007F0003EC1FFCED07
FE6F7E81178081A617005DA24B5AA249495A4B5A151F4B5AEDFFC002075B90B548C7FC15
F04AC8FCA2EBFDFF01FC7F6E7E6E7E141F816E7E6E7E6E7E6E7E6E7F6F7E6F7E6F7E826F
7E15076F7E6F7E6F1380EE7FC017E0EE3FF0EE1FF849EC0FE001C0EC06002D387CB733>
82 D<ECFFC0010713F8013F13FE90387F01FF9039FC007F804848EB3FC04848EB1FE048
48130FA24848EB07C01600001F140692C7FCA37FA37F6C7E7F7F6C6C7E806C13F06C13FC
6C13FF6D13C0011F13F0010713FC01017F6D6C7E021F1380020713C014016E13E0157FED
3FF0151FA2150FA416E0120C121C003CEC1FC0127EED3F80B41500157E6D5B397FC003F8
393FF80FF06CB512C06C91C7FC000313FC38007FC0243B7CB92E>I<B500C0EB1FFC91B6
FCA303F8C7FCC7EA1FF0140FB3B3A4141FA381A815800218C8FC2E3B7FB932>I<18E0D8
FFFE1503170F003F161F12071201A860A65BB3A47FA21200A27FA280173F6D6CECFFE06E
130302F8EB0FDF6DB490397F1FF8C0DBFFFEEBFFE06D02F814806D02E0EBFC0001039138
000FE09026003FF090C8FC3B3A7DB840>I<130ED83FFEED03C06D153FEF7F80000F6D15
00000116FE6C6D495A017F14036D6C5C011F4A5A6E495A6D6C495A5F6D6C49C7FC010314
7E6E137C010114FC6E485A6D495A91387F83E0ED87C091383FCF8003FFC8FC6E5A140F5D
6E5A811403811407815C4A6C7E91383E3FC0147C6F7E14F849486C7E01036D7EEB07E049
486C7E8290381F8001D93F007F496D7F01FE8149147F00016F7E48488148486E7E000F82
48486E7E496E7E003F17C048486E13E048C87E00F0EEFE00CA12E0333B7EB937>88
D<1840D8FFF8ED0FC06DED3F80177FD81FFE1600000716FE6C6C5D6C15014C5A6C6D5C4C
5A6D7E4C5A6D6C495A94C7FC011F5C6E137E010F147C6E5B13076E485A0103495A14FE01
01495A5E6D6C48C8FC6E5A159EEC3FFE5D6E5AA26E5AB3A71580020CC9FC323B7FB933>
I<13F048B712F8A25FA26C48C7EA0FE090C85B161F4C5A4CC7FCA216FE4B5AA24B5A4B5A
150F5E4B5A4B5A157F93C8FC15FE14015D4A5A14074A5A5D141F4A5A4A5AA24AC9FC495A
A2495A495A495AA2495A495AA2495A49CAFC5A5B485A1207485A5B121F485A030FB51280
48B8FCB91200A3CA5A313B7CB937>I<49B4FC010FEBC080013F13F39038FF81FF3901FC
007F4848133F485A4848131F5B485AA2123F90C7FC5AA3127E12FEAA7EA27E7F153F6C6C
13FFD9E0037F3B1FFC0FDFE1C090B5EA9FFF6CD9FE1F13006C9038F80FFE6C01E013F83A
007F0003C02A2879A633>97 D<1302EA07FE12FFA2120F12015BA21200AAED7F80913803
FFE0020F13F8023F7F4A7F9038FDFC0F9039FFF003FFECC0014A7E49C7EA7F805BA2163F
A81700A4163E167EA2167CA26D5C5E4B5A6D495A6E485A6E48C7FC90387FF07EECFFF86D
13E0010F1380D903FCC8FC293A7EB831>I<ECFF80010F13E0013F7F9038FE0FF83901F8
03FCEA03E03807C001000F8048486C5A90C75A485C1560007E91C7FCA312FEAA7EA27EA2
6D5B6DEB0380003FEC07006D131E6C6C137C9038FE03F86CB512E06C5C6C91C7FC6C13FC
38003FE021287CA628>I<ED0380EC01FF141FA21400153FA2151FAC903801FF9F010F13
FF133FEBFF00D801FC137F4848133F485A4848131F5B121F5B123F90C7FC5AA3127E12FE
A97EA27E7F6D133F4B7E273FF001FF1340903AF80FDFE3C06CB5EA1FFF6C01FE14006C90
38F80FFC6C01E013F03A007F0007C02A3A79B832>I<903801FF80010F13E0013F13F090
38FE0FF83901F803FC3903F001FEEA07E0380FC000484813FF003F147F90C7FC5A007E14
FEEC03F800FEEB1FC0EC7F00EB01F8EB0FE0013FC7FCEAFFFC13F013C090C8FC5AA27EA3
6C7E15076D130F6C6C133E6D13FC9038FC03F86CB512E015C06C14006C5B000113F83800
7FC020287AA629>I<EC03F0EC0FF8EC3FFC147FECFFF8EB01F1ECC07001031330903807
80201500A249C7FCA25BA55BA4B612E0A215C0D8003FC7FCB3AB80A4013EC7FC13301E3C
7DBA23>I<903803FE0190381FFF87017F13FFEBFF073801FC013807F000497F48487F12
1F5B123F90C7FCA25A127EA312FEA21680A2151FA67EA27E7F153F6D13FF6C6C5A9038F8
0FDF6CB5121F6C13FE14F86C13E000010180130038007E0090C75AA2153EA25D1206000E
5C000F495A486C485A486C485A397FE01F80263FFFFEC7FC6C5B000713E0C690C8FC2138
79A62F>I<131F497E137F497EA46D5AA2011EC7FC90C8FCA813FCEA03FEEA0FFF5A127F
EAF87F12E0C67EB3A515301570EC80F0ECC3E0ECFFC015806D13005CEB0FF8EB03E01C3A
7FB81E>105 D<131EEB7F80A2EBFFC0A4EB7F801400131E90C7FCA8137CEA01FEEA07FF
5A123F38787F80EAE03F12401200131FB3A8133FA31400A3133E137E137CA25B485A5B48
5A485A48C7FC121E12385A124012497FB81C>I<131EEA0FFE12FFA2121F12031201A26C
5AA91630167CED01FE4B5AED07F04B5AED1F804BC7FC157C5D4A5AEC03C0EC0F804AC8FC
143C5C5C13FD13FF80EBFDFCEBFCFE806E7E143F6E7E6E7E00016D7E6E7E6E7E6E7E6F13
3092387F807092383FC1F092381FFFE06F13C06F1380923803FE006F5A01F06D5A2C397E
B82E>I<130EEA0FFE12FFA2120712011200AB5BB3AD6D13C01401EC0380EBFF0F90387F
FF005C5C5CEB3FE0EB0F801A3A7DB81E>I<137C48B4D907C0EB3F800007913A3FF001FF
E0001F902780FFF80F13F8480183EBFC3F26F87F8F6DB5FC3D603FBF07FFF80FFC27001F
FC01EBC007DAF000EB000302C04913015C047E1300B3A21BC01A01F1FE039638FF0F8001
3FF0FF006262013EC70078EC7FF00110024015C090CB001FC7FC4A297EA64C>I<01F8EB
07F0D803FCEB3FFC3A0FFE01FFFE261FFF077F007F5B00F8EB3F0327E07FFC007F000001
F0137FD93FC0133F5C91C7FC161FB318081818EFC078EFE1F0EFFFE018C07013005F0130
EC07F890C8EA03E035287FA637>I<017C137CD803FE13FF2607FF031380001F13874801
8F13C039F87F9C3F39E03FB01F00009038E00F80160090381FC00EEC800492C7FCB3A901
1CC8FC22277FA624>114 D<EB07FCEB3FFF4913803901F83FC03803E00F3907C007E012
0F13801580001F140091C7FCA27FA27FEA0FF813FE6C6C7E6C13E06C13F86C13FE90383F
FF80010713C0010113E0EB007FEC1FF0140F14071208001C1303123C007C14E0127E00FE
EB07C0007F1480393FC00F00381FF03E380FFFFC6C13F0C613801C287CA626>I<14C013
07131FA25CAB007FB512F0A2B6FC39001F8000B3A480A3010F1302ECE00F151EECF87CEC
FFF06D13E015C06D1300EB00FC20347FB223>I<01F881D803FEEC03C00007150FD81FFF
141F5A12F8EAE07F12006D5DB3A280A2043F130893387FC01C9126C001FF1378DAE007EB
E1F0903B1FF81F9FFFE09126FFFE1F13C003F814006D9038E00FFE6D90388007F8903A01
FC0003E0362880A635>I<13F0D803FC141C000F153ED83FFE14FE007F8112F1D840FFEC
7F80C67E163F6D7E161F131F801700A2130F6E133EA20107143C167C6E13785E13034B5A
6E485AA20101495A4BC7FCECFC1E0100131C153C6E5A6E5A6E5A5D5D6EC8FC143E143C14
18292882A629>I<01F01460D803FC14F0D80FFE497E121FD87FFF495A00F04A5A3A407F
800FC0C66C6C485A011F49C7FC90380FE07E157C6D6C5AECF1F0903803F9E0ECFBC06DB4
5A6D90C8FC5C147E147FA28114FF497FEB03CFEC8FE090380787F0EB0F0790380E03F813
1E496C7E017C6D13C090397800FF0301F890387F87804848ECFF00496D5A00035D496D5A
0001EC0FE0C8EA03C02A2880A62C>120 D<0178EC0180D803FE140F0007153FEA1FFF12
7F12F0EAC07F12007FB3A280A2167FED01FF6D6C4813009138E00FBF9138F03E3FECFFFC
6D13F015C06DEB007EEB01F890C8FCA25EA25E010C1301011E495A5E013F495A90397F80
1F80DAE07FC7FC90383FFFFE010F13F8010313E0D9007EC8FC293781A631>I<01FFEB01
8048EBF0074890B512005D485C485C01005B001E1301001C495A485C0030495AC748C7FC
5C143E5C14785C495A1303495A5C49C8FC131E5BA2491410491418484814384914700003
15F04848EB01E0390FFF80034890B512C0A24815805AB71200D8E0035B39400001F02527
7EA527>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Gc cmtt8 7 15
/Gc 15 121 df<1378A2137C1378A20070133800F8137C38FE79FCEAFF7B387FFFF8001F
13E0000713803801FE003807FF80001F13E0007F13F838FF7BFCEAFE7938F8787C007013
3800001300A2137C1378A216197C9D1F>42 D<123C127E12FFA4127E123C1200A9123C12
7E12FFA4127E123C081975981F>58 D<140E141F147F14FFEB03FEEB07FCEB1FF0EB3FE0
EBFF80481300EA07FC485AEA3FE0485A48C7FC5A7EEA7FC06C7EEA0FF86C7EEA01FF6C13
80EB3FE0EB1FF0EB07FCEB03FEEB00FF147F141F140E181F7DA01F>60
D<387FFFE0B512F8806C7F380F803F801580140FA5EC1F00A2147EEBFFFC5C8080EB803F
EC0F80EC07C0A2EC03E0A5140715C0140FEC3F80007FB5FCB6120014FC6C13F01B247FA3
1F>66 D<397FE03FC039FFF07FE0A2397FE03FC0D80F001300143E5C14FC495A495A5C49
5A130F495A91C7FC5B5B497EA2EBF7C013E7EBE3E013C3EB81F013016D7E80147C80A280
A2397FE03FC039FFF07FE0A2397FE03FC01B247FA31F>75 D<EA7FFFB512E0806C7F380F
81FCEB807E143E143F80A45C143E147EEB81FCEBFFF85C5C14F81381EB80FCA2147CA515
7015F8A3387FF07F38FFF83F15F0397FF01FE0C7EA07C01D257FA31F>82
D<3801FE1C3807FFBE4813FE123F1303EA7E01EAFC00147E5A143EA26C131C14007E127F
13E06CB4FC6C13C0000713F0000113F838003FFCEB03FEEB007E147F143FA20070131F12
F8A36C133F143E6C137E38FFC0FCEBFFF814F014E00070138018267DA41F>I<007FB512
E0B612F0A338F80F81A40070EB80E000001400B3A5EBFFF8487FA26C5B1C247FA31F>I<
397FF03FF839FFF87FFCA2397FF03FF8390F8007C0B3A5EBC00FA23907E01F80A23903F0
3F006D5A3801FFFE6C5BEB3FF0EB0FC01E2580A31F>I<397FE07FE039FFF0FFF0A2397F
E07FE0391F000F80390F801F00A43807C03EA4EBE07E0003137CA46C6C5AA400005B13F9
A4EB79E0A4EB3FC0A46D5AA21C257FA31F>I<387FE3FF00FF1480A2007F1400380FC1F8
00075B13E13803E3E013F3EA01F7EBFFC07E5C137F91C7FC7F133E133F5B8013FF80A2EA
01F7EBF3E0EA03E3EBE1F0EA07C1EBC0F8120FEB807C121F39FFC1FF8001E113C0A201C1
13801A247EA31F>88 D<137E3803FFC04813E04813F0381FC3F8383F00FC007E137E007C
133EA248131FA66C133F007C133EA2007E137E6C13FC381FC3F8380FFFF06C13E06C13C0
38007E0018197D981F>111 D<387F87F038FFDFFCEBFFFE6CEBFF803907FC1FC0EBF00F
9038E007E0A29038C003F0A21401A5140313E0EC07E013F09038F80FC09038FC3F8090B5
12005CEBDFFCEBC7E001C0C7FCA9EA7FFC487EA26C5A1C2680981F>I<13E0487EA6387F
FFFCB57EA26C5BD801F0C7FCAB1407EC0F80A2141F13F89038FC3F006CB5FC6D5AEB3FF8
EB0FE019207F9F1F>116 D<397FE1FF80EAFFF3A2EA7FE13907C0F000EA03E13801E3E0
EBF3C06CB45A137F6DC7FC133E131E133F497E13F7EBF3C03801E1E000037F13C0380780
78397FE1FF80D8FFF313C0A2D87FE113801A197E981F>120 D E
%EndDVIPSBitmapFont
/Gd 75[28 28[83 42 1[42 42 24[42 46 43 69 47 50 27 35
33 46 50 45 48 73 24 46 19 24 48 46 28 40 51 37 46 42
3[28 1[28 55 55 55 83 60 65 51 44 55 65 50 65 69 79 51
60 28 28 69 63 46 51 64 59 51 65 1[37 1[50 1[21 21 42
42 42 42 42 42 42 42 42 42 50 21 28 21 50 1[28 28 23
5[23 15[24 13[50 50 2[{TeXBase1Encoding ReEncodeFont}85
83.022 /Palatino-Roman rf /Ge 105[42 1[42 42 24[42 46
42 69 46 51 28 37 32 51 51 46 51 74 28 51 28 28 51 46
32 42 51 37 51 42 3[28 1[28 3[83 65 65 55 51 60 69 51
69 69 83 51 65 32 32 69 69 46 51 69 60 55 65 1[37 4[21
42 42 42 42 42 42 42 42 42 42 1[21 28 21 50 1[28 28 36[51
51 2[{TeXBase1Encoding ReEncodeFont}74 83.022 /Palatino-Bold
rf /Gf 134[50 1[72 1[55 33 39 39 1[50 44 55 78 28 44
1[28 50 50 28 39 50 41 46 44 12[61 16[66 20[25 1[25 44[{
TeXBase1Encoding ReEncodeFont}25 99.6264 /Palatino-Italic
rf
%DVIPSBitmapFont: Gg cmsy10 12 1
/Gg 1 14 df<933803FFE0047F13FF0303B612E0030F15F8923A7FFE003FFFDBFFC00101
7FDA03FEC8EA3FE0DA0FF8ED0FF8DA1FC0ED01FC4A486F7E02FECAEA3F804948717ED903
F0EF07E04948717E4948717E4948717E49CC127E017E85017C8549737E00018749190748
48737EA24848737E000F8749190090CE1278481B7CA2003E87A2003C1B1EA2007C1B1FA2
007887A200F81C80A2481B07AC6C1B0FA200781C00A2007C63A2003C1B1EA2003E1B3EA2
6C63A26C1B786D1AF86D19010007636C6C4F5AA26C6C4F5A6D190F000063017C4FC7FC01
7E616D197E6D6C606D6C4D5A6D6C4D5A6D6C4D5AD901FCEF1FC06D6C4D5ADA3F8004FEC8
FC6E6C4B5ADA0FF8ED0FF8DA03FEED3FE0912600FFC0903801FF80DB7FFE013F90C9FC03
0FB612F8030315E0DB007F91CAFC040313E0595C7BC664>13 D E
%EndDVIPSBitmapFont
/Gh 134[55 4[32 1[39 1[60 54 5[29 58 55 3[44 28[55 2[71
16[50 1[50 48[{TeXBase1Encoding ReEncodeFont}13 99.6264
/Palatino-Roman rf
%DVIPSBitmapFont: Gi cmtt12 14.4 12
/Gi 12 118 df<EA0780EA1FE0EA3FF0EA7FF8A2EAFFFCA4EA7FF8A2EA3FF0EA1FE0EA07
800E0E688D3E>46 D<ED7FE0913803FFF8020F13FE023F6D7E91B67E49814981010F9038
C03FF890391FFE000FD93FF86D7ED97FE06D7E4A130149486D7E4890C8FC4848903803FC
7F49D90FFF13804848013F13FF5D484890B612C0495A001F5B01C0140F913807FC03003F
49487E0180496C13E04A48137F127F010049133F143F4B131F5A48137FA292C7120FA96F
131FA26C013F15C07E6F133F021F158001806D137F123F6E6CEBFF0001C06D5A001F6D6C
485A913903FF0FFC01E014FF000F6D5C6D6C5C6C6C6D5B6F5B6C6C010F90C7FC6DEB03FC
6C6C90C9FC6C6DEC0FC06D6CEC1FE06E143FD93FF814FFD91FFE130390270FFFC01F1380
010390B612006D5D6D5D023F14F0020F14C0020391C7FC9138007FF0334B7BC93E>64
D<383FFF805AB57EA37E7EEA003FAEED07FC92383FFF8092B512E002C314F802CF8002DF
8091B7FCDBF80F1380DBC00113C092C713E04A143F4AEC1FF04A15F84A140F4AEC07FCA2
17034A15FE1701A318FF83A95F18FEA280170318FC6E140718F86E140FEF1FF06E143F6E
EC7FE06EECFFC0DBC0031380EDF01F92B6120002DF14FC02CF5C02C35CD91F8114C09026
0F807F90C7FC90C7EA0FF8384A7FC83E>98 D<913807FFF0023F13FE49B61280010715C0
4915E04915F0137F903AFFFC003FF84801E0131F48138091C7FC485A4848EC0FF049EC07
E0484891C7FC5B123F5B127F5BA312FF90CAFCA97F127FA27F123F7F17FC6C6CEC01FE7F
6C7E6C6C14036DEC07FC6C01C0130F6C01F0EB1FF86C01FEEBFFF06DB612E06D15C0010F
15806D1500010114FC6D6C13F0020790C7FC2F3678B43E>I<923803FFF85D4B7FA38181
ED0003AEEC1FF0ECFFFE0103EBFF83010F14E34914F3017F14FB90B7FC48EBF80F48EBC0
0191C7FC4848143F4848141F5B4848140F491407123F491403127F5BA312FF90C8FCA97F
127FA216077F123F6D140FA26C6C141F6D143F000F157F6C6C14FF01FF5B6C6D5A6CD9F0
1FEBFFFC6C90B500FB13FE6D02F313FF6D14E3010F14C36D020113FE010101FC14FC9026
003FE0C8FC384A7CC83E>I<EC1FF891B57E010314E0010F14F84980017F8090B7FC48D9
F80F1380DAC00113C048496C13E04848C7123F4848EC1FF049140F484815F81607484815
FCA248481403A24915FEA200FF1501A290B7FCA517FCA290CAFC7FA2127FA27F123F6D15
FCA26C6CEC01FE7F6C6C14036C6C14076DEC0FFC6C6D131F6C01E0EB7FF86C9039FC03FF
F06DB612E06D15C06D158001071500010114FC6D6C13E0020790C7FC2F3679B43E>I<14
3E147F4A7E497FA56D5B6EC8FC143E91C9FCAC003FB57E5A81A47EC7123FB3B3007FB712
80B812C0A56C16802A4A76C93E>105 D<ED07FC3B3FFF803FFF804891B512E0B500C380
02C78002CF806C01DF806C9038FFF80FD8003F9038C003FFED00014A7F4A815C177F5CA2
5CA35CB3A8003FB5D8C07FB51280486EB612C0B66C15E0A36C4A15C06C4A6C14803B347F
B33E>110 D<ED07FC3B3FFF803FFF804891B512E0B500C314F802CF8002DF806C90B7FC
6CDAF80F1380D8003FD9C00113C092C713E04A143F4AEC1FF04A15F84A140F4AEC07FCA2
17034A15FE1701A318FF83A95F18FEA280170318FC6E140718F86E140FEF1FF06E143F6E
EC7FE06EECFFC0DBC0031380EDF01F92B6120002DF14FC02CF5C02C35C02C114C0DAC07F
90C7FCED0FF892C9FCB3003FB512C04880B67EA36C5C6C5C384F7FB33E>112
D<EE07FE263FFFF890387FFFC0484AB512E0B5D8FC0714F05D4B14F86C5C6C91387FFC0F
D80003EBFFC002FD90380007F0DAFFFEEB03E003F890C7FC5D5DA25D5DA292C9FCA25CA4
5CB3A3003FB612FC4881B7FCA37E6C5D35347CB33E>114 D<903901FFF00F011F9038FE
1F8090B612BF000315FF5A5A5A393FFE003F01F01307D87FC0130190C8FC5A48157FA47E
EE3F00D87FC091C7FC13F0EA3FFE381FFFF06CEBFFC06C14FE6C6E7EC615E0013F14F801
0780D9003F7F02007F03071380030013C0003EED3FE0007F151F48150F17F06D1407A37F
A26D140F6D15E0161F01FCEC3FC06D14FF9026FFC00F138091B612005E485D013F5C6D14
E0D8FC0714802778007FF8C7FC2C3677B43E>I<263FFF80EB7FFF4892B5FCB56C4880A3
6C806C81D8003FEC007FB3AC17FFA25E5E80011F140F6E5B02FE90B612806DB812C06D17
E083010114FE6DDAF83F13C0023F01E01480020790C9FC3B347FB23E>117
D E
%EndDVIPSBitmapFont
/Gj 107[60 60 24[60 66 60 100 66 73 40 53 47 73 73 66
73 106 40 73 40 40 73 66 47 60 73 53 73 60 7[80 1[120
93 93 80 73 86 1[73 100 100 120 73 93 47 47 100 100 66
73 100 86 80 93 1[53 5[60 60 60 60 60 60 60 60 60 60
1[30 40 30 41[73 2[{TeXBase1Encoding ReEncodeFont}66
119.552 /Palatino-Bold rf /Gk 133[103 115 103 172 115
126 69 92 80 126 126 115 126 184 69 126 69 69 126 115
80 103 126 92 126 103 11[161 138 126 149 172 126 172
172 207 126 161 80 80 172 172 115 126 172 149 138 161
6[52 12[69 42[126 2[{TeXBase1Encoding ReEncodeFont}50
206.559 /Palatino-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: A4

%%EndSetup
%%Page: 1 1
1 0 bop 1302 1738 a Gk(T)-19 b(ype)52 b(Systems)607 1987
y(for)g(Programming)g(Languages)1430 2630 y Gj(Benjamin)30
b(C.)g(Pierce)1273 2746 y Gi(bcpierce@cis.up)o(en)o(n.)o(ed)o(u)1548
2982 y Gh(Copyright)2056 2979 y(c)2028 2982 y Gg(\015)24
b Gh(2000)1108 3356 y Gj(W)-9 b(orking)30 b(draft)e(of)i(March)f(2,)g
(2000)450 4069 y Gf(This)21 b(is)g(pr)n(eliminary)g(draft)g(of)h(a)g
(book)h(in)f(pr)n(ogr)n(ess.)28 b(Comments,)23 b(suggestions,)f(and)450
4185 y(corr)n(ections)i(ar)n(e)h(welcome.)p eop
%%Page: 1 2
1 1 bop 450 1347 a Gk(Contents)450 1862 y Ge(Preface)2680
b(8)450 2045 y(1)83 b(Introduction)2311 b(13)575 2144
y Gd(1.1)85 b(What)21 b(is)g(a)g(T)-7 b(ype)20 b(System?)j(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(14)575 2244 y(1.2)85
b(What)21 b(is)g(a)g(T)-7 b(ype)20 b(System)g(For?)66
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(15)828 2343 y(Ef)o(\002ciency)30
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(15)828 2443 y(Safety)38 b(.)k(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(16)828 2543 y(Documentation)c(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(17)828
2642 y(Support)20 b(for)h(Pr)o(ogrammer)o(-De\002ned)e(Abstractions)44
b(.)d(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(17)828
2742 y(Language)20 b(Design)59 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(18)575 2842 y(1.3)85 b(History)49 b(.)42
b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
73 b(18)575 2941 y(1.4)85 b(Application)21 b(Ar)o(eas)31
b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(20)575 3041 y(1.5)85 b(Related)21 b(Reading)34 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(21)450 3223 y Ge(2)83 b(Mathematical)16 b(Preliminaries)1736
b(22)575 3323 y Gd(2.1)85 b(Sets,)21 b(Relations,)g(and)f(Sequences)27
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)73 b(22)575 3423 y(2.2)85 b(Induction)33
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)73 b(24)575 3522 y(2.3)85 b(Backgr)o(ound)20 b(Reading)53
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(25)450
3705 y Ge(3)83 b(Untyped)18 b(Arithmetic)h(Expressions)1554
b(26)575 3805 y Gd(3.1)85 b(Basics)42 b(.)f(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(26)575
3904 y(3.2)85 b(Formalities)40 b(.)h(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(27)828 4004 y(Syntax)78
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)73 b(27)828 4104 y(Abstract)20 b(vs.)g(Concr)o(ete)g(Syntax)i(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)73 b(29)828 4203 y(Str)o(uctural)20
b(Induction)82 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(30)828 4303 y(Evaluation)52 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)73 b(32)828 4402 y(Pr)o(operties)20
b(of)h(Evaluation)60 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(34)828 4502 y(Run-T)-5 b(ime)22 b(Err)o(ors)i(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(34)575
4602 y(3.3)85 b(A)21 b(Concr)o(ete)f(Implementation)53
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(35)828 4701 y(Syntax)78
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)73 b(36)828 4801 y(Evaluation)52 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(37)828 4901 y(The)20
b(Rest)74 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(38)1929 5169 y(1)p eop
%%Page: 2 3
2 2 bop 575 683 a Gd(3.4)85 b(Summary)30 b(.)41 b(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(38)450
866 y Ge(4)83 b(The)20 b(Untyped)f(Lambda-Calculus)1598
b(41)575 965 y Gd(4.1)85 b(Basics)42 b(.)f(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(42)828
1065 y(Syntax)78 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)73 b(43)828 1165 y(Operational)20
b(Semantics)58 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(44)575 1264 y(4.2)85 b(Pr)o(ogramming)22 b(in)f(the)g
(Lambda-Calculus)32 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)73 b(46)575 1364 y(4.3)85 b(Formalities)40
b(.)h(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(51)828 1463 y(Syntax)78 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(51)828 1563 y(Substitution)67
b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(52)828 1663 y(Operational)20 b(Semantics)58 b(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(54)828 1762 y(Summary)29
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(55)575 1862 y(4.4)85 b(Further)21 b(Reading)36 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(56)450 2045 y Ge(5)83 b(Implementing)17 b(the)j(Lambda-Calculus)1414
b(57)575 2144 y Gd(5.1)85 b(Nameless)21 b(Repr)o(esentation)g(of)g(T)-8
b(erms)54 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)73 b(57)828 2244 y(Syntax)78 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(58)828 2343 y(Shifting)21 b(and)f(Substitution)32 b(.)42
b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(60)828 2443 y(Evaluation)52
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(61)575 2543 y(5.2)85 b(A)21 b(Concr)o(ete)f(Realization)42
b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(62)828 2642
y(Syntax)78 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)73 b(62)828 2742 y(Shifting)21 b(and)f(Substitution)32
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(64)828 2842 y(Evaluation)52
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(65)575 2941 y(5.3)85 b(Or)o(dinary)20 b(vs.)h(Nameless)g(Repr)o
(esentations)59 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)73 b(65)450 3124 y Ge(6)83 b(T)-7 b(yped)19
b(Arithmetic)f(Expressions)1650 b(67)575 3223 y Gd(6.1)85
b(Syntax)78 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)73 b(68)575 3323 y(6.2)85 b(The)21
b(T)-7 b(yping)21 b(Relation)83 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)73 b(68)575 3423 y(6.3)85 b(Pr)o(operties)21 b(of)f(T)-7
b(yping)21 b(and)g(Reduction)79 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(69)828 3522
y(T)-7 b(yping)21 b(Derivations)56 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(69)828 3622 y(T)-7 b(ypechecking)71 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(70)828 3722 y(Safety)19 b(=)i(Pr)o(eservation)f(+)h(Pr)o(ogr)o(ess)76
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)73 b(70)575 3821 y(6.4)85 b(Implementation)51
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(71)575 3921 y(6.5)85 b(Summary)30 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(72)450 4104
y Ge(7)83 b(Simply)19 b(T)-7 b(yped)20 b(Lambda-Calculus)1564
b(74)575 4203 y Gd(7.1)85 b(Syntax)78 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(74)575
4303 y(7.2)85 b(The)21 b(T)-7 b(yping)21 b(Relation)83
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(75)575
4402 y(7.3)85 b(Summary)30 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(77)575 4502 y(7.4)85
b(Pr)o(operties)21 b(of)f(T)-7 b(yping)21 b(and)g(Reduction)79
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(78)828 4602 y(T)-7 b(ypechecking)71 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(78)828 4701 y(T)-7 b(yping)21 b(and)f(Substitution)63
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(80)828 4801 y(T)-7
b(ype)20 b(Safety)25 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)73 b(80)828 4901 y(Erasur)o(e)19 b(and)h(T)-7
b(ypeability)74 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(81)p
eop
%%Page: 3 4
3 3 bop 575 683 a Gd(7.5)85 b(Implementation)51 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(81)575 783 y(7.6)85 b(Further)21 b(Reading)36 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(82)450 965 y Ge(8)83 b(Normalization)2236 b(83)450
1148 y(9)83 b(Extensions)2379 b(86)575 1248 y Gd(9.1)85
b(Base)20 b(T)-7 b(ypes)50 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)73 b(86)575 1347 y(9.2)85 b(Unit)21
b(type)43 b(.)e(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(86)575 1447 y(9.3)85 b(Coer)o(cions)26 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(87)575 1546 y(9.4)85 b(Let)21 b(bindings)54 b(.)41
b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73
b(87)575 1646 y(9.5)85 b(Pr)o(oducts)64 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(88)575
1746 y(9.6)85 b(Recor)o(ds)21 b(and)f(T)-7 b(uples)44
b(.)e(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(88)575
1845 y(9.7)85 b(V)-8 b(ariants)25 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(90)575 1945
y(9.8)85 b(Sums)64 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(91)575 2045 y(9.9)85
b(General)21 b(Recursion)j(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(91)575 2144 y(9.10)43 b(Lists)32 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)73 b(92)575 2244 y(9.1)-5 b(1)48 b(Lazy)20 b(r)o(ecor)o(ds)f
(and)i(let-bindings)43 b(.)e(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(93)450
2426 y Ge(10)41 b(Exceptions)2379 b(95)575 2526 y Gd(10.1)43
b(Simple)21 b(Exceptions)26 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)73 b(96)575 2626 y(10.2)43 b(Handling)22 b(Exceptions)53
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(96)575
2725 y(10.3)43 b(Exceptions)21 b(Carrying)g(V)-8 b(alues)60
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)73 b(97)575 2825 y(10.4)43
b(Further)21 b(Reading)36 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)73 b(98)450 3008 y Ge(1)m(1)44 b(References)2375
b(99)575 3107 y Gd(1)-5 b(1.1)48 b(T)-7 b(ype)20 b(and)h(Ef)o(fect)e
(Systems)60 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(105)575
3207 y(1)-5 b(1.2)48 b(Further)21 b(Reading)36 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(105)450 3390 y Ge(12)41 b(Subtyping)2347 b(106)575
3489 y Gd(12.1)43 b(The)21 b(Subtype)f(Relation)39 b(.)i(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)31 b(107)575 3589 y(12.2)43 b(Safety)c(.)i(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(1)-5 b(1)g(1)575 3688 y(12.3)43 b(V)-8 b(ariance)73
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(1)-5 b(1)g(1)575 3788 y(12.4)43 b(Coer)o(cion)21
b(Semantics)43 b(.)f(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(1)-5
b(1)g(1)575 3888 y(12.5)43 b(Subtyping)22 b(and)e(Refer)o(ences)54
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36 b(1)-5 b(12)575 3987
y(12.6)43 b(Primitive)22 b(Subtyping)82 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)36 b(1)-5 b(12)575 4087 y(12.7)43 b(The)21
b(Bottom)h(T)-7 b(ype)72 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)36 b(1)-5 b(12)450 4270 y Ge(13)41 b(Implementation)17
b(of)k(Subtyping)1618 b(1)m(13)575 4369 y Gd(13.1)43
b(Algorithmic)22 b(Subtyping)40 b(.)h(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
36 b(1)-5 b(13)575 4469 y(13.2)43 b(Minimal)21 b(T)-7
b(yping)47 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36
b(1)-5 b(14)575 4568 y(13.3)43 b(Concr)o(ete)21 b(Realization)65
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36 b(1)-5
b(18)575 4668 y(13.4)43 b(Meets)21 b(and)f(Joins)57 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36
b(1)-5 b(19)p eop
%%Page: 4 5
4 4 bop 450 683 a Ge(14)41 b(Imperative)18 b(Objects)2023
b(122)575 783 y Gd(14.1)43 b(Objects)59 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(122)575
882 y(14.2)43 b(Invariants)79 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(124)575 982 y(14.3)43
b(Object)22 b(Generators)40 b(.)h(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)31 b(124)575 1082 y(14.4)43 b(Subtyping)72 b(.)41
b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(125)575 1181 y(14.5)43 b(Basic)21 b(classes)57 b(.)41
b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(125)575 1281 y(14.6)43 b(Extending)21 b(the)g(Internal)g(State)50
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(126)575 1380 y(14.7)43
b(Classes)21 b(with)h(\223Self)5 b(\224)58 b(.)42 b(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)31 b(128)450 1563 y Ge(15)41 b(Recursive)19
b(T)-7 b(ypes)2132 b(131)575 1663 y Gd(15.1)43 b(Examples)33
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)31 b(133)828 1762 y(Lists)g(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(133)828
1862 y(Hungry)21 b(Functions)28 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)31 b(134)828 1962 y(Recursive)20 b(V)-8 b(alues)21
b(fr)o(om)g(Recursive)f(T)-7 b(ypes)71 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(134)828 2061
y(Untyped)20 b(Lambda-Calculus,)f(Redux)44 b(.)d(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(134)828
2161 y(Recursive)20 b(Objects)51 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)31 b(137)575 2260 y(15.2)43 b(Equi-r)o(ecursive)20
b(T)-7 b(ypes)55 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(137)575 2360 y(15.3)43 b(Iso-r)o(ecursive)20 b(T)-7
b(ypes)55 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(137)575 2460 y(15.4)43 b(Subtyping)22 b(and)e(Recursive)h(T)-7
b(ypes)39 b(.)i(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(138)450 2642 y Ge(16)41
b(Implementing)17 b(Recursive)j(T)-7 b(ypes)1567 b(139)828
2742 y Gd(ML)20 b(Implementation)25 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)31 b(141)450 2925 y Ge(17)41 b(Case)19 b(Study:)25
b(Featherweight)18 b(Java)1550 b(143)450 3107 y(18)41
b(T)-7 b(ype)20 b(Reconstruction)1969 b(144)575 3207
y Gd(18.1)43 b(Substitution)68 b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)31 b(144)575 3307 y(18.2)43 b(Universal)21
b(vs.)f(Existential)h(T)-7 b(ype)20 b(V)-8 b(ariables)65
b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
31 b(145)575 3406 y(18.3)43 b(Constraint-Based)20 b(T)-7
b(yping)38 b(.)j(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(147)575
3506 y(18.4)43 b(Uni\002cation)g(.)e(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(151)575 3605 y(18.5)43
b(Principal)21 b(T)-7 b(ypings)56 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)31 b(154)575 3705 y(18.6)43 b(Further)21
b(Reading)36 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
31 b(155)450 3888 y Ge(19)41 b(Universal)18 b(T)-7 b(ypes)2137
b(156)575 3987 y Gd(19.1)43 b(Motivation)i(.)c(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(156)575 4087
y(19.2)43 b(V)-8 b(arieties)21 b(of)g(Polymorphism)35
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(157)575 4187 y(19.3)43
b(De\002nitions)48 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)31 b(158)575 4286 y(19.4)43 b(Examples)33
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)31 b(161)828 4386 y(W)-8 b(arm-ups)66 b(.)41 b(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(161)828 4485
y(Polymorphic)22 b(Lists)32 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)31 b(162)828 4585 y(Impr)o(edicative)19 b(Encodings)31
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(162)575 4685 y(19.5)43
b(Metatheory)26 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)31 b(166)828 4784 y(Soundness)56 b(.)41
b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(166)828 4884 y(Str)o(ong)20 b(Normalization)26 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(166)p eop
%%Page: 5 6
5 5 bop 828 683 a Gd(Erasur)o(e)19 b(and)h(T)-7 b(ypeability)74
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(166)828 783 y(T)-7
b(ype)20 b(Reconstr)o(uction)76 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)31 b(168)575 882 y(19.6)43 b(Implementation)51 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(168)828 982 y(Nameless)20 b(Repr)o(esentation)h(of)g(T)-7
b(ypes)63 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)31 b(168)828 1082 y(ML)20 b(Code)45
b(.)c(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(168)575 1181 y(19.7)43 b(Further)21 b(Reading)36 b(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(169)450 1364 y Ge(20)41 b(Existential)16 b(T)-7 b(ypes)2105
b(170)575 1463 y Gd(20.1)43 b(Motivation)i(.)c(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(170)575 1563
y(20.2)43 b(Data)21 b(Abstraction)f(with)i(Existentials)70
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)31 b(175)828 1663 y(Abstract)20 b(Data)g(T)-7
b(ypes)22 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(175)828 1762 y(Existential)20 b(Objects)27 b(.)42 b(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)31 b(178)828 1862 y(Objects)21
b(vs.)g(ADT)-7 b(s)79 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
31 b(180)575 1962 y(20.3)43 b(Encoding)22 b(Existentials)35
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(180)575
2061 y(20.4)43 b(Implementation)51 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)31 b(182)575 2161 y(20.5)43 b(Historical)22
b(Notes)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(182)450 2343 y Ge(21)41 b(Bounded)19 b(Quanti\002cation)1832
b(183)575 2443 y Gd(21.1)43 b(Motivation)i(.)c(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(183)575 2543
y(21.2)43 b(De\002nitions)48 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(185)828 2642 y(Kernel)21
b(F)1140 2654 y Gc(<)-11 b(:)1218 2642 y Gd(.)41 b(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(185)828
2742 y(Full)21 b(F)1039 2754 y Gc(<)-11 b(:)1156 2742
y Gd(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(188)575 2842 y(21.3)43 b(Examples)33 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(189)828 2941 y(Encoding)21 b(Pr)o(oducts)66 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(189)828 3041
y(Encoding)21 b(Recor)o(ds)35 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)31 b(189)828 3140 y(Chur)o(ch)20 b(Encodings)i(with)f
(Subtyping)53 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)31 b(191)575 3240 y(21.4)43 b(Safety)c(.)i(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(193)575 3340 y(21.5)43 b(Bounded)21 b(Existential)g(T)-7
b(ypes)35 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(197)575
3439 y(21.6)43 b(Historical)22 b(Notes)f(and)f(Further)h(Reading)65
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(197)450 3622 y Ge(22)41 b(Implementing)17 b(Bounded)j
(Quanti\002cation)1267 b(199)575 3722 y Gd(22.1)43 b(Pr)o(omotion)64
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(199)575 3821 y(22.2)43 b(Minimal)21 b(T)-7 b(yping)47
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(200)575 3921 y(22.3)43 b(Subtyping)22 b(in)f Gb(F)1302
3891 y Ga(k)1302 3941 y F9(<:)1405 3921 y Gd(.)41 b(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(202)575 4040 y(22.4)43
b(Subtyping)22 b(in)f Gb(F)1302 3995 y Ga(f)1302 4048
y F9(<:)1405 4040 y Gd(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)31 b(205)575 4139 y(22.5)43 b(Undecidability)21
b(of)f(Subtyping)h(in)h(Full)f(F)2135 4151 y Gc(<)-11
b(:)2214 4139 y Gd(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)31 b(207)450 4322 y Ge(23)41 b(Denotational)17
b(Semantics)1846 b(21)m(1)575 4422 y Gd(23.1)43 b(T)-7
b(ypes)21 b(as)f(Subsets)h(of)f(the)h(Natural)f(Numbers)61
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(212)828 4521 y(The)20 b(Universe)h(of)f(Natural)g(Numbers)66
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)31 b(212)828 4621 y(Subset)20 b(Semantics)h(for)f(F)1653
4633 y Gc(<)-11 b(:)1778 4621 y Gd(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(213)828 4721 y(Pr)o(oblems)21 b(with)g(the)g(Subset)f(Semantics)63
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(216)575 4820 y(23.2)43 b(The)21 b(PER)g(interpr)o(etation)45
b(.)c(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(216)828 4920
y(Interpr)o(etation)20 b(of)h(T)-7 b(ypes)48 b(.)41 b(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)31 b(217)p eop
%%Page: 6 7
6 6 bop 828 683 a Gd(Applications)21 b(of)f(the)h(PER)g(model)68
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)31 b(218)828 783 y(Digr)o(ession)21 b(on)h(full)f
(abstraction)55 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(222)575 882
y(23.3)43 b(General)21 b(Recursion)h(and)e(Recursive)h(T)-7
b(ypes)53 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)31 b(222)828 982 y(Continuous)22 b(Partial)e(Or)o(ders)42
b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(222)828 1082 y(The)20
b(CUPER)h(Interpr)o(etation)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(226)828 1181 y(Interpr)o(eting)20 b(Recursive)h(T)-7
b(ypes)77 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(227)575 1281 y(23.4)43
b(Further)21 b(Reading)36 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)31 b(229)450 1463 y Ge(24)41 b(T)-7 b(ype)20
b(Equivalence)2074 b(230)450 1646 y(25)41 b(De\002nitions)2319
b(232)575 1746 y Gd(25.1)43 b(T)-7 b(ype)20 b(De\002nitions)35
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(232)575 1845 y(25.2)43 b(T)-8 b(erm)21 b(De\002nitions)k(.)41
b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(234)450 2028 y Ge(26)41 b(T)-7 b(ype)20 b(Operators)g(and)f(Kinding)
1661 b(235)575 2128 y Gd(26.1)43 b(Intuitions)35 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(235)575 2227 y(26.2)43 b(De\002nitions)48 b(.)41 b(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(238)450
2410 y Ge(27)41 b(Higher)o(-Order)19 b(Polymorphism)1646
b(242)575 2510 y Gd(27.1)43 b(Higher)o(-Or)o(der)20 b(Universal)g(T)-7
b(ypes)79 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(242)575 2609 y(27.2)43
b(Higher)o(-Or)o(der)20 b(Existential)g(T)-7 b(ypes)52
b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)31 b(244)575 2709 y(27.3)43 b(T)-7
b(ype)20 b(Equivalence)h(and)f(Reduction)54 b(.)42 b(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(247)575 2808 y(27.4)43 b(Soundness)57 b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(247)450 2991
y Ge(28)41 b(Implementing)17 b(Higher)o(-Order)j(Systems)1330
b(250)450 3174 y(29)41 b(Higher)o(-Order)19 b(Subtyping)1807
b(253)450 3356 y(30)41 b(Polymorphic)19 b(Update)1962
b(257)450 3539 y(31)41 b(Purely)19 b(Functional)g(Objects)g(and)h
(Classes)1296 b(259)575 3639 y Gd(31.1)43 b(Simple)21
b(Objects)32 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(259)575 3738 y(31.2)43 b(Subtyping)72 b(.)41
b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(260)575 3838 y(31.3)43 b(Interface)20 b(T)-7 b(ypes)82
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(261)575 3937 y(31.4)43 b(Sending)21 b(Messages)f(to)i(Objects)81
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)31 b(261)575 4037 y(31.5)43 b(Simple)21
b(Classes)31 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(262)575 4137 y(31.6)43 b(Adding)21 b(Instance)g(V)-8
b(ariables)43 b(.)f(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(263)575
4236 y(31.7)43 b(Classes)21 b(with)h(\223Self)5 b(\224)58
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(265)575
4336 y(31.8)43 b(Class)21 b(T)-7 b(ypes)22 b(.)41 b(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(266)575
4436 y(31.9)43 b(Generic)21 b(Inheritance)43 b(.)f(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)31 b(266)p eop
%%Page: 7 8
7 7 bop 450 683 a Ge(32)41 b(Structures)19 b(and)g(Modules)1841
b(269)575 783 y Gd(32.1)43 b(Basic)21 b(Str)o(uctur)o(es)56
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(269)575 882 y(32.2)43 b(Recor)o(d)21 b(Kinds)g(and)f(Subkinding)30
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)31 b(273)575 982 y(32.3)43 b(Singleton)22
b(Kinds)54 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(275)575 1082 y(32.4)43 b(Dependent)21 b(Function)h(and)e(Recor)o(d)h
(Kinds)75 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)31 b(276)575 1181 y(32.5)43 b(Dependent)21
b(Recor)o(d)f(Expr)o(essions)h(and)f(Recor)o(ds)h(of)f(T)-7
b(ypes)57 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(277)575
1281 y(32.6)43 b(Higher)o(-Kind)21 b(Singletons)79 b(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(278)575 1380 y(32.7)43
b(First-class)21 b(Substr)o(uctur)o(es)f(and)h(Functors)54
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)31 b(279)575 1480 y(32.8)43 b(Second-Class)20 b(Modules)57
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(281)575
1580 y(32.9)43 b(Other)21 b(points)h(to)f(make)48 b(.)41
b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(281)450 1762
y Ge(33)41 b(Planned)18 b(Chapters)2073 b(282)450 2049
y F8(Appendices)2308 b(284)450 2231 y Ge(A)60 b(Solutions)19
b(to)h(Selected)e(Exercises)1584 b(284)450 2414 y(B)70
b(Summary)19 b(of)j(Notation)1923 b(304)575 2514 y Gd(B.1)76
b(Metavariable)19 b(Conventions)42 b(.)g(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(304)575 2613 y(B.2)76 b(Rule)22 b(Naming)f(Conventions)33
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(304)450 2796 y Ge(C)65
b(Suggestions)18 b(for)k(Larger)e(Projects)1571 b(306)575
2896 y Gd(C.1)68 b(Objects)59 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(306)575 2995
y(C.2)68 b(Encodings)22 b(of)f(Logics)k(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)31 b(307)575 3095 y(C.3)68 b(T)-7 b(ype)20
b(Infer)o(ence)36 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)31 b(308)575 3194 y(C.4)68 b(Other)21 b(T)-7
b(ype)20 b(Systems)30 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
31 b(308)575 3294 y(C.5)68 b(Sour)o(ces)20 b(for)h(Additional)f(Ideas)
29 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(309)450 3477 y Ge(D)56
b(Bluf)o(fers)20 b(Guide)f(to)i(OCaml)1794 b(310)450
3659 y(E)74 b(Running)19 b(the)h(Checkers)1904 b(31)m(1)575
3759 y Gd(E.1)76 b(Pr)o(eparing)20 b(Y)-8 b(our)22 b(Input)42
b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36 b(31)-5
b(1)575 3859 y(E.2)76 b(Ascii)21 b(Equivalents)62 b(.)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)36 b(31)-5
b(1)575 3958 y(E.3)76 b(Running)23 b(the)e(Checker)46
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(312)575
4058 y(E.4)76 b(Old)21 b(Instr)o(uctions)43 b(.)e(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)31 b(313)828 4157 y(Compiling)22
b(the)f(Checkers)61 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)31
b(313)828 4257 y(Objective)21 b(Caml)75 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)31 b(313)450 4440 y Ge(Bibliography)2371
b(314)450 4622 y(Index)2657 b(327)p eop
%%Page: 8 9
8 8 bop 450 1347 a Gk(Preface)450 1779 y Gd(The)25 b(study)h(of)f
F7(type)f(systems)h Gd(for)g(pr)o(ogramming)h(languages)f(has)g(emer)o
(ged)f(over)h(the)g(past)450 1879 y(decade)e(as)h(one)i(of)e(the)h
(most)h(active)d(ar)o(eas)g(of)i(computer)g(science)f(r)o(esear)o(ch,)g
(with)h(impor)o(-)450 1978 y(tant)31 b(applications)f(in)i(softwar)o(e)
d(engineering,)34 b(pr)o(ogramming)d(language)f(design,)j(high-)450
2078 y(performance)20 b(compiler)h(implementation,)g(and)g(security)g
(of)f(information)i(networks.)575 2177 y(This)30 b(text)g(aims)h(to)g
(intr)o(oduce)f(the)g(ar)o(ea)e(to)j(beginning)h(graduate)d(students)h
(and)g(ad-)450 2277 y(vanced)18 b(under)o(graduates.)23
b(A)18 b(br)o(oad)g(range)g(of)h(cor)o(e)f(topics)h(ar)o(e)e(cover)o
(ed)h(in)h(detail,)f(includ-)450 2377 y(ing)28 b(simple)f(type)g
(systems,)j(type)d(r)o(econstr)o(uction,)i(universal)e(and)g
(existential)g(polymor)o(-)450 2476 y(phism,)35 b(subtyping,)g(bounded)
c(quanti\002cation,)k(r)o(ecursive)30 b(types,)k(and)d(type)h
(operators.)450 2576 y(Early)16 b(chapters)h(on)h(the)f(untyped)g
(lambda-calculus)f(help)h(make)g(the)g(book)h(self-contained,)450
2676 y(allowing)k(it)g(to)g(be)f(used)g(in)h(courses)f(for)g(students)h
(with)g(no)g(backgr)o(ound)f(in)h(the)f(theory)h(of)450
2775 y(pr)o(ogramming)f(languages.)575 2875 y(The)h(book)i(adopts)e(a)g
(str)o(ongly)i(pragmatic)d(appr)o(oach)h(thr)o(oughout:)30
b(a)22 b(typical)h(chapter)450 2974 y(begins)17 b(with)g(pr)o
(ogramming)f(examples)g(motivating)h(a)f(new)h(typing)g(featur)o(e,)e
(develops)h(the)450 3074 y(featur)o(e)j(and)h(its)h(basic)f(metatheory)
-9 b(,)20 b(adduces)f(typechecking)i(algorithms,)h(and)e(illustrates)
450 3174 y(these)32 b(with)g(executable)f(ML)g(typecheckers.)58
b(The)31 b(underlying)i(semantic)f(formalism)g(is)450
3273 y(almost)17 b(entir)o(ely)g(operational,)g(for)g(a)g(close)g(corr)
o(espondence)f(with)i(familiar)e(pr)o(ogramming)450 3373
y(languages.)575 3473 y(A)f(r)o(epeated)f(theme)j(is)f(the)g(theor)o
(etical)g(pr)o(operties)f(r)o(equir)o(ed)g(to)h(build)g(sound)h(and)f
(com-)450 3572 y(plete)33 b(typechecking)g(algorithms.)63
b(Both)34 b(the)f(pr)o(oofs)g(and)f(the)i(algorithms)g(themselves)450
3672 y(ar)o(e)23 b(pr)o(esented)g(in)i(detail.)35 b(Mor)o(eover)-6
b(,)24 b(each)f(chapter)h(is)g(accompanied)g(by)g(a)g(r)o(unning)i(im-)
450 3771 y(plementation)31 b(that)g(can)f(be)h(used)f(as)g(a)g(basis)h
(for)f(experimentation)h(by)g(students,)i(class)450 3871
y(pr)o(ojects,)20 b(etc.)450 4157 y Gj(Audience)450 4346
y Gd(The)h(book)g(is)g(aimed)f(at)g(graduate)f(students,)i(including)h
(both)f(the)g(general)f(graduate)f(pop-)450 4446 y(ulation)29
b(as)e(well)i(as)e(students)i(intending)g(to)f(specialize)f(in)h(pr)o
(ogramming)h(language)e(r)o(e-)450 4545 y(sear)o(ch.)45
b(For)29 b(the)e(former)-6 b(,)29 b(it)f(should)h(serve)e(to)h(intr)o
(oduce)f(a)h(number)g(of)f(key)h(ideas)f(fr)o(om)450
4645 y(the)h(design)f(and)g(analysis)h(of)f(pr)o(ogramming)h
(languages,)h(with)f(type)f(systems)h(as)f(an)h(or)o(-)450
4744 y(ganizing)d(str)o(uctur)o(e.)36 b(For)25 b(the)g(latter)-6
b(,)24 b(it)h(should)g(pr)o(ovide)f(suf)o(\002cient)g(backgr)o(ound)g
(to)h(pr)o(o-)450 4844 y(ceed)i(dir)o(ectly)g(on)h(to)g(the)g(r)o
(esear)o(ch)e(literatur)o(e.)45 b(The)27 b(book)i(is)f(suitable)f(for)h
(self-study)f(by)1929 5169 y(8)p eop
%%Page: 9 10
9 9 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1066 b Gd(P)t
F6(R)t(E)t(F)o(A)t(C)t(E)i Gd(9)450 683 y(r)o(esear)o(chers)24
b(in)i(other)g(ar)o(eas)e(who)j(want)f(to)g(learn)g(something)h(about)f
(type)g(systems,)h(and)450 783 y(should)18 b(be)f(a)g(useful)g(r)o
(efer)o(ence)e(for)i(experts.)23 b(The)18 b(\002rst)f(several)g
(chapters)f(should)i(be)f(usable)450 882 y(in)k(upper)o(-division)g
(under)o(graduate)d(courses.)450 1163 y Gj(Goals)450
1352 y Gd(The)j(main)g(goals)g(of)g(the)g(book)g(ar)o(e:)575
1496 y F5(\017)41 b Gd(Accessibility)-9 b(.)31 b(A)22
b(r)o(eader)f(should)i(be)f(able)g(to)i(appr)o(oach)d(the)i(book)g
(with)h(little)f(or)f(no)658 1595 y(backgr)o(ound)e(in)h(theory)g(of)g
(pr)o(ogramming)g(languages.)575 1750 y F5(\017)41 b
Gd(Coverage)24 b(of)h(cor)o(e)g(topics.)40 b(By)25 b(the)h(end)f(of)g
(the)h(book,)h(the)e(r)o(eader)f(should)i(be)f(fully)658
1850 y(equipped)20 b(to)h(tackle)f(the)h(r)o(esear)o(ch)e(literatur)o
(e)h(in)h(type)f(systems.)575 2005 y F5(\017)41 b Gd(Pragmatism.)29
b(The)22 b(book)h(stays)f(as)g(close)g(as)g(possible)g(to)h(pr)o
(ogramming)f(languages)658 2104 y(\(sometimes)e(at)g(the)h(expense)e
(of)h(topics)h(that)f(might)i(be)d(included)h(in)h(a)f(book)h(written)
658 2204 y(fr)o(om)28 b(the)i(perspective)e(of)h(typed)g
(lambda-calculi)f(and)g(logic\).)52 b(In)29 b(particular)-6
b(,)30 b(the)658 2304 y(underlying)21 b(computational)g(substrate)g(is)
g(a)f(call-by-value)f(lambda-calculus.)575 2458 y F5(\017)41
b Gd(Diversity)-9 b(.)26 b(The)20 b(book)i(tries)f(to)g(show)h(the)f
(lea\002ness)g(of)g(the)g(topic)g(rather)f(than)h(trying)658
2558 y(to)30 b(unify)h(all)f(the)g(thr)o(eads)f(addr)o(essed)g(in)h
(the)h(book.)55 b(\(Of)29 b(course,)k(I've)d(uni\002ed)g(as)658
2658 y(many)21 b(of)f(the)h(thr)o(eads)f(as)g(I)h(could)g(manage.\))575
2813 y F5(\017)41 b Gd(Honesty)-9 b(.)48 b(Every)27 b(type)h(system)g
(discussed)g(in)h(the)f(book)h(is)f(implemented.)48 b(Every)658
2912 y(example)20 b(r)o(uns.)450 3056 y(T)-8 b(o)21 b(achieve)f(all)h
(this,)g(a)f(few)h(other)g(desirable)f(pr)o(operties)g(have)g(been)g
(sacri\002ced.)575 3200 y F5(\017)41 b Gd(Completeness)27
b(of)h(coverage)e(\(pr)o(obably)g(impossible)j(in)e(one)h(book,)i
(certainly)d(in)g(a)658 3299 y(textbook\).)575 3454 y
F5(\017)41 b Gd(Ef)o(\002ciency)31 b(\(as)g(opposed)h(to)g
(termination\))h(of)f(the)g(typechecking)g(algorithms)h(de-)658
3554 y(scribed.)27 b(This)22 b(is)g(not)g(a)f(book)i(about)e
(industrial-str)o(ength)h(typechecker)f(implemen-)658
3653 y(tation.)450 3934 y Gj(Required)29 b(Background)450
4123 y Gd(No)20 b(backgr)o(ound)f(in)h(the)g(theory)g(of)f(pr)o
(ogramming)h(languages)g(is)g(assumed,)f(but)h(students)450
4223 y(should)27 b(appr)o(oach)e(the)i(book)g(with)g(a)f(degr)o(ee)f
(of)h(prior)h(mathematical)f(maturity)g(\(in)h(par)o(-)450
4322 y(ticular)-6 b(,)27 b(rigor)o(ous)h(under)o(graduate)c(coursework)
j(in)h(discr)o(ete)d(mathematics,)j(algorithms,)450 4422
y(and)20 b(elementary)h(logic\).)575 4521 y(Readers)27
b(should)i(also)g(be)f(familiar)g(with)h(some)g(higher)o(-or)o(der)e
(functional)i(pr)o(ogram-)450 4621 y(ming)g(language)f(\(Scheme,)h(ML,)
e(Haskell,)j(etc.\),)f(and)f(basic)g(concepts)h(of)f(pr)o(ogramming)450
4721 y(languages)18 b(and)f(compilers)h(\(abstract)f(syntax,)h
(Backus-Naur)e(grammars,)i(evaluation,)g(ab-)450 4820
y(stract)24 b(machines,)h(etc.\).)34 b(This)24 b(material)g(is)g
(available)f(in)h(many)h(excellent)e(under)o(graduate)450
4920 y(texts.)i(I)c(particularly)f(like)h(the)g(one)g(by)g(Friedman,)f
(W)-8 b(and,)21 b(and)f(Haynes)h([FWH92)o(].)p eop
%%Page: 10 11
10 10 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1045 b
Gd(P)t F6(R)t(E)t(F)o(A)t(C)t(E)j Gd(10)450 686 y Gj(Course)30
b(Outlines)450 875 y Gd(In)35 b(an)g(advanced)e(graduate)h(course,)k
(it)d(should)h(be)e(possible)i(to)f(cover)f(essentially)i(the)450
975 y(whole)29 b(book)h(in)f(a)f(semester)-6 b(.)49 b(For)29
b(an)f(under)o(graduate)e(or)j(beginning)h(graduate)d(course,)450
1074 y(ther)o(e)20 b(ar)o(e)f(two)j(basic)e(paths)h(thr)o(ough)g(the)g
(material:)554 1240 y(1.)41 b(type)20 b(systems)i(in)f(pr)o(ogramming)g
(\(omitting)h(implementation)g(chapters\),)d(and)554
1406 y(2.)41 b(basic)15 b(theory)i(and)f(implementation)h(\(omitting)g
(or)f(skimming)i(the)f(end)e(of)i(the)f(book\).)450 1572
y(Shorter)j(courses)h(can)f(also)h(be)f(constr)o(ucted)h(by)g
(selecting)g(particular)e(chapters)h(of)h(inter)o(est.)450
1672 y(Figur)o(e)31 b(1)g(gives)h(a)f(sample)h(syllabus)g(fr)o(om)f(an)
g(intr)o(oductory)h(graduate-level)e(course)h(at)450
1772 y(Penn)21 b(\(two)g(lectur)o(es)f(a)h(week)f(of)h(90)f(minutes)h
(each\).)575 1871 y(In)k(a)g(course)g(wher)o(e)g(term)g(pr)o(ojects)g
(ar)o(e)f(a)g(major)i(part)e(of)i(the)f(work,)i(it)e(may)g(be)g(desir)o
(-)450 1971 y(able)18 b(to)g(postpone)h(some)g(of)g(the)f(theor)o
(etical)g(material)f(\(e.g.,)h(denotational)h(semantics,)f(and)450
2071 y(per)o(haps)j(some)i(of)f(the)g(deeper)f(chapters)h(on)h
(implementation\))g(so)f(that)h(a)e(br)o(oad)g(range)h(of)450
2170 y(examples)k(can)g(be)h(cover)o(ed)e(befor)o(e)g(the)i(point)h
(wher)o(e)e(students)h(have)f(to)h(choose)g(pr)o(oject)450
2270 y(topics.)450 2556 y Gj(Chapter)i(Dependencies)450
2745 y Gd(The)i(major)h(dependencies)e(between)i(chapters)e(ar)o(e)g
(outlined)i(in)g(Figur)o(e)f(2.)56 b(Solid)31 b(lines)450
2844 y(indicate)22 b(that)h(the)g(later)g(chapter)f(is)h(best)g(r)o
(ead)e(after)h(the)h(earlier)-6 b(.)31 b(Dotted)23 b(lines)g(mean)g
(that)450 2944 y(the)e(chapters)f(can)h(be)f(r)o(ead)f(in)i(any)g(or)o
(der)f(except)g(for)g(some)h(sections.)450 3230 y Gj(T)-11
b(ypographic)31 b(Conventions)450 3419 y Gd(Most)22 b(chapters)g
(develop)g(the)h(featur)o(es)d(of)i(some)h(type)g(system)g(in)f(a)g
(discursive)g(way)-9 b(,)23 b(then)450 3519 y(de\002ne)k(the)h(system)g
(formally)g(as)f(a)g(collection)i(of)e(infer)o(ence)g(r)o(ules)g(with)i
(brackets)e(above)450 3618 y(and)18 b(below)i(to)f(set)g(them)g(of)o(f)
f(fr)o(om)g(the)h(surr)o(ounding)h(text.)k(For)19 b(the)g(sake)g(of)g
(completeness,)450 3718 y(these)h(de\002nitions)h(ar)o(e)d(usually)i
(pr)o(esented)e(in)i(full,)f(including)i(not)f(only)h(the)e(new)h(r)o
(ules)g(for)450 3817 y(the)j(featur)o(es)e(under)h(discussion)i(at)e
(the)h(moment,)h(but)f(also)g(the)f(r)o(est)g(of)h(the)g(r)o(ules)g
(needed)450 3917 y(to)i(constitute)g(a)f(complete)h(calculus.)37
b(The)24 b(new)h(parts)f(ar)o(e)f(set)h(on)i(a)e(gray)g(backgr)o(ound)g
(to)450 4017 y(make)d(the)f(\223delta\224)f(fr)o(om)i(pr)o(evious)f
(systems)i(visually)f(obvious.)575 4116 y(An)27 b(unusual)h(featur)o(e)
e(of)i(the)f(book's)i(pr)o(oduction)f(is)g(that)g(all)f(the)h(examples)
f(ar)o(e)f(me-)450 4216 y(chanically)16 b(checked)f(during)h
(typesetting:)24 b(an)15 b(automatic)h(script)g(goes)g(thr)o(ough)g
(each)f(chap-)450 4316 y(ter)-6 b(,)25 b(extracts)f(the)h(examples,)f
(generates)g(and)h(compiles)g(a)f(custom)i(typechecker)e(contain-)450
4415 y(ing)j(just)g(the)g(featur)o(es)d(under)i(discussion,)j(applies)d
(it)h(to)g(the)f(examples,)h(and)f(inserts)h(the)450
4515 y(checker)6 b('s)22 b(r)o(esponses)g(in)h(the)g(text.)29
b(The)23 b(system)g(that)f(does)g(the)h(har)o(d)e(parts)g(of)i(this,)g
(called)450 4614 y F7(T)-5 b(inkerT)d(ype)p Gd(,)21 b(was)f(developed)g
(by)h(Michael)f(Levin)h(and)f(myself)h([LP99)o(].)p eop
%%Page: 11 12
11 11 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1048 b
Gd(P)t F6(R)t(E)t(F)o(A)t(C)t(E)i Gd(1)-5 b(1)759 898
y F7(Actual:)556 998 y Gd(1.)140 b(Course)21 b(outline;)h(history;)f
(administrivia)540 b(1)556 1097 y(2.)140 b(Pr)o(eliminaries:)26
b(syntax)20 b(and)h(semantics)598 b(2)21 b(\(outside)f(class\),)g(3)556
1197 y(3.)140 b(Intr)o(oduction)22 b(to)f(the)g(lambda-calculus)600
b(4.1,)20 b(4.2)556 1297 y(4.)140 b(Formalizing)22 b(the)f
(lambda-calculus)708 b(4.3,)20 b(5)556 1396 y(5.)140
b(Basics)21 b(of)g(types;)f(the)h(simply)h(typed)e(lambda)g(calculus)99
b(6,)20 b(7)556 1496 y(6.)140 b(Simple)21 b(extensions;)g(derived)f
(forms)695 b(9)556 1595 y(7.)140 b(Mor)o(e)20 b(extensions)1317
b(9)556 1695 y(8.)140 b(Normalization)1380 b(8)556 1795
y(9.)140 b(Exceptions;)21 b(r)o(efer)o(ences)1104 b(10,)20
b(1)-5 b(1)p 506 1828 2888 4 v 759 1898 a F7(T)c(entative:)556
1997 y Gd(10.)98 b(Equivalence;)21 b(de\002nitions)1035
b(24,)20 b(25)556 2097 y(1)-5 b(1.)103 b(Subtyping)1537
b(12)556 2197 y(12.)98 b(Subtyping;)21 b(imperative)f(objects)826
b(14)556 2296 y(13.)98 b(Recursive)21 b(types)1338 b(15)556
2396 y(14.)98 b(Recursive)21 b(types)1338 b(15)556 2495
y(15.)98 b(Str)o(uctural)20 b(vs.)26 b(nominal)c(pr)o(esentations)584
b(17)556 2595 y(16.)98 b(Case)20 b(study:)26 b(Featherweight)21
b(Java)756 b(17)556 2695 y(17.)98 b(T)-7 b(ype)20 b(r)o(econstr)o
(uction)1191 b(18)556 2794 y(18.)98 b(Universal)21 b(polymorphism)993
b(19)556 2894 y(19.)98 b(Existential)21 b(polymorphism;)h(ADT)-7
b(s)715 b(20)556 2994 y(20.)98 b(Bounded)21 b(quanti\002cation)1051
b(21,)20 b(22)556 3093 y(21.)98 b(T)-7 b(ype)20 b(operators)1368
b(26)556 3193 y(22.)98 b(T)-7 b(ype)20 b(operators)h(\(metatheory\))870
b(27)556 3292 y(23.)98 b(Higher)o(-or)o(der)19 b(subtyping;)j
(polymorphic)g(update)239 b(29,)20 b(30)556 3392 y(24.)98
b(Pur)o(ely)21 b(functional)g(objects)1012 b(31)556 3492
y(25.)98 b(Over\003ow)556 3591 y(26.)g(Over\003ow)1479
3773 y(Figur)o(e)21 b(1:)k(Sample)19 b(syllabus)1366
4585 y(Figur)o(e)h(2:)25 b(Chapter)20 b(dependencies)p
eop
%%Page: 12 13
12 12 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1045 b
Gd(P)t F6(R)t(E)t(F)o(A)t(C)t(E)j Gd(12)450 686 y Gj(Electronic)29
b(resources)450 875 y Gd(A)19 b(collection)h(of)f(implementations)i
(for)e(the)g(typecheckers)g(and)g(interpr)o(eters)f(described)h(in)450
975 y(the)j(text)g(is)g(available)e(at)i F4(http://www.cis.)o(upe)o(nn)
o(.e)o(du/)o(~b)o(cpi)o(er)o(ce)o(/ty)o(pe)o(sbo)o(ok)o
Gd(.)h(These)450 1074 y(implementations)30 b(have)f(been)f(polished)i
(for)f(r)o(eadability)e(and)i(modi\002ability)-9 b(,)31
b(and)d(have)450 1174 y(been)c(used)f(successfully)h(by)g(my)h
(students)f(as)g(the)g(basis)f(of)h(both)h(small)f(implementation)450
1274 y(exer)o(cises)17 b(and)h(lar)o(ger)f(course)i(pr)o(ojects.)24
b(The)19 b(implementation)g(language)f(is)h(the)g(Objective)450
1373 y(Caml)i(dialect)f(of)g(ML,)g(fr)o(eely)g(available)f(thr)o(ough)i
F4(http://caml.inria)o(.f)o(r)p Gd(.)575 1473 y(Corr)o(ections)h(for)g
(any)g(err)o(ors)f(discover)o(ed)g(in)i(the)g(text)f(will)h(also)f(be)g
(made)g(available)e(at)450 1572 y F4(http://www.cis.u)o(pen)o(n.)o(ed)o
(u/~)o(bc)o(pie)o(rc)o(e/t)o(yp)o(es)o(boo)o(k)p Gd(.)450
1858 y Gj(Acknowledgements)450 2047 y F7(Many!)p eop
%%Page: 13 14
13 13 bop 450 1306 a F3(Chapter)44 b(1)450 1721 y Gk(Introduction)770
2126 y F7(Pr)o(oofs)17 b(of)g(pr)o(ograms)f(ar)o(e)h(too)f(boring)h
(for)h(the)e(social)h(pr)o(ocess)g(of)g(mathematics)e(to)i(work.)963
2227 y Gd(\227)k(Richar)o(d)f(DeMillo,)h(Richar)o(d)f(Lipton,)h(and)f
(Alan)h(Perlis)g([DLP79)n(])770 2396 y F7(...So)f(don')m(t)g(r)o(ely)h
(on)g(social)f(pr)o(ocesses)h(for)g(veri\002cation.)2716
2497 y Gd(\227)g(David)f(Dill)575 2697 y F7(Some)31 b(writing)g(r)o
(emains)h(in)g(this)f(chapter;)36 b(what')-5 b(s)31 b(her)o(e)h(should)
f(be)h(r)o(egarded)f(as)g(a)h(detailed)450 2796 y(sketch.)24
b(It')-5 b(s)19 b(not)f(worth)g(making)g(detailed)g(comments)g(at)g
(the)g(level)h(of)f(sentences,)j(since)e(all)g(that)e(will)450
2896 y(change.)25 b(Comments)20 b(on)h(the)f(coher)o(ence)h(of)f(the)h
(ideas)f(ar)o(e)h(very)g(welcome.)450 2995 y Gd(Despite)26
b(decades)f(of)g(concern)i(in)f(both)h(industry)f(and)f(academia,)h
(expensive)f(failur)o(es)g(of)450 3095 y(lar)o(ge)d(softwar)o(e)f(pr)o
(ojects)i(ar)o(e)e(common.)33 b(Pr)o(oposed)22 b(appr)o(oaches)g(to)h
(impr)o(oving)g(softwar)o(e)450 3195 y(quality)g(include\227among)h
(other)f(ideas\227a)f(br)o(oad)f(spectr)o(um)i(of)g(techniques)h(for)e
(helping)450 3294 y(ensur)o(e)30 b(that)i(a)e(softwar)o(e)g(system)i
(behaves)f(corr)o(ectly)f(with)i(r)o(espect)e(to)h(some)h(speci\002ca-)
450 3394 y(tion,)26 b(implicit)g(or)f(explicit,)g(of)g(its)g(desir)o
(ed)f(behavior)-6 b(.)37 b(On)25 b(one)g(end)g(of)g(this)g(spectr)o(um)
g(ar)o(e)450 3494 y(powerful)19 b(frameworks)h(such)g(as)f(algebraic)f
(speci\002cation)i(languages,)f(modal)h(logics,)g(and)450
3593 y(denotational)c(semantics;)i(these)f(can)e(be)h(used)g(to)h(expr)
o(ess)e(very)h(general)f(corr)o(ectness)h(pr)o(op-)450
3693 y(erties)k(but)g(ar)o(e)f(cumbersome)i(to)g(use)f(and)g(demand)f
(signi\002cant)j(involvement)f(by)f(the)h(pr)o(o-)450
3793 y(grammer)d(not)h(only)g(in)f(the)h(application)f(domain)g(but)g
(also)h(in)f(the)g(formal)g(subtleties)h(of)f(the)450
3892 y(framework)f(itself.)24 b(At)16 b(the)i(other)f(end)g(ar)o(e)e
(techniques)j(of)f(much)h(mor)o(e)f(limited)g(power)o(\227so)450
3992 y(limited)j(that)h(they)f(can)g(be)g(built)g(into)h(compilers)g
(or)f(linkers)g(and)g(thus)h(\223applied\224)d(even)i(by)450
4091 y(pr)o(ogrammers)27 b(unfamiliar)f(with)i(the)g(underlying)f
(theories.)45 b(Such)27 b(methods)h(often)f(take)450
4191 y(the)21 b(form)g(of)f F7(type)g(systems)p Gd(.)1908
5169 y(13)p eop
%%Page: 14 15
14 14 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(14)450 686 y Gj(1.1)119 b(What)29 b(is)h(a)g(T)-11
b(ype)30 b(System?)450 875 y Gd(Despite)25 b(the)g(ar)o(ea's)e(long)i
(history)h(and)e(huge)h(r)o(esear)o(ch)e(literatur)o(e,)h(it)h(is)g
(quite)g(dif)o(\002cult)g(to)450 975 y(de\002ne)20 b(the)g(term)g
(\223type)g(system\224)g(in)g(a)g(way)g(that)g(covers)g(most)h
(informal)f(usage)g(but)g(is)g(still)450 1074 y(speci\002c)h(enough)g
(to)h(have)e(any)h(bite.)k(Her)o(e)20 b(is)h(my)g(best)g(attempt:)658
1240 y F7(A)27 b(type)g(system)h(is)g(a)g(clearly)g(speci\002ed)f
(static)g(method)g(for)h(pr)o(oving)e(the)h(absence)j(of)658
1340 y(certain)20 b(pr)o(ogram)g(behaviors.)450 1506
y Gd(Or)-6 b(,)20 b(per)o(haps)g(better:)658 1672 y F7(A)g(type)g
(system)g(is)h(a)g(syntactic)f(method)f(for)i(enfor)o(cing)f
(disciplined)g(pr)o(ogramming.)575 1838 y Gd(Unpacking)g(this)i
(de\002nition)g(a)e(little...)575 2004 y F5(\017)41 b
F7(pr)o(ogram)28 b(behaviors)p Gd(:)44 b(This)31 b(book)g(is)f
(concerned)g(with)h(type)f(systems)h(for)f(pr)o(ogram-)658
2104 y(ming)35 b(languages.)67 b(The)34 b(term)h(\223type)f
(systems\224)h(\(or)-6 b(,)37 b(per)o(haps)c(mor)o(e)i(commonly)-9
b(,)658 2203 y(\223type)29 b(theory\224\))g(is)i(also)f(used)f(in)i
(other)f(parts)f(of)h(computer)g(science)g(and)f(mathe-)658
2303 y(matics,)19 b(wher)o(e)f(the)h(focus)g(is)g(on)g(connections)h
(between)f(types)g(and)f(logical)h(pr)o(oposi-)658 2403
y(tions)25 b(\(the)g(\223Curry-Howar)o(d)e(isomorphism\224\).)38
b(Similar)25 b(concepts,)h(notations,)g(and)658 2502
y(techniques)33 b(apply)-9 b(,)34 b(but)e(ther)o(e)f(ar)o(e)g(some)i
(important)f(dif)o(fer)o(ences)e(in)i(orientation.)658
2602 y(For)24 b(example,)g(mathematical)f(type)h(theory)g(is)h
(typically)f(concerned)f(with)i(systems)658 2702 y(in)c(which)h(every)f
(well-typed)g(computation)h(is)g(guaranteed)d(to)j(terminate,)f(wher)o
(eas)658 2801 y(most)g(pr)o(ogramming)g(languages)f(sacri\002ce)g(this)
h(pr)o(operty)f(in)h(r)o(eturn)e(for)i(the)f(conve-)658
2901 y(nience)h(of)f(featur)o(es)f(like)i(r)o(ecursive)f(function)h
(de\002nitions.)575 3067 y F5(\017)41 b F7(static)p Gd(:)22
b(\(A)15 b(type)h(system)g(is)g(a)f F7(static)h Gd(check\227typically)f
(built)i(into)f(the)g(compiler)g(\(and/or)658 3166 y(linker:)38
b(cf.)43 b(Java\).)g(Fr)o(om)27 b(this)h(perspective,)f(terms)g(like)g
(\223dynamically)g(typed\224)f(or)658 3266 y(\223latently)20
b(typed\224)g(ar)o(e)f(misnomers,)j(better)e(r)o(eplaced)f(by)i
(\223dynamically)f(checked.\224\))575 3432 y F5(\017)41
b F7(automatically)p Gd(:)22 b(\(In)e(pr)o(ogramming)f(languages,)h
(the)f(use)h(of)f(the)h(term)f(\223type)g(system\224)658
3532 y(is)26 b(generally)f(r)o(estricted)f(to)i(methods)h(with)f(ef)o
(\002cient)f(decision)h(pr)o(ocedur)o(es.)39 b(How-)658
3631 y(ever)-6 b(,)32 b(exactly)e(what)g(constitutes)i(ef)o(\002cient)e
(is)h(a)f(matter)h(of)f(debate.)54 b(Even)31 b(widely)658
3731 y(used)25 b(type)h(systems)h(like)f(ML)-6 b('s)25
b(may)h(exhibit)h(very)e(poor)h(\(exponential\))g(ef)o(\002ciency)658
3831 y(in)h(pathological)h(cases.)44 b(Also,)29 b(most)f(type)g
(systems)g(r)o(equir)o(e)e(some)i(help)f(fr)o(om)g(the)658
3930 y(pr)o(ogrammer)e(in)h(terms)g(of)g(explicit)g(annotations;)k(at)
25 b(some)i(point)f(this)h(annotation)658 4030 y(activity)d(become)g
(full-blown)h(theor)o(em)g(pr)o(oving\227wher)o(e)f(to)g(draw)g(the)h
(line)f(is)h(not)658 4130 y(at)16 b(all)h(clear)-6 b(.)23
b(In)18 b(practice,)e(this)i(is)g(an)f(ar)o(ea)e(wher)o(e)h
(terminology)j(is)f(driven)e(by)i(technol-)658 4229 y(ogy:)30
b(when)24 b(someone)g(comes)f(up)g(with)h(an)e(analysis)i(that)e(can)h
(be)g(performed)f(\223ef)o(\002-)658 4329 y(ciently)c(in)g
(practice\224)e(with)j(\223fairly)d(light\224)i(pr)o(ogrammer)f
(annotations,)i(it)f(tends)g(to)g(be)658 4428 y(called)k(a)g(type)h
(system.)33 b(Pr)o(ojects)23 b(like)g(Compaq-SRC's)g(Extended)f(Static)
g(Checking)658 4528 y(play)e(near)g(the)h(boundary)-9
b(.\))575 4694 y F5(\017)41 b F7(rigor)o(ously)31 b(speci\002ed)p
Gd(:)49 b(\(A)31 b(type)h(system)h(is)g(usually)g(consider)o(ed)e(to)i
(be)f(part)g(of)g(the)658 4794 y(language\227something)23
b(that)g(can)f(be)g(included)g(in)h(the)f(language)g(de\002nition.)32
b(A)22 b(set)658 4893 y(of)33 b(heuristics)g(implemented)g(by)g(the)g
(compiler)h(or)f(another)g(analysis)g(tool)h(is)f(not)p
eop
%%Page: 15 16
15 15 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(15)658 683 y(usually)24 b(called)f(a)g(type)h(system,)i(on)e(this)
h(account.)35 b(However)-6 b(,)24 b(this)h(distinction)g(can)658
783 y(become)d(dif)o(\002cult)g(\(and)f(pr)o(obably)h(not)h(very)f(pr)o
(oductive\).)30 b(For)22 b(example,)g(methods)658 882
y(like)f(\223soft)f(typing\224)h(for)g(Scheme)f(lie)h(on)g(the)g
(boundary)-9 b(.\))575 1048 y F5(\017)41 b F7(absence)p
Gd(:)49 b(\(Being)32 b(static,)j(type)d(systems)h(ar)o(e)e(necessarily)
h(conservative:)48 b(they)32 b(can)658 1148 y(pr)o(ove)f(the)i(absence)
e(of)i(some)g(bad)e(behaviors,)k(but)d(they)h(may)f(sometimes)i(r)o
(eject)658 1248 y(pr)o(ograms)17 b(in)h(which,)h(dynamically)-9
b(,)18 b(these)g(bad)f(behaviors)h(ar)o(e)f(never)g(encounter)o(ed.)658
1347 y(E.g.)25 b F4(if)42 b(<complex)f(calculation>)d(then)k(true\(5\))
f(else)h(0)o Gd(.\))575 1513 y F5(\017)f F7(certain)p
Gd(:)36 b(\(In)26 b(practice,)g(no)h(type)f(system)h(can)e(pr)o(event)h
(every)f(sort)i(of)f(bad)f(dynamic)658 1613 y(behavior:)k(conditions)24
b(like)g(divide)e(by)h(zer)o(o,)f(array)g(index)g(out)i(of)f(bounds,)g
(nonter)o(-)658 1712 y(mination,)33 b(etc.)53 b(ar)o(e)29
b(typically)h(\(though)h(not)f(always!\))54 b(taken)30
b(to)g(fall)f(outside)i(the)658 1812 y(type)20 b(system's)i(purview)-8
b(.\))575 1978 y F5(\017)41 b F7(pr)o(oving)p Gd(:)53
b(\(A)35 b(type)h(system)g(should)h(pr)o(ovide)e(a)g
F7(guarantee)h Gd(that)f(the)h(behaviors)g(it)658 2078
y(pr)o(events)27 b(ar)o(e)f(r)o(eally)h(pr)o(evented,)i(and)e(this)i
(guarantee)e(should)i(be)e(something)j(we)658 2177 y(can)d(establish)h
(once)h(and)e(for)h(all)g(for)f(all)h(pr)o(ograms)f(in)i(the)f
(language.)47 b(T)-8 b(erms)28 b(like)658 2277 y(\223weakly)21
b(typed\224)h(ar)o(e)f(euphamisms)i(for)f(\223unsound\224)h(or)f
(\223wr)o(ong.\224)30 b(W)-8 b(e)23 b(need)f(to)g(be)658
2377 y(car)o(eful,)e(however:)29 b(some)23 b(type)f(systems)h(ar)o(e)e
(explicitly)h(designed)g(to)h(defer)e(certain)658 2476
y(checks)27 b(until)h(r)o(un-time)g(for)f(gr)o(eater)e(\003exibility)-9
b(.)46 b(Ar)o(e)26 b(these)h(systems)h(simply)g(\223un-)658
2576 y(safe,\224)19 b(or)i(should)h(we)e(\(pr)o(obably\))g(consider)h
(them)g(simply)h(to)f(be)g(making)g(a)g(slightly)658
2676 y(weaker)f(pr)o(omise)g(than)h(they)g(might)h(\002rst)f(have)f
(appear)o(ed)e(to)k(be?\))658 2808 y(\(Exactly)f(which)i(err)o(ors)f
(or)h(nonsensical)g(states)g(a)f(type)g(system)h(is)g(intended)f(to)h
(pr)o(e-)658 2908 y(vent)28 b(is)g(a)g(matter)f(to)i(be)e(decided)g
(for)h(each)g(language)f(design:)41 b(ther)o(e)27 b(is)i(no)f(single)
658 3008 y(notion)22 b(of)f(\223type)f(safety)-9 b(.\224)24
b(See)c(the)h(discussion)h(below)-8 b(.\))p 661 3126
2579 4 v 661 3225 4 100 v 1021 3225 V 1040 3225 V 1094
3195 a(Statically)20 b(typed)p 2343 3225 V 732 w(Dynamically)h(checked)
p 3236 3225 V 661 3229 2579 4 v 661 3249 V 661 3436 4
188 v 714 3318 a(Safe)p 1021 3436 V 1040 3436 V 226 w(ML,)61
b(Haskell,)72 b(Pascal)62 b(\(almost\),)1094 3418 y(Java)19
b(\(almost\))p 2343 3436 V 2397 3318 a(Lisp,)h(Scheme)p
3236 3436 V 661 3439 2579 4 v 661 3539 4 100 v 714 3509
a(Unsafe)p 1021 3539 V 1040 3539 V 122 w(C,)g(C++)p 2343
3539 V 1044 w(Perl)p 3236 3539 V 661 3542 2579 4 v 450
3773 a Gj(1.2)119 b(What)29 b(is)h(a)g(T)-11 b(ype)30
b(System)g(For?)450 3978 y F8(Ef)n(\002ciency)p eop
%%Page: 16 17
16 16 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(16)450 683 y F8(Safety)770 837 y F7(W)n(ell-typed)20
b(pr)o(ograms)g(cannot)g(go)g(wr)o(ong.)2501 938 y Gd(\227)g(Robin)i
(Milner)f([)p Ge(?)o Gd(])450 1138 y(The)26 b(term)f(\223safety\224)f
(is)j(quite)f(dif)o(\002cult)f(to)h(pin)g(down.)41 b(Ther)o(e)25
b(is)h(general)f(agr)o(eement)g(that)450 1237 y(some)34
b(languages)g(ar)o(e)e(safer)g(than)i(others,)j(but)c(each)g(person's)i
(de\002nition)f(of)g(pr)o(ecisely)450 1337 y(what)25
b(this)h(means)g(is)f(color)o(ed)g(by)g(the)g(language)g(framework)g
(that)g(they)g(pr)o(efer)-6 b(.)37 b(My)25 b(best)450
1437 y(shot:)658 1597 y(A)g(safe)f(language)i(is)g(one)g(whose)g
(complete)g(de\002nition)g(appears)e(in)j(the)e(pr)o(o-)658
1697 y(grammer)6 b('s)20 b(manual.)450 1858 y(Every)h(language)g(comes)
i(with)f(a)f(language)h(de\002nition\227i.e.,)g(the)g(set)g(of)f
(things)i(you)f(need)450 1957 y(to)g(know)h(to)f(be)f(able)g(to)h(pr)o
(edict)f(the)h(behavior)f(of)h(any)f(pr)o(ogram)g(in)i(the)e(language.)
28 b(Some-)450 2057 y(times)d(\(e.g.)38 b(Scheme,)25
b(ML,)f(Haskell,)i(Java\))d(the)i(language)g(de\002nition)h(is)f(the)g
(same)g(as)g(the)450 2157 y(language)j(manual,)h(i.e.)46
b(the)28 b(de\002nition)h(is)f(written)h(out)f(somewher)o(e)g(very)f
(pr)o(ecisely)-9 b(,)29 b(or)450 2256 y(even)17 b(\(SML\))e(formally)-9
b(.)24 b(For)17 b(other)g(languages)f(\(e.g.)24 b(C,)16
b(C++,)i(Perl\))f(some)g(r)o(ules)g(ar)o(e)f(written)450
2356 y(out)k(mor)o(e)e(or)i(less)f(exactly)-9 b(,)19
b(while)g(others)h(must)g(be)e(\002gur)o(ed)h(out)g(or)h(learned)e(by)h
(experience)450 2456 y(\227)26 b(the)h(\223de\002nition,\224)h(in)f(ef)
o(fect,)f(is)g(just)i(the)e(sour)o(ce)g(code)g(for)g(a)g(compiler)h(or)
g(interpr)o(eter)-6 b(.)450 2555 y(Phrases)22 b(like)h(\223if)e(X)i
(happens,)f(the)g(r)o(esults)g(ar)o(e)f(unde\002ned\224)g(ar)o(e)g(a)h
(shorthand)g(for)g(\223to)g(pr)o(e-)450 2655 y(dict)e(the)g(r)o(esult)f
(of)h(X,)g(you)g(have)f(to)i(understand)e(the)h(compiler)g([and)f(the)h
(r)o(untime)h(system,)450 2754 y(OS,)f(and)h(machine)g(ar)o(chitectur)o
(e].\224)575 2854 y(\(Assembly)j(languages)h(can)f(be)h(r)o(egar)o(ded)
d(as)i(safe)g(in)i(this)f(sense)g(\(the)g(\223de\002nition\224)g(is)450
2954 y(the)c(machine)g(ar)o(chitectur)o(e)e(manual\),)h(but)h(this)g
(is)g(not)h(a)e(very)g(inter)o(esting)h(claim\))575 3053
y(Implementation)i(featur)o(es)e(like)i(GC)g(and)f(aggr)o(essive)g
(optimization)h(ar)o(e)f(much)h(easier)450 3153 y(to)e(implement)h(in)f
(safe)f(languages.)575 3253 y(\223Str)o(ongly)g(typed\224)g(is)h(often)
g(used)f(as)h(a)f(synonym)j(for)d(\223safe.\224)575 3352
y(At)25 b(this)i(level,)g(the)g(err)o(oneous)f(behaviors)g(ar)o(e)e
(generally)i(fairly)g(simple,)i(local)e(things)450 3452
y(like)g(branching)g(to)g(a)g(\003oat.)41 b(T)-7 b(ype)25
b(systems)i(ar)o(e)d(good)i(at)g(pr)o(eventing)f(many)-9
b(,)27 b(but)f(not)g(all,)450 3551 y(such)21 b(err)o(ors.)575
3651 y(Safety)c(can)i(be)f(achieved)g(by)h(both)h(static)e(and)h
(dynamic)g(means)g(\(typically)g(a)f(combina-)450 3751
y(tion\).)26 b(Some)21 b(advantages)e(of)i(doing)g(it)g(statically)g
(when)g(possible)h(ar)o(e:)575 3912 y F5(\017)41 b Gd(ef)o(\002ciency:)
23 b(a)17 b(check)h(can)f(be)h(done)g(once)g(at)f(compile)i(\(or)e
(link\))h(time)g(instead)g(of)g(many)658 4011 y(times)j(at)f(r)o(un)h
(time)575 4175 y F5(\017)41 b Gd(early)20 b(err)o(or)f(detection)450
4335 y(Of)i(course,)f(ther)o(e)g(ar)o(e)f(costs)j(too:)575
4496 y F5(\017)41 b Gd(\(possibly\))21 b(heavier)f(/)h(mor)o(e)f
(verbose)h(syntax)575 4660 y F5(\017)41 b Gd(some)21
b(safe)f(pr)o(ograms)g(will)i(inevitably)e(be)h(excluded)575
4820 y(Almost)33 b(all)g(general)g(purpose)g(languages)g(\226)f(even)h
(seamless)h(and)e(civilized)h(ones)g(\226)450 4920 y(of)o(fer)24
b(pr)o(ogrammers)i(\223escape)e(hatches\224)h(\(like)h(calls)f(to)h
(C\))g(and)f(warn)g(them)i(to)f(use)g(them)p eop
%%Page: 17 18
17 17 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(17)450 683 y(with)29 b(car)o(e)d(because)h(they)i(br)o(eak)d(the)j
(safety)e(pr)o(operties.)47 b(Indeed,)28 b(such)h(escape)e(hatches)450
783 y(ar)o(e)d(often)i(pr)o(ovided)e(within)j(the)e(language)g(itself.)
40 b(OCaml)26 b(has)f(\223magic.\224)39 b(SML/NJ)24 b(has)450
882 y F4(Unsafe.cast)k Gd(\(check!\).)61 b(M3)31 b(has)i
F4(unsafe)d Gd(modules)k(that)e(ar)o(e)f(explicitly)i(permitted)g(to)
450 982 y(perform)18 b(operations)h(whose)g(corr)o(ectness)f(depends)g
(on)h(a)f(detailed)f(understanding)h(of)h(the)450 1082
y(compiler)h(and)e(r)o(untime)i(system.)26 b(Such)19
b(featur)o(es)f(do)h(weaken)g(the)h(claim)f(that)g(\223well)g(typed)450
1181 y(pr)o(ograms)g(cannot)h(go)g(wr)o(ong,\224)f(since)h(they)g(make)
f(it)h(easy)f(to)h(write)g(pr)o(ograms)f(that)g(dump)450
1281 y(cor)o(e,)g(scribble)g(over)h(arbitrary)e(memory)i(locations,)h
(etc.)k(But)19 b(at)g(least,)h(when)g(the)g(pr)o(ogram)450
1380 y(does)c(dump)g(cor)o(e,)h(one)f(knows)i(that)e(only)h(the)f
F4(unsafe)e Gd(modules)j(\(and)e(the)i(compiler)f(itself!\))450
1480 y(need)k(to)h(be)g(examined.)575 1580 y(A)k(slightly)j(dif)o(fer)o
(ent)23 b(way)j(of)g(talking)h(about)f(safety:)35 b(Car)o(delli)25
b([)p Ge(?)o Gd(])h(distinguishes)i(be-)450 1679 y(tween)e(what)g(he)h
(calls)f F7(trapped)e Gd(and)i F7(untrapped)f(err)o(ors)p
Gd(.)42 b(T)-7 b(rapped)25 b(err)o(ors)g(cause)g(a)h(compu-)450
1779 y(tation)d(to)g(stop)f(immediately)-9 b(,)23 b(while)g(untrapped)e
(err)o(ors)h(may)g(allow)h(the)f(computation)i(to)450
1879 y(continue)e(\(at)e(least)h(for)f(a)h(while\).)26
b(An)21 b(example)f(of)h(an)g(untrapped)f(err)o(or)f(might)j(be)f
(access-)450 1978 y(ing)e(data)f(beyond)h(the)g(end)f(of)h(an)g(array)e
(in)i(a)g(language)f(like)h(C.)f(Car)o(delli)g(ar)o(gues)g(that)g(a)g
F7(safe)450 2078 y Gd(language)i(is)i(one)f(that)f(does)h(not)h(allow)f
(any)g(untrapped)e(err)o(ors)h(to)h(occur)g(at)f(r)o(un-time.)575
2177 y(An)g(oft-r)o(emarked)e(\(and)i(somewhat)h(puzzling\))f(fact:)k
(This)d(kind)g(of)f(checking)h(exposes)450 2277 y(not)26
b(only)h(trivial)e(mental)h(slips,)h(but)f(also)f(deeper)g(conceptual)g
(err)o(ors,)h(which)g(fr)o(equently)450 2377 y(manifest)h(as)f(type)h
(err)o(ors.)43 b(Pr)o(ograms)26 b(that)h(pass)g(the)g(typechecker)f
(tend)h(to)g(\223just)g(work\224)450 2476 y(mor)o(e)16
b(often)h(than)g(you)g(feel)f(you)i(have)e(a)g(right)h(to)g(expect.)24
b(This)17 b(ef)o(fect)e(depends)h(on)h(the)g(type)450
2576 y(of)k(pr)o(oblem)h(you'r)o(e)f(working)h(on)g(and)f(the)h(degr)o
(ee)e(of)h(r)o(e\002nement)h(of)f(the)h(type)f(system,)h(of)450
2676 y(course.)450 2918 y F8(Documentation)450 3076 y
Gd(T)-7 b(ypes)20 b(ar)o(e)g(\223checked)f(documentation\224)450
3319 y F8(Support)25 b(for)g(Programmer)n(-De\002ned)e(Abstractions)770
3473 y F7(T)-8 b(ype)20 b(structur)o(e)h(is)g(a)g(syntactic)f
(discipline)g(for)h(enfor)o(cing)g(levels)g(of)g(abstraction.)2265
3575 y Gd(\227)g(John)g(Reynolds)h([Rey83)o(])450 3774
y(By)33 b(\223security\224)g(her)o(e)g(I)h(mean)f(\223language)g
(support)h(for)f(pr)o(ogrammer)o(-de\002ned)f(abstrac-)450
3873 y(tions\224)i([the)f(wor)o(d)h(is)f(not)i(ideal)e(\227)g
(suggestions?])65 b(\(Of)33 b(course,)k(only)d(safe)f(languages)450
3973 y(can)21 b(be)h(tr)o(uly)g(secur)o(e,)f(but)g(many)h(unsafe)g
(languages)f(pr)o(ovide)g(appr)o(oximations:)27 b(the)22
b(con-)450 4073 y(cepts)17 b(ar)o(e)f(somewhat)i(orthogonal\227i.e.,)g
(you)g(can)f(say)g(\223safe)f(pr)o(ograms)g(ar)o(e)g(secur)o(e,\224)g
(even)450 4172 y(though)22 b(you)f(can't)g(decide)f(mechanically)h
(which)g(pr)o(ograms)f(ar)o(e)g(safe.\))575 4272 y(Her)o(e)25
b(the)i(err)o(oneous)f(behaviors)h(ar)o(e)e(extended)g(to)i(include)g
(br)o(eaking)f(pr)o(ogrammer)o(-)450 4372 y(de\002ned)d(abstractions.)
32 b(This)24 b(form)f(of)g(security)h(is)f(a)g(cr)o(ucial)g(r)o(equir)o
(ement)f(for)h(lar)o(ge-scale)450 4471 y(pr)o(ogramming.)575
4571 y(type)d(systems)i(ar)o(e)d(a)h(very)h(important)g(mechanism)h
(for)e(achieving)h(language)f(security)-9 b(,)450 4670
y(but)21 b(ther)o(e)f(ar)o(e)f(others)575 4837 y F5(\017)41
b Gd(pr)o(ocedural)19 b(abstraction)h(\(simple)h(objects\))p
eop
%%Page: 18 19
18 18 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(18)575 683 y F5(\017)41 b Gd(r)o(un-time)21 b(support)g(for)f
(generative)g(tags)h(\(MzScheme\))575 849 y F5(\017)41
b Gd(sandboxing,)21 b(on-the-\003y)g(r)o(ewriting,)f(and)h(other)g(r)o
(un-time)g(techniques)575 1015 y F5(\017)41 b Gd(OS-level)20
b(mechanisms)h(\(separate)e(addr)o(ess)g(spaces\))450
1258 y F8(Language)25 b(Design)450 1416 y Gd(T)-7 b(ype)23
b(system)h(design)g(goes)h(hand)e(in)h(hand)g(with)g(language)g
(design,)g(and)g(a)f(typing)h(disci-)450 1516 y(pline)d(comes)g(with)h
(a)e(pr)o(ogramming)h(discipline.)575 1615 y(T)-7 b(ype)26
b(systems)j(should)f(be)g(part)e(of)i(the)g(PL)f(design:)40
b(\(Morrisett\))26 b(The)i(design)g(of)f(this)450 1715
y(notation)19 b(for)f(expr)o(essing)g(invariants)g(is)h(a)f(language)g
(design)g(that)h(r)o(equir)o(es)e(a)h(lot)g(of)h(car)o(eful)450
1814 y(thought.)47 b(If)27 b(it's)g(not)i(designed)e(as)g(a)g
(language,)h(then)g(pr)o(ogrammers)f(have)g(no)h(portable)450
1914 y(way)c(of)h(expr)o(essing)f(their)h(intention)h(or)f(interfacing)
f(to)h(the)g(analysis)f(tools.)38 b(In)25 b(addition,)450
2014 y(when)h(integrated)f(into)h(the)g(language)f(\(or)h(at)f(least)g
(envir)o(onment\),)h(a)g(compiler)f(can)g(take)450 2113
y(advantage)20 b(of)i(the)g(invariants.)28 b(And)22 b(\002nally)-9
b(,)22 b(the)g(ability)f(to)i(explicitly)f(state)f(invariants)h(is)450
2213 y(cr)o(ucial)i(for)f(giving)i(understandable)d(feedback)g(to)j
(the)f(pr)o(ogrammer)e(when)j(the)f(analysis)450 2313
y(fails.)575 2412 y(\(Development)j(of)g(the)g(type)f(system)i(should)g
(go)f(hand-in-hand)g(with)g(the)g(language)450 2512 y(and)17
b(that)h(getting)g(good)g(r)o(esults)g(is)g(as)f(much)h(a)g(function)g
(of)g(getting)g(pr)o(ogrammers)f(to)h(meet)450 2611 y(the)j
(type-checker)f(in)h(the)g(middle)f(as)h(it)g(is)g(for)g(sophisticated)
g(analyses.)k(\227)c(Morrisett\))575 2711 y(A)e(statically)g(typed)g
(language)g(is)h(not)g(the)g(same)f(as)g(an)h(explicitly)f(typed)g
(one.)26 b(\(Harper:)450 2811 y(A)20 b(r)o(elated)e(point)j(is)f(the)g
(appar)o(ent)e(inability)j(of)f(some)h(writers)f(to)g(imagine)g(type)g
(infer)o(ence,)450 2910 y(equating)k(typed)f(languages)g(with)h(those)g
(that)g(r)o(equir)o(e)e(huge)i(amounts)g(of)f(type)g(informa-)450
3010 y(tion)33 b(to)f(be)g(explicitly)g(and)g(tediously)h(maintained)f
(by)g(the)g(pr)o(ogrammer)-6 b(.)59 b(Ouster)o(hout)450
3110 y(comes)21 b(to)g(mind)h(her)o(e.\))450 3395 y Gj(1.3)119
b(History)450 3584 y Gd(The)20 b(following)h(table)f(pr)o(esents)f(a)g
(\(r)o(ough)h(and)g(incomplete\))g(chr)o(onology)h(of)f(some)g(impor)o
(-)450 3684 y(tant)g(high)h(points)h(in)e(the)h(history)g(of)f(type)g
(systems)h(in)g(computer)f(science.)25 b(Related)20 b(devel-)450
3784 y(opments)j(in)g(logic)g(ar)o(e)e(also)i(included)f(\(in)h
(italics\),)f(to)h(give)g(a)f(sense)g(of)h(the)g(importance)f(of)450
3883 y(this)f(\002eld's)g(contributions.)p 450 3979 3000
4 v 450 4079 4 100 v 503 4049 a(late)f(1800s)150 b F7(Origins)21
b(of)g(formal)f(logic)1535 b Gd([)p Ge(?)o Gd(])p 3447
4079 V 450 4179 V 503 4149 a(early)20 b(1900s)98 b F7(Formalization)20
b(of)h(mathematics)1116 b Gd([WR25)o(])p 3447 4179 V
450 4278 V 503 4248 a(1930s)303 b F7(Untyped)19 b(lambda-calculus)1231
b Gd([Chu41)o(])p 3447 4278 V 450 4378 V 503 4348 a(1940s)303
b F7(Simply)20 b(typed)f(lambda-calculus)852 b Gd([Chu40)o(,)20
b(CF58)o(])p 3447 4378 V 450 4477 V 503 4448 a(1950s)303
b(Fortran)1846 b([Bac81)n(])p 3447 4477 V 450 4577 V
503 4547 a(1950s)303 b(Algol)1921 b([N)3231 4517 y F2(+)3286
4547 y Gd(63)o(])p 3447 4577 V 450 4677 V 503 4647 a(1960s)303
b F7(Automath)19 b(pr)o(oject)1559 b Gd([dB80)n(])p 3447
4677 V 450 4776 V 503 4746 a(1960s)303 b(Simula)1730
b([BDMN79)n(])p 3447 4776 V 450 4876 V 503 4846 a(1970s)303
b F7(Martin-L)5 b(\250)-32 b(of)20 b(type)g(theory)756
b Gd([Mar73)n(,)20 b(Mar82)n(,)g(SNP90)o(])p 3447 4876
V 450 4879 3000 4 v eop
%%Page: 19 20
19 19 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(19)p 450 603 3000 4 v 450 703 4 100 v 503 673 a(1960s)98
b F7(Curry-Howard)20 b(isomorphism)1313 b Gd([How80)o(])p
3447 703 V 450 803 V 503 773 a(1970s)98 b F7(System)20
b(F)-9 b(,)21 b Gd(F)1205 743 y F1(!)3138 773 y Gd([Gir72)o(])p
3447 803 V 450 902 V 503 872 a(1970s)98 b(polymorphic)22
b(lambda-calculus)1211 b([Rey74)o(])p 3447 902 V 450
1002 V 503 972 a(1970s)98 b(CLU)2058 b([LAB)3232 942
y F2(+)3286 972 y Gd(81)o(])p 3447 1002 V 450 1101 V
503 1072 a(1970s)98 b(polymorphic)22 b(type)f(infer)o(ence)1042
b([Mil78)o(,)20 b(DM82)o(])p 3447 1101 V 450 1201 V 503
1171 a(1970s)98 b(ML)2100 b([GMW79)n(])p 3447 1201 V
450 1301 V 503 1271 a(1970s)98 b F7(intersection)21 b(types)1085
b Gd([CDC78)o(,)21 b(CDCS79)n(,)g(Pot80)o(])p 3447 1301
V 450 1400 V 503 1370 a(1980s)98 b(NuPRL)21 b(pr)o(oject)1756
b([Con86)o(])p 3447 1400 V 450 1500 V 503 1470 a(1980s)98
b(subtyping)1388 b([Rey80)o(,)20 b(Car84)n(,)h(Mit84a)n(])p
3447 1500 V 450 1600 V 503 1570 a(1980s)98 b(ADT)-7 b(s)20
b(as)h(existential)f(types)1408 b([MP88)n(])p 3447 1600
V 450 1699 V 503 1669 a(1980s)98 b F7(calculus)21 b(of)g(constructions)
1219 b Gd([Coq85,)20 b(CH88)o(])p 3447 1699 V 450 1799
V 503 1769 a(1980s)98 b F7(linear)22 b(logic)1677 b Gd([Gir87)o(,)20
b(GL)-6 b(T89)o(])p 3447 1799 V 450 1898 V 503 1869 a(1980s)98
b(bounded)21 b(quanti\002cation)820 b([CW85)n(,)21 b(CG92)o(,)g(CMMS94)
m(])p 3447 1898 V 450 1998 V 503 1968 a(1980s)98 b F7(Edinbur)o(gh)20
b(Logical)g(Framework)1245 b Gd([HHP92)o(])p 3447 1998
V 450 2098 V 503 2068 a(1980s)98 b(Forsythe)1993 b([Rey88)o(])p
3447 2098 V 450 2197 V 503 2167 a(1980s)98 b F7(pur)o(e)21
b(type)e(systems)1690 b Gd([Bar92a)m(])p 3447 2197 V
450 2297 V 503 2267 a(1980s)98 b(dependent)20 b(types)h(and)f
(modularity)1088 b([Mac86)m(])p 3447 2297 V 450 2397
V 503 2367 a(1980s)98 b(Quest)2104 b([Car91)n(])p 3447
2397 V 450 2496 V 503 2466 a(1980s)98 b F7(Extended)19
b(Calculus)j(of)f(Constructions)1099 b Gd([Luo90)o(])p
3447 2496 V 450 2596 V 503 2566 a(1980s)98 b(Ef)o(fect)19
b(systems)1551 b([)p Ge(?)p Gd(,)20 b(TJ92)o(,)g(TT97)o(])p
3447 2596 V 450 2695 V 503 2666 a(1980s)98 b(r)o(ow)21
b(variables)e(and)i(extensible)f(r)o(ecor)o(ds)394 b([W)-8
b(an87)o(,)21 b(R)6 b(\264)-34 b(em89)o(,)21 b(CM91)n(])p
3447 2695 V 450 2795 V 503 2765 a(1990s)98 b(higher)o(-or)o(der)19
b(subtyping)1004 b([Car90)n(,)20 b(CL91)o(,)g(PT94)o(])p
3447 2795 V 450 2895 V 503 2865 a(1990s)98 b(typed)20
b(intermediate)h(languages)1114 b([TMC)3232 2835 y F2(+)3286
2865 y Gd(96)o(])p 3447 2895 V 450 2994 V 503 2964 a(1990s)98
b(Object)21 b(Calculus)1755 b([AC96)n(])p 3447 2994 V
450 3094 V 503 3064 a(1990s)98 b(translucent)21 b(types)g(and)f
(modarity)934 b([HL94)n(,)21 b(Ler94)n(])p 3447 3094
V 450 3194 V 503 3164 a(1990s)98 b(typed)20 b(assembly)h(language)1237
b([MWCG98)n(])p 3447 3194 V 450 3197 3000 4 v 575 3349
a(In)33 b(computer)g(science,)j(the)e(earliest)e(type)h(systems,)k
(beginning)e(in)e(the)h(1950s)d(\(e.g.,)452 3448 y(F)t
F6(O)t(R)r(T)t(R)t(A)t(N)r Gd(\),)h(wer)o(e)c(used)h(to)h(impr)o(ove)f
(ef)o(\002ciency)f(of)i(numerical)f(calculations)g(by)h(distin-)450
3548 y(guishing)j(between)e(integer)o(-valued)f(variables)g(and)h
(arithmetic)g(expr)o(essions)h(and)f(r)o(eal-)450 3648
y(valued)25 b(ones,)j(allowing)f(the)f(compiler)g(to)h(use)f(dif)o(fer)
o(ent)d(r)o(epr)o(esentations)i(and)h(generate)450 3747
y(appr)o(opriate)d(machine)i(instr)o(uctions)i(for)e(arithmetic)g
(operations.)39 b(In)25 b(the)h(late)e(1950s)f(and)450
3847 y(early)k(1960s)f(\(e.g.,)k(A)t F6(L)t(G)t(O)t(L)r
Gd(\),)f(the)e(classi\002cation)i(was)e(extended)g(to)h(str)o(uctur)o
(ed)f(data)g(\(ar)o(-)450 3946 y(rays)j(of)g(r)o(ecor)o(ds,)g(etc.\))53
b(and)30 b(higher)o(-or)o(der)e(functions.)55 b(Beginning)31
b(in)f(the)h(1970s,)f(these)450 4046 y(early)20 b(foundations)i(have)e
(been)g(extended)g(in)h(many)g(dir)o(ections...)575 4212
y F5(\017)41 b Ge(parametric)17 b(polymorphism)h Gd(allows)i(a)f
(single)h(term)f(to)h(be)f(used)g(with)h(many)g(dif)o(fer)o(-)658
4312 y(ent)h(types)g(\(e.g.,)f(the)h(same)g(sorting)i(r)o(outine)e
(might)h(be)f(used)f(to)i(sort)g(lists)f(of)h(natural)658
4411 y(numbers,)e(lists)i(of)f(r)o(eals,)e(lists)j(of)e(r)o(ecor)o(ds,)
f(etc.\),)h(encouraging)h(code)g(r)o(euse;)575 4577 y
F5(\017)41 b Ge(module)27 b(systems)g Gd(support)i(pr)o(ogramming)g(in)
g(the)g(lar)o(ge)e(by)i(pr)o(oviding)f(a)g(frame-)658
4677 y(work)22 b(for)f(de\002ning)i(\(and)e(automatically)g(checking\))
h(interfaces)f(between)h(the)g(parts)658 4777 y(of)e(a)h(lar)o(ge)e
(softwar)o(e)h(system;)p eop
%%Page: 20 21
20 20 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(20)575 683 y F5(\017)41 b Ge(subtyping)17 b Gd(and)h
Ge(object)g(types)g Gd(addr)o(ess)f(the)i(special)f(needs)h(of)g
(object-oriented)g(pr)o(o-)658 783 y(gramming)i(styles;)575
949 y F5(\017)41 b Gd(connections)22 b(ar)o(e)d(being)j(developed)e
(between)g(the)h(type)g(systems)h(of)f(pr)o(ogramming)658
1048 y(languages,)d(the)g Ge(speci\002cation)d(languages)h
Gd(used)i(in)g(pr)o(ogram)g(veri\002cation,)g(and)g(the)658
1148 y Ge(formal)i(logics)g Gd(used)h(in)g(theor)o(em)f(pr)o(oving.)575
1314 y(All)g(of)h(these)g(\(among)g(many)g(others\))g(ar)o(e)e(still)j
(ar)o(eas)d(of)h(active)g(r)o(esear)o(ch.)450 1600 y
Gj(1.4)119 b(Application)30 b(Areas)450 1789 y Gd(Beyond)f(their)g
(traditional)f(bene\002ts)i(of)e(r)o(obustness)i(and)e(ef)o(\002ciency)
-9 b(,)30 b(type)f(systems)g(play)450 1889 y(an)f(incr)o(easingly)h
(central)f(r)o(ole)g(in)h(computer)g(and)f(network)h(security:)41
b(static)28 b(typing)i(lies)450 1988 y(at)c(the)h(cor)o(e)f(of)h(the)g
(security)g(models)g(of)g(Java)e(and)h(JINI,)h(for)f(example,)h(and)g
(is)g(the)g(main)450 2088 y(enabling)d(technology)h(for)e(Pr)o
(oof-Carrying)g(Code.)33 b(T)-7 b(ype)22 b(systems)j(ar)o(e)d(used)h
(to)h(or)o(ganize)450 2187 y(compilers,)36 b(verify)d(pr)o(otocols,)j
(str)o(uctur)o(e)c(information)i(on)g(the)f(web,)j(and)c(even)h(model)
450 2287 y(natural)20 b(languages.)575 2387 y F7(Short)g(sketches)h(of)
f(some)h(of)g(these)f(diverse)i(applications...)575 2553
y F5(\017)41 b F7(In)20 b(pr)o(ogramming)f(in)i(the)f(lar)o(ge)g
(\(module)g(systems,)g(interface)i(de\002nition)e(languages,)g(etc.\))
575 2719 y F5(\017)41 b F7(In)19 b(compiling)g(and)g(optimization)f
(\(static)h(analyses,)h(typed)e(intermediate)i(languages,)g(typed)658
2818 y(assembly)h(languages,)f(etc.\))575 2984 y F5(\017)41
b F7(In)15 b(\223self-certi\002cation\224)g(of)g(untrusted)h(code)g
(\(so-called)e(\223pr)o(oof-carrying)g(code\224)h([NL96)n(,)h(Nec97)n
(,)658 3084 y(NL98)n(]\))575 3250 y F5(\017)41 b F7(In)20
b(security)h(\(cf.)k(W)n(alker)-6 b(,)21 b(Ler)o(oy)g(and)f(Rouaix,)g
(etc.,)g(etc\))575 3416 y F5(\017)41 b F7(In)20 b(theor)o(em)g(pr)o
(oving)575 3582 y F5(\017)41 b F7(In)20 b(databases)575
3748 y F5(\017)41 b F7(In)29 b(linguistics)h(\(categorial)e(grammar)h
([Ben95)o(,)g(vBM97)o(,)i(etc.])52 b(,)32 b(and)d(maybe)g(something)658
3848 y(seminal)21 b(by)f(Lambek\))575 4014 y F5(\017)41
b F7(In)20 b(Y2K)h(conversion)g(tools)575 4180 y F5(\017)41
b F7(DTDs)25 b(and)h(other)g(\223web)h(metadata\224)d(\(note)i(fr)o(om)
g(Henry)g(Thompson:)35 b(DTDs)26 b(wer)o(e)h(origi-)658
4280 y(nally)20 b(designed)g(for)g(SGML)h(because)h(of)e(the)g(expense)
h(of)f(cancelling)g(huge)g(typesetting)f(runs)658 4379
y(due)h(to)h(err)o(ors)g(in)g(the)f(markup!\))p eop
%%Page: 21 22
21 21 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)870 b
Gd(1)t(.)29 b(I)t F6(N)t(T)t(R)t(O)t(D)t(U)t(C)t(T)t(I)t(O)t(N)874
b Gd(21)450 686 y Gj(1.5)119 b(Related)29 b(Reading)450
875 y Gd(While)g(this)h(book)f(attempts)g(to)g(be)g(self)f(contained,)j
(it)e(is)g(far)f(fr)o(om)g(compr)o(ehensive:)42 b(the)450
975 y(ar)o(ea)22 b(is)j(too)g(lar)o(ge,)f(and)g(can)g(be)g(appr)o
(oached)f(fr)o(om)h(too)h(many)g(angles,)g(to)g(do)f(it)h(justice)g(in)
450 1074 y(one)c(book.)26 b(Her)o(e)20 b(ar)o(e)f(a)i(few)f(other)h
(good)g(entry)g(points:)575 1257 y F5(\017)41 b Gd(Handbook)19
b(articles)f(by)h(Car)o(delli)f([Car96)n(])g(and)h(Mitchell)g([Mit90)n
(])g(of)o(fer)f(quick)h(intr)o(o-)658 1357 y(ductions)j(to)g(the)f(ar)o
(ea.)26 b(Bar)o(endr)o(egt's)19 b(article)i([Bar92b)n(])g(is)h(for)f
(the)g(mor)o(e)h(mathemat-)658 1456 y(ically)e(inclined.)575
1622 y F5(\017)41 b Gd(Mitchell's)18 b(massive)h(textbook)g(on)g(pr)o
(ogramming)g(languages)f([Mit96)o(])g(covers)g(basic)658
1722 y(lambda)h(calculus,)i(a)f(range)g(of)h(type)g(systems,)g(and)f
(many)i(aspects)e(of)h(semantics.)575 1888 y F5(\017)41
b Gd(Abadi)22 b(and)h(Car)o(delli's)g F7(A)h(Theory)f(of)g(Objects)h
Gd([AC96)n(])g(develops)f(much)i(of)e(the)h(same)658
1988 y(material)i(as)h(this)h(pr)o(esent)e(book,)k(de-emphasizing)c
(implementation)j(aspects)d(and)658 2087 y(concentrating)21
b(instead)g(on)g(the)g(application)g(of)g(these)g(ideas)f(in)i(a)e
(foundation)i(tr)o(eat-)658 2187 y(ment)e(of)h(object-oriented)f(pr)o
(ogramming.)25 b(Kim)d(Br)o(uce's)e(forthcoming)h F7(Foundations)658
2286 y(of)29 b(Object-Oriented)g(Pr)o(ogramming)e(Languages)i
Gd(will)h(cover)f(similar)h(gr)o(ound.)51 b(Intr)o(o-)658
2386 y(ductory)20 b(material)f(on)i(object-oriented)f(type)g(systems)i
(can)d(also)i(be)f(found)g(in)h([PS94)n(,)658 2486 y(Cas97)n(].)575
2652 y F5(\017)41 b Gd(Reynolds)20 b([Rey98)o(])e F7(Theories)i(of)f
(Pr)o(ogramming)e(Languages)p Gd(,)i(a)f(graduate-level)f(survey)658
2751 y(of)28 b(the)g(theory)h(of)f(pr)o(ogramming)h(languages,)g
(includes)g(beautiful)e(expositions)j(of)658 2851 y(polymorphic)22
b(typing)f(and)f(intersection)i(types.)575 3017 y F5(\017)41
b Gd(Girar)o(d's)25 b F7(Pr)o(oofs)g(and)h(T)-8 b(ypes)26
b Gd([GL)-6 b(T89)n(])26 b(tr)o(eats)f(logical)i(aspects)e(of)h(type)g
(systems)h(\(the)658 3117 y(Curry-Howar)o(d)20 b(isomorphism,)j(etc.\))
28 b(thor)o(oughly)-9 b(.)29 b(It)22 b(also)g(includes)g(a)f
(description)658 3216 y(of)f(System)h(F)g(fr)o(om)f(its)i(cr)o(eator)-6
b(,)19 b(and)h(an)g(appendix)g(intr)o(oducing)i(linear)e(logic.)575
3382 y F5(\017)41 b F7(The)23 b(Structur)o(e)h(of)g(T)-8
b(yped)23 b(Pr)o(ogramming)f(Languages)p Gd(,)i(by)g(Schmidt)g([)p
Ge(?)p Gd(],)g(develops)g(cor)o(e)658 3482 y(concepts)30
b(of)g(type)g(systems)i(in)e(the)h(context)f(of)h(pr)o(ogramming)f
(language)g(design,)658 3582 y(including)35 b(several)e(chapters)g(on)i
(conventional)g(imperative)f(languages.)65 b(Simon)658
3681 y(Thompson's)21 b F7(T)-8 b(ype)20 b(Theory)f(and)g(Functional)h
(Pr)o(ogramming)e Gd([Tho91])h(focuses)h(on)h(con-)658
3781 y(nections)d(between)g(functional)g(pr)o(ogramming)g(\(in)g(the)g
(\223pur)o(e)f(functional)h(pr)o(ogram-)658 3880 y(ming\224)31
b(sense)g(of)f(Haskell)h(or)g(Miranda\))e(and)h(constr)o(uctive)i(type)
e(theory)-9 b(,)33 b(viewed)658 3980 y(fr)o(om)20 b(a)g(logical)h
(perspective.)575 4146 y F5(\017)41 b Gd(Semantic)22
b(foundations)h(for)g(both)g(untyped)g(and)f(typed)g(languages)h(ar)o
(e)e(cover)o(ed)h(in)658 4246 y(depth)e(in)h(textbooks)h(by)f(Gunter)g
([Gun92)o(])f(and)h(W)-5 b(inskel)22 b([W)-5 b(in93)o(].)575
4412 y F5(\017)41 b Gd(Hindley's)25 b(monograph)h F7(Basic)e(Simple)h
(T)-8 b(ype)24 b(Theory)g Gd([Hin97)o(])h(is)g(a)f(wonderful)h(com-)658
4511 y(pendium)g(of)h(r)o(esults)f(about)g(the)h(simply)g(typed)f
(lambda-calculus)f(and)h(closely)h(r)o(e-)658 4611 y(lated)20
b(systems.)26 b(Its)21 b(coverage)f(is)h(deep)f(rather)g(than)h(br)o
(oad.)450 4794 y(If)27 b(you)h(want)g(a)f(single)h(book)g(besides)g
(the)f(one)h(you'r)o(e)f(holding,)k(I'd)c(r)o(ecommend)g(either)450
4893 y(Mitchell)21 b(or)g(Abadi)e(and)i(Car)o(delli.)p
eop
%%Page: 22 23
22 22 bop 450 1306 a F3(Chapter)44 b(2)450 1721 y Gk(Mathematical)51
b(Preliminaries)450 2153 y Gd(Befor)o(e)17 b(getting)i(started,)e(we)i
(need)f(to)g(establish)h(some)g(common)g(notation)h(and)e(state)g(a)f
(few)450 2252 y(basic)22 b(mathematical)f(facts.)29 b(Most)23
b(r)o(eaders)d(should)j(skim)g(this)g(chapter)e(and)h(r)o(efer)e(back)i
(to)450 2352 y(it)f(as)f(necessary)-9 b(.)450 2636 y
Gj(2.1)119 b(Sets,)29 b(Relations,)h(and)g(Sequences)450
2825 y Ge(2.1.1)19 b(De\002nition:)39 b Gd(W)-8 b(e)33
b(use)h(standar)o(d)d(notation)j(for)f(sets:)51 b(curly)33
b(braces)f(for)h(listing)i(the)450 2925 y(elements)18
b(of)g(a)f(set)g(explicitly)h(\()p F0(f)p Gb(:)c(:)g(:)o
F0(g)p Gd(\))j(or)h(showing)h(how)g(to)f(constr)o(uct)g(one)g(set)g(fr)
o(om)f(another)450 3024 y(by)30 b(\223compr)o(ehension\224)f(\()p
F0(f)p Gb(x)38 b F5(2)i(S)46 b F0(j)53 b Gb(:)14 b(:)g(:)p
F0(g)29 b Gd(\),)i F5(;)e Gd(for)h(the)f(empty)h(set,)i(and)d
F5(S)i F0(n)25 b F5(T)51 b Gd(for)29 b(the)h(set)450
3124 y(dif)o(fer)o(ence)18 b(of)j F5(S)27 b Gd(and)21
b F5(T)42 b Gd(\(the)20 b(set)h(of)g(elements)g(of)f
F5(S)28 b Gd(that)20 b(ar)o(e)g(not)h(also)g(elements)g(of)g
F5(T)g Gd(\).)77 b FZ(2)450 3299 y Ge(2.1.2)19 b(De\002nition:)39
b Gd(An)21 b Gb(n)p Gd(-place)g Ge(relation)e Gd(between)j(a)f
(collection)h(of)g(sets)f F5(S)2909 3311 y F1(1)2950
3299 y Gd(,)g F5(S)3042 3311 y F1(2)3083 3299 y Gd(,)h(.)12
b(.)g(.)g(,)22 b F5(S)3318 3311 y F1(n)3391 3299 y Gd(is)450
3399 y(a)d(set)h Gb(R)j F5(\022)f(S)844 3411 y F1(1)900
3399 y F5(\002)15 b(S)1030 3411 y F1(2)1085 3399 y F5(\002)g
Gb(:)f(:)g(:)h F5(\002)f(S)1406 3411 y F1(n)1478 3399
y Gd(of)19 b(tuples)h(of)g(elements)g(fr)o(om)g F5(S)2504
3411 y F1(1)2564 3399 y Gd(thr)o(ough)h F5(S)2931 3411
y F1(n)2982 3399 y Gd(.)k(W)-8 b(e)20 b(say)g(that)450
3498 y(the)k(elements)h Gb(s)979 3510 y F1(1)1049 3498
y F5(2)30 b(S)1184 3510 y F1(1)1249 3498 y Gd(thr)o(ough)25
b Gb(s)1608 3510 y F1(n)1688 3498 y F5(2)30 b(S)1823
3510 y F1(n)1899 3498 y Gd(ar)o(e)23 b Ge(related)f(by)i
Gb(R)g Gd(if)g(the)h(tuple)f FY(\()p Gb(s)3020 3510 y
F1(1)3060 3498 y Gb(;)14 b(:)g(:)g(:)g(;)g(s)3283 3510
y F1(n)3334 3498 y FY(\))25 b Gd(is)450 3598 y(an)c(element)f(of)h
Gb(R)p Gd(.)2355 b FZ(2)450 3773 y Ge(2.1.3)19 b(De\002nition:)39
b Gd(A)20 b(one-place)f(r)o(elation)h(on)h(a)f(set)g
F5(S)27 b Gd(is)20 b(called)g(a)f Ge(predicate)f Gd(on)j
F5(S)6 b Gd(.)26 b(W)-8 b(e)20 b(say)450 3873 y(that)25
b Gb(P)h Gd(is)g(tr)o(ue)f(of)h(an)f(element)g Gb(s)32
b F5(2)g(S)g Gd(if)25 b Gb(s)32 b F5(2)g Gb(P)r Gd(.)37
b(T)-8 b(o)26 b(emphasize)f(this)h(intuition,)i(we)e(often)450
3972 y(write)h Gb(P)r FY(\()p Gb(s)p FY(\))f Gd(instead)h(of)g
Gb(s)35 b F5(2)g Gb(P)r Gd(,)27 b(r)o(egar)o(ding)f Gb(P)h
Gd(as)g(a)g(function)h(mapping)f(elements)h(of)f F5(S)34
b Gd(to)450 4072 y(tr)o(uth)21 b(values.)2480 b FZ(2)450
4247 y Ge(2.1.4)19 b(De\002nition:)39 b Gd(A)27 b(two-place)f(r)o
(elation)g Gb(R)h Gd(between)g(sets)g F5(S)33 b Gd(and)27
b F5(T)48 b Gd(is)27 b(called)f(a)h Ge(binary)450 4346
y(relation)p Gd(.)g(W)-8 b(e)22 b(often)g(write)g Gb(s)j(R)g(t)d
Gd(instead)f(of)h FY(\()p Gb(s;)14 b(t)p FY(\))25 b F5(2)h
Gb(R)p Gd(.)i(When)23 b F5(S)28 b Gd(and)22 b F5(T)43
b Gd(ar)o(e)20 b(actually)i(the)450 4446 y(same)f(set)f
F5(U)8 b Gd(,)21 b(we)g(say)f(that)h Gb(R)f Gd(is)i(a)e(binary)g(r)o
(elation)h Ge(on)f F5(U)8 b Gd(.)1097 b FZ(2)450 4621
y Ge(2.1.5)19 b(De\002nition:)39 b Gd(A)21 b(r)o(elation)g
Gb(R)f Gd(on)i(a)f(set)g F5(S)28 b Gd(is)22 b Ge(re\003exive)d
Gd(if)i Gb(R)f Gd(r)o(elates)g(every)h(element)g(of)g
F5(S)450 4721 y Gd(to)j(itself\227that)g(is,)h Gb(s)k(R)g(s)24
b Gd(\(or)g FY(\()p Gb(s;)14 b(s)p FY(\))29 b F5(2)g
Gb(R)p Gd(\))24 b(for)f(all)h Gb(s)29 b F5(2)h(S)6 b
Gd(.)36 b Gb(R)23 b Gd(is)i Ge(symmetric)d Gd(if)i Gb(s)29
b(R)g(t)23 b Gd(implies)450 4820 y Gb(t)g(R)f(s)p Gd(,)e(for)g(all)g
Gb(s)g Gd(and)g Gb(t)f Gd(in)i F5(S)6 b Gd(.)26 b Gb(R)20
b Gd(is)g Ge(transitive)e Gd(if)i Gb(s)j(R)f(t)e Gd(and)g
Gb(t)i(R)h(u)e Gd(together)f(imply)h Gb(s)i(R)f(u)p Gd(.)k
Gb(R)20 b Gd(is)450 4920 y Ge(antisymmetric)e Gd(if)i
Gb(s)j(R)g(t)d Gd(and)h Gb(t)h(R)h(s)e Gd(together)g(imply)g(that)g
Gb(s)i FY(=)f Gb(t)p Gd(.)833 b FZ(2)1908 5169 y Gd(22)p
eop
%%Page: 23 24
23 23 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)550 b
Gd(2)t(.)29 b(M)t F6(A)o(T)t(H)t(E)t(M)t(A)o(T)t(I)t(C)t(A)t(L)24
b Gd(P)t F6(R)t(E)t(L)t(I)t(M)t(I)t(N)t(A)t(R)t(I)t(E)t(S)554
b Gd(23)450 683 y Ge(2.1.6)19 b(De\002nition:)39 b Gd(A)29
b(r)o(e\003exive,)h(transitive,)g(and)f(antisymmetric)h(r)o(elation)e
Gb(R)h Gd(on)h(a)e(set)h F5(S)450 783 y Gd(is)k(called)f(a)h
Ge(partial)e(order)i Gd(on)g F5(S)6 b Gd(.)63 b(\(When)33
b(we)g(speak)f(of)h(\223a)f(partially)h(or)o(der)o(ed)d(set)j
Gb(S)p Gd(,\224)450 882 y(we)24 b(always)h(have)f(in)g(mind)h(some)g
(particular)f(partial)f(or)o(der)g Gb(R)h Gd(on)i F5(S)6
b Gd(.\))36 b(Partial)24 b(or)o(ders)f(ar)o(e)450 982
y(usually)e(written)g(using)h(symbols)g(like)f F5(\024)f
Gd(or)h F5(v)p Gd(.)575 1082 y(A)g(partial)f(or)o(der)h
F5(\024)g Gd(is)g(called)g(a)g Ge(total)f(order)i Gd(if)f(it)h(also)f
(has)h(the)f(pr)o(operty)g(that,)g(for)h(each)450 1181
y Gb(s)f Gd(and)f Gb(t)g Gd(in)i F5(S)6 b Gd(,)21 b(either)f
Gb(s)j F5(\024)g Gb(t)d Gd(or)h Gb(t)i F5(\024)f Gb(s)p
Gd(.)1738 b FZ(2)450 1364 y Ge(2.1.7)19 b(De\002nition:)39
b Gd(A)20 b Ge(strict)f(partial)g(order)h Gd(is)h(an)f(irr)o
(e\003exive,)f(antisymmetric,)i(and)f(transi-)450 1463
y(tive)26 b(r)o(elation)g(on)g(a)g(set)g F5(S)6 b Gd(.)42
b(Each)25 b(partial)g(or)o(der)g F5(\024)h Gd(gives)g(rise)g(to)g(a)g
(strict)g(partial)f(or)o(der)g Gb(<)450 1563 y Gd(de\002ned)20
b(in)i(the)e(obvious)i(way:)j Gb(s)e(<)g(t)e Gd(if)o(f)e
Gb(s)k F5(\024)g Gb(t)d Gd(and)h Gb(s)h F5(6)p FY(=)h
Gb(t)p Gd(.)1029 b FZ(2)450 1746 y Ge(2.1.8)19 b(De\002nition:)39
b Gd(A)19 b(r)o(e\003exive,)f(transitive,)h(and)f(symmetric)i(r)o
(elation)f(on)g(a)g(set)g F5(S)25 b Gd(is)20 b(called)450
1845 y(an)h Ge(equivalence)c Gd(on)k F5(S)6 b Gd(.)2165
b FZ(2)450 2028 y Ge(2.1.9)19 b(De\002nition:)39 b Gd(Suppose)26
b Gb(R)f Gd(is)i(a)f(r)o(elation)f(on)i(a)f(set)g F5(S)6
b Gd(.)42 b(The)26 b Ge(re\003exive)e(closure)h Gd(of)h
Gb(R)g Gd(is)450 2128 y(the)i(smallest)h(r)o(e\003exive)d(r)o(elation)i
Gb(R)1633 2097 y FX(0)1683 2128 y Gd(that)g(contains)h
Gb(R)p Gd(.)47 b(\(\223Smallest\224)26 b(in)j(the)f(sense)g(that)g(if)
450 2227 y Gb(R)509 2197 y FX(00)579 2227 y Gd(is)g(some)h(other)g(r)o
(e\003exive)e(r)o(elation)g(that)i(contains)g(all)f(the)g(pairs)g(in)g
Gb(R)p Gd(,)i(then)e(we)g(have)450 2327 y Gb(R)509 2297
y FX(0)566 2327 y F5(\022)34 b Gb(R)724 2297 y FX(00)766
2327 y Gd(.\))44 b(Similarly)-9 b(,)28 b(the)f Ge(transitive)e(closure)
h Gd(of)h Gb(R)f Gd(is)i(the)f(smallest)g(transitive)g(r)o(elation)450
2426 y Gb(R)509 2396 y FX(0)559 2426 y Gd(that)g(contains)h
Gb(R)p Gd(.)45 b(The)28 b(transitive)f(closur)o(e)g(of)h
Gb(R)f Gd(is)g(often)h(written)g Gb(R)2840 2396 y F2(+)2894
2426 y Gd(.)46 b(The)27 b Ge(re\003exive)450 2526 y(and)c(transitive)f
(closure)i Gd(of)g Gb(R)g Gd(is)h(the)g(smallest)f(r)o(e\003exive)g
(and)g(transitive)g(r)o(elation)g Gb(R)3259 2496 y FX(0)3306
2526 y Gd(that)450 2626 y(contains)e Gb(R)p Gd(.)j(It)20
b(is)h(often)g(written)h Gb(R)1580 2596 y FX(\003)1617
2626 y Gd(.)1756 b FZ(2)450 2808 y Ge(2.1.10)18 b(Exercise:)39
b Gd(Suppose)33 b(we)g(ar)o(e)e(given)i(a)f(partial)g(or)o(der)g
Gb(R)g Gd(on)i(a)e(set)h F5(S)6 b Gd(.)62 b(De\002ne)33
b(the)450 2908 y(r)o(elation)20 b Gb(R)811 2878 y FX(0)855
2908 y Gd(as)g(follows:)658 3074 y Gb(R)717 3040 y FX(0)762
3074 y FY(=)j Gb(R)18 b F5([)h F0(f)p FY(\()p Gb(s;)14
b(s)p FY(\))22 b F0(j)h Gb(s)g F5(2)h(S)6 b F0(g)p Gb(:)450
3240 y Gd(That)23 b(is,)g Gb(R)803 3210 y FX(0)849 3240
y Gd(contains)g(all)g(the)g(pairs)g(in)g Gb(R)g Gd(plus)g(all)g(pairs)f
(of)h(the)g(form)g FY(\()p Gb(s;)14 b(s)p FY(\))p Gd(.)32
b(Show)24 b(that)f Gb(R)3428 3210 y FX(0)450 3340 y Gd(is)e(the)g(r)o
(e\003exive)f(closur)o(e)g(of)h Gb(R)p Gd(.)1943 b FZ(2)450
3522 y Ge(2.1.1)m(1)18 b(De\002nition:)39 b Gd(Suppose)20
b Gb(R)f Gd(is)h(a)f(r)o(elation)g(on)h(a)f(set)g F5(S)6
b Gd(,)20 b(and)f(that)h Gb(P)f Gd(is)h(a)f(pr)o(edicate)f(on)i
F5(S)6 b Gd(.)450 3622 y(W)-8 b(e)20 b(say)g(that)f Gb(P)h
Gd(is)g Ge(preserved)f(by)g Gb(R)h Gd(if)f(whenever)h(we)g(have)f
Gb(s)k(R)g(s)2583 3592 y FX(0)2625 3622 y Gd(and)d Gb(P)r
FY(\()p Gb(s)p FY(\))p Gd(,)e(we)i(also)f(have)450 3722
y Gb(P)r FY(\()p Gb(s)580 3691 y FX(0)601 3722 y FY(\))p
Gd(.)2740 b FZ(2)450 3904 y Ge(2.1.12)18 b(De\002nition:)40
b Gd(An)30 b Ge(ordered)h(sequence)d Gd(is)j(written)h(by)f(listing)h
(its)f(elements,)j(sepa-)450 4004 y(rated)e(by)h(commas.)63
b(W)-8 b(e)34 b(use)f(comma)g(as)g(both)h(the)f(\223cons\224)g
(operation)h(for)e(adding)h(an)450 4104 y(element)23
b(to)g(either)g(end)g(of)g(a)f(sequence)i(and)e(as)h(the)g
(\223append\224)e(operation)i(on)h(sequences.)450 4203
y(For)c(example,)f(if)g Gb(a)g Gd(is)h(the)g(sequence)f
Gb(3;)14 b(2;)g(1)21 b Gd(and)e Gb(b)h Gd(is)g(the)f(sequence)h
Gb(5;)14 b(6)p Gd(,)20 b(then)g Gb(0;)14 b(a)20 b Gd(denotes)450
4303 y(the)k(sequence)g Gb(0;)14 b(3;)g(2;)g(1)p Gd(,)27
b(while)d Gb(a;)14 b(0)24 b Gd(denotes)g Gb(3;)14 b(2;)g(1;)g(0)26
b Gd(and)d Gb(b;)14 b(a)24 b Gd(denotes)g Gb(5;)14 b(6;)g(3;)g(2;)g(1)p
Gd(.)37 b(The)450 4402 y(sequence)21 b(of)g(numbers)g(fr)o(om)g
Gb(1)g Gd(to)g Gb(n)g Gd(is)h(abbr)o(eviated)c Gb(1::n)p
Gd(.)27 b(W)-8 b(e)21 b(write)g F0(j)p Gb(a)p F0(j)f
Gd(for)g(the)h(length)h(of)450 4502 y(the)f(sequence)g
Gb(a)p Gd(.)k(\(The)20 b(same)h(notation)h F0(j)p F5(S)6
b F0(j)20 b Gd(is)i(also)e(used)h(for)g(the)f(size)h(of)g(a)f(set)h
F5(S)6 b Gd(.\))264 b FZ(2)p eop
%%Page: 24 25
24 24 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)550 b
Gd(2)t(.)29 b(M)t F6(A)o(T)t(H)t(E)t(M)t(A)o(T)t(I)t(C)t(A)t(L)24
b Gd(P)t F6(R)t(E)t(L)t(I)t(M)t(I)t(N)t(A)t(R)t(I)t(E)t(S)554
b Gd(24)450 686 y Gj(2.2)119 b(Induction)450 875 y Ge(2.2.1)19
b(De\002nition:)39 b Gd(Suppose)24 b(we)h(have)f(a)h(partial)e(or)o
(dering)i F5(\024)f Gd(on)h(a)f(set)h F5(S)6 b Gd(.)38
b(A)24 b Ge(decreasing)450 975 y(chain)d Gd(in)i F5(\024)f
Gd(is)h(a)f(sequence)g Gb(s)1404 987 y F1(1)1445 975
y Gb(;)k(s)1532 987 y F1(2)1572 975 y Gb(;)g(s)1659 987
y F1(3)1700 975 y Gb(;)40 b(:)14 b(:)g(:)22 b Gd(of)g(elements)h(of)g
F5(S)29 b Gd(such)22 b(that)h(each)f(member)g(of)450
1074 y(the)h(sequence)f(is)h(strictly)g(less)g(than)f(its)h(pr)o
(edecessor:)28 b Gb(s)2282 1086 y F1(i)p F2(+)p F1(1)2426
1074 y Gb(<)e(s)2553 1086 y F1(i)2607 1074 y Gd(for)c(every)g
Gb(i)p Gd(.)30 b(Chains)23 b(can)450 1174 y(be)c(either)g(\002nite)h
(or)f(in\002nite,)h(but)g(we)f(ar)o(e)f(mor)o(e)h(inter)o(ested)f(in)i
(in\002nite)g(ones,)g(as)f(in)h(the)f(next)450 1274 y(de\002nition.)
2566 b FZ(2)450 1447 y Ge(2.2.2)19 b(De\002nition:)39
b Gd(Suppose)22 b(we)h(have)f(a)g(set)g F5(S)29 b Gd(with)24
b(a)e(partial)f(or)o(der)h F5(\024)p Gd(.)30 b(The)22
b(or)o(dering)g F5(\024)450 1547 y Gd(is)d(said)g(to)g(be)g
Ge(well)f(founded)g Gd(if)g(it)i(contains)f(no)h(in\002nite)g(decr)o
(easing)e(chains.)25 b(For)19 b(example,)450 1646 y(the)31
b(usual)f(or)o(dering)g(on)i(the)e(natural)g(numbers,)k(with)d
Gb(0)42 b F5(\024)f Gb(1)g F5(\024)g Gb(2)h F5(\024)f
Gb(3)g F5(\024)g Gb(:)14 b(:)g(:)31 b Gd(is)g(well)450
1746 y(founded,)24 b(but)g(the)h(same)f(or)o(dering)f(on)i(the)f
(integers,)h Gb(:)14 b(:)g(:)30 b F5(\024)e FY(-)p Gb(3)i
F5(\024)f FY(-)p Gb(2)h F5(\024)e FY(-)p Gb(1)i F5(\024)f
Gb(0)h F5(\024)f Gb(1)g F5(\024)450 1846 y Gb(2)24 b
F5(\024)e Gb(3)i F5(\024)e Gb(:)14 b(:)g(:)21 b Gd(is)g(not.)2301
b FZ(2)450 2019 y Ge(2.2.3)19 b(Axiom)g([Principle)f(of)k(well-founded)
c(induction]:)39 b Gd(Suppose)16 b(we)g(ar)o(e)f(given)i(a)f(well-)450
2119 y(founded)26 b(or)o(dering)g F5(\024)g Gd(on)h(a)f(set)g
F5(S)33 b Gd(and)26 b(a)g(pr)o(edicate)e Gb(P)i Gd(on)h
F5(S)6 b Gd(.)43 b(If)26 b(we)g(can)g(show)-8 b(,)29
b(for)e(each)450 2219 y Gb(s)e F5(2)g(S)6 b Gd(,)23 b(that)e
FY(\()p F5(8)p Gb(s)983 2189 y FX(0)1030 2219 y Gb(<)k(s:)g(P)r
FY(\()p Gb(s)1334 2189 y FX(0)1355 2219 y FY(\)\))d Gd(implies)h
Gb(P)r FY(\()p Gb(s)p FY(\))p Gd(,)d(then)i(we)g(may)g(conclude)g(that)
g Gb(P)r FY(\()p Gb(t)p FY(\))e Gd(holds)i(for)450 2318
y(every)e Gb(t)j F5(2)g(S)6 b Gd(.)26 b(Graphically:)1237
2443 y F5(8)p Gb(s:)82 b FY(\()p F5(8)p Gb(s)1552 2413
y FX(0)1597 2443 y Gb(<)23 b(s:)g(P)r FY(\()p Gb(s)1897
2413 y FX(0)1918 2443 y FY(\)\))h FW(=)-14 b FV(\))22
b Gb(P)r FY(\()p Gb(s)p FY(\))p 1237 2486 1078 4 v 1638
2566 a F5(8)p Gb(t:)g(P)r FY(\()p Gb(t)p FY(\))450 2687
y Gd(This)28 b Ge(inference)d(rule)i Gd(notation)h(will)h(be)e(used)g
(heavily)g(in)h(what)f(follows.)47 b(Informally)-9 b(,)29
b(it)450 2787 y(should)j(be)e(r)o(ead)f(\223if)h(all)h(the)g
(conditions)h(listed)f(above)g(the)g(line)g(ar)o(e)e(satis\002ed,)k(we)
e(may)450 2887 y(infer)20 b(that)h(the)g(statement)g(below)g(the)g
(line)g(also)g(holds.\224)1099 b FZ(2)450 3060 y Ge(2.2.4)19
b(Corollary)h([Principle)f(of)i(complete)d(induction)h(on)i(the)e
(natural)g(numbers]:)40 b Gd(Suppose)450 3160 y(that)23
b Gb(P)g Gd(is)g(some)g(pr)o(edicate)e(on)j(the)f(natural)f(numbers.)32
b(If)23 b(we)g(can)f(show)-8 b(,)25 b(for)e(each)f Gb(m)p
Gd(,)h(that)450 3260 y FY(\()p F5(8)p Gb(i)31 b(<)g(m:)h(P)r
FY(\()p Gb(i)p FY(\)\))24 b Gd(implies)i Gb(P)r FY(\()p
Gb(m)p FY(\))p Gd(,)f(then)h(we)g(may)f(conclude)g(that)h
Gb(P)r FY(\()p Gb(n)p FY(\))e Gd(holds)i(for)f(every)g
Gb(n)p Gd(.)450 3359 y(Graphically:)1218 3484 y F5(8)p
Gb(m:)83 b FY(\()p F5(8)p Gb(i)22 b(<)h(m:)g(P)r FY(\()p
Gb(i)p FY(\)\))f FW(=)-14 b FV(\))23 b Gb(P)r FY(\()p
Gb(m)p FY(\))p 1218 3527 1115 4 v 1617 3607 a F5(8)p
Gb(n:)g(P)r FY(\()p Gb(n)p FY(\))3394 3702 y FZ(2)450
3875 y F7(Pr)o(oof:)66 b Gd(The)21 b(usual)g(or)o(dering)f
F5(\024)g Gd(on)i(the)f(natural)f(numbers)h(is)g(well)g(founded.)397
b FZ(2)450 4049 y Ge(2.2.5)19 b(De\002nition:)39 b Gd(The)28
b Ge(lexicographic)d(ordering)j Gd(\(or)g(\223dictionary)f(or)o
(dering\224\))g(on)h(pairs)450 4149 y(of)e(natural)f(numbers)h(is)g
(de\002ned)g(as)f(follows:)37 b FY(\()p Gb(m;)14 b(n)p
FY(\))33 b F5(\024)f FY(\()p Gb(m)2490 4118 y FX(0)2513
4149 y Gb(;)14 b(n)2613 4118 y FX(0)2636 4149 y FY(\))26
b Gd(if)o(f)f(either)h Gb(m)32 b(<)g(m)3323 4118 y FX(0)3372
4149 y Gd(or)450 4248 y(else)c Gb(m)36 b FY(=)g Gb(m)912
4218 y FX(0)963 4248 y Gd(and)27 b Gb(n)37 b F5(\024)f
Gb(n)1387 4218 y FX(0)1410 4248 y Gd(.)47 b(It)27 b(is)i(easy)e(to)h
(check)g(that)g(the)g(lexicographic)g(or)o(dering)f(on)450
4348 y(pairs)g(of)h(natural)g(numbers)g(is)g(well)g(founded.)47
b(This)28 b(leads)f(to)i(another)f(cor)o(ollary)f(of)h(the)450
4447 y(principle)21 b(of)f(well-founded)h(induction.)1606
b FZ(2)450 4621 y Ge(2.2.6)19 b(Corollary)h([Principle)f(of)i
(lexicographic)d(induction]:)39 b Gd(Suppose)15 b(that)h
Gb(P)g Gd(is)g(some)g(pr)o(ed-)450 4721 y(icate)g(on)h(pairs)f(of)g
(natural)g(numbers.)24 b(If)16 b(we)g(can)g(show)-8 b(,)19
b(for)d(each)g FY(\()p Gb(m;)e(n)p FY(\))p Gd(,)j(that)f
FY(\()p F5(8)p FY(\()p Gb(m)3186 4691 y FX(0)3209 4721
y Gb(;)e(n)3309 4691 y FX(0)3332 4721 y FY(\))23 b Gb(<)450
4820 y FY(\()p Gb(m;)14 b(n)p FY(\))p Gb(:)33 b(P)r FY(\()p
Gb(m)906 4790 y FX(0)927 4820 y Gb(;)14 b(n)1027 4790
y FX(0)1050 4820 y FY(\)\))27 b Gd(implies)f Gb(P)r FY(\()p
Gb(m;)14 b(n)p FY(\))p Gd(,)26 b(then)g(we)g(may)f(conclude)h(that)g
Gb(P)r FY(\()p Gb(m;)14 b(n)p FY(\))25 b Gd(holds)h(for)450
4920 y(every)20 b(pair)g FY(\()p Gb(m;)14 b(n)p FY(\))p
Gd(.)2296 b FZ(2)p eop
%%Page: 25 26
25 25 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)550 b
Gd(2)t(.)29 b(M)t F6(A)o(T)t(H)t(E)t(M)t(A)o(T)t(I)t(C)t(A)t(L)24
b Gd(P)t F6(R)t(E)t(L)t(I)t(M)t(I)t(N)t(A)t(R)t(I)t(E)t(S)554
b Gd(25)450 683 y Ge(2.2.7)19 b(Exercise:)39 b Gd(Her)o(e)22
b(is)h(a)f(mor)o(e)h(constr)o(uctive)h(de\002nition)f(of)g(the)g
(transitive)g(closur)o(e)g(of)f(a)450 783 y(r)o(elation)e
Gb(R)p Gd(.)25 b(First,)c(we)g(de\002ne)g(the)g(following)h(sequence)f
(of)g(sets)f(of)h(pairs:)699 951 y Gb(R)750 963 y F1(0)951
951 y FY(=)83 b Gb(R)699 1050 y(R)750 1062 y F1(i)p F2(+)p
F1(1)951 1050 y FY(=)g Gb(R)1148 1062 y F1(i)1197 1050
y F5([)19 b F0(f)p FY(\()p Gb(s;)14 b(u)p FY(\))23 b
F0(j)g Gd(for)e(some)g Gb(t)p Gd(,)f FY(\()p Gb(s;)14
b(t)p FY(\))23 b F5(2)h Gb(R)2298 1062 y F1(i)2349 1050
y Gd(and)d FY(\()p Gb(t;)14 b(u)p FY(\))23 b F5(2)g Gb(R)2852
1062 y F1(i)2883 1050 y F0(g)450 1215 y Gd(That)h(is,)i(we)e(constr)o
(uct)i(each)e Gb(R)1487 1227 y F1(i)p F2(+)p F1(1)1629
1215 y Gd(by)h(adding)f(to)h Gb(R)2180 1227 y F1(i)2235
1215 y Gd(all)g(the)f(pairs)g(that)h(can)f(be)g(obtained)450
1315 y(by)19 b(\223one)g(step)f(of)h(transitivity\224)g(fr)o(om)f
(pairs)h(alr)o(eady)e(in)i Gb(R)2317 1327 y F1(i)2348
1315 y Gd(.)25 b(Finally)-9 b(,)19 b(de\002ne)g(the)g(r)o(elation)f
Gb(R)3412 1285 y FX(\003)450 1414 y Gd(as)i(the)h(union)h(of)f(all)g
(the)g Gb(R)1312 1426 y F1(i)1342 1414 y Gd(:)658 1589
y Gb(R)709 1555 y FX(\003)769 1589 y FY(=)855 1510 y
FU([)888 1689 y F1(i)961 1589 y Gb(R)1012 1601 y F1(i)450
1832 y Gd(Show)i(that)g(this)h Gb(R)1055 1802 y FX(\003)1116
1832 y Gd(is)f(r)o(eally)f(the)h(transitive)g(closur)o(e)g(of)g
Gb(R)p Gd(\227i.e.,)f(that)h(it)g(satis\002es)h(the)f(con-)450
1932 y(ditions)f(given)f(in)g(De\002nition)h(2.1.9.)1768
b FZ(2)450 2114 y Ge(2.2.8)19 b(Exercise:)39 b Gd(Suppose)18
b Gb(R)g Gd(is)g(a)g(r)o(elation)g(on)h(a)e(set)i F5(S)6
b Gd(,)19 b(and)e(that)i Gb(P)f Gd(is)g(a)g(pr)o(edicate)e(on)j
F5(S)25 b Gd(that)450 2214 y(is)c(pr)o(eserved)e(by)i
Gb(R)p Gd(.)k(Show)c(that)g Gb(P)g Gd(is)g(also)g(pr)o(eserved)e(by)h
Gb(R)2387 2184 y FX(\003)2425 2214 y Gd(.)948 b FZ(2)450
2500 y Gj(2.3)119 b(Background)30 b(Reading)450 2689
y Gd(If)19 b(the)h(material)f(in)h(this)g(chapter)f(is)h(unfamiliar)-6
b(,)19 b(you)i(may)e(want)h(to)g(start)f(with)i(some)f(back-)450
2788 y(gr)o(ound)j(r)o(eading.)31 b(Ther)o(e)22 b(ar)o(e)f(many)j(sour)
o(ces)e(for)h(this,)h(but)f(W)-5 b(inskel's)24 b(book)g([W)-5
b(in93])22 b(is)h(a)450 2888 y(particularly)j(good)h(choice)g(for)f
(intuitions)j(about)d(induction.)44 b(The)27 b(beginning)h(of)e(Davey)
450 2988 y(and)20 b(Priestley)h([)p Ge(?)p Gd(])f(has)h(an)g(excellent)
f(r)o(eview)g(of)h(or)o(der)o(ed)d(sets.)p eop
%%Page: 26 27
26 26 bop 450 1306 a F3(Chapter)44 b(3)450 1721 y Gk(Untyped)52
b(Arithmetic)450 1970 y(Expressions)450 2451 y Gj(3.1)119
b(Basics)450 2641 y Gd(W)-8 b(e)20 b(begin)f(with)h(a)f(very)g(simple)h
(language)f(for)h(calculating)f(with)h(numbers)g(and)f(booleans.)450
2740 y(This)i(language)g(pr)o(ovides)f(the)h(boolean)g(constants)g
F4(true)e Gd(and)i F4(false)n Gd(...)616 2892 y FT(true;)529
3001 y FS(I)616 3011 y FT(true)450 3185 y Gd(conditional)h(expr)o
(essions...)616 3336 y FT(if)40 b(false)g(then)g(true)g(else)h(false;)
529 3446 y FS(I)616 3456 y FT(false)450 3630 y Gd(the)21
b(numeric)g(constant)g F4(0)p Gd(...)616 3781 y FT(0;)529
3890 y FS(I)616 3900 y FT(0)450 4075 y Gd(the)g(arithmetic)g(operators)
f F4(succ)f Gd(\(successor\))i(and)f F4(pred)f Gd(\(pr)o
(edecessor\)...)616 4226 y FT(succ)40 b(\(succ)h(\(succ)f(0\)\);)529
4335 y FS(I)616 4345 y FT(3)616 4512 y(pred)g(\(succ)h(\(succ)f(0\)\);)
529 4636 y FS(I)616 4646 y FT(1)450 4820 y Gd(and)20
b(a)f(testing)i(operation)f F4(iszero)e Gd(that)i(r)o(eturns)f
F4(true)g Gd(when)h(it)h(is)f(applied)f(to)i F4(0)e Gd(and)h
F4(false)450 4920 y Gd(when)h(it)g(is)g(applied)f(to)i(some)f(other)g
(number:)1908 5169 y(26)p eop
%%Page: 27 28
27 27 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(27)616 683 y FT(iszero)41 b(\(pred)f(\(succ)g
(0\)\);)529 807 y FS(I)616 817 y FT(true)616 991 y(iszero)h(\(succ)f
(\(succ)g(0\)\);)529 1131 y FS(I)616 1141 y FT(false)450
1324 y Gd(Thr)o(oughout)17 b(the)g(book,)h(the)f(symbol)1681
1312 y FR(I)1749 1324 y Gd(will)g(be)g(used)f(to)h(display)g(the)f(r)o
(esults)h(of)f(evaluating)450 1423 y(examples.)60 b(Y)-8
b(ou)34 b(can)e(think)i(of)f(the)f(lines)i(marked)d(with)2416
1411 y FR(I)2500 1423 y Gd(as)i(the)f(r)o(esponses)h(fr)o(om)f(an)450
1523 y(interactive)20 b(interpr)o(eter)g(when)h(pr)o(esented)f(with)h
(the)g(pr)o(eceding)f(inputs.)450 1809 y Gj(3.2)119 b(Formalities)450
2014 y F8(Syntax)450 2172 y Gd(Ther)o(e)20 b(ar)o(e)f(several)h
(equivalent)h(ways)g(of)g(de\002ning)g(the)g(syntax)g(of)f(our)h
(language.)450 2355 y Ge(3.2.1)e(De\002nition)f([T)-9
b(erms,)20 b(informally]:)40 b Gd(The)33 b(syntax)h(of)f(arithmetic)h
(expr)o(essions)f(com-)450 2455 y(prises)d(several)f(kinds)h(of)g
Ge(terms)p Gd(.)52 b(The)30 b(constants)h F4(true)n Gd(,)h
F4(false)n Gd(,)g(and)e F4(0)f Gd(ar)o(e)g(terms.)53
b(If)29 b F4(t)450 2554 y Gd(is)c(a)f(term,)h(then)g(so)g(ar)o(e)e
F4(succ)42 b(t)o Gd(,)26 b F4(pred)41 b(t)p Gd(,)25 b(and)f
F4(iszero)41 b(t)p Gd(.)c(Finally)-9 b(,)25 b(if)f F4(t)2847
2566 y F1(1)2887 2554 y Gd(,)i F4(t)2977 2566 y F1(2)3018
2554 y Gd(,)f(and)f F4(t)3272 2566 y F1(3)3337 2554 y
Gd(ar)o(e)450 2654 y(terms,)d(then)g(so)g(is)g F4(if)43
b(t)1240 2666 y F1(1)1324 2654 y F4(then)f(t)1585 2666
y F1(2)1669 2654 y F4(else)g(t)1931 2666 y F1(3)1971
2654 y Gd(.)26 b(The)21 b(set)f(of)h(terms)g(is)g(written)g
F5(T)h Gd(.)314 b FZ(2)575 2837 y Gd(For)18 b(br)o(evity)-9
b(,)17 b(the)h(examples)f(use)h(standar)o(d)e(arabic)h(numerals)h(as)f
(shorthand)i(for)e(nested)450 2936 y(applications)k(of)g
F4(succ)e Gd(to)i F4(0)o Gd(.)26 b(For)21 b(example,)f
F4(succ\(succ\(succ\()o(0\)\))o(\))15 b Gd(is)21 b(written)g(as)f
F4(3)p Gd(.)450 3119 y Ge(3.2.2)f(De\002nition)f([T)-9
b(erms,)20 b(inductively]:)39 b Gd(The)26 b(set)h(of)g(terms)g(is)g
(the)g(smallest)h(set)e F5(T)49 b Gd(such)450 3219 y(that)554
3385 y(1.)41 b F0(f)p F4(true)m Gb(;)24 b F4(false)n
Gb(;)f F4(0)o F0(g)g F5(\022)f(T)g Gd(;)554 3551 y(2.)41
b(if)20 b F4(t)774 3563 y F1(1)837 3551 y F5(2)k(T)d
Gd(,)g(then)g F0(f)p F4(succ)41 b(t)1496 3563 y F1(1)1536
3551 y Gb(;)23 b F4(pred)42 b(t)1844 3563 y F1(1)1884
3551 y Gb(;)24 b F4(iszero)41 b(t)2279 3563 y F1(1)2320
3551 y F0(g)22 b F5(\022)h(T)e Gd(;)554 3717 y(3.)41
b(if)20 b F4(t)774 3729 y F1(1)837 3717 y F5(2)k(T)d
Gd(,)g F4(t)1067 3729 y F1(2)1131 3717 y F5(2)i(T)e Gd(,)g(and)f
F4(t)1522 3729 y F1(3)1585 3717 y F5(2)k(T)d Gd(,)g(then)g
F4(if)43 b(t)2130 3729 y F1(1)2214 3717 y F4(then)f(t)2476
3729 y F1(2)2560 3717 y F4(else)g(t)2821 3729 y F1(3)2885
3717 y F5(2)23 b(T)f Gd(.)343 b FZ(2)575 3899 y Gd(De\002nition)23
b(3.2.2)e(is)h(an)g(example)f(of)i(an)f Ge(inductive)d(de\002nition)p
Gd(.)28 b(Since)21 b(inductive)i(de\002-)450 3999 y(nitions)e(ar)o(e)d
(ubiquitous)j(in)e(the)h(study)f(of)h(pr)o(ogramming)f(languages,)g(it)
h(is)g(worth)g(pausing)450 4099 y(for)h(a)g(moment)h(to)g(examine)f
(this)h(one)g(in)g(detail.)27 b(Her)o(e)20 b(is)i(an)f(alternative)f
(de\002nition)j(of)e(the)450 4198 y(same)g(set,)f(in)h(a)g(mor)o(e)f
(concr)o(ete)g(style.)450 4381 y Ge(3.2.3)f(De\002nition)f([T)-9
b(erms,)20 b(concretely]:)40 b Gd(For)22 b(each)f(natural)g(number)h
Gb(i)p Gd(,)f(de\002ne)h(a)f(set)h F5(S)3320 4393 y F1(i)3373
4381 y Gd(as)450 4480 y(follows:)699 4626 y F5(S)749
4638 y F1(0)951 4626 y FY(=)83 b F5(;)699 4726 y(S)749
4738 y F1(i)p F2(+)p F1(1)951 4726 y FY(=)263 b F0(f)p
F4(true)n Gb(;)23 b F4(false)n Gb(;)g F4(0)o F0(g)1138
4826 y F5([)84 b F0(f)p F4(succ)41 b(t)1565 4838 y F1(1)1605
4826 y Gb(;)23 b F4(pred)42 b(t)1913 4838 y F1(1)1953
4826 y Gb(;)24 b F4(iszero)41 b(t)2348 4838 y F1(1)2412
4826 y F0(j)23 b F4(t)2496 4838 y F1(1)2560 4826 y F5(2)g(S)2688
4838 y F1(i)2720 4826 y F0(g)1138 4925 y F5([)84 b F0(f)p
F4(if)42 b(t)1478 4937 y F1(1)1562 4925 y F4(then)g(t)1823
4937 y F1(2)1907 4925 y F4(else)g(t)2169 4937 y F1(3)2230
4925 y F0(j)21 b F4(t)2312 4937 y F1(1)2353 4925 y Gb(;)14
b F4(t)2433 4937 y F1(2)2474 4925 y Gb(;)g F4(t)2554
4937 y F1(3)2618 4925 y F5(2)23 b(S)2746 4937 y F1(i)2778
4925 y F0(g)p Gb(:)p eop
%%Page: 28 29
28 28 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(28)450 683 y(Finally)-9 b(,)21
b(let)658 868 y F5(S)112 b FY(=)989 789 y FU([)1022 968
y F1(i)1095 868 y F5(S)1145 880 y F1(i)1177 868 y Gb(:)450
1112 y F5(S)500 1124 y F1(0)574 1112 y Gd(is)35 b(empty;)40
b F5(S)1015 1124 y F1(1)1089 1112 y Gd(contains)35 b(just)f(the)g
(constants;)41 b F5(S)2200 1124 y F1(2)2274 1112 y Gd(contains)34
b(the)g(constants)h(plus)f(the)450 1211 y(phrases)29
b(that)g(can)f(be)h(built)g(with)h(constants)g(and)e(just)i(one)f
F4(succ)o Gd(,)i F4(pred)n Gd(,)g F4(iszero)m Gd(,)g(or)e
F4(if)o Gd(;)450 1311 y F5(S)500 1323 y F1(3)566 1311
y Gd(contains)d(these)f(and)g(all)g(phrases)f(that)h(can)g(be)g(built)g
(using)h F4(succ)o Gd(,)g F4(pred)n Gd(,)g F4(iszero)n
Gd(,)f(and)450 1410 y F4(if)31 b Gd(on)h(phrases)g(in)g
F5(S)1163 1422 y F1(2)1204 1410 y Gd(;)37 b(and)31 b(so)i(on.)59
b F5(S)38 b Gd(collects)32 b(together)g(all)g(the)g(phrases)f(that)h
(can)f(be)450 1510 y(built)d(in)g(this)g(way\227i.e.,)g(all)f(phrases)g
(built)h(by)f(some)h(\002nite)g(number)g(of)f(arithmetic)g(and)450
1610 y(conditional)22 b(operators,)e(beginning)i(with)f(just)h
(constants.)1017 b FZ(2)450 1792 y Ge(3.2.4)19 b(Exercise)f([Quick)i
(check]:)40 b Gd(List)21 b(the)f(elements)i(of)e F5(S)2342
1804 y F1(3)2383 1792 y Gd(.)990 b FZ(2)450 1975 y Ge(3.2.5)19
b(Exercise)f([Quick)i(check]:)40 b Gd(Show)27 b(that)h(the)f(sets)h
F5(S)2319 1987 y F1(i)2378 1975 y Gd(ar)o(e)e Ge(cumulative)p
Gd(\227that)f(is,)k(that)450 2075 y(for)21 b(each)f Gb(i)g
Gd(we)h(have)f F5(S)1191 2087 y F1(i)1246 2075 y F5(\022)j(S)1384
2087 y F1(i)p F2(+)p F1(1)1503 2075 y Gd(.)1870 b FZ(2)575
2257 y Gd(Let)24 b(us)h(check)f(that)h(the)f(two)i(formal)e
(de\002nitions)i(of)e(terms)h(actually)f(de\002ne)g(the)h(same)450
2357 y(set.)f(W)-8 b(e'll)18 b(do)f(the)h(pr)o(oof)e(in)i(quite)g(a)f
(bit)g(of)g(detail,)g(to)h(show)g(how)g(all)f(the)h(pieces)f(\002t)g
(together)-6 b(.)450 2540 y Ge(3.2.6)19 b(Proposition:)40
b F5(T)58 b FY(=)44 b F5(S)6 b Gd(.)1965 b FZ(2)450 2722
y F7(Pr)o(oof:)66 b F5(T)40 b Gd(was)17 b(de\002ned)h(as)f(the)i
(smallest)f(set)g(satisfying)g(certain)g(conditions.)26
b(So)17 b(it)i(suf)o(\002ces)450 2822 y(to)33 b(show)g(\(a\))e(that)h
F5(S)39 b Gd(satis\002es)32 b(these)g(conditions,)37
b(and)31 b(\(b\))h(that)g(any)g(set)g(satisfying)h(the)450
2921 y(conditions)20 b(has)e F5(S)25 b Gd(as)18 b(a)f(subset)i(\(i.e.,)
e(that)i F5(S)24 b Gd(is)19 b(the)f F7(smallest)h Gd(set)f(satisfying)h
(the)f(conditions\).)575 3021 y(For)j(part)g(\(a\),)f(we)h(must)h
(check)g(that)f(each)g(of)g(the)h(thr)o(ee)e(conditions)j(in)f
(De\002nition)h(3.2.2)450 3121 y(holds)31 b(of)g F5(S)6
b Gd(.)56 b(First,)33 b(since)e F5(S)1405 3133 y F1(1)1487
3121 y FY(=)42 b F0(f)p F4(true)n Gb(;)f F4(false)n Gb(;)h
F4(0)o F0(g)p Gd(,)33 b(it)e(is)g(clear)e(that)i(the)g(constants)g(ar)o
(e)450 3220 y(in)e F5(S)6 b Gd(.)51 b(Second,)30 b(if)f
F4(t)1119 3232 y F1(1)1198 3220 y F5(2)39 b(S)6 b Gd(,)31
b(then)e(\(since)g F5(S)45 b FY(=)2029 3158 y FU(S)2098
3245 y F1(i)2143 3220 y F5(S)2193 3232 y F1(i)2225 3220
y Gd(\))28 b(ther)o(e)g(must)i(be)e(some)i Gb(i)f Gd(such)g(that)450
3320 y F4(t)494 3332 y F1(1)561 3320 y F5(2)d(S)692 3332
y F1(i)724 3320 y Gd(.)31 b(But)22 b(then,)i(by)e(the)h(de\002nition)h
(of)e F5(S)1912 3332 y F1(i)p F2(+)p F1(1)2031 3320 y
Gd(,)h(we)g(must)g(have)f F4(succ)42 b(t)2875 3332 y
F1(1)2942 3320 y F5(2)27 b(S)3074 3332 y F1(i)p F2(+)p
F1(1)3193 3320 y Gd(,)c(hence)450 3420 y F4(succ)42 b(t)712
3432 y F1(1)789 3420 y F5(2)c(S)6 b Gd(;)32 b(similarly)-9
b(,)31 b(we)d(see)g(that)g F4(pred)42 b(t)2073 3432 y
F1(1)2151 3420 y F5(2)37 b(S)e Gd(and)28 b F4(iszero)41
b(t)2846 3432 y F1(1)2923 3420 y F5(2)d(S)6 b Gd(.)49
b(Thir)o(d,)29 b(if)450 3519 y F4(t)494 3531 y F1(1)578
3519 y F5(2)44 b(S)6 b Gd(,)35 b F4(t)833 3531 y F1(2)917
3519 y F5(2)44 b(S)6 b Gd(,)36 b(and)31 b F4(t)1345 3531
y F1(3)1429 3519 y F5(2)44 b(S)6 b Gd(,)35 b(then)e F4(if)43
b(t)2010 3531 y F1(1)2094 3519 y F4(then)f(t)2356 3531
y F1(2)2440 3519 y F4(else)g(t)2701 3531 y F1(3)2786
3519 y F5(2)i(S)6 b Gd(,)35 b(by)d(a)g(similar)450 3619
y(ar)o(gument.)575 3718 y(For)26 b(part)g(\(b\),)g(suppose)h(that)f
(some)h(set)g F5(S)1967 3688 y FX(0)2016 3718 y Gd(satis\002es)g(the)f
(thr)o(ee)g(conditions)i(in)f(De\002ni-)450 3818 y(tion)i(3.2.2.)47
b(W)-8 b(e)29 b(will)g(ar)o(gue,)h(by)e(complete)h(induction)h(on)f
Gb(i)p Gd(,)h(that)f(every)e F5(S)2962 3830 y F1(i)3032
3818 y F5(\022)37 b(S)3198 3788 y FX(0)3221 3818 y Gd(,)30
b(fr)o(om)450 3918 y(which)22 b(it)f(clearly)f(follows)i(that)e
F5(S)30 b(\022)23 b(S)1724 3888 y FX(0)1747 3918 y Gd(.)575
4017 y(Suppose)30 b(that)h F5(S)1144 4029 y F1(j)1215
4017 y F5(\022)42 b(S)1386 3987 y FX(0)1440 4017 y Gd(for)31
b(all)f Gb(j)41 b(<)h(i)p Gd(;)36 b(we)30 b(must)i(show)g(that)f
F5(S)2768 4029 y F1(i)2841 4017 y F5(\022)41 b(S)3011
3987 y FX(0)3035 4017 y Gd(.)55 b(Since)31 b(the)450
4117 y(de\002nition)17 b(of)g F5(S)964 4129 y F1(i)1012
4117 y Gd(has)f(two)h(clauses)f(\(for)g Gb(i)23 b FY(=)g
Gb(0)16 b Gd(and)g Gb(i)23 b(>)g(0)p Gd(\),)17 b(ther)o(e)f(ar)o(e)f
(two)i(cases)f(to)g(consider)-6 b(.)575 4283 y F5(\017)41
b Gd(If)20 b Gb(i)j FY(=)g Gb(0)p Gd(,)e(then)g F5(S)1190
4295 y F1(i)1245 4283 y FY(=)h F5(;)p Gd(.)j(But)c F5(;)i(\022)f(S)1783
4253 y FX(0)1827 4283 y Gd(trivially)-9 b(.)575 4449
y F5(\017)41 b Gd(Otherwise,)26 b Gb(i)32 b FY(=)f Gb(j)21
b FY(+)h Gb(1)k Gd(for)f(some)h Gb(j)p Gd(.)38 b(Let)25
b F4(t)g Gd(be)g(some)h(element)f(of)h F5(S)2888 4461
y F1(j)p F2(+)p F1(1)3005 4449 y Gd(.)39 b(Since)25 b
F5(S)3333 4461 y F1(j)p F2(+)p F1(1)658 4549 y Gd(is)f(de\002ned)f(as)h
(the)g(union)h(of)f(thr)o(ee)f(smaller)h(sets,)g F4(t)g
Gd(must)g(come)g(fr)o(om)g(one)g(of)g(these)658 4648
y(sets;)c(ther)o(e)g(ar)o(e)g(thr)o(ee)g(possibilities)i(to)f
(consider:)736 4814 y(1.)41 b F4(t)21 b Gd(is)g(a)f(constant,)h(hence)g
F4(t)i F5(2)g(S)1841 4784 y FX(0)1885 4814 y Gd(by)e(condition)h
(\(1\).)p eop
%%Page: 29 30
29 29 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(29)736 683 y(2.)41 b F4(t)24
b Gd(has)h(the)g(form)f F4(succ)42 b(t)1663 695 y F1(1)1703
683 y Gd(,)26 b F4(pred)42 b(t)2011 695 y F1(1)2052 683
y Gd(,)25 b(or)g F4(iszero)41 b(t)2549 695 y F1(1)2590
683 y Gd(,)25 b(for)g(some)g F4(t)3028 695 y F1(1)3099
683 y F5(2)30 b(S)3234 695 y F1(j)3264 683 y Gd(.)37
b(But)840 783 y(then,)c(by)d(the)h(induction)g(hypothesis,)j
F4(t)2207 795 y F1(1)2288 783 y F5(2)41 b(S)2448 753
y FX(0)2471 783 y Gd(,)33 b(and)d(so,)j(by)d(condition)h(\(2\),)840
882 y F4(t)23 b F5(2)g(S)1049 852 y FX(0)1073 882 y Gd(.)736
1015 y(3.)41 b F4(t)17 b Gd(has)g(the)g(form)h F4(if)42
b(t)1546 1027 y F1(1)1630 1015 y F4(then)g(t)1892 1027
y F1(2)1976 1015 y F4(else)g(t)2237 1027 y F1(3)2278
1015 y Gd(,)17 b(for)g(some)h F4(t)2694 1027 y F1(1)2734
1015 y Gb(;)c F4(t)2815 1027 y F1(2)2855 1015 y Gb(;)g
F4(t)2936 1027 y F1(3)2999 1015 y F5(2)24 b(S)3128 1027
y F1(i)3159 1015 y Gd(.)h(Again,)840 1115 y(by)g(the)f(induction)h
(hypothesis,)h F4(t)1964 1127 y F1(1)2004 1115 y Gd(,)f
F4(t)2094 1127 y F1(2)2134 1115 y Gd(,)g(and)f F4(t)2389
1127 y F1(3)2453 1115 y Gd(ar)o(e)f(all)h(in)h F5(S)2865
1085 y FX(0)2888 1115 y Gd(,)g(and)f(hence,)h(by)840
1214 y(condition)d(\(3\),)e(so)h(is)g F4(t)p Gd(.)450
1380 y(Thus,)j(we)e(have)h(shown)h(that)f(each)f F5(S)1685
1392 y F1(i)1743 1380 y F5(\022)27 b(S)1899 1350 y FX(0)1922
1380 y Gd(.)32 b(By)22 b(the)h(de\002nition)h(of)f F5(S)29
b Gd(as)23 b(the)f(union)i(of)f(all)450 1480 y(the)e
F5(S)636 1492 y F1(i)668 1480 y Gd(,)f(this)i(gives)e
F5(S)30 b(\022)23 b(S)1309 1450 y FX(0)1332 1480 y Gd(,)e(completing)g
(the)g(ar)o(gument.)1070 b FZ(2)450 1663 y Ge(3.2.7)19
b(De\002nition)f([T)-9 b(erms,)20 b(compactly]:)40 b
Gd(The)24 b(de\002nitions)h(we)g(have)e(seen)i(so)f(far)f(have)h(all)
450 1762 y(been)18 b(rather)g(verbose.)24 b(Pr)o(ogramming)19
b(language)e(designers)i(have)f(invented)g(a)g(number)g(of)450
1862 y(mor)o(e)26 b(concise)h(and)f(r)o(eadable)f(notations,)k(mostly)e
(based)f(on)h(Backus-Naur)e(Form)j(gram-)450 1962 y(mars)21
b([)p Ge(?)o Gd(].)k(The)c(variant)f(of)h(BNF)f(used)h(in)g(the)g(r)o
(emainder)e(of)i(this)h(book)f(looks)h(like)f(this:)592
2134 y F4(t)61 b Gd(::=)1821 b F7(terms)852 2234 y F4(true)1642
b F7(constant)20 b(true)852 2333 y F4(false)1598 b F7(constant)20
b(false)852 2433 y F4(if)42 b(t)i(then)d(t)j(else)e(t)1033
b F7(conditional)852 2533 y F4(0)1774 b F7(constant)20
b(zer)o(o)852 2632 y F4(succ)42 b(t)1556 b F7(successor)852
2732 y F4(pred)42 b(t)1556 b F7(pr)o(edecessor)852 2832
y F4(iszero)41 b(t)1469 b F7(zer)o(o)21 b(test)450 3031
y Gd(The)30 b(\002rst)h(line)f(\()p F4(t)40 b FY(::=)p
Gd(\))30 b(declar)o(es)e(that)j(we)f(ar)o(e)f(de\002ning)i(the)f(set)g
(of)g(terms,)j(and)d(that)g(we)450 3131 y(ar)o(e)23 b(going)i(to)g(use)
f(the)h(letter)f F4(t)g Gd(to)h(range)e(over)i(terms.)36
b(Each)24 b(line)g(that)h(follows)g(gives)g(one)450 3230
y(alternative)i(syntactic)h(form)g(for)g(terms.)47 b(At)27
b(every)g(point)i(wher)o(e)e(a)h F4(t)f Gd(appears,)h(we)g(may)450
3330 y(substitute)21 b(any)g(term.)2211 b FZ(2)450 3573
y F8(Abstract)25 b(vs.)g(Concrete)g(Syntax)450 3731 y
Gd(The)j(pr)o(eceding)e(de\002nition)j(is)f(called)e(an)i
Ge(abstract)d(grammar)i Gd(because)g(it)h(ignor)o(es)f(issues)450
3830 y(such)g(as)e(placement)h(of)g(par)o(entheses\227the)g(fact)f
(that,)i(for)f(example,)h F4(succ)41 b(\(succ)h(0\))25
b Gd(r)o(e-)450 3930 y(quir)o(es)16 b(par)o(entheses)f(ar)o(ound)p
F4(\(succ)40 b(0\))15 b Gd(wher)o(eas)g(the)h F4(0)g
Gd(in)g F4(succ)42 b(0)15 b Gd(does)h(not)g(r)o(equir)o(e)f(par)o(en-)
450 4029 y(theses.)54 b(In)31 b(ef)o(fect,)g(the)f(de\002nition)h(is)g
(r)o(eally)e(talking)i(about)f Ge(abstract)e(syntax)h(trees)p
Gd(,)i(not)450 4129 y(about)24 b(concr)o(ete)f(strings)h(of)g(symbols)h
(or)f(characters.)33 b(W)-8 b(e)24 b(will)h(ignor)o(e)f(issues)g(of)g
(concr)o(ete)450 4229 y(syntax,)d(lexical)f(analysis,)h(parsing,)f
(etc.)g(thr)o(oughout)i(the)f(book.)p eop
%%Page: 30 31
30 30 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(30)450 683 y F8(Structural)25
b(Induction)450 841 y Gd(The)g(explicit)h(characterization)d(of)j(the)f
(set)h(of)f(terms)g F5(T)47 b Gd(in)26 b(Pr)o(oposition)g(3.2.6)e
(justi\002es)i(an)450 941 y(important)g(principle)g(for)g(r)o(easoning)
g(about)g(its)g(elements.)41 b(If)26 b F4(t)32 b F5(2)h(T)21
b Gd(,)27 b(then)g(one)f(of)g(thr)o(ee)450 1040 y(things)c(must)f(be)g
(tr)o(ue)g(about)f F4(t)p Gd(\227either)554 1206 y(1.)41
b F4(t)20 b Gd(is)h(a)f(constant,)h(or)554 1372 y(2.)41
b F4(t)20 b Gd(has)h(the)g(form)f F4(succ)42 b(t)1465
1384 y F1(1)1505 1372 y Gd(,)21 b F4(pred)42 b(t)1808
1384 y F1(1)1849 1372 y Gd(,)20 b(or)h F4(iszero)41 b(t)2338
1384 y F1(1)2399 1372 y Gd(for)21 b(some)g F7(smaller)g
Gd(term)g F4(t)3243 1384 y F1(1)3283 1372 y Gd(,)g(or)554
1538 y(3.)41 b F4(t)17 b Gd(has)h(the)g(form)g F4(if)43
b(t)1367 1550 y F1(1)1451 1538 y F4(then)f(t)1712 1550
y F1(2)1796 1538 y F4(else)g(t)2058 1550 y F1(3)2116
1538 y Gd(for)18 b(some)g F7(smaller)h Gd(terms)f F4(t)2984
1550 y F1(1)3024 1538 y Gd(,)g F4(t)3107 1550 y F1(2)3147
1538 y Gd(,)h(and)e F4(t)3389 1550 y F1(3)3429 1538 y
Gd(.)450 1704 y(W)-8 b(e)22 b(can)f(put)h(this)h(observation)f(to)g
(work)g(in)g(two)h(ways:)k(we)22 b(can)f(give)h F7(inductive)f
(de\002nitions)450 1804 y Gd(of)h(functions)h(over)f(the)g(set)g(of)f
(terms,)i(and)e(we)h(can)g(give)g F7(inductive)f(pr)o(oofs)g
Gd(of)h(pr)o(operties)f(of)450 1904 y(terms.)45 b(For)28
b(example,)g(her)o(e)e(is)i(a)e(simple)i(inductive)f(de\002nition)i(of)
e(a)g(function)h(mapping)450 2003 y(each)20 b(term)h
F4(t)f Gd(to)h(the)g(set)g(of)g(constants)g(used)g(in)g
F4(t)p Gd(.)450 2186 y Ge(3.2.8)e(De\002nition:)39 b
Gd(The)26 b(set)g(of)g(constants)h(appearing)d(in)j(a)e(term)h
F4(t)p Gd(,)h(written)f F7(Consts)q FY(\()p F4(t)o FY(\))p
Gd(,)i(is)450 2286 y(de\002ned)20 b(as)h(follows:)535
2448 y F7(Consts)q FY(\()p F4(true)o FY(\))815 b(=)82
b F0(f)p F4(true)n F0(g)535 2548 y F7(Consts)q FY(\()p
F4(false)n FY(\))772 b(=)82 b F0(f)p F4(false)n F0(g)535
2647 y F7(Consts)q FY(\()p F4(0)p FY(\))946 b(=)82 b
F0(f)p F4(0)p F0(g)535 2747 y F7(Consts)q FY(\()p F4(succ)42
b(t)1060 2759 y F1(1)1100 2747 y FY(\))688 b(=)82 b F7(Consts)q
FY(\()p F4(t)2272 2759 y F1(1)2312 2747 y FY(\))535 2847
y F7(Consts)q FY(\()p F4(pred)42 b(t)1060 2859 y F1(1)1100
2847 y FY(\))688 b(=)82 b F7(Consts)q FY(\()p F4(t)2272
2859 y F1(1)2312 2847 y FY(\))535 2946 y F7(Consts)q
FY(\()p F4(iszero)41 b(t)1147 2958 y F1(1)1187 2946 y
FY(\))601 b(=)82 b F7(Consts)q FY(\()p F4(t)2272 2958
y F1(1)2312 2946 y FY(\))535 3046 y F7(Consts)q FY(\()p
F4(if)43 b(t)973 3058 y F1(1)1057 3046 y F4(then)f(t)1318
3058 y F1(2)1402 3046 y F4(else)g(t)1664 3058 y F1(3)1704
3046 y FY(\))84 b(=)e F7(Consts)q FY(\()p F4(t)2272 3058
y F1(1)2312 3046 y FY(\))19 b F5([)g F7(Consts)q FY(\()p
F4(t)2743 3058 y F1(2)2784 3046 y FY(\))g F5([)f F7(Consts)q
FY(\()p F4(t)3215 3058 y F1(3)3255 3046 y FY(\))107 b
FZ(2)575 3228 y Gd(Another)26 b(pr)o(operty)f(of)h(terms)h(that)f(can)g
(be)f(calculated)g(by)h(an)g(inductive)h(de\002ntion)g(is)450
3328 y(their)21 b(size.)450 3511 y Ge(3.2.9)e(De\002nition:)39
b Gd(The)21 b Ge(size)e Gd(of)i(a)f(term)h F4(t)o Gd(,)g(written)g
F7(size)q FY(\()p F4(t)o FY(\))p Gd(,)g(is)g(de\002ned)g(as)f(follows:)
708 3693 y F7(size)q FY(\()p F4(true)n FY(\))815 b(=)83
b Gb(1)708 3792 y F7(size)q FY(\()p F4(false)n FY(\))771
b(=)83 b Gb(1)708 3892 y F7(size)q FY(\()p F4(0)o FY(\))946
b(=)83 b Gb(1)708 3991 y F7(size)q FY(\()p F4(succ)42
b(t)1126 4003 y F1(1)1167 3991 y FY(\))687 b(=)83 b F7(size)q
FY(\()p F4(t)2232 4003 y F1(1)2273 3991 y FY(\))19 b(+)f
Gb(1)708 4091 y F7(size)q FY(\()p F4(pred)42 b(t)1126
4103 y F1(1)1167 4091 y FY(\))687 b(=)83 b F7(size)q
FY(\()p F4(t)2232 4103 y F1(1)2273 4091 y FY(\))19 b(+)f
Gb(1)708 4191 y F7(size)q FY(\()p F4(iszero)41 b(t)1214
4203 y F1(1)1254 4191 y FY(\))600 b(=)83 b F7(size)q
FY(\()p F4(t)2232 4203 y F1(1)2273 4191 y FY(\))19 b(+)f
Gb(1)708 4290 y F7(size)q FY(\()p F4(if)43 b(t)1039 4302
y F1(1)1123 4290 y F4(then)f(t)1385 4302 y F1(2)1469
4290 y F4(else)g(t)1730 4302 y F1(3)1771 4290 y FY(\))83
b(=)g F7(size)q FY(\()p F4(t)2232 4302 y F1(1)2273 4290
y FY(\))19 b(+)f F7(size)p FY(\()p F4(t)2605 4302 y F1(2)2646
4290 y FY(\))g(+)h F7(size)p FY(\()p F4(t)2978 4302 y
F1(3)3019 4290 y FY(\))f(+)g Gb(1)450 4473 y Gd(That)26
b(is,)h(the)f(size)g(of)f F4(t)h Gd(is)g(the)g(number)g(of)g(nodes)g
(in)h(its)f(abstract)f(syntax)h(tr)o(ee.)39 b(Similarly)-9
b(,)p eop
%%Page: 31 32
31 31 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(31)450 683 y(the)21 b Ge(depth)e
Gd(of)i(a)f(term)h F4(t)o Gd(,)g(written)g F7(depth)n
FY(\()p F4(t)p FY(\))p Gd(,)g(is)g(de\002ned)f(as)h(follows:)531
857 y F7(depth)n FY(\()p F4(true)o FY(\))815 b(=)83 b
Gb(1)531 957 y F7(depth)n FY(\()p F4(false)n FY(\))772
b(=)83 b Gb(1)531 1056 y F7(depth)n FY(\()p F4(0)p FY(\))946
b(=)83 b Gb(1)531 1156 y F7(depth)n FY(\()p F4(succ)42
b(t)1009 1168 y F1(1)1049 1156 y FY(\))688 b(=)83 b F7(depth)n
FY(\()p F4(t)2175 1168 y F1(1)2215 1156 y FY(\))19 b(+)f
Gb(1)531 1256 y F7(depth)n FY(\()p F4(pred)42 b(t)1009
1268 y F1(1)1049 1256 y FY(\))688 b(=)83 b F7(depth)n
FY(\()p F4(t)2175 1268 y F1(1)2215 1256 y FY(\))19 b(+)f
Gb(1)531 1355 y F7(depth)n FY(\()p F4(iszero)41 b(t)1096
1367 y F1(1)1137 1355 y FY(\))600 b(=)83 b F7(depth)n
FY(\()p F4(t)2175 1367 y F1(1)2215 1355 y FY(\))19 b(+)f
Gb(1)531 1455 y F7(depth)n FY(\()p F4(if)43 b(t)922 1467
y F1(1)1006 1455 y F4(then)f(t)1267 1467 y F1(2)1351
1455 y F4(else)g(t)1613 1467 y F1(3)1653 1455 y FY(\))84
b(=)f Gd(max)o FY(\()p F7(depth)o FY(\()p F4(t)2365 1467
y F1(1)2405 1455 y FY(\))p Gb(;)24 b F7(depth)n FY(\()p
F4(t)2744 1467 y F1(2)2784 1455 y FY(\))p Gb(;)g F7(depth)n
FY(\()p F4(t)3123 1467 y F1(3)3164 1455 y FY(\)\))19
b(+)f Gb(1)450 1628 y Gd(Equivalently)-9 b(,)17 b F7(depth)n
FY(\()p F4(t)p FY(\))p Gd(,)g(is)f(the)g(smallest)g Gb(i)g
Gd(such)g(that)g F4(t)22 b F5(2)i(S)2387 1640 y F1(i)2434
1628 y Gd(accor)o(ding)15 b(to)h(De\002nition)i(3.2.3.)450
1727 y FZ(2)575 1900 y Gd(Her)o(e)k(is)h(an)h(inductive)f(pr)o(oof)g
(of)g(a)g(simple)h(fact)e(r)o(elating)h(the)h(number)f(of)g(constants)i
(in)450 1999 y(a)20 b(term)h(to)g(its)g(size.)450 2172
y Ge(3.2.10)d(Lemma:)40 b Gd(The)22 b(number)g(of)g(distinct)g
(constants)h(in)g(a)e(term)h F4(t)f Gd(is)i(no)f(gr)o(eater)f(than)h
(the)450 2272 y(size)e(of)h F4(t)f Gd(\()p F0(j)p F7(Consts)p
FY(\()p F4(t)p FY(\))p F0(j)j F5(\024)g F7(size)q FY(\()p
F4(t)o FY(\))p Gd(\).)1831 b FZ(2)450 2445 y F7(Pr)o(oof:)66
b Gd(The)28 b(pr)o(operty)f(in)h(itself)g(is)g(entir)o(ely)f(obvious,)k
(of)c(course.)47 b(What's)28 b(inter)o(esting)g(is)450
2544 y(the)i(form)g(of)g(the)g(inductive)g(pr)o(oof,)i(which)e(we'll)h
(see)e(r)o(epeated)f(many)i(times)h(as)f(we)g(go)450
2644 y(along.)575 2743 y(The)24 b(pr)o(oof)h(pr)o(oceeds)f(by)h
(induction)h(on)f(the)h(depth)e(of)h F4(t)p Gd(.)38 b(That)25
b(is,)h(assuming)g(the)f(de-)450 2843 y(sir)o(ed)18 b(pr)o(operty)g
(for)h(all)g(terms)g(\223shorter)g(than\224)g F4(t)o
Gd(,)g(we)h(must)f(pr)o(ove)f(it)i(for)e F4(t)h Gd(itself;)g(if)g(we)g
(can)450 2943 y(do)h(this,)h(we)g(may)f(conclude)h(that)f(the)h(pr)o
(operty)e(holds)i(for)f(all)h F4(t)o Gd(.)26 b(Ther)o(e)19
b(ar)o(e)g(thr)o(ee)h(cases)g(to)450 3042 y(consider:)450
3165 y F7(Case:)135 b F4(t)20 b Gd(is)i(a)e(constant)450
3287 y(Immediate:)25 b F0(j)p F7(Consts)p FY(\()p F4(t)p
FY(\))p F0(j)e FY(=)g F0(jf)p F4(t)o F0(gj)f FY(=)h Gb(1)h
FY(=)f F7(size)p FY(\()p F4(t)p FY(\))p Gd(.)450 3410
y F7(Case:)135 b F4(t)23 b FY(=)g F4(succ)41 b(t)1176
3422 y F1(1)1217 3410 y Gd(,)20 b F4(pred)42 b(t)1520
3422 y F1(1)1560 3410 y Gd(,)21 b(or)g F4(iszero)41 b(t)2049
3422 y F1(1)450 3532 y Gd(By)23 b(the)g(induction)h(hypothesis,)h
F0(j)p F7(Consts)p FY(\()p F4(t)1854 3544 y F1(1)1894
3532 y FY(\))p F0(j)j F5(\024)e F7(size)q FY(\()p F4(t)2264
3544 y F1(1)2304 3532 y FY(\))p Gd(.)33 b(W)-8 b(e)23
b(now)h(calculate)d(as)i(follows:)450 3632 y F0(j)p F7(Consts)p
FY(\()p F4(t)p FY(\))p F0(j)g FY(=)g F0(j)p F7(Consts)p
FY(\()p F4(t)1257 3644 y F1(1)1298 3632 y FY(\))p F0(j)g
F5(\024)f F7(size)q FY(\()p F4(t)1659 3644 y F1(1)1699
3632 y FY(\))i Gb(<)f F7(size)p FY(\()p F4(t)p FY(\))p
Gd(.)450 3755 y F7(Case:)135 b F4(t)23 b FY(=)g F4(if)42
b(t)1089 3767 y F1(1)1173 3755 y F4(then)g(t)1435 3767
y F1(2)1519 3755 y F4(else)g(t)1780 3767 y F1(3)450 3877
y Gd(By)19 b(the)g(induction)i(hypothesis,)f F0(j)p F7(Consts)q
FY(\()p F4(t)1838 3889 y F1(1)1879 3877 y FY(\))p F0(j)j
F5(\024)g F7(size)p FY(\()p F4(t)2240 3889 y F1(1)2281
3877 y FY(\))c Gd(and)g F0(j)p F7(Consts)p FY(\()p F4(t)2816
3889 y F1(2)2856 3877 y FY(\))p F0(j)k F5(\024)g F7(size)q
FY(\()p F4(t)3217 3889 y F1(2)3258 3877 y FY(\))c Gd(and)450
3977 y F0(j)p F7(Consts)p FY(\()p F4(t)774 3989 y F1(3)815
3977 y FY(\))p F0(j)36 b F5(\024)g F7(size)q FY(\()p
F4(t)1203 3989 y F1(3)1243 3977 y FY(\))p Gd(.)47 b(W)-8
b(e)29 b(now)f(calculate)f(as)h(follows:)41 b F0(j)p
F7(Consts)p FY(\()p F4(t)p FY(\))p F0(j)c FY(=)f F0(j)p
F7(Consts)p FY(\()p F4(t)3298 3989 y F1(1)3339 3977 y
FY(\))24 b F5([)450 4076 y F7(Consts)q FY(\()p F4(t)756
4088 y F1(2)797 4076 y FY(\))h F5([)h F7(Consts)p FY(\()p
F4(t)1241 4088 y F1(3)1282 4076 y FY(\))p F0(j)39 b F5(\024)g
F0(j)p F7(Consts)q FY(\()p F4(t)1800 4088 y F1(1)1840
4076 y FY(\))p F0(j)25 b FY(+)g F0(j)p F7(Consts)p FY(\()p
F4(t)2327 4088 y F1(2)2368 4076 y FY(\))p F0(j)g FY(+)g
F0(j)p F7(Consts)p FY(\()p F4(t)2855 4088 y F1(3)2895
4076 y FY(\))p F0(j)40 b F5(\024)f F7(size)q FY(\()p
F4(t)3289 4088 y F1(1)3330 4076 y FY(\))25 b(+)450 4176
y F7(size)q FY(\()p F4(t)650 4188 y F1(2)691 4176 y FY(\))19
b(+)f F7(size)p FY(\()p F4(t)1023 4188 y F1(3)1064 4176
y FY(\))23 b Gb(<)g F7(size)p FY(\()p F4(t)p FY(\))p
Gd(.)1936 b FZ(2)575 4349 y Gd(The)30 b(form)g(of)g(this)h(pr)o(oof)f
(can)g(be)g(clari\002ed)f(by)h(r)o(estating)g(it)h(as)f(a)f(general)h
(r)o(easoning)450 4448 y(principle.)24 b(Compar)o(e)15
b(this)i(principle)f(with)g(the)h(complete)f(induction)h(principle)f
(for)g(natural)450 4548 y(numbers)21 b(on)h(p.)e(24.)450
4721 y Ge(3.2.1)m(1)e(Theorem)i([Principle)f(of)i(induction)d(on)j
(terms]:)40 b Gd(Suppose)25 b(that)g Gb(P)g Gd(is)h(some)g(pr)o(edi-)
450 4820 y(cate)16 b(on)h(terms.)24 b(If)16 b(we)h(can)f(show)-8
b(,)18 b(for)f(each)f F4(s)o Gd(,)h(that)g FY(\()p F5(8)p
F4(r)o Gb(:)f F7(depth)o FY(\()p F4(r)p FY(\))23 b Gb(<)g
F7(depth)n FY(\()p F4(s)p FY(\))e Gd(implies)h Gb(P)r
FY(\()p F4(r)m FY(\)\))450 4920 y Gd(implies)f Gb(P)r
FY(\()p F4(s)n FY(\))p Gd(,)g(then)g(we)g(may)g(conclude)g(that)f
Gb(P)r FY(\()p F4(t)n FY(\))h Gd(holds)h(for)e(every)g(term)h
F4(t)p Gd(.)k(Graphically:)p eop
%%Page: 32 33
32 32 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(32)880 670 y F5(8)p Gb(s:)82
b FY(\()p F5(8)p F4(r)20 b Gd(with)i F7(depth)n FY(\()p
F4(r)p FY(\))h Gb(<)g F7(depth)o FY(\()p F4(s)p FY(\))p
Gb(:)g(P)r FY(\()p F4(r)n FY(\)\))g FW(=)-14 b FV(\))23
b Gb(P)r FY(\()p F4(s)n FY(\))p 880 713 1792 4 v 1635
792 a F5(8)p Gb(s:)f(P)r FY(\()p Gb(s)p FY(\))3394 889
y FZ(2)450 1072 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355
b FZ(2)450 1255 y Gd(Note)25 b(that)g(almost)g(nothing)i(changes)e(if)f
(we)h(r)o(eplace)e F7(depth)g Gd(with)j F7(size)f Gd(in)h(the)f(above)f
(theo-)450 1354 y(r)o(em.)575 1454 y(Another)18 b(common)i(induction)f
(principle)f(on)h(terms)g(is)f(closely)h(analogous)g(to)g(the)f(prin-)
450 1553 y(ciple)j(of)f(or)o(dinary)g(mathematical)h(induction)g(on)h
(the)f(natural)f(numbers:)856 1680 y F5(8)p Gb(s:)82
b FY(\()p F5(8)20 b Gd(immediate)h(subterms)g F4(r)f
Gd(of)h F4(s)o Gb(:)i(P)r FY(\()p F4(r)n FY(\)\))h FW(=)-14
b FV(\))23 b Gb(P)r FY(\()p F4(s)n FY(\))p 856 1723 1841
4 v 1635 1803 a F5(8)p Gb(s:)f(P)r FY(\()p Gb(s)p FY(\))575
1926 y Gd(For)i(simple)h(pr)o(oofs,)f(it)g(often)h(makes)f(little)g
(dif)o(fer)o(ence)e(whether)i(we)g(ar)o(gue)f(by)h(induc-)450
2026 y(tion)e(on)f(the)g(size,)f(depth,)g(or)h(str)o(uctur)o(e)g(of)f
(terms.)450 2269 y F8(Evaluation)450 2427 y F7(Explain:)575
2593 y F5(\017)41 b F7(Some)19 b(decisions)g(to)g(be)h(made)f(about)g
(details:)24 b(e.g.)h(pr)o(edecessor)20 b(of)f FQ(0)g
F7(\(we'll)g(choose)g(it)g(to)g(be)h FQ(0)o F7(\))658
2692 y(and)g FQ(succ)42 b(false)18 b F7(\(we'll)j(consider)g(it)g(an)g
(err)o(or\))575 2858 y F5(\017)41 b F7(Operational)20
b(vs.)25 b(denotational)20 b(semantics)575 3024 y F5(\017)41
b F7(Plotkin')-5 b(s)21 b(SOS)575 3191 y F5(\017)41 b
F7(Evaluation)19 b(contexts)h(vs.)26 b(congruence)21
b(rules)575 3357 y F5(\017)41 b F7(How)19 b(evaluation)g(order)h(is)g
(speci\002ed)f(by)g(the)h(use)g(of)f(r)o(estricted)h(metavariables)f
(like)h FQ(v)g F7(and)f FQ(nv)575 3523 y F5(\017)41 b
F7(might)17 b(want)i(to)f(point)h(out)g(ther)o(e)f(that)g(just)i
(because)g FQ(t)43 b FV(!)h FQ(t)2494 3492 y FX(0)2536
3523 y F7(it)19 b(doesn')m(t)g(necessarily)h(follow)658
3622 y(that)f FQ(T[t])42 b FV(!)i FQ(T[t)1295 3592 y
FX(0)1318 3622 y FQ(])20 b F7(wher)o(e)h FQ(T[.])e F7(is)i(a)g(term)f
(with)g(a)h(hole)g(in)g(it)450 3805 y Ge(3.2.12)d(De\002nition:)40
b Gd(The)19 b(set)g(of)g Ge(values)e Gd(is)j(the)f(subset)g(of)g(terms)
g(de\002ned)g(by)g(the)h(following)450 3905 y(abstract)g(grammar:)592
4036 y F4(v)61 b Gd(::=)1821 b F7(values)852 4135 y F4(true)1642
b F7(value)21 b(true)852 4235 y F4(false)1598 b F7(value)21
b(false)852 4335 y F4(nv)1730 b F7(numeric)21 b(value)548
4534 y F4(nv)61 b Gd(::=)1821 b F7(numeric)21 b(values)852
4634 y F4(0)1774 b F7(zer)o(o)21 b(value)852 4733 y F4(succ)42
b(nv)1512 b F7(successor)22 b(value)p eop
%%Page: 33 34
33 33 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(33)450 683 y Ge(3.2.13)18 b(De\002nition:)40
b Gd(The)25 b Ge(one-step)e(evaluation)f Gd(r)o(elation)j
F5(\000)-14 b FV(!)25 b Gd(is)g(the)h(smallest)f(binary)g(r)o(e-)450
783 y(lation)c(on)h(terms)f(containing)h(all)e(instances)h(of)g(the)g
(following)h(r)o(ules:)1146 906 y F4(if)43 b(true)e(then)h(t)1756
918 y F1(2)1840 906 y F4(else)g(t)2102 918 y F1(3)2165
906 y F5(\000)-14 b FV(!)23 b F4(t)2366 918 y F1(2)2851
907 y Gd(\()r(E)t(-)t(B)t F6(O)t(O)t(L)t Gd(B)t F6(E)t(T)o(A)o
Gd(T\))1124 1056 y F4(if)43 b(false)e(then)h(t)1778 1068
y F1(2)1862 1056 y F4(else)g(t)2123 1068 y F1(3)2187
1056 y F5(\000)-14 b FV(!)23 b F4(t)2387 1068 y F1(3)2850
1057 y Gd(\()r(E)t(-)t(B)t F6(O)t(O)t(L)t Gd(B)t F6(E)t(T)o(A)t
Gd(F)q(\))1602 1213 y F4(t)1645 1225 y F1(1)1709 1213
y F5(\000)-14 b FV(!)23 b F4(t)1917 1183 y FX(0)1909
1237 y F1(1)p 780 1257 1993 4 v 780 1336 a F4(if)43 b(t)954
1348 y F1(1)1038 1336 y F4(then)f(t)1300 1348 y F1(2)1384
1336 y F4(else)g(t)1645 1348 y F1(3)1709 1336 y F5(\000)-14
b FV(!)23 b F4(if)43 b(t)2048 1306 y FX(0)2040 1360 y
F1(1)2124 1336 y F4(then)f(t)2386 1348 y F1(2)2470 1336
y F4(else)g(t)2731 1348 y F1(3)3235 1276 y Gd(\()r(E)t(-)t(I)t
F6(F)q Gd(\))1602 1494 y F4(t)1645 1506 y F1(1)1709 1494
y F5(\000)-14 b FV(!)23 b F4(t)1917 1464 y FX(0)1909
1518 y F1(1)p 1384 1537 784 4 v 1384 1617 a F4(succ)42
b(t)1645 1629 y F1(1)1709 1617 y F5(\000)-14 b FV(!)23
b F4(succ)42 b(t)2135 1587 y FX(0)2127 1640 y F1(1)3102
1556 y Gd(\()r(E)t(-)t(S)t F6(U)t(C)t(C)q Gd(\))1533
1775 y F4(pred)g(0)23 b F5(\000)-14 b FV(!)23 b F4(0)2830
1776 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t
Gd(P)t(Z)q(\))1337 1924 y F4(pred)42 b(\(succ)g(nv\))22
b F5(\000)-15 b FV(!)23 b F4(nv)2842 1925 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t Gd(P)t(S\))1602 2082
y F4(t)1645 2094 y F1(1)1709 2082 y F5(\000)-14 b FV(!)23
b F4(t)1917 2052 y FX(0)1909 2105 y F1(1)p 1384 2125
V 1384 2205 a F4(pred)42 b(t)1645 2217 y F1(1)1709 2205
y F5(\000)-14 b FV(!)23 b F4(pred)42 b(t)2135 2175 y
FX(0)2127 2228 y F1(1)3105 2144 y Gd(\()r(E)t(-)t(P)t
F6(R)t(E)t(D)r Gd(\))1424 2362 y F4(iszero)g(0)22 b F5(\000)-14
b FV(!)23 b F4(true)2852 2363 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t
Gd(N)t F6(A)o(T)t Gd(I)t(Z)q(\))1228 2512 y F4(iszero)41
b(\(succ)h(nv\))22 b F5(\000)-15 b FV(!)24 b F4(false)2864
2513 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t
Gd(I)t(S\))1602 2670 y F4(t)1645 2682 y F1(1)1709 2670
y F5(\000)-14 b FV(!)23 b F4(t)1917 2640 y FX(0)1909
2693 y F1(1)p 1297 2713 959 4 v 1297 2792 a F4(iszero)41
b(t)1645 2804 y F1(1)1709 2792 y F5(\000)-14 b FV(!)23
b F4(iszero)41 b(t)2222 2762 y FX(0)2215 2816 y F1(1)3028
2732 y Gd(\()r(E)t(-)t(I)t F6(S)t Gd(Z)t F6(E)t(R)t(O)r
Gd(\))3394 2889 y FZ(2)450 3072 y F7(Explain:)575 3238
y F5(\017)g F7(infer)o(ence)21 b(rules)h(\(pr)o(emises)f(and)f
(conclusion,)h(etc.\))575 3404 y F5(\017)41 b F7(r)o(ole)20
b(of)h(metavariables)g(\(rules)g(vs.)26 b(rule)21 b(schemes\))575
3570 y F5(\017)41 b F7(derivation)19 b(tr)o(ees)i(\(show)e(derivation)h
(tr)o(ees)h(for)f(a)g(couple)g(of)g(evaluation)g(derivations)g(and)g
(ask)658 3670 y(them)f(to)i(draw)f(one)h(or)g(two)f(mor)o(e\))575
3836 y F5(\017)41 b F7(inductive)20 b(pr)o(oofs)g(over)g(derivation)g
(tr)o(ees)575 4002 y F5(\017)41 b F7(computation)18 b(rules)k(vs.)k
(congruence)21 b(rules)450 4184 y Ge(3.2.14)d(De\002nition:)40
b Gd(The)23 b Ge(multi-step)c(evaluation)i Gd(r)o(elation)h
F5(\000)-14 b FV(!)2572 4154 y FX(\003)2633 4184 y Gd(is)24
b(the)f(r)o(e\003exive,)f(transi-)450 4284 y(tive)f(closur)o(e)f(of)h
(one-step)g(evaluation.)k(That)20 b(is,)h(it)g(is)g(the)g(smallest)g(r)
o(elation)g(such)g(that)575 4450 y F5(\017)41 b Gd(if)20
b F4(t)j F5(\000)-15 b FV(!)24 b F4(t)1005 4420 y FX(0)1049
4450 y Gd(then)d F4(t)i F5(\000)-15 b FV(!)1433 4420
y FX(\003)1495 4450 y F4(t)1546 4420 y FX(0)1569 4450
y Gd(,)575 4616 y F5(\017)41 b F4(t)22 b F5(\000)-14
b FV(!)858 4586 y FX(\003)919 4616 y F4(t)21 b Gd(for)f(all)h
F4(t)o Gd(,)g(and)575 4782 y F5(\017)41 b Gd(if)20 b
F4(t)j F5(\000)-15 b FV(!)931 4752 y FX(\003)992 4782
y F4(t)1043 4752 y FX(0)1087 4782 y Gd(and)20 b F4(t)1299
4752 y FX(0)1346 4782 y F5(\000)-15 b FV(!)1480 4752
y FX(\003)1541 4782 y F4(t)1592 4752 y FX(00)1634 4782
y Gd(,)21 b(then)g F4(t)i F5(\000)-15 b FV(!)2060 4752
y FX(\003)2122 4782 y F4(t)2173 4752 y FX(00)2215 4782
y Gd(.)1158 b FZ(2)p eop
%%Page: 34 35
34 34 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(34)450 683 y Ge(3.2.15)18 b(Exercise)h([Quick)
h(check]:)39 b Gd(Rewrite)19 b(the)g(pr)o(evious)f(de\002nition)h
(using)h(a)e(set)h(of)f(infer)o(-)450 783 y(ence)i(r)o(ules)i(to)f
(de\002ne)f(the)h(r)o(elation)g F4(t)h F5(\000)-14 b
FV(!)1819 753 y FX(\003)1880 783 y F4(t)1931 753 y FX(0)1955
783 y Gd(.)25 b(Solution)d(on)f(page)f(284.)605 b FZ(2)450
954 y Ge(3.2.16)18 b(De\002nition:)40 b Gd(A)22 b(term)h
F4(t)f Gd(is)h(in)g Ge(normal)f(form)i Gd(if)e(no)i(evaluation)e(r)o
(ule)h(applies)g(to)g(it\227)450 1053 y(i.e.,)d(if)h(ther)o(e)e(is)j
(no)f F4(t)1122 1023 y FX(0)1166 1053 y Gd(such)g(that)g
F4(t)i F5(\000)-15 b FV(!)24 b F4(t)1797 1023 y FX(0)1820
1053 y Gd(.)1553 b FZ(2)450 1224 y Ge(3.2.17)18 b(De\002nition:)40
b Gd(An)30 b Ge(evaluation)e(sequence)h Gd(starting)i(fr)o(om)f(a)g
(term)h F4(t)f Gd(is)i(a)e(\(\002nite)h(or)450 1324 y(in\002nite\))21
b(sequence)g(of)g(terms)g F4(t)1484 1336 y F1(1)1524
1324 y Gd(,)g F4(t)1609 1336 y F1(2)1650 1324 y Gd(,)f(.)12
b(.)g(.)g(,)21 b(such)h(that)699 1482 y F4(t)h F5(\000)-15
b FV(!)24 b F4(t)966 1494 y F1(1)699 1582 y F4(t)743
1594 y F1(1)806 1582 y F5(\000)-14 b FV(!)23 b F4(t)1007
1594 y F1(2)699 1682 y Gd(etc.)2570 b FZ(2)450 1922 y
F8(Properties)25 b(of)g(Evaluation)450 2080 y Ge(3.2.18)18
b(Proposition:)40 b Gd(Every)20 b(value)h(is)g(in)g(normal)g(form.)1091
b FZ(2)450 2251 y F7(Pr)o(oof:)66 b Gd(By)21 b(inspection)h(of)f(the)f
(de\002nitions)i(of)f(values)g(and)f(one-step)h(evaluation.)259
b FZ(2)450 2422 y Ge(3.2.19)18 b(Proposition)i([Determinacy)e(of)j
(evaluation]:)38 b Gd(If)30 b F4(t)38 b F5(\000)-14 b
FV(!)40 b F4(t)2662 2392 y FX(0)2714 2422 y Gd(and)30
b F4(t)38 b F5(\000)-14 b FV(!)39 b F4(t)3192 2392 y
FX(00)3234 2422 y Gd(,)32 b(then)450 2522 y F4(t)501
2492 y FX(0)547 2522 y FY(=)23 b F4(t)684 2492 y FX(00)727
2522 y Gd(.)2646 b FZ(2)450 2693 y F7(Pr)o(oof:)66 b
Gd(Exer)o(cise.)24 b(Solution)e(on)g(page)e(284.)1542
b FZ(2)450 2864 y Ge(3.2.20)18 b(De\002nition:)40 b Gd(A)20
b(value)g F4(v)g Gd(is)h(the)g Ge(result)f Gd(of)h(a)f(term)h
F4(t)f Gd(if)g F4(t)j F5(\000)-14 b FV(!)2646 2834 y
FX(\003)2707 2864 y F4(v)p Gd(.)622 b FZ(2)450 3035 y
Ge(3.2.21)18 b(Proposition)i([Uniqueness)d(of)k(results]:)40
b Gd(If)28 b F4(v)g Gd(and)g F4(w)g Gd(ar)o(e)g(both)h(r)o(esults)f(of)
h F4(t)o Gd(,)i(then)450 3135 y F4(v)23 b FY(=)f F4(w)p
Gd(.)2727 b FZ(2)450 3306 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355
b FZ(2)450 3546 y F8(Run-T)-5 b(ime)24 b(Errors)450 3704
y Ge(3.2.22)18 b(De\002nition:)40 b Gd(A)16 b(term)i(is)f(said)g(to)h
(be)f Ge(stuck)f Gd(if)i(it)f(is)h(a)f(normal)g(form)h(but)f(not)h(a)f
(value.)g FZ(2)575 3875 y Gd(\223Stuckness\224)f(gives)i(us)f(a)g
(simple)h(notion)h(of)f(\223r)o(un-time)f(err)o(or)6
b(\224)16 b(for)h(this)h(rather)f(abstract)450 3975 y(abstract)22
b(machine.)32 b(Intuitively)-9 b(,)24 b(it)f(characterizes)e(the)i
(situations)h(wher)o(e)e(the)h(operational)450 4074 y(semantics)17
b(does)f(not)h(know)h(what)e(to)h(do)g(because)e(the)i(pr)o(ogram)e
(has)i(r)o(eached)d(a)i(\223meaning-)450 4174 y(less)21
b(state.\224)26 b(A)20 b(dif)o(fer)o(ent)f(way)i(of)g(formalizing)g
(these)g(meaningless)h(states)f(is)g(to)g(intr)o(oduce)450
4274 y(a)28 b(new)g(term)g(called)f F4(wrong)f Gd(and)h(augment)i(the)f
(operational)g(semantics)g(with)h(r)o(ules)f(that)450
4373 y(generate)20 b F4(wrong)f Gd(in)i(all)f(the)h(situations)h(wher)o
(e)e(the)h(old)g(semantics)g(would)h(get)e(stuck.)450
4544 y Ge(3.2.23)e(De\002nition:)40 b Gd(First,)19 b(we)g(add)f(a)g
(new)h(constant)h F4(wrong)d Gd(to)i(the)g(set)g(of)g(terms.)25
b(Next,)19 b(we)450 4644 y(intr)o(oduce)h(the)h(following)i(new)e
(syntactic)g(categories:)450 4820 y F4(badnat)45 b Gd(::=)1759
b F7(normal)16 b(forms)g(that)e(ar)o(e)i(not)f(numbers)852
4920 y F4(wrong)1598 b F7(runtime)21 b(err)o(or)p eop
%%Page: 35 36
35 35 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(35)852 683 y F4(true)1642 b
F7(constant)20 b(true)852 783 y F4(false)1598 b F7(constant)20
b(false)450 913 y F4(badbool)44 b Gd(::=)1716 b F7(normal)16
b(forms)g(that)e(ar)o(e)i(not)f(booleans)852 1013 y F4(wrong)1598
b F7(runtime)21 b(err)o(or)852 1113 y F4(nv)1730 b F7(numeric)21
b(value)450 1212 y Gd(Finally)-9 b(,)21 b(we)g(add)e(the)i(following)i
(r)o(ules)e(to)g(the)g(evaluation)f(r)o(elation:)1013
1336 y F4(if)43 b(badbool)e(then)h(t)1754 1348 y F1(1)1839
1336 y F4(else)f(t)2100 1348 y F1(2)2164 1336 y F5(\000)-15
b FV(!)23 b F4(wrong)2897 1337 y Gd(\()r(E)t(-)t(I)t
F6(F)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)r Gd(\))1337 1485
y F4(succ)42 b(badnat)21 b F5(\000)-14 b FV(!)23 b F4(wrong)2764
1486 y Gd(\()r(E)t(-)t(S)t F6(U)t(C)t(C)t Gd(-)t(W)t
F6(R)t(O)t(N)t(G)r Gd(\))1337 1635 y F4(pred)42 b(badnat)21
b F5(\000)-14 b FV(!)23 b F4(wrong)2767 1636 y Gd(\()r(E)t(-)t(P)t
F6(R)t(E)t(D)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)s Gd(\))1294
1784 y F4(iszero)41 b(badnat)20 b F5(\000)-14 b FV(!)23
b F4(wrong)2690 1785 y Gd(\()r(E)t(-)t(I)t F6(S)t Gd(Z)t
F6(E)t(R)t(O)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)s Gd(\))3394
1910 y FZ(2)450 2092 y Ge(3.2.24)18 b(Exercise)h([Homework]:)41
b F7(\(Due)25 b(on)h(Feb.)41 b(3.\))f Gd(Pr)o(ove)25
b(that)h(these)g(two)g(tr)o(eatments)f(of)423 b FP(\()450
2192 y Gd(r)o(un-time)22 b(err)o(ors)e(agr)o(ee)g(in)i(a)f(suitable)g
(sense.)28 b(\(Hint:)e(As)c(is)f(often)h(the)f(case)g(when)h(pr)o
(oving)450 2292 y(things)32 b(about)e(pr)o(ogramming)h(languages,)h
(the)f(only)g(tricky)g(part)f(about)g(the)h(exer)o(cise)e(is)450
2391 y(\002nding)c(the)g(right)f(way)g(of)h(formulating)f(a)g(pr)o
(ecise)f(statement)i(to)f(be)g(pr)o(oved\227the)g(pr)o(oof)450
2491 y(itself)d(is)g(fairly)f(straightforwar)o(d.\))k(Solution)e(on)f
(page)f(285.)1005 b FZ(2)450 2777 y Gj(3.3)119 b(A)30
b(Concrete)g(Implementation)450 2966 y Gd(W)-8 b(orking)22
b(with)g(formal)f(de\002nitions)h(such)g(as)e(those)i(in)g(the)f(pr)o
(evious)g(section)g(is)h(often)f(eas-)450 3065 y(ier)f(when)g(the)g
(intuitions)h(behind)f(the)g(de\002nitions)h(ar)o(e)e(\223gr)o
(ounded\224)f(by)i(a)f(connection)i(to)f(a)450 3165 y(concr)o(ete)j
(implementation.)37 b(W)-8 b(e)24 b(sketch)g(her)o(e)g(the)g(key)g
(components)h(of)f(an)g(implementa-)450 3265 y(tion)e(of)e(our)h
(language)g(of)f(booleans)i(and)e(arithmetic)h(expr)o(essions.)575
3364 y(The)27 b(code)g(pr)o(esented)f(her)o(e)h(\(and)g(in)h(the)f
(implementation)i(sections)f(thr)o(oughout)h(the)450
3464 y(book\))e(is)g(written)g(in)g(Objective)f(Caml)h([)p
Ge(?)o Gd(],)g(a)f(popular)g(dialect)g(of)h(ML)e([)p
Ge(?)p Gd(].)42 b(Only)28 b(a)e(small)450 3564 y(subset)i(of)h(the)f
(full)g(OCaml)h(language)f(is)g(used;)k(it)c(should)h(be)f(easy)g(to)h
(translate)e(the)i(ex-)450 3663 y(amples)23 b(her)o(e)f(into)i(other)f
(languages)g(that)g(the)g(r)o(eader)e(may)i(pr)o(efer)-6
b(.)30 b(The)23 b(most)h(important)450 3763 y(r)o(equir)o(ements)29
b(ar)o(e)f(automatic)i(storage)f(management)h(and)f(easy)g(facilities)g
(for)g(de\002ning)450 3862 y(r)o(ecursive)d(functions)i(by)f(pattern)f
(matching)i(over)f(str)o(uctur)o(ed)f(data)g(types.)44
b(Other)27 b(func-)450 3962 y(tional)33 b(languages)g(such)h(as)e
(Standar)o(d)f(ML)h([)p Ge(?)p Gd(],)j(Haskell)e([)p
Ge(?)p Gd(],)i(and)e(Scheme)f([)p Ge(?)p Gd(])g(ar)o(e)g(\002ne)450
4062 y(choices.)50 b(Languages)28 b(with)h(garbage)f(collection)i(but)e
(without)i(pattern)e(matching,)k(such)450 4161 y(as)22
b(Java,)g(ar)o(e)f(rather)h(heavy)h(for)f(the)h(sorts)g(of)g(pr)o
(ogramming)g(we'll)g(be)f(doing.)33 b(Languages)450 4261
y(with)22 b(neither)-6 b(,)20 b(such)h(as)g(C,)f(ar)o(e)f(even)i(less)g
(suitable.)p eop
%%Page: 36 37
36 36 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(36)450 683 y F8(Syntax)450 841
y Gd(Our)32 b(\002rst)h(job)g(is)f(to)h(de\002ne)f(a)f(type)h(of)h
(OCaml)f(values)g(r)o(epr)o(esenting)f(terms.)60 b(OCaml's)450
941 y(datatype)33 b(de\002nition)i(mechanism)g(makes)f(this)h(easy:)52
b(the)35 b(following)g(declaration)f(is)g(a)450 1040
y(straightforwar)o(d)20 b(transliteration)h(of)f(De\002nition)j(3.2.7.)
616 1187 y FT(type)40 b(term)g(=)773 1279 y(TmTrue)h(of)e(info)694
1370 y(|)h(TmFalse)h(of)e(info)694 1461 y(|)h(TmIf)g(of)g(info)g(*)f
(term)i(*)e(term)h(*)g(term)694 1553 y(|)g(TmZero)h(of)e(info)694
1644 y(|)h(TmSucc)h(of)e(info)h(*)g(term)694 1735 y(|)g(TmPred)h(of)e
(info)h(*)g(term)694 1827 y(|)g(TmIsZero)h(of)f(info)g(*)f(term)450
1982 y Gd(The)25 b(constr)o(uctors)h F4(TmTrue)c Gd(to)j
F4(TmIsZero)d Gd(name)j(the)g(dif)o(fer)o(ent)d(sorts)k(of)f(nodes)g
(in)g(the)g(ab-)450 2082 y(stract)k(syntax)g(tr)o(ees)g(of)g(type)h
F4(term)n Gd(;)j(the)d(type)f(following)i F4(of)e Gd(in)h(each)f(case)f
(speci\002es)i(the)450 2181 y(number)21 b(of)g(subtr)o(ees)f(that)g
(will)i(be)e(attached)g(to)h(that)g(type)f(of)h(node.)575
2281 y(Each)26 b(abstract)f(syntax)i(tr)o(ee)e(node)i(is)g(annotated)f
(with)i(a)e(value)g(of)g(type)h F4(info)n Gd(,)h(which)450
2381 y(describes)16 b(what)h(character)e(position)k(in)e(the)g(sour)o
(ce)f(\002le)h(wher)o(e)f(the)h(node)g(originated.)24
b(This)450 2480 y(information)g(is)g(cr)o(eated)d(by)j(the)f(parser)f
(when)i(it)g(scans)f(the)h(input)g(\002le,)g(and)f(it)g(is)h(used)f(by)
450 2580 y(printing)e(functions)g(to)f(indicate)g(to)g(the)g(user)g
(wher)o(e)g(an)g(err)o(or)f(occurr)o(ed.)24 b(For)c(purposes)g(of)450
2679 y(understanding)e(the)h(basic)f(algorithms)h(of)g(evaluation,)f
(typechecking,)h(etc.,)f(this)h(informa-)450 2779 y(tion)g(could)g
(just)g(as)f(well)h(be)f(omitted;)h(it)g(is)f(included)g(her)o(e)g
(only)h(so)g(that)f(r)o(eaders)f(who)i(wish)450 2879
y(to)29 b(experiment)g(with)h(the)f(implementations)i(themselves)e
(will)h(see)f(the)g(code)g(in)h(exactly)450 2978 y(the)21
b(same)f(form)h(as)g(discussed)f(in)i(the)f(book.)575
3078 y(In)h(the)g(de\002nition)h(of)f(the)h(evaluation)f(r)o(elation,)f
(we'll)i(need)f(to)g(check)g(whether)g(a)g(term)450 3178
y(is)f(a)f(numeric)h(value:)616 3325 y FT(let)40 b(rec)g(isnumericval)i
(=)d(function)773 3416 y(TmZero\(_\))i FO(!)e FT(true)694
3507 y(|)h(TmSucc\(_,t0\))i FO(!)d FT(isnumericval)j(t0)694
3599 y(|)e(_)f FO(!)g FT(false)450 3754 y Gd(This)30
b(is)f(a)g(typical)g(example)g(of)g(r)o(ecursive)f(de\002nition)i(by)g
(pattern)e(matching)i(in)g(OCaml:)450 3854 y F4(isnumericval)11
b Gd(is)17 b(de\002ned)f(as)g(the)h(function)g(that,)g(when)g(applied)f
(to)h F4(TmZero)m Gd(,)g(r)o(eturns)f(tr)o(ue;)450 3953
y(when)26 b(applied)e(to)i F4(TmSucc)d Gd(with)j(subtr)o(ee)e
F4(t0)h Gd(makes)g(a)g(r)o(ecursive)f(call)h(to)g(check)h(whether)450
4053 y F4(t0)j Gd(is)h(a)f(numeric)g(value;)34 b(and)29
b(when)h(applied)e(to)i(any)g(other)g(term)f(r)o(eturns)g
F4(false)n Gd(.)52 b(The)450 4153 y(function)22 b(that)e(checks)h
(whether)g(a)f(term)h(is)g(a)g(value)f(is)h(similar:)616
4300 y FT(let)40 b(rec)g(isval)g(=)g(function)773 4391
y(TmTrue\(_\))80 b FO(!)39 b FT(true)694 4482 y(|)h(TmFalse\(_\))h
FO(!)e FT(true)694 4574 y(|)h(t)f(when)i(isnumericval)h(t)78
b FO(!)39 b FT(true)694 4665 y(|)h(_)f FO(!)g FT(false)450
4820 y Gd(The)20 b(thir)o(d)g(clause)f(is)i(a)e(\223conditional)i
(pattern\224:)j(it)c(matches)h(any)f(term)g F4(t)o Gd(,)g(but)g(only)h
(so)g(long)450 4920 y(as)f(the)h(boolean)g(expr)o(ession)g
F4(isnumericval)39 b(t)20 b Gd(yields)h F4(true)n Gd(.)p
eop
%%Page: 37 38
37 37 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(37)450 683 y F8(Evaluation)450
841 y Gd(The)20 b(implementation)h(of)f(the)h(evaluation)f(r)o(elation)
f(closely)i(follows)g(the)g(single-step)f(eval-)450 941
y(uation)h(r)o(ules)f(in)h(De\002nition)g(3.2.13.)i(As)d(we)g(have)g
(seen,)g(these)g(r)o(ules)g(de\002ne)g(a)g F7(partial)f
Gd(func-)450 1040 y(tion)30 b(that,)h(when)f(applied)e(to)h(a)g(term)g
(that)g(is)g(not)h(yet)f(a)g(value,)h(yields)f(the)g(next)h(step)f(in)
450 1140 y(the)c(evaluation)g(sequence)h(for)f(that)g(term.)39
b(When)26 b(applied)e(to)i(a)f(value,)g(the)h(r)o(esult)f(of)g(the)450
1240 y(evaluation)c(function)h(yields)g(no)g(r)o(esult.)27
b(T)-8 b(o)22 b(translate)f(the)g(evaluation)g(r)o(ules)h(into)g
(OCaml,)450 1339 y(we)k(need)f(to)i(make)e(a)h(decision)g(about)g(how)h
(to)f(handle)g(this)h(case.)40 b(One)26 b(straightforwar)o(d)450
1439 y(appr)o(oach)21 b(is)h(write)g(the)h(single-step)f(evaluation)g
(function)h(so)g(that)f(it)g(raises)g(an)g(exception)450
1538 y(when)32 b(none)g(of)g(the)g(evaluation)f(r)o(ules)h(apply)f(to)h
(the)f(term)h(that)f(it)h(is)g(given.)58 b(\(Another)450
1638 y(possibility)23 b(would)e(be)g(to)h(make)f(the)g(single-step)h
(evaluator)e(r)o(eturn)h(a)f F4(term)42 b(option)19 b
Gd(indi-)450 1738 y(cating)26 b(whether)g(it)g(was)g(successful)g(and,)
h(if)f(so,)h(giving)g(the)f(r)o(esulting)g(term;)j(this)d(would)450
1837 y(also)18 b(work)f(\002ne,)i(but)e(would)h(r)o(equir)o(e)e(a)h
(little)h(mor)o(e)f(bookkeeping.\))25 b(W)-8 b(e)17 b(begin)h(by)f
(de\002ning)450 1937 y(the)k(exception)g(to)g(be)f(raised)g(when)i(no)f
(evaluation)f(r)o(ule)h(applies:)616 2095 y FT(exception)41
b(No)450 2261 y Gd(Now)17 b(we)f(can)f(write)h(the)g(single-step)h
(evaluator)e(itself.)24 b(Note)16 b(that)g(ther)o(e)f(ar)o(e)g(several)
g(places)450 2360 y(wher)o(e)30 b(we)g(ar)o(e)f(constr)o(ucting)k
(terms)d(fr)o(om)g(scratch)g(rather)g(than)h(r)o(eor)o(ganizing)e
(existing)450 2460 y(terms.)44 b(Since)27 b(these)g(new)g(terms)g(do)g
(not)g(exist)g(in)h(the)f(user)6 b('s)27 b(original)g(sour)o(ce)g
(\002le,)h(their)450 2560 y F4(info)18 b Gd(annotations)i(ar)o(e)f(not)
h(useful.)25 b(The)19 b(constant)h F4(dummyinfo)c Gd(is)k(used)f(as)g
(the)h F4(info)e Gd(anno-)450 2659 y(tation)j(in)g(such)h(terms.)616
2817 y FT(let)40 b(rec)g(eval1)g(=)g(function)773 2908
y(TmIf\(fi,TmTrue\(_\),t2,t3\))45 b FO(!)851 3000 y FT(t2)694
3091 y(|)40 b(TmIf\(fi,TmFalse\(_\),t2,t3\))45 b FO(!)851
3182 y FT(t3)694 3274 y(|)40 b(TmIf\(fi,t1,t2,t3\))j
FO(!)851 3365 y FT(let)d(t1')g(=)g(eval1)g(t1)g(in)851
3456 y(TmIf\(fi,)h(t1',)g(t2,)f(t3\))694 3548 y(|)g(TmSucc\(fi,t1\))i
FO(!)851 3639 y FT(let)e(t1')g(=)g(eval1)g(t1)g(in)851
3730 y(TmSucc\(fi,)i(t1'\))694 3822 y(|)e(TmPred\(_,TmSucc\(_,v1\)\))k
(when)c(\(isnumericval)j(v1\))c FO(!)851 3913 y FT(v1)694
4004 y(|)h(TmPred\(fi,t1\))i FO(!)851 4096 y FT(let)e(t1')g(=)g(eval1)g
(t1)g(in)851 4187 y(TmPred\(fi,)i(t1'\))694 4278 y(|)e
(TmPred\(_,TmZero\(_\)\))k FO(!)851 4369 y FT(TmZero\(dummyinfo\))694
4461 y(|)c(TmIsZero\(_,TmZero\(_\)\))k FO(!)851 4552
y FT(TmTrue\(dummyinfo\))694 4643 y(|)c(TmIsZero\(_,TmSucc\(_,v11\)\))
45 b(when)40 b(\(isnumericval)i(v11\))e FO(!)851 4735
y FT(TmFalse\(dummyinfo\))694 4826 y(|)g(TmIsZero\(fi,t1\))j
FO(!)851 4917 y FT(let)d(t1')g(=)g(eval1)g(t1)g(in)p
eop
%%Page: 38 39
38 38 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(38)851 683 y FT(TmIsZero\(fi,)42
b(t1'\))694 774 y(|)e(_)f FO(!)851 866 y FT(raise)i(No)575
1027 y Gd(Finally)-9 b(,)20 b(the)h F4(eval)e Gd(function)j(takes)e(a)h
(term)f(and)h(\002nds)g(its)g(normal)g(form)g(by)g(r)o(epeatedly)450
1126 y(calling)g F4(eval1)n Gd(.)27 b(Whenever)21 b F4(eval1)e
Gd(r)o(eturns)h(a)h(new)g(term)g F4(t)2392 1096 y FX(0)2416
1126 y Gd(,)f(we)i(make)e(a)h(r)o(ecursive)f(call)h(to)450
1226 y F4(eval)e Gd(to)h(continue)h(evaluating)f(fr)o(om)g
F4(t)1736 1196 y FX(0)1759 1226 y Gd(.)26 b(When)20 b
F4(eval1)e Gd(\002nally)j(r)o(eaches)e(a)h(point)h(wher)o(e)e(no)450
1326 y(r)o(ule)25 b(applies,)h(it)g(raises)f(the)g(exception)h
F4(No)o Gd(,)g(causing)g F4(eval)d Gd(to)j(br)o(eak)e(out)i(of)f(the)g
(loop)h(and)450 1425 y(r)o(eturn)20 b(the)h(\002nal)g(term)g(in)g(the)g
(sequence.)616 1578 y FT(let)40 b(rec)g(eval)g(t)f(=)694
1670 y(try)h(let)g(t')g(=)f(eval1)i(t)851 1761 y(in)f(eval)g(t')694
1852 y(with)h(No)e FO(!)g FT(t)575 2013 y Gd(Obviously)-9
b(,)21 b(this)h(simple)g(evaluator)e(is)i(tuned)f(for)g(easy)f
(comparison)i(with)g(the)f(mathe-)450 2113 y(matical)h(de\002nition)i
(of)e(evaluation,)h(not)g(for)g(\002nding)g(normal)g(forms)g(as)g
(quickly)g(as)g(possi-)450 2213 y(ble.)i(A)17 b(somewhat)i(mor)o(e)g
(ef)o(\002cient)e(algorithm)i(can)f(be)g(obtained)g(by)h(starting)f
(instead)g(fr)o(om)450 2312 y(the)j(big-step)f(evaluation)h(r)o(ules)g
(in)g(Exer)o(cise)f Ge(??)o Gd(.)450 2554 y F8(The)25
b(Rest)450 2712 y Gd(Of)g(course,)i(ther)o(e)e(is)h(much)g(mor)o(e)f
(to)h(an)f(interpr)o(eter)g(or)g(compiler)o(\227even)g(a)g(very)h
(simple)450 2812 y(one\227than)21 b(we)g(ar)o(e)e(showing)k(her)o(e.)
882 2980 y FT(chars)432 b(tokens)h(ASTs)550 b(ASTs)450
3071 y(file)40 b(I/O)119 b(-----)40 b(>)79 b(lexer)g(-----)41
b(>)78 b(parser)i(---)40 b(>)79 b(evaluator)h(---)40
b(>)79 b(printer)450 3248 y Gd(W)-8 b(e)22 b(ar)o(e)f(concentrating)i
(her)o(e)e(just)i(on)g(the)g(evaluation)f(step)g(and)g(the)g(datatype)f
(of)h(abstract)450 3347 y(syntax)f(tr)o(ees)f(that)g(ar)o(e)g
(manipulated)g(at)g(this)i(step.)575 3447 y(Inter)o(ested)c(r)o(eaders)
g(ar)o(e)h(encouraged)g(to)i(have)e(a)g(look)i(at)f(the)g(on-line)h
(OCaml)f(code)f(for)450 3547 y(the)i(whole)g(typechecker)-6
b(.)450 3831 y Gj(3.4)119 b(Summary)450 4095 y Ge(Booleans)2969
4095 y
 gsave currentpoint translate 0 124518 7800 div 685944 7800 div 575988
-7800 div box .9 setgray fill grestore
 2969 4095 a 16 w FN(B)53 b Ge(\(untyped\))p 409
4177 9 36 v 418 4148 3000 6 v 3418 4148 38 6 v 3455 4177
9 36 v 450 4267 a F7(Syntax)560 4398 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 487309
-7800 div box .9 setgray fill grestore
 560 4398 a 16
w F4(t)77 b Gd(::=)1821 b F7(terms)852 4497 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 487309
-7800 div box .9 setgray fill grestore
 852 4497
a 15 w F4(true)1627 b F7(constant)20 b(true)852 4597
y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4597 a 15 w F4(false)1583 b F7(constant)20 b(false)852
4697 y
 gsave currentpoint translate 0 124518 7800 div 6442134 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4697 a 15 w F4(if)43 b(t)g(then)f(t)h(else)f(t)1018
b F7(conditional)560 4820 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 560 4820 a 16 w F4(v)77 b
Gd(::=)1821 b F7(values)852 4920 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 487309
-7800 div box .9 setgray fill grestore
 852 4920 a 15 w F4(true)1627
b F7(value)21 b(true)p eop
%%Page: 39 40
39 39 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(39)852 683 y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 683 a 15 w
F4(false)1583 b F7(value)21 b(false)471 805 y(Evaluation)p
3096 718 355 4 v 3096 830 4 113 v 2283 w F4(t)i F5(\000)-15
b FV(!)23 b F4(t)3398 775 y FX(0)p 3447 830 V 3096 833
355 4 v 1122 967 a
 gsave currentpoint translate 0 419430 7800 div 10328697 7800 div 747110
-7800 div box .9 setgray fill grestore
 1122 967 a 1146 966 a F4(if)43 b(true)e(then)h(t)
1756 978 y F1(2)1840 966 y F4(else)g(t)2102 978 y F1(3)2165
966 y F5(\000)-14 b FV(!)23 b F4(t)2366 978 y F1(2)2851
967 y Gd(\()r(E)t(-)t(B)t F6(O)t(O)t(L)t Gd(B)t F6(E)t(T)o(A)o
Gd(T\))1100 1154 y
 gsave currentpoint translate 0 419430 7800 div 10672758 7800 div 747110
-7800 div box .9 setgray fill grestore
 1100 1154 a 1124 1153 a F4(if)43 b(false)e(then)h(t)
1778 1165 y F1(2)1862 1153 y F4(else)g(t)2123 1165 y
F1(3)2187 1153 y F5(\000)-14 b FV(!)23 b F4(t)2387 1165
y F1(3)2850 1154 y Gd(\()r(E)t(-)t(B)t F6(O)t(O)t(L)t
Gd(B)t F6(E)t(T)o(A)t Gd(F)q(\))746 1396 y
 gsave currentpoint translate 0 851966 7800 div 16262141 7800 div 1179646
-7800 div box .9 setgray fill grestore
 746 1396 a
1602 1340 a F4(t)1645 1352 y F1(1)1709 1340 y F5(\000)-14
b FV(!)23 b F4(t)1917 1311 y FX(0)1909 1364 y F1(1)p
780 1377 1993 4 v 780 1450 a F4(if)43 b(t)954 1462 y
F1(1)1038 1450 y F4(then)f(t)1300 1462 y F1(2)1384 1450
y F4(else)g(t)1645 1462 y F1(3)1709 1450 y F5(\000)-14
b FV(!)23 b F4(if)43 b(t)2048 1420 y FX(0)2040 1474 y
F1(1)2124 1450 y F4(then)f(t)2386 1462 y F1(2)2470 1450
y F4(else)g(t)2731 1462 y F1(3)3235 1396 y Gd(\()r(E)t(-)t(I)t
F6(F)q Gd(\))p 409 1542 9 36 v 418 1542 3000 6 v 3418
1542 38 6 v 3455 1542 9 36 v 450 1775 a Ge(Arithmetic)18
b(expressions)1548 b FN(B)2964 1775 y
 gsave currentpoint translate 0 124518 7800 div 722352 7800 div 575988
-7800 div box .9 setgray fill grestore
 2964 1775 a 16
w FN(N)46 b Ge(\(untyped\))p 409 1857 9 36 v 418 1827
3000 6 v 3418 1827 38 6 v 3455 1857 9 36 v 450 1946 a
F7(New)21 b(syntactic)e(forms)592 2077 y F4(t)61 b Gd(::=)i(...)1695
b F7(terms)852 2177 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2177 a 15 w F4(0)1759 b F7(constant)20
b(zer)o(o)852 2276 y
 gsave currentpoint translate 0 124518 7800 div 2313402 7800 div 487309
-7800 div box .9 setgray fill grestore
 852 2276 a 15 w F4(succ)42 b(t)1541
b F7(successor)852 2376 y
 gsave currentpoint translate 0 270154 7800 div 2313402 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2376 a 15 w F4(pred)42
b(t)1541 b F7(pr)o(edecessor)852 2485 y
 gsave currentpoint translate 0 124518 7800 div 3001524 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2485 a 15
w F4(iszero)41 b(t)1454 b F7(zer)o(o)21 b(test)592 2684
y F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 2784 y
 gsave currentpoint translate 0 124518 7800 div 937158 7800 div 406686
-7800 div box .9 setgray fill grestore

852 2784 a 15 w F4(nv)1715 b F7(numeric)21 b(value)516
2983 y
 gsave currentpoint translate 0 124518 7800 div 937158 7800 div 406686
-7800 div box .9 setgray fill grestore
 516 2983 a 16 w F4(nv)77 b Gd(::=)63 b(...)1695
b F7(numeric)21 b(values)852 3083 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3083 a 15 w F4(0)1759
b F7(zer)o(o)21 b(value)852 3182 y
 gsave currentpoint translate 0 124518 7800 div 2657463 7800 div 406686
-7800 div box .9 setgray fill grestore
 852 3182 a 15 w F4(succ)42
b(nv)1497 b F7(successor)22 b(value)450 3397 y(New)f(evaluation)f
(rules)p 3096 3310 355 4 v 3096 3422 4 113 v 1960 w F4(t)j
F5(\000)-15 b FV(!)23 b F4(t)3398 3367 y FX(0)p 3447
3422 V 3096 3425 355 4 v 1350 3599 a
 gsave currentpoint translate 0 851966 7800 div 6725605 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1350 3599 a 1602
3543 a F4(t)1645 3555 y F1(1)1709 3543 y F5(\000)-14
b FV(!)23 b F4(t)1917 3513 y FX(0)1909 3566 y F1(1)p
1384 3580 784 4 v 1384 3652 a F4(succ)42 b(t)1645 3664
y F1(1)1709 3652 y F5(\000)-14 b FV(!)23 b F4(succ)42
b(t)2135 3623 y FX(0)2127 3676 y F1(1)3102 3599 y Gd(\()r(E)t(-)t(S)t
F6(U)t(C)t(C)q Gd(\))1509 3841 y
 gsave currentpoint translate 0 419430 7800 div 4208478 7800 div 747110
-7800 div box .9 setgray fill grestore
 1509 3841 a 1533 3840
a F4(pred)g(0)23 b F5(\000)-14 b FV(!)23 b F4(0)2830
3841 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t
Gd(P)t(Z)q(\))1313 4028 y
 gsave currentpoint translate 0 419430 7800 div 7305027 7800 div 747110
-7800 div box .9 setgray fill grestore
 1313 4028 a 1337 4027 a F4(pred)42
b(\(succ)g(nv\))22 b F5(\000)-15 b FV(!)23 b F4(nv)2842
4028 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t
Gd(P)t(S\))1350 4270 y
 gsave currentpoint translate 0 851966 7800 div 6725605 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1350 4270 a 1602 4214 a F4(t)1645
4226 y F1(1)1709 4214 y F5(\000)-14 b FV(!)23 b F4(t)1917
4184 y FX(0)1909 4238 y F1(1)p 1384 4251 784 4 v 1384
4324 a F4(pred)42 b(t)1645 4336 y F1(1)1709 4324 y F5(\000)-14
b FV(!)23 b F4(pred)42 b(t)2135 4294 y FX(0)2127 4347
y F1(1)3105 4270 y Gd(\()r(E)t(-)t(P)t F6(R)t(E)t(D)r
Gd(\))1400 4512 y
 gsave currentpoint translate 0 419430 7800 div 5928783 7800 div 747110
-7800 div box .9 setgray fill grestore
 1400 4512 a 1424 4511 a F4(iszero)g(0)22
b F5(\000)-14 b FV(!)23 b F4(true)2852 4512 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t Gd(I)t(Z)q(\))1204 4699
y
 gsave currentpoint translate 0 419430 7800 div 9025332 7800 div 747110
-7800 div box .9 setgray fill grestore
 1204 4699 a 1228 4698 a F4(iszero)41 b(\(succ)h(nv\))22
b F5(\000)-15 b FV(!)24 b F4(false)2864 4699 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t Gd(I)t(S\))p eop
%%Page: 40 41
40 40 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)470 b
Gd(3)t(.)30 b(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)25 b Gd(A)t
F6(R)t(I)t(T)t(H)t(M)t(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)
t(I)t(O)t(N)t(S)474 b Gd(40)1263 749 y
 gsave currentpoint translate 0 851966 7800 div 8101849 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1263 749 a 1602
693 a F4(t)1645 705 y F1(1)1709 693 y F5(\000)-14 b FV(!)23
b F4(t)1917 664 y FX(0)1909 717 y F1(1)p 1297 730 959
4 v 1297 803 a F4(iszero)41 b(t)1645 815 y F1(1)1709
803 y F5(\000)-14 b FV(!)23 b F4(iszero)41 b(t)2222 773
y FX(0)2215 827 y F1(1)3028 749 y Gd(\()r(E)t(-)t(I)t
F6(S)t Gd(Z)t F6(E)t(R)t(O)r Gd(\))p 409 895 9 36 v 418
895 3000 6 v 3418 895 38 6 v 3455 895 9 36 v eop
%%Page: 41 42
41 41 bop 450 1306 a F3(Chapter)44 b(4)450 1721 y Gk(The)52
b(Untyped)g(Lambda-Calculus)770 2177 y F7(Ther)o(e)21
b(may)m(,)e(indeed,)h(be)i(other)e(applications)g(of)g(the)h(system)f
(than)g(its)h(use)g(as)g(a)g(logic.)2330 2278 y Gd(\227)g(Alonzo)g
(Chur)o(ch,)f(1932)575 2478 y(This)26 b(chapter)f(r)o(eviews)g(the)g
(de\002nition)i(and)e(some)h(basic)g(pr)o(operties)e(of)i(the)g
Ge(untyped)450 2577 y Gd(or)j Ge(pure)g(lambda-calculus)p
Gd(,)e(the)i(underlying)h(\223computational)f(substrate\224)g(for)g
(most)h(of)450 2677 y(the)21 b(type)g(systems)g(described)f(in)h(the)g
(r)o(est)f(of)h(the)g(book.)575 2777 y(In)16 b(the)g(mid)g(1960s,)f
(Peter)h(Landin)f(observed)h(that)g(a)f(complex)h(pr)o(ogramming)g
(language)450 2876 y(can)34 b(be)g(understood)h(by)g(formulating)g(it)g
(as)f(a)g(tiny)h(cor)o(e)f(calculus)g(capturing)h(the)f(lan-)450
2976 y(guage's)28 b(essential)g(mechanisms,)i(together)f(with)f(a)g
(collection)h(of)f(convenient)h(\223derived)450 3075
y(forms\224)h(whose)i(behavior)e(is)g(understood)h(by)g(translating)f
(them)h(into)h(the)e(cor)o(e)g([Lan64)n(,)450 3175 y(Lan65)o(,)15
b(Lan66)o(])g(\(also)h(cf.)f([T)-8 b(en81)o(]\).)23 b(The)16
b(cor)o(e)f(language)g(used)h(by)f(Landin)h(was)g(the)g
Ge(lambda-)450 3275 y(calculus)p Gd(,)21 b(a)i(formal)g(system)h(in)g
(which)g(all)f(computation)h(is)g(r)o(educed)d(to)j(the)f(basic)g
(opera-)450 3374 y(tions)d(of)f(function)h(de\002nition)g(and)f
(application.)25 b(Since)18 b(the)i(60s,)e(the)h(lambda-calculus)f(has)
450 3474 y(seen)25 b(widespr)o(ead)f(use)i(in)f(the)h(speci\002cation)g
(of)f(pr)o(ogramming)h(language)f(featur)o(es,)f(lan-)450
3574 y(guage)f(design)g(and)f(implementation,)j(and)d(the)h(study)g(of)
g(type)g(systems.)33 b(Its)23 b(importance)450 3673 y(arises)c(fr)o(om)
f(the)h(fact)f(that)h(it)g(can)g(be)f(viewed)h(simultaneously)h(as)f(a)
f(simple)i(pr)o(ogramming)450 3773 y(language)29 b F7(in)g
Gd(which)i(computations)f(can)f(be)g(described)f(and)h(as)g(a)g
(mathematical)g(object)450 3872 y F7(about)21 b Gd(which)g(rigor)o(ous)
g(statements)g(can)g(be)f(pr)o(oved.)575 3972 y(The)e(lambda-calculus)g
(is)h(just)g(one)g(of)g(a)f(lar)o(ge)g(number)h(of)g(cor)o(e)f(calculi)
g(that)h(have)f(been)450 4072 y(used)28 b(for)g(these)g(purposes.)47
b(For)29 b(example,)f(the)h Ge(pi-calculus)24 b Gd(of)k(Robin)i(Milner)
-6 b(,)29 b(Joachim)450 4171 y(Parr)o(ow)-8 b(,)25 b(and)g(David)g(W)-8
b(alker)24 b([MPW92)o(,)g(Mil91)o(])h(has)g(become)g(a)f(popular)h(cor)
o(e)f(language)450 4271 y(for)i(de\002ning)h(the)f(semantics)h(of)f
(message-based)f(concurr)o(ent)h(languages,)h(while)g(Mart)n(\264)-26
b(\021n)450 4371 y(Abadi)17 b(and)g(Luca)f(Car)o(delli's)h
Ge(object)f(calculus)g Gd([AC96)n(])h(distills)i(the)e(cor)o(e)g
(featur)o(es)f(of)i(many)450 4470 y(object-oriented)26
b(languages.)42 b(Most)27 b(of)f(the)g(concepts)h(and)f(techniques)h
(we)f(will)h(develop)450 4570 y(for)21 b(the)f(lambda-calculus)g(can)g
(be)h(transferr)o(ed)d(quite)k(dir)o(ectly)e(to)h(these)g(other)g
(calculi.)575 4669 y(The)f(lambda-calculus)g(can)h(be)f(enriched)h(in)g
(a)g(variety)f(of)h(ways.)26 b(First,)21 b(it)g(is)h(often)f(con-)450
4769 y(venient)26 b(to)g(add)e(special)h(concr)o(ete)g(syntax)g(for)g
(featur)o(es)f(like)i(tuples)f(and)g(r)o(ecor)o(ds)f(whose)450
4869 y(behavior)29 b(can)g(alr)o(eady)e(be)i(simulated)g(in)h(the)f
(cor)o(e)g(language.)50 b(Mor)o(e)29 b(inter)o(estingly)-9
b(,)31 b(we)1908 5169 y(41)p eop
%%Page: 42 43
42 42 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(42)450 683 y(can)22 b(add)f(mor)o(e)g(complex)h(featur)o(es)f
(such)h(as)g(mutable)g(r)o(efer)o(ence)d(cells)j(or)g(nonlocal)h
(excep-)450 783 y(tion)k(handling,)h(which)f(can)e(be)h(modeled)g(in)g
(the)h(cor)o(e)e(language)g(only)i(via)f(rather)f(heavy)450
882 y(translations.)38 b(Such)25 b(extensions)h(lead)e(eventually)h(to)
g(languages)g(such)g(as)g(ML)f([GMW79)n(,)450 982 y(MTH90)o(,)17
b(W)-8 b(AL)961 952 y F2(+)1016 982 y Gd(89)o(,)18 b(MTHM97)n(],)g
(Haskell)g([HJW)2071 952 y F2(+)2126 982 y Gd(92)o(],)g(or)g(Scheme)g
([SJ75)m(,)g(KCR98].)24 b(As)18 b(we)450 1082 y(shall)h(see)g(in)g
(later)g(chapters,)f(extensions)i(to)f(the)h(cor)o(e)e(language)g
(often)i(involve)f(extensions)450 1181 y(to)i(the)g(type)g(system)g(as)
g(well.)450 1467 y Gj(4.1)119 b(Basics)450 1656 y Gd(Pr)o(ocedural)16
b(abstraction)h(is)h(a)f(key)g(featur)o(e)f(of)h(most)h(pr)o(ogramming)
g(languages.)24 b(Instead)17 b(of)450 1756 y(writing)23
b(the)g(same)f(calculation)g(over)g(and)g(over)-6 b(,)22
b(we)g(write)h(a)e(pr)o(ocedur)o(e)g(or)h(function)h(that)450
1855 y(performs)j(the)g(calculation)h(generically)-9
b(,)27 b(in)f(terms)h(of)f(one)g(or)h(mor)o(e)f(named)g(parameters,)450
1955 y(and)d(then)i(instantiate)f(this)h(function)f(as)g(needed,)f(pr)o
(oviding)h(values)g(for)f(the)h(parameters)450 2055 y(in)d(each)g
(case.)k(For)c(example,)f(it)h(is)g(second)g(natur)o(e)f(for)h(a)f(pr)o
(ogrammer)h(to)g(take)f(a)h(long)g(and)450 2154 y(r)o(epetitive)f(expr)
o(ession)g(like)616 2312 y FT(\(5*4*3*2*1\))42 b(+)d(\(7*6*5*4*3*2*1\))
k(-)c(\(3*2*1\))450 2478 y Gd(and)20 b(r)o(ewrite)g(it)h(as)616
2636 y FT(factorial\(5\))42 b(+)d(factorial\(7\))j(-)e(factorial\(3\),)
450 2802 y Gd(wher)o(e:)616 2959 y FT(factorial\(n\))81
b(=)e(if)40 b(n=0)g(then)g(1)f(else)h(n)g(*)f(factorial\(n-1\).)450
3126 y Gd(For)22 b(each)f(nonnegative)h(number)f F4(n)p
Gd(,)g(instantiating)i(the)f(function)g F4(factorial)c
Gd(with)k(the)g(ar)o(-)450 3225 y(gument)i F4(n)g Gd(yields)g(the)g
(factorial)e(of)i F4(n)f Gd(as)h(r)o(esult.)34 b(W)-6
b(riting)24 b(\223)p Gb(\025)p F4(n.)42 b(...)o Gd(\224)23
b(as)h(a)f(shorthand)h(for)450 3325 y(\223the)d(function)h(that,)e(for)
h(each)g F4(n)o Gd(,)g(yields...,\224)f(we)h(can)g(r)o(estate)e(the)j
(de\002nition)g(of)f F4(factorial)450 3424 y Gd(as:)616
3582 y FT(factorial)81 b(=)d FM(\025)p FT(n.)40 b(if)f(n=0)h(then)g(1)g
(else)g(n)f(*)h(factorial\(n-1\))450 3748 y Gd(Then)16
b F4(factorial\(0\))11 b Gd(means)16 b(\223the)f(function)i
F4(\()p Gb(\025)p F4(n.)42 b(if)h(n=0)f(then)g(1)h(else)f(...\))14
b Gd(applied)450 3848 y(to)34 b(the)g(ar)o(gument)f F4(0)p
Gd(,\224)j(that)d(is,)k(\223the)d(value)f(that)g(r)o(esults)h(when)g
(the)g(bound)g(variable)e F4(n)450 3947 y Gd(in)g(the)g(function)h
(body)e F4(\()p Gb(\025)p F4(n.)43 b(if)g(n=0)f(then)g(1)h(else)f
(...\))30 b Gd(is)i(r)o(eplaced)e(by)i F4(0)o Gd(,\224)i(that)e(is)450
4047 y(\223)p F4(if)42 b(0=0)h(then)f(1)h(else)f(...)n
Gd(,\224)20 b(that)h(is,)g F4(1)p Gd(.)575 4147 y(In)16
b(the)g(1930s,)e(Alonzo)i(Chur)o(ch)g(invented)g(a)f(mathematical)g
(system)i(called)e(the)h Ge(lambda-)450 4246 y(calculus)24
b Gd(\(or)i Gb(\025)p Gd(-calculus\))f(that)h(embodies)h(this)f(kind)h
(of)f(function)h(de\002nition)g(and)f(appli-)450 4346
y(cation)c(in)g(a)f(pur)o(e)g(form)h([Chu36)o(,)f(Chu41)o(].)28
b(In)22 b(the)g(lambda-calculus)f F7(everything)f Gd(is)i(a)f(func-)450
4446 y(tion:)28 b(the)21 b(ar)o(guments)g(accepted)f(by)i(functions)g
(ar)o(e)e(themselves)i(functions)g(and)f(the)g(r)o(esult)450
4545 y(r)o(eturned)f(by)g(a)h(function)g(is)g(another)g(function.)p
eop
%%Page: 43 44
43 43 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(43)450 683 y F8(Syntax)450 841 y Gd(The)28 b(syntax)g(of)h
(the)f(lambda-calculus)f(comprises)h(thr)o(ee)g(kinds)h(of)f(terms.)48
b(A)28 b(variable)e F4(x)450 941 y Gd(by)21 b(itself)f(is)h(a)f
(lambda-term;)f(the)h(application)h(of)f(a)g(lambda-term)f
F4(t)2688 953 y F1(1)2749 941 y Gd(to)i(another)f(lambda-)450
1040 y(term)j F4(t)690 1052 y F1(2)730 1040 y Gd(,)h(written)g
F4(t)1110 1052 y F1(1)1194 1040 y F4(t)1238 1052 y F1(2)1278
1040 y Gd(,)g(is)g(a)e(lambda-term;)h(and)g(the)h(abstraction)f(of)g(a)
g(variable)f F4(x)g Gd(fr)o(om)450 1140 y(a)h(lambda-term)f
F4(t)1059 1152 y F1(1)1100 1140 y Gd(,)i(written)f Gb(\025)p
F4(x.t)1612 1152 y F1(1)1653 1140 y Gd(,)g(is)h(a)f(lambda-term.)32
b(These)23 b(forms)h(ar)o(e)e(summarized)450 1240 y(in)f(the)g
(following)h(grammar:)592 1421 y F4(t)61 b Gd(::=)1821
b F7(terms)852 1520 y F4(x)1774 b F7(variable)852 1620
y Gb(\025)p F4(x.t)1641 b F7(abstraction)852 1720 y F4(t)43
b(t)1687 b F7(application)450 1944 y Gd(The)26 b(letters)h
F4(s)o Gd(,)h F4(t)p Gd(,)f(and)f F4(u)h Gd(\(with)g(or)f(without)i
(subscripts\))e(ar)o(e)f(used)i(thr)o(oughout)g(to)g(stand)450
2043 y(for)e(arbitrary)e(lambda-terms,)i(while)g F4(x)p
Gd(,)g F4(y)p Gd(,)g(and)g F4(z)f Gd(ar)o(e)g(used)g(to)h(stand)g(for)f
(arbitrary)g(vari-)450 2143 y(able)g(names.)36 b(W)-8
b(e)25 b(call)f F4(s)o Gd(,)h F4(t)p Gd(,)g F4(u)o Gd(,)g
F4(x)p Gd(,)g F4(y)o Gd(,)g(and)f F4(z)g Ge(metavariables)p
Gd(:)29 b(they)c(ar)o(e)e(\223variables\224)f(in)j(the)450
2243 y(sense)17 b(that)f(they)h(stand)f(for)h(terms)f(of)h(the)g
(lambda-calculus,)e(and)h(\223meta\224)g(in)h(the)f(sense)h(that)450
2342 y(they)25 b(ar)o(e)d(part)i(of)g(the)g Ge(metalanguage)d
Gd(\(i.e.)35 b(English)25 b(plus)g(or)o(dinary)e(mathematical)h(nota-)
450 2442 y(tions\))d(in)g(which)h(an)e Ge(object)f(language)p
Gd(,)g(the)h(lambda-calculus,)f(is)i(being)g(discussed.)k(Since)450
2542 y(the)i(set)g(of)g(short)h(names)f(is)g(limited,)h(we)f(will)h
(also)f(sometimes)h(use)f F4(x)p Gd(,)h F4(y)o Gd(,)h(etc.)43
b(as)27 b(object-)450 2641 y(language)33 b(variables,)i(but)f(the)f
(context)h(of)f(the)h(discussion)h(will)f(always)f(make)g(it)h(clear)
450 2741 y(which)27 b(is)g(which.)42 b(For)27 b(example,)f(in)h(a)f
(statement)g(like)g(\223The)g(term)g F4(\()p Gb(\025)p
F4(x.)43 b Gb(\025)p F4(y.)f(x)h(\(y)g(x\)\))450 2840
y Gd(has)22 b(the)h(form)f F4(\()p Gb(\025)p F4(z.)42
b(s\))o Gd(,)23 b(wher)o(e)e F4(z)k FY(=)h F4(x)c Gd(and)f
F4(s)26 b FY(=)f Gb(\025)p F4(y.)43 b(x)g(\(y)g(x\))o
Gd(,\224)22 b(the)g(names)g F4(z)g Gd(and)g F4(s)f Gd(ar)o(e)450
2940 y(metavariables,)28 b(wher)o(eas)f F4(x)h Gd(and)f
F4(y)h Gd(ar)o(e)e(object-language)i(variables.)46 b(A)28
b(complete)g(sum-)450 3040 y(mary)21 b(of)f(metavariable)f(conventions)
k(appears)c(in)i(Appendix)f(B.)575 3139 y(The)i(wor)o(ds)g
(\223lambda-term\224)e(\(or)j(just)g(\223term\224\))e(and)h
(\223lambda-expr)o(ession\224)e(ar)o(e)h(often)450 3239
y(used)h(as)g(synonyms.)31 b(In)22 b(this)h(book,)g(we)f(will)h(use)f
(\223expr)o(ession\224)e(for)i(all)g(sorts)h(of)f(syntactic)450
3339 y(phrases)j(\(including)h(type)f(expr)o(essions,)h(kind)f(expr)o
(essions,)h(etc.\),)g(r)o(eserving)e(\223term\224)g(for)450
3438 y(the)d(mor)o(e)f(specialized)g(sense)h(of)g(phrases)f(r)o(epr)o
(esenting)g(pr)o(ograms.)575 3538 y(As)e(we)g(did)g(for)g(arithmetic)g
(expr)o(essions,)g(we've)g(de\002ned)g(her)o(e)g(only)h(the)f
Ge(abstract)f(syn-)450 3637 y(tax)23 b Gd(of)g(lambda-terms,)h
(ignoring)h(the)f(pr)o(ocesses)f(of)h(lexing)g(and)g(parsing)g(thr)o
(ough)g(which)450 3737 y(strings)c(of)f(characters)f(ar)o(e)f(mapped)h
(into)i(abstract)e(syntax)h(tr)o(ees.)24 b(Our)19 b(convention)i(will)e
(be)450 3837 y(that)i(application)h(\223associates)e(to)i(the)g
(left\224\227that)e(is,)i F4(s)43 b(t)g(u)21 b Gd(is)h(a)f(shorthand)h
(for)f F4(\(s)43 b(t\))g(u)o Gd(,)450 3936 y(i.e.,)20
b(for)g(the)h(tr)o(ee)1165 4094 y FT(\(apply\))1165 4185
y(|)197 b(|)1048 4277 y(\(apply\))80 b(u)1087 4368 y(|)118
b(|)1087 4459 y(s)g(t)450 4625 y Gd(and)31 b(that)f(the)i(bodies)f(of)g
(abstractions)g(ar)o(e)e(assumed)i(to)g(extend)g(as)f(far)g(to)i(the)f
(right)g(as)450 4725 y(possible,)21 b(so)g(that)g Gb(\025)p
F4(x.)43 b Gb(\025)p F4(y.)g(x)g(y)g(x)20 b Gd(means)h
Gb(\025)p F4(x.)43 b(\()p Gb(\025)p F4(y.)f(\(x)h(y\))g(x\))o
Gd(,)20 b(i.e.:)p eop
%%Page: 44 45
44 44 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(44)1244 683 y FM(\025)p FT(x)1283 774 y(|)1244
866 y FM(\025)p FT(y)1283 957 y(|)1165 1048 y(\(apply\))1165
1140 y(|)197 b(|)1008 1231 y(\(apply\))120 b(x)1048 1322
y(|)d(|)1048 1414 y(x)g(y)575 1596 y Gd(The)23 b(variable)f
F4(x)i Gd(is)g(said)f(to)h(be)f Ge(bound)g Gd(in)h(the)g(body)f
F4(t)g Gd(of)h(the)g(abstraction)f Gb(\025)p F4(x.t)o
Gd(.)34 b(Con-)450 1696 y(versely)-9 b(,)23 b(we)h(say)f(that)h(an)f
(occurr)o(ence)f(of)i(a)e(variable)h F4(x)g Gd(is)g Ge(free)g
Gd(if)h F4(x)f Gd(appears)f(in)i(a)f(position)450 1796
y(wher)o(e)j(it)g(is)g(not)h(bound)g(by)f(an)g(enclosing)i(abstraction)
d(on)i F4(x)p Gd(.)42 b(For)26 b(example,)h F4(x)e Gd(is)i(fr)o(ee)e
(in)450 1895 y F4(\(x)43 b(y\))29 b Gd(and)g F4(\()p
Gb(\025)p F4(y.)42 b(x)h(y\))p Gd(,)31 b(but)f(not)h(in)f
Gb(\025)p F4(x.x)e Gd(or)i F4(\()p Gb(\025)p F4(z.)43
b Gb(\025)p F4(x.)f Gb(\025)p F4(y.)h(x)g(\(y)g(z\)\))o
Gd(.)52 b(In)30 b(the)g(term)450 1995 y F4(\(\()p Gb(\025)p
F4(x.x\))41 b(x\))o Gd(,)21 b(the)g(variable)e F4(x)h
Gd(has)h(both)h(a)e(fr)o(ee)f(and)h(a)h(bound)g(occurr)o(ence.)575
2094 y(A)i(term)g(with)i(no)f(fr)o(ee)e(variables)g(is)i(said)g(to)g
(be)f Ge(closed)p Gd(;)g(closed)h(terms)g(ar)o(e)e(also)i(some-)450
2194 y(times)19 b(called)e Ge(combinators)p Gd(.)23 b(The)18
b(simplest)h(combinator)g(is)g(called)e(the)i Ge(identity)c(function)p
Gd(:)616 2352 y FT(id)40 b(=)f FM(\025)p FT(x.x;)450
2595 y F8(Operational)25 b(Semantics)450 2753 y Gd(In)j(its)g(pur)o(e)f
(form,)j(the)e(lambda-calculus)e(has)i(no)h(built-in)f(constants)h(or)f
(operators\227no)450 2852 y(numbers,)37 b(arithmetic)c(operations,)k(r)
o(ecor)o(ds,)e(loops,)j(sequencing,)f(I/O,)d(etc.)64
b(The)34 b(sole)450 2952 y(means)d(by)g(which)h(terms)f
(\223compute\224)f(is)i(the)f(application)f(of)h(functions)h(to)g(ar)o
(guments.)450 3051 y(Each)21 b(step)g(in)h(the)f(computation)i
(consists)f(of)g(r)o(ewriting)f(an)g(application)h(whose)g(left-hand)
450 3151 y(component)c(is)f(an)g(abstraction)g(by)g(substituting)h(the)
f(right-hand)g(part)f(for)h(the)g(bound)g(vari-)450 3251
y(able)j(in)h(the)g(abstraction's)g(body)-9 b(.)25 b(Graphically)-9
b(,)658 3417 y F4(\()p Gb(\025)p F4(x.)42 b(t)920 3429
y F1(12)997 3417 y F4(\))i(t)1128 3429 y F1(2)1192 3417
y F5(\000)-15 b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g
F4(t)1591 3429 y F1(2)1632 3417 y F0(g)p F4(t)1702 3429
y F1(12)1779 3417 y Gb(;)450 3583 y Gd(wher)o(e)h F0(f)p
F4(x)29 b F5(7)p FV(!)h F4(t)959 3595 y F1(2)1000 3583
y F0(g)p F4(t)1070 3595 y F1(12)1171 3583 y Gd(means)25
b(\223the)f(term)g(obtained)g(by)h(r)o(eplacing)e(all)i(fr)o(ee)d
(occurr)o(ences)i(of)450 3682 y F4(x)i Gd(in)h F4(t)662
3694 y F1(12)765 3682 y Gd(by)g F4(t)927 3694 y F1(2)968
3682 y Gd(.\224)42 b(For)26 b(example,)h F4(\(\()p Gb(\025)p
F4(x.x\))41 b(y\))26 b Gd(r)o(ewrites)f(to)i F4(y)f Gd(and)g
F4(\(\()p Gb(\025)p F4(x.)42 b(x)h(y\))f(\(u)h(r\)\))450
3782 y Gd(r)o(ewrites)32 b(to)i F4(\(u)42 b(r)i(y\))o
Gd(.)62 b(Following)35 b(Chur)o(ch,)h(a)c(term)h(of)g(the)g(form)g
F4(\(\()p Gb(\025)p F4(x.)42 b(t)3066 3794 y F1(12)3143
3782 y F4(\))h(t)3274 3794 y F1(2)3314 3782 y F4(\))33
b Gd(is)450 3882 y(called)22 b(a)h Ge(redex)p Gd(,)g(and)f(the)i
(operation)f(of)h(r)o(ewriting)f(a)g(r)o(edex)e(accor)o(ding)i(to)h
(the)f(above)g(r)o(ule)450 3981 y(is)e(called)f Ge(beta-reduction)p
Gd(.)575 4081 y(The)f(lambda-calculus)f(literatur)o(e)h(contains)h
(several)f(variants)g(of)g(beta-r)o(eduction.)24 b(The)450
4181 y(dif)o(fer)o(ences)18 b(appear)i(in)h(the)g(r)o(ules)g(for)f(the)
h(or)o(der)f(in)h(which)h(r)o(edices)d(may)i(be)f(r)o(educed.)575
4363 y F5(\017)41 b Gd(Under)17 b Ge(full)h(beta-reduction)p
Gd(,)d F7(any)j Gd(r)o(edex)f(may)h(be)h(r)o(educed)d(at)i(any)h(time.)
25 b(This)19 b(gives)658 4463 y(a)f(nondeterministic)j(notion)g(of)e
(evaluation,)g(wher)o(e)f(at)h(each)g(step)g(we)g(pick)g(some)h(r)o(e-)
658 4562 y(dex,)c(anywher)o(e)h(inside)g(the)h(term)f(we)g(ar)o(e)f
(evaluating,)h(and)f(r)o(educe)g(it.)25 b(For)17 b(example,)658
4662 y(consider)j(the)h(term)865 4861 y F4(\()p Gb(\025)p
F4(x.x\))42 b(\(\()p Gb(\025)p F4(x.x\))f(\()p Gb(\025)p
F4(z.)h(\()p Gb(\025)p F4(x.x\))g(z\)\))n Gb(;)p eop
%%Page: 45 46
45 45 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(45)658 683 y(or)-6 b(,)20 b(mor)o(e)h(r)o(eadably:)865
882 y F4(id)43 b(\(id)f(\()p Gb(\025)p F4(z.)h(id)f(z\)\))o
Gb(:)658 1082 y Gd(This)21 b(term)g(contains)g(thr)o(ee)f(r)o(edices:)
907 1261 y F4(id)42 b(\(id)h(\()p Gb(\025)p F4(z.)f(id)h(z\)\))p
907 1281 786 4 v 907 1360 a(id)f(\(\(id)g(\()p Gb(\025)p
F4(z.)h(id)f(z\)\))p 1081 1380 656 4 v -1 w(\))907 1460
y(id)g(\(id)h(\()p Gb(\025)p F4(z.)f(id)h(z)p 1431 1473
175 4 v -1 w(\)\))658 1658 y Gd(Under)24 b(full)g(beta-r)o(eduction,)g
(we)h(might)h(choose,)h(for)d(example,)h(to)g(begin)g(with)h(the)658
1758 y(innermost)c(r)o(edex,)e(then)i(r)o(educe)e(the)i(one)g(in)g(the)
g(middle,)f(and)g(\002nish)i(with)f(the)g(out-)658 1857
y(ermost:)1123 2036 y F4(id)43 b(\(id)g(\()p Gb(\025)p
F4(z.)f(id)h(z)p 1648 2049 V -1 w(\)\))907 2136 y F5(\000)-15
b FV(!)83 b F4(id)43 b(\(id)g(\()p Gb(\025)p F4(z.z\))p
1254 2156 438 4 v -3 w(\))907 2236 y F5(\000)-15 b FV(!)83
b F4(id)43 b(\()p Gb(\025)p F4(z.z\))p 1123 2256 394
4 v 907 2335 a F5(\000)-15 b FV(!)83 b Gb(\025)p F4(z.z)907
2435 y F5(6\000)-15 b FV(!)575 2633 y F5(\017)41 b Gd(Under)22
b(the)h Ge(normal)f(order)h Gd(r)o(eduction)f(strategy)-9
b(,)23 b(the)g(leftmost,)h(outermost)f(r)o(edex)f(is)658
2733 y(always)g(r)o(educed)f(\002rst.)32 b(Under)22 b(this)h(strategy)
-9 b(,)22 b(the)h(term)g(above)f(would)h(be)g(r)o(educed)658
2832 y(as)d(follows:)1123 3011 y F4(id)43 b(\(id)g(\()p
Gb(\025)p F4(z.)f(id)h(z\)\))p 1123 3032 786 4 v 907
3111 a F5(\000)-15 b FV(!)83 b F4(id)43 b(\()p Gb(\025)p
F4(z.)f(id)h(z\))p 1123 3131 569 4 v 907 3211 a F5(\000)-15
b FV(!)83 b Gb(\025)p F4(z.)43 b(id)g(z)p 1299 3224 175
4 v 907 3310 a F5(\000)-15 b FV(!)83 b Gb(\025)p F4(z.z)907
3410 y F5(6\000)-15 b FV(!)575 3608 y F5(\017)41 b Gd(The)17
b Ge(call)e(by)i(name)f Gd(\(or)g Ge(lazy)p Gd(\))g(r)o(eduction)h
(strategy)f(is)i(yet)f(mor)o(e)f(r)o(estrictive,)h(allowing)658
3708 y(no)29 b(r)o(eductions)g(under)f(abstractions.)50
b(Starting)28 b(fr)o(om)h(the)g(same)f(term,)j(we)d(would)658
3807 y(perform)19 b(the)h(\002rst)h(two)f(r)o(eductions)g(as)g(under)f
(normal-or)o(der)-6 b(,)19 b(but)h(then)h(stop)f(befor)o(e)658
3907 y(the)g(last)h(and)f(r)o(egar)o(d)f Gb(\025)p F4(z.)43
b(id)f(z)21 b Gd(as)f(a)h(normal)g(form:)1123 4108 y
F4(id)43 b(\(id)g(\()p Gb(\025)p F4(z.)f(id)h(z\)\))p
1123 4128 786 4 v 907 4208 a F5(\000)-15 b FV(!)83 b
F4(id)43 b(\()p Gb(\025)p F4(z.)f(id)h(z\))p 1123 4228
569 4 v 907 4307 a F5(\000)-15 b FV(!)83 b Gb(\025)p
F4(z.)43 b(id)g(z)907 4407 y F5(6\000)-15 b FV(!)658
4605 y Gd(V)-8 b(ariants)20 b(of)h(call)g(by)f(name)h(have)g(been)f
(used)h(in)g(a)f(few)h(popular)f(pr)o(ogramming)h(lan-)658
4705 y(guages,)31 b(notably)e(Algol)h([)p Ge(?)o Gd(])f(and)g(Haskell)h
([HJW)2319 4675 y F2(+)2373 4705 y Gd(92)o(])f(\(Haskell)g(actually)g
(uses)g(an)658 4805 y(optimized)20 b(version)h(known)i(as)d
Ge(call)f(by)i(need)p Gd(\).)p eop
%%Page: 46 47
46 46 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(46)575 683 y F5(\017)41 b Gd(Most)24 b(pr)o(ogramming)h
(languages)f(today)h(use)f(a)g Ge(call)f(by)i(value)e
Gd(r)o(eduction)h(strategy)-9 b(,)658 783 y(in)25 b(which)h(a)f(r)o
(edex)f(is)h(allowed)g(to)h(r)o(educe)e(only)i(when)g(its)f(right-hand)
g(side)g(has)h(al-)658 882 y(r)o(eady)16 b(been)i(r)o(educed)e(to)j(a)e
Ge(value)p Gd(,)g(wher)o(e)g(a)h(value)f(in)i(this)g(setting)f(is)h
(just)g(an)f(abstrac-)658 982 y(tion.)26 b(Under)20 b(this)h(strategy)
-9 b(,)20 b(our)h(example)f(term)h(r)o(educes)e(as)i(follows:)1123
1172 y F4(id)43 b(\(id)g(\()p Gb(\025)p F4(z.)f(id)h(z\)\))p
1254 1192 656 4 v 907 1271 a F5(\000)-15 b FV(!)83 b
F4(id)43 b(\()p Gb(\025)p F4(z.)f(id)h(z\))p 1123 1292
569 4 v 907 1371 a F5(\000)-15 b FV(!)83 b Gb(\025)p
F4(z.)43 b(id)g(z)907 1471 y F5(6\000)-15 b FV(!)450
1658 y Gd(Some)23 b(authors)g(use)g(the)h(terms)f(\223r)o(eduction\224)
e(and)i(\223evaluation\224)f(synonymously)-9 b(.)35 b(Others)450
1757 y(use)27 b(\223evaluation\224)g(only)h(for)f(strategies)g(that)g
(involve)h(some)g(notion)h(of)e(\223value\224)f(\(call)h(by)450
1857 y(name)21 b(and)f(call)g(by)h(value\),)f(and)g(\223r)o
(eduction\224)f(for)i(nondeterministic)h(r)o(elations.)575
1957 y(For)k(most)h(of)f(the)g(development)g(of)g(type)g(systems)h(and)
f(their)g(pr)o(operties,)g(the)h(choice)450 2056 y(of)d(r)o(eduction)f
(strategy)g(makes)h(little)g(dif)o(fer)o(ence.)32 b(The)24
b(typing)g(issues)g(that)g(arise,)g(and)f(the)450 2156
y(techniques)32 b(used)f(to)g(addr)o(ess)f(them,)k(ar)o(e)29
b(much)j(the)f(same)g(for)g(all)f(the)i(strategies.)56
b(For)450 2255 y(the)26 b(r)o(est)g(of)g(this)g(book,)i(we'll)f(use)f
(call)f(by)i(value,)f(which)h(will)g(make)f(it)g(easier)f(to)i(discuss)
450 2355 y(extensions)22 b(such)f(as)f(r)o(efer)o(ences)f(\(Chapter)g
(1)-5 b(1\))20 b(and)h(exceptions)g(\(Chapter)e(10\).)450
2639 y Gj(4.2)119 b(Programming)31 b(in)e(the)h(Lambda-Calculus)450
2828 y Gd(The)17 b(lambda-calculus)e(is)j(much)f(mor)o(e)g(powerful)g
(than)g(its)g(tiny)h(de\002nition)g(might)g(suggest.)450
2927 y(T)-8 b(o)28 b(illustrate)f(this)i(point,)g(we)f(develop)f(a)g
(number)g(of)h(standar)o(d)e(examples)h(of)g(pr)o(ogram-)450
3027 y(ming)33 b(in)f(the)g(lambda-calculus.)58 b(These)31
b(examples)h(ar)o(e)e(not)j(intended)e(to)i(suggest)f(that)450
3127 y(the)21 b(lambda-calculus)e(should)i(be)f(taken)g(as)h(a)f
(full-blown)h(pr)o(ogramming)f(language)h(in)g(its)450
3226 y(own)h(right\227most)h(full-blown)f(languages)f(pr)o(ovide)g
(clear)o(er)e(and)i(mor)o(e)g(ef)o(\002cient)g(ways)g(of)450
3326 y(accomplishing)26 b(the)f(same)f(tasks\227but)h(rather)f(as)h
(warm-up)f(exer)o(cises)f(to)i(get)g(the)g(feel)f(of)450
3426 y(the)d(system.)575 3525 y(As)15 b(a)g(\002rst)h(example,)g(note)g
(that)g(ther)o(e)f(is)h(no)h(built-in)f(pr)o(ovision)g(in)h(the)f
(lambda-calculus)450 3625 y(for)25 b(multi-ar)o(gument)g(functions.)40
b(Of)26 b(course,)g(this)g(would)g(not)g(be)f(har)o(d)f(to)i(add,)f
(but)g(it)h(is)450 3724 y(easy)e(to)h(achieve)f(the)h(same)g(ef)o(fect)
e(using)i Ge(higher)o(-order)e(functions)h Gd(that)g(yield)h(functions)
450 3824 y(as)f(r)o(esults.)37 b(Suppose)24 b(that)h
F4(s)f Gd(is)h(a)f(term)h(involving)h(two)f(fr)o(ee)e(variables)g
F4(x)i Gd(and)f F4(y)g Gd(and)g(that)450 3924 y(we)c(want)g(to)h(write)
f(a)g(function)h F4(f)f Gd(that,)g(for)g(each)f(pair)h
F4(\(p,q\))e Gd(of)i(ar)o(guments,)g(yields)g(the)g(r)o(e-)450
4023 y(sult)g(of)g(substituting)h F4(p)e Gd(for)h F4(x)f
Gd(and)g F4(q)g Gd(for)h F4(y)f Gd(in)h F4(s)p Gd(.)25
b(Instead)19 b(of)h(writing)h F4(f)43 b(=)g Gb(\025)p
F4(\(x,y\).s)m Gd(,)20 b(as)f(we)450 4123 y(might)24
b(in)f(a)f(higher)o(-level)g(pr)o(ogramming)h(language,)g(we)f(write)h
F4(f)43 b(=)g Gb(\025)p F4(x.)p Gb(\025)p F4(y.s)n Gd(.)32
b(That)22 b(is,)h F4(f)450 4223 y Gd(is)h(a)g(function)g(that,)g(given)
h(a)e(value)g F4(p)g Gd(for)h F4(x)p Gd(,)g(yields)g(a)f(function)i
(that,)f(given)g(a)g(value)f F4(q)g Gd(for)450 4322 y
F4(y)p Gd(,)c(yields)g(the)h(desir)o(ed)e(r)o(esult.)24
b(W)-8 b(e)20 b(then)f(apply)g F4(f)g Gd(to)h(its)f(ar)o(guments)g(one)
h(at)f(a)g(time,)g(writing)450 4422 y F4(\(f)43 b(p)g(q\))o
Gd(,)24 b(which)h(r)o(educes)d(to)i F4(\(\()p Gb(\025)p
F4(y.)o F0(f)p F4(x)j F5(7)p FV(!)i F4(p)o F0(g)p F4(s)o(\))44
b(q\))22 b Gd(and)i(then)g(to)g F0(f)p F4(y)j F5(7)p
FV(!)i F4(q)p F0(gf)p F4(x)21 b F5(7)p FV(!)i F4(p)p
F0(g)p F4(s)o Gd(.)34 b(This)450 4521 y(transformation)d(of)h(multi-ar)
o(gument)f(functions)h(into)g(higher)o(-or)o(der)d(functions)j(is)g
(often)450 4621 y(called)24 b Ge(Currying)h Gd(after)e(its)i
(popularizer)-6 b(,)24 b(Haskell)h(Curry)-9 b(.)37 b(\(It)24
b(was)h(actually)f(invented)h(by)450 4721 y(Fr)o(ege.\))575
4820 y(Another)d(language)g(featur)o(e)e(that)j(can)f(easily)g(be)g
(encoded)g(in)g(the)h(lambda-calculus)e(is)450 4920 y(boolean)g(values)
f(and)h(conditionals.)26 b(De\002ne)21 b(the)g(terms)g
F4(tru)f Gd(and)g F4(fls)g Gd(as)g(follows:)p eop
%%Page: 47 48
47 47 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(47)616 683 y FT(tru)40 b(=)f FM(\025)p FT(t.)h
FM(\025)p FT(f.)f(t;)616 774 y(fls)h(=)f FM(\025)p FT(t.)h
FM(\025)p FT(f.)f(f;)575 940 y Gd(The)c(only)h(way)f(to)h
(\223interact\224)d(with)j(combinators)g(is)g(by)f(applying)g(them)h
(to)g(other)450 1040 y(terms.)64 b(For)33 b(example,)j(we)d(can)h(use)f
(application)g(to)h(de\002ne)f(a)g(combinator)h F4(test)e
Gd(with)450 1140 y(the)26 b(pr)o(operty)e(that)i F4(test)42
b(b)h(m)g(n)25 b Gd(r)o(educes)f(to)i F4(m)f Gd(when)h
F4(b)32 b FY(=)f F4(tru)24 b Gd(and)h(r)o(educes)f(to)i
F4(n)f Gd(when)450 1239 y F4(b)e FY(=)f F4(fls)o Gd(.)616
1397 y FT(test)40 b(=)g FM(\025)p FT(l.)f FM(\025)p FT(m.)g
FM(\025)p FT(n.)h(l)f(m)h(n;)450 1563 y Gd(The)30 b F4(test)f
Gd(combinator)i(does)f(not)h(actually)e(do)i(much:)45
b F4(\(test)c(b)i(m)g(n\))30 b Gd(just)h(r)o(educes)e(to)450
1663 y F4(\(b)43 b(m)g(n\))o Gd(.)36 b(In)24 b(ef)o(fect,)f(the)i
(boolean)f(value)g F4(b)g Gd(itself)g(is)h(the)f(conditional:)33
b(it)25 b(takes)e(two)i(ar)o(gu-)450 1762 y(ments)20
b(and)e(chooses)j(the)e(\002rst)g(\(if)g(it)g(is)h F4(tru)o
Gd(\))e(or)i(the)f(second)g(\(if)g(it)g(is)h F4(fls)n
Gd(\).)25 b(For)19 b(example,)g(the)450 1862 y(term)i
F4(\(test)41 b(tru)i(m)g(n\))20 b Gd(r)o(educes)f(as)i(follows:)909
2030 y F4(test)42 b(tru)g(m)h(n)728 2130 y FY(=)118 b
F4(\()p Gb(\025)p F4(l.)42 b Gb(\025)p F4(m.)h Gb(\025)p
F4(n.)g(l)g(m)g(n\))g(tru)p 909 2150 1007 4 v 42 w(m)g(n)83
b Gd(by)21 b(de\002nition)692 2229 y F5(\000)-14 b FV(!)83
b F4(\()p Gb(\025)p F4(m.)42 b Gb(\025)p F4(n.)h(tru)f(m)h(n\))g(m)p
909 2249 831 4 v 43 w(n)346 b Gd(r)o(educing)20 b(the)h(underlined)f(r)
o(edex)692 2329 y F5(\000)-14 b FV(!)83 b F4(\()p Gb(\025)p
F4(n.)42 b(tru)h(m)g(n\))g(n)p 909 2349 656 4 v 608 w
Gd(r)o(educing)20 b(the)h(underlined)f(r)o(edex)692 2428
y F5(\000)-14 b FV(!)83 b F4(tru)42 b(m)h(n)959 b Gd(r)o(educing)20
b(the)h(underlined)f(r)o(edex)728 2528 y FY(=)118 b F4(\()p
Gb(\025)p F4(t.)p Gb(\025)p F4(f.t\))41 b(m)p 909 2548
483 4 v 43 w(n)694 b Gd(by)21 b(de\002nition)692 2628
y F5(\000)-14 b FV(!)83 b F4(\()p Gb(\025)p F4(f.)42
b(m\))h(n)p 909 2648 394 4 v 870 w Gd(r)o(educing)20
b(the)h(underlined)f(r)o(edex)692 2727 y F5(\000)-14
b FV(!)83 b F4(m)1220 b Gd(r)o(educing)20 b(the)h(underlined)f(r)o
(edex)450 2909 y(W)-8 b(e)21 b(can)f(also)h(write)g(boolean)g
(operators)g(like)g(logical)g(conjunction)i(as)d(functions:)616
3067 y FT(and)40 b(=)f FM(\025)p FT(b.)h FM(\025)p FT(c.)f(b)h(c)f
(fls;)450 3233 y Gd(That)21 b(is,)h F4(and)f Gd(is)h(a)f(function)i
(that,)e(given)h(two)h(boolean)f(ar)o(guments)f F4(b)g
Gd(and)g F4(c)p Gd(,)h(r)o(eturns)f Gb(c)h Gd(if)f F4(b)450
3332 y Gd(is)h F4(tru)e Gd(or)i F4(fls)e Gd(if)h F4(b)g
Gd(is)h F4(fls)o Gd(;)g(thus)g F4(\(and)42 b(b)h(c\))20
b Gd(yields)i F4(tru)e Gd(if)i(both)g F4(b)f Gd(and)g
F4(c)g Gd(ar)o(e)f F4(tru)g Gd(and)h F4(fls)450 3432
y Gd(if)g(either)f F4(b)h Gd(or)f F4(c)h Gd(is)g F4(fls)o
Gd(.)616 3590 y FT(and)40 b(tru)g(tru;)529 3713 y FS(I)616
3723 y FT(\()p FM(\025)p FT(t.)g FM(\025)p FT(f.)f(t\))616
3898 y(and)h(tru)g(fls;)529 4038 y FS(I)616 4048 y FT(\()p
FM(\025)p FT(t.)g FM(\025)p FT(f.)f(f\))616 4222 y(and)h(fls)g(tru;)529
4362 y FS(I)616 4372 y FT(\()p FM(\025)p FT(t.)g FM(\025)p
FT(f.)f(f\))616 4547 y(and)h(fls)g(fls;)529 4687 y FS(I)616
4697 y FT(\()p FM(\025)p FT(t.)g FM(\025)p FT(f.)f(f\))450
4879 y Ge(4.2.1)19 b(Exercise:)39 b Gd(De\002ne)21 b(logical)g
F4(or)f Gd(and)g F4(not)g Gd(functions.)1076 b FZ(2)p
eop
%%Page: 48 49
48 48 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(48)575 683 y(Using)21 b(booleans,)g(we)g(can)f(encode)g(pairs)
h(of)g(values)f(as)g(lambda-terms.)25 b(De\002ne:)616
827 y FT(pair)40 b(=)g FM(\025)p FT(f.)p FM(\025)p FT(s.)p
FM(\025)p FT(b.)f(b)h(f)f(s;)616 918 y(fst)h(=)f FM(\025)p
FT(p.)h(p)f(tru;)616 1010 y(snd)h(=)f FM(\025)p FT(p.)h(p)f(fls;)450
1162 y Gd(That)22 b(is,)i F4(\(pair)41 b(m)i(n\))22 b
Gd(is)h(a)g(function)g(that,)g(when)g(applied)f(to)h(a)f(boolean)h
F4(b)p Gd(,)g(applies)f F4(b)g Gd(to)h F4(m)450 1262
y Gd(and)g F4(n)o Gd(.)33 b(By)24 b(the)f(de\002nition)h(of)g
(booleans,)g(this)g(application)f(yields)g F4(m)g Gd(if)g
F4(b)g Gd(is)h F4(tru)e Gd(and)g F4(n)h Gd(if)g F4(b)450
1361 y Gd(is)17 b F4(fls)o Gd(,)g(so)h(the)f(\002rst)g(and)f(second)h
(pr)o(ojection)g(functions)h F4(fst)e Gd(and)g F4(snd)g
Gd(can)g(be)h(implemented)450 1461 y(simply)g(by)f(supplying)g(the)g
(appr)o(opriate)e(boolean.)24 b(T)-8 b(o)17 b(check)e(that)h
F4(\(fst)42 b(\(pair)g(m)h(n\)\))22 b F5(\000)-15 b FV(!)3473
1431 y FX(\003)450 1560 y F4(m)p Gd(,)20 b(calculate)g(as)g(follows:)
884 1717 y F4(fst)43 b(\(pair)e(m)i(n\))684 1817 y FY(=)137
b F4(fst)43 b(\()o(\()p Gb(\025)p F4(f.)g Gb(\025)p F4(s.)f
Gb(\025)p F4(b.)h(b)g(f)g(s\))g(m)p 1102 1837 920 4 v
43 w(n\))83 b Gd(by)20 b(de\002nition)649 1916 y F5(\000)-15
b FV(!)102 b F4(fst)43 b(\()o(\()p Gb(\025)p F4(s.)g
Gb(\025)p F4(b.)f(b)i(m)f(s\))g(n)p 1102 1936 744 4 v
-1 w(\))346 b Gd(r)o(educing)20 b(the)h(underlined)f(r)o(edex)649
2016 y F5(\000)-15 b FV(!)102 b F4(fst)43 b(\()p Gb(\025)p
F4(b.)f(b)h(m)g(n\))696 b Gd(r)o(educing)20 b(the)h(underlined)f(r)o
(edex)684 2116 y FY(=)137 b F4(\()p Gb(\025)p F4(p.)43
b(p)g(tru\))f(\()p Gb(\025)p F4(b.)g(b)h(m)h(n\))p 884
2147 1006 4 v 345 w Gd(by)20 b(de\002nition)649 2220
y F5(\000)-15 b FV(!)102 b F4(\()p Gb(\025)p F4(b.)43
b(b)g(m)g(n\))g(tru)p 884 2241 656 4 v 695 w Gd(r)o(educing)20
b(the)h(underlined)f(r)o(edex)649 2320 y F5(\000)-15
b FV(!)102 b F4(tru)43 b(m)g(n)1046 b Gd(r)o(educing)20
b(the)h(underlined)f(r)o(edex)629 2420 y F5(\000)-14
b FV(!)763 2389 y FX(\003)884 2420 y F4(m)1308 b Gd(as)20
b(befor)o(e.)575 2584 y(The)j(encoding)g(of)g(numbers)h(as)e
(lambda-terms)g(is)i(only)g(slightly)g(mor)o(e)f(intricate)g(than)450
2684 y(what)e(we)g(have)f(just)h(seen.)26 b(De\002ne)21
b(the)g Ge(Church)f(numerals)f F4(c)2466 2696 y F1(0)2507
2684 y Gd(,)h F4(c)2592 2696 y F1(1)2633 2684 y Gd(,)g
F4(c)2718 2696 y F1(2)2758 2684 y Gd(,)h(etc.,)f(as)g(follows:)616
2828 y FT(c)655 2837 y FL(0)732 2828 y FT(=)40 b FM(\025)p
FT(s.)f FM(\025)p FT(z.)g(z;)616 2919 y(c)655 2928 y
FL(1)732 2919 y FT(=)h FM(\025)p FT(s.)f FM(\025)p FT(z.)g(s)h(z;)616
3010 y(c)655 3019 y FL(2)732 3010 y FT(=)g FM(\025)p
FT(s.)f FM(\025)p FT(z.)g(s)h(\(s)f(z\);)616 3102 y(c)655
3111 y FL(3)732 3102 y FT(=)h FM(\025)p FT(s.)f FM(\025)p
FT(z.)g(s)h(\(s)f(\(s)h(z\)\);)616 3193 y(c)655 3202
y FL(4)732 3193 y FT(=)g FM(\025)p FT(s.)f FM(\025)p
FT(z.)g(s)h(\(s)f(\(s)h(\(s)g(z\)\)\);)616 3284 y(etc.)450
3437 y Gd(That)30 b(is,)j(each)d(number)g Gb(n)h Gd(is)f(r)o(epr)o
(esented)f(by)h(a)g(combinator)h F4(c)2605 3449 y F1(n)2687
3437 y Gd(that)f(takes)g(two)h(ar)o(gu-)450 3536 y(ments,)24
b F4(s)e Gd(and)h F4(z)f Gd(\(for)h(\223successor)6 b(\224)22
b(and)g(\223zer)o(o\224\),)f(and)i(applies)f F4(s)p Gd(,)h
Gb(n)g Gd(times,)h(to)f F4(z)p Gd(.)32 b(As)22 b(with)450
3636 y(booleans)g(and)f(pairs,)g(this)h(encoding)g(makes)f(numbers)h
(into)g(active)f(entities:)27 b(the)22 b(number)450 3735
y Gb(n)c Gd(is)h(r)o(epr)o(esented)c(by)j(a)g(function)h(that)f(does)g
(something)h Gb(n)g Gd(times\227a)f(kind)g(of)g(active)f(unary)450
3835 y(numeral.)575 3935 y(W)-8 b(e)19 b(can)g(de\002ne)g(some)g
(common)i(arithmetic)e(operations)h(on)f(Chur)o(ch)g(numerals)g(as)g
(fol-)450 4034 y(lows:)616 4178 y FT(plus)40 b(=)g FM(\025)p
FT(m.)f FM(\025)p FT(n.)g FM(\025)p FT(s.)h FM(\025)p
FT(z.)f(m)h(s)f(\(n)h(s)f(z\);)616 4270 y(times)h(=)g
FM(\025)p FT(m.)f FM(\025)p FT(n.)h(m)f(\(plus)h(n\))g(c)1719
4279 y FL(0)1757 4270 y FT(;)450 4422 y Gd(Her)o(e,)17
b F4(plus)f Gd(is)i(a)f(combinator)i(that)e(takes)h(two)g(Chur)o(ch)g
(numerals,)g F4(m)f Gd(and)g F4(n)p Gd(,)h(as)g(ar)o(guments,)450
4521 y(and)i(yields)h(another)f(Chur)o(ch)h(numeral\227i.e.,)e(a)i
(function)g(that)f(accepts)g(ar)o(guments)g F4(z)g Gd(and)450
4621 y F4(s)p Gd(,)i(applies)h F4(s)f Gd(iterated)f Gb(n)i
Gd(times)g(to)g F4(z)g Gd(\(by)f(passing)h F4(s)f Gd(and)g
F4(z)h Gd(as)f(ar)o(guments)g(to)h F4(n)p Gd(\),)f(and)h(then)450
4721 y(applies)d F4(s)h Gd(iterated)e Gb(m)i Gd(mor)o(e)g(times)g(to)g
(the)g(r)o(esult.)575 4820 y(The)i(de\002nition)i(of)f
F4(times)e Gd(uses)i(another)g(trick:)32 b(since)25 b
F4(plus)d Gd(takes)i(its)g(ar)o(guments)g(one)450 4920
y(at)31 b(a)g(time,)j(applying)d(it)h(to)f(just)i(one)e(ar)o(gument)g
F4(n)g Gd(yields)g(the)h(function)g(that)f(adds)g F4(n)g
Gd(to)p eop
%%Page: 49 50
49 49 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(49)450 683 y(whatever)23 b(ar)o(gument)g(it)h(is)f(given.)34
b(Passing)25 b(this)f(function)g(as)f(the)h(second)g(ar)o(gument)f(to)g
F4(m)450 783 y Gd(and)16 b F4(c)651 795 y F1(0)708 783
y Gd(as)h(the)g(\002rst)g(ar)o(gument)f(means)h(\223apply)f(the)h
(function)h(that)e(adds)g Gb(n)h Gd(to)h(its)f(ar)o(gument,)450
882 y(iterated)j Gb(m)g Gd(times,)h(to)h(zer)o(o,\224)c(i.e.,)i
(\223add)g(together)h Gb(m)f Gd(copies)h(of)g F4(n)p
Gd(.\224)450 1065 y Ge(4.2.2)e(Exercise)f([Recommended]:)38
b Gd(De\002ne)17 b(a)g(similar)g(term)g(for)f(calculating)h(the)g
(successor)450 1165 y(of)k(a)f(number)-6 b(.)26 b(Solution)21
b(on)h(page)e(286.)1669 b FZ(2)450 1347 y Ge(4.2.3)19
b(Exercise:)39 b Gd(De\002ne)28 b(a)f(similar)h(term)g(for)g(raising)g
(one)g(number)g(to)g(the)g(power)g(of)g(an-)450 1447
y(other)-6 b(.)2736 b FZ(2)575 1629 y Gd(T)-8 b(o)24
b(test)h(whether)f(a)g(Chur)o(ch)g(numeral)g(is)h(zer)o(o,)e(we)i(must)
f(apply)g(it)h(to)f(a)g(pair)g(of)g(terms)450 1729 y
F4(zz)30 b Gd(and)g F4(ss)g Gd(such)h(that)g(applying)g
F4(ss)f Gd(to)h F4(zz)f Gd(one)h(or)g(mor)o(e)g(times)g(yields)g
F4(fls)o Gd(,)i(while)e(not)450 1829 y(applying)24 b(it)g(at)f(all)g
(yields)h F4(tru)n Gd(.)34 b(Clearly)-9 b(,)23 b(we)h(should)g(take)f
F4(zz)g Gd(to)h(be)f(just)h F4(tru)o Gd(.)34 b(For)24
b F4(ss)o Gd(,)g(we)450 1928 y(use)d(a)f(function)i(that)e(thr)o(ows)h
(away)g(its)g(ar)o(gument)f(and)g(always)h(r)o(eturns)f
F4(fls)o Gd(.)616 2086 y FT(iszro)40 b(=)g FM(\025)p
FT(m.)f(m)h(\()p FM(\025)p FT(x.)f(fls\))h(tru;)450 2252
y Gd(Surprisingly)-9 b(,)27 b(it)e(is)h(quite)g(a)g(bit)f(mor)o(e)g
(dif)o(\002cult)g(to)h(subtract)f(using)i(Chur)o(ch)e(numerals.)40
b(It)450 2352 y(can)17 b(be)g(done)h(using)g(the)g(following)h(rather)e
(tricky)g(\223pr)o(edecessor)f(function,\224)i(which,)h(given)450
2451 y F4(c)494 2463 y F1(0)555 2451 y Gd(as)h(ar)o(gument,)g(r)o
(eturns)h F4(c)1380 2463 y F1(0)1441 2451 y Gd(and,)f(given)i
F4(c)1893 2463 y F1(i)p F2(+)p F1(1)2012 2451 y Gd(,)e(r)o(eturns)h
F4(c)2382 2463 y F1(i)2413 2451 y Gd(:)616 2609 y FT(zz)40
b(=)f(pair)h(c)1047 2618 y FL(0)1124 2609 y FT(c)1163
2618 y FL(0)1201 2609 y FT(;)616 2700 y(ss)g(=)f FM(\025)p
FT(p.)h(pair)g(\(snd)g(p\))f(\(plus)i(c)1756 2709 y FL(1)1833
2700 y FT(\(snd)f(p\)\);)616 2792 y(prd)g(=)f FM(\025)p
FT(m.)h(fst)g(\(m)f(ss)h(zz\);)450 2958 y Gd(This)27
b(de\002nition)h(works)g(by)f(using)g F4(m)g Gd(as)f(a)h(function)g(to)
g(apply)g Gb(m)g Gd(copies)g(of)f(the)h(function)450
3057 y F4(ss)e Gd(to)i(the)f(starting)h(value)f F4(zz)o
Gd(.)42 b(Each)25 b(copy)i(of)f F4(ss)g Gd(takes)g(a)f(pair)h(of)g
(numerals)g F4(pair)42 b(c)3302 3069 y F1(i)3377 3057
y F4(c)3421 3069 y F1(j)450 3157 y Gd(as)20 b(its)h(ar)o(gument)f(and)g
(yields)g F4(\(pair)42 b(c)1738 3169 y F1(j)1812 3157
y F4(c)1855 3169 y F1(j)p F2(+)p F1(1)1972 3157 y F4(\))20
b Gd(as)g(its)h(r)o(esult.)k(So)20 b(applying)h F4(ss)e
Gb(m)i Gd(times)g(to)450 3257 y F4(\(pair)42 b(c)755
3269 y F1(0)839 3257 y F4(c)883 3269 y F1(0)923 3257
y F4(\))22 b Gd(yields)h F4(\(pair)41 b(c)1537 3269 y
F1(0)1621 3257 y F4(c)1664 3269 y F1(0)1705 3257 y F4(\))22
b Gd(when)h Gb(m)j FY(=)f Gb(0)e Gd(and)f F4(\(pair)41
b(c)2721 3269 y F1(m)p F2(-)p F1(1)2920 3257 y F4(c)2963
3269 y F1(m)3031 3257 y F4(\))22 b Gd(when)h F4(m)f Gd(is)450
3356 y(positive.)k(In)21 b(both)g(cases,)f(the)h(pr)o(edecessor)f(of)g
F4(m)h Gd(is)g(found)g(in)g(the)g(\002rst)g(component.)450
3539 y Ge(4.2.4)e(Exercise:)554 3705 y Gd(1.)41 b(Use)20
b F4(prd)f Gd(to)j(de\002ne)e(a)g(subtraction)h(function.)554
3871 y(2.)41 b(How)25 b(many)g(steps)g(of)f(evaluation)h(\(as)f(a)g
(function)h(of)g Gb(n)p Gd(\))f(ar)o(e)g(r)o(equir)o(ed)f(to)i
(calculate)658 3971 y(the)20 b(r)o(esult)h(of)f F4(\(prd)42
b(c)1377 3983 y F1(n)1428 3971 y F4(\))p Gd(?)1885 b
FZ(2)450 4153 y Ge(4.2.5)19 b(Exercise:)39 b Gd(W)-6
b(rite)23 b(a)f(function)i F4(equal)d Gd(that)i(tests)h(two)g(numbers)f
(for)g(equality)h(and)e(r)o(e-)450 4253 y(turns)f(a)f(boolean.)26
b(For)21 b(example,)616 4411 y FT(equal)40 b(c)890 4420
y FL(3)968 4411 y FT(c)1007 4420 y FL(3)1044 4411 y FT(;)529
4534 y FS(I)616 4544 y FT(\()p FM(\025)p FT(t.)g FM(\025)p
FT(f.)f(t\))616 4719 y(equal)h(c)890 4728 y FL(3)968
4719 y FT(c)1007 4728 y FL(2)1044 4719 y FT(;)529 4859
y FS(I)616 4869 y FT(\()p FM(\025)p FT(t.)g FM(\025)p
FT(f.)f(f\))p eop
%%Page: 50 51
50 50 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(50)450 683 y(Solution)22 b(on)f(page)f(287.)2156
b FZ(2)575 859 y Gd(Other)31 b(common)h(datatypes)e(like)i(lists,)i(tr)
o(ees,)f(arrays,)f(and)f(variant)f(r)o(ecor)o(ds)g(can)g(be)450
958 y(encoded)20 b(using)i(similar)f(techniques.)450
1134 y Ge(4.2.6)e(Exercise)f([Homework]:)41 b F7(\(Due)21
b(on)h(Feb.)28 b(8.\))f Gd(Build)21 b(an)h(encoding)g(of)f(lists)h(in)g
(the)g(pur)o(e)422 b FP(\()450 1233 y Gd(lambda-calculus)25
b(by)i(de\002ning)g(a)g(constant)g F4(nil)e Gd(\(the)i(empty)g(list\))f
(and)h(operations)g F4(cons)450 1333 y Gd(\(for)g(constr)o(ucting)h(a)f
(list)h(fr)o(om)e(a)h(new)h(head)e(element)i(and)e(an)h(old)h(list\),)g
F4(head)e Gd(and)h F4(tail)450 1433 y Gd(\(for)20 b(extracting)g(the)h
(parts)g(of)f(a)h(list\),)f(and)h F4(isnull)d Gd(\(for)i(testing)i
(whether)f(a)f(list)h(is)g(empty\).)575 1532 y(One)d(straightforwar)o
(d)g(way)g(to)h(do)g(this)g(is)g(to)g(generalize)f(the)h(encoding)g(of)
f(numbers)h(as)450 1632 y(follows.)27 b(A)20 b(list)h(is)g(r)o(epr)o
(esented)d(by)j(a)f(function)i(that)e(takes)g(two)i(ar)o(guments,)e
F4(hh)g Gd(and)g F4(tt)o Gd(.)25 b(If)450 1732 y(the)d(list)h(is)g
(empty)-9 b(,)22 b(this)h(function)g(simply)h(r)o(eturns)d
F4(tt)o Gd(.)31 b(On)22 b(the)h(other)f(hand,)h(if)f(the)g(list)h(has)
450 1831 y(head)f F4(h)g Gd(and)h(tail)f F4(t)p Gd(,)h(the)g(function)g
(calls)g F4(hh)o Gd(,)g(passing)g(it)g F4(h)g Gd(and)f
F4(\(t)43 b(hh)g(tt\))21 b Gd(as)i(parameters.)450 1931
y(\(Ther)o(e)g(ar)o(e)f(other)i(ways)g(of)g(encoding)h(lists)f(besides)
g(this)h(one.)35 b(Y)-8 b(ou)25 b(may)f(enjoy)h(trying)g(to)450
2030 y(\002nd)c(another)-6 b(.\))25 b(Solution)d(on)f(page)f(287.)1635
b FZ(2)575 2206 y Gd(Recall)17 b(that)h(a)f(term)h(that)f(cannot)h
(take)g(a)f(step)g(under)h(the)g(evaluation)f(r)o(elation)g(is)h(said)g
(to)450 2306 y(be)23 b(in)g Ge(normal)f(form)p Gd(.)33
b(Inter)o(estingly)-9 b(,)24 b(in)g(the)f(untyped)g(lambda-calculus,)f
(not)i(every)e(term)450 2405 y(can)e(be)h(evaluated)e(to)i(a)g(normal)g
(form.)k(For)c(example,)f(the)h Ge(divergent)e Gd(combinator)616
2557 y FT(omega)40 b(=)g(\()p FM(\025)p FT(x.)f(x)h(x\))g(\()p
FM(\025)p FT(x.)f(x)h(x\);)450 2718 y Gd(can)18 b(never)g(be)g(r)o
(educed)f(to)i(a)f(value.)24 b(It)19 b(contains)g(just)g(one)g(r)o
(edex,)e(and)h(r)o(educing)g(this)i(r)o(edex)450 2817
y(yields)h(exactly)f F4(omega)f Gd(again!)25 b(T)-8 b(erms)21
b(with)h(no)f(normal)g(form)g(ar)o(e)f(said)g(to)h Ge(diverge)p
Gd(.)575 2917 y(The)j F4(omega)f Gd(combinator)i(has)g(a)g(useful)f
(generalization)h(called)f(the)h Ge(\002xed-point)d(com-)450
3017 y(binator)i Gd(\(or)h Gb(Y)5 b Gd(-combinator\),)47
b(which)26 b(can)e(be)h(used)g(to)h(de\002ne)f(r)o(ecursive)e
(functions)k(such)450 3116 y(as)20 b F4(factorial)m Gd(.)961
3086 y FK(1)616 3268 y FT(fixedpoint)42 b(=)d FM(\025)p
FT(f.)g(\()p FM(\025)p FT(x.)h(f)f(\()p FM(\025)p FT(y.)h(\(x)g(x\))f
(y\)\))h(\()p FM(\025)p FT(x.)g(f)f(\()p FM(\025)p FT(y.)h(\(x)g(x\))f
(y\)\);)575 3429 y Gd(Suppose)32 b(we)h(want)g(to)g(write)g(a)g(r)o
(ecursive)e(function)j(de\002nition)g(of)f(the)g(form)g
F4(ff)44 b FY(=)450 3528 y F5(h)p F7(body)20 b(containing)g
F4(ff)p F5(i)p Gd(\227i.e.,)38 b(we)d(want)h(to)g(write)f(a)g
(de\002nition)h(wher)o(e)f(the)h(term)f(on)h(the)450
3628 y(right-hand)d(side)g(of)g(the)g FY(=)f Gd(uses)i(the)f(very)f
(function)i(that)f(we)g(ar)o(e)e(de\002ning,)37 b(as)32
b(in)i(the)450 3728 y(de\002nition)26 b(of)g F4(factorial)21
b Gd(on)26 b(page)f(42.)38 b(The)25 b(intention)i(is)e(that)g(the)h(r)o
(ecursive)e(de\002nition)450 3827 y(should)k(be)g(\223unr)o(olled\224)e
(at)h(the)h(point)g(wher)o(e)f(it)h(occurs;)j(for)c(example,)i(the)e
(de\002nition)i(of)450 3927 y F4(factorial)17 b Gd(would)k(intuitively)
h(be:)616 4079 y FT(if)40 b(n=0)g(then)g(1)616 4170 y(else)g(n)g(*)f
(\(if)h(n-1=0)g(then)h(1)1008 4262 y(else)f(\(n-1\))h(*)e(\(if)h
(\(n-2\)=0)h(then)f(1)1558 4353 y(else)g(\(n-2\))g(*)f(...\)\))p
450 4403 1200 4 v 540 4460 a FJ(1)570 4483 y F6(Note)24
b(that)f(this)h(is)h(a)f FI(call-by-value)j F6(\002xed)d(point)g
(combinator)-5 b(,)26 b(since)f(we)f(using)g(a)h(call-by-value)g(r)o
(eduction)450 4562 y(strategy)-7 b(.)19 b(The)d(simpler)h(call-by-name)
g(\002xed)g(point)f(combinator)658 4701 y FH(fixedpoint)1010
4709 y FL(n)1093 4701 y FH(=)35 b FG(\025)p FH(f.)h(\()p
FG(\025)p FH(x.)g(f)g(\(x)g(x\)\))g(\()p FG(\025)p FH(x.)g(f)f(\(x)h
(x\)\);)450 4841 y F6(is)17 b(useless)f(in)h(a)f(call-by-value)h
(setting,)f(since)g(an)g(expr)o(ession)h(like)g FH(fixedpoint)2547
4849 y FL(n)2630 4841 y FH(ff)g F6(always)g(diver)o(ges,)e(no)h(mat-)
450 4920 y(ter)g(what)h FH(ff)g F6(is.)p eop
%%Page: 51 52
51 51 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(51)450 683 y(This)16 b(ef)o(fect)e(can)i(be)f(achieved)g
(using)i F4(fixedpoint)11 b Gd(by)16 b(de\002ning)h F4(gg)22
b FY(=)h Gb(\025)p F4(f.)o F5(h)p F7(body)d(containing)g
F4(f)p F5(i)450 783 y Gd(and)g F4(ff)j FY(=)f F4(fixedpoint)40
b(gg)o Gd(.)26 b(For)21 b(example,)e(we)i(can)g(de\002ne)f(the)h
(factorial)f(function)h(by)616 940 y FT(gg)40 b(=)f FM(\025)p
FT(f.)h FM(\025)p FT(n.)891 1032 y(test)969 1123 y(\(iszro)h(n\))e(\()p
FM(\025)p FT(x.)h(c)1599 1132 y FL(1)1637 1123 y FT(\))f(\()p
FM(\025)p FT(x.)h(\(times)g(n)g(\(f)g(\(prd)g(n\)\)\)\))g(c)2855
1132 y FL(0)2893 1123 y FT(;)616 1214 y(factorial)h(=)f(fixedpoint)h
(gg;)450 1380 y Gd(W)-8 b(e)21 b(then)g(have:)616 1538
y FT(equal)40 b(\(factorial)i(c)1322 1547 y FL(3)1360
1538 y FT(\))d(c)1477 1547 y FL(6)1515 1538 y FT(;)529
1662 y FS(I)616 1672 y FT(\()p FM(\025)p FT(t.)h FM(\025)p
FT(f.)f(t\))450 1854 y Ge(4.2.7)19 b(Exercise)f([Quick)i(check]:)40
b Gd(Why)27 b(did)f(we)h(use)g F4(equal)e Gd(her)o(e)h(to)h(verify)f
(the)h(r)o(esult)f(r)o(e-)450 1954 y(turned)c(by)g F4(factorial)c
Gd(instead)k(of)g(just)g(computing)i(the)e(normal)g(form)g(of)g
F4(factorial)40 b(c)3409 1966 y F1(3)450 2054 y Gd(and)20
b(printing)i(it)f(out?)26 b(Solution)c(on)f(page)f(287.)1416
b FZ(2)450 2236 y Ge(4.2.8)19 b(Exercise)f([Recommended]:)38
b Gd(Use)30 b(the)h F4(fixedpoint)26 b Gd(combinator)32
b(and)e(the)g(encod-)450 2336 y(ing)22 b(of)g(lists)g(fr)o(om)g(Exer)o
(cise)e(4.2.6)g(to)i(write)f(a)h(function)g(that)g(sums)g(lists)h(of)e
(chur)o(ch)h(numer)o(-)450 2435 y(als.)j(Solution)d(on)g(page)e(288.)
2008 b FZ(2)450 2721 y Gj(4.3)119 b(Formalities)450 2910
y Gd(W)-8 b(e)24 b(now)h(consider)g(the)f(syntax)h(and)e(operational)h
(semantics)h(of)f(the)h(lambda-calculus)e(in)450 3010
y(mor)o(e)d(detail.)25 b(Most)c(of)g(the)g(str)o(uctur)o(e)f(we)h(need)
f(is)h(closely)h(analogous)f(to)g(what)g(we)g(saw)g(in)450
3110 y(Chapter)k(3.)41 b(However)-6 b(,)27 b(the)f(operation)h(of)f
(substituting)h(a)f(term)g(for)g(a)f(variable)g(involves)450
3209 y(some)c(surprising)h(subtleties.)450 3452 y F8(Syntax)450
3610 y Gd(As)d(in)h(Chapter)e(3,)h(the)g(abstract)f(grammar)h
(de\002ning)h(terms)f(should)h(be)f(r)o(ead)f(as)g(shorthand)450
3710 y(for)j(an)f(inductively)h(de\002ned)f(set)h(of)g(abstract)f
(syntax)h(tr)o(ees.)450 3892 y Ge(4.3.1)e(De\002nition)f([T)-9
b(erms]:)41 b Gd(Let)29 b F5(V)36 b Gd(be)29 b(a)g(countable)g(set)h
(of)f(variable)f(names.)52 b(The)30 b(set)f(of)450 3992
y(terms)21 b(is)g(the)g(smallest)g(set)g F5(T)42 b Gd(such)21
b(that)554 4158 y(1.)41 b F4(x)22 b F5(2)i(T)42 b Gd(for)20
b(every)g F4(x)j F5(2)g(V)7 b Gd(;)554 4324 y(2.)41 b(if)20
b F4(t)774 4336 y F1(1)837 4324 y F5(2)k(T)42 b Gd(and)20
b F4(x)j F5(2)g(V)7 b Gd(,)20 b(then)i Gb(\025)p F4(x.t)1768
4336 y F1(1)1832 4324 y F5(2)h(T)f Gd(;)554 4490 y(3.)41
b(if)20 b F4(t)774 4502 y F1(1)837 4490 y F5(2)k(T)42
b Gd(and)20 b F4(t)1208 4502 y F1(2)1271 4490 y F5(2)k(T)d
Gd(,)f(then)i F4(\(t)1729 4502 y F1(1)1813 4490 y F4(t)1857
4502 y F1(2)1897 4490 y F4(\))h F5(2)g(T)e Gd(.)1265
b FZ(2)575 4673 y Gd(The)19 b(size)h(of)f(a)g(term)h
F4(t)f Gd(can)h(be)f(de\002ned)g(exactly)g(as)h(we)g(did)f(for)g
(arithmetic)h(expr)o(essions)450 4772 y(in)g(De\002nition)h(3.2.9.)i
(Mor)o(e)c(inter)o(estingly)-9 b(,)20 b(we)g(can)f(give)g(a)h(simple)g
(inductive)f(de\002nition)i(of)450 4872 y(the)g(set)g(of)f(variables)g
(appearing)g(fr)o(ee)f(in)i(a)g(lambda-term.)p eop
%%Page: 52 53
52 52 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(52)450 683 y Ge(4.3.2)19 b(De\002nition:)39
b Gd(The)22 b(set)f(of)h Ge(free)f(variables)e Gd(of)j(a)f(term)g
F4(t)p Gd(,)h(written)g F7(FV)p FY(\()p F4(t)o FY(\))p
Gd(,)g(is)g(de\002ned)f(as)450 783 y(follows:)1303 941
y F7(FV)p FY(\()p F4(x)p FY(\))256 b(=)82 b F0(f)p F4(x)p
F0(g)1303 1041 y F7(FV)p FY(\()p Gb(\025)p F4(x.t)1617
1053 y F1(1)1657 1041 y FY(\))i(=)e F7(FV)q FY(\()p F4(t)2100
1053 y F1(1)2141 1041 y FY(\))19 b F0(n)f(f)p F4(x)o
F0(g)1303 1140 y F7(FV)p FY(\()p F4(t)1485 1152 y F1(1)1569
1140 y F4(t)1612 1152 y F1(2)1653 1140 y FY(\))88 b(=)82
b F7(FV)q FY(\()p F4(t)2100 1152 y F1(1)2141 1140 y FY(\))19
b F5([)f F7(FV)q FY(\()p F4(t)2447 1152 y F1(2)2488 1140
y FY(\))874 b FZ(2)450 1319 y Ge(4.3.3)19 b(Exercise:)39
b Gd(Give)23 b(a)g(detailed)g(pr)o(oof)f(that)i F0(j)p
F7(FV)o FY(\()p F4(t)p FY(\))p F0(j)k F5(\024)f F7(size)q
FY(\()p F4(t)p FY(\))c Gd(for)g(every)g(term)g F4(t)p
Gd(.)33 b(Solu-)450 1418 y(tion)22 b(on)f(page)f(288.)2319
b FZ(2)450 1660 y F8(Substitution)450 1819 y Gd(Dealing)32
b(car)o(efully)f(with)i(the)f(operation)g(of)g(substitution)h(r)o
(equir)o(es)e(some)i(work.)59 b(W)-8 b(e'll)450 1918
y(take)20 b(it)g(in)g(two)h(lar)o(ge)e(steps.)25 b(First)c(\(in)f(this)
h(section\),)f(we'll)g(discuss)h(the)f(basic)g(issues,)g(iden-)450
2018 y(tify)i(some)h(traps)f(for)g(the)h(unwary)-9 b(,)22
b(and)g(come)h(up)f(with)h(a)f(de\002nition)i(of)e(substitution)i(that)
450 2117 y(is)30 b(pr)o(ecise)f(enough)h(for)g(most)g(purposes.)52
b(In)30 b(Chapter)f(5)g(we'll)h(go)g(the)g(r)o(est)f(of)h(the)g(way)-9
b(,)450 2217 y(de\002ning)21 b(a)f(mor)o(e)g(r)o(e\002ned)f
(\223nameless\224)g(pr)o(esentation)h(of)g(terms)h(on)g(which)g
(substitution)h(is)450 2317 y(completely)27 b(formal.)42
b(The)27 b(r)o(eason)e(for)i(pr)o(esenting)f(both)h(is)g(that)f(the)h
(nameless)g(formula-)450 2416 y(tion)20 b(is)g(easier)e(to)h(implement)
h(corr)o(ectly)f(but)g(too)h(\002ddly)f(to)h(use)f(in)g(de\002nitions)i
(and)e(pr)o(oofs.)450 2516 y(Having)30 b(worked)f(it)h(out)g(in)g
(detail,)g(we)g(can)f(r)o(eturn)g(to)h(the)f(mor)o(e)h(comfortable,)h
(slightly)450 2616 y(informal)19 b(pr)o(esentation)f(developed)f(in)i
(this)g(section,)h(r)o(egar)o(ding)d(it)h(as)g(a)g(convenient)i(short-)
450 2715 y(hand)h(for)f(the)h(other)-6 b(.)575 2815 y(It)21
b(is)h(instr)o(uctive)g(to)g(arrive)f(at)g(the)g(corr)o(ect)g
(de\002nition)i(of)e(substitution)i(via)e(a)g(couple)h(of)450
2914 y(wr)o(ong)f(attempts.)k(First)d(of)o(f,)d(let's)i(try)g(the)g
(most)h(naive)e(possible)h(r)o(ecursive)f(de\002nition:)1009
3095 y F0(f)p F4(x)j F5(7)p FV(!)g F4(s)o F0(g)p F4(x)342
b FY(=)83 b F4(s)1009 3194 y F0(f)p F4(x)23 b F5(7)p
FV(!)g F4(s)o F0(g)p F4(y)342 b FY(=)83 b F4(y)767 b
Gd(if)21 b F4(x)h F5(6)p FY(=)h F4(y)1009 3294 y F0(f)p
F4(x)g F5(7)p FV(!)g F4(s)o F0(g)p F4(\()p Gb(\025)p
F4(y.t)1498 3306 y F1(1)1539 3294 y F4(\))82 b FY(=)h
Gb(\025)p F4(y.)43 b F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)p
F0(g)p F4(t)2300 3306 y F1(1)1009 3394 y F0(f)p F4(x)g
F5(7)p FV(!)g F4(s)o F0(g)p F4(\(t)1366 3406 y F1(1)1450
3394 y F4(t)1494 3406 y F1(2)1534 3394 y F4(\))87 b FY(=)c
F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)p F0(g)p F4(t)2124
3406 y F1(1)2185 3394 y F0(f)p F4(x)g F5(7)p FV(!)g F4(s)o
F0(g)p F4(t)2498 3406 y F1(2)450 3571 y Gd(This)e(de\002nition)h(works)
g(\002ne)f(for)f(most)i(examples.)j(For)c(instance,)g(it)g(gives)658
3734 y F0(f)p F4(x)h F5(7)p FV(!)h F4(\()p Gb(\025)p
F4(z.)42 b(z)h(w\))p F0(g)p F4(\()p Gb(\025)p F4(y.)e(x\))23
b FY(=)f F4(\()p Gb(\025)p F4(y.)p Gb(\025)p F4(z.)42
b(z)h(w\))o Gb(;)450 3897 y Gd(which)35 b(is)g(\002ne.)67
b(However)-6 b(,)37 b(if)e(we)f(ar)o(e)f(unlucky)i(with)h(our)e(choice)
h(of)f(bound)h(variable)450 3997 y(names,)21 b(the)g(de\002nition)g(br)
o(eaks)f(down.)26 b(For)21 b(example:)658 4159 y F0(f)p
F4(x)h F5(7)p FV(!)h F4(y)o F0(g)p F4(\()p Gb(\025)p
F4(x.x\))e FY(=)i Gb(\025)p F4(x.y)450 4322 y Gd(This)i(con\003icts)h
(with)f(the)g(basic)f(intuition)i(about)e(functional)h(abstractions)f
(that)h F7(the)f(names)450 4422 y(of)h(bound)g(variables)h(do)f(not)g
(matter)p Gd(\227the)g(identity)g(function)h(is)g(exactly)e(the)i(same)
f(whether)450 4521 y(we)20 b(write)g(it)g Gb(\025)p F4(x.x)f
Gd(or)h Gb(\025)p F4(y.y)f Gd(or)h Gb(\025)p F4(franz.franz)l
Gd(.)25 b(If)19 b(these)i(do)f(not)g(behave)g(exactly)f(the)h(same)450
4621 y(under)32 b(substitution,)37 b(then)c(they)g(will)h(not)f(behave)
f(the)h(same)f(under)g(r)o(eduction)h(either)-6 b(,)450
4721 y(which)22 b(seems)f(wr)o(ong.)575 4820 y(Clearly)-9
b(,)17 b(the)i(\002rst)g(mistake)f(that)h(we've)f(made)g(in)h(the)f
(naive)g(de\002nition)i(of)e(substitution)450 4920 y(is)33
b(that)f(we)h(have)f(not)h(distinguished)h(between)f
F7(fr)o(ee)g Gd(occurr)o(ences)e(of)i(a)f(variable)f
F4(x)h Gd(in)h(a)p eop
%%Page: 53 54
53 53 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(53)450 683 y(term)33 b F4(t)f Gd(\(which)h(should)h(get)e(r)o
(eplaced)f(during)i(substitution\))h(and)e F7(bound)h
Gd(ones,)j(which)450 783 y(should)c(not.)56 b(When)31
b(we)g(r)o(each)f(an)g(abstraction)h(binding)g(the)g(name)g
F4(x)f Gd(inside)h(of)g F4(t)p Gd(,)i(the)450 882 y(substitution)20
b(operation)g(should)f(stop.)26 b(This)19 b(leads)f(to)i(the)f(next)g
(attempt)f(at)h(a)f(de\002nition)i(of)450 982 y(substitution:)990
1136 y F0(f)p F4(x)i F5(7)p FV(!)h F4(s)o F0(g)p F4(x)342
b FY(=)83 b F4(s)990 1236 y F0(f)p F4(x)22 b F5(7)p FV(!)h
F4(s)o F0(g)p F4(y)342 b FY(=)83 b F4(y)807 b Gd(if)20
b F4(y)j F5(6)p FY(=)g F4(x)990 1386 y F0(f)p F4(x)f
F5(7)p FV(!)h F4(s)o F0(g)p F4(\()p Gb(\025)p F4(y.t)1478
1398 y F1(1)1519 1386 y F4(\))82 b FY(=)1791 1269 y FV(\014)1895
1335 y Gb(\025)p F4(y.)43 b(t)2114 1347 y F1(1)2652 1335
y Gd(if)15 b F4(y)23 b FY(=)g F4(x)1895 1435 y Gb(\025)p
F4(y.)43 b F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)p F0(g)p
F4(t)2384 1447 y F1(1)2652 1435 y Gd(if)15 b F4(y)23
b F5(6)p FY(=)g F4(x)990 1535 y F0(f)p F4(x)f F5(7)p
FV(!)h F4(s)o F0(g)p F4(\(t)1346 1547 y F1(1)1430 1535
y F4(t)1474 1547 y F1(2)1514 1535 y F4(\))87 b FY(=)c
F0(f)p F4(x)22 b F5(7)p FV(!)i F4(s)o F0(g)p F4(t)2104
1547 y F1(1)2188 1535 y F0(f)p F4(x)f F5(7)p FV(!)g F4(s)o
F0(g)p F4(t)2501 1547 y F1(2)450 1708 y Gd(This)28 b(is)g(better)-6
b(,)29 b(but)f(it)g(is)g(still)g(not)h(quite)f(right.)47
b(For)28 b(example,)g(consider)g(what)g(happens)450 1808
y(when)21 b(we)g(substitute)g(the)g(term)g F4(z)f Gd(for)h(the)g
(variable)e F4(x)i Gd(in)g(the)g(term)f Gb(\025)p F4(z.x)o
Gd(:)658 1967 y F0(f)p F4(x)i F5(7)p FV(!)h F4(z)o F0(g)p
F4(\()p Gb(\025)p F4(z.x\))e FY(=)i Gb(\025)p F4(z.z)450
2126 y Gd(This)k(time,)h(we)f(have)f(made)g(essentially)h(the)g
(opposite)h(mistake)e(as)h(in)g(the)g(pr)o(evious)f(un-)450
2226 y(fortunate)19 b(example:)k(we've)c(turned)g(the)g(constant)h
(function)f Gb(\025)p F4(z.x)f Gd(into)i(the)f(identity)g(func-)450
2326 y(tion!)39 b(Again,)26 b(this)f(occurr)o(ed)f(only)i(because)e(we)
h(happened)f(to)h(choose)h F4(z)e Gd(as)h(the)g(name)g(of)450
2425 y(the)c(bound)g(variable)e(in)j(the)f(constant)g(function,)g(so)h
(something)g(is)f(clearly)f(still)i(wr)o(ong.)575 2525
y(This)35 b(phenomenon)h(of)e(fr)o(ee)f(variables)g(in)i(a)f(term)h
F4(s)f Gd(becoming)h(bound)g(when)g F4(s)f Gd(is)450
2624 y(naively)f(substituted)h(into)g(a)e(term)h F4(t)g
Gd(containing)h(variable)e(binders)h(is)h(called)e Ge(variable)450
2724 y(capture)p Gd(.)26 b(T)-8 b(o)22 b(avoid)f(it,)g(we)g(need)g(to)h
(make)f(sur)o(e)g(that)g(the)h(bound)g(variable)e(names)h(of)g
F4(t)g Gd(ar)o(e)450 2824 y(kept)g(distinct)i(fr)o(om)e(the)g(fr)o(ee)f
(variable)h(names)g(of)h F4(s)p Gd(.)27 b(A)22 b(substitution)h
(operation)e(that)h(does)450 2923 y(this)h(corr)o(ectly)f(is)h(called)e
Ge(capture-avoiding)e(substitution)p Gd(.)28 b(This)23
b(is)g(almost)g(always)f(what)450 3023 y(is)28 b(meant)g(by)g(the)g
(unquali\002ed)h(term)e(\223substitution.\224)48 b(W)-8
b(e)28 b(can)g(achieve)f(this)h(by)g(adding)450 3123
y(another)21 b(side)f(condition)i(to)g(the)f(second)f(clause)h(of)g
(the)f(abstraction)h(case:)907 3277 y F0(f)p F4(x)h F5(7)p
FV(!)h F4(s)o F0(g)p F4(x)342 b FY(=)83 b F4(s)907 3376
y F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)o F0(g)p F4(y)342
b FY(=)83 b F4(y)807 b Gd(if)20 b F4(y)j F5(6)p FY(=)g
F4(x)907 3527 y F0(f)p F4(x)f F5(7)p FV(!)h F4(s)o F0(g)p
F4(\()p Gb(\025)p F4(y.t)1395 3539 y F1(1)1436 3527 y
F4(\))82 b FY(=)1708 3410 y FV(\014)1812 3476 y Gb(\025)p
F4(y.)43 b(t)2031 3488 y F1(1)2568 3476 y Gd(if)16 b
F4(y)23 b FY(=)g F4(x)1812 3576 y Gb(\025)p F4(y.)43
b F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)p F0(g)p F4(t)2301
3588 y F1(1)2568 3576 y Gd(if)16 b F4(y)23 b F5(6)p FY(=)g
F4(x)15 b Gd(and)g F4(y)32 b Gb(=)-51 b F5(2)23 b F7(FV)p
FY(\()p F4(s)p FY(\))907 3675 y F0(f)p F4(x)f F5(7)p
FV(!)h F4(s)o F0(g)p F4(\(t)1263 3687 y F1(1)1347 3675
y F4(t)1391 3687 y F1(2)1431 3675 y F4(\))87 b FY(=)c
F0(f)p F4(x)22 b F5(7)p FV(!)i F4(s)o F0(g)p F4(t)2021
3687 y F1(1)2105 3675 y F0(f)p F4(x)f F5(7)p FV(!)g F4(s)o
F0(g)p F4(t)2418 3687 y F1(2)575 3849 y Gd(W)-8 b(e)22
b(ar)o(e)f(almost)i(ther)o(e:)29 b(this)23 b(de\002nition)g(of)g
(substitution)h(does)f(the)f(right)h(thing)h F7(when)e(it)450
3949 y(does)i(anything)e(at)h(all)p Gd(.)35 b(The)24
b(pr)o(oblem)f(now)i(is)f(that)g(our)g(last)f(\002x)h(has)g(changed)f
(substitution)450 4048 y(into)h(a)g(partial)e(operation.)35
b(For)23 b(example,)h(the)g(new)g(de\002nition)g(does)g(not)g(give)g
(any)f(r)o(esult)450 4148 y(at)g(all)f(for)h F0(f)p F4(x)j
F5(7)p FV(!)i F4(y)43 b(z)o F0(g)p F4(\()p Gb(\025)p
F4(y.)f(x)i(y\))o Gd(:)30 b(the)23 b(bound)g(variable)f
F4(y)g Gd(of)h(the)h(term)e(being)i(substituted)450 4248
y(into)d(is)g(not)g(equal)f(to)h F4(x)o Gd(,)f(but)g(it)h(does)f
(appear)f(fr)o(ee)g(in)h F4(\(y)43 b(z\))o Gd(,)20 b(so)h(none)g(of)f
(the)h(clauses)f(of)g(the)450 4347 y(de\002nition)i(apply)-9
b(.)575 4447 y(One)20 b(common)i(\002x)e(for)g(this)h(last)f(pr)o
(oblem)g(in)g(the)h(type)f(systems)h(and)e(lambda-calculus)450
4546 y(literatur)o(e)26 b(is)i(to)g(work)h(with)f(terms)g(\223up)f(to)h
(r)o(enaming)f(of)h(bound)g(variables\224)e(\(or)h(\223up)h(to)450
4646 y(alpha-conversion,\224)20 b(in)h(Chur)o(ch's)g(terminology\):)450
4820 y Ge(4.3.4)e(Convention:)39 b Gd(T)-8 b(erms)27
b(that)f(dif)o(fer)e(only)j(in)g(the)f(names)g(of)g(bound)g(variables)f
(ar)o(e)g(in-)450 4920 y(ter)o(changeable)19 b(in)i(all)g(contexts.)
1886 b FZ(2)p eop
%%Page: 54 55
54 54 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(54)575 683 y(What)32 b(this)i(means)f(in)h(practice)e(is)h
(that)g(the)g(name)g(of)g(any)g(bound)g(variable)f(can)g(be)450
783 y(changed)27 b(to)g(another)g(name)g(\(consistently)i(making)e(the)
h(same)e(change)h(in)h(the)f(body\),)h(at)450 882 y(any)j(point)g(wher)
o(e)g(this)g(is)g(convenient.)57 b(For)31 b(example,)i(if)d(we)h(want)g
(to)g(calculate)f F0(f)p F4(x)41 b F5(7)p FV(!)450 982
y F4(y)i(z)p F0(g)p F4(\()p Gb(\025)p F4(y.)f(x)h(y\))o
Gd(,)26 b(we)f(\002rst)h(r)o(ewrite)e F4(\()p Gb(\025)p
F4(y.)42 b(x)i(y\))24 b Gd(as,)i(say)-9 b(,)25 b F4(\()p
Gb(\025)p F4(w.)43 b(x)g(w\))o Gd(.)c(W)-8 b(e)25 b(then)h(calculate)
450 1082 y F0(f)p F4(x)c F5(7)p FV(!)h F4(y)43 b(z)p
F0(g)p F4(\()p Gb(\025)p F4(w.)f(x)h(w\))o Gd(,)20 b(giving)h
F4(\()p Gb(\025)p F4(w.)43 b(y)g(z)g(w\))o Gd(.)25 b(This)c(r)o(enders)
e(the)h(substitution)i(operation)450 1181 y(\223as)15
b(good)i(as)e(total,\224)h(since)h(whenever)e(we)h(\002nd)g(ourselves)g
(about)g(to)g(apply)g(it)g(to)g(ar)o(guments)450 1281
y(for)23 b(which)i(it)e(is)h(unde\002ned,)g(we)f(can)g(r)o(ename)g(as)g
(necessary)-9 b(,)23 b(so)h(that)g(the)f(side)h(conditions)450
1380 y(ar)o(e)19 b(satis\002ed.)575 1480 y(Indeed,)34
b(having)e(adopted)f(this)i(convention,)k(we)32 b(can)g(formulate)f
(the)i(de\002nition)g(of)450 1580 y(substitution)25 b(a)f(little)g(mor)
o(e)f(tersely)-9 b(.)35 b(The)24 b(\002rst)g(clause)f(for)h
(abstractions)g(can)f(be)h(dr)o(opped,)450 1679 y(since)i(we)f(can)h
(always)f(assume)h(\(r)o(enaming)f(if)g(necessary\))g(that)h(the)f
(bound)h(variable)e F4(y)i Gd(is)450 1779 y(dif)o(fer)o(ent)d(fr)o(om)h
(both)h F4(x)g Gd(and)f(the)h(fr)o(ee)e(variables)h(of)g
F4(s)p Gd(.)37 b(This)26 b(yields)f(the)f(\002nal)h(form)g(of)g(the)450
1879 y(de\002nition.)450 2045 y Ge(4.3.5)19 b(De\002nition)f
([Substitution]:)689 2214 y F0(f)p F4(x)k F5(7)p FV(!)h
F4(s)p F0(g)p F4(x)342 b FY(=)82 b F4(s)689 2314 y F0(f)p
F4(x)22 b F5(7)p FV(!)h F4(s)p F0(g)p F4(y)342 b FY(=)82
b F4(y)790 b Gd(if)21 b F4(y)h F5(6)p FY(=)h F4(x)689
2414 y F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p F4(\()p
Gb(\025)p F4(y.t)1178 2426 y F1(1)1218 2414 y F4(\))83
b FY(=)f Gb(\025)p F4(y.)43 b F0(f)p F4(x)22 b F5(7)p
FV(!)i F4(s)o F0(g)p F4(t)1979 2426 y F1(1)2324 2414
y Gd(if)d F4(y)h F5(6)p FY(=)h F4(x)e Gd(and)f F4(y)32
b Gb(=)-51 b F5(2)23 b F7(FV)p FY(\()p F4(s)p FY(\))689
2513 y F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p F4(\(t)1045
2525 y F1(1)1130 2513 y F4(t)1173 2525 y F1(2)1214 2513
y F4(\))87 b FY(=)82 b F0(f)p F4(x)23 b F5(7)p FV(!)g
F4(s)o F0(g)p F4(t)1804 2525 y F1(1)1888 2513 y F0(f)p
F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p F4(t)2201 2525 y F1(2)3394
2513 y FZ(2)575 2696 y Gd(The)31 b(convention)i(about)e(implicit)i(r)o
(enaming)e(of)g(bound)h(variables)f(is)g(easy)h(to)f(work)450
2795 y(with,)h(and)e(its)g(slight)h(informality)f(does)g(not)g(usually)
g(lead)f(to)h(tr)o(ouble)f(in)i(practice.)51 b(W)-8 b(e)450
2895 y(shall)22 b(adopt)f(it)g(in)h(most)h(of)e(what)h(follows.)29
b(However)-6 b(,)21 b(it)g(is)h(also)g(important)g(to)g(know)g(how)450
2995 y(to)h(formulate)f(basic)h(operations)g(such)g(as)f(substitution)i
(with)g(complete)e(rigor)-6 b(,)23 b(so)g(that)g(we)450
3094 y(have)g(a)f(solid)i(foundation)f(to)h(fall)f(back)f(on)i(in)f
(case)g(ther)o(e)f(is)i(ever)e(any)h(question.)34 b(W)-8
b(e)23 b(will)450 3194 y(see)d(one)i(way)e(to)h(accomplish)h(this)f(in)
h(Section)e(5.1.)450 3377 y Ge(4.3.6)f(Exercise:)39 b
Gd(Can)16 b(you)h(think)h(of)e(any)h(other)g(ways)g(in)g(which)g(the)g
(incomplete)g(de\002nition)450 3476 y(of)25 b(substitution)h(might)f
(be)f(r)o(epair)o(ed)e(to)j(give)g(a)f(complete)h(operation,)g(without)
h(r)o(esorting)450 3576 y(to)21 b(a)f(convention)j(about)d(implicit)i
(r)o(enaming)e(of)h(bound)g(variables?)724 b FZ(2)575
3758 y F7(De\002ne)22 b(multi-substitutions.)29 b(Give)21
b(enough)h(examples)f(to)h(answer)g(questions)i(about)e(idempo-)450
3858 y(tency)m(,)e(left-to-rightness,)f(etc.)26 b(Mention)21
b(Bar)o(endr)o(egt)e(convention.)450 4101 y F8(Operational)25
b(Semantics)450 4259 y Ge(4.3.7)19 b(De\002nition:)39
b Gd(The)23 b(set)g(of)g(values)g(is)h(the)f(subset)g(of)g(terms)g
(de\002ned)g(by)g(the)h(following)450 4359 y(abstract)c(grammar:)592
4490 y F4(v)61 b Gd(::=)1821 b F7(values)852 4590 y Gb(\025)p
F4(x)o(.t)1642 b F7(abstraction)21 b(value)3394 4789
y FZ(2)p eop
%%Page: 55 56
55 55 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(55)450 683 y Ge(4.3.8)19 b(De\002nition:)39
b Gd(The)21 b(one-step)g(evaluation)g(r)o(elation)f F5(\000)-14
b FV(!)21 b Gd(is)g(the)g(smallest)g(r)o(elation)g(con-)450
783 y(taining)g(all)g(instances)g(of)g(the)g(following)h(r)o(ules:)1237
906 y F4(\()p Gb(\025)p F4(x)o(.t)1456 918 y F1(12)1533
906 y F4(\))43 b(v)1664 918 y F1(2)1728 906 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2127 918
y F1(2)2168 906 y F0(g)p F4(t)2238 918 y F1(12)3113 907
y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1602 1064
y F4(t)1645 1076 y F1(1)1709 1064 y F5(\000)-14 b FV(!)23
b F4(t)1917 1034 y FX(0)1909 1087 y F1(1)p 1474 1107
604 4 v 1474 1187 a F4(t)1518 1199 y F1(1)1602 1187 y
F4(t)1645 1199 y F1(2)1709 1187 y F5(\000)-14 b FV(!)23
b F4(t)1917 1157 y FX(0)1909 1210 y F1(1)1994 1187 y
F4(t)2037 1199 y F1(2)3105 1126 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1602 1345 y F4(t)1645 1357 y F1(2)1709
1345 y F5(\000)-14 b FV(!)23 b F4(t)1917 1315 y FX(0)1909
1368 y F1(2)p 1474 1388 V 1474 1467 a F4(v)1518 1479
y F1(1)1602 1467 y F4(t)1645 1479 y F1(2)1709 1467 y
F5(\000)-14 b FV(!)23 b F4(v)1909 1479 y F1(1)1994 1467
y F4(t)2045 1437 y FX(0)2037 1491 y F1(2)3105 1407 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))450 1591 y(As)34
b(in)h(the)f(de\002nition)i(of)e(the)h(evaluation)f(r)o(elation)g(for)g
(arithmetic)g(expr)o(essions,)k(ther)o(e)450 1691 y(ar)o(e)25
b(two)i(sorts)g(of)f(r)o(ules)h(her)o(e:)36 b(the)26
b F7(computation)f Gd(r)o(ule)j(E)t(-)t(B)t F6(E)t(T)o(A)g
Gd(and)d(the)i F7(congruence)g Gd(r)o(ules)452 1790 y(E)t(-)t(A)t
F6(P)t(P)t Gd(1)22 b(and)h(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(.)2162
b FZ(2)450 2033 y F8(Summary)450 2258 y Gb(\025)21 b
Ge(:)k(Untyped)19 b(lambda-calculus)2941 2258 y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 2941
2258 a 16 w FV(!)36 b Ge(\(untyped\))p 409 2340 9 36
v 418 2310 3000 6 v 3418 2310 38 6 v 3455 2340 9 36 v
450 2429 a F7(Syntax)560 2560 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 487309
-7800 div box .9 setgray fill grestore
 560 2560 a 16 w F4(t)77
b Gd(::=)1821 b F7(terms)852 2660 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 852 2660 a 15 w F4(x)1759
b F7(variable)852 2759 y
 gsave currentpoint translate 0 124518 7800 div 1636280 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 2759 a 15 w Gb(\025)p F4(x.t)1626
b F7(abstraction)852 2859 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 487309
-7800 div box .9 setgray fill grestore
 852 2859 a 15 w F4(t)44 b(t)1671
b F7(application)560 2990 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 560 2990 a 16 w F4(v)77 b
Gd(::=)1821 b F7(values)852 3089 y
 gsave currentpoint translate 0 124518 7800 div 1636280 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 3089 a 15 w Gb(\025)p
F4(x.t)1626 b F7(abstraction)21 b(value)471 3204 y(Evaluation)p
3096 3117 355 4 v 3096 3229 4 113 v 2283 w F4(t)i F5(\000)-15
b FV(!)23 b F4(t)3398 3174 y FX(0)p 3447 3229 V 3096
3232 355 4 v 1213 3366 a
 gsave currentpoint translate 0 419430 7800 div 8887725 7800 div 747110
-7800 div box .9 setgray fill grestore
 1213 3366 a 1237 3365 a F4(\()p
Gb(\025)p F4(x)o(.t)1456 3377 y F1(12)1533 3365 y F4(\))43
b(v)1664 3377 y F1(2)1728 3365 y F5(\000)-15 b FV(!)23
b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2127 3377 y F1(2)2168
3365 y F0(g)p F4(t)2238 3377 y F1(12)3113 3366 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)p Gd(\))1440 3608 y
 gsave currentpoint translate 0 851966 7800 div 5300775 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1440 3608 a 1602 3552
a F4(t)1645 3564 y F1(1)1709 3552 y F5(\000)-14 b FV(!)23
b F4(t)1917 3523 y FX(0)1909 3576 y F1(1)p 1474 3589
604 4 v 1474 3662 a F4(t)1518 3674 y F1(1)1602 3662 y
F4(t)1645 3674 y F1(2)1709 3662 y F5(\000)-14 b FV(!)23
b F4(t)1917 3632 y FX(0)1909 3686 y F1(1)1994 3662 y
F4(t)2037 3674 y F1(2)3105 3608 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1440 3905 y
 gsave currentpoint translate 0 851966 7800 div 5300775 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1440 3905 a 1602 3849
a F4(t)1645 3861 y F1(2)1709 3849 y F5(\000)-14 b FV(!)23
b F4(t)1917 3819 y FX(0)1909 3873 y F1(2)p 1474 3886
604 4 v 1474 3959 a F4(v)1518 3971 y F1(1)1602 3959 y
F4(t)1645 3971 y F1(2)1709 3959 y F5(\000)-14 b FV(!)23
b F4(v)1909 3971 y F1(1)1994 3959 y F4(t)2045 3929 y
FX(0)2037 3983 y F1(2)3105 3905 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(2)q(\))p 409 4051 9 36 v 418 4051 3000
6 v 3418 4051 38 6 v 3455 4051 9 36 v eop
%%Page: 56 57
56 56 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)494 b
Gd(4)t(.)29 b(T)t F6(H)t(E)c Gd(U)t F6(N)t(T)t(Y)t(P)t(E)t(D)h
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
494 b Gd(56)450 686 y Gj(4.4)119 b(Further)29 b(Reading)450
875 y Gd(Information)g(on)g(the)f(untyped)g(lambda-calculus)f(can)h(be)
g(found)g(in)h(many)g(places.)47 b(The)450 975 y(\002rst)16
b(and)f(best)h(is)g(Bar)o(endr)o(egt's)e(encyclopedic)i(monograph,)h
F7(The)e(Lambda)h(Calculus)g Gd([Bar84)n(].)450 1074
y(Hindley)j(and)f(Seldin's)h(book)g([HS86)n(])g(gives)f(a)g(mor)o(e)h
(accessible)f(tr)o(eatment)g(of)g(some)h(of)g(the)450
1174 y(basic)j(material.)29 b(Bar)o(endr)o(egt's)20 b(article)h(in)i
(the)f(Handbook)g(of)g(Theor)o(etical)g(Computer)g(Sci-)450
1274 y(ence)i([Bar90)n(])h(is)g(a)f(compact)h(survey)-9
b(.)37 b(Material)23 b(on)j(lambda-calculus)d(can)h(also)h(be)g(found)
450 1373 y(in)35 b(many)h(textbooks)f(on)h(functional)f(pr)o(ogramming)
h(languages)e(\(e.g.)g([AS85)n(,)h(FWH92)o(,)450 1473
y(PJL92)o(]\))18 b(and)i(pr)o(ogramming)g(language)f(semantics)h
(\(e.g.[Sch86)m(,)g(Gun92)o(,)g(W)-5 b(in93,)19 b(Mit96)o(]\).)p
eop
%%Page: 57 58
57 57 bop 450 1306 a F3(Chapter)44 b(5)450 1721 y Gk(Implementing)52
b(the)450 1970 y(Lambda-Calculus)770 2375 y F7(Just)21
b(because)h(you've)e(implemented)g(something)f(doesn')m(t)i(mean)g(you)
f(understand)h(it.)2313 2476 y Gd(\227)f(Brian)h(Cantwell)g(Smith)450
2862 y Gj(5.1)119 b(Nameless)29 b(Representation)g(of)h(T)-13
b(erms)450 3051 y Gd(In)29 b(the)f(pr)o(evious)g(chapter)-6
b(,)30 b(we)e(worked)h(with)g(terms)g(\223up)f(to)g(r)o(enaming)h(of)f
(bound)h(vari-)450 3150 y(ables.\224)c(This)d(is)f(\002ne)g(for)g
(discussing)h(basic)f(concepts)g(and)f(for)h(pr)o(esenting)g(pr)o(oofs)
g(cleanly)-9 b(,)450 3250 y(but)22 b(for)g(building)g(an)g
(implementation)h(we)f(need)g(to)g(choose)h(a)e(single)i(concr)o(ete)e
(r)o(epr)o(esen-)450 3350 y(tation)g(for)g(each)f(term.)575
3449 y(Ther)o(e)f(ar)o(e)h(various)g(ways)h(to)g(do)g(this:)554
3615 y(1.)41 b(W)-8 b(e)23 b(can)g(r)o(epr)o(esent)f(a)h(variable)f
(occurr)o(ence)g(as)i(a)f(string.)34 b(This)24 b(makes)f(our)h(concr)o
(ete)658 3715 y(\(\223algorithmic\224\))c(r)o(epr)o(esentation)h(close)
h(to)g(the)g(declarative)e(one,)i(but)f(it)h(means)g(that)658
3815 y(we)d(have)f(to)h(alpha-convert)f(during)i(substitution.)26
b(This)20 b(becomes)f(quite)g(tricky)g(and)658 3914 y(it)i(is)g(easy)f
(to)h(intr)o(oduce)g(subtle)f(bugs.)554 4080 y(2.)41
b(W)-8 b(e)27 b(can)f(r)o(eplace)g(the)h(names)g(chosen)h(by)f(the)g
(pr)o(ogrammer)f(with)i(some)g(canonical)658 4180 y(naming)21
b(scheme.)554 4346 y(3.)41 b(W)-8 b(e)31 b(can)g(avoid)g(substitution)i
(altogether)e(by)g(intr)o(oducing)h(mechanisms)g(like)g(clo-)658
4446 y(sur)o(es.)450 4612 y(W)-8 b(e)16 b(choose)h(the)e(second,)i
(using)g(a)e(well-known)i(technique)g(due)e(to)h(Nicolas)g(de)g(Br)o
(uijn)g([dB72)n(].)450 4711 y(Making)26 b(this)h(choice)g(r)o(equir)o
(es)e(some)i(work)g(now)-8 b(,)29 b(but)d(once)h(the)g(basic)f(ideas)f
(ar)o(e)g(under)o(-)450 4811 y(stood,)i(their)e(r)o(ealization)f(in)i
(the)f(implementations)i(thr)o(oughout)f(the)f(book)h(will)g(be)f(com-)
450 4910 y(pletely)c(mechanical.)1908 5169 y(57)p eop
%%Page: 58 59
58 58 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(58)450 683 y F8(Syntax)450 841 y Gd(De)25
b(Br)o(uijn's)g(idea)f(was)h(that)f(we)h(can)f(r)o(epr)o(esent)f(terms)
i(mor)o(e)f(straightforwar)o(dly\227if)g(less)450 941
y(r)o(eadibly\227by)15 b(making)h(variable)f(occurr)o(ences)g
F7(point)h(dir)o(ectly)e(to)i Gd(their)g(binders,)h(rather)e(than)450
1040 y(r)o(eferring)27 b(to)i(them)g(by)g(name.)48 b(This)30
b(can)e(be)g(accomplished)h(by)f(r)o(eplacing)g(named)g(vari-)450
1140 y(ables)23 b(by)g(natural)g(numbers,)h(wher)o(e)e(the)i(number)f
F4(k)g Gd(stands)g(for)g(\223the)g(variable)f(bound)i(by)450
1240 y(the)32 b Gb(k)p Gd('th)g(enclosing)g Gb(\025)p
Gd(.\224)57 b(For)32 b(example,)h(the)f(or)o(dinary)e(term)i
Gb(\025)p F4(x.x)e Gd(corr)o(esponds)h(to)h(the)450 1339
y Ge(nameless)18 b(term)i Gb(\025)p F4(.0)o Gd(,)g(while)i
F4(\()p Gb(\025)p F4(x.)p Gb(\025)p F4(y.)41 b(x)i(\(y)g(x\)\))19
b Gd(is)i(r)o(epr)o(esented)e(by)h(the)h(nameless)g(term)450
1439 y F4(\()p Gb(\025)p F4(.)p Gb(\025)p F4(.)42 b(1)h(\(0)g(1\)\))o
Gd(.)28 b(Nameless)21 b(terms)h(ar)o(e)e(also)h(sometimes)i(called)d
Ge(de)h(Bruijn)g(terms)p Gd(,)f(and)450 1538 y(the)h(numeric)g
(variables)f(in)h(them)g(ar)o(e)e(called)h Ge(de)g(Bruijn)g(indices)p
Gd(.)2611 1508 y FK(1)450 1714 y Ge(5.1.1)f(Exercise)f([Quick)i
(check]:)40 b Gd(For)21 b(each)f(of)h(the)f(following)j(combinators)616
1866 y FT(c)655 1875 y FL(0)732 1866 y FT(=)40 b FM(\025)p
FT(z.)f FM(\025)p FT(s.)g(z;)616 1957 y(c)655 1966 y
FL(2)732 1957 y FT(=)h FM(\025)p FT(z.)f FM(\025)p FT(s.)g(s)h(\(s)f
(z\);)616 2049 y(plus)h(=)g FM(\025)p FT(m.)f FM(\025)p
FT(n.)g FM(\025)p FT(z.)h FM(\025)p FT(s.)f(m)h(\(n)f(z)h(s\))f(s;)616
2140 y(fixedpoint)j(=)d FM(\025)p FT(f.)g(\()p FM(\025)p
FT(x.)h(f)f(\()p FM(\025)p FT(y.)h(\(x)g(x\))f(y\)\))h(\()p
FM(\025)p FT(x.)g(f)f(\()p FM(\025)p FT(y.)h(\(x)g(x\))f(y\)\);)616
2231 y(foo)h(=)f(\()p FM(\025)p FT(x.)h(\()p FM(\025)p
FT(x.)g(x\)\))f(\()p FM(\025)p FT(x.)h(x\);)450 2392
y Gd(write)21 b(down)g(the)g(corr)o(esponding)g(nameless)g(term.)1253
b FZ(2)575 2567 y Gd(Note)31 b(that)h(each)f(\(closed\))g(or)o(dinary)g
(term)h(has)f(just)i(one)f(de)f(Br)o(uijn)h(r)o(epr)o(esentation,)450
2667 y(and)23 b(that)g(two)h(or)o(dinary)f(terms)h(ar)o(e)e(equivalent)
h(modulo)i(r)o(enaming)e(of)g(bound)h(variables)450 2767
y(if)o(f)c(they)h(have)f(the)h(same)f(de)h(Br)o(uijn)g(r)o(epr)o
(esentation.)575 2866 y(T)-8 b(o)32 b(deal)f(with)i(terms)f(containing)
h(fr)o(ee)d(variables,)k(we)d(need)h(the)g(idea)f(of)h(a)f(naming)450
2966 y(context.)62 b(For)32 b(example,)j(suppose)e(we)g(want)g(to)g(r)o
(epr)o(esent)e F4(\()p Gb(\025)p F4(x.)42 b(y)h(x\))32
b Gd(as)h(a)f(nameless)450 3066 y(term.)55 b(W)-8 b(e)31
b(know)h(what)f(to)g(do)f(with)i F4(x)o Gd(,)h(but)e(we)g(cannot)g(see)
f(the)h(binder)g(for)f F4(y)p Gd(,)j(so)e(it)g(is)450
3165 y(not)22 b(clear)f(how)i(\223far)d(away\224)h(it)h(might)g(be)g
(and)f(we)h(do)f(not)i(know)g(what)e(number)h(to)g(assign)450
3265 y(to)k(it.)40 b(The)26 b(solution)h(is)f(to)g(choose,)h(once)f
(and)f(for)h(all,)g(an)f(assignment)i(\(called)d(a)h
Ge(naming)450 3364 y(context)p Gd(\))17 b(of)i(de)g(Br)o(uijn)h
(indices)g(to)g(fr)o(ee)d(variables,)i(and)g(use)g(this)h(assignment)g
(consistently)450 3464 y(when)f(we)g(need)f(to)g(choose)i(numbers)e
(for)h(fr)o(ee)e(variables.)23 b(For)c(example,)f(suppose)h(that)f(we)
450 3564 y(choose)k(to)f(work)g(under)f(the)h(following)i(naming)e
(context:)1642 3739 y Gb(\000)105 b FY(=)148 b F4(x)22
b F5(7)p FV(!)h Gb(4)2003 3839 y F4(y)f F5(7)p FV(!)h
Gb(3)2003 3939 y F4(z)f F5(7)p FV(!)h Gb(2)2003 4038
y F4(a)f F5(7)p FV(!)h Gb(1)2003 4138 y F4(b)f F5(7)p
FV(!)h Gb(0)450 4313 y Gd(Then)i F4(\(x)43 b(\(y)g(z\)\))23
b Gd(would)i(be)g(r)o(epr)o(esented)d(as)j F4(\(4)42
b(\(3)h(2\)\))o Gd(,)25 b(while)h F4(\()p Gb(\025)p F4(x.)42
b(y)h(x\))24 b Gd(would)h(be)450 4412 y(r)o(epr)o(esented)19
b(as)h F4(\()p Gb(\025)p F4(.)43 b(4)g(0\))20 b Gd(and)g
F4(\()p Gb(\025)p F4(w.)p Gb(\025)p F4(a.x\))e Gd(would)j(be)g(r)o(epr)
o(esented)d(as)j F4(\()p Gb(\025)p F4(.)p Gb(\025)p F4(.6\))n
Gd(.)575 4512 y(Actually)-9 b(,)16 b(all)g(we)g(need)g(to)h(know)g
(about)f Gb(\000)g Gd(is)h(the)f(or)o(der)f(in)i(which)g(the)g
(variables)e(appear)-6 b(.)450 4611 y(Instead)25 b(of)f(writing)i(it)g
(in)f(tabular)f(form,)i(as)f(we)g(did)f(above,)h(we)g(will)h(elide)f
(the)g(numbers)450 4711 y(and)20 b(write)h(it)g(as)g(a)f(sequence.)p
450 4761 1200 4 v 540 4818 a FJ(1)570 4841 y F6(Note)e(on)g(pr)o
(onunciation:)25 b(the)17 b(near)o(est)h(English)g(appr)o(oximation)h
(to)f(the)g(second)g(syllable)i(in)e(\223de)g(Br)o(uijn\224)h(is)450
4920 y(\223br)o(own,\224)e(not)f(\223br)o(oyn.\224)p
eop
%%Page: 59 60
59 59 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(59)450 683 y Ge(5.1.2)19 b(De\002nition:)39
b Gd(Suppose)23 b F4(x)1472 695 y F1(0)1536 683 y Gd(thr)o(ough)h
F4(x)1899 695 y F1(n)1974 683 y Gd(ar)o(e)e(variable)h(names)g(fr)o(om)
g F5(V)7 b Gd(.)34 b(The)23 b(naming)450 783 y(context)f
Gb(\000)j FY(=)g F4(x)940 795 y F1(n)992 783 y Gb(;)g
F4(x)1083 795 y F1(n)p F2(-)p F1(1)1222 783 y Gb(;)39
b(:)14 b(:)g(:)g F4(x)1438 795 y F1(1)1479 783 y Gb(;)25
b F4(x)1570 795 y F1(0)1633 783 y Gd(assigns)d(to)h(each)e
F4(x)2247 795 y F1(i)2300 783 y Gd(the)h(de)f(Br)o(uijn)i(index)e
Gb(i)p Gd(.)29 b(Note)22 b(that)450 882 y(the)h(rightmost)i(variable)d
(in)h(the)g(sequence)h(is)f(given)g(the)h(index)f Gb(0)p
Gd(;)h(This)g(matches)f(the)g(way)450 982 y(we)18 b(count)g
Gb(\025)p Gd(s\227fr)o(om)f(right)h(to)g(left\227when)g(converting)g(a)
g(named)f(term)g(to)h(nameless)g(form.)450 1082 y(W)-8
b(e)21 b(write)g F7(dom)o FY(\()p Gb(\000)5 b FY(\))16
b Gd(for)k(the)h(set)g F0(f)p F4(x)1528 1094 y F1(0)1569
1082 y Gb(;)37 b(:)14 b(:)g(:)f(;)23 b F4(x)1829 1094
y F1(n)1880 1082 y F0(g)e Gd(of)f(variable)g(names)h(mentioned)g(in)g
Gb(\000)6 b Gd(.)214 b FZ(2)575 1246 y Gd(Formally)-9
b(,)26 b(we)g(de\002ne)f(the)g(syntax)h(of)f(nameless)h(terms)g(almost)
g(exactly)e(like)i(the)g(syn-)450 1346 y(tax)e(of)h(or)o(dinary)f
(terms)g(\(cf.)g(De\002nition)i(4.3.1\).)35 b(The)25
b(only)g(dif)o(fer)o(ence)d(is)j(that)g(we)f(need)h(to)450
1445 y(keep)d(car)o(eful)f(track)h(of)g(how)i(many)e(fr)o(ee)f
(variables)h(each)g(term)g(may)g(contain.)32 b(That)22
b(is,)h(we)450 1545 y(distinguish)e(the)f(sets)g(of)g(terms)g(with)h
(no)f(fr)o(ee)e(variables)h(\(called)g(the)h Gb(0)p Gd(-terms\),)f
(terms)h(with)450 1645 y(at)g(most)i(one)f(fr)o(ee)e(variable)h(\()p
Gb(1)p Gd(-terms\),)g(and)g(so)i(on.)450 1809 y Ge(5.1.3)d
(De\002nition)f([T)-9 b(erms]:)41 b Gd(Let)20 b F5(T)43
b Gd(be)21 b(the)g(smallest)h(family)f(of)g(sets)g F0(f)p
F5(T)2771 1821 y F1(0)2811 1809 y Gb(;)28 b F5(T)2907
1821 y F1(1)2948 1809 y Gb(;)g F5(T)3044 1821 y F1(2)3084
1809 y Gb(;)g(:)14 b(:)g(:)p F0(g)21 b Gd(such)450 1909
y(that)554 2074 y(1.)41 b F4(k)22 b F5(2)i(T)848 2086
y F1(n)920 2074 y Gd(whenever)d Gb(0)i F5(\024)g Gb(k)g(<)g(n)p
Gd(;)554 2239 y(2.)41 b(if)20 b F4(t)j F5(2)g(T)920 2251
y F1(n)992 2239 y Gd(and)e Gb(n)i(>)g(0)p Gd(,)e(then)g
Gb(\025)p F4(.t)h F5(2)i(T)1864 2251 y F1(n)p F2(-)p
F1(1)2003 2239 y Gd(;)554 2404 y(3.)41 b(if)20 b F4(t)774
2416 y F1(1)837 2404 y F5(2)k(T)961 2416 y F1(n)1033
2404 y Gd(and)c F4(t)1238 2416 y F1(2)1301 2404 y F5(2)k(T)1425
2416 y F1(n)1476 2404 y Gd(,)d(then)g F4(\(t)1789 2416
y F1(1)1873 2404 y F4(t)1917 2416 y F1(2)1957 2404 y
F4(\))i F5(2)h(T)2148 2416 y F1(n)2199 2404 y Gd(.)450
2569 y(The)d(elements)g(of)g(each)f F5(T)1284 2581 y
F1(n)1356 2569 y Gd(ar)o(e)f(called)h Gb(n)p Gd(-terms.)1355
b FZ(2)575 2734 y Gd(Note)22 b(that)h(the)g(elements)g(of)g
F5(T)1574 2746 y F1(n)1648 2734 y Gd(ar)o(e)e(terms)i(with)h
F7(at)e(most)g Gb(n)h Gd(fr)o(ee)e(variables)h(number)o(ed)450
2833 y(between)i Gb(0)h Gd(and)f Gb(n)d FY(-)g Gb(1)p
Gd(:)33 b(a)24 b(given)g(element)h(of)f F5(T)2024 2845
y F1(n)2100 2833 y Gd(need)f(not)i(have)f(fr)o(ee)f(variables)g(with)i
(all)450 2933 y(these)19 b(numbers,)g(or)f(indeed)g(any)h(fr)o(ee)e
(variables)g(at)i(all.)24 b(If)18 b F4(t)h Gd(is)f(closed,)h(for)g
(example,)f(it)g(will)450 3033 y(be)i(an)h(element)g(of)g
F5(T)1119 3045 y F1(n)1191 3033 y Gd(for)f(every)h Gb(n)p
Gd(.)575 3132 y(Also)h(note)h(that,)g(strictly)g(speaking,)g(it)f(does)
h(not)g(make)f(sense)h(to)g(speak)f(of)g(\223some)h F4(t)j
F5(2)450 3232 y(T)21 b Gd(\224\227we)d(always)g(need)g(to)g(specify)g
(how)h(many)g(fr)o(ee)e(variables)g F4(t)g Gd(might)j(have.)k(In)18
b(practice,)450 3331 y(though,)33 b(we)d(will)g(often)g(have)g(some)g
(\002xed)f(naming)i(context)f Gb(\000)f Gd(in)i(mind;)j(we)c(will)h
(then)450 3431 y(abuse)21 b(the)h(notation)h(slightly)h(and)d(write)h
F4(t)j F5(2)g(T)44 b Gd(to)22 b(mean)g F4(t)j F5(2)g(T)2576
3443 y F1(n)2628 3431 y Gd(,)d(wher)o(e)f Gb(n)h Gd(is)g(the)g(length)
450 3531 y(of)f Gb(\000)5 b Gd(.)450 3712 y Ge(5.1.4)19
b(Exercise:)39 b Gd(Give)26 b(an)f(alternative)f(constr)o(uction)j(of)f
(the)f(sets)h(of)f Gb(n)p Gd(-terms)g(in)h(the)g(style)450
3811 y(of)f(3.2.3,)g(and)f(show)j(\(as)e(we)g(did)g(in)h(Pr)o
(oposition)g(3.2.6\))d(that)j(it)f(is)h(equivalent)f(to)h(the)g(one)450
3911 y(above.)2703 b FZ(2)450 4092 y Ge(5.1.5)19 b(Exercise)f
([Recommended]:)554 4257 y Gd(1.)41 b(De\002ne)19 b(a)g(function)h
F7(r)o(emovenames)f Gd(that)g(takes)g(a)f(naming)i(context)g
Gb(\000)f Gd(and)g(an)g(or)o(dinary)658 4356 y(term)h
F4(t)h Gd(\(with)g F7(FV)p FY(\()p F4(t)p FY(\))i F5(\022)g
F7(dom)o FY(\()p Gb(\000)5 b FY(\)\))16 b Gd(and)k(yields)h(the)g(corr)
o(esponding)g(nameless)g(term.)554 4521 y(2.)41 b(De\002ne)31
b(a)g(function)g F7(r)o(estor)o(enames)h Gd(that)f(takes)f(a)h
(nameless)g(term)g F4(t)g Gd(and)g(a)f(naming)658 4621
y(context)17 b Gb(\000)h Gd(and)f(pr)o(oduces)f(an)i(or)o(dinary)e
(term.)25 b(\(T)-8 b(o)17 b(do)h(this,)h(you)f(will)g(need)f(to)h
(\223make)658 4721 y(up\224)e(names)h(for)f(the)h(variables)f(bound)h
(by)g(abstractions)g(in)h F4(t)o Gd(.)24 b(Y)-8 b(ou)18
b(may)f(assume)g(that)658 4820 y(the)23 b(set)f F5(V)30
b Gd(of)23 b(variable)e(names)i(is)h(or)o(der)o(ed,)d(so)i(that)g(it)g
(makes)g(sense)g(to)g(say)g(\223choose)658 4920 y(the)d(\002rst)i
(variable)d(name)i(that)f(is)h(not)h(alr)o(eady)d(in)i
F7(dom)o FY(\()p Gb(\000)6 b FY(\))p Gd(.\224\))p eop
%%Page: 60 61
60 60 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(60)450 683 y(This)21 b(pair)f(of)h(functions)h(should)f
(have)g(the)g(pr)o(operty)f(that)658 849 y F7(r)o(emovenames)1108
861 y F1(\000)1151 849 y FY(\()p F7(r)o(estor)o(enames)1619
861 y F1(\000)1662 849 y FY(\()p F4(t)p FY(\)\))j(=)g
F4(t)450 1015 y Gd(for)e(any)f(nameless)h(term)g F4(t)p
Gd(,)f(and)g(similarly)658 1181 y F7(r)o(estor)o(enames)1093
1193 y F1(\000)1136 1181 y FY(\()p F7(r)o(emovenames)1619
1193 y F1(\000)1662 1181 y FY(\()p F4(t)p FY(\)\))j(=)g
F4(t)p Gb(;)450 1347 y Gd(up)e(to)g(r)o(enaming)f(of)h(bound)g
(variables,)f(for)g(any)h(or)o(dinary)f(term)h F4(t)o
Gd(.)746 b FZ(2)450 1590 y F8(Shifting)25 b(and)g(Substitution)450
1748 y Gd(Befor)o(e)f(de\002ning)i(substitution)h(on)f(nameless)g
(terms,)h(we)e(need)g(one)h(auxiliary)f(operation)450
1848 y(on)f(terms,)g(called)f(\223shifting,\224)g(which)i(r)o(enumbers)
d(the)i(indices)g(of)f(the)g(fr)o(ee)f(variables)h(in)g(a)450
1947 y(term.)47 b(When)29 b(a)f(substitution)h(goes)g(under)f(a)f
Gb(\025)p Gd(-abstraction,)i(as)f(in)h F0(f)p F4(x)35
b F5(7)p FV(!)i F4(s)p F0(g)p F4(\()p Gb(\025)p F4(y.x\))m
Gd(,)30 b(the)450 2047 y(context)21 b(in)g(which)g(the)g(substitution)h
(is)f(taking)f(place)g(becomes)h(one)g(variable)e(longer)i(than)450
2147 y(the)f(original;)g(we)g(need)f(to)h(incr)o(ement)f(the)h(indices)
g(of)f(the)h(fr)o(ee)e(variables)h(in)h F4(s)f Gd(so)h(that)g(they)450
2246 y(keep)g(r)o(eferring)g(to)h(the)g(same)f(names)h(in)g(the)g(new)g
(context)g(as)g(they)g(did)f(befor)o(e.)450 2429 y Ge(5.1.6)f
(De\002nition)f([Shifting]:)40 b Gd(The)30 b Gb(d)p Gd(-place)f(shift)i
(of)f(a)g(term)g F4(t)g Gd(above)f(cutof)o(f)h Gb(c)p
Gd(,)j(written)450 2528 y FV(")492 2498 y F1(d)492 2549
y(c)548 2528 y FY(\()p F4(t)p FY(\))p Gd(,)21 b(is)g(de\002ned)f(as)h
(follows:)1318 2761 y FV(")1360 2731 y F1(d)1360 2781
y(c)1416 2761 y FY(\()p F4(k)p FY(\))252 b(=)1922 2644
y FV(\014)1984 2710 y F4(k)232 b Gd(if)21 b Gb(k)i(<)g(c)1984
2810 y F4(k)18 b FY(+)g Gb(d)83 b Gd(if)21 b Gb(k)i F5(\025)g
Gb(c)1318 2910 y FV(")1360 2880 y F1(d)1360 2931 y(c)1416
2910 y FY(\()p Gb(\025)p F4(.t)1581 2922 y F1(1)1621
2910 y FY(\))123 b(=)83 b Gb(\025)p F4(.)22 b FV(")2075
2880 y F1(d)2075 2933 y(c)p F2(+)p F1(1)2211 2910 y FY(\()p
F4(t)2287 2922 y F1(1)2327 2910 y FY(\))1318 3010 y FV(")1360
2980 y F1(d)1360 3031 y(c)1416 3010 y FY(\()p F4(t)1492
3022 y F1(1)1576 3010 y F4(t)1620 3022 y F1(2)1661 3010
y FY(\))83 b(=)g FV(")1964 2980 y F1(d)1964 3031 y(c)2020
3010 y FY(\()p F4(t)2096 3022 y F1(1)2136 3010 y FY(\))67
b FV(")2277 2980 y F1(d)2277 3031 y(c)2333 3010 y FY(\()p
F4(t)2409 3022 y F1(2)2449 3010 y FY(\))450 3202 y Gd(W)-8
b(e)21 b(write)g FV(")842 3172 y F1(d)898 3202 y FY(\()p
F4(t)p FY(\))g Gd(for)f FV(")1195 3172 y F1(d)1195 3225
y(0)1251 3202 y FY(\()p F4(t)p FY(\))p Gd(.)2014 b FZ(2)450
3385 y Ge(5.1.7)19 b(Exercise)f([Quick)i(check]:)554
3551 y Gd(1.)41 b(What)20 b(is)h FV(")1000 3520 y F1(2)1050
3551 y FY(\()p Gb(\025)p F4(.)p Gb(\025)p F4(.)43 b(1)g(\(0)g(2\))o
FY(\))p Gd(?)554 3717 y(2.)e(What)20 b(is)h FV(")1000
3686 y F1(2)1050 3717 y FY(\()p Gb(\025)p F4(.)43 b(0)g(1)g(\()p
Gb(\025)p F4(.)g(0)g(1)g(2\))p FY(\))p Gd(?)1499 b FZ(2)450
3899 y Ge(5.1.8)19 b(Exercise:)39 b Gd(Show)21 b(that)g(if)f
F4(t)h Gd(is)g(an)g Gb(n)p Gd(-term,)f(then)h FV(")2251
3869 y F1(d)2251 3920 y(c)2307 3899 y FY(\()p F4(t)p
FY(\))g Gd(is)g(an)g FY(\()p Gb(n)p FY(+)p Gb(d)p FY(\))p
Gd(-term.)313 b FZ(2)575 4082 y Gd(Now)18 b(we)f(ar)o(e)g(r)o(eady)f
(to)i(de\002ne)f(the)h(substitution)h(operator)e F0(f)p
Gb(j)23 b F5(7)p FV(!)g F4(s)o F0(g)p F4(t)o Gd(.)i(Later)16
b(on)j(we)e(will)450 4182 y(be)27 b(most)i(inter)o(ested)d(in)i
(substituting)h(for)f(the)f F7(last)h Gd(variable)e(in)i(the)g(context)
f(\(i.e.,)i Gb(j)35 b FY(=)g Gb(0)p Gd(\),)450 4281 y(since)28
b(that)f(is)h(the)g(case)e(we)i(need)f(in)h(or)o(der)e(to)i(de\002ne)f
(the)h(operation)f(of)h(beta-r)o(eduction.)450 4381 y(However)-6
b(,)23 b(to)g(substitute)h(for)f(variable)e Gb(0)j Gd(in)f(a)g(term)g
(that)g(happens)f(to)i(be)e(a)h Gb(\025)p Gd(-abstraction,)450
4480 y(we)i(need)h(to)f(be)h(able)e(to)i(substitute)g(for)f(the)h
(variable)e(number)i(number)o(ed)f Gb(1)g Gd(in)h(its)g(body)-9
b(.)450 4580 y(Thus,)21 b(the)g(de\002nition)h(of)e(substitution)j
(must)e(work)g(on)h(an)e(arbitrary)g(variable.)p eop
%%Page: 61 62
61 61 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(61)450 683 y Ge(5.1.9)19 b(De\002nition)f
([Substitution]:)38 b Gd(The)20 b(substitution)h(of)f(a)f(term)h
F4(s)f Gd(for)h(variable)e(number)i Gb(j)450 783 y Gd(in)h(a)f(term)h
F4(t)p Gd(,)f(written)h F0(f)p Gb(j)i F5(7)p FV(!)g F4(s)o
F0(g)p F4(t)o Gd(,)e(is)g(de\002ned)f(as)h(follows:)1141
967 y F0(f)p Gb(j)h F5(7)p FV(!)h F4(s)o F0(g)p F4(k)315
b FY(=)1899 850 y FV(\014)1961 917 y F4(s)83 b Gd(if)21
b Gb(k)i FY(=)g Gb(j)1961 1016 y F4(k)83 b Gd(otherwise)1141
1117 y F0(f)p Gb(j)22 b F5(7)p FV(!)h F4(s)o F0(g)p FY(\()p
Gb(\025)p F4(.t)1558 1129 y F1(1)1599 1117 y FY(\))122
b(=)83 b Gb(\025)p F4(.)43 b F0(f)p Gb(j)18 b FY(+)g
Gb(1)24 b F5(7)p FV(!")2375 1087 y F1(1)2424 1117 y FY(\()p
F4(s)p FY(\))p F0(g)p F4(t)2602 1129 y F1(1)1141 1216
y F0(f)p Gb(j)e F5(7)p FV(!)h F4(s)o F0(g)p FY(\()p F4(t)1470
1228 y F1(1)1554 1216 y F4(t)1598 1228 y F1(2)1638 1216
y FY(\))83 b(=)g(\()p F0(f)p Gb(j)23 b F5(7)p FV(!)g
F4(s)o F0(g)p F4(t)2228 1228 y F1(1)2313 1216 y F0(f)p
Gb(j)f F5(7)p FV(!)h F4(s)o F0(g)p F4(t)2610 1228 y F1(2)2650
1216 y FY(\))712 b FZ(2)450 1360 y Ge(5.1.10)18 b(Exercise)h([Quick)h
(check]:)39 b Gd(Convert)e(the)f(following)i(substitution)g(operations)
f(to)450 1460 y(nameless)24 b(form,)h(assuming)g(the)f(global)g
(context)h(is)f Gb(\000)29 b FY(=)g F4(a)o Gb(;)p F4(b)p
Gd(,)c(and)e(calculate)g(their)h(r)o(esults)450 1559
y(using)c(the)f(above)g(de\002nition.)26 b(Do)19 b(the)h(answers)f
(corr)o(espond)f(to)i(the)f(original)h(de\002nition)g(of)450
1659 y(substitution)i(on)g(or)o(dinary)e(terms)h(in)g(Section)g(4.3?)
575 1794 y F5(\017)41 b F0(f)p F4(b)22 b F5(7)p FV(!)h
F4(a)o F0(g)44 b F4(\(b)e(\()p Gb(\025)p F4(x.)p Gb(\025)p
F4(y.b\)\))575 1944 y F5(\017)f F0(f)p F4(b)22 b F5(7)p
FV(!)h F4(\(a)43 b(\()p Gb(\025)p F4(z.a\)\))m F0(g)g
F4(\(b)g(\()p Gb(\025)p F4(x.b\)\))575 2095 y F5(\017)e
F0(f)p F4(b)22 b F5(7)p FV(!)h F4(a)o F0(g)44 b F4(\()p
Gb(\025)p F4(b.)e(b)h(a\))575 2245 y F5(\017)e F0(f)p
F4(b)22 b F5(7)p FV(!)h F4(a)o F0(g)44 b F4(\()p Gb(\025)p
F4(a.)e(b)h(a\))2029 b FZ(2)450 2389 y Ge(5.1.1)m(1)18
b(Exercise:)39 b Gd(Show)28 b(that)g(if)f F4(s)g Gd(and)f
F4(t)h Gd(ar)o(e)f Gb(n)p Gd(-terms)i(and)e Gb(j)35 b
F5(\024)g Gb(n)p Gd(,)29 b(then)f F0(f)p Gb(j)34 b F5(7)p
FV(!)h F4(s)p F0(g)p F4(t)26 b Gd(is)i(an)450 2489 y
Gb(n)p Gd(-term.)2667 b FZ(2)450 2633 y Ge(5.1.12)18
b(Exercise)h([Quick)h(check]:)39 b Gd(T)-8 b(ake)27 b(a)g(sheet)g(of)g
(paper)g(and,)h(without)g(looking)h(at)e(the)450 2732
y(de\002nitions)22 b(of)f(substitution)h(and)e(shifting)i(above,)e(see)
h(if)f(you)h(can)g(r)o(egenerate)e(them.)118 b FZ(2)450
2876 y Ge(5.1.13)18 b(Exercise)h([Homework]:)41 b F7(\(Due)30
b(on)g(Feb.)56 b(10.\))29 b Gd(The)i(de\002nition)h(of)e(substitution)i
(on)424 b FP(\()450 2976 y Gd(nameless)22 b(terms)h(should)g(agr)o(ee)e
(with)i(our)f(informal)h(de\002nition)g(of)f(substitution)i(on)f(or)o
(di-)450 3075 y(nary)e(terms.)554 3210 y(1.)41 b(What)20
b(theor)o(em)h(needs)f(to)i(be)e(pr)o(oved)g(to)h(justify)g(this)h
(corr)o(espondence)e(rigor)o(ously?)554 3361 y(2.)41
b(Pr)o(ove)20 b(it.)450 3496 y(Solution)i(on)f(page)f(288.)2156
b FZ(2)450 3731 y F8(Evaluation)450 3889 y Gd(W)-8 b(e)21
b(can)f(now)i(de\002ne)f(the)f(evaluation)h(r)o(elation)f(on)i
(nameless)f(terms.)575 3989 y(The)27 b(beta-r)o(eduction)f(r)o(ule)h
(is)h(de\002ned)e(in)i(terms)g(of)f(our)g(new)h(nameless)f
(substitution)450 4089 y(operation.)41 b(The)26 b(only)g(slightly)h
(subtle)f(technical)g(point)h(is)f(that)g(r)o(educing)f(a)g(r)o(edex)f
(\223uses)450 4188 y(up\224)19 b(the)h(bound)h(variable\227when)e(we)h
(r)o(educe)e F4(\(\()p Gb(\025)p F4(x.t)2272 4200 y F1(1)2313
4188 y F4(\))43 b(v)2443 4200 y F1(2)2484 4188 y F4(\))19
b Gd(to)i F0(f)p F4(x)h F5(7)p FV(!)h F4(v)2883 4200
y F1(2)2923 4188 y F0(g)p F4(t)2993 4200 y F1(1)3034
4188 y Gd(,)d(the)g(bound)450 4288 y(variable)e F4(x)i
Gd(disappears)e(in)i(the)g(pr)o(ocess.)25 b(Thus,)20
b(we)g(will)g(need)f(to)h(r)o(enumber)f(the)h(variables)450
4388 y(of)29 b(the)f(r)o(esult)g(of)h(substitution)h(to)f(take)f(into)i
(account)e(the)h(fact)f(that)g F4(x)g Gd(is)h(no)h(longer)f(part)450
4487 y(of)i(the)h(context.)57 b(Similarly)-9 b(,)33 b(we)e(need)g(to)h
(shift)g(the)f(variables)f(in)i F4(v)2729 4499 y F1(2)2801
4487 y Gd(up)f(by)h(one)f(befor)o(e)450 4587 y(substituting)22
b(into)g F4(t)1120 4599 y F1(1)1182 4587 y Gd(to)f(take)f(account)h(of)
g(the)g(fact)f(that)g F4(t)2349 4599 y F1(1)2410 4587
y Gd(is)h(de\002ned)g(in)g(a)f(lar)o(ger)g(context)450
4686 y(than)h F4(v)680 4698 y F1(2)720 4686 y Gd(.)1059
4802 y F4(\()p Gb(\025)p F4(.t)1235 4814 y F1(12)1312
4802 y F4(\))43 b(v)1443 4814 y F1(2)1548 4802 y F5(\000)-15
b FV(!)42 b(")1765 4773 y F2(-)p F1(1)1865 4802 y FY(\()p
F0(f)p F4(0)23 b F5(7)p FV(!")2116 4773 y F1(1)2165 4802
y FY(\()p F4(v)2241 4814 y F1(2)2281 4802 y FY(\))p F0(g)p
F4(t)2384 4814 y F1(12)2460 4802 y FY(\))3113 4803 y
Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))450 4920 y(The)e(other)g(r)o
(ules)g(ar)o(e)e(identical)i(to)g(what)g(we)f(had)h(befor)o(e.)p
eop
%%Page: 62 63
62 62 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(62)450 686 y Gj(5.2)119 b(A)30 b(Concrete)g
(Realization)450 875 y Gd(An)22 b(executable)e(evaluator)h(for)h
(untyped)g(lambda-terms)f(can)g(be)h(obtained)g(by)g(a)f(straight-)450
975 y(forwar)o(d)31 b(translation)h(of)g(the)g(for)o(egoing)g
(de\002nitions)i(into)f(OCaml.)59 b(As)32 b(in)g(Section)g(3.3,)450
1074 y(we)23 b(show)i(just)f(the)f(cor)o(e)g(algorithms,)h(ignoring)h
(issues)f(of)f(lexing,)h(parsing,)g(the)f(top-level)450
1174 y(r)o(ead-eval-print)18 b(loop,)j(etc.)450 1415
y F8(Syntax)450 1573 y Gd(W)-8 b(e)26 b(can)g(obtain)g(a)f(datatype)g
(r)o(epr)o(esenting)g(abstract)g(syntax)h(tr)o(ees)f(for)h(terms)g(by)g
(dir)o(ectly)450 1673 y(transliterating)21 b(De\002nition)h(5.1.3:)616
1824 y FT(type)40 b(term)g(=)773 1915 y(TmVar)g(of)g(int)694
2006 y(|)g(TmAbs)g(of)g(term)694 2098 y(|)g(TmApp)g(of)g(term)g(*)g
(term)450 2257 y Gd(The)22 b(r)o(epr)o(esentation)e(of)i(a)g(variable)e
(is)j(a)e(number)o(\227its)h(de)f(Br)o(uijn)i(index.)29
b(The)21 b(r)o(epr)o(esenta-)450 2357 y(tion)g(of)g(an)g(abstraction)f
(carries)g(just)h(a)f(subterm)h(for)f(the)h(abstraction's)f(body)-9
b(.)26 b(An)20 b(applica-)450 2456 y(tion)i(carries)d(the)i(two)h
(subterms)f(being)g(applied.)575 2556 y(The)f(de\002nition)i(actually)e
(used)g(in)i(our)e(implementation,)i(however)-6 b(,)20
b(will)i(carry)d(a)i(little)450 2656 y(bit)26 b(mor)o(e)f(information.)
41 b(First,)27 b(as)e(befor)o(e,)h(it)f(is)h(useful)g(to)g(annotate)f
(every)g(term)h(with)g(an)450 2755 y(element)20 b(of)f(the)g(type)h
F4(info)d Gd(r)o(ecor)o(ding)i(the)g(\002le)h(position)g(wher)o(e)f
(that)g(term)h(was)f(originally)450 2855 y(found,)29
b(so)f(that)f(err)o(or)f(printing)j(r)o(outines)e(can)g(dir)o(ect)f
(the)i(user)f(\(or)g(even)g(the)h(user)6 b('s)27 b(text)450
2954 y(editor)-6 b(,)20 b(automatically\))g(to)i(the)f(pr)o(ecise)e
(point)j(wher)o(e)e(the)h(err)o(or)f(occurr)o(ed.)616
3105 y FT(type)40 b(term)g(=)773 3197 y(TmVar)g(of)g(info)g(*)g(int)694
3288 y(|)g(TmAbs)g(of)g(info)g(*)g(term)694 3379 y(|)g(TmApp)g(of)g
(info)g(*)g(term)g(*)f(term)450 3539 y Gd(Second,)23
b(for)f(purposes)h(of)f(debugging,)i(it)f(is)g(helpful)f(to)h(carry)f
(an)h(extra)e(number)i(on)h(each)450 3638 y(variable)31
b(node,)k(as)d(a)f(consistency)j(check.)59 b(The)33 b(convention)g
(will)g(be)f(that)g(this)h(second)450 3738 y(number)24
b(will)g(always)g(contain)g(the)g F7(total)f(length)g
Gd(of)h(the)g(context)g(in)g(which)h(the)f(variable)f(is)450
3838 y(de\002ned.)616 3989 y FT(type)40 b(term)g(=)773
4080 y(TmVar)g(of)g(info)g(*)g(int)g(*)f(int)694 4171
y(|)h(TmAbs)g(of)g(info)g(*)g(term)694 4263 y(|)g(TmApp)g(of)g(info)g
(*)g(term)g(*)f(term)450 4422 y Gd(Whenever)19 b(a)g(variable)g(is)h
(printed,)f(we)h(will)g(verify)f(that)g(this)i(number)f(corr)o(esponds)
f(to)h(the)450 4521 y(actual)29 b(size)h(of)g(the)h(curr)o(ent)e
(context;)35 b(if)30 b(it)g(does)h(not,)i(then)d(a)g(shift)h(operation)
f(has)g(been)450 4621 y(for)o(gotten)21 b(someplace.)575
4721 y(The)16 b(\002nal)h(r)o(e\002nement)g(also)g(concerns)g
(printing.)25 b(Although)18 b(terms)f(ar)o(e)e(r)o(epr)o(esented)g(in-)
450 4820 y(ternally)20 b(using)g(de)f(Br)o(uijn)i(indices,)f(this)g(is)
g(certainly)g(not)g(how)g(they)g(should)h(be)e(pr)o(esented)450
4920 y(to)g(the)h(user:)k(we)19 b(should)h(convert)f(fr)o(om)g(the)g
(or)o(dinary)f(r)o(epr)o(esentation)g(to)i(nameless)f(terms)p
eop
%%Page: 63 64
63 63 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(63)450 683 y(during)21 b(parsing,)f(and)g(convert)g
(back)g(to)g(or)o(dinary)g(form)h(during)f(printing.)26
b(Ther)o(e)20 b(is)g(noth-)450 783 y(ing)d(har)o(d)e(about)h(doing)h
(this,)g(but)f(if)g(we)h(do)f(it)g(naively)-9 b(,)17
b(users)f(will)h(not)g(be)f(very)f(happy)-9 b(,)17 b(since)450
882 y(the)i(names)g(of)g(the)g(bound)g(variables)f(in)h(the)g(terms)g
(that)g(ar)o(e)f(printed)g(will)i(have)e(nothing)j(to)450
982 y(do)k(with)g(the)g(names)f(in)h(the)g(original)g(pr)o(ogram.)36
b(This)25 b(can)f(be)h(\002xed)f(by)g(annotating)i(each)450
1082 y(abstraction)20 b(with)i(a)e(string)i(to)f(be)f(used)h(as)f(a)h
(hint)g(for)g(the)g(name)f(of)h(the)g(bound)g(variable.)616
1239 y FT(type)40 b(term)g(=)773 1331 y(TmVar)g(of)g(info)g(*)g(int)g
(*)f(int)694 1422 y(|)h(TmAbs)g(of)g(info)g(*)g(string)g(*)g(term)694
1513 y(|)g(TmApp)g(of)g(info)g(*)g(term)g(*)f(term)450
1679 y Gd(The)18 b(basic)f(operations)i(on)f(terms)g(\(substitution)h
(in)g(particular\))d(do)i(not)h(do)f(anything)h(fancy)450
1779 y(with)29 b(these)g(strings:)42 b(they)29 b(ar)o(e)f(simply)h
(carried)e(along)i(in)h(their)e(original)h(form,)i(with)e(no)450
1879 y(checks)20 b(for)f(name)h(clashes,)f(captur)o(e,)g(etc.)24
b(When)c(the)g(printing)h(r)o(outine)e(needs)h(to)g(generate)450
1978 y(a)f(fr)o(esh)f(name)h(for)g(a)g(bound)h(variable,)e(it)h(tries)g
(\002rst)h(to)f(use)h(the)f(supplied)g(hint;)i(if)e(this)h(turns)450
2078 y(out)g(to)f(clash)h(with)g(a)e(name)i(alr)o(eady)d(used)i(in)h
(the)f(curr)o(ent)f(context,)i(it)f(tries)h(similar)f(names,)450
2177 y(adding)h(primes)h(until)h(it)f(\002nds)g(one)h(that)e(is)i(not)f
(curr)o(ently)g(being)g(used.)k(This)d(ensur)o(es)e(that)450
2277 y(the)h(printed)f(term)h(will)h(be)e(similar)h(to)g(what)g(the)g
(user)g(expects,)e(modulo)j(a)e(few)h(primes.)575 2377
y(The)f(printing)i(r)o(outine)f(itself)f(looks)i(like)f(this:)616
2534 y FT(let)40 b(rec)g(prtm)g(ctx)g(=)f(function)773
2626 y(TmAbs\(fi,x,t1\))j FO(!)851 2717 y FT(let)e(\(x',ctx'\))i(=)d
(pickfreshname)j(ctx)e(x)g(in)851 2808 y(pr)g("\(lambda)h(";)f(pr)g
(x';)f(pr)h(".)g(";)f(prtm)i(ctx')f(t1;)g(pr)f("\)")694
2900 y(|)h(TmApp\(fi,)h(t1,)f(t2\))g FO(!)851 2991 y
FT(pr)g("\(";)g(prtm)g(ctx)g(t1;)g(pr)g(")f(";)h(prtm)g(ctx)g(t2;)g(pr)
g("\)")694 3082 y(|)g(TmVar\(fi,x,n\))i FO(!)851 3174
y FT(if)e(ctxlength)h(ctx)f(=)g(n)f(then)930 3265 y(pr)h(\(index2name)h
(fi)f(ctx)g(x\))851 3356 y(else)930 3448 y(pr)g("[bad)g(index]")450
3614 y Gd(It)23 b(uses)g(several)g(lower)o(-level)f(functions:)31
b F4(pr)22 b Gd(sends)i(a)e(string)i(to)f(the)h(terminal;)g
F4(ctxlength)450 3713 y Gd(r)o(eturns)32 b(the)h(length)h(of)f(a)f
(context;)39 b(and)32 b F4(index2name)d Gd(looks)34 b(up)f(the)g
(string)g(name)g(of)f(a)450 3813 y(variable)25 b(fr)o(om)h(its)g
(index.)42 b(The)26 b(most)h(inter)o(esting)f(one)h(is)f
F4(pickfreshname)-5 b Gd(,)27 b(which)g(takes)450 3913
y(a)f(context)h F4(ctx)f Gd(and)g(a)g(string)i(hint)f
F4(x)p Gd(,)h(\002nds)f(a)f(name)h F4(x)2273 3882 y FX(0)2323
3913 y Gd(similar)g(to)g F4(x)f Gd(such)h(that)g F4(x)3193
3882 y FX(0)3243 3913 y Gd(is)g(not)450 4012 y(alr)o(eady)21
b(listed)j(in)f F4(ctx)o Gd(,)h(adds)e F4(x)1496 3982
y FX(0)1543 4012 y Gd(to)h F4(ctx)f Gd(to)i(form)f(a)g(new)g(context)h
F4(ctx)2764 3982 y FX(0)2787 4012 y Gd(,)g(and)f(r)o(eturns)f(both)450
4112 y F4(x)501 4082 y FX(0)545 4112 y Gd(and)f F4(ctx)845
4082 y FX(0)868 4112 y Gd(.)575 4211 y(\(The)d(actual)g(printing)h
(function)h(found)e(in)h(the)g(on-line)g(implementation)h(is)f
(somewhat)450 4311 y(mor)o(e)h(complicated)f(than)h(this)h(one,)f
(taking)h(into)g(account)f(two)g(additional)g(issues.)26
b(First,)20 b(it)450 4411 y(leaves)i(out)i(as)f(many)g(par)o(entheses)f
(as)h(possible,)h(following)h(the)e(conventions)i(that)e(appli-)450
4510 y(cation)e(associates)f(to)g(the)h(left)f(and)g(the)g(bodies)h(of)
f(abstractions)g(extend)g(as)g(far)f(to)i(the)g(right)450
4610 y(as)e(possible.)26 b(Second,)19 b(it)h(generates)e(formatting)i
(instr)o(uctions)h(for)f(a)f(low-level)g F7(pr)o(ettyprint-)450
4710 y(ing)i Gd(layer)f(that)g(makes)h(decisions)h(about)e(line)h(br)o
(eaking)f(and)h(indentation.\))p eop
%%Page: 64 65
64 64 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(64)450 683 y F8(Shifting)25 b(and)g(Substitution)450
841 y Gd(The)e(de\002nitions)h(of)f(shifting)h(\(5.1.6\))c(can)j(be)f
(translated)g(almost)i(symbol)g(for)e(symbol)i(into)450
941 y(OCaml:)616 1079 y FT(let)40 b(tmshift)h(d)e(t)h(=)694
1171 y(let)g(rec)g(walk)g(c)g(=)f(function)773 1262 y(TmVar\(fi,x,n\))j
FO(!)d FT(if)h(x>=c)g(then)g(TmVar\(fi,x+d,n+d\))j(else)d
(TmVar\(fi,x,n+d\))694 1353 y(|)g(TmAbs\(fi,x,t1\))i
FO(!)d FT(TmAbs\(fi,)j(x,)d(walk)h(\(c+1\))h(t1\))694
1445 y(|)f(TmApp\(fi,t1,t2\))j FO(!)c FT(TmApp\(fi,)i(walk)f(c)f(t1,)h
(walk)h(c)e(t2\))694 1536 y(in)h(walk)g(0)g(t)450 1683
y Gd(The)35 b(internal)h(shifting)g FV(")1304 1653 y
F1(d)1304 1704 y(c)1388 1683 y FY(\()p F4(t)o FY(\))g
Gd(is)g(her)o(e)e(r)o(epr)o(esented)g(by)h(a)g(call)g(to)h(the)f(inner)
h(function)450 1783 y F4(\(walk)42 b(c)h(t\))o Gd(.)e(Since)26
b F4(d)g Gd(never)f(changes,)j(ther)o(e)d(is)i(no)f(need)g(to)g(pass)g
(it)h(along)f(to)h(each)e(call)450 1882 y(to)d F4(walk)o
Gd(;)g(we)g(just)h(use)f(the)g(outer)g(binding)h(of)f
F4(d)g Gd(when)g(we)g(need)g(it)g(in)h(the)f(variable)f(case)g(of)450
1982 y F4(walk)n Gd(.)26 b(The)21 b(top-level)f(shift)h
FV(")1401 1952 y F1(d)1457 1982 y FY(\()p F4(t)p FY(\))g
Gd(is)g(r)o(epr)o(esented)e(by)i F4(\(tmshift)40 b(d)j(t\))o
Gd(.)575 2082 y(Similarly)-9 b(,)20 b(the)h(function)g
F4(subst)e Gd(comes)i(almost)g(dir)o(ectly)f(fr)o(om)h(De\002nition)h
(5.1.9:)616 2221 y FT(let)40 b(tmsubst)h(j)e(s)h(t)f(=)694
2312 y(let)h(rec)g(walk)g(c)g(=)f(function)773 2403 y(TmVar\(fi,x,n\))j
FO(!)d FT(if)h(x=j)g(then)g(\(tmshift)h(j)e(s\))h(else)g
(TmVar\(fi,x,n\))694 2494 y(|)g(TmAbs\(fi,x,t1\))i FO(!)d
FT(TmAbs\(fi,)j(x,)d(walk)h(\(c+1\))h(t1\))694 2586 y(|)f
(TmApp\(fi,t1,t2\))j FO(!)c FT(TmApp\(fi,)i(walk)f(c)f(t1,)h(walk)h(c)e
(t2\))694 2677 y(in)h(walk)g(0)g(t)450 2824 y Gd(The)21
b(substitution)h(of)f(term)g F4(s)f Gd(for)h(the)g(variable)e(number)o
(ed)h F4(j)h Gd(in)g(term)g F4(t)o Gd(,)g(formerly)g(written)450
2924 y F0(f)p Gb(j)31 b F5(7)p FV(!)i F4(s)o F0(g)p F4(t)o
Gd(,)27 b(is)f(r)o(epr)o(esented)e(as)h F4(\(tmsubst)41
b(j)i(s)g(t\))25 b Gd(her)o(e.)39 b(\(The)26 b(only)g(dif)o(fer)o(ence)
e(fr)o(om)h(the)450 3023 y(original)d(de\002nition)g(of)f(substitution)
i(is)f(that)f(her)o(e)g(we)g(do)g(all)g(the)h(shifting)g(of)f
F4(s)g Gd(at)g(once,)h(in)450 3123 y(the)c F4(TmVar)e
Gd(case,)i(rather)g(than)g(shifting)h F4(s)f Gd(up)g(by)g(one)h(every)e
(time)i(we)f(go)g(thr)o(ough)h(a)f(binder)-6 b(.)450
3223 y(This)22 b(means)f(that)g(the)h(ar)o(gument)e F4(j)h
Gd(is)h(the)f(same)g(in)h(every)e(call)h(to)h F4(walk)n
Gd(,)f(and)g(we)g(can)g(omit)450 3322 y(it)g(fr)o(om)f(the)h(inner)g
(de\002nition.\))575 3422 y(\(The)32 b(r)o(eader)f(may)i(note)h(that)f
(the)g(de\002nitions)i(of)e F4(tmshift)d Gd(and)i F4(tmsubst)f
Gd(ar)o(e)g(very)450 3522 y(similar)-6 b(,)27 b(dif)o(fering)e(only)i
(in)f(the)g(action)g(that)g(is)g(taken)g(when)g(a)f(variable)g(is)h(r)o
(eached.)39 b(The)450 3621 y(actual)19 b(on-line)h(imlementation)h
(exploits)e(this)i(observation)e(to)h(expr)o(ess)f(both)h(shifting)g
(and)450 3721 y(substitution)30 b(operations)f(as)f(special)g(cases)g
(of)h(a)f(mor)o(e)g(general)g(function)i(called)d F4(tmmap)n
Gd(.)450 3820 y(Given)g(a)e(term)i F4(t)e Gd(and)h(a)g(function)h
F4(onvar)n Gd(,)g(the)g(r)o(esult)e(of)i F4(\(tmmap)41
b(onvar)g(t\))26 b Gd(is)g(a)g(term)g(of)450 3920 y(the)h(same)f(shape)
h(as)f F4(t)g Gd(but)h(wher)o(e)f(every)g(variable)g(is)h(r)o(eplaced)d
(by)j(the)g(r)o(esult)f(of)h(calling)450 4020 y F4(onvar)c
Gd(on)i(that)g(variable.)37 b(This)26 b(saves)e(quite)i(a)e(bit)h(of)g
(tedious)g(r)o(epetition)g(in)g(some)h(of)f(the)450 4119
y(lar)o(ger)19 b(calculi.\))575 4219 y(In)i(the)g(operational)g
(semantics)g(of)g(the)h(lambda-calculus,)d(the)i(only)h(place)f(wher)o
(e)f(sub-)450 4319 y(stitution)g(is)f(used)f(is)g(in)h(the)g(beta-r)o
(eduction)e(r)o(ule.)24 b(As)19 b(we)f(noted)h(befor)o(e,)e(this)i(r)o
(ule)g(actually)450 4418 y(performs)24 b(several)f(operations:)32
b(the)24 b(term)g(being)g(substituted)g(for)g(the)g(bound)g(variable)f
(is)450 4518 y(\002rst)g(shifted)f(up)h(by)f(one,)i(then)f(the)f
(substitution)i(is)f(made,)f(and)g(then)h(the)g(whole)h(r)o(esult)e(is)
450 4617 y(shifted)g(down)g(by)g(one)g(to)g(account)f(for)h(the)g(fact)
e(that)i(the)g(bound)g(variable)e(has)i(been)f(used)450
4717 y(up.)k(The)c(following)h(de\002nition)g(encapsulates)e(this)i
(sequence)f(of)g(steps:)616 4856 y FT(let)40 b(tmsubstsnip)i(s)d(t)h(=)
f(tmshift)i(\(-1\))f(\(tmsubst)h(0)f(\(tmshift)h(1)e(s\))h(t\))p
eop
%%Page: 65 66
65 65 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(65)450 683 y F8(Evaluation)450 841 y
Gd(As)21 b(in)g(Chapter)f(3,)g(the)h(evaluation)f(function)i(depends)e
(on)h(an)g(auxiliary)f(pr)o(edicate)f F4(isval)n Gd(:)616
994 y FT(let)40 b(rec)g(isval)g(ctx)g(=)g(function)773
1085 y(TmAbs\(_,_,_\))i FO(!)d FT(true)694 1177 y(|)h(_)f
FO(!)g FT(false)450 1338 y Gd(The)19 b(single-step)f(evaluation)h
(function)g(is)g(a)f(dir)o(ect)f(transcription)i(of)g(the)g(evaluation)
f(r)o(ules,)450 1438 y(except)f(that)g(we)g(pass)g(a)g(context)h
F4(ctx)e Gd(along)i(with)g(the)g(term.)24 b(This)18 b(ar)o(gument)f(is)
g(never)g(used)450 1537 y(in)23 b(the)g(pr)o(esent)e(evaluator)-6
b(,)22 b(but)g(it)h(is)g(needed)e(by)i(some)g(of)f(the)h(mor)o(e)f
(complex)h(evaluators)450 1637 y(later)d(on.)616 1790
y FT(let)40 b(rec)g(eval1)g(ctx)g(=)g(function)773 1882
y(TmApp\(fi,TmAbs\(_,x,t11\),v2\))45 b(when)40 b(\(isval)h(ctx)f(v2\))g
FO(!)851 1973 y FT(tmsubstsnip)i(v2)e(t11)694 2064 y(|)g
(TmApp\(fi,v1,t2\))j(when)d(\(isval)g(ctx)g(v1\))g FO(!)851
2156 y FT(let)g(t2')g(=)g(eval1)g(ctx)g(t2)g(in)851 2247
y(TmApp\(fi,)i(v1,)e(t2'\))694 2338 y(|)g(TmApp\(fi,t1,t2\))j
FO(!)851 2429 y FT(let)d(t1')g(=)g(eval1)g(ctx)g(t1)g(in)851
2521 y(TmApp\(fi,)i(t1',)e(t2\))694 2612 y(|)g(_)f FO(!)851
2703 y FT(raise)i(No)450 2865 y Gd(The)24 b(multi-step)g(evaluation)f
(function)i(is)f(the)g(same)g(as)f(befor)o(e,)g(except)g(for)h(the)g
F4(ctx)e Gd(ar)o(gu-)450 2965 y(ment:)616 3118 y FT(let)40
b(rec)g(eval)g(ctx)g(t)f(=)694 3209 y(try)h(let)g(t')g(=)f(eval1)i(ctx)
f(t)851 3300 y(in)g(eval)g(ctx)g(t')694 3392 y(with)h(No)e
FO(!)g FT(t)450 3676 y Gj(5.3)119 b(Ordinary)29 b(vs.)h(Nameless)f
(Representations)450 3865 y Gd(Strictly)34 b(speaking,)k(having)d(gone)
g(to)g(the)g(tr)o(ouble)f(of)g(making)i(all)e(this)h(so)g(pr)o(ecise,)i
(we)450 3965 y(should)23 b(now)g(continue)g(thr)o(ough)f(the)g(r)o(est)
g(of)g(the)g(book)h(using)g(de)e(Br)o(uijn)i(r)o(epr)o(esentations)450
4065 y(consistently)e(thr)o(oughout.)26 b(However)-6
b(,)19 b(we)g(will)h(not,)g(as)f(it)h(would)f(make)g(even)g(simple)h
(def-)450 4164 y(initions)i(nearly)f(impenetrable.)k(Instead,)20
b(we)h(will)g(adopt)f(the)h(following)i(compr)o(omise:)575
4326 y F5(\017)41 b Gd(In)21 b(OCaml)f(code,)h(we)f(use)h(de)f(Br)o
(uijn)i(r)o(epr)o(esentations.)575 4489 y F5(\017)41
b Gd(In)23 b(mathematical)g(pr)o(esentations)g(of)h(calculi,)f
(discussions,)i(examples,)f(and)f(pr)o(oofs,)658 4589
y(we)g(use)h(the)g(original)g(pr)o(esentation)g(in)g(terms)g(of)f
(named)h(variables.)33 b(However)-6 b(,)24 b(we)658 4689
y(always)16 b(r)o(egar)o(d)f(this)j(as)f(just)h(a)e(convenient)i
(shorthand)g(for)f(an)g(underlying)h(de)e(Br)o(uijn)658
4788 y(r)o(epr)o(esentation.)658 4920 y(This)21 b(convention)h(has)f
(the)g(following)h(consequences:)p eop
%%Page: 66 67
66 66 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)388 b
Gd(5)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c(T)t(H)
t(E)f Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t
(U)t(S)388 b Gd(66)736 683 y(1.)41 b(terms)18 b(ar)o(e)e(always)h
(understood)h(modulo)g(r)o(enaming)f(of)h(bound)g(variables,)e(and)736
816 y(2.)41 b(whenever)24 b(we)g(mention)h(a)f(term,)g(we)g(will)g
(always)g(\(at)f(least)h(implicitly\))g(have)840 915
y(some)18 b(context)g(in)g(mind)g(that)g(imposes)g(a)f(numerical)h(or)o
(dering)f(on)h(its)g(fr)o(ee)e(vari-)840 1015 y(able)k(names.)p
eop
%%Page: 67 68
67 67 bop 450 1306 a F3(Chapter)44 b(6)450 1721 y Gk(T)-19
b(yped)52 b(Arithmetic)f(Expressions)450 2276 y Gd(Recall)21
b(the)g(syntax)f(for)h(terms)g(in)g(our)g(simple)g(calculus)g(of)g
(arithmetic)f(expr)o(essions:)592 2457 y F4(t)61 b Gd(::=)1821
b F7(terms)852 2557 y F4(true)1642 b F7(constant)20 b(true)852
2657 y F4(false)1598 b F7(constant)20 b(false)852 2756
y F4(if)42 b(t)i(then)d(t)j(else)e(t)1033 b F7(conditional)852
2856 y F4(0)1774 b F7(constant)20 b(zer)o(o)852 2956
y F4(succ)42 b(t)1556 b F7(successor)852 3055 y F4(pred)42
b(t)1556 b F7(pr)o(edecessor)852 3155 y F4(iszero)41
b(t)1469 b F7(zer)o(o)21 b(test)450 3354 y Gd(W)-8 b(e)21
b(saw)g(in)g(Chapter)f(3)g(that)h(evaluating)f(a)g(term)h(can)g(either)
f(r)o(esult)g(in)i(a)e F7(value)592 3485 y F4(v)61 b
Gd(::=)1821 b F7(values)852 3585 y F4(true)1642 b F7(value)21
b(true)852 3685 y F4(false)1598 b F7(value)21 b(false)852
3784 y F4(nv)1730 b F7(numeric)21 b(value)548 3984 y
F4(nv)61 b Gd(::=)1821 b F7(numeric)21 b(values)852 4083
y F4(0)1774 b F7(zer)o(o)21 b(value)852 4183 y F4(succ)42
b(nv)1512 b F7(successor)22 b(value)450 4382 y Gd(or)f(else)g(get)f
F7(stuck)h Gd(at)f(some)h(stage,)g(by)g(r)o(eaching)f(a)g(term)h(like)g
F4(\(pred)41 b(false\))n Gd(.)575 4482 y(W)-8 b(e)30
b(would)h(like)g(to)g(be)f(able)f(to)i(tell,)i(without)f(actually)e
(evaluating)g(a)g(term,)i(that)f(its)450 4581 y(evaluation)c(will)h
(de\002nitely)g F7(not)f Gd(get)h(stuck.)46 b(T)-8 b(o)28
b(do)g(this,)h(we)f(need)f(to)h(be)f(able)g(to)h(distin-)450
4681 y(guish)20 b(between)e(terms)h(whose)h(r)o(esult)e(will)h(be)g(a)f
(numeric)h(value)f(\(since)h(these)g(ar)o(e)e(the)i(only)450
4781 y(ones)f(that)g(should)g(appear)e(as)h(ar)o(guments)h(to)g
F4(pred)n Gd(,)g F4(succ)n Gd(,)g(and)g F4(iszero)m Gd(\))f(and)g
(terms)h(whose)1908 5169 y(67)p eop
%%Page: 68 69
68 68 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(68)450 683 y(r)o(esult)26 b(will)h(be)g(a)f(boolean)h(\(since)f
(only)i(these)f(should)g(appear)e(as)h(the)h(guar)o(d)e(of)i(a)f
(condi-)450 783 y(tional\).)575 882 y(W)-8 b(e)31 b(intr)o(oduce)f(two)
h(classi\002ers:)46 b F4(Bool)30 b Gd(and)g F4(Nat)o
Gd(.)56 b(Saying)30 b(that)h(\223a)f(term)h F4(t)f Gd(has)h(type)450
982 y F4(T)p Gd(\224)e(\(or)h(\223belongs)h(to)g F4(T)o
Gd(,\224)h(or)e(\223is)g(an)h(element)f(of)g F4(T)p Gd(\224\))f(means)h
(that)h F4(t)e Gd(\223obviously\224)i(evalu-)450 1082
y(ates)25 b(to)g(a)g(value)f(of)h(the)g(appr)o(opriate)e(form\227wher)o
(e)i(by)g(\223obviously\224)g(we)g(mean)g(that)g(we)450
1181 y(can)j(see)f(this)i F7(statically)p Gd(,)f(without)h(doing)g(any)
e(evaluation)h(of)g F4(t)p Gd(.)46 b(For)28 b(example,)h(the)f(term)450
1281 y F4(\(if)42 b(true)g(then)g(false)g(else)g(true\))13
b Gd(has)j(type)g F4(Bool)n Gd(,)h(while)f(the)g(term)g
F4(\(pred)41 b(\(succ)h(\(pred)f(\(succ)h(0\)\)\)\))450
1380 y Gd(has)28 b(type)g F4(Nat)o Gd(.)48 b(However)-6
b(,)29 b(our)g(analysis)f(of)g(the)h(types)f(of)g(terms)g(will)h(be)f
Ge(conservative)p Gd(,)450 1480 y(only)34 b(making)f(use)g(of)f(static)
h(information.)62 b(This)33 b(means)g(that)g(we)f(will)i(not)f(be)g
(able)f(to)450 1580 y(conclude)20 b(that)f(terms)h(like)g
F4(\(if)42 b(true)g(then)g(0)h(else)f(false\))17 b Gd(have)i(any)h
(type)g(at)f(all)g(even)450 1679 y(though)j(their)f(evaluation)f(does)h
(not)h(get)e(stuck.)450 1962 y Gj(6.1)119 b(Syntax)450
2152 y Ge(6.1.1)19 b(De\002nition:)39 b Gd(The)20 b(set)g(of)g
Ge(types)e Gd(for)i(arithmetic)g(expr)o(essions)g(contains)g(just)h
(the)f(sym-)450 2251 y(bols)h F4(Bool)e Gd(and)i F4(Nat)o
Gd(:)592 2405 y F4(T)61 b Gd(::=)1821 b F7(types)852
2504 y F4(Bool)1642 b F7(type)20 b(of)g(booleans)852
2604 y F4(Nat)1686 b F7(type)15 b(of)g(natural)h(numbers)450
2803 y Gd(The)21 b(metavariables)e F4(S)p Gd(,)h F4(T)p
Gd(,)g F4(U)p Gd(,)g(etc.)h(range)f(over)g(types.)1216
b FZ(2)450 3086 y Gj(6.2)119 b(The)29 b(T)-11 b(yping)31
b(Relation)450 3276 y Gd(The)c(type)h(system)g(for)f(arithmetic)g(expr)
o(essions)g(is)h(de\002ned)f(by)h(a)e(set)i(of)f(r)o(ules)h(assigning)
450 3375 y(types)21 b(to)g(terms.)26 b(W)-8 b(e)21 b(write)f(\223)p
F4(t)i FF(:)i F4(T)o Gd(\224)d(to)g(mean)f(\223term)h
F4(t)f Gd(has)h(type)f F4(T)p Gd(.\224)575 3475 y(For)f(example,)f(the)
h(fact)f(that)h(the)g(term)g F4(0)g Gd(has)g(the)g(type)g
F4(Nat)f Gd(is)h(captur)o(ed)e(by)i(the)g(follow-)450
3575 y(ing)i(axiom:)1640 3695 y F4(0)i FF(:)g F4(Nat)3103
3696 y Gd(\()r(T)o(-)t(Z)t F6(E)t(R)t(O)s Gd(\))450 3818
y(Similarly)-9 b(,)20 b(the)h(term)g F4(succ)42 b(t)1407
3830 y F1(1)1469 3818 y Gd(has)20 b(type)h F4(Nat)f Gd(as)g(long)i(as)e
F4(t)2373 3830 y F1(1)2434 3818 y Gd(has)h(type)g F4(Nat)n
Gd(.)1620 3942 y F4(t)1663 3954 y F1(1)1727 3942 y FF(:)i
F4(Nat)p 1511 3985 531 4 v 1511 4064 a(succ)42 b(t)1772
4076 y F1(1)1836 4064 y FF(:)23 b F4(Nat)3106 4004 y
Gd(\()r(T)o(-)t(S)t F6(U)t(C)t(C)r Gd(\))450 4185 y(Likewise,)e
F4(pred)e Gd(yields)i(a)f F4(Nat)f Gd(when)j(its)f(ar)o(gument)f(has)h
(type)g F4(Nat)1620 4309 y(t)1663 4321 y F1(1)1727 4309
y FF(:)i F4(Nat)p 1511 4352 V 1511 4432 a(pred)42 b(t)1772
4444 y F1(1)1836 4432 y FF(:)23 b F4(Nat)3109 4371 y
Gd(\()r(T)o(-)t(P)t F6(R)t(E)t(D)s Gd(\))450 4553 y(and)d
F4(iszero)f Gd(yields)i(a)f F4(Bool)f Gd(when)i(its)g(ar)o(gument)g
(has)f(type)h F4(Nat)o Gd(:)1620 4676 y F4(t)1663 4688
y F1(1)1727 4676 y FF(:)i F4(Nat)p 1445 4719 661 4 v
1445 4799 a(iszero)42 b(t)1794 4811 y F1(1)1858 4799
y FF(:)23 b F4(Bool)3032 4739 y Gd(\()r(T)o(-)t(I)t F6(S)t
Gd(Z)t F6(E)t(R)t(O)s Gd(\))450 4920 y(The)e(boolean)g(constants)g
(both)h(have)e(type)h F4(Bool)p eop
%%Page: 69 70
69 69 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(69)1553 682 y F4(true)21 b FF(:)j F4(Bool)3108 683
y Gd(\()r(T)o(-)t(T)t F6(R)t(U)t(E)r Gd(\))1531 831 y
F4(false)d FF(:)i F4(Bool)3083 832 y Gd(\()r(T)o(-)t(F)o
F6(A)t(L)t(S)t(E)q Gd(\))450 957 y(The)e(most)g(inter)o(esting)g
(typing)h(r)o(ule)f(is)g(the)g(one)g(for)g F4(if)e Gd(expr)o(essions:)
1207 1083 y F4(t)1250 1095 y F1(1)1314 1083 y FF(:)k
F4(Bool)165 b(t)1772 1095 y F1(2)1836 1083 y FF(:)23
b F4(T)166 b(t)2163 1095 y F1(3)2227 1083 y FF(:)23 b
F4(T)p 1207 1127 1139 4 v 1252 1206 a(if)43 b(t)1427
1218 y F1(1)1511 1206 y F4(then)f(t)1772 1218 y F1(2)1856
1206 y F4(else)g(t)2118 1218 y F1(3)2182 1206 y FF(:)23
b F4(T)3239 1146 y Gd(\()r(T)o(-)t(I)t F6(F)r Gd(\))450
1330 y(The)28 b(metavariable)e F4(T)h Gd(is)h(used)g(to)g(indicate)f
(that)h(the)g(r)o(esult)f(of)h(the)g F4(if)f Gd(is)h(the)g(type)f(of)h
(the)450 1429 y F4(then)n Gd(-)g(and)g F4(else)n Gd(-)g(branches,)i
(and)e(that)g(this)h(may)f(be)g(any)g(type)g(\(either)g
F4(Nat)f Gd(or)i F4(Bool)d Gd(or)-6 b(,)450 1529 y(when)22
b(we)f(get)g(to)h(calculi)f(with)h(mor)o(e)f(inter)o(esting)g(sets)h
(of)f(types,)g(any)g(other)h(type)f(whatso-)450 1629
y(ever\).)450 1914 y Gj(6.3)119 b(Properties)29 b(of)h(T)-11
b(yping)30 b(and)g(Reduction)450 2120 y F8(T)-9 b(yping)26
b(Derivations)450 2278 y Gd(Formally)-9 b(,)19 b(the)f(typing)g(r)o
(elation)g(can)f(be)h(thought)h(of)f(as)f(a)h(simple)g(logic)g(for)g
(pr)o(oving)g Ge(typing)450 2378 y(assertions)23 b Gd(\(sometimes)j
(called)e Ge(typing)g(judgements)p Gd(\))e(of)j(the)g(form)g
F4(t)31 b FF(:)g F4(T)o Gd(,)26 b(pr)o(onounced)450 2477
y(\223the)17 b(term)g F4(t)g Gd(has)h(the)f(type)h F4(T)o
Gd(.\224)24 b(\(In)18 b(the)f(literatur)o(e)f(on)i(type)g(systems,)g
(the)g(symbol)g F5(2)g Gd(is)g(often)450 2577 y(used)i(instead)g(of)g
FF(:)g Gd(for)g(the)g(typing)g(r)o(elation.\))25 b(The)20
b(pr)o(ovable)f(statements)h(of)g(this)h(logic)f(ar)o(e)450
2677 y(de\002ned)g(as)h(follows:)450 2859 y Ge(6.3.1)e(De\002nition:)39
b Gd(The)23 b Ge(typing)g(relation)e Gd(is)j(the)g(least)f(two-place)g
(r)o(elation)g(containing)h(all)450 2959 y(instances)30
b(of)f(the)h(axioms)i(T)o(-)t(Z)t F6(E)t(R)t(O)s Gd(,)h(T)o(-)t(T)t
F6(R)t(U)t(E)s Gd(,)e(and)g(T)o(-)t(F)o F6(A)t(L)t(S)t(E)g
Gd(and)e(closed)g(under)h(all)f(in-)450 3059 y(stances)21
b(of)f(the)h(r)o(emaining)g(r)o(ules.)1830 b FZ(2)450
3241 y Ge(6.3.2)19 b(De\002nition:)39 b Gd(A)34 b Ge(typing)f
(derivation)e Gd(is)k(a)e(tr)o(ee)g(of)h(instances)g(of)g(the)g(typing)
h(r)o(ules.)450 3341 y(Each)21 b(statement)h F4(t)j FF(:)g
F4(T)c Gd(in)i(the)e(typing)i(r)o(elation)e(is)i(justi\002ed)f(by)g(a)f
(typing)i(derivation)e(with)450 3441 y(conclusion)i F4(t)g
FF(:)h F4(T)p Gd(.)j(W)-8 b(e)21 b(sometimes)h(write)f
F5(D)27 b FY(::)c F5(J)37 b Gd(to)22 b(indicate)e(that)h
F5(D)j Gd(is)e(a)e(derivation)h(tr)o(ee)450 3540 y(with)h(conclusion)g
F5(J)15 b Gd(.)26 b(When)21 b F5(D)26 b FY(::)d F5(J)36
b Gd(for)20 b(some)i F5(D)r Gd(,)f(we)f(say)h(that)g
F5(J)36 b Gd(is)21 b Ge(derivable)p Gd(.)298 b FZ(2)450
3723 y Ge(6.3.3)19 b(Theorem)h([Principle)e(of)j(induction)e(on)i
(typing)e(derivations]:)39 b Gd(Suppose)32 b(that)f Gb(P)h
Gd(is)450 3822 y(some)26 b(pr)o(edicate)d(on)j(typing)g(statements.)39
b(If)25 b(we)g(can)g(show)-8 b(,)28 b(for)d(each)f(typing)i(derivation)
450 3922 y F5(D)32 b FY(::)e F5(J)16 b Gd(,)25 b(that)f
FY(\()p Gb(P)r FY(\()p F5(J)1092 3892 y FX(0)1115 3922
y FY(\))p Gd(,)d(for)g(all)f F5(D)1500 3892 y FX(0)1547
3922 y FY(::)i F5(J)1685 3892 y FX(0)1729 3922 y Gd(with)f
F7(size)q FY(\()p F5(D)2149 3892 y FX(0)2172 3922 y FY(\))j
Gb(<)e F7(size)q FY(\()p F5(D)r FY(\))q(\))j Gd(implies)g
Gb(P)r FY(\()p F5(J)14 b FY(\))p Gd(,)25 b(then)g(we)450
4022 y(may)c(conclude)g(that)f Gb(P)r FY(\()p F5(J)14
b FY(\))21 b Gd(holds)h(for)e(every)g(derivable)g(typing)h(statement.)
452 b FZ(2)p eop
%%Page: 70 71
70 70 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(70)450 683 y F8(T)-9 b(ypechecking)450 841 y Ge(6.3.4)19
b(Lemma)g([Inversion)h(of)h(the)f(typing)f(relation]:)554
1007 y Gd(1.)41 b(If)20 b F4(0)j FF(:)g F4(R)o Gd(,)e(then)g
F4(R)i FY(=)g F4(Nat)n Gd(.)554 1173 y(2.)41 b(If)20
b F4(succ)42 b(t)995 1185 y F1(1)1059 1173 y FF(:)23
b F4(R)p Gd(,)d(then)i F4(R)g FY(=)h F4(Nat)d Gd(and)g
F4(t)1912 1185 y F1(1)1975 1173 y FF(:)j F4(Nat)o Gd(.)554
1339 y(3.)41 b(If)20 b F4(pred)42 b(t)995 1351 y F1(1)1059
1339 y FF(:)23 b F4(R)p Gd(,)d(then)i F4(R)g FY(=)h F4(Nat)d
Gd(and)g F4(t)1912 1351 y F1(1)1975 1339 y FF(:)j F4(Nat)o
Gd(.)554 1505 y(4.)41 b(If)20 b F4(iszero)41 b(t)1083
1517 y F1(1)1146 1505 y FF(:)24 b F4(R)o Gd(,)d(then)g
F4(R)h FY(=)h F4(Bool)c Gd(and)i F4(t)2042 1517 y F1(1)2106
1505 y FF(:)i F4(Nat)o Gd(.)554 1671 y(5.)41 b(If)20
b F4(true)h FF(:)j F4(R)o Gd(,)d(then)g F4(R)i FY(=)f
F4(Bool)o Gd(.)554 1837 y(6.)41 b(If)20 b F4(false)h
FF(:)i F4(R)p Gd(,)d(then)i F4(R)g FY(=)h F4(Bool)n Gd(.)554
2003 y(7.)41 b(If)20 b F4(if)43 b(t)908 2015 y F1(1)992
2003 y F4(then)f(t)1254 2015 y F1(2)1338 2003 y F4(else)g(t)1600
2015 y F1(3)1663 2003 y FF(:)23 b F4(R)p Gd(,)d(then)907
2144 y F4(t)950 2156 y F1(1)1014 2144 y FF(:)j F4(Bool)907
2244 y(t)950 2256 y F1(2)1014 2244 y FF(:)g F4(R)907
2343 y(t)950 2355 y F1(3)1014 2343 y FF(:)g F4(R)p Gb(:)450
2492 y Gd(The)e(inversion)h(lemma)f(is)h(sometimes)g(called)e(the)i
Ge(generation)d(lemma)g Gd(for)i(the)g(typing)h(r)o(e-)450
2591 y(lation,)d(since,)f(given)h(a)e(valid)g(typing)i(statement,)f(it)
h(shows)g(how)g(a)e(pr)o(oof)g(of)h(this)h(statement)450
2691 y(could)i(have)f(been)h(generated.)1936 b FZ(2)450
2874 y F7(Pr)o(oof:)66 b Gd(Immediate)21 b(fr)o(om)f(the)h
(de\002nition)h(of)e(the)h(typing)h(r)o(elation.)751
b FZ(2)450 3056 y Ge(6.3.5)19 b(Theorem)h([Uniqueness)d(of)k(T)-7
b(ypes]:)41 b Gd(Each)21 b(term)h F4(t)f Gd(has)h(at)g(most)h(one)f
(type.)29 b(That)22 b(is,)450 3156 y(if)k F4(t)h Gd(is)g(typeable,)g
(then)g(its)g(type)g(is)g(unique.)44 b(Mor)o(eover)-6
b(,)26 b(ther)o(e)g(is)h(just)h(one)f(derivation)f(of)450
3256 y(this)21 b(typing)h(built)f(fr)o(om)f(the)h(infer)o(ence)f(r)o
(ules)h(of)g(De\002nition)h(6.3.1.)766 b FZ(2)450 3438
y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355 b FZ(2)450 3681
y F8(Safety)25 b(=)g(Preservation)g(+)g(Progress)450
3839 y Gd(The)35 b(most)g(basic)g(pr)o(operty)e(of)i(this)h(type)e
(system)i(or)e(any)h(other)g(is)g Ge(safety)f Gd(\(or)g
Ge(sound-)450 3939 y(ness)p Gd(\):)26 b(well-typed)c(pr)o(ograms)f(do)h
(not)g(\223go)g(wr)o(ong.\224)28 b(A)22 b(simple)g(way)g(of)f
(formalizing)h(this)450 4038 y(fact)31 b(is)h(the)h(observation)f(that)
g(well-typed)f(pr)o(ograms)h(can)g(only)h(r)o(educe)d(to)i(well-typed)
450 4138 y(pr)o(ograms\227that)20 b(is,)g(a)g(well-typed)g(pr)o(ogram)g
(can)g(never)g(r)o(each)f(an)h(ill-typed)g(state)g(at)g(r)o(un-)450
4238 y(time.)450 4420 y Ge(6.3.6)f(Theorem)h([Preservation)e(of)k
(types)d(during)h(evaluation]:)38 b Gd(If)24 b F4(t)29
b FF(:)g F4(T)24 b Gd(and)g F4(t)29 b F5(\000)-15 b FV(!)3287
4390 y FX(\003)3355 4420 y F4(t)3406 4390 y FX(0)3429
4420 y Gd(,)450 4520 y(then)21 b F4(t)685 4490 y FX(0)732
4520 y FF(:)i F4(T)p Gd(.)2523 b FZ(2)450 4702 y F7(Pr)o(oof:)66
b Gd(Exer)o(cise.)2355 b FZ(2)p eop
%%Page: 71 72
71 71 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(71)575 683 y(The)23 b(pr)o(eservation)f(theor)o(em)h(is)h(often)f
(called)g(\223subject)g(r)o(eduction\224)f(\(or)h(\223subject)g(eval-)
450 783 y(uation\224\))e(in)i(the)e(literatur)o(e\227the)g(intuition)i
(being)g(that)e(a)h(typing)g(statement)g F4(t)i FF(:)i
F4(T)21 b Gd(can)g(be)450 882 y(thought)i(of)e(as)g(a)g(sentence:)26
b(\223)p F4(t)21 b Gd(has)g(type)g F4(T)p Gd(.\224)27
b(The)21 b(term)g F4(t)g Gd(is)h(the)f(subject)h(of)f(this)h(sentence,)
450 982 y(and)d(the)h(subject)f(r)o(eduction)h(pr)o(operty)e(then)i
(says)g(that)f(the)h(tr)o(uth)g(of)f(the)h(sentence)g(is)f(stable)450
1082 y(under)h(r)o(eduction)h(of)f(the)h(subject.)575
1181 y(Recall)f(that)g(a)g(\223stuck\224)g(term)g(is)h(one)g(that)f(is)
h(in)g(normal)g(form)f(but)h(is)g(not)g(a)f(value)f(\(De\002-)450
1281 y(nition)j(3.2.22\).)450 1463 y Ge(6.3.7)d(Theorem)h([Progress]:)
40 b Gd(If)25 b F4(t)31 b FF(:)h F4(T)o Gd(,)26 b(then)g
F4(t)f Gd(is)g(not)h(stuck\227i.e.,)g(either)f F4(t)g
Gd(is)h(a)e(value)h(or)450 1563 y(ther)o(e)20 b(is)h(some)g
F4(t)1003 1533 y FX(0)1047 1563 y Gd(such)g(that)g F4(t)h
F5(\000)-14 b FV(!)23 b F4(t)1677 1533 y FX(0)1700 1563
y Gd(.)1673 b FZ(2)450 1746 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355
b FZ(2)575 1928 y Gd(The)32 b(combination)i(of)f(the)f(latter)g(pr)o
(operty)g(with)h(the)g(pr)o(eservation)f(theor)o(em)g(guar)o(-)450
2028 y(antees)e(that)h(\223well-typed)f(terms)g(never)h(get)f
(stuck.\224)55 b(This)31 b(combination)h(of)f(pr)o(operties)450
2128 y(captur)o(es)19 b(what)i(is)g(usually)g(thought)i(of)d(as)h
(\223type)f(safety\224)g(or)g(\223type)h(soundness.\224)450
2310 y Ge(6.3.8)e(Exercise)f([Homework]:)41 b F7(\(Due)19
b(on)h(Feb.)26 b(15.\))e Gd(Having)c(seen)g(the)f(\223subject)h(r)o
(eduction\224)422 b FP(\()450 2410 y Gd(pr)o(operty)-9
b(,)17 b(we)g(may)h(wonder)f(whether)h(the)g(opposite)g(\(\223subject)f
F7(expansion)p Gd(\224\))f(pr)o(operty)h(also)450 2510
y(holds.)30 b(Is)22 b(it)g(always)g(the)g(case)f(that,)h(if)f
F4(t)k F5(\000)-14 b FV(!)1917 2479 y FX(\003)1980 2510
y F4(t)2031 2479 y FX(0)2077 2510 y Gd(and)21 b F4(t)2290
2479 y FX(0)2339 2510 y FF(:)k F4(T)p Gd(,)d(then)g F4(t)j
FF(:)g F4(T)p Gd(?)k(If)21 b(so,)i(pr)o(ove)e(it.)450
2609 y(If)f(not,)i(give)e(a)h(counter)o(example.)j(Solution)e(on)f
(page)f(288.)1041 b FZ(2)450 2895 y Gj(6.4)119 b(Implementation)616
3076 y FT(type)40 b(ty)g(=)773 3167 y(TyBool)694 3258
y(|)g(TyNat)616 3441 y(let)g(rec)g(tyeqv)g(tyS)g(tyT)g(=)694
3532 y(match)h(\(tyS,tyT\))g(with)773 3624 y(\(TyBool,TyBool\))i
FO(!)c FT(true)694 3715 y(|)h(\(TyNat,TyNat\))i FO(!)d
FT(true)694 3806 y(|)h(_)f FO(!)g FT(false)616 3981 y(val)h(error)g(:)g
(info)g FO(!)f FT(string)i FO(!)e FT('a)616 4155 y(let)h(rec)g(typeof)g
(t)g(=)694 4246 y(match)h(t)e(with)773 4338 y(TmTrue\(fi\))i
FO(!)851 4429 y FT(TyBool)694 4520 y(|)f(TmFalse\(fi\))i
FO(!)812 4612 y FT(TyBool)694 4703 y(|)e(TmIf\(fi,s1,s2,s3\))j
FO(!)812 4794 y FT(if)d(tyeqv)g(\(typeof)h(s1\))f(TyBool)h(then)891
4886 y(let)f(tyS)f(=)h(typeof)h(s2)e(in)p eop
%%Page: 72 73
72 72 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(72)891 683 y FT(if)39 b(tyeqv)i(tyS)f(\(typeof)g(s3\))g(then)g
(tyS)891 774 y(else)g(error)g(fi)g("arms)g(of)g(conditional)i(have)e
(different)h(types")812 866 y(else)f(error)h(fi)e("guard)i(of)f
(conditional)h(not)f(a)g(boolean")694 957 y(|)g(TmZero\(fi\))h
FO(!)851 1048 y FT(TyNat)694 1140 y(|)f(TmSucc\(fi,t1\))i
FO(!)851 1231 y FT(if)e(tyeqv)g(\(typeof)h(t1\))f(TyNat)h(then)f(TyNat)
851 1322 y(else)h(error)f(fi)g("argument)h(of)f(succ)g(is)f(not)h(a)g
(number")694 1414 y(|)g(TmPred\(fi,t1\))i FO(!)851 1505
y FT(if)e(tyeqv)g(\(typeof)h(t1\))f(TyNat)h(then)f(TyNat)851
1596 y(else)h(error)f(fi)g("argument)h(of)f(pred)g(is)f(not)h(a)g
(number")694 1688 y(|)g(TmIsZero\(fi,t1\))j FO(!)851
1779 y FT(if)d(tyeqv)g(\(typeof)h(t1\))f(TyNat)h(then)f(TyBool)851
1870 y(else)h(error)f(fi)g("argument)h(of)f(iszero)g(is)g(not)g(a)f
(number")450 2156 y Gj(6.5)119 b(Summary)450 2427 y Ge(T)-7
b(yping)20 b(rules)g(for)h(booleans)1646 b FN(B)3146
2427 y
 gsave currentpoint translate 0 298838 7800 div 2396636 7800 div 595390
-7800 div box .9 setgray fill grestore
 3146 2427 a 16 w Ge(\(typed\))p 409 2509 9 36
v 418 2480 3000 6 v 3418 2480 38 6 v 3455 2509 9 36 v
450 2599 a F7(New)21 b(syntactic)e(forms)560 2730 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 560
2730 a 16 w F4(T)77 b Gd(::=)63 b(...)1695 b F7(types)852
2829 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2829 a 15 w F4(Bool)1627 b F7(type)20 b(of)g(booleans)450
3044 y(New)h(typing)e(rules)p 3209 2969 242 4 v 3209
3069 4 101 v 2202 w F4(t)k FF(:)g F4(T)p 3447 3069 V
3209 3072 242 4 v 1529 3191 a
 gsave currentpoint translate 0 419430 7800 div 3901361 7800 div 747110
-7800 div box .9 setgray fill grestore
 1529 3191 a 1553 3190 a
F4(true)e FF(:)j F4(Bool)3108 3191 y Gd(\()r(T)o(-)t(T)t
F6(R)t(U)t(E)r Gd(\))1507 3378 y
 gsave currentpoint translate 0 419430 7800 div 4245422 7800 div 747110
-7800 div box .9 setgray fill grestore
 1507 3378 a 1531 3377
a F4(false)d FF(:)i F4(Bool)3083 3378 y Gd(\()r(T)o(-)t(F)o
F6(A)t(L)t(S)t(E)q Gd(\))1173 3620 y
 gsave currentpoint translate 0 851966 7800 div 9520982 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1173 3620 a 1207
3564 a F4(t)1250 3576 y F1(1)1314 3564 y FF(:)g F4(Bool)165
b(t)1772 3576 y F1(2)1836 3564 y FF(:)23 b F4(T)166 b(t)2163
3576 y F1(3)2227 3564 y FF(:)23 b F4(T)p 1207 3601 1139
4 v 1252 3674 a(if)43 b(t)1427 3686 y F1(1)1511 3674
y F4(then)f(t)1772 3686 y F1(2)1856 3674 y F4(else)g(t)2118
3686 y F1(3)2182 3674 y FF(:)23 b F4(T)3239 3620 y Gd(\()r(T)o(-)t(I)t
F6(F)r Gd(\))p 409 3766 9 36 v 418 3766 3000 6 v 3418
3766 38 6 v 3455 3766 9 36 v 450 3998 a Ge(T)-7 b(yping)20
b(rules)g(for)h(numbers)1557 b FN(B)52 b(N)3146 3998
y
 gsave currentpoint translate 0 298838 7800 div 2396636 7800 div 595390
-7800 div box .9 setgray fill grestore
 3146 3998 a 16 w Ge(\(typed\))p 409 4080 9 36 v 418
4051 3000 6 v 3418 4051 38 6 v 3455 4080 9 36 v 450 4170
a F7(New)21 b(syntactic)e(forms)592 4301 y F4(T)61 b
Gd(::=)i(...)1695 b F7(types)852 4400 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4400 a 15
w F4(Nat)1671 b F7(type)15 b(of)g(natural)h(numbers)450
4615 y(New)21 b(typing)e(rules)p 3209 4540 242 4 v 3209
4640 4 101 v 2202 w F4(t)k FF(:)g F4(T)p 3447 4640 V
3209 4643 242 4 v 1616 4762 a
 gsave currentpoint translate 0 419430 7800 div 2525117 7800 div 747110
-7800 div box .9 setgray fill grestore
 1616 4762 a 1640 4761 a
F4(0)g FF(:)g F4(Nat)3103 4762 y Gd(\()r(T)o(-)t(Z)t
F6(E)t(R)t(O)s Gd(\))p eop
%%Page: 73 74
73 73 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)529 b
Gd(6)t(.)30 b(T)t F6(Y)t(P)t(E)t(D)25 b Gd(A)t F6(R)t(I)t(T)t(H)t(M)t
(E)t(T)t(I)t(C)h Gd(E)t F6(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)533
b Gd(73)1477 749 y
 gsave currentpoint translate 0 851966 7800 div 4722476 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1477 749 a 1620 693 a F4(t)1663 705
y F1(1)1727 693 y FF(:)23 b F4(Nat)p 1511 730 531 4 v
1511 803 a(succ)42 b(t)1772 815 y F1(1)1836 803 y FF(:)23
b F4(Nat)3106 749 y Gd(\()r(T)o(-)t(S)t F6(U)t(C)t(C)r
Gd(\))1477 1046 y
 gsave currentpoint translate 0 851966 7800 div 4722476 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1477 1046 a 1620 990 a F4(t)1663 1002
y F1(1)1727 990 y FF(:)g F4(Nat)p 1511 1027 531 4 v 1511
1100 a(pred)42 b(t)1772 1112 y F1(1)1836 1100 y FF(:)23
b F4(Nat)3109 1046 y Gd(\()r(T)o(-)t(P)t F6(R)t(E)t(D)s
Gd(\))1411 1343 y
 gsave currentpoint translate 0 851966 7800 div 5754659 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1411 1343 a 1620 1287 a F4(t)1663 1299
y F1(1)1727 1287 y FF(:)g F4(Nat)p 1445 1324 661 4 v
1445 1397 a(iszero)42 b(t)1794 1409 y F1(1)1858 1397
y FF(:)23 b F4(Bool)3032 1343 y Gd(\()r(T)o(-)t(I)t F6(S)t
Gd(Z)t F6(E)t(R)t(O)s Gd(\))p 409 1489 9 36 v 418 1489
3000 6 v 3418 1489 38 6 v 3455 1489 9 36 v eop
%%Page: 74 75
74 74 bop 450 1306 a F3(Chapter)44 b(7)450 1721 y Gk(Simply)51
b(T)-19 b(yped)450 1970 y(Lambda-Calculus)450 2402 y
Gd(This)26 b(chapter)f(intr)o(oduces)h(the)g(most)h(elementary)e
(member)h(of)f(the)h(family)g(of)g(typed)f(lan-)450 2501
y(guages)17 b(that)h(we)f(shall)h(be)f(studying)i(for)e(the)h(r)o(est)e
(of)i(the)g(book:)24 b(the)18 b(simply)g(typed)f(lambda-)450
2601 y(calculus)k(of)f(Chur)o(ch)h([Chu40)o(])f(and)g(Curry)h([CF58)o
(].)450 2887 y Gj(7.1)119 b(Syntax)450 3076 y Ge(7.1.1)19
b(De\002nition:)39 b Gd(The)28 b(set)h(of)f Ge(simple)f(types)g
Gd(over)h(the)h(atomic)f(type)h F4(Bool)d Gd(\(for)i(br)o(evity)-9
b(,)450 3175 y(we)21 b(omit)g(natural)g(numbers\))f(is)h(generated)f
(by)h(the)g(following)h(grammar:)592 3326 y F4(T)61 b
Gd(::=)1821 b F7(types)852 3426 y F4(T)p FV(!)o F4(T)1648
b F7(type)20 b(of)g(functions)852 3525 y F4(Bool)1642
b F7(type)20 b(of)g(booleans)471 3666 y Gd(The)g(type)h(constr)o(uctor)
h FV(!)f Gd(is)g(right-associative:)k F4(S)p FV(!)p F4(T)p
FV(!)o F4(U)c Gd(stands)f(for)h F4(S)p FV(!)p F4(\(T)p
FV(!)o F4(U\))o Gd(.)200 b FZ(2)450 3849 y Ge(7.1.2)19
b(De\002nition:)39 b Gd(The)16 b(abstract)e(syntax)i(of)g
Ge(simply)f(typed)f(lambda-terms)f Gd(\(with)j(booleans)450
3949 y(and)k(conditional\))i(is)f(de\002ned)f(by)h(the)g(following)h
(grammar:)592 4099 y F4(t)61 b Gd(::=)1821 b F7(terms)852
4199 y F4(x)1774 b F7(variable)852 4299 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)852 4398 y F4(t)43 b(t)1687 b F7(application)852
4498 y F4(true)1642 b F7(constant)20 b(true)852 4597
y F4(false)1598 b F7(constant)20 b(false)852 4697 y F4(if)42
b(t)i(then)d(t)j(else)e(t)1033 b F7(conditional)3394
4838 y FZ(2)1908 5169 y Gd(74)p eop
%%Page: 75 76
75 75 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(75)575 683 y(In)32 b(the)h(literatur)o(e)e(on)i(type)f
(systems,)k(two)d(dif)o(fer)o(ent)e(pr)o(esentation)h(styles)h(ar)o(e)e
(com-)450 783 y(monly)22 b(used:)575 929 y F5(\017)41
b Gd(In)21 b Ge(implicitly)d(typed)h Gd(\(or)-6 b(,)20
b(for)h(historical)g(r)o(easons,)f Ge(Curry-style)p Gd(\))g(systems,)h
(the)g(pur)o(e)658 1029 y(\(untyped\))27 b(lambda-calculus)g(is)h(used)
g(as)g(the)g(term)g(language.)48 b(The)28 b(typing)h(r)o(ules)658
1129 y(de\002ne)20 b(a)g(r)o(elation)h(between)f(untyped)h(terms)g(and)
f(the)h(types)g(that)g(classify)f(them.)575 1285 y F5(\017)41
b Gd(In)22 b Ge(explicitly)e(typed)h Gd(\(or)h Ge(Church-style)p
Gd(\))e(systems,)k(the)e(term)h(language)f(itself)g(is)h(r)o(e-)658
1385 y(\002ned)j(so)i(that)f(terms)f(carry)g(some)i(type)f(information)
g(within)h(them;)i(for)d(example,)658 1484 y(the)f(bound)g(variables)f
(in)h(function)h(abstractions)f(ar)o(e)f(always)g(annotated)h(with)h
(the)658 1584 y(type)j(of)h(the)g(expected)e(parameter)-6
b(.)53 b(The)31 b(type)g(system)g(r)o(elates)e(typed)i(terms)f(and)658
1684 y(their)20 b(types.)450 1830 y(T)-8 b(o)26 b(a)f(lar)o(ge)f(degr)o
(ee,)g(the)i(choice)f(is)h(a)f(matter)f(of)i(taste,)f(though)i
(explicitly)e(typed)g(systems)450 1930 y(generally)31
b(pose)h(fewer)f(algorithmic)h(pr)o(oblems)g(for)f(typecheckers.)58
b(W)-8 b(e)32 b(will)g(adopt)f(an)450 2030 y(explicitly)21
b(typed)f(pr)o(esentation)h(thr)o(oughout.)450 2311 y
Gj(7.2)119 b(The)29 b(T)-11 b(yping)31 b(Relation)450
2500 y Gd(In)c(or)o(der)e(to)h(assign)h(a)f(type)g(to)g(an)g
(abstraction)g(like)h Gb(\025)p F4(x:T)2374 2512 y F1(1)2414
2500 y F4(.t)2501 2512 y F1(2)2542 2500 y Gd(,)g(we)f(need)g(to)h(know)
g(what)450 2600 y(will)33 b(happen)e F7(later)i Gd(when)f(it)g(is)h
(applied)e(to)h(some)h(ar)o(gument.)58 b(The)32 b(annotation)h(on)g
(the)450 2699 y(bound)24 b(variable)e(tells)i(us)g(that)g(we)f(may)h
(assume)f(that)h(the)g(ar)o(gument)f(will)h(be)f(of)h(type)f
F4(T)3389 2711 y F1(1)3429 2699 y Gd(.)450 2799 y(In)e(other)g(wor)o
(ds,)f(the)g(type)h(of)f(the)h(r)o(esult)f(will)h(be)f(just)h(the)g
(type)f(of)h F4(t)2686 2811 y F1(2)2727 2799 y Gd(,)f(wher)o(e)g
(occurr)o(ences)450 2899 y(of)g F4(x)g Gd(in)g F4(t)743
2911 y F1(2)803 2899 y Gd(ar)o(e)f(assumed)g(to)i(denote)f(terms)g(of)g
(type)g F4(T)2192 2911 y F1(1)2233 2899 y Gd(.)25 b(This)c(intuition)g
(is)g(captur)o(ed)d(by)i(the)450 2998 y(following)i(r)o(ule:)1509
3120 y F4(x:T)1640 3132 y F1(1)1703 3120 y F5(`)h F4(t)1821
3132 y F1(2)1884 3120 y FF(:)h F4(T)2002 3132 y F1(2)p
1393 3163 767 4 v 1393 3242 a F5(`)f Gb(\025)p F4(x:T)1642
3254 y F1(1)1683 3242 y F4(.t)1770 3254 y F1(2)1834 3242
y FF(:)g F4(T)1951 3254 y F1(1)1992 3242 y FV(!)p F4(T)2119
3254 y F1(2)3160 3182 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q
Gd(\))450 3361 y(Since,)31 b(in)f(general,)h(function)f(abstractions)f
(can)g(be)g(nested,)i(typing)g(assertions)f(actually)450
3461 y(have)22 b(the)g(form)g Gb(\000)k F5(`)f F4(t)h
FF(:)g F4(T)o Gd(,)d(pr)o(onounced)f(\223term)g F4(t)f
Gd(has)i(type)f F4(T)f Gd(under)h(the)h(assumptions)g
Gb(\000)450 3561 y Gd(about)e(the)g(types)g(of)g(its)h(fr)o(ee)d
(variables.\224)25 b(Formally)-9 b(,)21 b(the)h Ge(typing)e(context)f
Gb(\000)i Gd(is)g(just)h(a)e(list)i(of)450 3660 y(variables)d(and)g
(their)h(types,)g(and)g(the)g(\223comma\224)f(operator)h(extends)f
Gb(\000)h Gd(by)g(concatenating)g(a)450 3760 y(new)26
b(binding)g(on)f(the)h(right.)39 b(T)-8 b(o)26 b(avoid)f(confusion)h
(between)f(the)h(new)f(binding)h(and)f(any)450 3859 y(bindings)j(that)f
(may)g(alr)o(eady)e(appear)g(in)j Gb(\000)5 b Gd(,)23
b(we)k(r)o(equir)o(e)f(that)h(the)g(name)f F4(x)h Gd(be)g(chosen)g(so)
450 3959 y(that)i(it)g(does)g(not)g(alr)o(eady)e(appear)g(in)i
F7(dom)o FY(\()p Gb(\000)6 b FY(\))p Gd(;)27 b(this)j(condition)g(can)e
(always)h(be)f(satis\002ed)450 4059 y(by)d(r)o(enaming)g(the)h(bound)f
(variable)f(if)i(necessary)-9 b(.)38 b Gb(\000)25 b Gd(can)g(thus)h(be)
f(thought)h(of)g(as)f(a)f(\002nite)450 4158 y(function)k(fr)o(om)f
(variables)f(to)h(their)g(types.)45 b(Following)29 b(this)f(intuition,)
i(we)e(write)f F7(dom)o FY(\()p Gb(\000)6 b FY(\))450
4258 y Gd(for)21 b(the)f(set)h(of)g(variables)f(bound)h(by)g
Gb(\000)5 b Gd(.)575 4358 y(So)20 b(the)h(r)o(ule)g(for)g(typing)g
(abstractions)g(actually)f(has)h(the)g(general)f(form)1464
4479 y Gb(\000)5 b(;)18 b F4(x:T)1685 4491 y F1(1)1749
4479 y F5(`)23 b F4(t)1866 4491 y F1(2)1930 4479 y FF(:)g
F4(T)2048 4491 y F1(2)p 1359 4522 835 4 v 1359 4602 a
Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676 4614 y F1(1)1717
4602 y F4(.t)1804 4614 y F1(2)1867 4602 y FF(:)i F4(T)1985
4614 y F1(1)2026 4602 y FV(!)p F4(T)2152 4614 y F1(2)3160
4541 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))450 4721
y(wher)o(e)c(the)h(pr)o(emise)f(adds)g(one)h(mor)o(e)g(assumption)h(to)
f(those)g(in)g(the)g(conclusion.)575 4820 y(The)e(typing)h(r)o(ule)g
(for)f(variables)f(follows)j(immediately)e(fr)o(om)g(this)i
(discussion.)26 b(A)19 b(vari-)450 4920 y(able)h(has)h(whatever)f(type)
h(we)f(ar)o(e)g(curr)o(ently)g(assuming)i(it)f(to)g(have:)p
eop
%%Page: 76 77
76 76 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(76)1637 670 y F4(x:T)22 b F5(2)i Gb(\000)p 1613
713 327 4 v 1613 792 a(\000)f F5(`)f F4(x)h FF(:)g F4(T)3152
732 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))450 914 y(Next,)d(we)h(need)
f(a)h(r)o(ule)f(for)h(application:)1148 1037 y Gb(\000)h
F5(`)h F4(t)1333 1049 y F1(1)1396 1037 y FF(:)h F4(T)1514
1049 y F1(11)1591 1037 y FV(!)p F4(T)1718 1049 y F1(12)1961
1037 y Gb(\000)f F5(`)f F4(t)2146 1049 y F1(2)2209 1037
y FF(:)i F4(T)2327 1049 y F1(11)p 1148 1081 1257 4 v
1490 1160 a Gb(\000)f F5(`)g F4(t)1676 1172 y F1(1)1760
1160 y F4(t)1803 1172 y F1(2)1867 1160 y FF(:)g F4(T)1985
1172 y F1(12)3155 1100 y Gd(\()r(T)o(-)t(A)t F6(P)t(P)r
Gd(\))450 1281 y(In)c(English:)26 b(If)19 b F4(t)986
1293 y F1(1)1046 1281 y Gd(evaluates)f(to)h(a)g(function)h(mapping)f
(ar)o(guments)g(in)g F4(T)2789 1293 y F1(11)2885 1281
y Gd(to)g(r)o(esults)g(in)h F4(T)3373 1293 y F1(12)450
1381 y Gd(\(under)e(the)i(assumption)g(that)f(the)g(terms)g(r)o(epr)o
(esented)e(by)i(its)h(fr)o(ee)d(variables)h(yield)h(r)o(esults)450
1481 y(of)h(the)f(types)h(associated)f(to)h(them)g(by)g
Gb(\000)6 b Gd(\))o(,)14 b(and)19 b(if)h F4(t)2092 1493
y F1(2)2153 1481 y Gd(evaluates)e(to)i(a)f(r)o(esult)h(in)g
F4(T)3034 1493 y F1(11)3111 1481 y Gd(,)g(then)g(the)450
1580 y(r)o(esult)g(of)h(applying)g F4(t)1167 1592 y F1(1)1228
1580 y Gd(to)g F4(t)1365 1592 y F1(2)1426 1580 y Gd(will)g(be)g(a)f
(value)g(of)h(type)g F4(T)2301 1592 y F1(12)2378 1580
y Gd(.)575 1680 y(W)-8 b(e)28 b(have)h(now)g(given)g(typing)g(r)o(ules)
g(for)g(each)f(of)h(the)f(individual)h(constr)o(ucts)h(in)f(our)450
1780 y(simple)34 b(language.)65 b(T)-8 b(o)35 b(assign)f(types)g(to)h
(whole)f(pr)o(ograms,)j(we)d(combine)h(these)f(r)o(ules)450
1879 y(into)23 b(derivation)f(tr)o(ees.)29 b(For)22 b(example,)g(her)o
(e)f(is)i(a)f(derivation)g(tr)o(ee)f(showing)j(that)e(the)g(term)450
1979 y F4(\()p Gb(\025)p F4(x:Bool.x\))39 b(true)20 b
Gd(has)g(type)h F4(Bool)e Gd(in)i(the)g(empty)g(context:)p
1048 2140 674 5 v 1749 2158 a FD(T-)t(V)m FE(A)t(R)1048
2230 y F4(x:Bool)g F5(`)i F4(x)g FF(:)g F4(Bool)p 900
2283 997 5 v 1923 2301 a FD(T-)t(A)t FE(B)t(S)900 2373
y F5(`)f Gb(\025)p F4(x:Bool.x)e FF(:)j F4(Bool)p FV(!)o
F4(Bool)p 2215 2283 520 5 v 2762 2301 a FD(T-)t(T)t FE(R)t(U)t(E)2215
2373 y F5(`)g F4(true)e FF(:)j F4(Bool)p 900 2426 1861
5 v 2787 2444 a FD(T-)t(A)t FE(P)t(P)1308 2516 y F5(`)e
F4(\()p Gb(\025)p F4(x:Bool.x\))40 b(true)21 b FF(:)j
F4(Bool)450 2662 y Ge(7.2.1)19 b(Exercise)f([Quick)i(check]:)40
b Gd(Show)33 b(\(by)g(exhibiting)h(derivation)e(tr)o(ees\))g(that)h
(the)g(fol-)450 2762 y(lowing)22 b(terms)f(have)f(the)h(indicated)f
(types)h(in)g(the)g(given)g(contexts:)554 2918 y(1.)41
b F4(f)o(:Bool)p FV(!)n F4(Bool)22 b F5(`)g F4(f)43 b(\(if)g(false)e
(then)h(true)g(else)g(false\))21 b FF(:)i F4(Bool)554
3079 y Gd(2.)41 b F4(f)o(:Bool)p FV(!)n F4(Bool)22 b
F5(`)g Gb(\025)p F4(x:Bool.)41 b(f)i(\(if)f(x)i(then)e(false)f(else)h
(x\))22 b FF(:)i F4(Bool)p FV(!)n F4(Bool)63 b FZ(2)450
3249 y Ge(7.2.2)19 b(Exercise)f([Quick)i(check]:)40 b
Gd(Find)32 b(a)g(context)h Gb(\000)f Gd(under)g(which)h(the)f(term)h
F4(f)43 b(x)g(y)32 b Gd(has)450 3348 y(type)21 b F4(Bool)n
Gd(.)k(Can)c(you)g(give)g(a)f(simple)h(description)h(of)e(the)h(set)g
(of)g F7(all)f Gd(such)i(contexts?)185 b FZ(2)575 3519
y Gd(It)22 b(is)i(inter)o(esting)f(to)g(note)g(that,)g(in)h(the)f
(above)f(discussion,)i(the)f(\223)p FV(!)p Gd(\224)f(type)h(constr)o
(uctor)450 3618 y(comes)e(with)h(typing)f(r)o(ules)g(of)g(two)g(kinds:)
736 3774 y(1.)41 b(an)19 b Ge(introduction)e(rule)h Gd(\()r(T)o(-)t(A)t
F6(B)t(S)q Gd(\))h(describing)g(how)g(elements)h(of)f(the)g(type)840
3874 y(can)i(be)f F7(cr)o(eated)p Gd(,)g(and)736 4002
y(2.)41 b(an)22 b Ge(elimination)d(rule)i Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))g(describing)h(how)h(elements)g(of)e(the)i(type)840
4101 y(can)e(be)f F7(used)p Gd(.)450 4257 y(This)28 b(terminology)-9
b(,)31 b(which)d(arises)g(fr)o(om)f(connections)i(between)f(type)f
(theory)h(and)g(logic,)450 4357 y(is)c(fr)o(equently)g(useful)g(in)h
(discussing)g(type)f(systems.)36 b(When)24 b(we)g(come)h(to)f(consider)
g(mor)o(e)450 4457 y(complex)d(systems)i(later)d(in)i(the)f(course,)g
(we'll)h(see)f(a)g(similar)g(pattern)g(of)g(linked)h(intr)o(oduc-)450
4556 y(tion)g(and)e(elimination)i(r)o(ules)f(for)g(each)f(type)g
(constr)o(uctor)i(we)f(consider)-6 b(.)450 4726 y Ge(7.2.3)19
b(Exercise)f([Quick)i(check]:)40 b Gd(Which)17 b(of)g(the)h(r)o(ules)f
(for)g(the)g(type)g F4(Bool)f Gd(ar)o(e)f(intr)o(oduction)450
4826 y(r)o(ules)21 b(and)f(which)i(ar)o(e)d(elimination)j(r)o(ules?)k
(Solution)c(on)f(page)g(289.)726 b FZ(2)p eop
%%Page: 77 78
77 77 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(77)450 684 y Gj(7.3)119 b(Summary)450 873 y
Gd(W)-8 b(e)33 b(have)f(been)h(discussing)h(the)f(simply)h(typed)e
(lambda-calculus)f(with)j(booleans)f(and)450 973 y(conditionals.)44
b(In)26 b(later)g(chapters,)h(we)g(ar)o(e)e(going)i(to)g(want)g(to)g
(extend)e(the)i(simply)g(typed)450 1072 y(lambda-calculus)17
b(with)i(many)g(other)g(base)f(types,)h(in)g(addition)f(to)h(or)g
(instead)f(of)h(booleans.)450 1172 y(W)-8 b(e)31 b(ther)o(efor)o(e)e
(split)i(the)g(formal)f(summary)h(of)g(the)g(system)g(into)h(two)f
(pieces:)45 b(the)31 b Ge(pure)450 1271 y Gd(simply)22
b(typed)e(lambda)g(calculus)g(with)h(no)h(base)e(types)g(at)h(all,)f
(and)g(a)g(separate)f(set)i(of)g(r)o(ules)450 1371 y(for)g(booleans)g
(\(which)g(we)g(have)f(alr)o(eady)f(seen)i(on)g(page)f(72\).)450
1537 y Gb(\025)495 1507 y FC(!)585 1537 y Ge(:)26 b(Simply)19
b(typed)h(lambda-calculus)1249 b FV(!)3146 1537 y
 gsave currentpoint translate 0 298838 7800 div 2396636 7800 div 595390
-7800 div box .9 setgray fill grestore
 3146
1537 a 16 w Ge(\(typed\))p 409 1619 9 36 v 418 1589 3000
6 v 3418 1589 38 6 v 3455 1619 9 36 v 450 1709 a F7(Syntax)592
1839 y F4(t)61 b Gd(::=)1821 b F7(terms)852 1939 y F4(x)1774
b F7(variable)852 2039 y Gb(\025)p F4(x)940 2039 y
 gsave currentpoint translate 0 124518 7800 div 937158 7800 div 525016
-7800 div box .9 setgray fill grestore
 940
2039 a 16 w F4(:T)15 b(.t)1523 b F7(abstraction)852 2138
y F4(t)43 b(t)1687 b F7(application)592 2338 y F4(v)61
b Gd(::=)1821 b F7(values)852 2437 y Gb(\025)p F4(x)940
2437 y
 gsave currentpoint translate 0 124518 7800 div 937158 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 2437 a 16 w F4(:T)15 b(.t)1523 b F7(abstraction)21
b(value)560 2636 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 560 2636 a 16 w F4(T)77 b Gd(::=)1821
b F7(types)852 2736 y
 gsave currentpoint translate 0 124518 7800 div 1592519 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2736 a 15 w F4(T)p FV(!)p F4(T)1632
b F7(type)20 b(of)g(functions)559 2935 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 559 2935 a 16
w Gb(\000)77 b Gd(::=)1821 b F7(contexts)852 3035 y
 gsave currentpoint translate 0 160926 7800 div 576717 7800 div 616038
-7800 div box .9 setgray fill grestore
 852
3035 a 15 w F5(;)1761 b F7(empty)19 b(context)852 3135
y
 gsave currentpoint translate 0 124518 7800 div 1998861 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 3135 a 15 w Gb(\000)6 b(;)17 b F4(x:T)1580 b F7(term)21
b(variable)g(binding)450 3349 y(Evaluation)p 3096 3262
355 4 v 3096 3374 4 113 v 2304 w F4(t)i F5(\000)-15 b
FV(!)23 b F4(t)3398 3319 y FX(0)p 3447 3374 V 3096 3377
355 4 v 1139 3464 a F4(\()p Gb(\025)p F4(x)1271 3464
y
 gsave currentpoint translate 0 222821 7800 div 1543926 7800 div 525016
-7800 div box .9 setgray fill grestore
 1271 3464 a 16 w F4(:T)1374 3476 y F1(11)1467 3464
y F4(.t)1554 3476 y F1(12)1631 3464 y F4(\))43 b(v)1762
3476 y F1(2)1825 3464 y F5(\000)-14 b FV(!)23 b F0(f)p
F4(x)f F5(7)p FV(!)h F4(v)2225 3476 y F1(2)2266 3464
y F0(g)p F4(t)2336 3476 y F1(12)3113 3465 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)p Gd(\))1602 3603 y F4(t)1645 3615 y F1(1)1709
3603 y F5(\000)-14 b FV(!)23 b F4(t)1917 3573 y FX(0)1909
3626 y F1(1)p 1474 3646 604 4 v 1474 3726 a F4(t)1518
3738 y F1(1)1602 3726 y F4(t)1645 3738 y F1(2)1709 3726
y F5(\000)-14 b FV(!)23 b F4(t)1917 3696 y FX(0)1909
3749 y F1(1)1994 3726 y F4(t)2037 3738 y F1(2)3105 3665
y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(1)q(\))1602 3865
y F4(t)1645 3877 y F1(2)1709 3865 y F5(\000)-14 b FV(!)23
b F4(t)1917 3835 y FX(0)1909 3888 y F1(2)p 1474 3908
V 1474 3987 a F4(v)1518 3999 y F1(1)1602 3987 y F4(t)1645
3999 y F1(2)1709 3987 y F5(\000)-14 b FV(!)23 b F4(v)1909
3999 y F1(1)1994 3987 y F4(t)2045 3958 y FX(0)2037 4011
y F1(2)3105 3927 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))450
4159 y F7(T)-8 b(yping)p 3059 4060 392 4 v 3059 4199
4 140 v 3087 4159 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 3087 4159 a 16 w Gb(\000)23 b F5(`)15
b F4(t)23 b FF(:)g F4(T)p 3447 4199 4 140 v 3059 4202
392 4 v 1579 4376 a
 gsave currentpoint translate 0 851966 7800 div 3112505 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1579 4376 a 1637 4320 a F4(x:T)f
F5(2)i Gb(\000)p 1613 4357 327 4 v 1613 4430 a(\000)f
F5(`)f F4(x)h FF(:)g F4(T)3152 4376 y Gd(\()r(T)o(-)t(V)l
F6(A)t(R)r Gd(\))1325 4673 y
 gsave currentpoint translate 0 851966 7800 div 7122304 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1325 4673 a 1464 4617 a
Gb(\000)5 b(;)18 b F4(x:T)1685 4629 y F1(1)1749 4617
y F5(`)23 b F4(t)1866 4629 y F1(2)1930 4617 y FF(:)g
F4(T)2048 4629 y F1(2)p 1359 4654 835 4 v 1359 4726 a
Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676 4738 y F1(1)1717
4726 y F4(.t)1804 4738 y F1(2)1867 4726 y FF(:)i F4(T)1985
4738 y F1(1)2026 4726 y FV(!)p F4(T)2152 4738 y F1(2)3160
4673 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))p eop
%%Page: 78 79
78 78 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(78)1114 749 y
 gsave currentpoint translate 0 851966 7800 div 10457598 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1114 749 a 1148 693 a Gb(\000)22
b F5(`)h F4(t)1333 705 y F1(1)1396 693 y FF(:)h F4(T)1514
705 y F1(11)1591 693 y FV(!)p F4(T)1718 705 y F1(12)1961
693 y Gb(\000)f F5(`)f F4(t)2146 705 y F1(2)2209 693
y FF(:)i F4(T)2327 705 y F1(11)p 1148 730 1257 4 v 1490
803 a Gb(\000)f F5(`)g F4(t)1676 815 y F1(1)1760 803
y F4(t)1803 815 y F1(2)1867 803 y FF(:)g F4(T)1985 815
y F1(12)3155 749 y Gd(\()r(T)o(-)t(A)t F6(P)t(P)r Gd(\))p
409 895 9 36 v 418 895 3000 6 v 3418 895 38 6 v 3455
895 9 36 v 450 1061 a(The)j(highlighted)h(ar)o(eas)e(her)o(e)g(ar)o(e)g
(used)g(to)i(mark)f(material)f(that)h(is)g(new)h(with)g(r)o(espect)e
(to)450 1161 y(the)19 b(untyped)f(lambda-calculus\227whole)g(new)h(r)o
(ules)f(as)h(well)f(as)h(new)f(bits)h(that)f(need)g(to)h(be)450
1261 y(added)g(to)i(r)o(ules)g(that)g(we)g(have)f(alr)o(eady)f(seen.)
450 1443 y Ge(7.3.1)g(Exercise)f([Quick)i(check]:)40
b Gd(The)15 b(system)i Gb(\025)2029 1413 y FC(!)2114
1443 y Gd(by)f(itself)g(is)g(actually)f(trivial,)h(in)h(the)e(sense)450
1543 y(that)21 b(it)g(has)f(no)i(well-typed)e(pr)o(ograms)g(at)h(all.)k
(Why?)h(Solution)c(on)f(page)f(289.)398 b FZ(2)450 1828
y Gj(7.4)119 b(Properties)29 b(of)h(T)-11 b(yping)30
b(and)g(Reduction)450 2034 y F8(T)-9 b(ypechecking)450
2192 y Gd(As)32 b(in)g(Chapter)g(6,)i(we)e(need)f(to)i(develop)e(a)h
(few)f(basic)h(lemmas)g(befor)o(e)f(we)h(can)g(pr)o(ove)450
2292 y(type)g(soundness.)61 b(Most)33 b(of)f(these)g(ar)o(e)f(similar)h
(to)h(what)f(we)h(saw)f(befor)o(e)f(\(just)h(adding)450
2392 y(contexts)e(to)f(the)g(typing)h(r)o(elation)f(and)g(adding)g
(appr)o(opriate)e(clauses)i(for)g Gb(\025)p Gd(-terms.)50
b(The)450 2491 y(only)22 b(signi\002cant)g(new)f(r)o(equir)o(ement)f
(is)i(a)e(substitution)j(principle)e(for)g(the)g(typing)g(r)o(elation)
450 2591 y(\(Lemma)f(7.4.8\).)450 2773 y Ge(7.4.1)f(Lemma)g([Inversion)
h(of)h(the)f(typing)f(relation]:)554 2940 y Gd(1.)41
b(If)20 b Gb(\000)j F5(`)g F4(x)f FF(:)i F4(R)o Gd(,)d(then)g
F4(x:R)h F5(2)h Gb(\000)6 b Gd(.)554 3106 y(2.)41 b(If)22
b Gb(\000)27 b F5(`)g Gb(\025)p F4(x:T)1061 3118 y F1(1)1102
3106 y F4(.)43 b(t)1233 3118 y F1(2)1300 3106 y FF(:)28
b F4(R)o Gd(,)23 b(then)h F4(R)i FY(=)h F4(R)1857 3118
y F1(1)1897 3106 y FV(!)p F4(R)2024 3118 y F1(2)2087
3106 y Gd(for)c(some)g F4(R)2476 3118 y F1(1)2539 3106
y Gd(and)g F4(R)2746 3118 y F1(2)2810 3106 y Gd(with)h
F4(R)3045 3118 y F1(1)3113 3106 y FY(=)i F4(T)3246 3118
y F1(1)3309 3106 y Gd(and)658 3205 y Gb(\000)5 b(;)17
b F4(x:T)879 3217 y F1(1)943 3205 y F5(`)23 b F4(t)1060
3217 y F1(2)1124 3205 y FF(:)g F4(R)1242 3217 y F1(2)1282
3205 y Gd(.)554 3371 y(3.)41 b(If)23 b Gb(\000)29 b F5(`)f
F4(t)934 3383 y F1(1)1018 3371 y F4(t)1062 3383 y F1(2)1131
3371 y FF(:)h F4(R)p Gd(,)24 b(then)h(ther)o(e)e(is)h(some)h(type)e
F4(T)2229 3383 y F1(11)2330 3371 y Gd(such)h(that)g Gb(\000)29
b F5(`)f F4(t)2889 3383 y F1(1)2958 3371 y FF(:)h F4(T)3082
3383 y F1(11)3159 3371 y FV(!)p F4(R)23 b Gd(and)658
3471 y Gb(\000)f F5(`)h F4(t)843 3483 y F1(2)906 3471
y FF(:)h F4(T)1024 3483 y F1(11)1101 3471 y Gd(.)554
3637 y(4.)41 b(If)20 b Gb(\000)j F5(`)g F4(true)e FF(:)i
F4(R)p Gd(,)d(then)i F4(R)g FY(=)h F4(Bool)n Gd(.)554
3803 y(5.)41 b(If)20 b Gb(\000)j F5(`)g F4(false)e FF(:)i
F4(R)o Gd(,)e(then)g F4(R)i FY(=)g F4(Bool)n Gd(.)554
3969 y(6.)41 b(If)20 b Gb(\000)j F5(`)g F4(if)42 b(t)1050
3981 y F1(1)1134 3969 y F4(then)g(t)1396 3981 y F1(2)1480
3969 y F4(else)g(t)1741 3981 y F1(3)1805 3969 y FF(:)23
b F4(R)p Gd(,)d(then)1767 4110 y Gb(\000)i F5(`)h F4(t)1952
4122 y F1(1)2015 4110 y FF(:)h F4(Bool)1767 4209 y Gb(\000)e
F5(`)h F4(t)1952 4221 y F1(2)2015 4209 y FF(:)h F4(R)1767
4309 y Gb(\000)e F5(`)h F4(t)1952 4321 y F1(3)2015 4309
y FF(:)h F4(R)o Gb(:)1238 b FZ(2)450 4508 y F7(Pr)o(oof:)66
b Gd(Immediate)21 b(fr)o(om)f(the)h(de\002nition)h(of)e(the)h(typing)h
(r)o(elation.)751 b FZ(2)450 4691 y Ge(7.4.2)19 b(Exercise)f([Easy]:)40
b Gd(W)-6 b(rite)26 b(out)h(a)f(typechecking)g(algorithm)h(for)f
Gb(\025)2784 4661 y FC(!)2880 4691 y Gd(in)h(pseudo-code)450
4790 y(or)16 b(a)g(pr)o(ogramming)h(language)f(of)g(your)g(choice.)25
b(Compar)o(e)15 b(your)h(answer)g(with)i(the)e(OCaml)450
4890 y(implementation)22 b(in)f(Section)g(7.5.)1832 b
FZ(2)p eop
%%Page: 79 80
79 79 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(79)575 683 y(In)22 b(Section)g(7.1,)g(we)g(chose)h(to)f(use)g
(an)h(explicitly)f(typed)g(pr)o(esentation)g(of)g(the)g(calculus,)450
783 y(partly)k(in)g(or)o(der)f(to)i(simplify)g(the)f(algorithmic)h
(issues)f(involved)h(in)f(typechecking.)42 b(This)450
882 y(involved)21 b(adding)f(type)h(annotations)h(to)f(bound)g
(variables)f(in)h(function)h(abstractions,)e(but)450
982 y(nowher)o(e)h(else.)k(In)c(what)g(sense)g(is)g(this)h
(\223enough\224?)575 1082 y(One)j(answer)g(is)h(pr)o(ovided)d(by)j(the)
f(\223uniqueness)h(of)f(types\224)g(theor)o(em,)h(the)f(substance)450
1181 y(of)17 b(which)h(is)f(that)g(well-typed)g(terms)g(ar)o(e)f(in)h
(one-to-one)h(corr)o(espondence)e(with)i(the)f(typing)450
1281 y(derivations)22 b(that)h(justify)g(their)f(well-typedness)h(\(in)
f(a)g(given)h(envir)o(onment\).)31 b(The)22 b(typing)450
1380 y(derivation)c(can)g(be)g(r)o(ecover)o(ed)e(immediately)i(fr)o(om)
g(the)g(term,)g(and)g(vice)g(versa.)24 b(In)18 b(fact,)g(the)450
1480 y(corr)o(espondence)25 b(is)h(so)g(straightforwar)o(d)f(that,)i
(in)f(a)f(sense,)i(ther)o(e)e(is)h(little)g(dif)o(fer)o(ence)e(be-)450
1580 y(tween)c(the)f(term)g(and)g(the)h(derivation.)k(\(For)c(many)f
(of)h(the)f(type)h(systems)g(that)f(we)g(will)i(see,)450
1679 y(this)k(simple)f(corr)o(espondence)f(will)i(not)g(hold:)32
b(ther)o(e)23 b(will)i(be)e(signi\002cant)i(work)g(involved)450
1779 y(in)19 b(showing)i(that)e(typing)h(derivations)f(can)f(be)h(r)o
(ecover)o(ed)e(ef)o(fectively)g(fr)o(om)i(typed)f(terms.\))450
1944 y Ge(7.4.3)h(Theorem)h([Uniqueness)d(of)k(T)-7 b(ypes]:)41
b Gd(In)21 b(a)f(given)h(typing)g(context)g Gb(\000)6
b Gd(,)14 b(a)21 b(term)f F4(t)h Gd(\(with)450 2043 y(fr)o(ee)28
b(variables)h(all)g(in)h(the)g(domain)g(of)g Gb(\000)5
b Gd(\))24 b(has)29 b(at)h(most)g(one)g(type.)52 b(That)30
b(is,)i(if)d(a)g(term)h(is)450 2143 y(typeable,)j(then)f(its)g(type)f
(is)h(unique.)58 b(Mor)o(eover)-6 b(,)32 b(ther)o(e)f(is)h(just)g(one)g
(derivation)f(of)g(this)450 2242 y(typing)22 b(built)f(fr)o(om)f(the)h
(infer)o(ence)f(r)o(ules)h(that)f(generate)g(the)h(typing)h(r)o
(elation.)394 b FZ(2)575 2407 y Gd(The)27 b(pr)o(oof)f(of)h(the)h
(uniqueness)g(theor)o(em)f(is)h(so)g(dir)o(ect)e(that)h(ther)o(e)f(is)i
(almost)f(nothing)450 2507 y(to)c(say)-9 b(.)30 b(W)-8
b(e)22 b(pr)o(esent)g(a)g(few)g(cases)g(car)o(efully)f(just)i(to)g
(illustrate)f(the)h(str)o(uctur)o(e)e(of)i(pr)o(oofs)f(by)450
2606 y(induction)g(on)f(typing)h(derivations.)450 2771
y F7(Pr)o(oof:)66 b Gd(Suppose)23 b(that)g Gb(\000)j
F5(`)h F4(t)f FF(:)h F4(S)c Gd(and)f Gb(\000)27 b F5(`)f
F4(t)g FF(:)i F4(T)o Gd(.)k(W)-8 b(e)23 b(show)-8 b(,)24
b(by)f(induction)h(on)f(a)f(deriva-)450 2871 y(tion)g(of)e
Gb(\000)j F5(`)g F4(t)g FF(:)g F4(T)p Gd(,)d(that)h F4(S)h
FY(=)h F4(T)p Gd(.)450 2992 y F7(Case)h Gd(T)o(-)t(V)l
F6(A)t(R)r F7(:)134 b F4(t)23 b FY(=)g F4(x)1025 3091
y Gd(with)f F4(x:T)g F5(2)h Gb(\000)450 3211 y Gd(By)18
b(case)g(\(1\))g(of)g(the)h(inversion)g(lemma)g(\(7.4.1\),)d(the)j
(\002nal)f(r)o(ule)h(in)g(any)g(derivation)f(of)g Gb(\000)23
b F5(`)g F4(t)g FF(:)450 3311 y F4(S)d Gd(must)i(also)f(be)h(T)o(-)t(V)
l F6(A)t(R)s Gd(,)e(and)g F4(S)j FY(=)g F4(T)o Gd(.)450
3432 y F7(Case)h Gd(T)o(-)t(A)t F6(B)t(S)q F7(:)135 b
F4(t)22 b FY(=)h Gb(\025)p F4(y:T)1346 3444 y F1(2)1386
3432 y F4(.t)1473 3444 y F1(1)1018 3531 y F4(T)f FY(=)h
F4(T)1214 3543 y F1(2)1254 3531 y FV(!)p F4(T)1381 3543
y F1(1)1018 3631 y Gb(\000)5 b(;)17 b F4(y:T)1239 3643
y F1(2)1303 3631 y F5(`)23 b F4(t)1420 3643 y F1(1)1484
3631 y FF(:)g F4(T)1602 3643 y F1(1)450 3751 y Gd(By)k(case)g(\(2\))f
(of)h(the)h(inversion)g(lemma,)h(the)e(\002nal)h(r)o(ule)f(in)h(any)g
(derivation)f(of)g Gb(\000)35 b F5(`)g F4(t)g FF(:)g
F4(S)450 3851 y Gd(must)27 b(also)g(be)h(T)o(-)t(A)t
F6(B)t(S)q Gd(,)g(and)e(this)h(derivation)f(must)h(have)f(a)f
(subderivation)i(with)g(conclu-)450 3950 y(sion)k Gb(\000)5
b(;)34 b F4(y:T)871 3962 y F1(2)951 3950 y F5(`)39 b
F4(t)1084 3962 y F1(1)1164 3950 y FF(:)h F4(S)1298 3962
y F1(1)1339 3950 y Gd(,)31 b(with)g F4(S)39 b FY(=)g
F4(T)1819 3962 y F1(2)1859 3950 y FV(!)p F4(S)1986 3962
y F1(1)2026 3950 y Gd(.)52 b(By)30 b(the)f(induction)i(hypothesis)g
(\(on)f(the)450 4050 y(subderivation)21 b(with)i(conclusion)g(\()p
Gb(\000)5 b(;)18 b F4(y:T)1840 4062 y F1(2)1905 4050
y F5(`)24 b F4(t)2024 4062 y F1(1)2088 4050 y FF(:)h
F4(T)2208 4062 y F1(1)2248 4050 y Gd(\),)c(we)g(obtain)h
F4(S)2746 4062 y F1(1)2811 4050 y FY(=)i F4(T)2941 4062
y F1(1)2982 4050 y Gd(,)d(fr)o(om)g(which)450 4150 y
F4(S)i FY(=)f F4(T)f Gd(is)g(immediate.)450 4270 y F7(Case)j
Gd(T)o(-)t(A)t F6(P)t(P)-6 b Gd(,)25 b(T)o(-)t(T)t F6(R)t(U)t(E)t
Gd(,)g(T)o(-)t(F)o F6(A)t(L)t(S)t(E)t Gd(,)f(T)o(-)t(I)t
F6(F)r F7(:)450 4391 y Gd(Similar)-6 b(.)2665 b FZ(2)450
4556 y Ge(7.4.4)19 b(Exercise)f([Quick)i(check]:)40 b
Gd(W)-6 b(rite)20 b(out)h(the)g(case)f(for)j(T)o(-)t(A)t
F6(P)t(P)r Gd(.)776 b FZ(2)450 4721 y Ge(7.4.5)19 b(Exercise)f
([Homework]:)41 b F7(\(Due)29 b(on)h(Feb.)52 b(15.\))f
Gd(Is)30 b(ther)o(e)e(any)i(context)g Gb(\000)f Gd(and)g(type)g
F4(T)423 b FP(\()450 4820 y Gd(such)33 b(that)g Gb(\000)46
b F5(`)f F4(x)e(x)j FF(:)f F4(T)p Gd(?)62 b(If)33 b(so,)j(give)d
Gb(\000)g Gd(and)f F4(T)h Gd(and)f(show)i(a)f(typing)h(derivation)e
(for)450 4920 y Gb(\000)23 b F5(`)g F4(x)43 b(x)22 b
FF(:)i F4(T)o Gd(;)d(if)f(not,)i(pr)o(ove)e(it.)1948
b FZ(2)p eop
%%Page: 80 81
80 80 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(80)575 683 y(W)-8 b(e)28 b(close)h(this)g(section)g(with)g(a)f
(couple)h(of)f(\223str)o(uctural)g(lemmas\224)g(for)h(the)f(typing)h(r)
o(e-)450 783 y(lation.)41 b(These)26 b(ar)o(e)f(not)h(particularly)f
(inter)o(esting)h(in)h(themselves,)g(but)f(will)h(permit)e(us)i(to)450
882 y(perform)20 b(some)i(useful)e(manipulations)i(of)f(typing)g
(derivations)g(in)g(later)f(pr)o(oofs.)450 1065 y Ge(7.4.6)f(Lemma)g
([Permutation]:)38 b Gd(If)20 b Gb(\000)j F5(`)g F4(t)f
FF(:)i F4(T)c Gd(and)g Gb(\001)h Gd(is)g(a)f(permutation)g(of)h
Gb(\000)5 b Gd(,)15 b(then)21 b Gb(\001)i F5(`)g F4(t)g
FF(:)450 1165 y F4(T)p Gd(.)i(Mor)o(eover)-6 b(,)19 b(the)i(latter)f
(derivation)h(has)f(the)h(same)g(depth)f(as)h(the)g(former)-6
b(.)479 b FZ(2)450 1347 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19
b(induction)j(on)f(typing)h(derivations.)878 b FZ(2)450
1530 y Ge(7.4.7)19 b(Lemma)g([W)-6 b(eakening]:)38 b
Gd(If)29 b Gb(\000)40 b F5(`)g F4(t)g FF(:)g F4(T)29
b Gd(and)h F4(x)49 b Gb(=)-52 b F5(2)41 b F7(dom)o FY(\()p
Gb(\000)6 b FY(\))p Gd(,)26 b(then)k Gb(\000)6 b(;)34
b F4(x:S)39 b F5(`)h F4(t)f FF(:)i F4(T)o Gd(.)450 1629
y(Mor)o(eover)-6 b(,)19 b(the)i(latter)f(derivation)h(has)f(the)h(same)
g(depth)f(as)h(the)g(former)-6 b(.)569 b FZ(2)450 1812
y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19 b(induction)j(on)f(typing)
h(derivations.)878 b FZ(2)450 2055 y F8(T)-9 b(yping)26
b(and)f(Substitution)450 2213 y Ge(7.4.8)19 b(Lemma)g([Substitution]:)
37 b Gd(If)23 b Gb(\000)6 b(;)22 b F4(x)o(:S)27 b F5(`)g
F4(t)g FF(:)h F4(T)23 b Gd(and)g Gb(\000)k F5(`)h F4(s)f
FF(:)h F4(S)o Gd(,)c(then)f Gb(\000)28 b F5(`)f F0(f)p
F4(x)g F5(7)p FV(!)g F4(s)p F0(g)p F4(t)g FF(:)450 2313
y F4(T)p Gd(.)2879 b FZ(2)450 2495 y Ge(7.4.9)19 b(Exercise)f
([Recommended]:)38 b Gd(Pr)o(ove)18 b(the)g(substitution)i(lemma,)e
(using)h(an)f(induction)450 2595 y(on)j(the)g(depth)g(of)g(typing)g
(derivations)g(and)f(Lemma)g(7.4.1.)k(Solution)e(on)f(page)f(289.)203
b FZ(2)450 2838 y F8(T)-9 b(ype)25 b(Safety)450 2996
y Ge(7.4.10)18 b(Theorem)i([Preservation)f(of)i(types)f(during)g
(evaluation]:)38 b Gd(If)15 b Gb(\000)23 b F5(`)g F4(t)g
FF(:)g F4(T)15 b Gd(and)h F4(t)22 b F5(\000)-14 b FV(!)3427
2966 y FX(\003)450 3095 y F4(t)501 3065 y FX(0)524 3095
y Gd(,)21 b(then)g Gb(\000)i F5(`)g F4(t)943 3065 y FX(0)989
3095 y FF(:)h F4(T)o Gd(.)2266 b FZ(2)450 3278 y F7(Pr)o(oof:)66
b Gd(Exer)o(cise.)2355 b FZ(2)450 3461 y Ge(7.4.1)m(1)18
b(Exercise)h([Homework]:)40 b F7(\(Due)29 b(on)g(Feb.)50
b(15.\))f Gd(In)29 b(Exer)o(cise)e(6.3.8)g(we)i(investigated)423
b FP(\()450 3560 y Gd(the)18 b Ge(subject)e(expansion)f
Gd(pr)o(operty)i(for)h(our)g(simple)g(calculus)g(of)f(typed)h
(arithmetic)g(expr)o(es-)450 3660 y(sions.)29 b(Does)22
b(it)f(hold)h(for)f(the)h(\223functional)f(part\224)f(of)i(the)f
(simply)h(typed)f(lambda-calculus?)450 3759 y(That)g(is,)i(suppose)f
F4(t)f Gd(does)h(not)g(contain)g(any)g(conditional)h(expr)o(essions.)28
b(Do)22 b Gb(\000)j F5(`)f F4(t)h F5(\000)-14 b FV(!)3313
3729 y FX(\003)3376 3759 y F4(t)3427 3729 y FX(0)450
3859 y Gd(and)20 b F4(t)662 3829 y FX(0)709 3859 y FF(:)j
F4(T)d Gd(imply)i Gb(\000)h F5(`)g F4(t)f FF(:)i F4(T)o
Gd(?)i(Solution)21 b(on)h(page)e(290.)1131 b FZ(2)450
4042 y Ge(7.4.12)18 b(Theorem)i([Progress]:)41 b Gd(Suppose)24
b F4(t)f Gd(is)i(a)e(closed)i(normal)f(form.)36 b(If)23
b F5(`)29 b F4(t)g FF(:)h F4(T)o Gd(,)25 b(then)f F4(t)450
4141 y Gd(is)d(a)f(value.)2578 b FZ(2)450 4324 y F7(Pr)o(oof:)66
b Gd(Outline:)41 b(\002rst)28 b(show)h(that)e(every)g(closed)h(value)f
(of)h(type)g F4(Bool)e Gd(is)i(either)g F4(true)e Gd(or)450
4424 y F4(false)19 b Gd(and)h(every)g(closed)h(value)f(of)h(type)f
F4(S)p FV(!)p F4(T)g Gd(is)i(a)e Gb(\025)h Gd(abstraction...)696
b FZ(2)p eop
%%Page: 81 82
81 81 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(81)450 683 y F8(Erasure)24 b(and)g(T)-9 b(ypeability)450
841 y F7(Untyped)25 b(lambda-calculus;)30 b(the)d(erasur)o(e)h
(function;)i(erasur)o(e)e(as)f(\223compilation\224)e(to)i(an)g(untyped)
450 941 y(underlying)21 b(machine.)j(De\002nition)d(of)f(typeability)g
(of)h(untyped)e(terms;)i(simple)f(examples.)450 1326
y Gj(7.5)119 b(Implementation)616 1507 y FT(type)40 b(ty)g(=)773
1598 y(TyArr)g(of)g(ty)g(*)f(ty)694 1690 y(|)h(TyBool)616
1872 y(type)g(term)g(=)773 1964 y(TmVar)g(of)g(info)g(*)g(int)g(*)f
(int)694 2055 y(|)h(TmAbs)g(of)g(info)g(*)g(string)g(*)g(ty)f(*)h(term)
694 2146 y(|)g(TmApp)g(of)g(info)g(*)g(term)g(*)f(term)694
2237 y(|)h(TmTrue)h(of)e(info)694 2329 y(|)h(TmFalse)h(of)e(info)694
2420 y(|)h(TmIf)g(of)g(info)g(*)f(term)i(*)e(term)h(*)g(term)616
2603 y(let)g(rec)g(tyeqv)g(tyS)g(tyT)g(=)694 2694 y(match)h
(\(tyS,tyT\))g(with)773 2785 y(\(TyArr\(tyS1,tyS2\),TyArr\(tyT1,)q
(tyT2\))q(\))k FO(!)891 2877 y FT(\(tyeqv)40 b(tyS1)g(tyT1\))h(&&)e
(\(tyeqv)i(tyS2)f(tyT2\))694 2968 y(|)g(\(TyBool,TyBool\))j
FO(!)c FT(true)694 3059 y(|)h(_)f FO(!)g FT(false)616
3242 y(let)h(rec)g(typeof)g(ctx)g(t)g(=)694 3333 y(match)h(t)e(with)773
3425 y(TmVar\(fi,i,_\))j FO(!)851 3516 y FT(gettype)f(fi)f(ctx)g(i)694
3607 y(|)g(TmAbs\(fi,x,tyS,t1\))j FO(!)851 3699 y FT(let)d(ctx')g(=)g
(addbinding)h(ctx)f(x)g(\(VarBind\(tyS\)\))i(in)851 3790
y(let)e(tyT)g(=)g(typeof)g(ctx')g(t1)g(in)851 3881 y(TyArr\(tyS,)i
(tyT\))694 3973 y(|)e(TmApp\(fi,t1,t2\))j FO(!)851 4064
y FT(let)d(tyT1)g(=)g(typeof)h(ctx)e(t1)h(in)851 4155
y(let)g(tyT2)g(=)g(typeof)h(ctx)e(t2)h(in)851 4247 y(\(match)h(tyT1)f
(with)1008 4338 y(TyArr\(tyT11,tyT12\))k FO(!)1087 4429
y FT(if)39 b(tyeqv)i(tyT2)f(tyT11)g(then)g(tyT12)1087
4521 y(else)g(error)g(fi)g("parameter)h(type)g(mismatch")930
4612 y(|)e(_)h FO(!)f FT(error)h(fi)g("arrow)g(type)h(expected"\))694
4703 y(|)f(TmTrue\(fi\))h FO(!)851 4795 y FT(TyBool)694
4886 y(|)f(TmFalse\(fi\))i FO(!)p eop
%%Page: 82 83
82 82 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)496 b
Gd(7)t(.)30 b(S)t F6(I)t(M)t(P)t(L)n(Y)25 b Gd(T)t F6(Y)t(P)t(E)t(D)g
Gd(L)t F6(A)t(M)t(B)t(D)t(A)t Gd(-)t(C)t F6(A)t(L)t(C)t(U)t(L)t(U)t(S)
497 b Gd(82)812 683 y FT(TyBool)694 774 y(|)40 b(TmIf\(fi,s1,s2,s3\))j
FO(!)812 866 y FT(if)d(tyeqv)g(\(typeof)h(ctx)f(s1\))g(TyBool)g(then)
891 957 y(let)g(tyS)f(=)h(typeof)h(ctx)e(s2)h(in)891
1048 y(if)f(tyeqv)i(tyS)f(\(typeof)g(ctx)g(s3\))g(then)g(tyS)891
1140 y(else)g(error)g(fi)g("arms)g(of)g(conditional)i(have)e(different)
h(types")812 1231 y(else)f(error)h(fi)e("guard)i(of)f(conditional)h
(not)f(a)g(boolean")450 1517 y Gj(7.6)119 b(Further)29
b(Reading)450 1706 y Gd(The)18 b(untyped)g(lambda-calculus)f(was)h
(developed)f(by)i(Chur)o(ch)e(and)h(his)h(co-workers)f(in)h(the)450
1805 y(1930s)e([Chu41)o(].)49 b(The)19 b(standar)o(d)e(text)i(for)f
(all)h(aspects)f(of)h(the)g(untyped)f(lambda-calculus)g(is)450
1905 y(Bar)o(endr)o(egt)23 b([Bar84)n(].)38 b(Hindley)26
b(and)e(Seldin)h([HS86)o(])f(is)i(less)g(compr)o(ehensive,)g(but)f
(some-)450 2005 y(what)i(mor)o(e)g(accessible.)43 b(Bar)o(endr)o(egt's)
24 b(article)j(in)g(the)g(Handbook)g(of)g(Theor)o(etical)f(Com-)450
2104 y(puter)20 b(Science)g([Bar90)n(])h(is)g(a)f(compact)g(survey)-9
b(.)575 2204 y(The)33 b(simply)h(typed)f(lambda-calculus)f(is)h
(studied)g(in)h(Hindley)f(and)g(Seldin)g([HS86)n(])450
2304 y(and)f(in)g(even)g(gr)o(eater)f(detail)g(in)i(Hindley's)g(mor)o
(e)f(r)o(ecent)f(book)i([Hin97)o(].)60 b(Material)30
b(on)450 2403 y(both)i(typed)f(and)g(untyped)h(lambda-calculus)e(can)h
(also)h(be)f(found)h(in)g(many)f(textbooks)450 2503 y(on)c(functional)f
(pr)o(ogramming)g(languages)g(\(e.g.)f([PJL92)n(]\))h(and)f(pr)o
(ogramming)h(language)450 2603 y(semantics)21 b(\(e.g.[Sch86)n(,)f
(Gun92,)g(W)-5 b(in93,)21 b(Mit96)o(]\).)p eop
%%Page: 83 84
83 83 bop 450 1306 a F3(Chapter)44 b(8)450 1721 y Gk(Normalization)450
2153 y Gd(In)16 b(this)h(chapter)-6 b(,)15 b(we)h(consider)g(another)g
(inter)o(esting)g(pr)o(operty)f(of)h(the)f(simply)i(typed)f(lambda-)450
2252 y(calculus:)24 b(the)19 b(fact)e(that)i(all)f(well-typed)g(pr)o
(ograms)g(halt)g(in)h(a)f(\002nite)h(number)f(of)h(steps.)24
b(This)450 2352 y(pr)o(operty)j(is)i(ar)o(guably)e(of)h(small)h
(pragmatic)e(importance,)j(since)f(all)f(r)o(eal)f(pr)o(ogramming)450
2451 y(languages)19 b(include)g(constr)o(ucts)h(like)g(general)e(r)o
(ecursion)h(\(Section)g(9.9\))f(or)h(r)o(ecursive)f(types)450
2551 y(\(Chapter)30 b(15\))f(that)i(can)f(be)g(used)h(to)g(write)g
(nonterminating)h(pr)o(ograms.)55 b(On)31 b(the)g(other)450
2651 y(hand,)20 b(normalization)h(pr)o(oofs)g(ar)o(e)e(some)i(of)g(the)
g(most)g(elegant)g(mathematics)g(to)g(be)f(found)450
2750 y(in)h(the)g(type)g(theory)g(literatur)o(e.)575
2850 y(Normalization)c(is)h(not)h(entir)o(ely)e(trivial)h(to)g(pr)o
(ove,)f(since)h(each)f(r)o(eduction)h(of)f(a)h(term)f(can)450
2950 y(duplicate)j(r)o(edices)f(in)j(subterms.)450 3132
y Ge(8.1)e(Exercise)e([Quick)i(check]:)39 b Gd(Wher)o(e)28
b(do)h(we)g(fail)f(if)h(we)f(attempt)h(to)g(pr)o(ove)f(normaliza-)450
3232 y(tion)22 b(by)e(a)h(straightforwar)o(d)e(induction)j(on)f(the)g
(size)g(of)f(a)h(well-typed)f(term?)429 b FZ(2)575 3414
y Gd(The)34 b(calculus)g(we)h(shall)f(consider)h(in)g(this)g(chapter)f
(is)g(the)h(simply)g(typed)f(lambda-)450 3514 y(calculus)20
b(over)h(a)f(single)h(base)f(type)g F4(B)p Gd(.)51 b(The)20
b(pr)o(esentation)g(used)h(her)o(e)e(is)i(an)f(adaptation)g(by)450
3614 y(Martin)g(Hofmann)h(of)g(a)f(technique)i(due)e(to)h(T)-8
b(ait)21 b([T)-8 b(ai67)o(].)575 3713 y(W)g(e)18 b(begin)h(by)f
(de\002ning,)h(for)f(each)g(type)g F4(T)p Gd(,)g(a)g(set)g
Gb(R)2192 3725 y Gc(T)2245 3713 y Gd(of)g(closed)h(terms)f(of)g(type)h
F4(T)o Gd(.)25 b(W)-8 b(e)18 b(will)450 3813 y(write)j
Gb(R)715 3825 y Gc(T)749 3813 y FY(\()p F4(t)p FY(\))g
Gd(for)g F4(t)h F5(2)i Gb(R)1201 3825 y Gc(T)1235 3813
y Gd(.)450 3996 y Ge(8.2)c(De\002nition:)575 4162 y F5(\017)41
b Gb(R)709 4174 y Gc(B)743 4162 y FY(\()p F4(t)p FY(\))21
b Gd(if)o(f)f F4(t)g Gd(halts.)575 4328 y F5(\017)41
b Gb(R)709 4340 y Gc(T)739 4349 y FB(1)776 4340 y FC(!)p
Gc(T)872 4349 y FB(2)913 4328 y FY(\()p F4(t)p FY(\))21
b Gd(if)o(f)f F4(t)g Gd(halts)h(and,)f(whenever)h Gb(R)2021
4340 y Gc(T)2051 4349 y FB(1)2093 4328 y FY(\()p F4(s)p
FY(\))p Gd(,)f(we)h(have)f Gb(R)2620 4340 y Gc(T)2651
4349 y FB(2)2692 4328 y FY(\()p F4(t)43 b(s)p FY(\))p
Gd(.)486 b FZ(2)450 4510 y Ge(8.3)20 b(Lemma:)554 4676
y Gd(1.)41 b(If)20 b Gb(R)785 4688 y Gc(T)820 4676 y
FY(\()p F4(t)o FY(\))p Gd(,)h(then)g F4(t)g Gd(halts.)554
4842 y(2.)41 b(If)20 b F4(t)j FF(:)g F4(T)d Gd(and)h
F4(t)h F5(\000)-14 b FV(!)23 b F4(t)1375 4812 y FX(0)1398
4842 y Gd(,)e(then)g Gb(R)1675 4854 y Gc(T)1710 4842
y FY(\()p F4(t)1793 4812 y FX(0)1816 4842 y FY(\))h Gd(if)o(f)d
Gb(R)2019 4854 y Gc(T)2054 4842 y FY(\()p F4(t)p FY(\))p
Gd(.)1211 b FZ(2)1908 5169 y Gd(83)p eop
%%Page: 84 85
84 84 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)836 b
Gd(8)t(.)29 b(N)t F6(O)t(R)t(M)t(A)t(L)t(I)t(Z)t(A)o(T)t(I)t(O)t(N)840
b Gd(84)450 683 y F7(Pr)o(oof:)554 849 y Gd(1.)41 b(Immediate)20
b(fr)o(om)g(the)h(de\002nition.)554 1015 y(2.)41 b(By)20
b(induction)i(on)f(the)g(str)o(uctur)o(e)g(of)f F4(T)p
Gd(.)658 1148 y(If)g F4(T)j FY(=)f F4(B)p Gd(,)f(the)f(r)o(esult)h(is)g
(obvious)h(fr)o(om)e(the)h(de\002nition.)658 1281 y(If)j
F4(T)29 b FY(=)g F4(T)947 1293 y F1(1)987 1281 y FV(!)p
F4(T)1114 1293 y F1(2)1154 1281 y Gd(,)c(the)g(\002rst)f(r)o(equir)o
(ement)g(\()p F4(t)g Gd(halts)g(if)o(f)f F4(t)2435 1251
y FX(0)2482 1281 y Gd(does\))h(is)h(obvious.)37 b(T)-8
b(o)25 b(show)658 1380 y(the)17 b(second)h(part\227that)e
Gb(R)1510 1392 y Gc(T)1545 1380 y Gd(\()p F4(t)o Gd(\))h(if)o(f)f
Gb(R)1807 1392 y Gc(T)1842 1380 y Gd(\()p F4(t)1921 1350
y FX(0)1944 1380 y Gd(\)\227ther)o(e)g(ar)o(e)g(two)i(implications)g
(to)g(establish.)658 1480 y(For)29 b(the)g(\002rst)g(\()p
FW(=)-14 b FV(\))p Gd(\))28 b(suppose)h(that)g Gb(R)1905
1492 y Gc(T)1940 1480 y Gd(\()p F4(t)o Gd(\))g(and)f(that)h
Gb(R)2461 1492 y Gc(T)2491 1501 y FB(1)2533 1480 y FY(\()p
F4(s)o FY(\))h Gd(for)e(some)i F4(s)38 b FF(:)g F4(T)3242
1492 y F1(1)3282 1480 y Gd(.)50 b(By)658 1580 y(de\002nition)30
b(we)g(have)f Gb(R)1441 1592 y Gc(T)1471 1601 y FB(2)1513
1580 y Gd(\()p F4(t)42 b(s)p Gd(\).)52 b(But)29 b F4(t)43
b(s)c F5(\000)-14 b FV(!)39 b F4(t)2324 1550 y FX(0)2390
1580 y F4(s)p Gd(,)32 b(fr)o(om)d(which)h(the)g(induction)658
1679 y(hypothesis)f(gives)f(us)g Gb(R)1469 1691 y Gc(T)1499
1701 y FB(2)1540 1679 y Gd(\()p F4(t)1619 1649 y FX(0)1686
1679 y F4(s)p Gd(\).)46 b(Since)27 b(this)i(holds)f(for)g(an)f
(arbitrary)g F4(s)o Gd(,)j(we)d(have)658 1779 y(shown)22
b Gb(R)976 1791 y Gc(T)1010 1779 y Gd(\()p F4(t)p Gd(\).)j(The)20
b(ar)o(gument)h(for)f(the)h(other)g(dir)o(ection)g(is)g(analogous.)397
b FZ(2)450 1962 y Ge(8.4)20 b(Lemma:)39 b Gd(If)28 b
F4(x)1046 1974 y F1(1)1086 1962 y F4(:T)1174 1974 y F1(1)1214
1962 y Gb(;)52 b(:)14 b(:)g(:)f(;)38 b F4(x)1503 1974
y F1(n)1555 1962 y F4(:T)1642 1974 y F1(n)1731 1962 y
F5(`)f F4(t)g FF(:)h F4(T)28 b Gd(and)g F4(v)2274 1974
y F1(1)2342 1962 y Gb(:)14 b(:)g(:)g(;)g F4(v)2533 1974
y F1(n)2613 1962 y Gd(ar)o(e)27 b(closed)i(values)f(with)450
2061 y Gb(R)501 2073 y Gc(T)531 2082 y FB(i)566 2061
y Gd(\()p F4(v)637 2073 y F1(i)668 2061 y Gd(\))21 b(for)f(each)g
Gb(i)p Gd(,)h(then)g Gb(R)1337 2073 y Gc(T)1372 2061
y FY(\()p F0(f)p F4(x)1474 2073 y F1(1)1538 2061 y F5(7)p
FV(!)i F4(v)1687 2073 y F1(1)1728 2061 y F0(g)14 b F5(\001)g(\001)g
(\001)f F0(f)p F4(x)1949 2073 y F1(n)2023 2061 y F5(7)p
FV(!)24 b F4(v)2173 2073 y F1(n)2224 2061 y F0(g)p F4(t)p
FY(\))p Gd(.)1046 b FZ(2)450 2244 y F7(Pr)o(oof:)66 b
Gd(By)32 b(induction)h(on)g(a)e(derivation)h(of)g F4(x)1993
2256 y F1(1)2033 2244 y F4(:T)2121 2256 y F1(1)2161 2244
y Gb(;)58 b(:)14 b(:)g(:)f(;)44 b F4(x)2463 2256 y F1(n)2514
2244 y F4(:T)2602 2256 y F1(n)2697 2244 y F5(`)f F4(t)h
FF(:)g F4(T)p Gd(.)59 b(The)32 b(most)450 2343 y(inter)o(esting)21
b(case)f(is)h(the)g(one)g(for)g(abstraction.)450 2468
y F7(Case)j Gd(T)o(-)t(V)l F6(A)t(R)r F7(:)134 b F4(t)23
b FY(=)g F4(x)1221 2480 y F1(i)1419 2468 y F4(T)f FY(=)h
F4(T)1615 2480 y F1(i)450 2593 y Gd(Immediate.)450 2717
y F7(Case)h Gd(T)o(-)t(A)t F6(B)t(S)q F7(:)135 b F4(t)22
b FY(=)h Gb(\025)p F4(x:S)1346 2729 y F1(1)1386 2717
y F4(.s)1473 2729 y F1(2)1018 2817 y F4(x)1061 2829 y
F1(1)1102 2817 y F4(:T)1189 2829 y F1(1)1229 2817 y Gb(;)37
b(:)14 b(:)g(:)g(;)23 b F4(x)1490 2829 y F1(n)1541 2817
y F4(:T)1628 2829 y F1(n)1679 2817 y Gb(;)h F4(x:S)1856
2829 y F1(1)1920 2817 y F5(`)f F4(s)2037 2829 y F1(2)2101
2817 y FF(:)g F4(S)2219 2829 y F1(2)1018 2916 y F4(T)f
FY(=)h F4(S)1214 2928 y F1(1)1254 2916 y FV(!)p F4(S)1381
2928 y F1(2)450 3042 y Gd(Obviously)-9 b(,)20 b F0(f)p
F4(x)934 3054 y F1(1)997 3042 y F5(7)p FV(!)k F4(v)1147
3054 y F1(1)1188 3042 y F0(g)14 b F5(\001)g(\001)g(\001)f
F0(f)p F4(x)1409 3054 y F1(n)1483 3042 y F5(7)p FV(!)23
b F4(v)1633 3054 y F1(n)1684 3042 y F0(g)p F4(t)18 b
Gd(evaluates)g(to)h(a)f(value,)g(since)h(it)g(is)g(a)f(value)g(alr)o
(eady)-9 b(.)450 3141 y(What)22 b(r)o(emains)g(to)h(show)g(is)g(that)g
Gb(R)1603 3153 y Gc(S)1633 3163 y FB(2)1674 3141 y FY(\()p
F0(f)p F4(x)1777 3153 y F1(1)1843 3141 y F5(7)p FV(!)j
F4(v)1996 3153 y F1(1)2036 3141 y F0(g)14 b F5(\001)g(\001)g(\001)f
F0(f)p F4(x)2258 3153 y F1(n)2335 3141 y F5(7)p FV(!)26
b F4(v)2488 3153 y F1(n)2539 3141 y F0(g)p F4(t)o FY(\))p
F4(s)p FY(\))d Gd(for)f(any)g F4(s)k FF(:)g F4(S)3217
3153 y F1(1)3280 3141 y Gd(such)450 3241 y(that)f Gb(R)670
3253 y Gc(S)701 3262 y FB(1)742 3241 y Gd(\()p F4(s)o
Gd(\).)39 b(Suppose)25 b F4(s)g Gd(is)g(such)h(a)f(term.)39
b(Then,)26 b(by)f(Lemma)g(8.3\(1\),)f(we)h(have)g F4(s)31
b F5(\000)-14 b FV(!)3337 3211 y FX(\003)3406 3241 y
F4(v)450 3341 y Gd(for)23 b(some)g F4(v)p Gd(.)32 b(By)23
b(Lemma)g(8.3\(2\),)e Gb(R)1610 3353 y Gc(S)1640 3362
y FB(1)1682 3341 y F4(v)o Gd(.)33 b(Now)-8 b(,)24 b(by)f(the)g
(induction)h(hypothesis,)h Gb(R)3125 3353 y Gc(S)3156
3362 y FB(2)3197 3341 y FY(\()p F0(f)p F4(x)3299 3353
y F1(1)3367 3341 y F5(7)p FV(!)450 3440 y F4(v)494 3452
y F1(1)534 3440 y F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p
F4(x)755 3452 y F1(n)830 3440 y F5(7)p FV(!)23 b F4(v)979
3452 y F1(n)1031 3440 y F0(gf)p F4(x)f F5(7)p FV(!)h
F4(v)o F0(g)p F4(s)1370 3452 y F1(2)1411 3440 y FY(\))p
Gd(.)j(But)954 3605 y F4(\()p Gb(\025)p F4(x:S)1173 3617
y F1(1)1214 3605 y F4(.)43 b F0(f)p F4(x)1371 3617 y
F1(1)1435 3605 y F5(7)p FV(!)23 b F4(v)1584 3617 y F1(1)1625
3605 y F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1846
3617 y F1(n)1921 3605 y F5(7)p FV(!)23 b F4(v)2070 3617
y F1(n)2122 3605 y F0(g)p F4(s)2192 3617 y F1(2)2232
3605 y F4(\))43 b(s)699 3705 y F5(\000)-14 b FV(!)833
3675 y FX(\003)954 3705 y F0(f)p F4(x)1024 3717 y F1(1)1088
3705 y F5(7)p FV(!)23 b F4(v)1237 3717 y F1(1)1278 3705
y F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1499
3717 y F1(n)1574 3705 y F5(7)p FV(!)23 b F4(v)1723 3717
y F1(n)1775 3705 y F0(gf)p F4(x)e F5(7)p FV(!)i F4(v)p
F0(g)p F4(s)2114 3717 y F1(2)2155 3705 y Gb(;)450 3870
y Gd(fr)o(om)d(which)i(Lemma)e(8.3\(2\))f(gives)i(us)658
4036 y Gb(R)709 4048 y Gc(S)739 4057 y FB(2)780 4036
y FY(\()p F4(\()p Gb(\025)p F4(x:S)1032 4048 y F1(1)1072
4036 y F4(.)43 b F0(f)p F4(x)1230 4048 y F1(1)1293 4036
y F5(7)p FV(!)23 b F4(v)1443 4048 y F1(1)1483 4036 y
F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1705 4048
y F1(n)1779 4036 y F5(7)p FV(!)23 b F4(v)1929 4048 y
F1(n)1980 4036 y F0(g)p F4(s)2050 4048 y F1(2)2091 4036
y F4(\))43 b(s)o FY(\))p Gb(;)450 4202 y Gd(that)21 b(is,)658
4368 y Gb(R)709 4380 y Gc(S)739 4389 y FB(2)780 4368
y FY(\(\()p F4(\()p F0(f)p F4(x)958 4380 y F1(1)1022
4368 y F5(7)p FV(!)i F4(v)1172 4380 y F1(1)1212 4368
y F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1433
4380 y F1(n)1508 4368 y F5(7)p FV(!)23 b F4(v)1658 4380
y F1(n)1709 4368 y F0(g)p F4(\()p Gb(\025)p F4(x:S)1955
4380 y F1(1)1995 4368 y F4(.)43 b(s)2126 4380 y F1(2)2167
4368 y F4(\))o FY(\))h F4(s)p FY(\))p Gb(:)450 4534 y
Gd(Since)20 b F4(s)h Gd(was)f(chosen)i(arbitrarily)-9
b(,)19 b(the)i(de\002nition)h(of)f Gb(R)2234 4546 y Gc(S)2264
4556 y FB(1)2301 4546 y FC(!)q Gc(S)2397 4556 y FB(2)2459
4534 y Gd(gives)g(us)658 4700 y Gb(R)709 4712 y Gc(S)739
4722 y FB(1)776 4712 y FC(!)p Gc(S)872 4722 y FB(2)913
4700 y FY(\()p F0(f)p F4(x)1016 4712 y F1(1)1079 4700
y F5(7)p FV(!)i F4(v)1229 4712 y F1(1)1270 4700 y F0(g)14
b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1491 4712 y F1(n)1565
4700 y F5(7)p FV(!)23 b F4(v)1715 4712 y F1(n)1766 4700
y F0(g)p F4(\()p Gb(\025)p F4(x:S)2012 4712 y F1(1)2053
4700 y F4(.)43 b(s)2183 4712 y F1(2)2224 4700 y FY(\))p
Gb(;)450 4866 y Gd(as)20 b(r)o(equir)o(ed.)p eop
%%Page: 85 86
85 85 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)836 b
Gd(8)t(.)29 b(N)t F6(O)t(R)t(M)t(A)t(L)t(I)t(Z)t(A)o(T)t(I)t(O)t(N)840
b Gd(85)450 683 y F7(Case)24 b Gd(T)o(-)t(A)t F6(P)t(P)r
F7(:)134 b F4(t)23 b FY(=)g F4(t)1218 695 y F1(1)1303
683 y F4(t)1346 695 y F1(2)1022 783 y F4(x)1066 795 y
F1(1)1106 783 y F4(:T)1194 795 y F1(1)1234 783 y Gb(;)37
b(:)14 b(:)g(:)g(;)23 b F4(x)1494 795 y F1(n)1546 783
y F4(:T)1633 795 y F1(n)1707 783 y F5(`)g F4(t)1825 795
y F1(1)1888 783 y FF(:)h F4(T)2006 795 y F1(11)2083 783
y FV(!)p F4(T)2210 795 y F1(12)1022 882 y F4(x)1066 894
y F1(1)1106 882 y F4(:T)1194 894 y F1(1)1234 882 y Gb(;)37
b(:)14 b(:)g(:)g(;)23 b F4(x)1494 894 y F1(n)1546 882
y F4(:T)1633 894 y F1(n)1707 882 y F5(`)g F4(t)1825 894
y F1(2)1888 882 y FF(:)h F4(T)2006 894 y F1(1)1022 982
y F4(T)f FY(=)g F4(T)1218 994 y F1(12)450 1105 y Gd(The)e(induction)g
(hypothesis)i(gives)e(us)658 1272 y Gb(R)709 1284 y Gc(T)739
1293 y FB(11)809 1284 y FC(!)p Gc(T)905 1293 y FB(12)979
1272 y FY(\()p F0(f)p F4(x)1082 1284 y F1(1)1145 1272
y F5(7)p FV(!)i F4(v)1295 1284 y F1(1)1335 1272 y F0(g)14
b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1557 1284 y F1(n)1631
1272 y F5(7)p FV(!)23 b F4(v)1781 1284 y F1(n)1832 1272
y F0(g)p F4(t)1902 1284 y F1(1)1943 1272 y FY(\))450
1438 y Gd(and)658 1604 y Gb(R)709 1616 y Gc(T)739 1625
y FB(11)813 1604 y FY(\()p F0(f)p F4(x)916 1616 y F1(1)979
1604 y F5(7)p FV(!)g F4(v)1129 1616 y F1(1)1169 1604
y F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(x)1391
1616 y F1(n)1465 1604 y F5(7)p FV(!)23 b F4(v)1615 1616
y F1(n)1666 1604 y F0(g)p F4(t)1736 1616 y F1(2)1777
1604 y FY(\))p Gb(:)450 1770 y Gd(By)e(the)g(de\002nition)g(of)g
Gb(R)1227 1782 y Gc(T)1258 1791 y FB(11)1327 1782 y FC(!)q
Gc(T)1424 1791 y FB(12)1498 1770 y Gd(,)658 1936 y Gb(R)709
1948 y Gc(T)739 1957 y FB(12)813 1936 y FY(\(\()p F0(f)p
F4(x)948 1948 y F1(1)1011 1936 y F5(7)p FV(!)i F4(v)1161
1948 y F1(1)1202 1936 y F0(g)14 b F5(\001)g(\001)g(\001)f
F0(f)p F4(x)1423 1948 y F1(n)1497 1936 y F5(7)p FV(!)23
b F4(v)1647 1948 y F1(n)1698 1936 y F0(g)p F4(t)1768
1948 y F1(1)1809 1936 y FY(\))g(\()p F0(f)p F4(x)1967
1948 y F1(1)2030 1936 y F5(7)p FV(!)g F4(v)2180 1948
y F1(1)2220 1936 y F0(g)14 b F5(\001)g(\001)g(\001)f
F0(f)p F4(x)2442 1948 y F1(n)2516 1936 y F5(7)p FV(!)23
b F4(v)2666 1948 y F1(n)2717 1936 y F0(g)p F4(t)2787
1948 y F1(2)2828 1936 y FY(\)\))p Gb(;)450 2102 y Gd(i.e.,)658
2268 y Gb(R)709 2280 y Gc(T)739 2289 y FB(12)813 2268
y FY(\()p F0(f)p F4(x)916 2280 y F1(1)979 2268 y F5(7)p
FV(!)g F4(v)1129 2280 y F1(1)1169 2268 y F0(g)14 b F5(\001)g(\001)g
(\001)f F0(f)p F4(x)1391 2280 y F1(n)1465 2268 y F5(7)p
FV(!)23 b F4(v)1615 2280 y F1(n)1666 2268 y F0(g)p FY(\()p
F4(t)1768 2280 y F1(1)1852 2268 y F4(t)1896 2280 y F1(2)1937
2268 y FY(\)\))p Gb(;)450 2434 y Gd(as)d(r)o(equr)o(ed.)2535
b FZ(2)450 2616 y Ge(8.5)20 b(Corollary)g([Normalization]:)38
b Gd(If)20 b F5(`)j F4(t)g FF(:)g F4(T)p Gd(,)d(then)i
F4(t)g F5(\000)-14 b FV(!)2387 2586 y FX(\003)2448 2616
y F4(v)21 b Gd(for)f(some)h F4(v)p Gd(.)476 b FZ(2)450
2799 y F7(Pr)o(oof:)66 b Gd(By)21 b(Lemma)f(8.4,)g Gb(R)1330
2811 y Gc(T)1364 2799 y F4(t)p Gd(.)25 b(By)c(Lemma)f(8.3\(1\),)e
F4(t)23 b F5(\000)-14 b FV(!)2314 2769 y FX(\003)2375
2799 y F4(v)20 b Gd(for)h(some)g F4(v)p Gd(.)549 b FZ(2)450
2982 y Ge(8.6)20 b(Exercise)e([Homework]:)41 b F7(\(Due)24
b(on)h(Feb.)38 b(24.\))e Gd(Show)25 b(how)h(to)f(extend)f(this)h(pr)o
(oof)f(tech-)423 b FP(\()450 3081 y Gd(nique)25 b(to)g(show)g(that)f
(the)h(simply)g(typed)f(lambda-calculus)f(r)o(emains)g(normalizing)i
(when)450 3181 y(extended)20 b(with)554 3347 y(1.)41
b(booleans)554 3513 y(2.)g(pr)o(oducts.)2388 b FZ(2)p
eop
%%Page: 86 87
86 86 bop 450 1306 a F3(Chapter)44 b(9)450 1721 y Gk(Extensions)450
2153 y F7(Explain)20 b(the)g(design)g(principle)h(of)g(conservative)f
(extension.)450 2438 y Gj(9.1)119 b(Base)29 b(T)-11 b(ypes)450
2793 y Ge(Base)20 b(types)2407 b FV(!)3375 2793 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 3375
2793 a 16 w F4(B)p 409 2875 9 36 v 418 2846 3000 6 v
3418 2846 38 6 v 3455 2875 9 36 v 450 2965 a F7(New)21
b(syntactic)e(forms)592 3096 y F4(T)61 b Gd(::=)i(...)1695
b F7(types)852 3195 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3195 a 15 w F4(B)1759 b F7(base)22
b(type)p 409 3292 9 36 v 418 3292 3000 6 v 3418 3292
38 6 v 3455 3292 9 36 v 450 3578 a Gj(9.2)119 b(Unit)30
b(type)450 3933 y Ge(Unit)19 b(type)2318 b FV(!)3244
3933 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 3244 3933 a 16 w F4(Unit)p 409 4015 9 36 v 418
3985 3000 6 v 3418 3985 38 6 v 3455 4015 9 36 v 450 4104
a F7(New)21 b(syntactic)e(forms)592 4235 y F4(t)61 b
Gd(::=)i(...)1695 b F7(terms)852 4335 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4335 a 15
w F4(unit)1627 b F7(constant)20 b F4(unit)592 4534 y(T)61
b Gd(::=)i(...)1695 b F7(types)852 4634 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4634 a
15 w F4(Unit)1627 b F7(unit)21 b(type)450 4848 y(New)g(typing)e(rules)p
3067 4766 383 4 v 3067 4873 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 4873 V 3067 4876 383
4 v 1908 5169 a Gd(86)p eop
%%Page: 87 88
87 87 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(87)1458 695 y
 gsave currentpoint translate 0 419430 7800 div 5019585 7800 div 747110
-7800 div box .9 setgray fill grestore
 1458 695 a 1482 694 a Gb(\000)23 b
F5(`)g F4(unit)e FF(:)i F4(Unit)3113 695 y Gd(\()r(T)o(-)t(U)t
F6(N)t(I)t(T)r Gd(\))p 409 824 9 36 v 418 824 3000 6
v 3418 824 38 6 v 3455 824 9 36 v 450 990 a(Comment:)38
b(C)27 b(and)f(Java's)g F4(void)f Gd(type)i(can)f(be)h(seen)g(as)f(a)g
(misnomer)o(\227what)i(they)f(r)o(eally)450 1089 y(meant)20
b(is)g F4(Unit)n Gd(.)25 b(\(The)20 b(name)f F4(void)f
Gd(invites)i(us)g(to)g(think)h(of)f(an)f(empty)h(set,)g(which)h(is)f
(clearly)450 1189 y(not)k(what's)f(meant)g(by)g F4(void)e
Gd(in)i(C-like)g(languages,)g(since)g(ther)o(e)f F7(ar)o(e)h
Gd(plenty)g(of)g(terms)g(that)450 1289 y(have)d(type)h
F4(void)n Gd(.)26 b(Saying)20 b(that)h(these)g(terms)g(have)f(type)h
F4(Unit)e Gd(invites)i(us)g(instead)g(to)g(think)450
1388 y(that)g(their)g(r)o(eturn)f(value)g(is)h(not)g(inter)o(esting.\))
450 1674 y Gj(9.3)119 b(Coercions)450 1913 y(9.4)g(Let)30
b(bindings)450 2268 y Ge(Let)20 b(binding)2273 b FV(!)3288
2268 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 3288 2268 a 15 w F4(let)p 409 2350 9 36 v 418
2321 3000 6 v 3418 2321 38 6 v 3455 2350 9 36 v 450 2440
a F7(New)21 b(syntactic)e(forms)592 2571 y F4(t)61 b
Gd(::=)i(...)1695 b F7(terms)852 2670 y
 gsave currentpoint translate 0 124518 7800 div 4377768 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2670 a 15
w F4(let)43 b(x)o(=t)g(in)g(t)1279 b F7(let)21 b(binding)450
2885 y(New)g(evaluation)f(rules)p 3096 2798 355 4 v 3096
2910 4 113 v 1960 w F4(t)j F5(\000)-15 b FV(!)23 b F4(t)3398
2855 y FX(0)p 3447 2910 V 3096 2913 355 4 v 1163 3032
a
 gsave currentpoint translate 0 419430 7800 div 9678969 7800 div 747110
-7800 div box .9 setgray fill grestore
 1163 3032 a 1187 3031 a F4(let)42 b(x=v)1492 3043 y
F1(1)1576 3031 y F4(in)h(t)1750 3043 y F1(2)1814 3031
y F5(\000)-14 b FV(!)23 b F0(f)p F4(x)f F5(7)p FV(!)h
F4(v)2214 3043 y F1(1)2254 3031 y F0(g)p F4(t)2324 3043
y F1(2)2968 3032 y Gd(\()r(E)t(-)t(L)t F6(E)t(T)t Gd(B)t
F6(E)t(T)o(A)p Gd(\))1048 3274 y
 gsave currentpoint translate 0 851966 7800 div 11493873 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1048 3274 a 1602 3218
a F4(t)1645 3230 y F1(1)1709 3218 y F5(\000)-14 b FV(!)23
b F4(t)1917 3188 y FX(0)1909 3242 y F1(1)p 1082 3255
1388 4 v 1082 3327 a F4(let)42 b(x=t)1387 3339 y F1(1)1471
3327 y F4(in)h(t)1645 3339 y F1(2)1709 3327 y F5(\000)-14
b FV(!)23 b F4(let)42 b(x=t)2179 3298 y FX(0)2171 3351
y F1(1)2255 3327 y F4(in)h(t)2429 3339 y F1(2)3164 3274
y Gd(\()r(E)t(-)t(L)t F6(E)t(T)p Gd(\))450 3507 y F7(New)21
b(typing)e(rules)p 3067 3425 383 4 v 3067 3532 4 108
v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p 3447 3532
V 3067 3535 383 4 v 1143 3709 a
 gsave currentpoint translate 0 851966 7800 div 9993355 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1143 3709 a 1177 3653
a Gb(\000)g F5(`)g F4(t)1362 3665 y F1(1)1426 3653 y
FF(:)g F4(T)1544 3665 y F1(1)1750 3653 y Gb(\000)6 b(;)17
b F4(x:T)1972 3665 y F1(1)2035 3653 y F5(`)23 b F4(t)2153
3665 y F1(2)2216 3653 y FF(:)h F4(T)2334 3665 y F1(2)p
1177 3690 1198 4 v 1312 3762 a Gb(\000)f F5(`)g F4(let)42
b(x=t)1759 3774 y F1(1)1843 3762 y F4(in)h(t)2018 3774
y F1(2)2081 3762 y FF(:)23 b F4(T)2199 3774 y F1(2)3168
3709 y Gd(\()r(T)o(-)t(L)t F6(E)t(T)q Gd(\))p 409 3854
9 36 v 418 3854 3000 6 v 3418 3854 38 6 v 3455 3854 9
36 v 450 4037 a Ge(9.4.1)c(Exercise)f([Homework]:)41
b F7(\(Due)15 b(on)h(Feb)h(17.\))22 b Gd(Add)15 b F4(let)g
Gd(bindings)i(to)f(the)g(\223)p F4(simplebool)-5 b Gd(\224)381
b FP(\()450 4137 y Gd(typechecker)15 b(implementation)i(pr)o(ovided)e
(on)h(the)g(course)g(web)f(page.)24 b(Solution)16 b(on)h(page)e(290.)f
FZ(2)p eop
%%Page: 88 89
88 88 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(88)450 686 y Gj(9.5)119 b(Products)575 875 y F5(\017)41
b Gd(intr)o(oduce)17 b(new)h(terms)g(\(pairing)g F4(\(t)1830
887 y F1(1)1870 875 y F4(,t)1958 887 y F1(2)1998 875
y F4(\))g Gd(and)f(pr)o(ojection)h F4(t.1)f Gd(and)g
F4(t.2)o Gd(\))h(and)f(pr)o(od-)658 975 y(uct)j(type)h
F4(T)1020 987 y F1(1)1060 975 y F5(\002)p F4(T)1168 987
y F1(2)575 1141 y F5(\017)41 b Gd(new)21 b(form)f(of)h(values)g
F4(\(v)1475 1153 y F1(1)1515 1141 y F4(,v)1602 1153 y
F1(2)1643 1141 y F4(\))f Gd(needed)575 1307 y F5(\017)41
b Gd(evaluation)20 b(r)o(ules)575 1473 y F5(\017)41 b
Gd(typing)21 b(r)o(ules)450 1759 y Gj(9.6)119 b(Records)30
b(and)g(T)-15 b(uples)450 1948 y Gd(T)-8 b(o)30 b(obtain)h(tuples)f(as)
f(a)g(special)h(case)f(of)h(r)o(ecor)o(ds,)g(we)g(just)h(say)e(that)h
(the)g(set)g(of)g(\002eld)g(la-)450 2047 y(bels)g(includes)h(both)g
(alphabetic)e(identi\002ers)h(and)g(natural)g(numbers.)54
b(When)31 b(a)f(\002eld)g(la-)450 2147 y(bel)d(is)h(omitted)f(in)h(a)f
(r)o(ecor)o(d)e(type)i(or)h(term,)g(we)g(use)f(as)g(the)g(label)g(the)g
(index)g(wher)o(e)g(that)450 2247 y(\002eld)32 b(appears.)58
b(For)33 b(example,)g(we)g(consider)f F4({Bool,Bool,Bool})25
b Gd(as)32 b(an)g(abbr)o(eviation)450 2346 y(for)24 b
F4({1:Bool,2:Bool,3:)o(Boo)o(l})-7 b Gd(.)38 b(\(This)25
b(convention)h(actually)e(allows)h(us)g(to)g(mix)g(named)450
2446 y(and)d(positional)h(\002elds,)f(writing)h F4({a:Bool,Bool,Bool)o
(,c:)o(Bo)o(ol})15 b Gd(as)22 b(an)g(abbr)o(eviation)f(for)450
2545 y F4({a:Bool,2:Bool,3)o(:Bo)o(ol)o(,c)o(:Bo)o(ol)o(})-6
b Gd(,)21 b(for)f(example.\))450 2811 y Ge(Records)g(and)g(tuples)2076
b FV(!)3369 2811 y
 gsave currentpoint translate 0 239217 7800 div 636836 7800 div 468617
-7800 div box .9 setgray fill grestore
 3369 2811 a 16 w FA(fg)p 409 2893
9 36 v 418 2864 3000 6 v 3418 2864 38 6 v 3455 2893 9
36 v 450 2983 a F7(New)21 b(syntactic)e(forms)592 3113
y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 3213 y
 gsave currentpoint translate 0 222821 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852
3213 a 15 w F4({l)955 3225 y F1(i)986 3213 y F4(=t)1073
3225 y F1(i)1115 3183 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1271
3213 y F4(})1355 b F7(r)o(ecord)852 3313 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3313 a
15 w F4(t.l)1671 b F7(pr)o(ojection)592 3512 y F4(v)61
b Gd(::=)i(...)1695 b F7(values)852 3612 y
 gsave currentpoint translate 0 222821 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 3612 a
15 w F4({l)955 3624 y F1(i)986 3612 y F4(=v)1073 3624
y F1(i)1115 3581 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1271
3612 y F4(})1355 b F7(r)o(ecord)20 b(value)592 3811 y
F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 3910 y
 gsave currentpoint translate 0 222821 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852
3910 a 15 w F4({l)955 3922 y F1(i)986 3910 y F4(:T)1073
3922 y F1(i)1115 3880 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1271
3910 y F4(})1355 b F7(type)20 b(of)g(r)o(ecords)450 4125
y(New)h(evaluation)f(rules)p 3096 4038 355 4 v 3096 4150
4 113 v 1960 w F4(t)j F5(\000)-15 b FV(!)23 b F4(t)3398
4095 y FX(0)p 3447 4150 V 3096 4153 355 4 v 1343 4272
a
 gsave currentpoint translate 0 419430 7800 div 6828507 7800 div 747110
-7800 div box .9 setgray fill grestore
 1343 4272 a 1367 4271 a F4({l)1455 4283 y F1(i)1486
4271 y F4(=v)1573 4283 y F1(i)1615 4241 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1771 4271 y F4(}.l)1902 4283 y F1(j)1954
4271 y F5(\000)c FV(!)23 b F4(v)2155 4283 y F1(j)2946
4272 y Gd(\()r(E)t(-)t(R)t F6(C)t(D)t Gd(B)t F6(E)t(T)o(A)r
Gd(\))1481 4514 y
 gsave currentpoint translate 0 851966 7800 div 4661239 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1481 4514 a 1602 4458 a F4(t)1645 4470
y F1(1)1709 4458 y F5(\000)-14 b FV(!)23 b F4(t)1917
4428 y FX(0)1909 4482 y F1(1)p 1515 4495 523 4 v 1515
4568 a F4(t)1558 4580 y F1(1)1599 4568 y F4(.l)f F5(\000)-14
b FV(!)23 b F4(t)1917 4538 y FX(0)1909 4591 y F1(1)1950
4568 y F4(.l)3123 4514 y Gd(\()r(E)t(-)t(P)t F6(R)t(O)t(J)r
Gd(\))p eop
%%Page: 89 90
89 89 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(89)450 854 y
 gsave currentpoint translate 0 887300 7800 div 21090442 7800 div 2001412
-7800 div box .9 setgray fill grestore
 450 854 a 1749 694 a F4(t)1793 706
y F1(j)1670 793 y F5(\000)-14 b FV(!)23 b F4(t)1878 763
y FX(0)1871 817 y F1(j)p 484 834 2604 4 v 484 907 a F4({l)571
919 y F1(i)603 907 y F4(=v)690 919 y F1(i)731 877 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(j)g Fy(-)g FB(1)929 907 y F4(,l)1017
919 y F1(j)1046 907 y F4(=t)1133 919 y F1(j)1163 907
y F4(,l)1250 919 y F1(k)1294 907 y F4(=t)1381 919 y F1(k)1436
877 y FB(k)p Fz(2)p FB(j)g Fy(+)e FB(1)i(:)g(:)g(n)1652
907 y F4(})22 b F5(\000)-14 b FV(!)23 b F4({l)1962 919
y F1(i)1994 907 y F4(=v)2081 919 y F1(i)2122 877 y FB(i)p
Fz(2)q FB(1)-10 b(:)g(:)g(j)g Fy(-)g FB(1)2320 907 y
F4(,l)2408 919 y F1(j)2437 907 y F4(=t)2532 877 y FX(0)2524
931 y F1(j)2555 907 y F4(,l)2642 919 y F1(k)2687 907
y F4(=t)2774 919 y F1(k)2828 877 y FB(k)p Fz(2)p FB(j)g
Fy(+)f FB(1)h(:)g(:)g(n)3044 907 y F4(})2992 1035 y Gd(\()r(E)t(-)t(R)t
F6(E)t(C)t(O)t(R)t(D)s Gd(\))450 1178 y F7(New)21 b(typing)e(rules)p
3067 1095 383 4 v 3067 1203 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 1203 V 3067 1206 383
4 v 1175 1379 a
 gsave currentpoint translate 0 851966 7800 div 9485617 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1175 1379 a 1368 1323 a Gd(for)e(each)f
Gb(i)83 b(\000)23 b F5(`)f F4(t)1980 1335 y F1(i)2034
1323 y FF(:)i F4(T)2152 1335 y F1(i)p 1209 1360 1134
4 v 1209 1433 a Gb(\000)f F5(`)g F4({l)1438 1445 y F1(i)1469
1433 y F4(=t)1556 1445 y F1(i)1598 1403 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1754 1433 y F4(})23 b FF(:)g F4({l)1983
1445 y F1(i)2014 1433 y F4(:T)2101 1445 y F1(i)2143 1403
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2299 1433 y F4(})3146
1379 y Gd(\()r(T)o(-)t(R)t F6(C)t(D)s Gd(\))1357 1676
y
 gsave currentpoint translate 0 851966 7800 div 6618829 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1357 1676 a 1391 1620 a Gb(\000)23 b F5(`)f F4(t)1576
1632 y F1(0)1640 1620 y FF(:)h F4({l)1801 1632 y F1(i)1832
1620 y F4(:T)1920 1632 y F1(i)1961 1591 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)2118 1620 y F4(})p 1391 1657 771
4 v 1519 1730 a Gb(\000)23 b F5(`)g F4(t)1705 1742 y
F1(0)1745 1730 y F4(.l)1832 1742 y F1(j)1885 1730 y FF(:)g
F4(T)2003 1742 y F1(j)3127 1676 y Gd(\()r(T)o(-)t(P)t
F6(R)t(O)t(J)s Gd(\))450 1885 y F7(New)e(abbr)o(eviations)1137
2018 y
 gsave currentpoint translate 0 530384 7800 div 10083701 7800 div 858065
-7800 div box .9 setgray fill grestore
 1137 2018 a 1161 2031 a F4({...t)1379 2043 y F1(i)1411
2031 y F4(...})1691 1984 y FK(def)1701 2031 y FY(=)116
b F4({...i=t)2185 2043 y F1(i)2216 2031 y F4(...})1137
2218 y
 gsave currentpoint translate 0 530384 7800 div 10083701 7800 div 858065
-7800 div box .9 setgray fill grestore
 1137 2218 a 1161 2231 a F4({...T)1379 2243 y F1(i)1411
2231 y F4(...})1691 2184 y FK(def)1701 2231 y FY(=)g
F4({...i:T)2185 2243 y F1(i)2216 2231 y F4(...})p 409
2347 9 36 v 418 2347 3000 6 v 3418 2347 38 6 v 3455 2347
9 36 v 450 2501 a Gd(Note)35 b(that)f Gb(n)h Gd(ranges)f(over)h(all)f
(nonnegative)h(numbers)g(her)o(e,)i(so)e(that)g(r)o(ecor)o(ds)e(can)h
(be)450 2601 y(empty)-9 b(.)25 b(W)-8 b(e)21 b(will)h(assume)f(that)f
(no)i(r)o(ecor)o(d)d(term)h(or)h(type)g(contains)h(any)e(r)o(epeated)f
(labels.)450 2769 y Ge(9.6.1)g(Exercise:)39 b Gd(In)27
b(this)g(pr)o(esentation)f(of)g(r)o(ecor)o(ds,)g(the)h(pr)o(ojection)f
(operation)h(is)g(used)f(to)450 2869 y(extract)18 b(the)i(\002elds)f
(of)h(a)f(r)o(ecor)o(d)e(one)j(by)f(one.)26 b(Many)19
b(high-level)h(pr)o(ogramming)f(languages)450 2969 y(pr)o(ovide)28
b(an)g(alternative)g Ge(pattern)f(matching)g Gd(syntax)i(that)f
(extracts)g(all)h(the)g(\002elds)g(at)f(the)450 3068
y(same)22 b(time,)g(allowing)h(many)f(pr)o(ograms)f(to)i(be)e(expr)o
(essed)g(mor)o(e)g(concisely)-9 b(.)30 b(Patterns)21
b(can)450 3168 y(typically)e(be)f(nested,)h(allowing)g(parts)g(to)g(be)
f(extracted)f(easily)i(fr)o(om)f(complex)h(nested)f(data)450
3268 y(str)o(uctur)o(es.)58 b(For)32 b(example,)h(we)e(can)h(add)e(a)h
(simple)h(form)g(of)g(pattern)f(matching)h(to)g(the)450
3367 y(untyped)22 b(lambda)f(calculus)h(with)g(r)o(ecor)o(ds)f(by)g
(adding)h(a)f(new)h(syntactic)h(category)e(of)h(pat-)450
3467 y(terns,)e(plus)h(one)g(new)g(case)e(\(for)h(the)h(pattern)f
(matching)h(constr)o(uct)g(itself\))f(to)h(the)g(syntax)f(of)450
3566 y(terms.)31 b(T)-8 b(o)23 b(de\002ne)g(the)f(computation)i(r)o
(ule)f(for)f(pattern)g(matching,)h(we)g(need)f(an)h(auxiliary)450
3666 y(\223matching\224)j(function.)41 b(Given)27 b(a)e(pattern)g(and)h
(a)f(term,)i(the)f(pattern)g(matching)g(function)450
3766 y(either)18 b(fails)h(\(if)f(the)g(term)h(does)f(not)h(match)g
(the)g(pattern\))e(or)i(else)f(yields)h(a)f(substitution)i(that)450
3865 y(r)o(eplaces)c(variables)h(appearing)g(in)h(the)g(pattern)f(with)
i(the)f(corr)o(esponding)g(subterms)g(of)g(the)450 3965
y(given)25 b(term.)36 b(Her)o(e)23 b(is)i(the)f(formal)g(de\002nition)i
(of)e(the)h(calculus,)g(highlighting)h(dif)o(fer)o(ences)450
4065 y(fr)o(om)20 b(the)h(pur)o(e)f(untyped)h(lambda-calculus)e(with)j
(r)o(ecor)o(ds)d(and)h(or)o(dinary)g(let-binding:)450
4219 y Ge(Record)g(patterns)1502 b FV(!)35 b FA(fg)f
F4(let)2918 4219 y
 gsave currentpoint translate 0 305389 7800 div 1085924 7800 div 544929
-7800 div box .9 setgray fill grestore
 2918 4219 a 16 w F7(pat)h Ge(\(untyped\))p
409 4301 9 36 v 418 4272 3000 6 v 3418 4272 38 6 v 3455
4301 9 36 v 450 4391 a F7(New)21 b(syntactic)e(forms)560
4521 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 560 4521 a 16 w F4(p)77 b Gd(::=)63 b Gb(:::)852
4621 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 852 4621 a 15 w F4(x)1759 b F7(variable)21 b(pattern)852
4721 y
 gsave currentpoint translate 0 270154 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 4721 a 15 w F4({l)955 4733 y F1(i)986 4721
y F4(=p)1073 4733 y F1(i)1115 4691 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1271 4721 y F4(})1355 b F7(r)o(ecord)20 b(pattern)592
4920 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)p eop
%%Page: 90 91
90 90 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(90)852 683 y F4(let)1026 683 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 1026 683 a 16 w F4(p)15
b(=t)43 b(in)g(t)2670 683 y
 gsave currentpoint translate 0 305389 7800 div 2178388 7800 div 544929
-7800 div box .9 setgray fill grestore
 2670 683 a 16 w F7(pattern)36
b(binding)450 898 y(Matching)20 b(rules:)1359 1039 y
 gsave currentpoint translate 0 419430 7800 div 6578252 7800 div 747110
-7800 div box .9 setgray fill grestore

1359 1039 a 1383 1038 a F7(match)o FY(\()p F4(x)p Gb(;)27
b F4(t)p FY(\))c(=)g F0(f)p F4(x)f F5(7)p FV(!)h F4(t)p
F0(g)3120 1039 y Gd(\()r(M)t(-)t(V)l F6(A)t(R)q Gd(\))774
1281 y
 gsave currentpoint translate 0 851966 7800 div 15813038 7800 div 1179646
-7800 div box .9 setgray fill grestore
 774 1281 a 1233 1225 a Gd(for)d(each)g Gb(i)83
b F7(match)o FY(\()p F4(p)1939 1237 y F1(i)1971 1225
y Gb(;)28 b F4(t)2065 1237 y F1(i)2096 1225 y FY(\))c(=)f
Gb(\033)2288 1237 y F1(i)p 808 1262 1936 4 v 808 1335
a F7(match)o FY(\()p F4({l)1132 1347 y F1(i)1164 1335
y F4(=p)1251 1347 y F1(i)1292 1305 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1449 1335 y F4(})o Gb(;)28 b F4({l)1630 1347
y F1(i)1662 1335 y F4(=t)1749 1347 y F1(i)1790 1305 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1947 1335 y F4(})o
FY(\))107 b(=)e Gb(\033)2347 1347 y F1(1)2407 1335 y
F5(\016)18 b(\001)c(\001)g(\001)k(\016)g Gb(\033)2692
1347 y F1(n)3114 1281 y Gd(\()r(M)t(-)t(R)t F6(C)t(D)r
Gd(\))450 1519 y F7(New)j(evaluation)f(rules)p 3096 1432
355 4 v 3096 1544 4 113 v 1960 w F4(t)j F5(\000)-15 b
FV(!)23 b F4(t)3398 1489 y FX(0)p 3447 1544 V 3096 1547
355 4 v 1087 1649 a F4(let)1261 1649 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 1261 1649 a 16
w F4(p)15 b(=v)1423 1661 y F1(1)1507 1649 y F4(in)43
b(t)1682 1661 y F1(2)1745 1649 y F5(\000)-14 b FV(!)1902
1649 y
 gsave currentpoint translate 0 288243 7800 div 3780215 7800 div 615693
-7800 div box .9 setgray fill grestore
 1902 1649 a 16 w F7(match)n FY(\()p F4(p)p Gb(;)28
b F4(v)2292 1661 y F1(1)2333 1649 y FY(\))16 b F4(t)2425
1661 y F1(2)2968 1649 y Gd(\()r(E)t(-)t(L)t F6(E)t(T)t
Gd(B)t F6(E)t(T)o(A)p Gd(\))1602 1795 y F4(t)1645 1807
y F1(1)1709 1795 y F5(\000)-14 b FV(!)23 b F4(t)1917
1765 y FX(0)1909 1819 y F1(1)p 1050 1838 1452 4 v 1050
1918 a F4(let)1225 1918 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 1225 1918 a 15 w F4(p)16 b(=t)1387
1930 y F1(1)1471 1918 y F4(in)43 b(t)1645 1930 y F1(2)1709
1918 y F5(\000)-14 b FV(!)23 b F4(let)2040 1918 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 2040
1918 a 16 w F4(p)15 b(=t)2210 1888 y FX(0)2203 1941 y
F1(1)2287 1918 y F4(in)42 b(t)2461 1930 y F1(2)3164 1857
y Gd(\()r(E)t(-)t(L)t F6(E)t(T)p Gd(\))450 2053 y F7(New)21
b(abbr)o(eviations)1137 2186 y
 gsave currentpoint translate 0 530384 7800 div 10083701 7800 div 858065
-7800 div box .9 setgray fill grestore
 1137 2186 a 1161 2199
a F4({...p)1379 2211 y F1(i)1411 2199 y F4(...})1691
2152 y FK(def)1701 2199 y FY(=)116 b F4({...i=p)2185
2211 y F1(i)2216 2199 y F4(...})p 409 2315 9 36 v 418
2315 3000 6 v 3418 2315 38 6 v 3455 2315 9 36 v 450 2481
a Gd(Y)-8 b(our)26 b(job)f(is)g(to)g(add)e(types)i(to)g(this)g
(calculus,)g(in)h(the)e(style)h(of)g(the)g(simply)g(typed)f(lambda-)450
2581 y(calculus:)554 2747 y(1.)41 b(Give)23 b(typing)g(r)o(ules)h(for)e
(the)h(new)g(constr)o(ucts)h(\(making)g(any)f(changes)g(to)g(the)g
(syntax)658 2846 y(you)e(feel)f(ar)o(e)f(necessary)i(in)g(the)g(pr)o
(ocess\).)554 3012 y(2.)41 b(Sketch)26 b(a)g(pr)o(oof)g(of)g(type)h(pr)
o(eservation)e(and)h(pr)o(ogr)o(ess)g(for)g(the)h(whole)h(calculus)e
(by)658 3112 y(stating)i(the)h(sequence)f(of)g(major)h(lemmas)f(needed)
g(to)g(carry)g(out)g(the)h(pr)o(oof.)47 b(\(Y)-8 b(ou)658
3212 y(do)28 b(not)h(need)f(to)g(show)h(pr)o(oofs,)h(just)f(statements)
f(of)h(the)f(r)o(equir)o(ed)f(lemmas)h(in)h(the)658 3311
y(corr)o(ect)19 b(or)o(der)-6 b(.\))450 3477 y(Solution)22
b(on)f(page)f(291.)2156 b FZ(2)450 3763 y Gj(9.7)119
b(V)-13 b(ariants)450 4118 y Ge(V)k(ariants)2409 b FV(!)3293
4118 y
 gsave currentpoint translate 0 137793 7800 div 1240236 7800 div 465243
-7800 div box .9 setgray fill grestore
 3293 4118 a 16 w Gb(<>)p 409 4200 9 36 v 418 4171
3000 6 v 3418 4171 38 6 v 3455 4200 9 36 v 450 4290 a
F7(New)21 b(syntactic)e(forms)592 4421 y F4(t)61 b Gd(::=)i(...)1695
b F7(terms)852 4520 y
 gsave currentpoint translate 0 124518 7800 div 3689646 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4520 a 15 w F4(<l=t>)42 b(as)h(T)1366
b F7(tagging)852 4620 y
 gsave currentpoint translate 0 222821 7800 div 10344759 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4620 a 15 w F4(case)42 b(t)h(of)g(...)g(|)g
(l)1608 4632 y F1(i)1640 4620 y F4(=x)p FV(\))o F4(t)1853
4632 y F1(i)1928 4620 y F4(|)h(...)522 b F7(case)592
4819 y F4(T)61 b Gd(::=)i(...)1695 b F7(types)p eop
%%Page: 91 92
91 91 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(91)852 683 y
 gsave currentpoint translate 0 222821 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 683 a 15 w F4(<l)955 695 y F1(i)986
683 y F4(:T)1073 695 y F1(i)1115 653 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1271 683 y F4(>)1355 b F7(type)20
b(of)g(variants)450 898 y(New)h(evaluation)f(rules)p
3096 811 355 4 v 3096 923 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 868 y FX(0)p 3447 923 V 3096 926
355 4 v 678 1045 a
 gsave currentpoint translate 0 419430 7800 div 17325781 7800 div 747110
-7800 div box .9 setgray fill grestore
 678 1045 a 703 1044 a F4(case)41 b(<l)1008
1056 y F1(i)1039 1044 y F4(=v)1126 1056 y F1(i)1158 1044
y F4(>)1201 1044 y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 1201 1044 a 59 w F4(as)i(T)59 b(of)43
b(...|l)1843 1056 y F1(i)1874 1044 y F4(=x)p FV(\))o
F4(t)2088 1056 y F1(i)2119 1044 y F4(|...)22 b F5(\000)-15
b FV(!)24 b F0(f)p F4(x)e F5(7)p FV(!)h F4(v)2716 1056
y F1(i)2748 1044 y F0(g)p F4(t)2818 1056 y F1(i)2910
1045 y Gd(\()r(E)t(-)t(C)t F6(A)t(S)t(E)t Gd(B)t F6(E)t(T)o(A)p
Gd(\))507 1287 y
 gsave currentpoint translate 0 851966 7800 div 20035831 7800 div 1179646
-7800 div box .9 setgray fill grestore
 507 1287 a 1602 1231 a F4(s)1645 1243
y F1(1)1709 1231 y F5(\000)-14 b FV(!)23 b F4(s)1917
1201 y FX(0)1909 1254 y F1(1)p 541 1268 2471 4 v 541
1340 a F4(case)42 b(s)802 1352 y F1(1)886 1340 y F4(of)h(...|l)1235
1352 y F1(i)1267 1340 y F4(=x)p FV(\))o F4(t)1480 1352
y F1(i)1512 1340 y F4(|...)21 b F5(\000)-14 b FV(!)23
b F4(case)42 b(s)2135 1310 y FX(0)2127 1364 y F1(1)2211
1340 y F4(of)h(...|l)2560 1352 y F1(i)2591 1340 y F4(=x)p
FV(\))p F4(t)2805 1352 y F1(i)2837 1340 y F4(|...)3106
1287 y Gd(\()r(E)t(-)t(C)t F6(A)t(S)t(E)p Gd(\))1122
1583 y
 gsave currentpoint translate 0 851966 7800 div 10326181 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1122 1583 a 1611 1527 a F4(t)1655 1539 y F1(i)1709
1527 y F5(\000)-14 b FV(!)23 b F4(t)1917 1498 y FX(0)1909
1551 y F1(i)p 1156 1564 1241 4 v 1156 1637 a F4(<l)1243
1649 y F1(i)1274 1637 y F4(=t)1362 1649 y F1(i)1393 1637
y F4(>)1436 1637 y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 1436 1637 a 60 w F4(as)43 b(T)38 b
F5(\000)-14 b FV(!)23 b F4(<l)1953 1649 y F1(i)1984 1637
y F4(=t)2079 1607 y FX(0)2072 1661 y F1(i)2103 1637 y
F4(>)2146 1637 y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 2146 1637 a 60 w F4(as)43 b(T)3148 1583
y Gd(\()r(E)t(-)t(T)o F6(A)t(G)p Gd(\))450 1817 y F7(New)21
b(typing)e(rules)p 3067 1734 383 4 v 3067 1842 4 108
v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p 3447 1842
V 3067 1845 383 4 v 949 2018 a
 gsave currentpoint translate 0 851966 7800 div 13047822 7800 div 1179646
-7800 div box .9 setgray fill grestore
 949 2018 a 1583 1962 a
Gb(\000)g F5(`)g F4(t)1769 1974 y F1(j)1821 1962 y FF(:)g
F4(T)1939 1974 y F1(j)p 983 1999 1585 4 v 983 2072 a
Gb(\000)g F5(`)g F4(<l)1212 2084 y F1(j)1242 2072 y F4(=t)1329
2084 y F1(j)1358 2072 y F4(>)44 b(as)e(<l)1664 2084 y
F1(i)1695 2072 y F4(:T)1782 2084 y F1(i)1824 2042 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)1980 2072 y F4(>)23 b FF(:)g
F4(<l)2208 2084 y F1(i)2240 2072 y F4(:T)2327 2084 y
F1(i)2368 2042 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2525
2072 y F4(>)2966 2018 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)t(I)t(A)t(N)t(T)r
Gd(\))1012 2415 y
 gsave currentpoint translate 0 851966 7800 div 12055079 7800 div 1966078
-7800 div box .9 setgray fill grestore
 1012 2415 a 1391 2259 a Gb(\000)23
b F5(`)f F4(t)1576 2271 y F1(0)1640 2259 y FF(:)h F4(<l)1801
2271 y F1(i)1832 2259 y F4(:T)1920 2271 y F1(i)1961 2229
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2118 2259 y F4(>)1264
2359 y Gd(for)21 b(each)f Gb(i)83 b(\000)5 b(;)18 b F4(x)1825
2371 y F1(i)1857 2359 y F4(:T)1944 2371 y F1(i)1998 2359
y F5(`)23 b F4(t)2115 2371 y F1(i)2170 2359 y FF(:)g
F4(T)p 1046 2396 1460 4 v 1046 2468 a Gb(\000)g F5(`)g
F4(case)42 b(t)1450 2480 y F1(0)1534 2468 y F4(of)g(...|l)1882
2480 y F1(i)1914 2468 y F4(=x)2001 2480 y F1(i)2032 2468
y FV(\))p F4(t)2159 2480 y F1(i)2190 2468 y F4(|...)22
b FF(:)h F4(T)3110 2415 y Gd(\()r(T)o(-)t(C)t F6(A)t(S)t(E)q
Gd(\))p 409 2560 9 36 v 418 2560 3000 6 v 3418 2560 38
6 v 3455 2560 9 36 v 450 2714 a(Note)28 b(that)g(we)g(syntactically)h
(allow)f(the)h(type)f(label)f(to)i(be)e(a)h(non-variant)g(type,)i(but)e
(the)450 2813 y(typing)g(r)o(ule)g(then)g(excludes)f(this)h(case.)46
b(This)28 b(is)g(just)g(for)f(br)o(evity)g(\(and)g(implementation)450
2913 y(\003exibility)-9 b(,)21 b(e.g.)k(when)d(we)e(get)h(to)g
(de\002nitions\).)450 3196 y Gj(9.8)119 b(Sums)450 3435
y(9.9)g(General)28 b(Recursion)450 3677 y Ge(General)19
b(recursion)2039 b FV(!)3288 3677 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 3288 3677 a 15 w
F4(fix)p 409 3759 9 36 v 418 3730 3000 6 v 3418 3730
38 6 v 3455 3759 9 36 v 450 3849 a F7(New)21 b(syntactic)e(forms)592
3980 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 4079
y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4079 a 15 w F4(fix)43 b(t)1584 b F7(\002xed)20
b(point)g(of)h FQ(t)450 4294 y F7(New)g(typing)e(rules)p
3067 4211 383 4 v 3067 4319 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 4319 V 3067 4322 383
4 v 1451 4496 a
 gsave currentpoint translate 0 851966 7800 div 5128285 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1451 4496 a 1489 4440 a Gb(\000)g F5(`)f
F4(t)1674 4452 y F1(1)1738 4440 y FF(:)h F4(T)1855 4452
y F1(1)1896 4440 y FV(!)p F4(T)2023 4452 y F1(1)p 1485
4476 582 4 v 1485 4549 a Gb(\000)g F5(`)g F4(fix)42 b(t)1845
4561 y F1(1)1908 4549 y FF(:)24 b F4(T)2026 4561 y F1(1)3187
4496 y Gd(\()r(T)o(-)t(F)t F6(I)t(X)s Gd(\))450 4704
y F7(New)d(abbr)o(eviations)695 4837 y
 gsave currentpoint translate 0 530384 7800 div 17072095 7800 div 858065
-7800 div box .9 setgray fill grestore
 695 4837 a 719
4850 a F4(letrec)41 b(x)o(=t)1154 4862 y F1(1)1239 4850
y F4(in)h(t)1413 4862 y F1(2)1560 4803 y FK(def)1569
4850 y FY(=)116 b F4(let)43 b(x)g(=)g(fix)f(\()p Gb(\025)p
F4(x)o(.t)2491 4862 y F1(1)2531 4850 y F4(\))h(in)g(t)2793
4862 y F1(2)p eop
%%Page: 92 93
92 92 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(92)p 409 755 9 36 v 418 755 3000 6 v 3418 755 38
6 v 3455 755 9 36 v 575 908 a(A)24 b(cor)o(ollary)g(of)h(the)g
(de\002nability)g(of)g(\002xed-point)g(combinators)g(at)g(every)f(type)
h(is)g(that)450 1008 y(every)17 b(type)g(in)h(this)h(system)f(is)g
(inhabited.)24 b(For)18 b(example,)f(for)g(each)g(type)h
F4(T)p Gd(,)f(the)h(application)450 1107 y F4(\(diverge)799
1119 y F1(T)890 1107 y F4(unit\))g Gd(has)j(type)g F4(T)o
Gd(,)g(wher)o(e)f F4(diverge)2097 1119 y F1(T)2165 1107
y Gd(is)h(de\002ned)g(like)g(this:)616 1252 y FT(diverge)889
1261 y FL(T)974 1252 y FT(=)39 b FM(\025)p FT(_:Unit.)h(fix)g(\()p
FM(\025)p FT(x:T.)g(x\);)529 1345 y FS(I)616 1355 y FT(T)f(=)h(Nat:)g
(*)616 1446 y(diverge)889 1455 y FL(T)974 1446 y FT(:)f(Unit)h
FO(!)f FT(T)450 1729 y Gj(9.10)119 b(Lists)450 1971 y
Ge(Lists)2406 b FV(!)34 b FN(B)3244 1971 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 3244 1971
a 16 w F4(List)p 409 2053 9 36 v 418 2024 3000 6 v 3418
2024 38 6 v 3455 2053 9 36 v 450 2143 a F7(New)21 b(syntactic)e(forms)
592 2274 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852
2373 y
 gsave currentpoint translate 0 179129 7800 div 2657463 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 2373 a 15 w F4(nil)43 b([T])1496 b F7(empty)19
b(list)852 2473 y
 gsave currentpoint translate 0 179129 7800 div 4377768 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 2473 a 15 w F4(cons)42 b([T])h(t)g(t)1279
b F7(list)21 b(constructor)852 2572 y
 gsave currentpoint translate 0 179129 7800 div 3689646 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 2572 a 15 w
F4(null)42 b([T])h(t)1366 b F7(test)21 b(for)g(empty)e(list)852
2672 y
 gsave currentpoint translate 0 179129 7800 div 3689646 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 2672 a 15 w F4(head)42 b([T])h(t)1366 b F7(head)20
b(of)h(a)f(list)852 2772 y
 gsave currentpoint translate 0 179129 7800 div 3689646 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 2772 a 15 w F4(tail)42
b([T])h(t)1366 b F7(tail)20 b(of)h(a)g(list)592 2971
y F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 3071 y
 gsave currentpoint translate 0 179129 7800 div 2657463 7800 div 579629
-7800 div box .9 setgray fill grestore

852 3071 a 15 w F4(nil)43 b([T])1496 b F7(empty)19 b(list)852
3170 y
 gsave currentpoint translate 0 179129 7800 div 4377768 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 3170 a 15 w F4(cons)42 b([T])h(v)g(v)1279
b F7(list)21 b(constructor)592 3369 y F4(T)61 b Gd(::=)i(...)1695
b F7(types)852 3469 y
 gsave currentpoint translate 0 124518 7800 div 2313402 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3469 a 15 w F4(List)42 b(T)1541
b F7(type)20 b(of)g(lists)450 3684 y(New)h(evaluation)f(rules)p
3096 3597 355 4 v 3096 3709 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 3654 y FX(0)p 3447 3709 V 3096
3712 355 4 v 1091 3885 a
 gsave currentpoint translate 0 851966 7800 div 10805751 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1091 3885 a 1602 3829 a F4(t)1645
3841 y F1(1)1709 3829 y F5(\000)-14 b FV(!)23 b F4(t)1917
3800 y FX(0)1909 3853 y F1(1)p 1126 3866 1301 4 v 1126
3939 a F4(cons[T])40 b(t)1518 3951 y F1(1)1602 3939 y
F4(t)1645 3951 y F1(2)1709 3939 y F5(\000)-14 b FV(!)23
b F4(cons[T])41 b(t)2266 3909 y FX(0)2258 3963 y F1(1)2342
3939 y F4(t)2386 3951 y F1(2)3045 3885 y Gd(\()r(E)t(-)t(C)t
F6(O)t(N)t(S)t Gd(1)q(\))1091 4182 y
 gsave currentpoint translate 0 851966 7800 div 10805751 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1091 4182 a 1602
4126 a F4(t)1645 4138 y F1(2)1709 4126 y F5(\000)-14
b FV(!)23 b F4(t)1917 4097 y FX(0)1909 4150 y F1(2)p
1126 4163 1301 4 v 1126 4236 a F4(cons[T])40 b(v)1518
4248 y F1(1)1602 4236 y F4(t)1645 4248 y F1(2)1709 4236
y F5(\000)-14 b FV(!)23 b F4(cons[T])41 b(v)2258 4248
y F1(1)2342 4236 y F4(t)2393 4206 y FX(0)2386 4260 y
F1(2)3045 4182 y Gd(\()r(E)t(-)t(C)t F6(O)t(N)t(S)t Gd(2)q(\))1226
4424 y
 gsave currentpoint translate 0 419430 7800 div 8681271 7800 div 747110
-7800 div box .9 setgray fill grestore
 1226 4424 a 1250 4423 a F4(null[S])g(\(nil[T]\))20
b F5(\000)-15 b FV(!)23 b F4(true)2845 4424 y Gd(\()r(E)t(-)t(N)t
F6(U)t(L)t(L)t Gd(B)t F6(E)t(T)o(A)o Gd(T)o(\))1055 4612
y
 gsave currentpoint translate 0 419430 7800 div 11385173 7800 div 747110
-7800 div box .9 setgray fill grestore
 1055 4612 a 1079 4611 a F4(null[S])41 b(\(cons[T])f(v)1863
4623 y F1(1)1947 4611 y F4(v)1991 4623 y F1(2)2032 4611
y F4(\))22 b F5(\000)-14 b FV(!)23 b F4(false)2844 4612
y Gd(\()r(E)t(-)t(N)t F6(U)t(L)t(L)t Gd(B)t F6(E)t(T)o(A)t
Gd(F\))1219 4854 y
 gsave currentpoint translate 0 851966 7800 div 8789971 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1219 4854 a 1602 4798 a F4(t)1645
4810 y F1(1)1709 4798 y F5(\000)-14 b FV(!)23 b F4(t)1917
4768 y FX(0)1909 4821 y F1(1)p 1253 4834 1046 4 v 1253
4907 a F4(null[T])41 b(t)1645 4919 y F1(1)1709 4907 y
F5(\000)-14 b FV(!)23 b F4(null[T])41 b(t)2266 4877 y
FX(0)2258 4931 y F1(1)3090 4854 y Gd(\()r(E)t(-)t(N)t
F6(U)t(L)t(L)p Gd(\))p eop
%%Page: 93 94
93 93 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(93)1122 695 y
 gsave currentpoint translate 0 419430 7800 div 10328697 7800 div 747110
-7800 div box .9 setgray fill grestore
 1122 695 a 1146 694 a F4(head[S])40
b(\(cons[T])h(v)1930 706 y F1(1)2014 694 y F4(v)2058
706 y F1(2)2099 694 y F4(\))22 b F5(\000)-14 b FV(!)23
b F4(v)2366 706 y F1(1)2884 695 y Gd(\()r(E)t(-)t(H)t
F6(E)t(A)t(D)t Gd(B)t F6(E)t(T)o(A)p Gd(\))1219 937 y
 gsave currentpoint translate 0 851966 7800 div 8789971 7800 div 1179646
-7800 div box .9 setgray fill grestore

1219 937 a 1602 881 a F4(t)1645 893 y F1(1)1709 881 y
F5(\000)-14 b FV(!)23 b F4(t)1917 851 y FX(0)1909 904
y F1(1)p 1253 918 1046 4 v 1253 990 a F4(head[T])41 b(t)1645
1002 y F1(1)1709 990 y F5(\000)-14 b FV(!)23 b F4(head[T])41
b(t)2266 961 y FX(0)2258 1014 y F1(1)3079 937 y Gd(\()r(E)t(-)t(H)t
F6(E)t(A)t(D)q Gd(\))1122 1179 y
 gsave currentpoint translate 0 419430 7800 div 10328697 7800 div 747110
-7800 div box .9 setgray fill grestore
 1122 1179 a 1146 1178
a F4(tail[S])f(\(cons[T])h(v)1930 1190 y F1(1)2014 1178
y F4(v)2058 1190 y F1(2)2099 1178 y F4(\))22 b F5(\000)-14
b FV(!)23 b F4(v)2366 1190 y F1(2)2936 1179 y Gd(\()r(E)t(-)t(T)o
F6(A)t(I)t(L)t Gd(B)t F6(E)t(T)o(A)p Gd(\))1219 1421
y
 gsave currentpoint translate 0 851966 7800 div 8789971 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1219 1421 a 1602 1365 a F4(t)1645 1377 y F1(1)1709
1365 y F5(\000)-14 b FV(!)23 b F4(t)1917 1335 y FX(0)1909
1388 y F1(1)p 1253 1402 1046 4 v 1253 1474 a F4(tail[T])41
b(t)1645 1486 y F1(1)1709 1474 y F5(\000)-14 b FV(!)23
b F4(tail[T])41 b(t)2266 1445 y FX(0)2258 1498 y F1(1)3132
1421 y Gd(\()r(E)t(-)t(T)o F6(A)t(I)t(L)p Gd(\))450 1654
y F7(New)21 b(typing)e(rules)p 3067 1571 383 4 v 3067
1679 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p
3447 1679 V 3067 1682 383 4 v 1349 1801 a
 gsave currentpoint translate 0 419430 7800 div 6739890 7800 div 747110
-7800 div box .9 setgray fill grestore
 1349 1801 a
1373 1800 a Gb(\000)g F5(`)g F4(nil)42 b([T])22 b FF(:)h
F4(List)42 b(T)3168 1801 y Gd(\()r(T)o(-)t(N)t F6(I)t(L)r
Gd(\))1143 2043 y
 gsave currentpoint translate 0 851966 7800 div 9997713 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1143 2043 a 1177 1987 a Gb(\000)23
b F5(`)f F4(t)1362 1999 y F1(1)1426 1987 y FF(:)h F4(T)1543
1999 y F1(1)1750 1987 y Gb(\000)g F5(`)g F4(t)1935 1999
y F1(2)1999 1987 y FF(:)g F4(List)42 b(T)2335 1999 y
F1(1)p 1177 2024 1199 4 v 1205 2096 a Gb(\000)23 b F5(`)g
F4(cons[T)1608 2108 y F1(1)1649 2096 y F4(])43 b(t)1779
2108 y F1(1)1863 2096 y F4(t)1907 2108 y F1(2)1971 2096
y FF(:)23 b F4(List)42 b(T)2306 2108 y F1(1)3095 2043
y Gd(\()r(T)o(-)t(C)t F6(O)t(N)t(S)r Gd(\))1299 2340
y
 gsave currentpoint translate 0 851966 7800 div 7536712 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1299 2340 a 1463 2284 a Gb(\000)23 b F5(`)g F4(t)1649
2296 y F1(1)1712 2284 y FF(:)g F4(List)42 b(T)2048 2296
y F1(1)p 1333 2320 887 4 v 1333 2393 a Gb(\000)22 b F5(`)h
F4(null[T)1736 2405 y F1(1)1776 2393 y F4(])43 b(t)1907
2405 y F1(1)1971 2393 y FF(:)23 b F4(Bool)3094 2340 y
Gd(\()r(T)o(-)t(N)t F6(U)t(L)t(L)q Gd(\))1344 2636 y
 gsave currentpoint translate 0 851966 7800 div 6824297 7800 div 1179646
-7800 div box .9 setgray fill grestore

1344 2636 a 1463 2580 a Gb(\000)g F5(`)g F4(t)1649 2592
y F1(1)1712 2580 y FF(:)g F4(List)42 b(T)2048 2592 y
F1(1)p 1378 2617 797 4 v 1378 2690 a Gb(\000)23 b F5(`)f
F4(head[T)1781 2702 y F1(1)1821 2690 y F4(])44 b(t)1952
2702 y F1(1)2016 2690 y FF(:)23 b F4(T)2134 2702 y F1(1)3083
2636 y Gd(\()r(T)o(-)t(H)t F6(E)t(A)t(D)r Gd(\))1235
2933 y
 gsave currentpoint translate 0 851966 7800 div 8544602 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1235 2933 a 1463 2877 a Gb(\000)g F5(`)g F4(t)1649
2889 y F1(1)1712 2877 y FF(:)g F4(List)42 b(T)2048 2889
y F1(1)p 1269 2914 1015 4 v 1269 2987 a Gb(\000)23 b
F5(`)f F4(tail[T)1672 2999 y F1(1)1712 2987 y F4(])44
b(t)1843 2999 y F1(1)1907 2987 y FF(:)23 b F4(List)42
b(T)2243 2999 y F1(1)3136 2933 y Gd(\()r(T)o(-)t(T)o
F6(A)t(I)t(L)q Gd(\))p 409 3079 9 36 v 418 3079 3000
6 v 3418 3079 38 6 v 3455 3079 9 36 v 450 3359 a Gj(9.1)l(1)118
b(Lazy)30 b(records)g(and)f(let-bindings)450 3589 y Ge(Lazy)20
b(let)f(bindings)1850 b FV(!)35 b F4(let)3244 3589 y
 gsave currentpoint translate 0 270154 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore

3244 3589 a 16 w F4(lazy)p 409 3671 9 36 v 418 3642 3000
6 v 3418 3642 38 6 v 3455 3671 9 36 v 450 3761 a F7(New)21
b(syntactic)e(forms)592 3892 y F4(t)61 b Gd(::=)i(...)1695
b F7(terms)852 3991 y
 gsave currentpoint translate 0 270154 7800 div 6098073 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3991 a 15 w F4(lazy)42 b(let)h(x=t)f(in)h(t)
1061 b F7(lazy)20 b(let)h(binding)450 4206 y(New)g(evaluation)f(rules)p
3096 4119 355 4 v 3096 4231 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 4176 y FX(0)p 3447 4231 V 3096
4234 355 4 v 1054 4353 a
 gsave currentpoint translate 0 419430 7800 div 11399274 7800 div 747110
-7800 div box .9 setgray fill grestore
 1054 4353 a 1078 4352 a F4(lazy)42
b(let)g(x=t)1601 4364 y F1(1)1685 4352 y F4(in)h(t)1859
4364 y F1(2)1923 4352 y F5(\000)-14 b FV(!)23 b F0(f)p
F4(x)f F5(7)p FV(!)h F4(t)2323 4364 y F1(1)2363 4352
y F0(g)p F4(t)2433 4364 y F1(2)2914 4353 y Gd(\()r(E)t(-)t(L)t(L)t
F6(E)t(T)t Gd(B)t F6(E)t(T)o(A)o Gd(\))450 4531 y F7(New)e(typing)e
(rules)p 3067 4449 383 4 v 3067 4556 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 4556 V 3067 4559 383
4 v 1143 4733 a
 gsave currentpoint translate 0 851966 7800 div 9993355 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1143 4733 a 1177 4677 a Gb(\000)g F5(`)g
F4(t)1362 4689 y F1(1)1426 4677 y FF(:)g F4(T)1544 4689
y F1(1)1750 4677 y Gb(\000)6 b(;)17 b F4(x:T)1972 4689
y F1(1)2035 4677 y F5(`)23 b F4(t)2153 4689 y F1(2)2216
4677 y FF(:)h F4(T)2334 4689 y F1(2)p 1177 4714 1198
4 v 1203 4786 a Gb(\000)f F5(`)g F4(lazy)42 b(let)g(x=t)1868
4798 y F1(1)1952 4786 y F4(in)h(t)2126 4798 y F1(2)2190
4786 y FF(:)23 b F4(T)2308 4798 y F1(2)3113 4733 y Gd(\()r(T)o(-)t(L)t
(L)t F6(E)t(T)q Gd(\))p 409 4879 9 36 v 418 4879 3000
6 v 3418 4879 38 6 v 3455 4879 9 36 v eop
%%Page: 94 95
94 94 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)929 b
Gd(9)t(.)29 b(E)t F6(X)t(T)t(E)t(N)t(S)t(I)t(O)t(N)t(S)932
b Gd(94)450 683 y Ge(Lazy)20 b(records)2115 b FV(!)34
b FA(fg)3244 683 y
 gsave currentpoint translate 0 270154 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 3244 683 a 16 w F4(lazy)p 409 765
9 36 v 418 735 3000 6 v 3418 735 38 6 v 3455 765 9 36
v 450 854 a F7(New)21 b(syntactic)e(forms)592 985 y F4(t)61
b Gd(::=)i(...)1695 b F7(terms)852 1085 y
 gsave currentpoint translate 0 270154 7800 div 5499958 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 1085 a
15 w F4(lazy)42 b({l)1172 1097 y F1(i)1204 1085 y F4(=t)1291
1097 y F1(i)1332 1055 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)1489
1085 y F4(})1137 b F7(lazy)20 b(r)o(ecord)592 1284 y
F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 1384 y
 gsave currentpoint translate 0 270154 7800 div 5499958 7800 div 590183
-7800 div box .9 setgray fill grestore
 852
1384 a 15 w F4(lazy)42 b({l)1172 1396 y F1(i)1204 1384
y F4(=t)1291 1396 y F1(i)1332 1354 y FB(i)p Fz(2)q FB(1)-10
b(:)g(:)g(n)1489 1384 y F4(})1137 b F7(lazy)20 b(r)o(ecord)g(value)450
1599 y(New)h(evaluation)f(rules)p 3096 1511 355 4 v 3096
1624 4 113 v 1960 w F4(t)j F5(\000)-15 b FV(!)23 b F4(t)3398
1569 y FX(0)p 3447 1624 V 3096 1627 355 4 v 1189 1745
a
 gsave currentpoint translate 0 419430 7800 div 9266054 7800 div 747110
-7800 div box .9 setgray fill grestore
 1189 1745 a 1213 1744 a F4(\(lazy)42 b({l)1562 1756
y F1(i)1593 1744 y F4(=t)1680 1756 y F1(i)1722 1714 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1878 1744 y F4(}\).l)2053
1756 y F1(i)2107 1744 y F5(\000)c FV(!)23 b F4(t)2307
1756 y F1(i)2892 1745 y Gd(\()r(E)t(-)t(L)t(R)t F6(C)t(D)t
Gd(B)t F6(E)t(T)o(A)q Gd(\))450 1924 y F7(New)e(typing)e(rules)p
3067 1841 383 4 v 3067 1949 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 1949 V 3067 1952 383
4 v 1066 2125 a
 gsave currentpoint translate 0 851966 7800 div 11205922 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1066 2125 a 1498 2069 a Gb(\000)g F5(`)1627
2040 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1806 2069 y
F4(t)1850 2081 y F1(i)1904 2069 y FF(:)24 b F4(T)2022
2081 y F1(i)p 1100 2106 1352 4 v 1100 2179 a Gb(\000)f
F5(`)g F4(lazy)42 b({l)1547 2191 y F1(i)1578 2179 y F4(=t)1665
2191 y F1(i)1707 2149 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1863
2179 y F4(})23 b FF(:)g F4({l)2092 2191 y F1(i)2123 2179
y F4(:T)2210 2191 y F1(i)2252 2149 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2408 2179 y F4(})3091 2125 y Gd(\()r(T)o(-)t(L)t(R)t
F6(C)t(D)s Gd(\))p 409 2271 9 36 v 418 2271 3000 6 v
3418 2271 38 6 v 3455 2271 9 36 v 575 2437 a F7(Show)20
b(how)g(to)g(achieve)g(mutual)g(r)o(ecursion)i(with)e(\002xedpoints)f
(of)i(r)o(ecords.)p eop
%%Page: 95 96
95 95 bop 450 1306 a F3(Chapter)44 b(10)450 1721 y Gk(Exceptions)450
2175 y Gd(So)28 b(far)-6 b(,)28 b(we)g(have)g(consider)o(ed)f(a)g
(variety)h(of)g(featur)o(es)e(found)i(in)g(\223pur)o(e\224)e
(functional)j(pr)o(o-)450 2275 y(gramming)e(languages,)g(including)h
(functional)e(abstraction,)i(basic)d(types)i(such)g(as)f(num-)450
2374 y(bers)f(and)f(booleans,)i(and)f(str)o(uctur)o(ed)f(types)h(such)g
(as)g(r)o(ecor)o(ds)f(and)g(variants.)38 b(These)24 b(fea-)450
2474 y(tur)o(es)f(form)g(the)g(backbone)g(of)g(essentially)h(all)f
(modern)h(pr)o(ogramming)f(languages.)33 b(Most)450 2573
y(r)o(eal)27 b(languages,)i(though,)i(ar)o(e)c(much)h(richer)g
(semantically)g(than)g(the)h(simple)f(calculi)g(we)450
2673 y(have)22 b(seen:)28 b(besides)21 b(yielding)i(r)o(esults,)f
(evaluation)g(of)g(expr)o(essions)g(may)g(engender)f(a)h(va-)450
2773 y(riety)f(of)f Ge(computational)e(ef)o(fects)p Gd(:)575
2939 y F5(\017)41 b Gd(input)21 b(and)f(output)575 3105
y F5(\017)41 b Gd(assignment)23 b(to)g(mutable)f(variables)f(\(r)o
(efer)o(ence)f(cells,)i(arrays,)g(mutable)g(data)f(str)o(uc-)658
3204 y(tur)o(es,)e(etc.\))575 3370 y F5(\017)41 b Gd(non-local)22
b(transfer)f(of)h(contr)o(ol)g(via)f(exceptions,)i(continuations,)g
(and)f(other)g(contr)o(ol)658 3470 y(operators)575 3636
y F5(\017)41 b Gd(inter)o(-pr)o(ocess)19 b(communication.)450
3802 y(In)k(this)h(chapter)d(and)i(the)g(next,)g(we'll)g(see)f(how)i
(various)f(sorts)g(of)g(ef)o(fects)e(of)i(can)f(be)g(incor)o(-)450
3902 y(porated)g(in)i(the)f(models)h(we)f(have)g(developed.)32
b(W)-8 b(e)23 b(begin)h(with)g(exception)f(handling\227a)450
4001 y(simple)29 b(form)f(of)g(contr)o(ol)g(operator)-6
b(.)47 b(W)-8 b(e'll)29 b(examine)f(exceptions)g(\002rst)h(in)f(a)g
(very)g(simple)450 4101 y(form,)21 b(then)g(see)f(how)i(it)f(can)f(be)h
(extended)f(to)h(mor)o(e)f(r)o(ealistic)g(mechanisms.)1908
5169 y(95)p eop
%%Page: 96 97
96 96 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)907 b
Gd(1)t(0)t(.)29 b(E)t F6(X)t(C)t(E)t(P)t(T)t(I)t(O)t(N)t(S)911
b Gd(96)450 686 y Gj(10.1)119 b(Simple)29 b(Exceptions)450
925 y(10.2)119 b(Handling)29 b(Exceptions)450 1280 y
Ge(Errors)2456 b FV(!)3254 1280 y
 gsave currentpoint translate 0 131070 7800 div 1547932 7800 div 440398
-7800 div box .9 setgray fill grestore
 3254 1280 a 16 w F7(err)o(or)p
409 1362 9 36 v 418 1332 3000 6 v 3418 1332 38 6 v 3455
1362 9 36 v 450 1452 a(New)21 b(syntactic)e(forms)592
1582 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 1682
y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 406686
-7800 div box .9 setgray fill grestore
 852 1682 a 15 w F4(error)1583 b F7(run-time)21 b(err)o(or)852
1782 y
 gsave currentpoint translate 0 270154 7800 div 6737609 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 1782 a 15 w F4(try)43 b(t)1085 1794 y F1(1)1169
1782 y F4(otherwise)d(t)1649 1794 y F1(2)2670 1782 y
F7(trap)20 b(err)o(ors)450 1997 y(New)h(evaluation)f(rules)p
3096 1909 355 4 v 3096 2021 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 1966 y FX(0)p 3447 2021 V 3096
2024 355 4 v 1209 2143 a
 gsave currentpoint translate 0 419430 7800 div 8952453 7800 div 747110
-7800 div box .9 setgray fill grestore
 1209 2143 a 1233 2142 a F4(try)42
b(v)1451 2154 y F1(1)1535 2142 y F4(otherwise)e(t)2014
2154 y F1(2)2078 2142 y F5(\000)-14 b FV(!)23 b F4(v)2278
2154 y F1(1)2829 2143 y Gd(\()r(E)t(-)t(T)t F6(R)r(Y)t
Gd(B)t F6(E)t(T)o(A)t Gd(O)t(K)r(\))1142 2330 y
 gsave currentpoint translate 0 419430 7800 div 10008929 7800 div 747110
-7800 div box .9 setgray fill grestore
 1142
2330 a 1166 2329 a F4(try)42 b(error)g(otherwise)e(t)2081
2341 y F1(2)2145 2329 y F5(\000)-14 b FV(!)23 b F4(t)2345
2341 y F1(2)2811 2330 y Gd(\()r(E)t(-)t(T)t F6(R)r(Y)t
Gd(B)t F6(E)t(T)o(A)t Gd(E)t F6(R)t(R)r Gd(\))830 2573
y
 gsave currentpoint translate 0 851966 7800 div 14934483 7800 div 1179646
-7800 div box .9 setgray fill grestore
 830 2573 a 1602 2516 a F4(t)1645 2528 y F1(1)1709 2516
y F5(\000)-14 b FV(!)23 b F4(t)1917 2487 y FX(0)1909
2540 y F1(1)p 864 2553 1824 4 v 864 2626 a F4(try)42
b(t)1082 2638 y F1(1)1166 2626 y F4(otherwise)e(t)1645
2638 y F1(2)1709 2626 y F5(\000)-14 b FV(!)23 b F4(try)42
b(t)2091 2596 y FX(0)2084 2650 y F1(1)2168 2626 y F4(otherwise)e(t)2647
2638 y F1(2)3159 2573 y Gd(\()r(E)t(-)t(T)t F6(R)r(Y)q
Gd(\))1033 2815 y
 gsave currentpoint translate 0 419430 7800 div 11729234 7800 div 747110
-7800 div box .9 setgray fill grestore
 1033 2815 a 1057 2814 a F4(if)j(error)e(then)h(t)1711
2826 y F1(2)1795 2814 y F4(else)g(t)2056 2826 y F1(3)2120
2814 y F5(\000)-14 b FV(!)23 b F4(error)3083 2815 y Gd(\()r(E)t(-)t(I)t
F6(F)t Gd(E)t F6(R)t(R)r Gd(\))1380 3002 y
 gsave currentpoint translate 0 419430 7800 div 6248551 7800 div 747110
-7800 div box .9 setgray fill grestore
 1380 3002
a 1404 3001 a F4(error)42 b(t)1709 3013 y F1(2)1773 3001
y F5(\000)-14 b FV(!)23 b F4(error)2953 3002 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(E)t F6(R)t(R)t Gd(1)r(\))1380 3189 y
 gsave currentpoint translate 0 419430 7800 div 6248551 7800 div 747110
-7800 div box .9 setgray fill grestore
 1380
3189 a 1404 3188 a F4(v)1448 3200 y F1(1)1532 3188 y
F4(error)e F5(\000)-14 b FV(!)23 b F4(error)2953 3189
y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(E)t F6(R)t(R)t Gd(2)r(\))450
3367 y F7(New)e(typing)e(rules)p 3067 3285 383 4 v 3067
3392 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p
3447 3392 V 3067 3395 383 4 v 1497 3516 a
 gsave currentpoint translate 0 433994 7800 div 4398459 7800 div 761675
-7800 div box .9 setgray fill grestore
 1497 3516 a
1521 3517 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1521 3517 a 16 w Gb(\000)g F5(`)16 b F4(error)21
b FF(:)i F4(T)3056 3516 y Gd(\()r(T)o(-)t(E)t F6(R)t(R)t(O)t(R)s
Gd(\))1185 3764 y
 gsave currentpoint translate 0 881095 7800 div 9324013 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1185 3764 a 1318 3708 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1318 3708 a
15 w Gb(\000)g F5(`)16 b F4(t)1511 3720 y F1(1)1575 3708
y FF(:)23 b F4(T)1859 3708 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 3708 a 16 w Gb(\000)g
F5(`)15 b F4(t)2053 3720 y F1(2)2116 3708 y FF(:)24 b
F4(T)p 1219 3745 1114 4 v 1219 3821 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1219 3821 a 16
w Gb(\000)f F5(`)16 b F4(try)42 b(t)1587 3833 y F1(1)1672
3821 y F4(otherwise)d(t)2151 3833 y F1(2)2215 3821 y
FF(:)23 b F4(T)3163 3764 y Gd(\()r(T)o(-)t(T)t F6(R)r(Y)r
Gd(\))p 409 3913 9 36 v 418 3913 3000 6 v 3418 3913 38
6 v 3455 3913 9 36 v 450 4096 a Ge(10.2.1)18 b(Theorem)i
([Preservation]:)39 b Gd(Unchanged.)1315 b FZ(2)450 4278
y Ge(10.2.2)18 b(Theorem)i([Progress]:)41 b Gd(Suppose)17
b F4(t)g Gd(a)f(closed)i(normal)f(form.)25 b(If)16 b
F5(`)23 b F4(t)g FF(:)g F4(T)p Gd(,)17 b(then)h(either)450
4378 y F4(t)i Gd(is)h(a)g(value)f(or)h F4(t)h FY(=)h
F4(error)n Gd(.)2024 b FZ(2)450 4561 y Ge(10.2.3)18 b(Exercise)h
([Homework]:)41 b F7(\(Due)20 b(on)h(Feb.)26 b(22.\))1727
b FP(\()554 4727 y Gd(1.)41 b(Show)17 b(that)g(the)g(r)o(ules)g
(de\002ning)h(the)f(typing)h(r)o(elation)e(her)o(e)g(do)h(not)h(lead)e
(immediately)658 4826 y(to)21 b(an)f(algorithm)i(for)e(typechecking.)p
eop
%%Page: 97 98
97 97 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)907 b
Gd(1)t(0)t(.)29 b(E)t F6(X)t(C)t(E)t(P)t(T)t(I)t(O)t(N)t(S)911
b Gd(97)554 683 y(2.)41 b(Show)19 b(that)g(the)g(typing)g(r)o(elation)g
(is)g(still)g(decidable)f(by)g(writing)i(down)g(an)e(algorithm)658
783 y(that,)h(given)g Gb(\000)h Gd(and)e F4(t)p Gd(,)h(either)g
(\002nds)h(some)g F4(T)f Gd(such)h(that)f Gb(\000)k F5(`)g
F4(t)f FF(:)i F4(T)19 b Gd(or)g(else)g(determines)658
882 y(that)h(ther)o(e)g(is)h(no)h(such)f F4(T)p Gd(.)1914
b FZ(2)450 1168 y Gj(10.3)119 b(Exceptions)30 b(Carrying)f(V)-13
b(alues)450 1357 y Gd(First,)21 b(we)g(\002x)f(a)h(type)f
F4(T)1190 1369 y F1(exn)1316 1357 y Gd(.)450 1623 y Ge(Exceptions)2090
b FV(!)3071 1623 y
 gsave currentpoint translate 0 305389 7800 div 2991675 7800 div 588838
-7800 div box .9 setgray fill grestore
 3071 1623 a 16 w F7(exceptions)p 409
1705 9 36 v 418 1675 3000 6 v 3418 1675 38 6 v 3455 1705
9 36 v 450 1794 a(New)21 b(syntactic)e(forms)592 1925
y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 2025 y
 gsave currentpoint translate 0 124518 7800 div 2657463 7800 div 525016
-7800 div box .9 setgray fill grestore
 852
2025 a 15 w F4(raise)42 b(t)1497 b F7(raise)22 b(exception)852
2124 y
 gsave currentpoint translate 0 270154 7800 div 6737609 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2124 a 15 w F4(try)43 b(t)1085 2136 y F1(1)1169
2124 y F4(otherwise)d(t)1649 2136 y F1(2)2670 2124 y
F7(trap)20 b(exceptions)450 2339 y(New)h(evaluation)f(rules)p
3096 2252 355 4 v 3096 2364 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 2309 y FX(0)p 3447 2364 V 3096
2367 355 4 v 1209 2486 a
 gsave currentpoint translate 0 419430 7800 div 8952453 7800 div 747110
-7800 div box .9 setgray fill grestore
 1209 2486 a 1233 2485 a F4(try)42
b(v)1451 2497 y F1(1)1535 2485 y F4(otherwise)e(t)2014
2497 y F1(2)2078 2485 y F5(\000)-14 b FV(!)23 b F4(v)2278
2497 y F1(1)2829 2486 y Gd(\()r(E)t(-)t(T)t F6(R)r(Y)t
Gd(B)t F6(E)t(T)o(A)t Gd(O)t(K)r(\))978 2673 y
 gsave currentpoint translate 0 419430 7800 div 12598709 7800 div 747110
-7800 div box .9 setgray fill grestore
 978 2673
a 1002 2672 a F4(try)42 b(raise)g(v)1481 2684 y F1(11)1602
2672 y F4(otherwise)e(t)2081 2684 y F1(2)2145 2672 y
F5(\000)-14 b FV(!)23 b F4(t)2345 2684 y F1(2)2429 2672
y F4(v)2473 2684 y F1(11)2801 2673 y Gd(\()r(E)t(-)t(T)t
F6(R)r(Y)t Gd(B)t F6(E)t(T)o(A)t Gd(E)t F6(X)t(N)q Gd(\))830
2915 y
 gsave currentpoint translate 0 851966 7800 div 14934483 7800 div 1179646
-7800 div box .9 setgray fill grestore
 830 2915 a 1602 2859 a F4(t)1645 2871 y F1(1)1709
2859 y F5(\000)-14 b FV(!)23 b F4(t)1917 2829 y FX(0)1909
2883 y F1(1)p 864 2896 1824 4 v 864 2969 a F4(try)42
b(t)1082 2981 y F1(1)1166 2969 y F4(otherwise)e(t)1645
2981 y F1(2)1709 2969 y F5(\000)-14 b FV(!)23 b F4(try)42
b(t)2091 2939 y FX(0)2084 2993 y F1(1)2168 2969 y F4(otherwise)e(t)2647
2981 y F1(2)3159 2915 y Gd(\()r(E)t(-)t(T)t F6(R)r(Y)q
Gd(\))869 3157 y
 gsave currentpoint translate 0 419430 7800 div 14319014 7800 div 747110
-7800 div box .9 setgray fill grestore
 869 3157 a 893 3156 a F4(if)j(raise)e(v)1329
3168 y F1(11)1449 3156 y F4(then)h(t)1711 3168 y F1(2)1795
3156 y F4(else)g(t)2056 3168 y F1(3)2120 3156 y F5(\000)-14
b FV(!)23 b F4(raise)41 b(v)2582 3168 y F1(11)3072 3157
y Gd(\()r(E)t(-)t(I)t F6(F)t Gd(E)t F6(X)t(N)r Gd(\))1173
3345 y
 gsave currentpoint translate 0 419430 7800 div 9526453 7800 div 747110
-7800 div box .9 setgray fill grestore
 1173 3345 a 1197 3344 a F4(\(raise)g(v)1545 3356
y F1(11)1622 3344 y F4(\))i(t)1753 3356 y F1(2)1816 3344
y F5(\000)-14 b FV(!)23 b F4(raise)42 b(v)2278 3356 y
F1(11)2943 3345 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(E)t
F6(X)t(N)t Gd(1)q(\))1303 3532 y
 gsave currentpoint translate 0 419430 7800 div 7462087 7800 div 747110
-7800 div box .9 setgray fill grestore
 1303 3532 a 1327 3531
a F4(v)1371 3543 y F1(1)1455 3531 y F4(\(raise)f(v)1804
3543 y F1(21)1881 3531 y F4(\))22 b F5(\000)-14 b FV(!)23
b F4(v)2148 3543 y F1(21)2943 3532 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(E)t F6(X)t(N)t Gd(2)q(\))450 3710 y F7(New)e(typing)e
(rules)p 3067 3628 383 4 v 3067 3735 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 3735 V 3067 3738 383
4 v 1424 3915 a
 gsave currentpoint translate 0 881095 7800 div 5563635 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1424 3915 a 1525 3860 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1525 3860 a 16
w Gb(\000)g F5(`)16 b F4(t)1719 3872 y F1(1)1783 3860
y FF(:)23 b F4(T)1901 3872 y F1(exn)p 1458 3896 637 4
v 1458 3973 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1458 3973 a 15 w Gb(\000)g F5(`)16 b F4(raise)41
b(t)1913 3985 y F1(1)1976 3973 y FF(:)24 b F4(T)3150
3915 y Gd(\()r(T)o(-)t(E)t F6(X)t(N)r Gd(\))1157 4220
y
 gsave currentpoint translate 0 881095 7800 div 9764174 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1157 4220 a 1191 4164 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1191 4164 a 16 w Gb(\000)f
F5(`)16 b F4(t)1385 4176 y F1(1)1449 4164 y FF(:)23 b
F4(T)1733 4164 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1733 4164 a 16 w Gb(\000)f F5(`)16 b
F4(t)1926 4176 y F1(2)1990 4164 y FF(:)23 b F4(T)2108
4176 y F1(exn)2234 4164 y FV(!)p F4(T)p 1191 4201 1169
4 v 1219 4277 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1219 4277 a 16 w Gb(\000)g F5(`)16 b
F4(try)42 b(t)1587 4289 y F1(1)1672 4277 y F4(otherwise)d(t)2151
4289 y F1(2)2215 4277 y FF(:)23 b F4(T)3163 4220 y Gd(\()r(T)o(-)t(T)t
F6(R)r(Y)r Gd(\))p 409 4369 9 36 v 418 4369 3000 6 v
3418 4369 38 6 v 3455 4369 9 36 v 575 4535 a(Choices)e(for)f
F4(T)1054 4547 y F1(exn)1180 4535 y Gd(:)575 4701 y F5(\017)41
b F4(T)701 4713 y F1(exn)850 4701 y FY(=)23 b F4(Nat)o
Gd(.)i(Unix)c F4(errno)d Gd(convention.)p eop
%%Page: 98 99
98 98 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)907 b
Gd(1)t(0)t(.)29 b(E)t F6(X)t(C)t(E)t(P)t(T)t(I)t(O)t(N)t(S)911
b Gd(98)575 683 y F5(\017)41 b F4(T)701 695 y F1(exn)879
683 y FY(=)52 b F4(String)m Gd(.)73 b(Similar)-6 b(,)40
b(but)c(err)o(ors)g(can)g(be)g(mapped)g(to)h(mor)o(e)f(descriptive)658
783 y(strings.)50 b(\(Requir)o(es)29 b(err)o(or)f(handlers)g(to)i
F7(parse)f Gd(messages)g(to)g(distinguish)h(between)658
882 y(err)o(ors.\))575 1048 y F5(\017)41 b F4(T)701 1060
y F1(exn)848 1048 y Gd(is)21 b(some)g(variant)f(type.)26
b(Better)-6 b(,)19 b(but)i(in\003exible.)575 1214 y F5(\017)41
b F4(T)701 1226 y F1(exn)848 1214 y Gd(is)21 b(an)g F7(extensible)h
(type)p Gd(.)k(In)21 b(ML,)f(this)i(type)f(is)g(called)f
F4(exn)o Gd(.)27 b(W)-6 b(riting)21 b(an)g(exception)658
1314 y(declaration)i(ef)o(fectively)g(adds)h(a)g(new)g(clause)g(to)h(a)
f(global)h(datatype)e(de\002nition)i(for)658 1414 y F4(exn)n
Gd(.)33 b(A)22 b(handler)h(ef)o(fectively)e(pattern)i(matches)g
(against)g(elements)g(of)g(this)h(type.)32 b(So)658 1513
y(we)20 b(can)h(write,)f(appr)o(oximately:)699 1726 y
F4(raise)42 b(E\(t\))1650 1679 y FK(def)1660 1726 y FY(=)92
b F4(raise)42 b(<E=t>)699 1854 y(try)g(t)i(with)e(E\(x\))f
FV(!)j F4(h)1650 1806 y FK(def)1660 1854 y FY(=)92 b
F4(try)43 b(t)g(otherwise)1859 1953 y Gb(\025)p F4(e.)g(case)f(e)h(of)g
(<E=x>)p FV(!)n F4(h)g(|)g(_)g FV(!)h F4(raise)d(e)450
2214 y Gj(10.4)119 b(Further)29 b(Reading)450 2403 y
Gd(The)21 b(exposition)h(in)f(this)g(chapter)f(is)h(adapted)e(fr)o(om)i
(a)f(lectur)o(e)g(by)g(Robert)i(Harper)-6 b(.)p eop
%%Page: 99 100
99 99 bop 450 1306 a F3(Chapter)44 b(1)-6 b(1)450 1721
y Gk(References)450 2153 y Gd(Outline:)575 2319 y F5(\017)41
b Gd(T)-7 b(r)o(eating)14 b(mutable)i(r)o(efer)o(ence)d(cells)j(r)o
(equir)o(es)f(an)g(extension)i(of)e(the)h(framework)g(we've)658
2418 y(developed)25 b(so)i(far:)36 b(we)27 b(need)f(to)h(be)f(able)g
(to)g(talk)h(explicitly)g(about)f(the)h F7(heap)p Gd(.)41
b(This)658 2518 y(extension)22 b(is)g(fairly)e(straightforwar)o(d;)h
(the)g(most)i(inter)o(esting)e(part)g(is)h(how)g(we)f(need)658
2617 y(to)g(change)f(the)h(statement)g(of)g(the)g(type)f(pr)o
(eservation)g(theor)o(em.)575 2783 y F5(\017)41 b Gd(Intr)o(o)757
2950 y Ge(\226)g Gd(Refer)o(ences)20 b(ar)o(e)f(mutable)i(cells)g
(holding)h(values)757 3082 y Ge(\226)41 b Gd(Intr)o(oduces)21
b(the)f(notion)j(of)d(a)h Ge(heap)e Gd(or)i Ge(store)757
3215 y(\226)41 b Gd(Basic)20 b(operations:)26 b(allocation,)21
b(der)o(efer)o(encing,)e(assignment)757 3348 y Ge(\226)41
b Gd(Critical)31 b(issue:)47 b Ge(aliasing)p Gd(.)54
b(Show)32 b(several)e(examples.)57 b(Aliasing)31 b(analysis)h(is)840
3448 y(very)25 b(har)o(d!)37 b(\(Cite)24 b(Reynolds')i(type)f(systems)h
(for)e(aliasing,)i(and)e(their)h(succes-)840 3547 y(sors.\))757
3680 y Ge(\226)41 b Gd(Note)23 b(that)f(in)h(many)g(pr)o(ogramming)g
(languages)f(every)g(variable)f(is)i(implicitly)840 3780
y(a)i(r)o(efer)o(ence)e(cell:)34 b(wher)o(ever)24 b(you)h(see)g
F4(T)p Gd(,)h(you)g(should)g(actually)e(r)o(ead)g F4(Ref\(T\))m
Gd(.)840 3879 y(\(Strictly)i(speaking,)h(we)e(should)i(even)f(r)o(ead)e
F4(Ref\(Option\(T\)\))-6 b Gd(,)27 b(to)f(take)g F4(null)840
3979 y Gd(into)f(account.\))33 b(Whether)24 b(r)o(efer)o(ences)d
(should)k(be)e(implicit)h(or)g(explicit)f(is)h(very)840
4079 y(much)k(a)g(matter)f(of)g(taste.)46 b(Implicit)29
b(is)f(a)f(bit)h(mor)o(e)f(concise,)j(but)d(encourages)840
4178 y(use)22 b(of)g(mutation)g(wher)o(e)f(it)h(is)g(not)h(r)o(eally)d
(needed,)h(making)h(pr)o(ograms)g(har)o(der)840 4278
y(to)f(r)o(eason)g(about.)575 4444 y F5(\017)41 b Gd(Syntax)757
4610 y Ge(\226)g Gd(Add)20 b(standar)o(d)g(\(ML-style\))f(operations)j
(for)f(cr)o(eating)f(r)o(efer)o(ence)f(cells,)i(assign-)840
4710 y(ing,)g(and)g(der)o(efer)o(encing.)757 4842 y Ge(\226)41
b Gd(\(W)-8 b(e)20 b(can)f(also)h(add)f(pointer)h(equality)g(if)g(we)g
(like.)25 b(W)-8 b(on't)21 b(bother)f(to)h(do)e(it)h(her)o(e.\))1908
5169 y(99)p eop
%%Page: 100 101
100 100 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(100)575 683 y F5(\017)41 b Gd(T)-7 b(yping)20 b(r)o(ules)h(for)g
(these)g(constr)o(ucts)h(ar)o(e)d(obvious.)26 b(\(Show)21
b(them.\))575 849 y F5(\017)41 b Gd(Operational)20 b(semantics:)757
1015 y Ge(\226)41 b Gd(What)21 b(ar)o(e)e(the)i(values)f(of)h(type)g
F4(Ref\(T\))m Gd(?)912 1148 y F5(\003)41 b Gd(Naive)21
b(answer:)k(terms)c(of)f(the)h(form)g F4(ref)43 b(v)912
1264 y F5(\003)e Gd(But)20 b(this)g(doesn't)g(give)g(us)g(what)g(we)f
(expect:)24 b(executing)c(a)f F4(ref)g Gd(should)h(ac-)995
1364 y(tually)d F7(allocate)f Gd(storage.)24 b(For)17
b(example,)f F4(\(ref)42 b(0,)h(ref)f(0\))16 b Gd(does)h(not)g(mean)995
1463 y(the)24 b(same)f(as)g F4(\()p Gb(\025)p F4(x:Ref\(Int\).)39
b(\(x,x\)\))i(\(ref)h(0\))o Gd(:)31 b(the)23 b(former)g(allocates)995
1563 y(two)k(r)o(efer)o(ence)d(cells,)k(while)f(the)f(latter)g
(allocates)g(just)h(one)g(and)f(builds)g(a)995 1663 y(pair)21
b(containing)h(two)f(pointers)g(to)g(it.)912 1779 y F5(\003)41
b Gd(If)20 b(evaluating)g F4(ref)43 b(0)20 b Gd(allocates)f(some)i
(storage,)f(then)h(its)g(r)o(esult)f(must)h(be)e(a)995
1879 y Ge(pointer)h Gd(to)h(that)g(storage.)757 2011
y Ge(\226)41 b Gd(Evidently)19 b(we)g(need)f(to)h(add)f(pointers)h(or)g
Ge(locations)e Gd(\(maybe)h(they)h(should)g(just)840
2111 y(be)i(called)f(pointers??\))25 b(to)c(the)g(set)g(of)g(values.)
757 2244 y Ge(\226)41 b Gd(Carry)30 b(along)h(a)f F7(stor)o(e)h
Gd(modeling)g(the)g(heap.)54 b(A)31 b(pr)o(ogram)e(now)j(is)f(not)g
(just)g(a)840 2343 y(term,)19 b(it)g(is)h(a)e(term)h(plus)h(a)e(stor)o
(e.)25 b(The)19 b(evaluation)g(r)o(elation)f(maps)h(pr)o(ograms)g(to)
840 2443 y(pr)o(ograms.)757 2576 y Ge(\226)41 b Gd(Existing)22
b(evaluation)e(r)o(ules)h(ar)o(e)f(straightforwar)o(dly)f(augmented)i
(with)g(stor)o(es.)757 2709 y Ge(\226)41 b Gd(Add)20
b(new)h(evaluation)g(r)o(ules)g(for)f(new)h(constr)o(ucts.)575
2875 y F5(\017)41 b Gd(T)-7 b(yping)20 b(again)757 3041
y Ge(\226)41 b Gd(Since)30 b(we)g(added)e(them)i(to)h(values,)g(we)f
(also)g(need)g(to)g(add)f(locations)i(to)f(the)840 3140
y(term)24 b(syntax.)37 b(Of)24 b(course,)h(we)f(don't)h(expect)f(the)g
(pr)o(ogrammer)g(to)g(write)h(pr)o(o-)840 3240 y(grams)e(with)g
(locations)h(in)f(them\227this)h(is)f(just)g(a)g(notational)g(trick)g
(that)f(allows)840 3340 y(us)f(to)g(keep)g(using)g(our)g(standar)o(d)e
(operational)i(semantics.)757 3473 y Ge(\226)41 b Gd(What)30
b(is)f(the)h(type)f(of)h(a)f(pr)o(ogram)f(containing)j(locations?)52
b(Depends)30 b(on)g(the)840 3572 y(types)21 b(of)g(what's)g(stor)o(ed)f
(in)h(the)g(locations!)757 3705 y Ge(\226)41 b Gd(So)21
b(a)f(\002rst)h(try)g(for)f(the)h(typing)h(r)o(ule)f(for)f(locations)i
(could)f(be:)1363 3831 y Gb(\000)i F5(`)g Gb(\026)p FY(\()p
Gb(l)p FY(\))h FF(:)f Gb(T)p 1363 3875 436 4 v 1424 3954
a(\000)g F5(`)g Gb(l)g FF(:)h F4(T)840 4094 y Gd(This)31
b(r)o(ule)f(depends)f(on)h(the)g(curr)o(ent)f(stor)o(e,)j(so)e(we'd)g
(need)g(to)g(augment)g(the)840 4194 y(context)21 b(\(in)g(every)f
(typing)i(r)o(ule\))e(with)i(a)e(stor)o(e:)1306 4320
y Gb(\000)i F0(j)h Gb(\026)h F5(`)e Gb(\026)p FY(\()p
Gb(l)p FY(\))j FF(:)e Gb(T)p 1306 4364 551 4 v 1367 4443
a(\000)g F0(j)f Gb(\026)i F5(`)f Gb(l)g FF(:)g F4(T)840
4583 y Gd(Show)h(an)f(example)f(or)h(two)h(of)f(typing)h(derivations)f
(involving)i(typechecking)840 4683 y(the)c(stor)o(e.)p
eop
%%Page: 101 102
101 101 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(101)757 683 y Ge(\226)41 b Gd(But)22 b(this)g(is)h(not)f(very)g
(ef)o(\002cient,)f(since)h(we)g(might)h(have)e(to)h(keep)g
(typechecking)840 783 y(the)33 b(whole)g(stor)o(e)e(over)h(and)g(over)g
(every)g(time)g(a)g(location)h(is)g(mentioned)g(in)840
882 y(the)21 b(pr)o(ogram.)26 b(Mor)o(eover)-6 b(,)19
b(it)j(doesn't)f(work,)g(because)f(the)i(stor)o(e)e(itself)h(may)g(be)
840 982 y(cir)o(cular)-6 b(.)23 b(\(Show)18 b(an)f(example)g(of)h(a)f
(cir)o(cular)f(stor)o(e.)24 b(Exer)o(cise:)f(write)18
b(a)f(pr)o(ogram)840 1082 y(that)31 b(pr)o(oduces)f(such)h(a)g(stor)o
(e.\))55 b(In)31 b(fact,)h(ther)o(e)e(may)h(not)h(even)e(be)h(a)f
(unique)840 1181 y(typing)22 b(for)e(such)h(a)g(stor)o(e.)757
1314 y Ge(\226)41 b Gd(But)21 b(notice)h(that,)f(whenever)g(we)g
(allocate)f(a)h(location)h(in)f(the)h(stor)o(e,)e(we)h(always)840
1414 y(have)c(a)f(type)h(in)g(mind)h(for)f(the)g(value)f(that's)h
(going)h(to)g(be)f(stor)o(ed)f(ther)o(e.)23 b(Adding)840
1513 y(all)28 b(these)h(together)-6 b(,)30 b(we)e(can)g(speak)f(of)i(a)
e Ge(store)h(typing)f Gd(that)i(associates)f(each)840
1613 y(location)22 b(with)f(its)g(intended)g(type.)757
1746 y Ge(\226)41 b Gd(It)29 b(is)g(easy)f(to)i(check)e(whether)h(a)g
(stor)o(e)f(\(even)g(a)g(cir)o(cular)g(one!\))50 b(is)29
b(consistent)840 1845 y(with)22 b(a)e(given)h(stor)o(e)f(typing.)757
1978 y Ge(\226)41 b Gd(Existing)27 b(typing)g(r)o(ules)f(ar)o(e)f
(straightforwar)o(dly)h(augmented)f(with)i(stor)o(e)f(typ-)840
2078 y(ings.)757 2211 y Ge(\226)41 b Gd(Only)22 b(inter)o(esting)f(r)o
(ule)g(is)i(T)o(-)t(L)t F6(O)t(C)s Gd(,)d(which)i(is)f(analogous)g(to)i
(T)o(-)t(V)l F6(A)t(R)s Gd(.)575 2377 y F5(\017)41 b
Gd(Soundness)757 2543 y Ge(\226)g Gd(Pr)o(eservation)21
b(theor)o(em)h(now)g(needs)g(to)g(say)f(something)i(about)f(how)h(the)e
(stor)o(e)840 2642 y(and)g(stor)o(e)f(typing)h(ar)o(e)f(af)o(fected)e
(by)j(a)f(step)h(of)g(evaluation.)757 2775 y Ge(\226)41
b Gd(First)24 b(try)g(just)h(adds)e(a)h(stor)o(e)f(and)h(a)f(stor)o(e)h
(typing)g(to)h(the)f(pr)o(emises)f(of)h(the)g(the-)840
2875 y(or)o(em.)57 b(But)31 b(this)h(doesn't)f(give)g(us)h(enough)g
(information)g(to)g(know)g(that)f(the)840 2974 y(pr)o(eservation)25
b(theor)o(em)g(applies)h(again)f(on)h(the)g(next)g(step)f(of)h
(evaluation:)35 b(we)840 3074 y(need)29 b(to)h(extend)f(the)h
(conclusions)h(as)e(well,)j(to)e(show)h(that)e(the)h(new)f(stor)o(e)h
(is)840 3174 y(well)21 b(typed)g(against)f(the)h(stor)o(e)g(typing.)757
3307 y Ge(\226)41 b Gd(This)31 b(version)g(works)g(for)f(the)g(der)o
(ef)e(and)i(assignment)h(r)o(ules,)i(but)d(it)h(doesn't)840
3406 y(handle)i(the)h(allocation)f(r)o(ule,)j(which)f(changes)e(not)h
(only)g(the)f(values)g(in)h(the)840 3506 y(stor)o(e)e(but)g(the)g(size)
g(of)g(the)g(stor)o(e's)g(domain.)59 b(T)-8 b(o)33 b(match)f(this)h
(new)f(domain,)840 3605 y(we)21 b(need)f(a)h(bigger)f(stor)o(e)h
(typing.)757 3738 y Ge(\226)41 b Gd(Final)29 b(version)g(of)f(the)h
(theor)o(em)f(says)h(that)f(ther)o(e)g(is)g(some)h(new)g(stor)o(e)f
(typing)840 3838 y(that)d(agr)o(ees)f(with)i(the)f(old)h(one)f
(everywher)o(e)f(\(this)i(condition)g(is)g(not)g(actually)840
3937 y(needed,)c(is)g(it?\))31 b(and)21 b(such)i(that)f(the)h(new)g
(stor)o(e)f(is)g(typed)g(under)g(the)h(new)f(typ-)840
4037 y(ing.)k(This)c(is)f(str)o(ong)g(enough)h(to)f(\223turn)f(the)h
(crank\224)f(r)o(epeatedly)-9 b(.)p eop
%%Page: 102 103
102 102 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(102)450 683 y Ge(References)2144 b FV(!)35 b F4(Unit)3338
683 y
 gsave currentpoint translate 0 124518 7800 div 886236 7800 div 436038
-7800 div box .9 setgray fill grestore
 3338 683 a 16 w FY(:=)p 409 765 9 36 v 418 735
3000 6 v 3418 735 38 6 v 3455 765 9 36 v 450 854 a F7(Syntax)592
985 y F4(t)61 b Gd(::=)1821 b F7(terms)852 1085 y F4(x)1774
b F7(variable)852 1185 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)852 1284 y F4(t)43 b(t)1687 b F7(application)852
1384 y F4(unit)1642 b F7(constant)20 b F4(unit)852 1483
y
 gsave currentpoint translate 0 124518 7800 div 488517 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 1483 a 15 w Gb(l)1773 b F7(stor)o(e)21 b(location)852
1583 y
 gsave currentpoint translate 0 124518 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 1583 a 15 w F4(ref)43 b(t)1584 b F7(r)o(efer)o(ence)22
b(cr)o(eation)852 1683 y
 gsave currentpoint translate 0 124518 7800 div 937158 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 1683 a 15 w F4(!t)1715 b
F7(der)o(efer)o(ence)852 1782 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 487309
-7800 div box .9 setgray fill grestore
 852 1782 a 15 w F4(t:=t)1627
b F7(assignment)592 1982 y F4(v)61 b Gd(::=)1821 b F7(values)852
2081 y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)21
b(value)852 2181 y
 gsave currentpoint translate 0 124518 7800 div 488517 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 2181 a 15 w Gb(l)1773 b F7(stor)o(e)21
b(location)592 2380 y F4(T)61 b Gd(::=)1821 b F7(types)852
2480 y F4(T)p FV(!)o F4(T)1648 b F7(type)20 b(of)g(functions)852
2579 y F4(Unit)1642 b F7(unit)21 b(type)852 2679 y
 gsave currentpoint translate 0 222821 7800 div 2289109 7800 div 525016
-7800 div box .9 setgray fill grestore
 852
2679 a 15 w F4(Ref)43 b(T)1085 2691 y F1(1)2670 2679
y F7(type)20 b(of)g(r)o(efer)o(ence)i(cells)590 2878
y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 2978 y F5(;)1776
b F7(empty)19 b(context)852 3077 y Gb(\000)5 b(;)17 b
F4(x:T)1596 b F7(term)21 b(variable)g(binding)552 3277
y
 gsave currentpoint translate 0 248418 7800 div 653834 7800 div 425418
-7800 div box .9 setgray fill grestore
 552 3277 a 16 w Gb(\026)78 b Gd(::=)1821 b F7(stor)o(es)852
3395 y
 gsave currentpoint translate 0 160926 7800 div 576717 7800 div 616038
-7800 div box .9 setgray fill grestore
 852 3395 a 15 w F5(;)1761 b F7(empty)19 b(stor)o(e)852
3494 y
 gsave currentpoint translate 0 248418 7800 div 2461052 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 3494 a 15 w Gb(\026;)24 b(l)f FY(=)g F4(v)1522
b F7(location)20 b(binding)550 3693 y
 gsave currentpoint translate 0 124518 7800 div 672774 7800 div 577638
-7800 div box .9 setgray fill grestore
 550 3693 a 16 w
Gb(\006)77 b Gd(::=)1821 b F7(stor)o(e)21 b(typings)852
3803 y
 gsave currentpoint translate 0 160926 7800 div 576717 7800 div 616038
-7800 div box .9 setgray fill grestore
 852 3803 a 15 w F5(;)1761 b F7(empty)19 b(stor)o(e)i(typing)852
3902 y
 gsave currentpoint translate 0 124518 7800 div 1964373 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 3902 a 15 w Gb(\006;)i(l)p F4(:T)1585 b F7(location)20
b(typing)450 4132 y(Evaluation)p 2818 4029 633 4 v 2818
4194 4 165 v 2026 w F4(t)2889 4132 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 2889 4132 a 16 w
F0(j)j Gb(\026)39 b F5(\000)-14 b FV(!)23 b F4(t)3244
4102 y FX(0)3267 4132 y
 gsave currentpoint translate 0 288243 7800 div 1219239 7800 div 617206
-7800 div box .9 setgray fill grestore
 3267 4132 a 16 w F0(j)g Gb(\026)3383
4102 y FX(0)p 3447 4194 4 165 v 2818 4197 633 4 v 1016
4299 a F4(\()p Gb(\025)p F4(x)1148 4299 y
 gsave currentpoint translate 0 222821 7800 div 1543926 7800 div 525016
-7800 div box .9 setgray fill grestore
 1148 4299 a
16 w F4(:T)1251 4311 y F1(11)1343 4299 y F4(.t)1431 4311
y F1(12)1507 4299 y F4(\))44 b(v)1638 4311 y F1(2)1679
4299 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 1679 4299 a 15 w F0(j)23 b Gb(\026)39 b F5(\000)-14
b FV(!)23 b F0(f)p F4(x)f F5(7)p FV(!)h F4(v)2225 4311
y F1(2)2266 4299 y F0(g)p F4(t)2336 4311 y F1(12)2413
4299 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 2413 4299 a 15 w F0(j)g Gb(\026)593 b Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)p Gd(\))1463 4453 y F4(t)1506 4465 y F1(1)1547
4453 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 1547 4453 a 16 w F0(j)22 b Gb(\026)40 b F5(\000)-15
b FV(!)23 b F4(t)1902 4423 y FX(0)1894 4476 y F1(1)1935
4453 y
 gsave currentpoint translate 0 288243 7800 div 1219239 7800 div 617206
-7800 div box .9 setgray fill grestore
 1935 4453 a 15 w F0(j)g Gb(\026)2050 4423 y FX(0)p
1335 4503 882 4 v 1335 4591 a F4(t)1379 4603 y F1(1)1463
4591 y F4(t)1506 4603 y F1(2)1547 4591 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 1547 4591 a
16 w F0(j)f Gb(\026)40 b F5(\000)-15 b FV(!)23 b F4(t)1902
4561 y FX(0)1894 4614 y F1(1)1978 4591 y F4(t)2022 4603
y F1(2)2062 4591 y
 gsave currentpoint translate 0 288243 7800 div 1219239 7800 div 617206
-7800 div box .9 setgray fill grestore
 2062 4591 a 16 w F0(j)g Gb(\026)2178
4561 y FX(0)3105 4522 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t
Gd(1)q(\))1463 4745 y F4(t)1506 4757 y F1(2)1547 4745
y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 1547 4745 a 16 w F0(j)f Gb(\026)40 b F5(\000)-15 b
FV(!)23 b F4(t)1902 4715 y FX(0)1894 4768 y F1(2)1935
4745 y
 gsave currentpoint translate 0 288243 7800 div 1219239 7800 div 617206
-7800 div box .9 setgray fill grestore
 1935 4745 a 15 w F0(j)g Gb(\026)2050 4715 y FX(0)p
1335 4795 882 4 v 1335 4883 a F4(v)1379 4895 y F1(1)1463
4883 y F4(t)1506 4895 y F1(2)1547 4883 y
 gsave currentpoint translate 0 288243 7800 div 975704 7800 div 615693
-7800 div box .9 setgray fill grestore
 1547 4883 a
16 w F0(j)f Gb(\026)40 b F5(\000)-15 b FV(!)23 b F4(v)1894
4895 y F1(1)1978 4883 y F4(t)2029 4853 y FX(0)2022 4906
y F1(2)2062 4883 y
 gsave currentpoint translate 0 288243 7800 div 1219239 7800 div 617206
-7800 div box .9 setgray fill grestore
 2062 4883 a 16 w F0(j)g Gb(\026)2178
4853 y FX(0)3105 4814 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t
Gd(2)q(\))p eop
%%Page: 103 104
103 103 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(103)1225 749 y
 gsave currentpoint translate 0 851966 7800 div 8690699 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1225 749 a 1581 693 a Gb(l)32 b(=)-51
b F5(2)23 b F7(dom)o FY(\()p Gb(\026)p FY(\))p 1259 730
1033 4 v 1259 803 a F4(ref)43 b(v)1477 815 y F1(1)1541
803 y F0(j)23 b Gb(\026)g F5(\000)-14 b FV(!)23 b Gb(l)g
F0(j)g FY(\()p Gb(\026;)h(l)f FY(=)g F4(v)2220 815 y
F1(1)2260 803 y FY(\))3163 749 y Gd(\()r(E)t(-)t(R)t
F6(E)t(F)q Gd(\))1263 1046 y
 gsave currentpoint translate 0 851966 7800 div 8098434 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1263 1046 a 1471 990 a F4(t)1515
1002 y F1(1)1578 990 y F0(j)g Gb(\026)h F5(\000)-15 b
FV(!)23 b F4(t)1902 961 y FX(0)1894 1014 y F1(1)1958
990 y F0(j)f Gb(\026)2057 961 y FX(0)p 1297 1027 958
4 v 1297 1100 a F4(ref)42 b(t)1515 1112 y F1(1)1578 1100
y F0(j)23 b Gb(\026)h F5(\000)-15 b FV(!)23 b F4(ref)43
b(t)2076 1070 y FX(0)2068 1124 y F1(1)2132 1100 y F0(j)23
b Gb(\026)2232 1070 y FX(0)3117 1046 y Gd(\()r(E)t(-)t(R)t
F6(E)t(F)t Gd(1)q(\))1478 1343 y
 gsave currentpoint translate 0 851966 7800 div 4702356 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1478 1343 a 1627 1287
a Gb(\026)p FY(\()p Gb(l)p FY(\))h(=)f F4(v)p 1512 1324
528 4 v 1512 1397 a(!)p Gb(l)g F0(j)g Gb(\026)g F5(\000)-14
b FV(!)23 b F4(v)g F0(j)f Gb(\026)3061 1343 y Gd(\()r(E)t(-)t(D)t
F6(E)t(R)t(E)t(F)q Gd(\))1394 1640 y
 gsave currentpoint translate 0 851966 7800 div 6034068 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1394 1640 a 1471
1584 a F4(t)1515 1596 y F1(1)1578 1584 y F0(j)h Gb(\026)h
F5(\000)-15 b FV(!)23 b F4(t)1902 1554 y FX(0)1894 1608
y F1(1)1958 1584 y F0(j)f Gb(\026)2057 1554 y FX(0)p
1428 1621 697 4 v 1428 1693 a F4(!t)1515 1705 y F1(1)1578
1693 y F0(j)h Gb(\026)h F5(\000)-15 b FV(!)23 b F4(!t)1945
1664 y FX(0)1938 1717 y F1(1)2001 1693 y F0(j)g Gb(\026)2101
1664 y FX(0)3015 1640 y Gd(\()r(E)t(-)t(D)t F6(E)t(R)t(E)t(F)t
Gd(1)q(\))1210 1882 y
 gsave currentpoint translate 0 419430 7800 div 8927384 7800 div 747110
-7800 div box .9 setgray fill grestore
 1210 1882 a 1235 1881 a Gb(l)p
F4(:=v)1396 1893 y F1(2)1459 1881 y F0(j)g Gb(\026)g
F5(\000)-14 b FV(!)23 b F4(unit)f F0(j)g(f)p Gb(l)h F5(7)p
FV(!)g F4(v)2199 1893 y F1(2)2239 1881 y F0(g)p Gb(\026)3021
1882 y Gd(\()r(E)t(-)t(A)t F6(S)t(S)t(I)t(G)t(N)q Gd(\))1266
2124 y
 gsave currentpoint translate 0 851966 7800 div 8049848 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1266 2124 a 1471 2068 a F4(t)1515 2080 y F1(1)1578
2068 y F0(j)g Gb(\026)h F5(\000)-15 b FV(!)23 b F4(t)1902
2038 y FX(0)1894 2092 y F1(1)1958 2068 y F0(j)f Gb(\026)2057
2038 y FX(0)p 1300 2105 952 4 v 1300 2178 a F4(t)1344
2190 y F1(1)1384 2178 y F4(:=t)1515 2190 y F1(2)1578
2178 y F0(j)h Gb(\026)h F5(\000)-15 b FV(!)23 b F4(t)1902
2148 y FX(0)1894 2201 y F1(1)1935 2178 y F4(:=t)2065
2190 y F1(2)2129 2178 y F0(j)g Gb(\026)2229 2148 y FX(0)2975
2124 y Gd(\()r(E)t(-)t(A)t F6(S)t(S)t(I)t(G)t(N)t Gd(1)q(\))1266
2421 y
 gsave currentpoint translate 0 851966 7800 div 8049848 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1266 2421 a 1471 2365 a F4(t)1515 2377 y F1(2)1578
2365 y F0(j)g Gb(\026)h F5(\000)-15 b FV(!)23 b F4(t)1902
2335 y FX(0)1894 2389 y F1(2)1958 2365 y F0(j)f Gb(\026)2057
2335 y FX(0)p 1300 2402 952 4 v 1300 2474 a F4(v)1344
2486 y F1(1)1384 2474 y F4(:=t)1515 2486 y F1(2)1578
2474 y F0(j)h Gb(\026)h F5(\000)-15 b FV(!)23 b F4(v)1894
2486 y F1(1)1935 2474 y F4(:=t)2073 2445 y FX(0)2065
2498 y F1(2)2129 2474 y F0(j)g Gb(\026)2229 2445 y FX(0)2975
2421 y Gd(\()r(E)t(-)t(A)t F6(S)t(S)t(I)t(G)t(N)t Gd(2)q(\))450
2674 y F7(T)-8 b(yping)p 2941 2571 509 4 v 2941 2736
4 165 v 2282 w Gb(\000)3020 2674 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 3020 2674 a 10 w F0(j)23
b Gb(\006)38 b F5(`)23 b F4(t)g FF(:)g F4(T)p 3447 2736
4 165 v 2941 2739 509 4 v 1637 2833 a(x:T)f F5(2)i Gb(\000)p
1550 2876 453 4 v 1550 2964 a(\000)1600 2964 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1600 2964
a 10 w F0(j)f Gb(\006)39 b F5(`)22 b F4(x)h FF(:)g F4(T)3152
2895 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))1401 3118
y Gb(\000)5 b(;)18 b F4(x:T)1622 3130 y F1(1)1663 3118
y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1663 3118 a 16 w F0(j)k Gb(\006)39 b F5(`)23 b F4(t)1929
3130 y F1(2)1993 3118 y FF(:)g F4(T)2111 3130 y F1(2)p
1296 3168 961 4 v 1296 3256 a Gb(\000)1346 3256 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1346
3256 a 10 w F0(j)g Gb(\006)39 b F5(`)22 b Gb(\025)p F4(x:T)1739
3268 y F1(1)1780 3256 y F4(.t)1867 3268 y F1(2)1930 3256
y FF(:)i F4(T)2048 3268 y F1(1)2089 3256 y FV(!)p F4(T)2216
3268 y F1(2)3160 3187 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q
Gd(\))1022 3410 y Gb(\000)1072 3410 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1072 3410 a 10
w F0(j)f Gb(\006)38 b F5(`)23 b F4(t)1333 3422 y F1(1)1396
3410 y FF(:)h F4(T)1514 3422 y F1(11)1591 3410 y FV(!)p
F4(T)1718 3422 y F1(12)1961 3410 y Gb(\000)2011 3410
y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 2011 3410 a 10 w F0(j)f Gb(\006)39 b F5(`)22 b F4(t)2272
3422 y F1(2)2335 3410 y FF(:)i F4(T)2453 3422 y F1(11)p
1022 3459 1509 4 v 1427 3547 a Gb(\000)1478 3547 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1478
3547 a 10 w F0(j)f Gb(\006)38 b F5(`)23 b F4(t)1739 3559
y F1(1)1823 3547 y F4(t)1866 3559 y F1(2)1930 3547 y
FF(:)g F4(T)2048 3559 y F1(12)3155 3478 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1419 3701 y Gb(\000)1470 3701 y
 gsave currentpoint translate 0 288243 7800 div 994644 7800 div 615693
-7800 div box .9 setgray fill grestore
 1470
3701 a 10 w F0(j)f Gb(\006)39 b F5(`)23 b F4(unit)e FF(:)i
F4(Unit)979 b Gd(\()r(T)o(-)t(U)t F6(N)t(I)t(T)r Gd(\))1439
3927 y
 gsave currentpoint translate 0 851966 7800 div 5311817 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1439 3927 a 1625 3871 a Gb(\006)p FY(\()p Gb(l)p
FY(\))24 b(=)f F4(T)p 1473 3908 605 4 v 1473 3980 a Gb(\000)g
F0(j)g Gb(\006)g F5(`)g Gb(l)g FF(:)g F4(Ref)43 b(T)3150
3927 y Gd(\()r(T)o(-)t(L)t F6(O)t(C)r Gd(\))1305 4223
y
 gsave currentpoint translate 0 851966 7800 div 7432177 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1305 4223 a 1514 4167 a Gb(\000)22 b F0(j)h Gb(\006)g
F5(`)g F4(t)1816 4179 y F1(1)1880 4167 y FF(:)g F4(T)1998
4179 y F1(1)p 1339 4204 874 4 v 1339 4277 a Gb(\000)g
F0(j)g Gb(\006)g F5(`)f F4(ref)43 b(t)1816 4289 y F1(1)1880
4277 y FF(:)23 b F4(Ref)43 b(T)2172 4289 y F1(1)3167
4223 y Gd(\()r(T)o(-)t(R)t F6(E)t(F)r Gd(\))1392 4520
y
 gsave currentpoint translate 0 851966 7800 div 6055933 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1392 4520 a 1426 4464 a Gb(\000)23 b F0(j)g Gb(\006)g
F5(`)g F4(t)1729 4476 y F1(1)1793 4464 y FF(:)g F4(Ref)42
b(T)2085 4476 y F1(1)p 1426 4501 700 4 v 1492 4574 a
Gb(\000)23 b F0(j)f Gb(\006)h F5(`)g F4(!t)1838 4586
y F1(1)1902 4574 y FF(:)g F4(T)2020 4586 y F1(1)3065
4520 y Gd(\()r(T)o(-)t(D)t F6(E)t(R)t(E)t(F)r Gd(\))1047
4817 y
 gsave currentpoint translate 0 851966 7800 div 11508948 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1047 4817 a 1081 4761 a Gb(\000)g F0(j)g Gb(\006)f
F5(`)h F4(t)1384 4773 y F1(1)1447 4761 y FF(:)h F4(Ref)42
b(T)1740 4773 y F1(1)1946 4761 y Gb(\000)23 b F0(j)g
Gb(\006)f F5(`)h F4(t)2249 4773 y F1(2)2312 4761 y FF(:)h
F4(T)2430 4773 y F1(1)p 1081 4798 1390 4 v 1383 4871
a Gb(\000)f F0(j)f Gb(\006)h F5(`)g F4(t)1686 4883 y
F1(1)1726 4871 y F4(:=t)1857 4883 y F1(2)1920 4871 y
FF(:)h F4(Unit)3025 4817 y Gd(\()r(T)o(-)t(A)t F6(S)t(S)t(I)t(G)t(N)r
Gd(\))p eop
%%Page: 104 105
104 104 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(104)p 409 755 9 36 v 418 755 3000 6 v 3418 755 38
6 v 3455 755 9 36 v 450 938 a Ge(1)m(1.1)19 b(De\002nition:)39
b Gd(W)-8 b(e)17 b(say)g(that)g(a)f(stor)o(e)h Gb(\026)g
Gd(is)g(well-typed)g(with)h(r)o(espect)d(to)j(a)e(typing)i(context)450
1038 y Gb(\000)g Gd(and)h(a)f(stor)o(e)g(typing)i Gb(\006)p
Gd(,)e(written)h Gb(\000)k F0(j)g Gb(\006)g F5(`)f Gb(\026)p
Gd(,)e(if)e F7(dom)o FY(\()p Gb(\026)p FY(\))24 b(=)f
F7(dom)o FY(\()p Gb(\006)p FY(\))c Gd(and)f Gb(\000)23
b F0(j)f Gb(\006)h F5(`)g Gb(\026)p FY(\()p Gb(l)p FY(\))h
FF(:)f Gb(\006)p FY(\()p Gb(l)p FY(\))450 1137 y Gd(for)e(every)f
Gb(l)j F5(2)g F7(dom)o FY(\()p Gb(\026)p FY(\))p Gd(.)2181
b FZ(2)450 1320 y Ge(1)m(1.2)19 b(Exercise:)39 b Gd(Can)23
b(you)h(\002nd)g(a)f(context)h Gb(\000)6 b Gd(,)18 b(a)23
b(stor)o(e)g Gb(\026)p Gd(,)h(and)f(two)h(dif)o(fer)o(ent)e(stor)o(e)h
(typings)450 1420 y Gb(\006)504 1432 y F1(1)565 1420
y Gd(and)d Gb(\006)780 1432 y F1(2)841 1420 y Gd(such)h(that)g(both)g
Gb(\000)i F0(j)g Gb(\006)g F5(`)g Gb(\026)1695 1432 y
F1(1)1756 1420 y Gd(and)e Gb(\000)h F0(j)h Gb(\006)g
F5(`)g Gb(\026)2228 1432 y F1(2)2268 1420 y Gd(?)j(Solution)c(on)f
(page)f(291.)275 b FZ(2)450 1602 y Ge(1)m(1.3)19 b(Lemma)g
([Substitution]:)38 b Gd(If)24 b Gb(\000)6 b(;)26 b F4(x)o(:S)31
b F0(j)g Gb(\006)g F5(`)g F4(t)g FF(:)h F4(T)25 b Gd(and)g
Gb(\000)31 b F0(j)g Gb(\006)g F5(`)h F4(s)f FF(:)g F4(S)p
Gd(,)26 b(then)g Gb(\000)31 b F0(j)g Gb(\006)g F5(`)450
1702 y F0(f)p F4(x)22 b F5(7)p FV(!)h F4(s)p F0(g)p F4(t)f
FF(:)h F4(T)p Gd(.)2469 b FZ(2)450 1884 y F7(Pr)o(oof:)66
b Gd(Just)21 b(like)g(the)g(pr)o(oof)f(of)h(Lemma)f(7.4.8.)1424
b FZ(2)450 2067 y Ge(1)m(1.4)19 b(Lemma:)40 b Gd(If)20
b Gb(\000)j F0(j)g Gb(\006)f F5(`)h F4(t)g FF(:)g F4(T)d
Gd(and)h Gb(\006)1721 2037 y FX(0)1766 2067 y F5(\023)i
Gb(\006)p Gd(,)d(then)h Gb(\000)i F0(j)g Gb(\006)2304
2037 y FX(0)2350 2067 y F5(`)f F4(t)h FF(:)g F4(T)p Gd(.)765
b FZ(2)450 2250 y F7(Pr)o(oof:)66 b Gd(Easy)-9 b(.)2492
b FZ(2)450 2432 y Ge(1)m(1.5)19 b(Theorem)h([Preservation]:)39
b Gd(If)658 2598 y Gb(\000)22 b F0(j)h Gb(\006)g F5(`)g
F4(t)f FF(:)i F4(T)658 2698 y Gb(\000)e F0(j)h Gb(\006)g
F5(`)g Gb(\026)658 2798 y F4(t)f F0(j)h Gb(\026)g F5(\000)-14
b FV(!)23 b F4(t)1047 2768 y FX(0)1094 2798 y F0(j)f
Gb(\026)1193 2768 y FX(0)450 2964 y Gd(then,)f(for)g(some)g
Gb(\006)1058 2934 y FX(0)1103 2964 y F5(\023)i Gb(\006)p
Gd(,)658 3130 y Gb(\000)f F0(j)h Gb(\006)828 3100 y FX(0)874
3130 y F5(`)g F4(t)999 3100 y FX(0)1045 3130 y FF(:)g
F4(T)658 3229 y Gb(\000)f F0(j)h Gb(\006)828 3199 y FX(0)874
3229 y F5(`)g Gb(\026)1007 3199 y FX(0)1030 3229 y Gd(.)2343
b FZ(2)450 3412 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)22
b(induction)j(on)g(typing)f(derivations,)h(using)f(the)g(lemmas)h
(above)450 3512 y(and)20 b(the)h(evident)g(inversion)g(pr)o(operty)f
(of)h(the)g(typing)g(r)o(ules.)947 b FZ(2)450 3694 y
Ge(1)m(1.6)19 b(Exercise)g([Homework]:)40 b F7(\(Due)24
b(on)g(Feb.)35 b(29.\))f Gd(Is)24 b(the)g(evaluation)g(r)o(elation)f
(de\002ned)h(in)423 b FP(\()450 3794 y Gd(this)20 b(chapter)e(str)o
(ongly)i(normalizing)g(on)g(well-typed)e(terms?)25 b(If)19
b(so,)h(pr)o(ove)e(it.)25 b(If)19 b(not,)h(show)450 3894
y(how)i(to)g(write)g(a)f(well-typed)g(factorial)f(function)i(in)g(the)g
(pr)o(esent)e(calculus)i(extended)e(with)450 3993 y(numbers)h(and)f
(booleans.)26 b(Solution)c(on)g(page)e(292.)1276 b FZ(2)p
eop
%%Page: 105 106
105 105 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)885
b Gd(1)o(1)t(.)29 b(R)t F6(E)t(F)t(E)t(R)t(E)t(N)t(C)t(E)t(S)887
b Gd(105)450 686 y Gj(1)l(1.1)118 b(T)-11 b(ype)31 b(and)e(Ef)n(fect)g
(Systems)450 875 y F7(Quick)20 b(sketch)g(of)h(r)o(egion)g(typing.)450
1161 y Gj(1)l(1.2)118 b(Further)29 b(Reading)450 1350
y Gd(The)16 b(pr)o(esentation)f(in)h(this)h(chapter)e(is)h(adapted)e
(fr)o(om)h(Harper)6 b('s)15 b(tr)o(eatment)g([Har94)n(,)h(Har96)n(].)
450 1450 y(An)21 b(earlier)e(account)i(in)g(a)g(similar)g(style)g(is)g
(given)g(by)g(W)-6 b(right)21 b(and)f(Felleisen)h([WF94)o(].)575
1549 y(The)26 b(combination)j(of)d(r)o(efer)o(ences)f(\(or)i(other)g
(computational)g(ef)o(fects\))e(with)j(ML-style)450 1649
y(polymorphic)h(type)g(infer)o(ence)e(raises)h(some)g(subtle)h(pr)o
(oblems)f(\(cf.)f(Section)i Ge(??)o Gd(\))f(and)g(has)450
1748 y(r)o(eceived)f(a)i(good)h(deal)e(of)h(attention)h(in)g(the)f(r)o
(esear)o(ch)e(literatur)o(e.)50 b(See)28 b([T)-8 b(of90)o(,)29
b(HMV93)n(,)450 1848 y(JG91)o(,)21 b(TJ92)n(,)g(TJ92)n(,)g(L)-6
b(W91)n(,)21 b(W)-6 b(ri92)o(])20 b(and)g(the)h(r)o(efer)o(ences)e
(cited)h(ther)o(e.)p eop
%%Page: 106 107
106 106 bop 450 1306 a F3(Chapter)44 b(12)450 1721 y
Gk(Subtyping)450 2177 y Gd(In)32 b(pr)o(ogramming)g(in)g(the)g(simply)h
(typed)e(lambda-calculus,)i(we)f(may)g(sometimes)h(\002nd)450
2276 y(ourselves)c(irritated)g(by)g(the)g(type)h(system's)g(insistence)
g(that)f(types)g(match)h(exactly)-9 b(.)50 b(For)450
2376 y(example,)20 b(consider)h(the)g(r)o(ule)h(T)o(-)t(A)t
F6(P)t(P)i Gd(for)c(typing)i(applications:)1148 2500
y Gb(\000)g F5(`)h F4(t)1333 2512 y F1(1)1396 2500 y
FF(:)h F4(T)1514 2512 y F1(11)1591 2500 y FV(!)p F4(T)1718
2512 y F1(12)1961 2500 y Gb(\000)f F5(`)f F4(t)2146 2512
y F1(2)2209 2500 y FF(:)i F4(T)2327 2512 y F1(11)p 1148
2543 1257 4 v 1490 2623 a Gb(\000)f F5(`)g F4(t)1676
2635 y F1(1)1760 2623 y F4(t)1803 2635 y F1(2)1867 2623
y FF(:)g F4(T)1985 2635 y F1(12)3155 2562 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))450 2744 y(Accor)o(ding)d(to)h(this)h(r)o(ule,)e(the)h
(term)658 2902 y F4(\()p Gb(\025)p F4(r:{x:Nat}.)39 b(r.x\))i({x=0,)h
(y=1})450 3059 y Gd(is)34 b(not)f(typeable,)j(even)d(though)h(it)f
(will)h(obviously)h(evaluate)d(without)i(pr)o(oducing)f(any)450
3159 y(r)o(un-time)24 b(err)o(ors,)g(since)g(the)g(function)g(only)h(r)
o(equir)o(es)e(that)h(its)g(ar)o(gument)f(has)h(a)f(\002eld)h
F4(x)p Gd(;)h(it)450 3258 y(doesn't)e(car)o(e)e(what)i(other)f
(\002elds)h(the)g(ar)o(gument)f(may)g(or)h(may)f(not)i(have.)30
b(Mor)o(eover)-6 b(,)21 b(this)450 3358 y(fact)h(is)h(evident)g(fr)o
(om)f(the)h(type)g(of)g(the)g(function\227we)g(don't)h(need)e(to)h
(look)h(at)e(its)i(body)f(to)450 3458 y(see)d(that)h(it)g(doesn't)g
(use)g(any)g(\002elds)g(besides)f F4(x)p Gd(.)575 3557
y(One)33 b(way)g(to)h(formalize)e(this)j(observation)e(is)h(to)f
(extend)g(the)h(typing)g(r)o(ules)f(so)h(that)450 3657
y(the)28 b(term)g F4({x=0,)42 b(y=0})26 b Gd(is)i(given)h(a)e
F7(set)i Gd(of)f(types)g(including)h(both)f F4({x:Nat,)41
b(y:Nat})25 b Gd(and)450 3757 y F4({x:Nat})m Gd(.)57
b(Then)31 b(the)g(application)g(above)g(is)g(well)h(typed)e(because)h
(one)g(of)g(the)g(possible)450 3856 y(types)21 b(of)g(the)f(ar)o
(gument)h(matches)g(the)f(left-hand)g(side)h(of)g(the)g(type)f(of)h
(the)g(function.)575 3956 y(T)-8 b(o)20 b(accomplish)h(this)h(in)e(a)g
(general)g(way)-9 b(,)20 b(we)g(intr)o(oduce)g(a)g Ge(principle)e(of)j
(safe)f(substitu-)450 4055 y(tion)p Gd(:)35 b(W)-8 b(e)27
b(say)f(that)g(\223)p F4(S)f Gd(is)h(a)g(subtype)g(of)g
F4(T)p Gd(,\224)h(written)f F4(S)33 b FF(<)-17 b(:)34
b F4(T)o Gd(,)27 b(to)g(mean)f(that)g(any)g(term)g(of)450
4155 y(type)d F4(S)f Gd(can)h(safely)f(be)h(used)f(in)i(a)e(context)h
(wher)o(e)g(a)f(term)h(of)g(type)f F4(T)h Gd(is)g(r)o(equir)o(ed.)31
b(If)22 b(this)i(is)450 4255 y(the)d(case,)f(then)h(a)f(term)h
F4(t)f Gd(of)h(type)f F4(S)g Gd(is)h(also)g(given)g(the)g(type)g
F4(T)o Gd(,)g(using)g(the)g(so-called)f(r)o(ule)h(of)450
4354 y Ge(subsumption)p Gd(:)1420 4476 y Gb(\000)i F5(`)g
F4(t)f FF(:)i F4(S)165 b(S)23 b FF(<)-17 b(:)24 b F4(T)p
1420 4520 712 4 v 1613 4599 a Gb(\000)f F5(`)f F4(t)h
FF(:)g F4(T)3164 4539 y Gd(\()r(T)o(-)t(S)t F6(U)t(B)q
Gd(\))450 4721 y(No)32 b(other)g(changes)f(ar)o(e)f(needed)h(to)h(the)f
(typing)i(r)o(elation)e(\(though,)k(as)c(we)g(shall)h(see)g(in)450
4820 y(Section)e(12.2,)g(some)g(changes)f(ar)o(e)g(r)o(equir)o(ed)f(to)
i(the)f(algorithmic)i F7(implementation)d Gd(of)i(the)450
4920 y(typing)22 b(r)o(elation\).)i(It)d(r)o(emains)f(only)i(to)f
(formalize)f(the)h(subtype)g(r)o(elation.)1888 5169 y(106)p
eop
%%Page: 107 108
107 107 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)908
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)910
b Gd(107)575 683 y(In)25 b(this)h(chapter)-6 b(,)26 b(we'll)f(mainly)h
(work)g(with)g(a)f(calculus)g(with)i(just)f(r)o(ecor)o(ds)e(and)g
(func-)450 783 y(tions)f(\(written)f Gb(\025)p F4(<)-14
b(:)o FA(fg)p Gd(,)21 b(for)g(short\),)i(which)f(is)g(rich)g(enough)h
(to)f(bring)g(out)g(most)h(of)f(the)g(inter)o(-)450 882
y(esting)h(issues.)30 b(Examples)22 b(and)g(exer)o(cises)f(will)h
(touch)h(on)g(the)f(combination)i(of)e(subtyping)450
982 y(with)g(most)f(of)g(the)g(other)g(featur)o(es)e(we)i(have)f(seen.)
450 1268 y Gj(12.1)119 b(The)29 b(Subtype)h(Relation)450
1457 y Gd(For)i(r)o(ecor)o(d)e(types,)k(we)e(have)f(alr)o(eady)f(seen)h
(that)h(we)g(want)f(to)h(consider)g(the)g(type)f F4(S)43
b FY(=)450 1556 y F4({k)537 1568 y F1(1)578 1556 y F4(:S)665
1568 y F1(1)705 1556 y F4(...k)880 1568 y F1(m)948 1556
y F4(:S)1035 1568 y F1(m)1103 1556 y F4(})28 b Gd(to)i(be)f(a)f
(subtype)i(of)f F4(T)38 b FY(=)g F4({l)2159 1568 y F1(1)2199
1556 y F4(:T)2286 1568 y F1(1)2327 1556 y F4(...l)2501
1568 y F1(n)2552 1556 y F4(:T)2640 1568 y F1(n)2691 1556
y F4(})29 b Gd(if)g F4(T)f Gd(is)i(obtained)f(by)450
1656 y(dr)o(opping)21 b(\002elds)f(fr)o(om)h F4(S)o Gd(.)1222
1780 y F4({l)1309 1792 y F1(i)1340 1780 y F4(:T)1428
1792 y F1(i)1469 1750 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)p
Fy(+)o FB(k)1707 1780 y F4(})23 b FF(<)-17 b(:)24 b F4({l)1970
1792 y F1(i)2001 1780 y F4(:T)2088 1792 y F1(i)2130 1750
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2286 1780 y F4(})2844
1781 y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s
Gd(\))450 1905 y(In)29 b(fact,)g(we)f(can)h(be)f(a)g(little)h(mor)o(e)f
(general)g(than)g(this)i(and)e(also)g(allow)h(the)g(types)f(of)h(the)
450 2005 y(common)21 b(\002elds)f(to)g(dif)o(fer)-6 b(,)18
b(so)i(long)h(as)e(their)h(types)f(in)i F4(S)e Gd(ar)o(e)f(subtypes)i
(of)g(their)f(types)h(in)g F4(T)p Gd(.)1422 2131 y(for)g(each)g
Gb(i)83 b F4(S)1892 2143 y F1(i)1946 2131 y FF(<)-17
b(:)24 b F4(T)2099 2143 y F1(i)p 1263 2174 1027 4 v 1263
2254 a F4({l)1350 2266 y F1(i)1381 2254 y F4(:S)1468
2266 y F1(i)1510 2224 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1666
2254 y F4(})23 b FF(<)-17 b(:)24 b F4({l)1929 2266 y
F1(i)1960 2254 y F4(:T)2048 2266 y F1(i)2089 2224 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2246 2254 y F4(})2855 2193
y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s
Gd(\))450 2378 y(Also,)26 b(it)f(makes)g(sense)g(to)h(ignor)o(e)f(the)g
(or)o(der)f(of)h(\002elds)g(in)g(a)g(r)o(ecor)o(d,)f(since)h(the)g
(only)h(thing)450 2477 y(that)f(we)h(can)f F7(do)f Gd(with)i(r)o(ecor)o
(ds\227namely)-9 b(,)25 b(\002eld)g(pr)o(ojection\227is)i(insensitive)f
(to)g(the)f(or)o(der)450 2577 y(of)c(\002elds.)1284 2681
y Gb(\031)g Gd(is)g(a)f(permutation)h(of)g F0(f)p Gb(1::n)p
F0(g)p 1257 2724 1039 4 v 1257 2804 a F4({l)1344 2816
y F1(i)1375 2804 y F4(:T)1462 2816 y F1(i)1504 2774 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1660 2804 y F4(})23
b FF(<)-17 b(:)24 b F4({l)1923 2816 y F1(\031i)1998 2804
y F4(:T)2095 2771 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2085
2829 y F1(\031i)2252 2804 y F4(})2903 2743 y Gd(\()r(S)t(-)t(R)t
F6(C)t(D)t Gd(-)t(P)t F6(E)t(R)t(M)r Gd(\))575 2928 y(For)23
b(the)h(types)g(of)f(functions,)i(subtyping)g(is)f(a)f(little)h
(trickier)-6 b(.)33 b(W)-8 b(e)24 b(allow)g(a)f(function)h(of)450
3027 y(one)j(type)f(to)g(be)g(used)g(wher)o(e)f(another)i(is)f
(expected)f(as)h(long)h(as)f(none)h(of)f(the)g(ar)o(guments)450
3127 y(that)h(may)g(be)f(passed)g(to)i(the)f(function)g(by)g(the)g
(context)g(will)h(surprise)e(it)i(\()p F4(T)2976 3139
y F1(1)3051 3127 y FF(<)-17 b(:)35 b F4(S)3214 3139 y
F1(1)3255 3127 y Gd(\))26 b(and)450 3226 y(none)21 b(of)g(the)g(r)o
(esults)g(that)f(it)h(r)o(eturns)g(will)g(surprise)g(the)g(context)g
(\()p F4(S)2646 3238 y F1(2)2709 3226 y FF(<)-17 b(:)24
b F4(T)2862 3238 y F1(2)2902 3226 y Gd(\).)1393 3353
y F4(T)1436 3365 y F1(1)1500 3353 y FF(<)-17 b(:)24 b
F4(S)1652 3365 y F1(1)1859 3353 y F4(S)1903 3365 y F1(2)1966
3353 y FF(<)-17 b(:)24 b F4(T)2119 3365 y F1(2)p 1393
3396 767 4 v 1459 3475 a F4(S)1502 3487 y F1(1)1543 3475
y FV(!)p F4(S)1669 3487 y F1(2)1733 3475 y FF(<)-17 b(:)24
b F4(T)1886 3487 y F1(1)1926 3475 y FV(!)p F4(T)2053
3487 y F1(2)3023 3415 y Gd(\()r(S)t(-)t(A)t F6(R)t(R)t(O)t(W)r
Gd(\))450 3599 y(Notice)j(that)g(the)g(sense)g(of)g(the)g(subtype)h(r)o
(elation)e(is)h(r)o(eversed)f(on)h(the)g(left)g(of)g(the)g(arr)o(ow;)
450 3699 y(this)21 b(r)o(ule)f(is)h(sometimes)g(r)o(eferr)o(ed)d(to)i
(as)g(the)h(\223contravariant)e(arr)o(ow)g(r)o(ule\224)h(for)g(this)h
(r)o(eason.)450 3881 y Ge(12.1.1)d(Exercise)h([Quick)h(check]:)39
b Gd(Demonstrate)16 b(that)g(the)g(pr)o(emises)f(of)j(S)t(-)t(A)t
F6(R)t(R)t(O)t(W)h Gd(ar)o(e)14 b(both)450 3981 y(necessary)h(by)h
(giving)h(ill-behaved)e(pr)o(ograms)g(that)h(would)g(be)f(well)h(typed)
g(if)f(either)h(pr)o(emise)450 4081 y(wer)o(e)k(dr)o(opped.)2403
b FZ(2)575 4263 y Gd(Next,)16 b(for)g(various)g(r)o(easons,)h(it)f
(will)h(be)f(convenient)h(to)f(have)g(a)g(type)g(that)g(is)h(a)e
(supertype)450 4363 y(of)23 b(every)f(type.)33 b(W)-8
b(e)23 b(intr)o(oduce)g(a)f(new)i(type)e(constant)i F4(Top)e
Gd(for)h(this)h(purpose,)f(plus)g(a)g(r)o(ule)450 4463
y(that)e(makes)f F4(Top)g Gd(maximal)g(in)i(the)f(subtype)f(r)o
(elation.)1623 4586 y F4(S)i FF(<)-17 b(:)24 b F4(Top)3161
4587 y Gd(\()r(S)t(-)t(T)s F6(O)t(P)q Gd(\))450 4712
y(\(The)h F4(Top)g Gd(type)g(is)h(an)g(optional)g(part)f(of)h(the)f
(system:)36 b(everything)26 b(makes)g(sense)g(without)450
4811 y(it.\))p eop
%%Page: 108 109
108 108 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)908
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)910
b Gd(108)575 683 y(Finally)-9 b(,)23 b(just)h(to)f(make)f(sur)o(e)g
(that)h(our)g(subtyping)h(r)o(elation)e(is)h(sensible,)h(we)f(make)f
(two)450 783 y(general)e(stipulations:)27 b(\002rst,)21
b(that)f(it)h(should)h(be)e(r)o(e\003exive,)1666 906
y F4(S)j FF(<)-17 b(:)24 b F4(S)3129 907 y Gd(\()r(S)t(-)t(R)t
F6(E)t(FL)q Gd(\))450 1032 y(and)c(second,)h(that)g(it)g(should)g(be)g
(transitive:)1474 1147 y F4(S)h FF(<)-17 b(:)24 b F4(U)166
b(U)23 b FF(<)-17 b(:)24 b F4(T)p 1474 1191 605 4 v 1666
1270 a(S)f FF(<)-17 b(:)24 b F4(T)3058 1210 y Gd(\()r(S)t(-)t(T)t
F6(R)t(A)t(N)t(S)q Gd(\))450 1394 y(These)g(r)o(ules)h(follow)g(dir)o
(ectly)e(fr)o(om)h(the)h(intuition)h(of)e(safe)f(substitution.)38
b(The)24 b(r)o(emainder)450 1494 y(of)33 b(the)g(r)o(ules)g(de\002ning)
h(the)f(subtype)g(r)o(elation)f(concern)i(the)f(behavior)f(of)h
(speci\002c)g(type)450 1593 y(constr)o(uctors.)575 1693
y(Formally)-9 b(,)31 b(the)f(subtype)g(r)o(elation)f(is)h(the)f(least)h
(r)o(elation)f(closed)g(under)g(the)h(r)o(ules)g(we)450
1792 y(have)24 b(given.)37 b(For)24 b(easy)g(r)o(efer)o(ence,)f(we)h(r)
o(ecapitulate)f(the)i(full)f(de\002nition)h(of)g(the)f(calculus,)450
1892 y(highlighting)f(the)e(syntax)g(and)f(r)o(ules)h(we)g(have)f(just)
i(added.)450 2058 y Ge(Simply)d(typed)h(lambda)f(calculus)f(with)i
(records)h(and)e(subtyping)477 b FV(!)34 b FA(fg)3345
2058 y
 gsave currentpoint translate 0 124518 7800 div 827934 7800 div 488606
-7800 div box .9 setgray fill grestore
 3345 2058 a 16 w F4(<)-14 b(:)p 409 2140 9 36
v 418 2110 3000 6 v 3418 2110 38 6 v 3455 2140 9 36 v
450 2230 a F7(Syntax)592 2360 y F4(t)61 b Gd(::=)1821
b F7(terms)852 2460 y F4(x)1774 b F7(variable)852 2560
y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)852
2659 y F4(t)43 b(t)1687 b F7(application)852 2759 y F4({l)939
2771 y F1(i)970 2759 y F4(=t)1057 2771 y F1(i)1099 2729
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1255 2759 y F4(})1371
b F7(r)o(ecord)852 2859 y F4(t.l)1686 b F7(pr)o(ojection)592
3058 y F4(v)61 b Gd(::=)1821 b F7(values)852 3157 y Gb(\025)p
F4(x)o(:T)o(.t)1555 b F7(abstraction)21 b(value)852 3257
y F4({l)939 3269 y F1(i)970 3257 y F4(=v)1057 3269 y
F1(i)1099 3227 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1255
3257 y F4(})1371 b F7(r)o(ecord)20 b(value)592 3456 y
F4(T)61 b Gd(::=)1821 b F7(types)852 3556 y
 gsave currentpoint translate 0 270154 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3556
a 15 w F4(Top)1671 b F7(maximum)19 b(type)852 3656 y
F4(T)p FV(!)o F4(T)1648 b F7(type)20 b(of)g(functions)852
3755 y F4({l)939 3767 y F1(i)970 3755 y F4(:T)1057 3767
y F1(i)1099 3725 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1255
3755 y F4(})1371 b F7(type)20 b(of)g(r)o(ecords)590 3954
y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 4054 y F5(;)1776
b F7(empty)19 b(context)852 4154 y Gb(\000)5 b(;)17 b
F4(x:T)1596 b F7(term)21 b(variable)g(binding)450 4368
y(Evaluation)p 3096 4281 355 4 v 3096 4393 4 113 v 2304
w F4(t)i F5(\000)-15 b FV(!)23 b F4(t)3398 4338 y FX(0)p
3447 4393 V 3096 4396 355 4 v 1155 4483 a F4(\()p Gb(\025)p
F4(x)o(:T)1374 4495 y F1(11)1451 4483 y F4(.t)1538 4495
y F1(12)1615 4483 y F4(\))43 b(v)1746 4495 y F1(2)1810
4483 y F5(\000)-15 b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g
F4(v)2209 4495 y F1(2)2250 4483 y F0(g)p F4(t)2320 4495
y F1(12)3113 4484 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p
Gd(\))1602 4622 y F4(t)1645 4634 y F1(1)1709 4622 y F5(\000)-14
b FV(!)23 b F4(t)1917 4592 y FX(0)1909 4645 y F1(1)p
1474 4665 604 4 v 1474 4745 a F4(t)1518 4757 y F1(1)1602
4745 y F4(t)1645 4757 y F1(2)1709 4745 y F5(\000)-14
b FV(!)23 b F4(t)1917 4715 y FX(0)1909 4768 y F1(1)1994
4745 y F4(t)2037 4757 y F1(2)3105 4684 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))p eop
%%Page: 109 110
109 109 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)908
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)910
b Gd(109)1602 670 y F4(t)1645 682 y F1(2)1709 670 y F5(\000)-14
b FV(!)23 b F4(t)1917 640 y FX(0)1909 693 y F1(2)p 1474
713 604 4 v 1474 792 a F4(v)1518 804 y F1(1)1602 792
y F4(t)1645 804 y F1(2)1709 792 y F5(\000)-14 b FV(!)23
b F4(v)1909 804 y F1(1)1994 792 y F4(t)2045 762 y FX(0)2037
816 y F1(2)3105 732 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t
Gd(2)q(\))1367 932 y F4({l)1455 944 y F1(i)1486 932 y
F4(=v)1573 944 y F1(i)1615 902 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1771 932 y F4(}.l)1902 944 y F1(j)1954 932
y F5(\000)c FV(!)23 b F4(v)2155 944 y F1(j)2946 933 y
Gd(\()r(E)t(-)t(R)t F6(C)t(D)t Gd(B)t F6(E)t(T)o(A)r
Gd(\))1602 1071 y F4(t)1645 1083 y F1(1)1709 1071 y F5(\000)-14
b FV(!)23 b F4(t)1917 1041 y FX(0)1909 1094 y F1(1)p
1515 1114 523 4 v 1515 1193 a F4(t)1558 1205 y F1(1)1599
1193 y F4(.l)f F5(\000)-14 b FV(!)23 b F4(t)1917 1164
y FX(0)1909 1217 y F1(1)1950 1193 y F4(.l)3123 1133 y
Gd(\()r(E)t(-)t(P)t F6(R)t(O)t(J)r Gd(\))1739 1333 y
F4(t)1783 1345 y F1(j)1660 1432 y F5(\000)-14 b FV(!)23
b F4(t)1868 1402 y FX(0)1861 1456 y F1(j)p 474 1480 2604
4 v 474 1560 a F4({l)561 1572 y F1(i)593 1560 y F4(=v)680
1572 y F1(i)721 1530 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(j)g
Fy(-)g FB(1)919 1560 y F4(,l)1007 1572 y F1(j)1036 1560
y F4(=t)1123 1572 y F1(j)1153 1560 y F4(,l)1240 1572
y F1(k)1284 1560 y F4(=t)1371 1572 y F1(k)1426 1530 y
FB(k)p Fz(2)p FB(j)g Fy(+)e FB(1)i(:)g(:)g(n)1642 1560
y F4(})22 b F5(\000)-14 b FV(!)23 b F4({l)1952 1572 y
F1(i)1984 1560 y F4(=v)2071 1572 y F1(i)2112 1530 y FB(i)p
Fz(2)q FB(1)-10 b(:)g(:)g(j)g Fy(-)g FB(1)2311 1560 y
F4(,l)2398 1572 y F1(j)2427 1560 y F4(=t)2522 1530 y
FX(0)2514 1583 y F1(j)2545 1560 y F4(,l)2632 1572 y F1(k)2677
1560 y F4(=t)2764 1572 y F1(k)2818 1530 y FB(k)p Fz(2)p
FB(j)g Fy(+)f FB(1)h(:)g(:)g(n)3034 1560 y F4(})2992
1663 y Gd(\()r(E)t(-)t(R)t F6(E)t(C)t(O)t(R)t(D)s Gd(\))450
1803 y F7(Subtyping)p 3174 1723 276 4 v 3174 1828 4 105
v 2400 w F4(S)22 b FF(<)-17 b(:)24 b F4(T)p 3447 1828
V 3174 1831 276 4 v 1642 1950 a
 gsave currentpoint translate 0 419430 7800 div 2110610 7800 div 747110
-7800 div box .9 setgray fill grestore
 1642 1950 a 1666 1949
a F4(S)f FF(<)-17 b(:)24 b F4(S)3129 1950 y Gd(\()r(S)t(-)t(R)t
F6(E)t(FL)q Gd(\))1440 2192 y
 gsave currentpoint translate 0 851966 7800 div 5309118 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1440 2192 a 1474 2136 a
F4(S)e FF(<)-17 b(:)24 b F4(U)166 b(U)23 b FF(<)-17 b(:)24
b F4(T)p 1474 2173 605 4 v 1666 2246 a(S)f FF(<)-17 b(:)24
b F4(T)3058 2192 y Gd(\()r(S)t(-)t(T)t F6(R)t(A)t(N)t(S)q
Gd(\))1599 2434 y
 gsave currentpoint translate 0 419430 7800 div 2798732 7800 div 747110
-7800 div box .9 setgray fill grestore
 1599 2434 a 1623 2433 a F4(S)e FF(<)-17
b(:)24 b F4(Top)3161 2434 y Gd(\()r(S)t(-)t(T)s F6(O)t(P)q
Gd(\))1359 2676 y
 gsave currentpoint translate 0 851966 7800 div 6588190 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1359 2676 a 1393 2620 a F4(T)1436 2632
y F1(1)1500 2620 y FF(<)-17 b(:)24 b F4(S)1652 2632 y
F1(1)1859 2620 y F4(S)1903 2632 y F1(2)1966 2620 y FF(<)-17
b(:)24 b F4(T)2119 2632 y F1(2)p 1393 2657 767 4 v 1459
2730 a F4(S)1502 2742 y F1(1)1543 2730 y FV(!)p F4(S)1669
2742 y F1(2)1733 2730 y FF(<)-17 b(:)24 b F4(T)1886 2742
y F1(1)1926 2730 y FV(!)p F4(T)2053 2742 y F1(2)3023
2676 y Gd(\()r(S)t(-)t(A)t F6(R)t(R)t(O)t(W)r Gd(\))1198
2918 y
 gsave currentpoint translate 0 419430 7800 div 9125870 7800 div 747110
-7800 div box .9 setgray fill grestore
 1198 2918 a 1222 2917 a F4({l)1309 2929 y F1(i)1340
2917 y F4(:T)1428 2929 y F1(i)1469 2887 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1707 2917 y F4(})23
b FF(<)-17 b(:)24 b F4({l)1970 2929 y F1(i)2001 2917
y F4(:T)2088 2929 y F1(i)2130 2887 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2286 2917 y F4(})2844 2918 y Gd(\()r(S)t(-)t(R)t
F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s Gd(\))1229 3160
y
 gsave currentpoint translate 0 851966 7800 div 8641008 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1229 3160 a 1422 3104 a Gd(for)20 b(each)g Gb(i)83
b F4(S)1892 3116 y F1(i)1946 3104 y FF(<)-17 b(:)24 b
F4(T)2099 3116 y F1(i)p 1263 3141 1027 4 v 1263 3214
a F4({l)1350 3226 y F1(i)1381 3214 y F4(:S)1468 3226
y F1(i)1510 3184 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1666
3214 y F4(})23 b FF(<)-17 b(:)24 b F4({l)1929 3226 y
F1(i)1960 3214 y F4(:T)2048 3226 y F1(i)2089 3184 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2246 3214 y F4(})2855 3160
y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s
Gd(\))1222 3457 y
 gsave currentpoint translate 0 851966 7800 div 8737320 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1222 3457 a 1284 3401 a Gb(\031)21
b Gd(is)g(a)f(permutation)h(of)g F0(f)p Gb(1::n)p F0(g)p
1257 3438 1039 4 v 1257 3511 a F4({l)1344 3523 y F1(i)1375
3511 y F4(:T)1462 3523 y F1(i)1504 3481 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1660 3511 y F4(})23 b FF(<)-17 b(:)24
b F4({l)1923 3523 y F1(\031i)1998 3511 y F4(:T)2095 3478
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2085 3536 y F1(\031i)2252
3511 y F4(})2903 3457 y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t
Gd(-)t(P)t F6(E)t(R)t(M)r Gd(\))450 3690 y F7(T)i(yping)p
3067 3608 383 4 v 3067 3715 4 108 v 2408 w Gb(\000)22
b F5(`)h F4(t)g FF(:)g F4(T)p 3447 3715 V 3067 3718 383
4 v 1637 3812 a(x:T)f F5(2)i Gb(\000)p 1613 3855 327
4 v 1613 3935 a(\000)f F5(`)f F4(x)h FF(:)g F4(T)3152
3875 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))1464 4074
y Gb(\000)5 b(;)18 b F4(x:T)1685 4086 y F1(1)1749 4074
y F5(`)23 b F4(t)1866 4086 y F1(2)1930 4074 y FF(:)g
F4(T)2048 4086 y F1(2)p 1359 4117 835 4 v 1359 4197 a
Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676 4209 y F1(1)1717
4197 y F4(.t)1804 4209 y F1(2)1867 4197 y FF(:)i F4(T)1985
4209 y F1(1)2026 4197 y FV(!)p F4(T)2152 4209 y F1(2)3160
4136 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))1148 4336
y Gb(\000)e F5(`)h F4(t)1333 4348 y F1(1)1396 4336 y
FF(:)h F4(T)1514 4348 y F1(11)1591 4336 y FV(!)p F4(T)1718
4348 y F1(12)1961 4336 y Gb(\000)f F5(`)f F4(t)2146 4348
y F1(2)2209 4336 y FF(:)i F4(T)2327 4348 y F1(11)p 1148
4379 1257 4 v 1490 4459 a Gb(\000)f F5(`)g F4(t)1676
4471 y F1(1)1760 4459 y F4(t)1803 4471 y F1(2)1867 4459
y FF(:)g F4(T)1985 4471 y F1(12)3155 4398 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1368 4598 y(for)e(each)f Gb(i)83 b(\000)23
b F5(`)f F4(t)1980 4610 y F1(i)2034 4598 y FF(:)i F4(T)2152
4610 y F1(i)p 1209 4641 1134 4 v 1209 4721 a Gb(\000)f
F5(`)g F4({l)1438 4733 y F1(i)1469 4721 y F4(=t)1556
4733 y F1(i)1598 4691 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1754
4721 y F4(})23 b FF(:)g F4({l)1983 4733 y F1(i)2014 4721
y F4(:T)2101 4733 y F1(i)2143 4691 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2299 4721 y F4(})3146 4660 y Gd(\()r(T)o(-)t(R)t
F6(C)t(D)s Gd(\))p eop
%%Page: 110 111
110 110 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)913
b Gd(1)-5 b(10)1391 670 y Gb(\000)23 b F5(`)f F4(t)1576
682 y F1(0)1640 670 y FF(:)h F4({l)1801 682 y F1(i)1832
670 y F4(:T)1920 682 y F1(i)1961 640 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)2118 670 y F4(})p 1391 713 771 4
v 1519 792 a Gb(\000)23 b F5(`)g F4(t)1705 804 y F1(0)1745
792 y F4(.l)1832 804 y F1(j)1885 792 y FF(:)g F4(T)2003
804 y F1(j)3127 732 y Gd(\()r(T)o(-)t(P)t F6(R)t(O)t(J)s
Gd(\))1386 1011 y
 gsave currentpoint translate 0 851966 7800 div 6153727 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1386 1011 a 1420 955 a Gb(\000)g F5(`)g
F4(t)f FF(:)i F4(S)165 b(S)23 b FF(<)-17 b(:)24 b F4(T)p
1420 992 712 4 v 1613 1065 a Gb(\000)f F5(`)f F4(t)h
FF(:)g F4(T)3164 1011 y Gd(\()r(T)o(-)t(S)t F6(U)t(B)q
Gd(\))p 409 1157 9 36 v 418 1157 3000 6 v 3418 1157 38
6 v 3455 1157 9 36 v 450 1340 a Ge(12.1.2)18 b(Exercise:)39
b Gd(In)21 b(what)f(ways)h(ar)o(e)e(the)h F4(Top)f Gd(type)h(and)g(the)
g(empty)h(r)o(ecor)o(d)d(type)i F4({})g Gd(simi-)450
1439 y(lar?)25 b(In)c(what)g(ways)g(ar)o(e)e(they)i(dif)o(fer)o(ent?)j
(Solution)e(on)f(page)f(292.)785 b FZ(2)450 1622 y Ge(12.1.3)18
b(Exercise:)554 1788 y Gd(1.)41 b(How)21 b(many)g(dif)o(fer)o(ent)e
(supertypes)h(does)h(the)g(type)g F4({a:Top,b:Top})15
b Gd(have?)554 1954 y(2.)41 b(Can)18 b(you)h(\002nd)f(an)h(in\002nite)g
(descending)g(chain)f(in)h(the)g(subtype)f(r)o(elation\227that)g(is,)h
(an)658 2054 y(in\002nite)i(sequence)g(of)g(types)g F4(S)1653
2066 y F1(0)1694 2054 y Gd(,)f F4(S)1779 2066 y F1(1)1820
2054 y Gd(,)g(etc.)25 b(such)c(that)g(each)f F4(S)2598
2066 y F1(i)p F2(+)p F1(1)2737 2054 y Gd(is)h(a)g(subtype)g(of)f
F4(S)3332 2066 y F1(i)3363 2054 y Gd(?)554 2220 y(3.)41
b(What)20 b(about)h(an)f(in\002nite)i(ascending)f(chain?)450
2386 y(Solution)h(on)f(page)f(292.)2156 b FZ(2)450 2569
y Ge(12.1.4)18 b(Exercise:)554 2735 y Gd(1.)41 b(Is)20
b(ther)o(e)g(a)h(type)f(that)h(is)g(a)f(subtype)h(of)g(every)f(other)h
(type?)554 2901 y(2.)41 b(Is)25 b(ther)o(e)f(an)h(arr)o(ow)f(type)g
F4(T)1548 2913 y F1(1)1589 2901 y FV(!)p F4(T)1715 2913
y F1(2)1781 2901 y Gd(that)g(is)i(a)e(supertype)h(of)g(every)f(other)h
(arr)o(ow)f(type)658 3000 y F4(S)701 3012 y F1(1)742
3000 y FV(!)p F4(S)868 3012 y F1(2)909 3000 y Gd(?)450
3166 y(Solution)e(on)f(page)f(293.)2156 b FZ(2)450 3349
y Ge(12.1.5)18 b(Exercise:)39 b Gd(Suppose)18 b(we)g(extend)f(the)h
(calculus)g(with)g(the)g(pr)o(oduct)f(type)h(constr)o(uctor)450
3449 y F4(T)494 3461 y F1(1)534 3449 y F5(\002)p F4(T)642
3461 y F1(2)704 3449 y Gd(described)h(in)i(Section)g(9.5.)k(It)20
b(is)h(natural)g(to)g(add)e(a)i(subtyping)g(r)o(ule)1393
3575 y F4(S)1436 3587 y F1(1)1500 3575 y FF(<)-17 b(:)24
b F4(T)1652 3587 y F1(1)1859 3575 y F4(S)1903 3587 y
F1(2)1966 3575 y FF(<)-17 b(:)24 b F4(T)2119 3587 y F1(2)p
1393 3618 767 4 v 1477 3698 a F4(S)1521 3710 y F1(1)1561
3698 y F5(\002)p F4(S)1669 3710 y F1(2)1733 3698 y FF(<)-17
b(:)24 b F4(T)1886 3710 y F1(1)1926 3698 y F5(\002)p
F4(T)2034 3710 y F1(2)3101 3637 y Gd(\()r(S)t(-)t(P)t
F6(R)t(O)t(D)r Gd(\))450 3821 y(corr)o(esponding)c(to)g(the)g(depth)g
(subtyping)h(r)o(ule)h(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(D)t
F6(E)t(P)t(T)t(H)h Gd(for)d(r)o(ecor)o(ds.)k(W)-8 b(ould)20
b(it)g(be)450 3921 y(a)g(good)i(idea)d(to)j(add)d(a)i(width)g
(subtyping)h(r)o(ule)e(for)h(pr)o(oducts)1551 4045 y
F4(T)1595 4057 y F1(1)1636 4045 y F5(\002)o F4(T)1744
4057 y F1(2)1807 4045 y FF(<)-17 b(:)24 b F4(T)1960 4057
y F1(1)2795 4046 y Gd(\()r(S)t(-)t(P)t F6(R)t(O)t(D)t
Gd(-)t(W)t F6(I)t(D)t(T)t(H)t Gd(\))450 4170 y(as)c(well?)26
b(Solution)c(on)g(page)e(293.)1838 b FZ(2)p eop
%%Page: 111 112
111 111 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)913
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)915
b Gd(1)-5 b(1)g(1)450 686 y Gj(12.2)119 b(Safety)450
925 y(12.3)g(V)-13 b(ariance)450 1114 y Gd(Suppose)27
b F4(T)o FY([)14 b(])27 b Gd(is)h(a)e(type)h(term)g(containing)h(some)g
(number)f(of)g(holes,)i(written)f(\223)p FY([)14 b(])p
Gd(\224)26 b(some-)450 1214 y(place)j(inside)h(it;)k(we)c(write)f
F4(T)p FY([)p F4(S)o FY(])h Gd(for)g(the)f(term)h(that)g(r)o(esults)f
(fr)o(om)g(\002lling)i(the)f(holes)g(in)g F4(T)450 1313
y Gd(with)22 b F4(S)o Gd(.)k(For)21 b(example,)e(if)i
F4(T)p FY([)14 b(])23 b(=)f F4({x:Top,y:)m FY([)14 b(])p
F4(})p FV(!)o F4(Top)p FV(!)o FY([)g(])p FV(!)p F4({})o
Gd(,)21 b(then)658 1479 y F4(T)o FY([)p F4({})o FY(])i(=)g
F4({x:Top,y:{}})p FV(!)-5 b F4(Top)p FV(!)o F4({})p FV(!)o
F4({})p Gb(:)575 1645 y Gd(W)d(e)29 b(say)g(that)g F4(T)p
FY([)14 b(])29 b Gd(is)h Ge(covariant)e Gd(in)i(the)f(position\(s\))h
(marked)f(by)g(the)h(holes)g(if,)h(when-)450 1745 y(ever)22
b F4(S)676 1757 y F1(1)716 1745 y F4(<:S)847 1757 y F1(2)888
1745 y Gd(,)h(we)g(have)f F4(T)p FY([)p F4(S)1373 1757
y F1(1)1414 1745 y FY(])27 b FF(<)-17 b(:)28 b F4(T)p
FY([)p F4(S)1687 1757 y F1(2)1728 1745 y FY(])p Gd(.)k(W)-8
b(e)23 b(say)g(that)g F4(T)o FY([)14 b(])23 b Gd(is)g
Ge(contravariant)e Gd(if,)i(whenever)450 1845 y F4(S)494
1857 y F1(1)534 1845 y F4(<:S)665 1857 y F1(2)705 1845
y Gd(,)35 b(we)c(have)h F4(T)o FY([)p F4(S)1220 1857
y F1(2)1260 1845 y FY(])44 b FF(<)-17 b(:)44 b F4(T)p
FY([)p F4(S)1566 1857 y F1(1)1607 1845 y FY(])p Gd(.)58
b(If)32 b F4(T)o FY([)14 b(])32 b Gd(is)g(neither)g(covariant)f(nor)h
(contravariant,)i(it)450 1944 y(is)d(said)f(to)i(be)e
Ge(invariant)p Gd(.)53 b(For)31 b(example,)h(we)f(say)g(that)f(the)h
(arr)o(ow)f(type)h(constr)o(uctor)h(is)450 2044 y(contravariant)25
b(in)h(its)g(\002rst)g(ar)o(gument)f(and)g(covariant)h(in)g(its)g
(second,)h(since)f FY([)14 b(])p FV(!)p F4(S)25 b Gd(is)h(con-)450
2144 y(travariant)19 b(while)j F4(S)p FV(!)o FY([)14
b(])21 b Gd(is)g(covariant.)450 2326 y Ge(12.3.1)d(Exercise:)39
b Gd(Which)20 b(of)f(the)h(following)g(types)f(ar)o(e)f(covariant)g(in)
i(the)f(position)i(marked)450 2426 y(by)g(the)g(hole\(s\)?)k(Which)d
(ar)o(e)d(contravariant?)25 b(Which)c(ar)o(e)f(invariant?)554
2592 y(1.)41 b F4(T)o FY([)14 b(])23 b(=)g([)14 b(])p
FV(!)p F4(Top)554 2758 y Gd(2.)41 b F4(T)o FY([)14 b(])23
b(=)g F4(Top)p FV(!)o FY([)14 b(])554 2924 y Gd(3.)41
b F4(T)o FY([)14 b(])23 b(=)g F4({x:Top,y:)l FY([)14
b(])p F4(})p FV(!)p F4({})p FV(!)o F4({})554 3090 y Gd(4.)41
b F4(T)o FY([)14 b(])23 b(=)g([)14 b(])p FV(!)p F4(Top)p
FV(!)o F4(Top)554 3256 y Gd(5.)41 b F4(T)o FY([)14 b(])23
b(=)g F4(\()p FY([)14 b(])p FV(!)p F4(Top\))p FV(!)n
F4(Top)554 3422 y Gd(6.)41 b F4(T)o FY([)14 b(])23 b(=)g([)14
b(])p FV(!)p F4({})p FV(!)o FY([)g(])554 3588 y Gd(7.)41
b F4(T)o FY([)14 b(])23 b(=)g([)14 b(])554 3754 y Gd(8.)41
b F4(T)o FY([)14 b(])23 b(=)g F4({})2436 b FZ(2)450 4040
y Gj(12.4)119 b(Coercion)30 b(Semantics)p eop
%%Page: 112 113
112 112 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(1)t(2)t(.)29 b(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)913
b Gd(1)-5 b(12)450 686 y Gj(12.5)119 b(Subtyping)30 b(and)g(References)
450 875 y Ge(12.5.1)18 b(Exercise)h([Quick)h(check]:)39
b Gd(In)19 b(a)f(system)i(with)f(r)o(efer)o(ence)e(cells,)i(would)g(it)
g(be)f(a)g(good)450 975 y(idea)i(to)h(add)f(a)g(r)o(ule)1666
1079 y F4(S)j FF(<)-17 b(:)24 b F4(T)p 1492 1122 568
4 v 1492 1202 a(Ref)42 b(S)23 b FF(<)-17 b(:)24 b F4(Ref)42
b(T)450 1325 y Gd(for)21 b(subtyping)g(between)g(r)o(efer)o(ence)d
(cell)j(types?)1357 b FZ(2)450 1611 y Gj(12.6)119 b(Primitive)29
b(Subtyping)450 1850 y(12.7)119 b(The)29 b(Bottom)i(T)-11
b(ype)p eop
%%Page: 113 114
113 113 bop 450 1306 a F3(Chapter)44 b(13)450 1721 y
Gk(Implementation)52 b(of)g(Subtyping)450 2177 y Gd(In)18
b(this)h(chapter)f(we)g(consider)g(the)g(algorithmic)h(pr)o(operties)e
(of)h(the)h(simply)g(typed)e(lambda-)450 2276 y(calculus)k(with)g(r)o
(ecor)o(ds)e(and)i(subtyping.)450 2562 y Gj(13.1)119
b(Algorithmic)30 b(Subtyping)450 2751 y Gd(The)e(thr)o(ee)f(r)o(ules)h
(for)g(r)o(ecor)o(d)e(subtyping)j(ar)o(e)e(often)h(combined)g(into)h
(one)f(mor)o(e)g(compact)450 2851 y(\(but)20 b(less)i(r)o(eadable\))c
(r)o(ule:)914 2971 y F0(f)p F4(l)984 2983 y F1(i)1025
2941 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1182 2971 y
F0(g)22 b F5(\022)h F0(f)p F4(k)1389 2983 y F1(j)1429
2941 y FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(m)1596 2971 y
F0(g)166 b F4(k)1833 2983 y F1(j)1885 2971 y FY(=)23
b F4(l)2015 2983 y F1(i)2067 2971 y Gd(implies)e F4(S)2402
2983 y F1(j)2454 2971 y FF(<)-17 b(:)24 b F4(T)2607 2983
y F1(i)p 914 3014 1725 4 v 1259 3094 a F4({k)1346 3106
y F1(j)1376 3094 y F4(:S)1463 3106 y F1(j)1502 3064 y
FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(m)1670 3094 y F4(})23
b FF(<)-17 b(:)24 b F4({l)1933 3106 y F1(i)1964 3094
y F4(:T)2051 3106 y F1(i)2093 3064 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2249 3094 y F4(})3149 3033 y Gd(\()r(S)t(-)t(R)t
F6(C)t(D)r Gd(\))450 3275 y Ge(13.1.1)18 b(Lemma:)40
b Gd(This)24 b(r)o(ule)g(can)g(be)f(derived)g(fr)o(om)i(S)t(-)t(R)t
F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s Gd(,)i(S)t(-)t(R)t
F6(E)t(C)t(O)t(R)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)t
Gd(,)450 3374 y(and)22 b(S)t(-)t(R)t F6(E)t(C)t(O)t(R)t(D)t
Gd(-)t(P)t F6(E)t(R)t(M)j Gd(\(using)c(r)o(e\003exivity)f(and)h
(transitivity\))f(and)h(vice)f(versa.)313 b FZ(2)450
3556 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355 b FZ(2)575
3738 y Gd(W)-8 b(e)24 b(now)g(observe)g(that)g(the)g(r)o(ules)g(of)g(r)
o(e\003exivity)f(and)h(transitivity)g(ar)o(e)e(inessential,)k(in)450
3838 y(the)21 b(following)h(sense:)450 4003 y Ge(13.1.2)c(Lemma:)554
4168 y Gd(1.)41 b F4(S)22 b FF(<)-17 b(:)24 b F4(S)d
Gd(can)f(be)g(derived)g(for)h(every)f(type)g F4(S)h Gd(without)h(using)
h(S)t(-)t(R)t F6(E)t(FL)r Gd(.)554 4334 y(2.)41 b(If)15
b F4(S)23 b FF(<)-17 b(:)24 b F4(T)15 b Gd(can)g(be)h(derived)e(at)i
(all,)g(then)g(it)g(can)g(be)f(derived)g(without)i(using)i(S)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(.)c FZ(2)450 4516 y F7(Pr)o(oof:)66
b Gd(The)22 b(\002rst)h(part)e(goes)h(by)g(induction)h(on)g(the)f(str)o
(uctur)o(e)f(of)h F4(S)p Gd(,)g(the)g(second)g(by)g(induc-)450
4615 y(tion)g(on)f(the)g(given)g(subtyping)h(derivation.)1506
b FZ(2)450 4797 y Ge(13.1.3)18 b(Exercise)h([Quick)h(check]:)39
b Gd(If)16 b(we)h(add)e(the)i(base)f(type)g F4(Nat)f
Gd(to)i(the)g(type)f(system,)i(how)450 4897 y(do)j(these)g(pr)o
(operties)f(change?)1922 b FZ(2)1890 5169 y Gd(1)-5 b(13)p
eop
%%Page: 114 115
114 114 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(14)450 683 y Ge(13.1.4)18 b(De\002nition:)40
b Gd(The)26 b Ge(algorithmic)f(subtyping)h Gd(r)o(elation)g(is)i(the)f
(least)f(r)o(elation)h(closed)450 783 y(under)20 b(the)h(following)i(r)
o(ules:)1579 906 y F5(`)1598 887 y Fx(I)1666 906 y F4(S)g
FF(<)-17 b(:)24 b F4(Top)3092 907 y Gd(\()r(S)t(A)t(-)t(T)s
F6(O)t(P)q Gd(\))1295 1064 y F5(`)1314 1045 y Fx(I)1381
1064 y F4(T)1425 1076 y F1(1)1488 1064 y FF(<)-17 b(:)24
b F4(S)1641 1076 y F1(1)1870 1064 y F5(`)1889 1045 y
Fx(I)1957 1064 y F4(S)2001 1076 y F1(2)2064 1064 y FF(<)-17
b(:)24 b F4(T)2217 1076 y F1(2)p 1295 1107 963 4 v 1415
1187 a F5(`)1434 1167 y Fx(I)1502 1187 y F4(S)1546 1199
y F1(1)1586 1187 y FV(!)p F4(S)1713 1199 y F1(2)1776
1187 y FF(<)-17 b(:)24 b F4(T)1929 1199 y F1(1)1969 1187
y FV(!)p F4(T)2096 1199 y F1(2)2954 1126 y Gd(\()r(S)t(A)t(-)t(A)t
F6(R)t(R)t(O)t(W)r Gd(\))845 1345 y F0(f)p F4(l)915 1357
y F1(i)957 1315 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1113
1345 y F0(g)23 b F5(\022)f F0(f)p F4(k)1321 1357 y F1(j)1360
1315 y FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(m)1528 1345 y
F0(g)165 b Gd(if)21 b F4(k)1837 1357 y F1(j)1889 1345
y FY(=)i F4(l)2019 1357 y F1(i)2050 1345 y Gd(,)d(then)86
b F5(`)2359 1325 y Fx(I)2427 1345 y F4(S)2470 1357 y
F1(j)2523 1345 y FF(<)-17 b(:)24 b F4(T)2675 1357 y F1(i)p
845 1388 1862 4 v 1216 1467 a F5(`)1235 1448 y Fx(I)1302
1467 y F4({k)1389 1479 y F1(j)1419 1467 y F4(:S)1506
1479 y F1(j)1546 1437 y FB(j)p Fz(2)o FB(1)-10 b(:)g(:)g(m)1713
1467 y F4(})23 b FF(<)-17 b(:)24 b F4({l)1976 1479 y
F1(i)2007 1467 y F4(:T)2095 1479 y F1(i)2136 1437 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2293 1467 y F4(})3080 1407
y Gd(\()r(S)t(A)t(-)t(R)t F6(C)t(D)r Gd(\))3394 1564
y FZ(2)450 1747 y Ge(13.1.5)18 b(Proposition)i([Soundness)e(and)i
(completeness)e(of)j(algorithmic)e(subtyping]:)575 1847
y F4(S)j FF(<)-17 b(:)24 b F4(T)d Gd(if)o(f)e F5(`)932
1827 y Fx(I)1000 1847 y F4(S)j FF(<)-17 b(:)24 b F4(T)p
Gd(.)2154 b FZ(2)450 2029 y F7(Pr)o(oof:)66 b Gd(By)21
b(induction)h(on)f(derivations,)g(using)g(the)g(two)h(pr)o(evious)e
(lemmas.)438 b FZ(2)575 2212 y Gd(This,)27 b(in)g(turn,)h(leads)e(dir)o
(ectly)f(to)i(an)f(algorithm)h(for)f(checking)h(the)f(algorithmic)h
(sub-)450 2311 y(type)16 b(r)o(elation)f(\(and)g(hence)h(also)g(the)g
(declarative)e(subtype)i(r)o(elation,)g(by)g(Pr)o(oposition)h
(13.1.5\).)450 2411 y(The)k(r)o(ealization)e(of)i(this)h(algorithm)f
(in)g(ML)f(appears)g(in)h(Section)g(13.3.)450 2697 y
Gj(13.2)119 b(Minimal)29 b(T)-11 b(yping)450 2886 y Gd(By)24
b(intr)o(oducing)h(the)f(r)o(ule)g(of)h(subsumption)g(into)g(the)g
(typing)g(r)o(elation,)f(we)g(have)g(lost)h(the)450 2986
y(useful)h Ge(syntax-directedness)20 b Gd(pr)o(operty)-9
b(,)26 b(which)h(in)f(the)g(simply)h(typed)e(lambda-calculus)450
3085 y(allows)19 b(a)f(typechecker)g(to)g(be)h(implemented)f(simply)h
(by)g(\223r)o(eading)e(the)h(r)o(ules)h(fr)o(om)f(bottom)450
3185 y(to)30 b(top.\224)51 b(W)-5 b(ithout)31 b(this)f(pr)o(operty)-9
b(,)31 b(how)f(can)f(we)h(now)g(check)g(whether)f Gb(\000)39
b F5(`)g F4(t)g FF(:)h F4(T)29 b Gd(is)g(a)450 3285 y(derivable)19
b(statement?)575 3384 y(W)-8 b(e)20 b(do)h(it)g(in)g(two)h(steps:)554
3550 y(1.)41 b(Find)25 b(another)h(set)f(of)h(syntax)f(r)o(ules)h(that)
f F7(ar)o(e)g Gd(syntax)h(dir)o(ected,)e(de\002ning)j(a)d(r)o(elation)
658 3650 y Gb(\000)e F5(`)744 3630 y Fx(I)812 3650 y
F4(t)h FF(:)g F4(T)o Gd(.)j(This)21 b(is)g(called)f(the)h
Ge(algorithmic)e(typing)h(relation)p Gd(.)554 3816 y(2.)41
b(Show)18 b(that,)g(although)h(they)g(ar)o(e)d(de\002ned)i(dif)o(fer)o
(ently)-9 b(,)16 b(the)i(or)o(dinary)g(typing)g(r)o(elation)658
3915 y Gb(\000)25 b F5(`)g F4(t)f FF(:)i F4(T)21 b Gd(and)h(the)g
(algorithmic)h(typing)f(r)o(elation)g Gb(\000)j F5(`)2416
3896 y Fx(I)2485 3915 y F4(t)g FF(:)h F4(T)21 b Gd(give)h(rise)g(to)g
(the)g(same)658 4015 y(set)28 b(of)g(typable)g(terms.)47
b(Inter)o(estingly)-9 b(,)30 b(though,)h(they)e(will)g
F7(not)f Gd(assign)g(exactly)g(the)658 4115 y(same)20
b(types)h(to)g(those)h(terms.)575 4281 y(In)i(or)o(der)f(to)h(\002nd)h
(an)f(algorithmic)h(pr)o(esentation)e(of)h(the)h(typing)g(r)o(elation,)
f(we)g(need)g(to)450 4380 y(think)k(car)o(efully)d(about)i(the)g(str)o
(uctur)o(e)g(of)f(typing)i(derivations)f(to)g(see)g(wher)o(e)f(the)h(r)
o(ule)g(of)450 4480 y(subsumption)22 b(is)f(r)o(eally)f(needed,)g(and)g
(wher)o(e)g(we)h(could)g(just)g(as)g(well)g(do)g(without)h(it.)p
eop
%%Page: 115 116
115 115 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(15)575 683 y(For)21 b(example,)e(consider)i(the)g
(following)h(derivation:)1530 857 y(.)1530 890 y(.)1530
924 y(.)p 1289 977 504 5 v 1289 1067 a Gb(\000)6 b(;)17
b F4(x)o(:S)23 b F5(`)f F4(t)h FF(:)g F4(T)2156 857 y
Gd(.)2156 890 y(.)2156 924 y(.)p 2041 977 251 5 v 2041
1067 a F4(T)g FF(<)-17 b(:)24 b F4(T)2268 1032 y FX(0)p
1289 1119 1003 5 v 2316 1138 a FY(\()r Gd(T)o(-)t(S)t
F6(U)t(B)r FY(\))1523 1210 y Gb(\000)6 b(;)17 b F4(x:)o(S)23
b F5(`)g F4(t)f FF(:)i F4(T)2034 1175 y FX(0)p 1439 1262
704 5 v 2166 1281 a FY(\()r Gd(T)o(-)t(A)t F6(B)t(S)r
FY(\))1439 1353 y Gb(\000)e F5(`)h Gb(\025)p F4(x:S.t)e
FF(:)j F4(S)p FV(!)o F4(T)2118 1318 y FX(0)450 1504 y
Gd(Any)d(such)g(derivation)g(can)f(be)g(r)o(earranged)f(like)i(this:)
956 1679 y(.)956 1712 y(.)956 1745 y(.)p 715 1798 504
5 v 715 1888 a Gb(\000)5 b(;)17 b F4(x:S)22 b F5(`)h
F4(t)g FF(:)g F4(T)p 630 1941 673 5 v 1327 1960 a FY(\()r
Gd(T)o(-)t(A)t F6(B)t(S)r FY(\))630 2031 y Gb(\000)g
F5(`)g Gb(\025)p F4(x:S.t)e FF(:)i F4(S)p FV(!)p F4(T)p
1875 1798 220 5 v 2120 1817 a FY(\()r Gd(S)t(-)t(R)t
F6(E)t(FL)q FY(\))1875 1888 y F4(S)g FF(<)-17 b(:)24
b F4(S)2813 1679 y Gd(.)2813 1712 y(.)2813 1745 y(.)p
2698 1798 251 5 v 2698 1888 a F4(T)f FF(<)-17 b(:)24
b F4(T)2925 1854 y FX(0)p 1875 1941 1074 5 v 2973 1960
a FY(\()r Gd(S)t(-)t(A)t F6(B)t(S)r FY(\))2160 2031 y
F4(S)p FV(!)p F4(T)f FF(<)-17 b(:)24 b F4(S)p FV(!)o
F4(T)2640 1997 y FX(0)p 630 2084 2034 5 v 2689 2103 a
FY(\()r Gd(T)o(-)t(S)t F6(U)t(B)q FY(\))1295 2174 y Gb(\000)f
F5(`)g Gb(\025)p F4(x:S.t)e FF(:)i F4(S)p FV(!)p F4(T)1975
2140 y FX(0)450 2326 y Gd(So)j(we)h(can)f(get)g(away)g(with)h(not)g
(allowing)g(instances)g(of)i(T)o(-)t(S)t F6(U)t(B)e Gd(as)f(the)h
(\002nal)g(r)o(ule)f(in)h(the)450 2426 y(right-hand)21
b(pr)o(emise)f(of)h(an)f(instance)h(of)i(T)o(-)t(A)t
F6(B)t(S)r Gd(.)575 2525 y(Similarly)-9 b(,)20 b(any)h(derivation)f(of)
h(the)g(form)831 2842 y(.)831 2876 y(.)831 2909 y(.)p
555 2962 575 5 v 555 3052 a Gb(\000)h F5(`)h F4(t)740
3064 y F1(1)803 3052 y FF(:)h F4(S)921 3064 y F1(1)962
3052 y FV(!)p F4(S)1088 3064 y F1(2)1518 2699 y Gd(.)1518
2733 y(.)1518 2766 y(.)p 1378 2819 301 5 v 1378 2909
a F4(T)1422 2921 y F1(1)1485 2909 y FF(<)-17 b(:)24 b
F4(S)1638 2921 y F1(1)2067 2699 y Gd(.)2067 2733 y(.)2067
2766 y(.)p 1927 2819 V 1927 2909 a F4(S)1971 2921 y F1(2)2034
2909 y FF(<)-17 b(:)24 b F4(T)2187 2921 y F1(2)p 1378
2962 850 5 v 2252 2980 a FY(\()r Gd(S)t(-)t(A)t F6(R)t(R)t(O)t(W)t
FY(\))1486 3052 y F4(S)1529 3064 y F1(1)1570 3052 y FV(!)p
F4(S)1696 3064 y F1(2)1760 3052 y FF(<)-17 b(:)24 b F4(T)1912
3064 y F1(1)1953 3052 y FV(!)p F4(T)2080 3064 y F1(2)p
555 3105 1566 5 v 2145 3123 a FY(\()r Gd(T)o(-)t(S)t
F6(U)t(B)r FY(\))1050 3195 y Gb(\000)f F5(`)g F4(t)1235
3207 y F1(1)1299 3195 y FF(:)g F4(T)1417 3207 y F1(1)1457
3195 y FV(!)p F4(T)1584 3207 y F1(2)3131 2985 y Gd(.)3131
3019 y(.)3131 3052 y(.)p 2938 3105 408 5 v 2938 3195
a Gb(\000)g F5(`)g F4(t)3123 3207 y F1(2)3187 3195 y
FF(:)g F4(T)3305 3207 y F1(1)p 1050 3248 2296 5 v 1930
3338 a Gb(\000)g F5(`)g F4(t)2116 3350 y F1(1)2200 3338
y F4(t)2243 3350 y F1(2)2307 3338 y FF(:)g F4(T)2425
3350 y F1(2)450 3502 y Gd(can)d(be)h(r)o(eplaced)e(by)h(one)i(of)e(the)
h(form:)742 3819 y(.)742 3852 y(.)742 3886 y(.)p 465
3938 575 5 v 465 4029 a Gb(\000)i F5(`)g F4(t)651 4041
y F1(1)714 4029 y FF(:)h F4(S)832 4041 y F1(1)873 4029
y FV(!)p F4(S)999 4041 y F1(2)1482 3676 y Gd(.)1482 3709
y(.)1482 3743 y(.)p 1289 3795 408 5 v 1289 3886 a Gb(\000)f
F5(`)g F4(t)1474 3898 y F1(2)1538 3886 y FF(:)g F4(T)1656
3898 y F1(1)2085 3676 y Gd(.)2085 3709 y(.)2085 3743
y(.)p 1945 3795 301 5 v 1945 3886 a F4(T)1989 3898 y
F1(1)2052 3886 y FF(<)-17 b(:)24 b F4(S)2205 3898 y F1(1)p
1289 3938 957 5 v 2270 3957 a FY(\()r Gd(T)o(-)t(S)t
F6(U)t(B)r FY(\))1564 4029 y Gb(\000)e F5(`)h F4(t)1749
4041 y F1(2)1812 4029 y FF(:)h F4(S)1930 4041 y F1(1)p
465 4081 1506 5 v 1996 4100 a FY(\()r Gd(T)o(-)t(A)t
F6(P)t(P)r FY(\))951 4172 y Gb(\000)f F5(`)f F4(t)1136
4184 y F1(1)1220 4172 y F4(t)1264 4184 y F1(2)1327 4172
y FF(:)h F4(S)1445 4184 y F1(2)2954 3962 y Gd(.)2954
3995 y(.)2954 4029 y(.)p 2814 4081 301 5 v 2814 4172
a F4(S)2858 4184 y F1(2)2922 4172 y FF(<)-17 b(:)24 b
F4(T)3074 4184 y F1(2)p 951 4224 2164 5 v 3140 4243 a
FY(\()r Gd(T)o(-)t(S)t F6(U)t(B)q FY(\))1765 4315 y Gb(\000)f
F5(`)g F4(t)1950 4327 y F1(1)2035 4315 y F4(t)2078 4327
y F1(2)2142 4315 y FF(:)g F4(T)2260 4327 y F1(2)450 4479
y Gd(That)e(is,)h(we)g(can)f(take)g(any)g(derivation)g(wher)o(e)g
(subsumption)i(is)f(used)f(as)h(the)f(\002nal)h(r)o(ule)g(in)450
4578 y(the)j(left-hand)e(pr)o(emise)h(of)g(an)h(instance)f(of)j(T)o(-)t
(A)t F6(P)t(P)f Gd(and)e(r)o(eplace)f(it)i(by)f(a)g(derivation)g(with)
450 4678 y(one)h(instance)g(of)f(subsumption)i(appearing)e(at)g(the)g
(end)h(of)f(the)h(right-hand)g(pr)o(emise)e(and)450 4778
y(another)e(instance)g(of)g(subsumption)h(appearing)e(at)g(the)h(end)f
(of)h(the)g(whole)h(derivation.)p eop
%%Page: 116 117
116 116 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(16)575 683 y(Finally)c(,)29 b(adjacent)e(uses)h(of)g
(subsumption)h(can)f(be)f(coalesced,)i(in)f(the)g(sense)g(that)g(any)
450 783 y(derivation)20 b(of)h(the)g(form)1151 935 y(.)1151
968 y(.)1151 1001 y(.)p 999 1054 327 5 v 999 1144 a Gb(\000)i
F5(`)f F4(t)h FF(:)g F4(S)1673 935 y Gd(.)1673 968 y(.)1673
1001 y(.)p 1574 1054 220 5 v 1574 1144 a F4(S)g FF(<)-17
b(:)24 b F4(U)p 999 1197 795 5 v 1818 1216 a FY(\()r
Gd(T)o(-)t(S)t F6(U)t(B)r FY(\))1233 1287 y Gb(\000)f
F5(`)f F4(t)h FF(:)g F4(U)2461 1078 y Gd(.)2461 1111
y(.)2461 1144 y(.)p 2362 1197 220 5 v 2362 1287 a F4(U)g
FF(<)-17 b(:)24 b F4(T)p 1233 1340 1349 5 v 2606 1359
a FY(\()r Gd(T)o(-)t(S)t F6(U)t(B)r FY(\))1744 1430 y
Gb(\000)f F5(`)g F4(t)f FF(:)i F4(T)450 1582 y Gd(can)c(be)h(r)o
(ewritten:)1258 1877 y(.)1258 1910 y(.)1258 1944 y(.)p
1105 1996 327 5 v 1105 2087 a Gb(\000)i F5(`)g F4(t)g
FF(:)g F4(S)1780 1734 y Gd(.)1780 1767 y(.)1780 1801
y(.)p 1681 1853 220 5 v 1681 1944 a F4(S)f FF(<)-17 b(:)24
b F4(U)2248 1734 y Gd(.)2248 1767 y(.)2248 1801 y(.)p
2149 1853 V 2149 1944 a F4(U)f FF(<)-17 b(:)24 b F4(T)p
1681 1996 688 5 v 2393 2015 a FY(\()r Gd(S)t(-)t(T)t
F6(R)t(A)t(N)t(S)r FY(\))1915 2087 y F4(S)e FF(<)-17
b(:)24 b F4(T)p 1105 2139 1029 5 v 2159 2158 a FY(\()r
Gd(T)o(-)t(S)t F6(U)t(B)r FY(\))1457 2230 y Gb(\000)e
F5(`)h F4(t)g FF(:)g F4(T)450 2381 y Ge(13.2.1)18 b(Exercise)h
([Recommended]:)38 b Gd(Show)30 b(that)f(a)g(similar)h(r)o
(earrangement)e(can)h(be)g(per)o(-)450 2481 y(formed)20
b(on)i(derivations)e(in)i(which)h(T)o(-)t(S)t F6(U)t(B)g
Gd(is)e(used)f(immediately)h(befor)o(e)g(T)o(-)t(P)t
F6(R)t(O)t(J)t Gd(.)210 b FZ(2)575 2664 y Gd(A)30 b(motivating)i
(intuition)h(behind)e(all)g(of)g(these)h(transformations)f(is)h(that)f
(nothing)i(is)450 2763 y(harmed)16 b(by)h(moving)h(most)f(uses)g(of)g
(subsumption)h(as)f(late)f(as)g(possible)i(in)f(a)f(typing)h(deriva-)
450 2863 y(tion,)27 b(so)f(that)f(each)g(subterm)h(is)g(given)f(the)h
(smallest)g(possible)g(\(or)f Ge(minimal)p Gd(\))e(type)i(at)g(the)450
2962 y(outset)20 b(and)f(this)i(small)f(type)f(is)h(maintained)g(until)
g(a)f(point)i(is)f(r)o(eached)e(\(in)h(the)h(application)450
3062 y(r)o(ule\))h(wher)o(e)f(a)g(lar)o(ger)f(type)i(is)g(needed.)k
(This)c(motivates)g(the)g(following)h(de\002nition:)450
3245 y Ge(13.2.2)c(De\002nition:)40 b Gd(The)23 b Ge(algorithmic)f
(typing)h(relation)f Gd(is)i(the)g(least)g(r)o(elation)f(closed)h(un-)
450 3344 y(der)c(the)h(following)h(r)o(ules:)1637 3471
y F4(x:T)g F5(2)i Gb(\000)p 1606 3514 339 4 v 1606 3593
a(\000)f F5(`)1693 3574 y Fx(I)1761 3593 y F4(x)f FF(:)i
F4(T)3085 3533 y Gd(\()r(T)n(A)t(-)t(V)l F6(A)t(R)q Gd(\))1457
3751 y Gb(\000)6 b(;)17 b F4(x:T)1679 3763 y F1(1)1743
3751 y F5(`)1762 3732 y Fx(I)1829 3751 y F4(t)1873 3763
y F1(2)1936 3751 y FF(:)23 b F4(T)2054 3763 y F1(2)p
1352 3795 847 4 v 1352 3874 a Gb(\000)g F5(`)1439 3855
y Fx(I)1507 3874 y Gb(\025)p F4(x:T)1683 3886 y F1(1)1723
3874 y F4(.t)1810 3886 y F1(2)1874 3874 y FF(:)g F4(T)1992
3886 y F1(1)2032 3874 y FV(!)p F4(T)2159 3886 y F1(2)3093
3814 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p Gd(\))637 4032
y Gb(\000)g F5(`)724 4013 y Fx(I)791 4032 y F4(t)835
4044 y F1(1)898 4032 y FF(:)h F4(T)1016 4044 y F1(1)1223
4032 y F4(T)1266 4044 y F1(1)1330 4032 y FY(=)f F4(T)1459
4044 y F1(11)1536 4032 y FV(!)p F4(T)1663 4044 y F1(12)1906
4032 y Gb(\000)g F5(`)1993 4013 y Fx(I)2060 4032 y F4(t)2104
4044 y F1(2)2167 4032 y FF(:)h F4(T)2285 4044 y F1(2)2492
4032 y F5(`)2511 4013 y Fx(I)2578 4032 y F4(T)2622 4044
y F1(2)2685 4032 y FF(<)-17 b(:)24 b F4(T)2838 4044 y
F1(11)p 637 4075 2278 4 v 1484 4155 a Gb(\000)f F5(`)1571
4135 y Fx(I)1638 4155 y F4(t)1682 4167 y F1(1)1766 4155
y F4(t)1810 4167 y F1(2)1873 4155 y FF(:)g F4(T)1991
4167 y F1(12)3088 4094 y Gd(\()r(T)n(A)t(-)t(A)t F6(P)t(P)q
Gd(\))1362 4312 y(for)d(each)h Gb(i)82 b(\000)23 b F5(`)1875
4293 y Fx(I)1943 4312 y F4(t)1986 4324 y F1(i)2041 4312
y FF(:)g F4(T)2159 4324 y F1(i)p 987 4356 1578 4 v 987
4435 a Gb(\000)g F5(`)1074 4416 y Fx(I)1141 4435 y F4({l)1228
4447 y F1(1)1269 4435 y F4(=t)1356 4447 y F1(1)1397 4435
y F4(...l)1571 4447 y F1(n)1622 4435 y F4(=t)1709 4447
y F1(n)1761 4435 y F4(})f FF(:)i F4({l)1989 4447 y F1(1)2029
4435 y F4(:T)2117 4447 y F1(1)2157 4435 y F4(...l)2331
4447 y F1(n)2383 4435 y F4(:T)2470 4447 y F1(n)2521 4435
y F4(})3079 4375 y Gd(\()r(T)n(A)t(-)t(R)t F6(C)t(D)r
Gd(\))1297 4593 y Gb(\000)f F5(`)1384 4574 y Fx(I)1451
4593 y F4(t)g FF(:)g F4({l)1679 4605 y F1(1)1720 4593
y F4(:T)1807 4605 y F1(1)1847 4593 y F4(...l)2022 4605
y F1(n)2073 4593 y F4(:T)2160 4605 y F1(n)2212 4593 y
F4(})p 1297 4636 959 4 v 1532 4716 a Gb(\000)f F5(`)1618
4697 y Fx(I)1686 4716 y F4(t.l)1817 4728 y F1(i)1871
4716 y FF(:)h F4(T)1989 4728 y F1(i)3060 4655 y Gd(\()r(T)n(A)t(-)t(P)t
F6(R)t(O)t(J)r Gd(\))3394 4813 y FZ(2)p eop
%%Page: 117 118
117 117 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(17)450 683 y Ge(13.2.3)18 b(Exercise)h([Recommended]:)38
b Gd(Show)-8 b(,)27 b(by)f(example,)g(that)f(minimal)i(types)e(of)h
(terms)450 783 y(in)h(this)g(calculus)f(can)h F7(decr)o(ease)f
Gd(during)h(evaluation.)42 b(Give)27 b(a)f(term)g F4(t)g
Gd(such)h(that)g F4(t)33 b F5(\000)-14 b FV(!)3335 753
y FX(\003)3406 783 y F4(r)450 882 y Gd(and)23 b F4(R)k
FF(<)-17 b(:)28 b F4(T)23 b Gd(but)g F4(T)k F5(6)p FF(<)-17
b(:)29 b F4(R)o Gd(,)24 b(wher)o(e)e F4(R)h Gd(is)h(the)f(minimal)h
(type)f(of)g F4(r)g Gd(and)f F4(T)h Gd(is)h(the)f(minimal)h(type)450
982 y(of)d F4(t)o Gd(.)2786 b FZ(2)575 1165 y Gd(W)-8
b(e)20 b(now)i(want)f(to)g(see)f(formally)h(that)g(the)g(algorithmic)g
(typing)h(r)o(ules)f(de\002ne)f(the)h(same)450 1264 y(r)o(elation)f(as)
h(the)g(or)o(dinary)f(r)o(ules.)26 b(W)-8 b(e)21 b(do)f(this)i(in)f
(two)g(steps:)658 1430 y Ge(Soundness:)39 b Gd(Every)18
b(typing)i(statement)f(that)g(can)g(be)f(pr)o(oved)g(by)h(an)g
(algorith-)840 1530 y(mic)i(derivation)g(can)f(also)h(be)g(pr)o(oved)e
(by)i(an)g(or)o(dinary)f(derivation.)658 1663 y Ge(Completeness:)38
b Gd(Every)20 b(typing)i(statement)f(that)g(can)g(be)f(pr)o(oved)g(by)h
(an)g(or)o(di-)840 1762 y(nary)16 b(derivation)h(can)f
F7(almost)f Gd(be)i(pr)o(oved)e(by)h(an)h(algorithmic)g(derivation.)840
1862 y(\(In)k(fact,)e(the)i(algorithmic)h(derivation)e(may)h(yield)g(a)
f(better)g(type.\))450 2045 y Ge(13.2.4)e(Theorem)i([Soundness)f(of)i
(the)f(algorithmic)f(typing)g(relation]:)39 b Gd(If)16
b Gb(\000)23 b F5(`)3016 2025 y Fx(I)3083 2045 y F4(t)g
FF(:)g F4(T)p Gd(,)16 b(then)450 2144 y Gb(\000)23 b
F5(`)g F4(t)f FF(:)i F4(T)o Gd(.)2597 b FZ(2)450 2327
y F7(Pr)o(oof:)66 b Gd(By)29 b(straightforwar)o(d)e(induction)i(on)g
(algorithmic)h(typing)f(derivations.)48 b(The)29 b(de-)450
2426 y(tails)21 b(ar)o(e)e(left)i(as)f(an)h(exer)o(cise.)1978
b FZ(2)575 2609 y Gd(The)20 b(or)o(dinary)f(typing)i(r)o(elation)e(can)
h(be)g(used)g(to)g(assign)h(many)f(types)g(to)h(a)e(term,)h(while)450
2709 y(the)30 b(algorithmic)h(typing)g(r)o(elation)f(assigns)h(at)e
(most)i(one)g(\(this)f(is)h(easy)f(to)g(check\).)53 b(So)30
b(a)450 2808 y(straightforwar)o(d)24 b(converse)i(of)g(Theor)o(em)f
(13.2.4)e(is)j(clearly)f(not)h(going)h(to)f(hold.)41
b(Instead,)450 2908 y(we)28 b(can)f(show)i(that)f(if)g(a)f(term)h
F4(t)f Gd(has)h(a)f(type)h F4(T)g Gd(under)f(the)h(or)o(dinary)f
(typing)i(r)o(ules,)h(then)450 3008 y(it)j(has)h(a)e
F7(better)i Gd(type)f F4(S)g Gd(under)g(the)g(algorithmic)h(r)o(ules,)i
(in)e(the)f(sense)h(that)f F4(S)45 b FF(<)-17 b(:)47
b F4(T)p Gd(.)63 b(In)450 3107 y(other)24 b(wor)o(ds,)g(the)g
(algorithmic)h(r)o(ules)f(assign)h(each)e(typeable)g(term)h(its)g
(smallest)g(possible)450 3207 y(\(\223minimal\224\))c(type.)450
3390 y Ge(13.2.5)e(Theorem)i([Minimal)f(T)-7 b(yping]:)40
b Gd(If)20 b Gb(\000)j F5(`)g F4(t)g FF(:)g F4(T)p Gd(,)d(then)h
Gb(\000)i F5(`)2495 3370 y Fx(I)2563 3390 y F4(t)f FF(:)i
F4(S)c Gd(for)h(some)g F4(S)i FF(<)-17 b(:)24 b F4(T)o
Gd(.)45 b FZ(2)450 3572 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise)20
b(\(r)o(ecommended\).)1749 b FZ(2)450 3755 y Ge(13.2.6)18
b(Exercise:)39 b Gd(If)20 b(we)h(dr)o(opped)e(the)h(function)h
(subtyping)g(r)o(ule)i(S)t(-)t(A)t F6(R)t(R)t(O)t(W)g
Gd(but)e(kept)f(the)450 3854 y(r)o(est)e(of)g(the)h(subtyping)g(and)f
(typing)h(r)o(ules)g(the)f(same,)g(would)h(we)g(lose)f(the)h(minimal)g
(typing)450 3954 y(pr)o(operty?)41 b(If)26 b(not,)i(pr)o(ove)e(it.)42
b(If)26 b(so,)i(give)e(an)g(example)f(of)i(a)e(term)i(that)f(would)h
(have)e(two)450 4054 y(incomparable)20 b(types.)2201
b FZ(2)450 4236 y Ge(13.2.7)18 b(Exercise)h([Recommended]:)38
b Gd(Add)33 b(numbers)h(and)g(iteration)g(to)g(the)g(algorithmic)450
4336 y(typing)23 b(r)o(elation.)31 b(Pr)o(ove)22 b(that)g(your)h
(algorithmic)h(r)o(ules)e(ar)o(e)g(sound)h(and)f(complete)h(for)f(the)
450 4436 y(declarative)d(system.)2241 b FZ(2)450 4618
y Ge(13.2.8)18 b(Exercise)h([Recommended]:)38 b Gd(Show)31
b(how)h(to)g(extend)e(the)h(pr)o(oof)g(of)g(pr)o(eservation)450
4718 y(for)21 b(the)f(simply)i(typed)e(lambda-calculus)g(\(7.4.10\))d
(to)22 b(the)e(system)i(with)f(subtyping.)177 b FZ(2)p
eop
%%Page: 118 119
118 118 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(18)450 686 y Gj(13.3)119 b(Concrete)29 b(Realization)450
875 y Gd(Recall)21 b(the)g(datatype)e(de\002nitions)j(for)f(types)f
(and)h(terms:)616 1033 y FT(type)40 b(ty)g(=)773 1124
y(TyArr)g(of)g(ty)g(*)f(ty)694 1215 y(|)h(TyTop)694 1307
y(|)g(TyRecord)h(of)f(\(string)h(*)e(ty\))h(list)616
1489 y(type)g(term)g(=)773 1581 y(TmVar)g(of)g(info)g(*)g(int)g(*)f
(int)694 1672 y(|)h(TmAbs)g(of)g(info)g(*)g(string)g(*)g(ty)f(*)h(term)
694 1763 y(|)g(TmApp)g(of)g(info)g(*)g(term)g(*)f(term)694
1855 y(|)h(TmRecord)h(of)f(info)g(*)f(\(string)i(*)f(term\))g(list)694
1946 y(|)g(TmProj)h(of)e(info)h(*)g(term)g(*)f(string)450
2112 y Gd(The)20 b(algorithmic)i(subtype)e(r)o(elation)g(can)g(be)g
(translated)g(dir)o(ectly)f(into)j(OCaml)e(as)g(follows:)616
2286 y FT(let)40 b(rec)g(subtype)h(tyS)f(tyT)g(=)734
2378 y(tyeqv)g(tyS)g(tyT)g(||)734 2469 y(match)g(\(tyS,tyT\))h(with)812
2560 y(\(TyArr\(tyS1,tyS2\),TyArr\(tyT1)q(,tyT2)q(\)\))k
FO(!)891 2652 y FT(\(subtype)c(tyT1)f(tyS1\))g(&&)g(\(subtype)h(tyS2)f
(tyT2\))734 2743 y(|)f(\(_,TyTop\))i FO(!)891 2834 y
FT(true)734 2926 y(|)e(\(TyRecord\(fS\),)k(TyRecord\(fT\)\))f
FO(!)891 3017 y FT(List.for_all)969 3108 y(\(fun)e(\(li,tyTi\))i
FO(!)1087 3200 y FT(try)e(let)g(tySi)g(=)f(List.assoc)j(li)d(fS)h(in)
1244 3291 y(subtype)h(tySi)f(tyTi)1087 3382 y(with)g(Not_found)h
FO(!)e FT(false\))969 3474 y(fT)734 3565 y(|)g(_)h FO(!)891
3656 y FT(false)450 3839 y Gd(The)26 b(only)h(complication)h(her)o(e)d
(arises)h(fr)o(om)g(the)g(subtyping)h(r)o(ule)g(for)f(r)o(ecor)o(ds,)g
(which)h(in-)450 3939 y(volves)e(a)g(certain)f(amount)i(of)f(fussing)h
(ar)o(ound)e(with)i(list)g(operations.)38 b F4(List.forall)21
b Gd(ap-)450 4038 y(plies)h(a)f(pr)o(edicate)e(\(its)j(second)g(ar)o
(gument\))e(to)i(every)f(member)h(of)f(a)g(list)h(and)g(r)o(eturns)f
F4(true)450 4138 y Gd(if)o(f)k(all)h(these)g(applications)f(r)o(eturn)h
F4(true)n Gd(.)41 b F4(List.assoc)e(li)k(fS)25 b Gd(looks)i(up)f(the)g
(label)f F4(li)h Gd(in)450 4237 y(the)g(list)h(of)f(\002elds)g
F4(fS)f Gd(and)h(r)o(eturns)g(the)g(associated)f(\002eld)h(type)g
F4(tySi)o Gd(;)i(if)e F4(li)f Gd(is)i(not)f(among)450
4337 y(the)21 b(labels)f(in)i F4(fS)o Gd(,)e(it)h(raises)g(the)g
(exception)f F4(Not_)o(found)n Gd(.)575 4437 y(The)g(algorithm)i(for)e
(typechecking)i(is)f(mor)o(e)f(straightforwar)o(d.)616
4611 y FT(let)40 b(rec)g(typeof)g(ctx)g(t)g(=)694 4702
y(match)h(t)e(with)773 4794 y(TmVar\(fi,i,_\))j FO(!)851
4885 y FT(gettype)f(fi)f(ctx)g(i)p eop
%%Page: 119 120
119 119 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)500
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)503
b Gd(1)-5 b(19)694 683 y FT(|)40 b(TmAbs\(fi,x,tyS,t1\))j
FO(!)851 774 y FT(let)d(ctx')g(=)g(addbinding)h(ctx)f(x)g
(\(VarBind\(tyS\)\))i(in)851 866 y(let)e(tyT)g(=)g(typeof)g(ctx')g(t1)g
(in)851 957 y(TyArr\(tyS,)i(tyT\))694 1048 y(|)e(TmApp\(fi,t1,t2\))j
FO(!)851 1140 y FT(let)d(tyT1)g(=)g(typeof)h(ctx)e(t1)h(in)851
1231 y(let)g(tyT2)g(=)g(typeof)h(ctx)e(t2)h(in)851 1322
y(\(match)h(tyT1)f(with)1008 1414 y(TyArr\(tyT11,tyT12\))k
FO(!)1087 1505 y FT(if)39 b(subtype)i(tyT2)f(tyT11)h(then)f(tyT12)1087
1596 y(else)g(error)g(fi)g("parameter)h(type)g(mismatch")930
1688 y(|)e(_)h FO(!)f FT(error)h(fi)g("arrow)g(type)h(expected"\))694
1779 y(|)f(TmRecord\(fi,)i(fields\))f FO(!)851 1870 y
FT(let)f(fieldtys)h(=)f(List.map)h(\(fun)f(\(li,ti\))h
FO(!)e FT(\(li,)h(typeof)h(ctx)e(ti\)\))i(fields)f(in)851
1962 y(TyRecord\(fieldtys\))694 2053 y(|)g(TmProj\(fi,)h(t1,)f(l\))g
FO(!)851 2144 y FT(\(match)h(\(typeof)g(ctx)f(t1\))g(with)1008
2236 y(TyRecord\(fieldtys\))k FO(!)1087 2327 y FT(\(try)c(List.assoc)h
(l)f(fieldtys)1126 2418 y(with)g(Not_found)h FO(!)e FT(error)i(fi)e
(\("label)i("^l^")g(not)f(present"\)\))930 2510 y(|)f(_)h
FO(!)f FT(error)h(fi)g("Expected)h(record)g(type"\))575
2692 y Gd(Note)30 b(that)g(the)g(subtype)g(checking)g(function)h(can)f
(be)f(made)h(mor)o(e)f(user)o(-friendly)g(by)450 2792
y(making)22 b(it)f(either)f(succeed)h(\(r)o(eturning)f(the)h(unit)h
(value)e F4(\(\))o Gd(\))h(or)g(raise)f(an)h(exception,)g(rather)450
2891 y(than)g(r)o(eturning)g(a)g(boolean.)27 b(Notice)21
b(that)g(this)h(doesn't)g(change)f(the)g(end-to-end)f(behavior)450
2991 y(of)d(the)g(checker:)23 b(if)17 b(the)h(subtype)f(checker)f(r)o
(eturns)h(false,)g(the)g(typechecker)g(is)g(always)g(going)450
3091 y(to)k(stop)g(immediately)g(at)g(that)f(point.)450
3376 y Gj(13.4)119 b(Meets)29 b(and)g(Joins)450 3566
y Gd(T)-8 b(o)24 b(deal)e(with)i(conditional)g(expr)o(essions,)g(we)f
(need)g(to)h(be)e(able)h(to)h(\002nd)f(the)h(smallest)f(type)450
3665 y(that)e(could)g(have)g(been)g(given)g(\(using)j(T)o(-)t(S)t
F6(U)t(B)q Gd(\))d(to)h(both)f(the)h F4(then)d Gd(and)i(the)g
F4(else)f Gd(branches.)450 3765 y(That)j(is,)g(we)g(need)g(to)g(\002nd)
g(the)g(smallest)h(type)f(that)f(lies)i(above)e(the)h(minimal)h(types)f
(of)g(the)450 3864 y(two)e(branches.)450 4047 y Ge(13.4.1)d
(De\002nition:)40 b Gd(A)20 b(type)h F4(J)f Gd(is)h(called)f(a)g
Ge(join)g Gd(of)h(a)f(pair)g(of)h(types)g F4(S)f Gd(and)g
F4(T)h Gd(if)658 4213 y F5(`)h F4(S)h FF(<)-17 b(:)24
b F4(J)658 4313 y F5(`)e F4(T)h FF(<)-17 b(:)24 b F4(J)658
4412 y Gd(for)c(all)h(types)g F4(U)o Gd(,)g(if)43 b F5(`)23
b F4(S)g FF(<)-17 b(:)24 b F4(U)c Gd(and)43 b F5(`)23
b F4(T)g FF(<)-17 b(:)24 b F4(U)c Gd(then)44 b F5(`)23
b F4(J)g FF(<)-17 b(:)24 b F4(U)o Gb(:)450 4577 y Gd(A)f(given)i(typed)
e(lambda-calculus)f(is)j(said)e(to)h Ge(have)f(joins)g
Gd(if,)h(for)g(every)f F4(S)g Gd(and)h F4(T)o Gd(,)h(ther)o(e)e(is)450
4677 y(some)e F4(J)g Gd(that)f(is)i(a)e(join)i(of)f F4(S)f
Gd(and)g F4(T)h Gd(under)f Gb(\000)6 b Gd(.)1502 b FZ(2)p
eop
%%Page: 120 121
120 120 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)498
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)500
b Gd(120)575 683 y(Similarly)-9 b(,)20 b(a)g(type)h F4(M)f
Gd(is)h(called)f(a)g Ge(meet)g Gd(of)g F4(S)h Gd(and)f
F4(T)g Gd(if)658 849 y F5(`)i F4(M)h FF(<)-17 b(:)24
b F4(S)658 949 y F5(`)e F4(M)h FF(<)-17 b(:)24 b F4(T)658
1048 y Gd(for)c(all)h(types)g F4(L)o Gd(,)g(if)43 b F5(`)23
b F4(L)g FF(<)-17 b(:)24 b F4(S)c Gd(and)43 b F5(`)23
b F4(L)g FF(<)-17 b(:)24 b F4(T)c Gd(then)44 b F5(`)23
b F4(L)g FF(<)-17 b(:)24 b F4(M)o Gb(:)450 1213 y Gd(A)h(pair)f(of)h
(types)g F4(S)g Gd(and)f F4(T)h Gd(is)g(said)g(to)g(be)g
Ge(bounded)e(below)h Gd(if)h(ther)o(e)f(is)i(some)f(type)g
F4(L)g Gd(such)450 1313 y(that)k F5(`)37 b F4(L)g FF(<)-17
b(:)39 b F4(S)28 b Gd(and)g F5(`)37 b F4(L)g FF(<)-17
b(:)39 b F4(T)o Gd(.)49 b(A)29 b(typed)f(lambda-calculus)f(is)i(said)f
(to)h Ge(have)f(bounded)450 1413 y(meets)c Gd(if,)i(for)f(every)g
F4(S)g Gd(and)g F4(T)g Gd(such)h(that)g F4(S)f Gd(and)g
F4(T)g Gd(ar)o(e)f(bounded)i(below)-8 b(,)27 b(ther)o(e)d(is)i(some)g
F4(M)450 1512 y Gd(that)21 b(is)g(a)f(meet)h(of)f F4(S)h
Gd(and)f F4(T)p Gd(.)575 1612 y(Using)27 b(the)g F4(join)e
Gd(function)j(we)f(can)g(now)h(give)f(an)g(algorithmic)h(r)o(ule)f(for)
f(the)i F4(if)e Gd(con-)450 1712 y(str)o(uct)21 b(in)g(the)g(pr)o
(esence)f(of)h(subtyping.)616 1869 y FT(let)40 b(rec)g(join)g(tyS)g
(tyT)g(=)694 1961 y(if)g(subtype)h(tyS)f(tyT)g(then)g(tyT)694
2052 y(else)h(if)e(subtype)i(tyT)f(tyS)g(then)g(tyS)694
2143 y(else)h(match)f(\(tyS,tyT\))h(with)930 2235 y(\(TyRecord\(f1\),)h
(TyRecord\(f2\)\))g FO(!)1008 2326 y FT(let)e(rec)g(loop)g(=)g
(function)1165 2417 y(\(_,[]\))h FO(!)e FT([])1087 2509
y(|)g(\([],_\))i FO(!)e FT([])1087 2600 y(|)g
(\(\(l1,t1\)::rest1,\(l2,t2\)::res)q(t2\))46 b FO(!)1204
2691 y FT(if)40 b(l1)g(=)f(l2)h(then)1283 2783 y(\(l1,\(join)h(t1)f
(t2\)\)::\(loop)i(\(rest1,rest2\)\))1204 2874 y(else)f([])1008
2965 y(in)f(let)g(f)f(=)h(loop)g(\(f1,f2\))1008 3056
y(in)g(\(match)h(f)e(with)1244 3148 y(\(*)g(when)i(the)e(first)i(field)
f(names)h(did)e(not)h(agree)h(*\))1244 3239 y([])e FO(!)g
FT(TyTop)1165 3330 y(|)h(_)f FO(!)g FT(TyRecord\(f\)\))851
3422 y(|)h(\(TyArr\(tyS1,tyS2\),TyArr\(tyT1,t)q(yT2\))q(\))45
b FO(!)1048 3513 y FT(\(try)40 b(TyArr\(meet)h(tyS1)f(tyT1,)h(join)f
(tyS2)g(tyT2\))1087 3604 y(with)g(Not_found)h FO(!)e
FT(TyTop\))851 3696 y(|)h(_)f FO(!)g FT(TyTop)616 3878
y(and)h(meet)g(tyS)g(tyT)g(=)694 3970 y(if)g(subtype)h(tyS)f(tyT)g
(then)g(tyS)694 4061 y(else)h(if)e(subtype)i(tyT)f(tyS)g(then)g(tyT)694
4152 y(else)773 4244 y(match)g(\(tyS,tyT\))i(with)930
4335 y(\(TyRecord\(f1\),)g(TyRecord\(f2\)\))g FO(!)1008
4426 y FT(let)e(rec)g(loop)g(=)g(function)1165 4518 y(\(restf1,[]\))i
FO(!)d FT(restf1)1087 4609 y(|)g(\([],restf2\))j FO(!)d
FT(restf2)1087 4700 y(|)g(\(\(l1,t1\)::rest1,\(l2,t2\)::res)q(t2\))46
b FO(!)1204 4792 y FT(if)40 b(l1)g(=)f(l2)h(then)1283
4883 y(\(l1,\(meet)h(t1)f(t2\)\)::\(loop)i(\(rest1,rest2\)\))p
eop
%%Page: 121 122
121 121 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)498
b Gd(1)t(3)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)o(A)o(T)t(I)t
(O)t(N)c(O)t(F)g Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)500
b Gd(121)1204 683 y FT(else)41 b(raise)f(Not_found)1008
774 y(in)g(let)g(f)f(=)h(loop)g(\(f1,f2\))1008 866 y(in)g
(TyRecord\(f\))851 957 y(|)g(\(TyArr\(tyS1,tyS2\),TyArr\(tyT1,t)q
(yT2\))q(\))45 b FO(!)1048 1048 y FT(TyArr\(join)c(tyS1)f(tyT1,)h(meet)
f(tyS2)g(tyT2\))851 1140 y(|)g(_)f FO(!)g FT(raise)i(Not_found)616
1322 y(let)f(rec)g(typeof)g(ctx)g(t)g(=)694 1414 y(match)h(t)e(with)773
1505 y(...)694 1596 y(|)h(TmTrue\(fi\))h FO(!)851 1688
y FT(TyBool)694 1779 y(|)f(TmFalse\(fi\))i FO(!)812 1870
y FT(TyBool)694 1962 y(|)e(TmIf\(fi,s1,s2,s3\))j FO(!)851
2053 y FT(if)d(subtype)h(\(typeof)g(ctx)f(s1\))g(TyBool)g(then)930
2144 y(join)g(\(typeof)h(ctx)f(s2\))g(\(typeof)g(ctx)g(s3\))851
2236 y(else)h(error)f(fi)g("guard)g(of)g(conditional)i(not)e(a)f
(boolean")p eop
%%Page: 122 123
122 122 bop 450 1306 a F3(Chapter)44 b(14)450 1721 y
Gk(Imperative)52 b(Objects)450 2276 y Gd(In)22 b(this)h(chapter)e(we)h
(come)h(to)f(our)g(\002rst)g(substantial)h(pr)o(ogramming)f(examples.)
28 b(W)-8 b(e'll)23 b(use)450 2376 y(the)d(featur)o(es)e(we)i(have)f
(de\002ned\227functions,)i(r)o(ecor)o(ds,)d(\002xed)h(points,)i(r)o
(efer)o(ence)d(cells,)h(and)450 2475 y(subtyping\227to)h(develop)e
(straightforwar)o(d)f(pr)o(ogramming)i(style)g(in)f(terms)h(of)f
(objects)h(and)450 2575 y(classes,)i(as)f(they)i(ar)o(e)d(found)i(in)h
(object-oriented)f(languages)f(such)i(as)f(Smalltalk)f(and)h(Java.)450
2675 y(W)-8 b(e)28 b(begin)h(with)g(very)f(simple)g
(\223stand-alone\224)f(objects)i(and)f(then)g(pr)o(oceed)f(to)i
(de\002ne)f(in-)450 2774 y(cr)o(easingly)20 b(powerful)h(kinds)g(of)g
(classes.)450 3060 y Gj(14.1)119 b(Objects)450 3249 y
Gd(An)20 b Ge(object)f Gd(is)h(a)g(data)f(str)o(uctur)o(e)g
(encapsulating)h(some)h(internal)f Ge(state)f Gd(and)g(of)o(fering)h
(access)450 3349 y(to)28 b(this)h(state)f(to)g(clients)h(via)e(a)h
(collection)h(of)f Ge(methods)p Gd(.)46 b(The)28 b(internal)g(state)f
(is)i(typically)450 3449 y(br)o(oken)22 b(up)g(into)h(a)f(number)g(of)g
(mutable)g Ge(instance)e(variables)g Gd(\(or)i Ge(\002elds)p
Gd(\))e(that)i(ar)o(e)f(shar)o(ed)450 3548 y(among)j(the)f
(de\002nitions)h(of)f(the)h(methods)f(\(and)g(typically)g(inaccessible)
g(to)g(the)g(r)o(est)g(of)g(the)450 3648 y(pr)o(ogram\).)g(An)18
b(object's)g(methods)g(ar)o(e)e(invoked)i(by)g(the)f(operation)h(of)f
Ge(message-sending)p Gd(.)575 3747 y(Our)35 b(r)o(unning)h(example)f
(for)g(the)g(chapter)f(will)i(be)f(simple)g(counter)h(objects.)69
b(Each)450 3847 y(counter)17 b(will)g(hold)g(a)f(single)h(number)f(and)
g(r)o(espond)g(to)h(two)g(messages:)23 b F4(get)o Gd(,)17
b(which)g(causes)450 3947 y(it)23 b(to)g(r)o(eturn)f(the)h(number)g(it)
g(curr)o(ently)f(has;)i(and)e F4(inc)o Gd(,)h(which)h(causes)e(it)h(to)
g(incr)o(ement)g(the)450 4046 y(number)e(it)g(is)g(holding.)575
4146 y(A)f(very)g(simple)i(way)f(of)f(obtaining)i(this)g(behavior)e
(using)i(the)f(featur)o(es)e(we)i(have)f(stud-)450 4246
y(ied)29 b(so)i(far)d(is)i(to)g(use)g(a)f(r)o(efer)o(ence)e(cell)j(for)
f(the)h(object's)h(internal)e(state)h(and)f(a)g(r)o(ecor)o(d)f(of)450
4345 y(functions)22 b(for)e(the)h(methods.)616 4503 y
FT(c)39 b(=)694 4594 y(let)h(r)g(=)f(ref)h(10)g(in)773
4686 y({get)g(=)g FM(\025)p FT(_:Unit.)g(!r,)812 4777
y(inc)g(=)g FM(\025)p FT(_:Unit.)g(r:=succ\(!r\)};)529
4900 y FS(I)616 4910 y FT(c)f(:)h({get:Unit)p FO(!)r
FT(Nat,)g(inc:Unit)p FO(!)r FT(Unit})1888 5169 y Gd(122)p
eop
%%Page: 123 124
123 123 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(123)450 683
y(The)24 b(fact)f(that)h(the)g(state)g(is)g(shar)o(ed)f(by)h(the)g
(methods)h(and)e(inaccessible)h(to)g(the)h(r)o(est)e(of)h(the)450
783 y(pr)o(ogram)h(arises)g(dir)o(ectly)g(fr)o(om)g(the)h(lexical)f
(scope)h(of)g(the)f(variable)g F4(r)o Gd(.)41 b(\223Sending)25
b(a)g(mes-)450 882 y(sage\224)20 b(to)h(the)g(object)g
F4(c)f Gd(means)h(just)g(extracting)f(some)i(\002eld)e(of)h(the)g(r)o
(ecor)o(d)e(and)h(applying)h(it)450 982 y(to)g(an)g(appr)o(opriate)e
(ar)o(gument.)25 b(For)c(example:)616 1124 y FT(c.inc)40
b(unit;)529 1212 y FS(I)616 1222 y FT(unit)g(:)g(Unit)616
1376 y(c.inc)g(unit;)529 1477 y FS(I)616 1487 y FT(unit)g(:)g(Unit)616
1641 y(c.get)g(unit;)529 1742 y FS(I)616 1752 y FT(12)g(:)f(Nat)616
1906 y(\(c.inc)i(unit;)f(c.inc)g(unit;)h(c.get)f(unit\);)529
2007 y FS(I)616 2017 y FT(14)g(:)f(Nat)450 2180 y Gd(Note)26
b(the)g(use)g(of)g(the)g(syntactic)g(sugar)g(for)f(sequencing)i(\(cf.)e
(Section)h Ge(??)p Gd(\))g(in)g(the)g(last)g(line.)450
2279 y(W)-8 b(e)21 b(could)g(equivalently)g(\(but)g(less)g(r)o
(eadably\))d(have)i(written)616 2421 y FT(let)40 b(x)f(=)h(c.inc)g
(unit)g(in)g(let)g(y)f(=)h(c.inc)g(unit)g(in)g(c.get)g(unit;)450
2572 y Gd(or)21 b(even)f(\(using)i(the)f F4(_)f Gd(convention)i(for)f
(\223don't)f(car)o(e\224)f(variable)h(names\):)616 2713
y FT(let)40 b(_)f(=)h(c.inc)g(unit)g(in)g(let)g(_)f(=)h(c.inc)g(unit)g
(in)g(c.get)g(unit;)575 2864 y Gd(W)-8 b(e)17 b(may)f(want)h(to)g(cr)o
(eate)f(and)g(manipulate)h(a)f(lot)h(of)g(counters,)h(so)f(it)g(will)h
(be)e(convenient)450 2963 y(to)21 b(use)g(an)g(abbr)o(eviation)e(for)i
(their)f(rather)h(long)g(r)o(ecor)o(d)e(type:)616 3105
y FT(Counter)41 b(=)e({get:Unit)p FO(!)r FT(Nat,)h(inc:Unit)p
FO(!)r FT(Unit};)450 3255 y Gd(T)-8 b(o)27 b(for)o(ce)f(the)h
(typechecker)f(to)h(print)g(the)g(type)f(of)h(a)f(new)h(counter)g
(using)h(the)f(short)g(form)450 3355 y F4(Counter)m Gd(,)j(we)e(add)f
(an)h(explicit)g(coer)o(cion)g(\(r)o(ecall)f(fr)o(om)h(Section)g(9.3)f
(that)h F4(t)43 b(as)g(T)28 b Gd(means)450 3455 y(the)21
b(same)f(as)h F4(\()p Gb(\025)p F4(x:T.x\)t)m Gd(\):)616
3597 y FT(c)39 b(=)694 3688 y(let)h(r)g(=)f(ref)h(10)g(in)773
3779 y({get)g(=)g FM(\025)p FT(_:Unit.)g(!r,)812 3871
y(inc)g(=)g FM(\025)p FT(_:Unit.)g(r:=succ\(!r\)})694
3962 y(as)g(Counter;)529 4050 y FS(I)616 4060 y FT(c)f(:)h(Counter)450
4223 y Gd(\(This)26 b(need)g(to)g(explicitly)g(annotate)g(terms)h(to)f
(contr)o(ol)g(the)h(way)e(their)i(types)f(ar)o(e)e(printed)450
4322 y(is)g(a)e(little)i(annoying.)34 b(It)23 b(is)h(the)f(price)g(we)g
(pay)f(for)h(\223unbundling\224)h(all)f(the)g(featur)o(es)f(of)h(our)
450 4422 y(pr)o(ogramming)k(language)g(into)g(the)g(simplest)h(and)e
(most)i(orthogonal)g(possible)g(units,)g(so)450 4521
y(that)19 b(we)g(can)g(study)g(them)h(in)f(isolation.)26
b(A)19 b(practical)f(high-level)h(pr)o(ogramming)g(language)450
4621 y(design)25 b(would)g(pr)o(obably)f(combine)i(many)f(of)g(these)g
(primitive)g(featur)o(es)e(into)i(mor)o(e)g(con-)450
4721 y(venient)c(macr)o(o-constr)o(ucts.\))575 4820 y(A)29
b(typical)h(piece)g(of)g(\223client)h(code\224)e(that)h(manipulates)g
(counter)h(objects)g(might)g(look)450 4920 y(something)22
b(like)f(this:)p eop
%%Page: 124 125
124 124 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(124)616 683
y FT(inc3)40 b(=)g FM(\025)p FT(c:Counter.)h(\(c.inc)f(unit;)h(c.inc)f
(unit;)g(c.inc)h(unit\);)529 781 y FS(I)616 791 y FT(inc3)f(:)g
(Counter)g FO(!)f FT(Unit)450 959 y Gd(The)22 b(function)h
F4(inc3)d Gd(takes)i(a)g(counter)g(object)g(and)g(incr)o(ements)g(it)g
(thr)o(ee)g(times)g(by)g(sending)450 1059 y(it)f(thr)o(ee)f
F4(inc)f Gd(messages)i(in)h(succession.)616 1205 y FT(\(inc3)40
b(c;)g(c.get)g(unit\);)529 1303 y FS(I)616 1313 y FT(13)g(:)f(Nat)450
1596 y Gj(14.2)119 b(Invariants)450 1785 y F7(A)25 b(crucial)g(featur)o
(e)g(of)h(the)e(object-oriented)h(pr)o(ogramming)e(style)i(is)g(its)h
(support)e(for)h(pr)o(otection)f(of)450 1885 y Ge(invariants.)e
F7(The)16 b(implementor)g(of)h(an)g(object)g(can)f(decide)h(on)g(some)f
(pr)o(operties)h(that)e(should)h(always)450 1984 y(hold)25
b(of)h(its)g(state)g(variables.)42 b(Clients)27 b(of)f(the)g(object)g
(cannot)f(br)o(eak)i(those)e(invariants,)i(since)g(their)450
2084 y(only)20 b(access)h(to)g(the)f(state)g(is)i(thr)o(ough)c(the)j
(method)e(interface.)575 2183 y(For)g(purposes)g(of)g(illustration,)g
(we've)g(chosen)g(an)g(incr)o(edibly)g(simple)g(invariant:)24
b(that)18 b(the)g(state)450 2283 y(of)30 b(a)f(counter)h(object)f(is)h
(always)f(at)h(least)f FQ(10)o F7(.)52 b(The)30 b(important)e(point)h
(is)h(that,)g(to)f(convince)g(our-)450 2383 y(selves)f(of)g(this)e
(fact,)j(we)e(only)g(need)h(to)f(look)g(at)g(the)g(de\002nition)g(of)g
(the)g(counter)h(object,)h(not)e(at)g(the)450 2482 y(implementations)20
b(of)h(any)f(client)h(code)f(that)f(might)g(manipulate)h(it.)450
2765 y Gj(14.3)119 b(Object)29 b(Generators)450 2955
y Gd(In)c(the)g(development)g(that)g(follows,)i(it)e(will)h(be)f
(useful)g(to)g(be)g(able)f(to)h(manipulate)g(all)g(the)450
3054 y(instance)h(variables)e(of)h(an)h(object)f(as)g(a)g(single)i
(unit.)40 b(T)-8 b(o)26 b(support)f(this,)i(let)f(us)f(change)h(the)450
3154 y(internal)c(r)o(epr)o(esentation)g(of)g(our)g(counters)h(to)g(be)
f(a)g F7(r)o(ecord)g Gd(of)g(r)o(efer)o(ence)e(cells)j(and)e(use)i(the)
450 3253 y(name)e(of)f(this)i(r)o(ecor)o(d)d(to)i(r)o(efer)e(to)i
(instance)g(variables)f(fr)o(om)g(the)h(method)g(body)-9
b(.)616 3400 y FT(c)39 b(=)694 3491 y(let)h(r)g(=)f({x=ref)i(10})f(in)
773 3582 y({get)g(=)g FM(\025)p FT(_:Unit.)g(!\(r.x\),)812
3674 y(inc)g(=)g FM(\025)p FT(_:Unit.)g(r.x:=succ\(!\(r.x\)\)})694
3765 y(as)g(Counter;)529 3863 y FS(I)616 3873 y FT(c)f(:)h(Counter)450
4041 y Gd(This)26 b(r)o(epr)o(esentation)e(makes)h(it)g(is)h(easy)-9
b(,)25 b(for)g(example,)h(to)f(write)g(a)g F7(counter)h(generator)f
Gd(that)450 4141 y(cr)o(eates)19 b(a)h(new)i(counter)f(every)f(time)h
(it)g(is)g(called.)616 4287 y FT(newCounter)42 b(=)694
4378 y FM(\025)p FT(_:Unit.)694 4470 y(\(let)f(r)e(=)h({x=ref)g(10})g
(in)812 4561 y({get)g(=)g FM(\025)p FT(_:Unit.)g(!\(r.x\),)851
4652 y(inc)g(=)g FM(\025)p FT(_:Unit.)g(r.x:=succ\(!\(r.x\)\)})734
4744 y(as)f(Counter\);)529 4841 y FS(I)616 4851 y FT(newCounter)j(:)d
(Unit)h FO(!)f FT(Counter)p eop
%%Page: 125 126
125 125 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(125)450 686
y Gj(14.4)119 b(Subtyping)450 875 y Gd(One)19 b(of)g(the)f(r)o(easons)h
(for)f(the)h(popularity)g(of)f(object-oriented)h(pr)o(ogramming)g
(styles)g(is)g(that)450 975 y(they)i(permit)g(objects)g(of)g(many)g
(shapes)g(to)g(be)f(manipulated)g(by)h(the)g(same)g(client)g(code.)575
1074 y(For)27 b(example,)h(suppose)f(that,)i(in)f(addition)f(to)h(the)f
F4(Counter)d Gd(objects)k(de\002ned)f(above,)450 1174
y(we)19 b(also)g(cr)o(eate)e(some)i(cell)g(objects)g(with)g(one)h(mor)o
(e)e(method)h(that)g(allows)g(them)g(to)h(be)e(r)o(eset)450
1274 y(to)j(their)g(initial)g(state)g(\(say)-9 b(,)19
b F4(10)p Gd(\))h(at)g(any)h(time.)616 1416 y FT(ResetCounter)42
b(=)d({get:Unit)p FO(!)r FT(Nat,)1440 1507 y(inc:Unit)p
FO(!)q FT(Unit,)1440 1599 y(reset:Unit)p FO(!)r FT(Unit};)616
1781 y(newResetCounter)k(=)694 1872 y FM(\025)p FT(_:Unit.)773
1964 y(let)d(r)f(=)h({x=ref)g(10})g(in)891 2055 y({get)118
b(=)40 b FM(\025)p FT(_:Unit.)g(!\(r.x\),)930 2146 y(inc)118
b(=)40 b FM(\025)p FT(_:Unit.)g(r.x:=succ\(!\(r.x\)\),)930
2238 y(reset)g(=)g FM(\025)p FT(_:Unit.)g(r.x:=10})773
2329 y(as)g(ResetCounter;)529 2418 y FS(I)616 2428 y
FT(newResetCounter)j(:)c(Unit)h FO(!)f FT(ResetCounter)575
2591 y Gd(Note)18 b(that)h(our)f(old)h F4(inc3)e Gd(function)i(on)h
(counters)e(can)h(safely)f(use)g(our)h(r)o(e\002ned)f(counters)450
2691 y(too:)616 2833 y FT(rc)40 b(=)f(newResetCounter)k(unit;)529
2922 y FS(I)616 2932 y FT(rc)d(:)f(ResetCounter)616 3087
y(\(inc3)h(rc;)g(rc.reset)h(unit;)g(inc3)f(rc;)g(rc.get)g(unit\);)529
3188 y FS(I)616 3198 y FT(13)g(:)f(Nat)450 3480 y Gj(14.5)119
b(Basic)29 b(classes)450 3670 y Gd(The)f(de\002nitions)h(of)f
F4(newCounter)23 b Gd(and)28 b F4(newResetCounter)21
b Gd(ar)o(e)27 b(identical)g(except)g(for)h(the)450 3769
y(body)e(of)g(the)g F4(reset)d Gd(method.)41 b(Of)26
b(course,)h(for)f(such)g(short)g(de\002nitions)h(this)g(makes)f(little)
450 3869 y(dif)o(fer)o(ence,)18 b(but)j(if)f(the)h(method)g(bodies)g
(wer)o(e)e(much)j(longer)f(we)f(might)i(quickly)g(\002nd)f(our)o(-)450
3968 y(selves)29 b(wanting)h(to)g(write)f(the)g(common)h(ones)g(in)g
(just)g(one)f(place.)50 b(The)29 b(mechanism)h(by)450
4068 y(which)22 b(this)f(is)g(achieved)f(in)h(most)h(object-oriented)f
(languages)f(is)h(called)f(the)h Ge(class)p Gd(.)575
4168 y(T)-8 b(o)26 b(de\002ne)g F4(newResetCounter)20
b Gd(in)27 b(terms)f(of)g F4(newCounter)l Gd(,)h(we)f(abstract)f(the)h
(methods)450 4267 y(of)21 b(a)f(pr)o(ototype)h(counter)g(object)h(over)
f(the)g(instance)g(variables.)k(This)c(is)h(a)e(simple)i(example)450
4367 y(of)f(a)f Ge(class)p Gd(.)616 4509 y FT(CounterRep)42
b(=)d({x:)h(Ref)g(Nat};)616 4601 y(counterClass)i(=)694
4692 y FM(\025)p FT(r:CounterRep.)773 4783 y(\({get)e(=)g
FM(\025)p FT(_:Unit.)g(!\(r.x\),)851 4875 y(inc)g(=)g
FM(\025)p FT(_:Unit.)g(r.x:=succ\(!\(r.x\)\)})773 4966
y(as)g(Counter\);)p eop
%%Page: 126 127
126 126 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(126)529 673
y FS(I)616 683 y FT(counterClass)42 b(:)d(CounterRep)j
FO(!)d FT(Counter)450 866 y Gd(Now)17 b(we)g(can)f(build)h(a)f(class)g
(for)h F4(ResetCounter)11 b Gd(by)17 b(r)o(e-using)f(the)h(\002elds)g
(of)f F4(counterClass)-5 b Gd(:)616 1023 y FT(resetCounterClass)43
b(=)694 1115 y FM(\025)p FT(r:CounterRep.)694 1206 y(let)d(super)h(=)e
(counterClass)j(r)e(in)773 1297 y(\({get)119 b(=)39 b(super.get,)851
1389 y(inc)119 b(=)39 b(super.inc,)851 1480 y(reset)i(=)e
FM(\025)p FT(_:Unit.)i(r.x:=10})773 1571 y(as)f(ResetCounter\);)529
1695 y FS(I)616 1705 y FT(resetCounterClass)j(:)d(CounterRep)h
FO(!)e FT(ResetCounter)575 1888 y Gd(The)16 b(de\002nitions)i(of)e
F4(newCounter)d Gd(and)j F4(newResetCounter)10 b Gd(become)16
b(trivial:)24 b(we)16 b(simply)450 1987 y(allocate)f(the)h(instance)g
(variables)f(and)g(supply)h(them)g(to)h F4(counterClass)10
b Gd(or)16 b F4(resetCounterClass)-7 b Gd(,)450 2087
y(wher)o(e)20 b(the)h(r)o(eal)f(work)h(happens:)616 2245
y FT(newCounter)42 b(=)694 2336 y FM(\025)p FT(_:Unit.)773
2427 y(\(let)e(r)g(=)f({x=ref)i(10})f(in)891 2519 y(counterClass)i(r\))
773 2610 y(as)e(Counter;)529 2733 y FS(I)616 2743 y FT(newCounter)i(:)d
(Unit)h FO(!)f FT(Counter)616 2918 y(newResetCounter)k(=)694
3009 y FM(\025)p FT(_:Unit.)773 3100 y(\(let)d(r)g(=)f({x=ref)i(10})f
(in)891 3192 y(resetCounterClass)j(r\))773 3283 y(as)d(ResetCounter;)
529 3423 y FS(I)616 3433 y FT(newResetCounter)j(:)c(Unit)h
FO(!)f FT(ResetCounter)450 3719 y Gj(14.6)119 b(Extending)29
b(the)h(Internal)e(State)450 3908 y Gd(Suppose)c(we)h(want)g(to)g
(de\002ne)g(a)f(class)h(of)f F4(BackupCounter)-5 b Gd(s)25
b(whose)h(r)o(eset)d(method)j(r)o(esets)450 4008 y(their)21
b(state)f(to)h(its)h(value)e(at)g(the)h(last)g(call)f(to)h(a)f(new)i
(method)f(backup...)616 4165 y FT(BackupCounter)42 b(=)e({get:Unit)p
FO(!)r FT(Nat,)1283 4257 y(inc:Unit)p FO(!)r FT(Unit,)1283
4348 y(reset:Unit)p FO(!)r FT(Unit,)1283 4439 y(backup:)h(Unit)p
FO(!)p FT(Unit};)616 4531 y(BackupCounterRep)i(=)c({x:)h(Ref)g(Nat,)g
(b:)g(Ref)g(Nat};)450 4697 y Gd(Her)o(e)20 b(is)h(the)g(class:)p
eop
%%Page: 127 128
127 127 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(127)616 683
y FT(backupCounterClass)43 b(=)694 774 y FM(\025)p FT
(r:BackupCounterRep.)812 866 y(\({get)e(=)e FM(\025)p
FT(_:Unit.)h(!\(r.x\),)891 957 y(inc)g(=)f FM(\025)p
FT(_:Unit.)h(r.x:=succ\(!\(r.x\)\),)891 1048 y(reset)g(=)f
FM(\025)p FT(_:Unit.)i(r.x:=!\(r.b\),)891 1140 y(backup)f(=)g
FM(\025)p FT(_:Unit.)g(r.b:=!\(r.x\)})812 1231 y(as)g(BackupCounter\);)
529 1349 y FS(I)616 1359 y FT(backupCounterClass)j(:)d
(BackupCounterRep)j FO(!)c FT(BackupCounter)575 1538
y Gd(The)33 b(inter)o(esting)h(point)g(is)g(that)f(we)g(can)g(actually)
g(de\002ne)h F4(backupCounterCl)o(ass)27 b Gd(in)450
1638 y(terms)h(of)f F4(resetCounterClass)-7 b Gd(.)46
b(Note)28 b(how)h(subtyping)f(is)g(used)g(in)g(checking)g(the)g
(de\002-)450 1737 y(nition)i(of)f F4(super)n Gd(.)49
b(Also,)31 b(note)e(that)g(we)f(need)h(to)g(override)f(the)h
(de\002nition)g(of)g(the)g F4(reset)450 1837 y Gd(method)21
b(as)g(well)g(as)f(adding)h F4(backup)m Gd(.)616 1992
y FT(backupCounterClass)43 b(=)694 2083 y FM(\025)p FT
(r:BackupCounterRep.)694 2175 y(let)d(super)h(=)e(resetCounterClass)k
(r)d(in)812 2266 y(\({get)h(=)e(super.get,)891 2357 y(inc)h(=)f
(super.inc,)891 2449 y(reset)h(=)f FM(\025)p FT(_:Unit.)i
(r.x:=!\(r.b\),)891 2540 y(backup)f(=)g FM(\025)p FT(_:Unit.)g
(r.b:=!\(r.x\)})812 2631 y(as)g(BackupCounter\);)529
2749 y FS(I)616 2759 y FT(backupCounterClass)j(:)d(BackupCounterRep)j
FO(!)c FT(BackupCounter)575 2938 y Gd(The)18 b(variable)f
F4(super)g Gd(was)h(used)h(above)f(to)h(\223copy)f(functionality\224)h
(fr)o(om)f(the)h(super)o(class)450 3038 y(into)j(the)f(new)g(subclass.)
575 3138 y(The)31 b F4(super)e Gd(variable)h(can)h(also)g(be)g(used)g
F7(inside)h Gd(method)g(de\002nitions)g(to)g(extend)f(the)450
3237 y(super)o(class's)23 b(behavior)g(with)h(something)h(new)-8
b(.)34 b(Suppose,)23 b(for)g(instance,)h(that)g(we)f(want)g(a)450
3337 y(variant)f(of)i(our)f F4(backupCounter)18 b Gd(class)23
b(in)h(which)g(the)f F4(inc)f Gd(method)i(incr)o(ements)f(not)h(only)
450 3437 y(the)d(cell's)h(value)f(but)g(also)h(the)f(backed-up)f(value)
h(in)g(the)h(instance)f(variable)f F4(b)p Gd(.)27 b(\(Goodness)450
3536 y(knows)22 b(why)f(this)h(behavior)e(would)i(be)e(useful\227it's)h
(just)h(an)e(example!\))616 3691 y FT(funnyBackupCounterClass)45
b(=)694 3783 y FM(\025)p FT(r:BackupCounterRep.)694 3874
y(let)40 b(super)h(=)e(resetCounterClass)k(r)d(in)812
3965 y(\({get)h(=)e(super.get,)891 4057 y(inc)h(=)f FM(\025)p
FT(_:Unit.)1204 4148 y(\(super.inc)j(unit;)1244 4239
y(r.b)e(:=)f(succ\(!\(r.b\)\)\),)891 4331 y(reset)h(=)f
FM(\025)p FT(_:Unit.)i(r.x:=!\(r.b\),)891 4422 y(backup)f(=)g
FM(\025)p FT(_:Unit.)g(r.b:=!\(r.x\)})812 4513 y(as)g(BackupCounter\);)
529 4631 y FS(I)616 4641 y FT(funnyBackupCounterClass)45
b(:)39 b(BackupCounterRep)k FO(!)c FT(BackupCounter)450
4820 y Gd(Note)29 b(how)h(use)f(of)g F4(super.inc)c Gd(in)k(the)g
(de\002nition)h(of)f F4(inc)f Gd(avoids)g(r)o(epeating)g(the)h(super)o
(-)450 4920 y(class's)21 b F4(inc)e Gd(code)i(her)o(e.)p
eop
%%Page: 128 129
128 128 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(128)450 686
y Gj(14.7)119 b(Classes)30 b(with)f(\223Self)t(\224)450
875 y Gd(Our)19 b(\002nal)g(extension)h(is)f(allowing)h(the)f(methods)h
(of)e(classes)h(to)h(r)o(efer)d(to)i(each)f(other)i(\223r)o(ecur)o(-)
450 975 y(sively)-9 b(.\224)27 b(For)22 b(example,)f(suppose)h(that)f
(we)h(want)f(to)h(implement)g(a)f(class)h(of)f(counters)h(with)450
1074 y(a)f F4(set)f Gd(method)i(that)f(can)g(be)g(used)h(fr)o(om)f(the)
g(outside)h(to)g(set)f(the)g(curr)o(ent)g(count)h(to)g(a)f(given)450
1174 y(number)-6 b(.)616 1332 y FT(SetCounter)42 b(=)d({get:Unit)p
FO(!)r FT(Nat,)h(set:Nat)p FO(!)q FT(Unit,)h(inc:Unit)p
FO(!)q FT(Unit};)450 1498 y Gd(W)-8 b(e)22 b(may)f(now)i(want)f(to)g
(implement)g(the)g F4(inc)f Gd(method)h(of)f(these)h(counters)g(in)g
(terms)g(of)g(the)450 1597 y F4(get)i Gd(and)h F4(set)f
Gd(methods.)40 b(\(Of)25 b(course,)h(all)g(thr)o(ee)e(methods)i(ar)o(e)
e(so)i(small)g(in)g(this)g(example)450 1697 y(that)20
b(all)h(this)g(code)f(r)o(euse)g(is)h(har)o(dly)e(worth)j(the)e(tr)o
(ouble!)26 b(For)20 b(lar)o(ger)f(examples,)h(though,)i(it)450
1797 y(can)e(make)h(a)f(substantial)h(dif)o(fer)o(ence)d(in)k(code)e
(size)g(and)h(maintainability)-9 b(.\))616 1971 y FT(setcounterClass)43
b(=)694 2062 y FM(\025)p FT(r:CounterRep.)773 2154 y(fix)851
2245 y(\()p FM(\025)p FT(self:)e(SetCounter.)930 2336
y({get)f(=)f FM(\025)p FT(_:Unit.)i(!\(r.x\),)969 2428
y(set)f(=)f FM(\025)p FT(i:Nat.)i(r.x:=i,)969 2519 y(inc)f(=)f
FM(\025)p FT(_:Unit.)i(self.set)g(\(succ\(self.get)h(unit\)\)}\);)529
2659 y FS(I)616 2669 y FT(setcounterClass)h(:)c(CounterRep)j
FO(!)1322 2760 y FT({get:Unit)p FO(!)r FT(Nat,)e(set:Nat)p
FO(!)r FT(Unit,)g(inc:Unit)p FO(!)q FT(Unit})575 2943
y Gd(Classes)26 b(in)h(mainstr)o(eam)f(object-oriented)g(languages)g
(such)h(as)f(Smalltalk,)h(C++,)h(and)450 3043 y(Java)34
b(actually)h(support)h(a)f(mor)o(e)g(general)g(form)h(of)g(r)o
(ecursive)e(call)h(between)h(methods,)450 3142 y(sometimes)24
b(known)g(as)e Ge(open)g(recursion)p Gd(.)30 b(Instead)23
b(of)f(taking)h(the)g(\002xed)f(point)i(within)g(the)450
3242 y(class,)c(we)h(wait)g(until)g(we)g(use)g(the)g(class)g(to)g
(actually)f(cr)o(eate)f(an)i(object.)616 3400 y FT(setcounterClass)43
b(=)694 3491 y FM(\025)p FT(r:CounterRep.)812 3582 y
FM(\025)p FT(self:)d(SetCounter.)891 3674 y({get)g(=)f
FM(\025)p FT(_:Unit.)i(!\(r.x\),)930 3765 y(set)f(=)f
FM(\025)p FT(i:Nat.)h(r.x:=i,)930 3856 y(inc)g(=)f FM(\025)p
FT(_:Unit.)i(self.set)g(\(succ\(self.get)h(unit\)\)};)529
3980 y FS(I)616 3990 y FT(setcounterClass)h(:)c(CounterRep)j
FO(!)1322 4081 y FT(SetCounter)g FO(!)1322 4172 y FT({get:Unit)p
FO(!)r FT(Nat,)e(set:Nat)p FO(!)r FT(Unit,)g(inc:Unit)p
FO(!)q FT(Unit})616 4347 y(newSetCounter)i(=)694 4438
y FM(\025)p FT(_:Unit.)773 4529 y(let)e(r)f(=)h({x=ref)g(10})g(in)773
4621 y(fix)g(\(setcounterClass)j(r\);)529 4761 y FS(I)616
4771 y FT(newSetCounter)f(:)e(Unit)g FO(!)1244 4862 y
FT({get:Unit)p FO(!)r FT(Nat,)g(set:Nat)p FO(!)q FT(Unit,)g(inc:Unit)p
FO(!)r FT(Unit})p eop
%%Page: 129 130
129 129 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(129)575 683
y(What's)33 b(inter)o(esting)h(about)f(leaving)g(the)g(r)o(ecursion)g
(open)h(is)g(that,)i(when)e(we)f(build)450 783 y(a)h(new)h(class)f(by)h
(subclassing)g F4(setcounterClass)-6 b Gd(,)38 b(we)c(can)g(override)g
(the)h(methods)g(of)450 882 y F4(setcounterClass)19 b
Gd(in)26 b(such)g(a)e(way)h(that)h(r)o(ecursive)e(calls)h(to)h(these)f
(methods)h F7(fr)o(om)f(within)450 982 y F4(setcounterClass)f
Gd(will)31 b(actually)f(invoke)h(the)f(new)h(method)f(bodies)h(that)f
(we)g(pr)o(ovide.)450 1082 y(For)19 b(example,)g(her)o(e's)f(a)h
(subclass)g(that)g(keeps)f(track)h(of)g(how)h(many)f(times)h(the)f
F4(get)e Gd(method)450 1181 y(has)k(been)f(called.)616
1339 y FT(InstrumentedCounter)44 b(=)39 b({get:Unit)p
FO(!)r FT(Nat,)1518 1430 y(set:Nat)p FO(!)r FT(Unit,)1518
1522 y(inc:Unit)p FO(!)r FT(Unit,)1518 1613 y(accesses:Unit)p
FO(!)s FT(Nat};)616 1704 y(InstrumentedCounterRep)44
b(=)c({x:)g(Ref)g(Nat,)g(a:)f(Ref)h(Nat};)616 1796 y
(instrumentedCounterClass)45 b(=)694 1887 y FM(\025)p
FT(r:InstrumentedCounterRep.)812 1978 y FM(\025)p FT(self:)40
b(InstrumentedCounter.)812 2069 y(lazy)g(let)g(super)h(=)e
(setcounterClass)k(r)c(self)h(in)930 2161 y(lazy)1008
2252 y({get)g(=)g FM(\025)p FT(_:Unit.)1401 2343 y(let)g(result)g(=)g
(super.get)h(unit)f(in)1401 2435 y(\(r.a:=succ\(!\(r.a\)\);)j
(result\),)1048 2526 y(set)c(=)h(super.set,)1048 2617
y(inc)f(=)h(super.inc,)1048 2709 y(accesses)h(=)e FM(\025)p
FT(_:Unit.)i(!\(r.a\)})930 2800 y(as)f(InstrumentedCounter;)529
2924 y FS(I)616 2934 y FT(instrumentedCounterClass)45
b(:)39 b(InstrumentedCounterRep)44 b FO(!)1675 3025 y
FT(InstrumentedCounter)g FO(!)39 b FT(InstrumentedCounter)575
3208 y Gd(Notice)26 b(that,)i(because)e(of)h(the)g(open)g(r)o(ecursion)
f(thr)o(ough)h F4(self)o Gd(,)h(the)e(call)h(to)g F4(get)e
Gd(fr)o(om)450 3307 y(within)31 b F4(inc)d Gd(r)o(esults)h(in)h(the)f
(a)g(\002eld)h(being)f(incr)o(emented,)i(even)e(though)i(the)e(incr)o
(ement-)450 3407 y(ing)g(behavior)g(of)f F4(get)g Gd(is)h(de\002ned)f
(in)h(the)g(subclass)g(and)f(the)h(call)f(to)h F4(get)e
Gd(appears)h(in)h(the)450 3506 y(super)o(class.)450 3689
y Ge(14.7.1)18 b(Exercise:)39 b Gd(The)29 b(two)h F4(lazy)d
Gd(annotations)j(in)g F4(newInstrumentedC)o(ou)o(nte)o(r)23
b Gd(ar)o(e)k(both)450 3789 y(essential.)f(Check)20 b(what)h(happens)g
(when)g(either)g(of)g(them)g(is)g(omitted.)641 b FZ(2)575
3971 y Gd(W)-8 b(e)32 b(cr)o(eate)f(an)h(instr)o(umented)h(counter)f
(in)h(the)f(same)h(way)f(as)g(befor)o(e\227by)f(taking)h(a)450
4071 y(\002xed)23 b(point)h(of)g(the)g(class)f(and)g(pr)o(oviding)h(it)
g(with)g(some)g(newly)h(allocated)d(instance)i(vari-)450
4171 y(ables.)616 4328 y FT(newInstrumentedCounter)44
b(=)694 4420 y FM(\025)p FT(_:Unit.)694 4511 y(let)c(r)g(=)f({x)h(=)f
(ref)h(10,)g(a)g(=)f(ref)h(10})g(in)694 4602 y(fix)g
(\(instrumentedCounterClass)45 b(r\);)529 4726 y FS(I)616
4736 y FT(newInstrumentedCounter)f(:)c(Unit)g FO(!)f
FT(InstrumentedCounter)575 4919 y Gd(Note)20 b(how)i(the)f
F4(accesses)c Gd(method)22 b(counts)f(calls)g(to)g(both)g
F4(get)f Gd(and)g F4(inc)o Gd(:)p eop
%%Page: 130 131
130 130 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)723
b Gd(1)t(4)t(.)29 b(I)t F6(M)t(P)t(E)t(R)t(A)o(T)t(I)t(V)t(E)c
Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)725 b Gd(130)616 683
y FT(ic)40 b(=)f(newInstrumentedCounter)44 b(unit;)616
774 y(ic.get)d(unit;)529 898 y FS(I)616 908 y FT(10)f(:)f(Nat)616
1082 y(ic.accesses)j(unit;)529 1222 y FS(I)616 1232 y
FT(11)e(:)f(Nat)616 1407 y(ic.inc)i(unit;)529 1547 y
FS(I)616 1557 y FT(unit)f(:)g(Unit)616 1731 y(ic.get)h(unit;)529
1871 y FS(I)616 1881 y FT(11)f(:)f(Nat)616 2056 y(ic.accesses)j(unit;)
529 2196 y FS(I)616 2206 y FT(13)e(:)f(Nat)450 2388 y
Ge(14.7.2)18 b(Exercise)h([Homework]:)41 b F7(\(Due)29
b(on)g(Mar)o(ch)g(7.\))50 b Gd(Use)29 b(the)g F4(fullref)e
Gd(checker)h(\(avail-)422 b FP(\()450 2488 y Gd(able)22
b(fr)o(om)h(the)g(web)g(dir)o(ectory\))f(to)h(implement)h(the)f
(following)i(extensions)f(to)f(the)g(classes)450 2588
y(above:)554 2754 y(1.)41 b(Change)28 b(the)g(de\002nition)h(of)f
F4(instrumentedCoun)o(te)o(rCl)o(as)o(s)22 b Gd(so)29
b(that)f(it)g(also)g(counts)658 2853 y(calls)20 b(to)h
F4(set)o Gd(.)554 3019 y(2.)41 b(Extend)17 b(your)h(modi\002ed)g
F4(instrumentedCoun)o(te)o(rC)o(las)o(s)12 b Gd(with)18
b(a)f(subclass)h(that)g(adds)658 3119 y(a)i F4(reset)f
Gd(method)i(\(as)f(in)h(Section)g(14.4\).)554 3285 y(3.)41
b(Extend)19 b(this)h(subclass)g(with)g(yet)g(another)g(subclass)f(that)
h(supports)g(backups)f(as)h(well)658 3385 y(\(as)g(in)h(Section)g
(14.6\).)2036 b FZ(2)p eop
%%Page: 131 132
131 131 bop 450 1306 a F3(Chapter)44 b(15)450 1721 y
Gk(Recursive)52 b(T)-19 b(ypes)575 2177 y F5(\017)41
b Gd(Lists)22 b(of)f(numbers)i(can)e(be)g(r)o(epr)o(esented)f(using)j
(\223cons)f(cells\224:)27 b(a)21 b(list)i(is)f(either)f
F4(nil)g Gd(or)658 2276 y(else)f(it)h(is)g F4(cons)e
Gd(of)i(a)f(number)h(and)g(a)f(list.)658 2409 y(What)g(is)h(the)g(type)
g(of)g(such)g(lists?)575 2575 y F5(\017)41 b Gd(The)20
b(\223either)f(this)i(or)g(that\224)e(part)h(of)g(this)h(de\002nition)g
(can)f(be)g(r)o(epr)o(esented)e(using)j(vari-)658 2675
y(ants)f(\(cf.)25 b(Section)c(9.7\))824 2832 y FT(NatList)40
b(=)g(<nil:)g(...,)g(cons:)h(...>;)575 3032 y F5(\017)g
Gd(The)18 b(fact)g(that)h(all)g(we)g(need)g(to)g(know)h(about)f(an)f
(empty)i(list)f(is)g(the)g(simple)h(fact)e(that)h(it)658
3131 y(is)g(empty)g(can)f(be)h(encoded)f(by)h(making)h(the)f(data)e
(value)i(carried)e(by)i(the)g F4(nil)f Gd(variant)658
3231 y(be)i(an)h(element)f(of)h(the)g(dummy)g(type)g
F4(Unit)n Gd(.)824 3389 y FT(NatList)40 b(=)g(<nil:Unit,)h(cons:)g
(...>;)575 3588 y F5(\017)g Gd(The)26 b(fact)f(that)h(a)g(nonempty)h
(list)f(has)h(both)f(a)g(head)f(and)h(a)g(tail)g(can)g(be)f(encoded)h
(by)658 3688 y(making)21 b(the)g F4(cons)e Gd(constr)o(uctor)j(carry)e
(a)g(pair)g(of)h(values)824 3845 y FT(NatList)40 b(=)g(<nil:Unit,)h
(cons:)g({...,)f(...}>;)575 4045 y F5(\017)h Gd(The)17
b(fact)g(that)h(the)g(head)f(of)h(a)f(nonempty)i(list)f(is)g(a)g
(number)g(is)g(r)o(epr)o(esented)d(by)j(giving)658 4144
y(the)i(\002rst)i(element)e(of)h(this)h(pair)e(the)h(type)f
F4(Nat)824 4302 y FT(NatList)40 b(=)g(<nil:Unit,)h(cons:)g({Nat,)f
(...}>;)575 4501 y F5(\017)h Gd(The)23 b(fact)f(that)h(the)g(tail)g(of)
h(a)e(nonempty)j(list)e(is)h(itself)f(a)g(list)h(leads)e(us)i(to)f
(want)g(to)h(put)658 4601 y F4(NatList)17 b Gd(itself)k(as)g(the)g
(second)f(component)i(of)f(the)g(pair:)824 4759 y FT(NatList)40
b(=)g(<nil:Unit,)h(cons:{Nat,NatList}>;)1888 5169 y Gd(131)p
eop
%%Page: 132 133
132 132 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(132)575 683 y F5(\017)41
b Gd(Obviously)-9 b(,)25 b(this)g(equation)g(is)f(not)h(a)e
F7(de\002nition)h Gd(in)h(any)f(simple)g(sense,)h(since)g(the)f(ex-)658
783 y(pansion)d(on)g(the)g(right-hand)g(side)g(mentions)h(the)f(very)f
(type)h(being)g(de\002ned.)658 915 y(Instead,)f(it)h(can)f(be)g(r)o
(ead)g(informally)h(as)f(a)h(speci\002cation)g(of)f(an)h
F7(in\002nite)g(tr)o(ee)p Gd(:)975 2247 y @beginspecial
1 @llx 648 @lly 260 @urx 792 @ury 2590 @rwi @setspecial
%%BeginDocument: figures/natlist.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: 1 648 260 792
%%Title: book/figures/natlist
%%CreationDate: Thu Mar  2 05:19:45 2000
%%Creator: Tgif-4.1.25 by William Chia-Wei Cheng (william@cs.UCLA.edu)
%%ProducedBy: (unknown)
%%Pages: 1
%%DocumentFonts: (atend)
%%EndComments
%%BeginProlog

/tgifdict 55 dict def
tgifdict begin

/tgifellipsedict 6 dict def
tgifellipsedict /mtrx matrix put

/TGEL % tgifellipse
 { tgifellipsedict begin
      /yrad exch def
      /xrad exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      xrad yrad scale
      0 0 1 0 360 arc
      savematrix setmatrix
   end
 } def

/tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put

/TGAT % tgifarrowtip
 { tgifarrowtipdict begin
      /dy exch def
      /dx exch def
      /h exch def
      /w exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      dy dx atan rotate
      0 0 moveto
      w neg h lineto
      w neg h neg lineto
      savematrix setmatrix
   end
 } def

/TGMAX
 { exch dup 3 1 roll exch dup 3 1 roll gt { pop } { exch pop } ifelse
 } def
/TGMIN
 { exch dup 3 1 roll exch dup 3 1 roll lt { pop } { exch pop } ifelse
 } def
/TGSW { stringwidth pop } def

/bd { bind def } bind def

/GS { gsave } bd
/GR { grestore } bd
/NP { newpath } bd
/CP { closepath } bd
/CHP { charpath } bd
/CT { curveto } bd
/L { lineto } bd
/RL { rlineto } bd
/M { moveto } bd
/RM { rmoveto } bd
/S { stroke } bd
/F { fill } bd
/TR { translate } bd
/RO { rotate } bd
/SC { scale } bd
/MU { mul } bd
/DI { div } bd
/DU { dup } bd
/NE { neg } bd
/AD { add } bd
/SU { sub } bd
/PO { pop } bd
/EX { exch } bd
/CO { concat } bd
/CL { clip } bd
/EC { eoclip } bd
/EF { eofill } bd
/IM { image } bd
/IMM { imagemask } bd
/ARY { array } bd
/SG { setgray } bd
/RG { setrgbcolor } bd
/SD { setdash } bd
/W { setlinewidth } bd
/SM { setmiterlimit } bd
/SLC { setlinecap } bd
/SLJ { setlinejoin } bd
/SH { show } bd
/FF { findfont } bd
/MS { makefont setfont } bd
/AR { arcto 4 {pop} repeat } bd
/CURP { currentpoint } bd
/FLAT { flattenpath strokepath clip newpath } bd
/TGSM { tgiforigctm setmatrix } def
/TGRM { savematrix setmatrix } def

end

%%EndProlog
%%Page: 1 1

%%PageBoundingBox: 1 648 260 792
tgifdict begin
/tgifsavedpage save def

1 SM
1 W

0 SG

72 0 MU 72 11 MU TR
72 128 DI 100.000 MU 100 DI DU NE SC

GS

/tgiforigctm matrix currentmatrix def

% TEXT
NP
0 SG
   GS
      1 W
      10 18 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (<nil:  ,cons:  >) SH
      GR
   GR

% OVAL
0 SG
NP 70 14 3 3 TGEL F
GS
   GS
      NP 70 14 3 3 TGEL
      S
   GR
GR

% OVAL
0 SG
NP 148 15 3 3 TGEL F
GS
   GS
      NP 148 15 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      69 14 M
      22 -18 atan DU cos 8.000 MU 51 exch SU
      exch sin 8.000 MU 36 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      51 36 8.000 3.000 -18 22 TGAT
   1 SG CP F
   0 SG
   NP
      51 36 8.000 3.000 -18 22 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      148 14 M
      25 9 atan DU cos 8.000 MU 157 exch SU
      exch sin 8.000 MU 39 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      157 39 8.000 3.000 9 25 TGAT
   1 SG CP F
   0 SG
   NP
      157 39 8.000 3.000 9 25 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      32 50 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Unit) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      130 54 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            ({ , }) SH
      GR
   GR

% OVAL
0 SG
NP 166 51 3 3 TGEL F
GS
   GS
      NP 166 51 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      166 50 M
      26 20 atan DU cos 8.000 MU 186 exch SU
      exch sin 8.000 MU 76 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      186 76 8.000 3.000 20 26 TGAT
   1 SG CP F
   0 SG
   NP
      186 76 8.000 3.000 20 26 TGAT
   CP F
GR

% OVAL
0 SG
NP 147 50 3 3 TGEL F
GS
   GS
      NP 147 50 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      147 49 M
      24 -38 atan DU cos 8.000 MU 109 exch SU
      exch sin 8.000 MU 73 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      109 73 8.000 3.000 -38 24 TGAT
   1 SG CP F
   0 SG
   NP
      109 73 8.000 3.000 -38 24 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      92 87 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Nat) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      144 90 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (<nil:  ,cons:  >) SH
      GR
   GR

% OVAL
0 SG
NP 204 86 3 3 TGEL F
GS
   GS
      NP 204 86 3 3 TGEL
      S
   GR
GR

% OVAL
0 SG
NP 282 87 3 3 TGEL F
GS
   GS
      NP 282 87 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      203 86 M
      22 -18 atan DU cos 8.000 MU 185 exch SU
      exch sin 8.000 MU 108 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      185 108 8.000 3.000 -18 22 TGAT
   1 SG CP F
   0 SG
   NP
      185 108 8.000 3.000 -18 22 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      282 86 M
      25 9 atan DU cos 8.000 MU 291 exch SU
      exch sin 8.000 MU 111 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      291 111 8.000 3.000 9 25 TGAT
   1 SG CP F
   0 SG
   NP
      291 111 8.000 3.000 9 25 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      166 122 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Unit) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      264 126 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            ({ , }) SH
      GR
   GR

% OVAL
0 SG
NP 300 123 3 3 TGEL F
GS
   GS
      NP 300 123 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      300 122 M
      26 20 atan DU cos 8.000 MU 320 exch SU
      exch sin 8.000 MU 148 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      320 148 8.000 3.000 20 26 TGAT
   1 SG CP F
   0 SG
   NP
      320 148 8.000 3.000 20 26 TGAT
   CP F
GR

% OVAL
0 SG
NP 281 122 3 3 TGEL F
GS
   GS
      NP 281 122 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      281 121 M
      24 -38 atan DU cos 8.000 MU 243 exch SU
      exch sin 8.000 MU 145 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      243 145 8.000 3.000 -38 24 TGAT
   1 SG CP F
   0 SG
   NP
      243 145 8.000 3.000 -38 24 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      226 159 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Nat) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      280 163 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (<nil:  ,cons:  >) SH
      GR
   GR

% OVAL
0 SG
NP 340 159 3 3 TGEL F
GS
   GS
      NP 340 159 3 3 TGEL
      S
   GR
GR

% OVAL
0 SG
NP 418 160 3 3 TGEL F
GS
   GS
      NP 418 160 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      339 159 M
      22 -18 atan DU cos 8.000 MU 321 exch SU
      exch sin 8.000 MU 181 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      321 181 8.000 3.000 -18 22 TGAT
   1 SG CP F
   0 SG
   NP
      321 181 8.000 3.000 -18 22 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      418 159 M
      25 9 atan DU cos 8.000 MU 427 exch SU
      exch sin 8.000 MU 184 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      427 184 8.000 3.000 9 25 TGAT
   1 SG CP F
   0 SG
   NP
      427 184 8.000 3.000 9 25 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      302 195 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Unit) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      400 199 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            ({ , }) SH
      GR
   GR

% OVAL
0 SG
NP 436 196 3 3 TGEL F
GS
   GS
      NP 436 196 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      436 195 M
      26 20 atan DU cos 8.000 MU 456 exch SU
      exch sin 8.000 MU 221 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      456 221 8.000 3.000 20 26 TGAT
   1 SG CP F
   0 SG
   NP
      456 221 8.000 3.000 20 26 TGAT
   CP F
GR

% OVAL
0 SG
NP 417 195 3 3 TGEL F
GS
   GS
      NP 417 195 3 3 TGEL
      S
   GR
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      417 194 M
      24 -38 atan DU cos 8.000 MU 379 exch SU
      exch sin 8.000 MU 218 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      379 218 8.000 3.000 -38 24 TGAT
   1 SG CP F
   0 SG
   NP
      379 218 8.000 3.000 -38 24 TGAT
   CP F
GR

% TEXT
NP
0 SG
   GS
      1 W
      362 232 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Nat) SH
      GR
   GR

% OVAL
0 SG
NP 458 227 3 3 TGEL F
GS
   GS
      NP 458 227 3 3 TGEL
      S
   GR
GR

% OVAL
0 SG
NP 458 239 3 3 TGEL F
GS
   GS
      NP 458 239 3 3 TGEL
      S
   GR
GR

% OVAL
0 SG
NP 458 250 3 3 TGEL F
GS
   GS
      NP 458 250 3 3 TGEL
      S
   GR
GR

GR
tgifsavedpage restore
end
showpage

%%Trailer
%MatchingCreationDate: Thu Mar  2 05:19:45 2000
%%DocumentFonts: Courier
%%EOF

%%EndDocument
 @endspecial 575 2446 a F5(\017)41 b Gd(The)17 b(r)o(ecursive)f
(equation)j(specifying)f(this)g(in\002nite)g(tr)o(ee)f(type)g(is)h
(similar)g(to)g(the)g(equa-)658 2546 y(tion)32 b(specifying)f(the)h(r)o
(ecursive)e(function)i F4(factorial)27 b Gd(that)k(we)h(saw)f(on)h
(page)e(42.)658 2645 y(Her)o(e,)19 b(as)h(ther)o(e,)g(it)h(will)h(be)e
(convenient)i(to)f(make)f(this)i(equation)f(into)h(a)e(pr)o(oper)g
(de\002-)658 2745 y(nition)i(by)e(intr)o(oducing)i(an)e(explicit)h(r)o
(ecursion)f(operator)h(on)g(the)g(right-hand)g(side:)824
2903 y FT(NatList)40 b(=)g FM(\026)p FT(X.)f(<nil:Unit,)j
(cons:{Nat,X}>;)658 3102 y Gd(Intuitively)-9 b(,)20 b(this)g
(de\002nition)g(is)g(r)o(ead,)e(\223Let)h F4(NatList)d
Gd(be)j(the)h(in\002nite)g(type)g(that)f(satis-)658 3202
y(\002es)i(the)f(equation)i F4(X)h FY(=)f F4(<nil:Unit,)40
b(cons:{Nat,X}>)-6 b Gd(.\224)658 3334 y(\(Strictly)19
b(speaking,)g(we)h(should)g(say)g(\223the)f F7(smallest)p
Gd(\224)h(type)f F4(X)g Gd(that)h(satis\002es)g(the)g(equa-)658
3434 y(tion...\224,)32 b(since)g F4(X)41 b FY(=)h F4(<nil:Unit,)d
(cons:{Nat,X}>)26 b Gd(might)31 b(have)g(mor)o(e)f(than)i(one)658
3534 y(solution,)21 b(but)f(this)h(is)f(a)f(nicety)i(that)f(need)f(not)
i(concern)f(us)g(for)g(now)-8 b(.)26 b(W)-8 b(e)20 b(r)o(eturn)f(to)i
(it)658 3633 y(in)g(Section)g Ge(??)o Gd(.\))575 3799
y F5(\017)41 b Gd(Of)29 b(course,)i(the)e(typechecker)g(can't)g
(actually)g(manipulate)f(in\002nite)j(tr)o(ees;)h(later)d(in)658
3899 y(the)k(chapter)f(we)h(will)h(see)f(two)h(dif)o(fer)o(ent)d(ways)i
(of)h(dealing)f(with)h Gb(\026)f Gd(types)g(mor)o(e)658
3999 y(r)o(ealistically)-9 b(.)p eop
%%Page: 133 134
133 133 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(133)450 686 y Gj(15.1)119
b(Examples)450 892 y F8(Lists)450 1050 y Gd(\(Note)29
b(that,)j(unlike)e(Section)g(9.10,)g(our)g(lists)g(her)o(e)f(have)g
(only)i(natural)e(numbers)h(as)g(ele-)450 1149 y(ments.\))616
1284 y FT(nil)40 b(=)f(<nil=unit>)j(as)e(NatList;)529
1345 y FS(I)616 1355 y FT(nil)g(:)f(NatList)616 1490
y(cons)h(=)g FM(\025)p FT(n:Nat.)g FM(\025)p FT(l:NatList.)h
(<cons={n,l}>)h(as)e(NatList;)529 1552 y FS(I)616 1562
y FT(cons)g(:)g(Nat)g FO(!)f FT(NatList)h FO(!)f FT(NatList)616
1697 y(null)h(=)g FM(\025)p FT(l:NatList.)969 1788 y(case)g(l)g(of)1048
1879 y(nil=u)g FO(\))f FT(true)969 1971 y(|)h(cons=p)g
FO(\))f FT(false;)529 2032 y FS(I)616 2042 y FT(null)h(:)g(NatList)g
FO(!)f FT(Bool)616 2177 y(hd)h(=)f FM(\025)p FT(l:NatList.)891
2268 y(case)h(l)f(of)969 2359 y(nil=u)h FO(\))f FT(0)891
2451 y(|)g(cons=p)i FO(\))e FT(p.1;)529 2512 y FS(I)616
2522 y FT(hd)h(:)f(NatList)i FO(!)e FT(Nat)450 2665 y
Gd(\(Note,)20 b(her)o(e,)f(that)i(we've)f(arbitrarily)f(decided)g(to)i
(de\002ne)f(the)h F4(hd)f Gd(of)g(an)g(empty)h(list)g(to)g(be)f
F4(0)o Gd(.)450 2765 y(W)-8 b(e)21 b(might)h(alternatively)e(have)g
(raised)g(an)h(exception.\))616 2891 y FT(tl)40 b(=)f
FM(\025)p FT(l:NatList.)891 2982 y(case)h(l)f(of)969
3074 y(nil=u)h FO(\))f FT(l)891 3165 y(|)g(cons=p)i FO(\))e
FT(p.2;)529 3217 y FS(I)616 3227 y FT(tl)h(:)f(NatList)i
FO(!)e FT(NatList)450 3371 y Gd(\(Similarly)-9 b(,)28
b(her)o(e,)g(we've)f(decided)f(to)i(de\002ne)f(the)g
F4(tl)g Gd(of)g(an)g(empty)h(list)g(to)f(be)g(the)h(empty)450
3470 y(list.)e(W)-8 b(e)21 b(might)h(again)e(have)g(raised)g(an)h
(exception.\))575 3570 y(W)-8 b(e)18 b(can)g(put)g(all)g(these)h
(de\002nitions)g(together)g(to)g(write)f(a)g(r)o(ecursive)f(function)i
(that)f(sums)450 3669 y(the)j(elements)g(of)g(a)f(list:)616
3796 y FT(plus)40 b(=)g(fix)g(\()p FM(\025)p FT(p:Nat)p
FO(!)p FT(Nat)p FO(!)q FT(Nat.)1165 3887 y FM(\025)p
FT(m:Nat.)g FM(\025)p FT(n:Nat.)1244 3978 y(if)f(iszero)i(m)e(then)i(n)
e(else)h(succ)g(\(p)g(\(pred)g(m\))g(n\)\);)529 4031
y FS(I)616 4041 y FT(plus)g(:)g(Nat)g FO(!)f FT(Nat)g
FO(!)h FT(Nat)450 4184 y F7(\(The)20 b(de\002nition)g(of)h
FQ(plus)e F7(belongs)j(somewher)o(e)e(earlier!\))616
4310 y FT(sumlist)41 b(=)e(fix)h(\()p FM(\025)p FT(s:NatList)p
FO(!)r FT(Nat.)g FM(\025)p FT(l:NatList.)1283 4402 y(if)g(null)g(l)f
(then)h(0)g(else)g(plus)g(\(hd)g(l\))g(\(s)f(\(tl)h(l\)\)\);)529
4454 y FS(I)616 4464 y FT(sumlist)h(:)e(NatList)i FO(!)e
FT(Nat)616 4599 y(mylist)i(=)e(cons)h(2)g(\(cons)g(3)g(\(cons)g(5)f
(nil\)\);)529 4660 y FS(I)616 4670 y FT(mylist)i(:)e(NatList)616
4805 y(sumlist)i(mylist;)529 4866 y FS(I)616 4876 y FT(10)f(:)f(Nat)p
eop
%%Page: 134 135
134 134 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(134)450 683 y F8(Hungry)25
b(Functions)450 841 y Gd(As)d(another)h(simple)g(illustration)g(of)g
(the)g(use)f(of)h(r)o(ecursive)e(types,)i(her)o(e)f(is)g(a)h(type)f(of)
g(func-)450 941 y(tions)g(that)f(can)f(accept)g(any)g(number)h(of)g
(numeric)g(ar)o(guments:)616 1097 y FT(Hungry)41 b(=)e
FM(\026)p FT(A.)g(Nat)h FO(!)f FT(A;)450 1261 y Gd(An)33
b(element)g(of)f(this)i(type)f(can)f(be)h(de\002ned)f(using)i(the)f
(least)f(\002xed)g(point)i(operator)e(on)450 1360 y(values:)616
1516 y FT(f)39 b(=)694 1607 y(fix)773 1699 y(\()p FM(\025)p
FT(f:)h(Nat)p FO(!)p FT(Hungry.)812 1790 y FM(\025)p
FT(n:Nat.)891 1881 y(f\);)529 2001 y FS(I)616 2011 y
FT(f)f(:)h(Nat)g FO(!)f FT(Nat)h FO(!)f FT(Hungry)616
2183 y(f)g(0)h(1)f(2)h(3)f(4)h(5;)529 2318 y FS(I)616
2328 y FT(\()p FM(\025)p FT(n:Nat.)h(fix)e FM(\025)p
FT(f':Nat)p FO(!)q FT(Hungry.)i FM(\025)p FT(n':Nat.f'\))694
2419 y(:)f FM(\026)p FT(A.)f(Nat)h FO(!)f FT(A)450 2662
y F8(Recursive)25 b(V)-11 b(alues)24 b(from)h(Recursive)g(T)-9
b(ypes)450 2820 y Gd(A)25 b(mor)o(e)g(challenging)h(example\227and)f
(one)g(that)h(r)o(eveals)e(some)i(of)f(the)g(power)h(of)f(the)h(ex-)450
2919 y(tension)f(we)f(ar)o(e)e(making\227uses)i(r)o(ecursive)f(types)h
(to)g(write)g(down)g(a)f(well-typed)h(version)450 3019
y(of)d(the)g(least-\002xed-point)f(combinator:)616 3175
y FT(fixedpoint)1006 3184 y FL(T)1091 3175 y FT(=)694
3266 y FM(\025)p FT(f:T)p FO(!)q FT(T.)773 3357 y(\()p
FM(\025)p FT(x:\()p FM(\026)p FT(A.A)p FO(!)q FT(T\).)39
b(f)h(\(x)g(x\)\))773 3449 y(\()p FM(\025)p FT(x:\()p
FM(\026)p FT(A.A)p FO(!)q FT(T\).)f(f)h(\(x)g(x\)\);)529
3568 y FS(I)616 3578 y FT(fixedpoint)1006 3587 y FL(T)1091
3578 y FT(:)g(\(T)p FO(!)p FT(T\))g FO(!)f FT(T)450 3820
y F8(Untyped)24 b(Lambda-Calculus,)h(Redux)450 3978 y
Gd(Per)o(haps)32 b(the)h(best)g(illustration)i(of)e(the)g(power)g(of)g
(r)o(ecursive)f(types)h(is)g(the)h(observation)450 4078
y(that)27 b(it)h(is)f(possible)h(to)f(embed)g(the)g(whole)h(untyped)g
(lambda-calculus)d(\(in)j(a)e(well-typed)450 4178 y(way!\))33
b(into)25 b(a)d(statically)i(typed)f(calculus)g(with)h(r)o(ecursive)e
(types.)34 b(Let)23 b F4(D)g Gd(be)g(the)h(following)450
4277 y Ge(universal)19 b(type)p Gd(:)616 4433 y FT(D)39
b(=)h FM(\026)p FT(X.)f(X)p FO(!)p FT(X;)450 4597 y Gd(\(Note)30
b(that)g(the)g(form)g(of)f F4(D)p Gd('s)h(de\002nition)h(is)f(r)o
(eminiscent)g(of)g(the)g(de\002ning)h(pr)o(operties)e(of)450
4697 y(\223universal)e(domains\224)g(in)g(denotational)h(semantics.\))
45 b(Now)27 b(de\002ne)g(an)g(\223injection)h(func-)450
4797 y(tion\224)21 b F4(lam)f Gd(mapping)h(functions)g(fr)o(om)g
F4(D)f Gd(to)h F4(D)g Gd(into)g(elements)g(of)g F4(D)f
Gd(as)h(follows:)616 4952 y FT(lam)40 b(=)f FM(\025)p
FT(f:D)p FO(!)q FT(D.)g(f;)p eop
%%Page: 135 136
135 135 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(135)529 673 y FS(I)616
683 y FT(lam)40 b(:)f(\(D)p FO(!)q FT(D\))g FO(!)g FT(D)h
FO(!)f FT(D)450 866 y Gd(T)-8 b(o)25 b(apply)e(one)i(element)f(of)g
F4(D)g Gd(to)g(another)-6 b(,)25 b(we)f(simply)h(unfold)f(the)g
(\002rst,)h(yielding)g(a)e(func-)450 965 y(tion,)e(and)g(apply)f(this)i
(to)f(the)g(second:)616 1123 y FT(ap)40 b(=)f FM(\025)p
FT(f:D.)h FM(\025)p FT(a:D.)g(f)f(a;)529 1247 y FS(I)616
1257 y FT(ap)h(:)f(D)h FO(!)f FT(D)g FO(!)g FT(\()p FM(\026)p
FT(X.)h(X)f FO(!)g FT(X\))450 1439 y Gd(Now)-8 b(,)34
b(suppose)d F4(M)g Gd(is)g(a)g(closed)g(pur)o(e)f(lambda-term)f
(involving)k(just)e(variables,)i(abstrac-)450 1539 y(tions,)i(and)c
(applications.)57 b(Then)31 b(we)h(can)f(constr)o(uct)h(an)f(element)g
(of)g F4(D)g Gd(r)o(epr)o(esenting)g F4(M)o Gd(,)450
1638 y(written)21 b F4(M)783 1608 y Fw(?)821 1638 y Gd(,)f(in)i(a)e
(uniform)h(way)g(as)f(follows:)699 1806 y F4(x)743 1776
y Fw(?)1061 1806 y FY(=)82 b F4(x)699 1906 y FY(\()p
Gb(\025)p F4(x.M)o FY(\))939 1876 y Fw(?)1061 1906 y
FY(=)g F4(lam)43 b(\()p Gb(\025)p F4(x:D.)e(M)1731 1876
y Fw(?)1769 1906 y F4(\))699 2006 y FY(\()p F4(M)j(N)o
FY(\))894 1975 y Fw(?)1061 2006 y FY(=)82 b F4(ap)43
b(M)1381 1975 y Fw(?)1462 2006 y F4(N)1506 1975 y Fw(?)450
2171 y Gd(For)27 b(example,)g(her)o(e)e(is)i(how)h(the)e(untyped)h
(\002xed)f(point)h(combinator)g(is)g(expr)o(essed)e(as)h(an)450
2270 y(element)21 b(of)g F4(D)o Gd(:)616 2428 y FT(fixD)40
b(=)g(lam)g(\()p FM(\025)p FT(f:D.)1008 2519 y(ap)g(\(lam)g(\()p
FM(\025)p FT(x:D.)g(ap)g(f)f(\(ap)h(x)g(x\)\)\))1126
2611 y(\(lam)g(\()p FM(\025)p FT(x:D.)g(ap)g(f)f(\(ap)h(x)g(x\)\)\)\);)
529 2734 y FS(I)616 2744 y FT(fixD)g(:)g(D)f FO(!)g FT(D)450
2927 y Ge(15.1.1)18 b(Exercise:)39 b Gd(Note)32 b(that)f(the)g(term)g
(de\002ning)h F4(fixedpoint)27 b Gd(contains)32 b(many)f(r)o(edices.)
450 3026 y(Use)22 b(the)h(r)o(eduction)f(r)o(ules)h(\()r(C)t(-)t(U)t
F6(N)t(F)t(O)t(L)t(D)t Gd(F)t F6(O)t(L)t(D)i Gd(plus)e(the)g(usual)g
Gb(\014)p Gd(-r)o(eduction)e(r)o(ule\))i(to)g(\002nd)450
3126 y(its)e(normal)g(form.)26 b(What)21 b(is)g(the)g(type-erasur)o(e)d
(of)j(this)h(normal)f(form?)655 b FZ(2)575 3309 y Gd(W)-8
b(e)17 b(can)h(go)g(even)f(further)-6 b(,)18 b(if)f(we)h(work)g(in)g(a)
f(language)h(with)g(variants)f(as)h(in)g(Section)f(9.7.)450
3408 y(Then)28 b(we)f(can)g(extend)f(the)i(datatype)e(of)h(pur)o(e)f
(lambda-terms)g(to)i(include)f(numbers)h(like)450 3508
y(this:)616 3666 y FT(D)39 b(=)h FM(\026)p FT(X.)f(<nat:Nat,)i(fn:X)p
FO(!)q FT(X>;)450 3832 y Gd(That)26 b(is,)j(an)d(element)h(of)g
F4(D)f Gd(is)h(either)g(a)f(number)h(or)f(a)h(function)g(fr)o(om)f
F4(D)h Gd(to)g F4(D)o Gd(,)h(tagged)e F4(nat)450 3931
y Gd(or)21 b F4(fn)o Gd(,)g(r)o(epectively)-9 b(.)26
b(It)21 b(will)h(also)f(be)g(convenient)h(to)g(have)e(an)h(abbr)o
(eviation)f(for)h(the)h(\223once-)450 4031 y(unr)o(olled\224)e(body)h
(of)g F4(D)o Gd(:)616 4189 y FT(DBody)40 b(=)g(<nat:Nat,)h(fn:D)p
FO(!)q FT(D>;)450 4355 y Gd(The)21 b(implementation)h(of)e(the)h
F4(lam)f Gd(constr)o(uctor)i(is)f(essentially)g(the)g(same)f(as)h
(befor)o(e:)616 4513 y FT(lam)40 b(=)f FM(\025)p FT(f:D)p
FO(!)q FT(D.)930 4604 y(<fn=f>)h(as)g(DBody;)529 4727
y FS(I)616 4737 y FT(lam)g(:)f(\(D)p FO(!)q FT(D\))g
FO(!)g FT(DBody)450 4920 y Gd(The)21 b(implementation)h(of)e
F4(ap)p Gd(,)g(though,)i(is)f(dif)o(fer)o(ent)e(in)i(an)f(inter)o
(esting)h(way:)p eop
%%Page: 136 137
136 136 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(136)616 683 y FT(ap)40
b(=)694 774 y FM(\025)p FT(f:D.)g FM(\025)p FT(a:D.)773
866 y(case)g(f)g(of)851 957 y(nat=n)h FO(\))e FT(diverge)1476
966 y FL(D)1573 957 y FT(unit)773 1048 y(|)g(fn=f)i FO(\))e
FT(f)g(a;)529 1172 y FS(I)616 1182 y FT(ap)h(:)f(D)h
FO(!)f FT(D)g FO(!)g FT(D)450 1364 y Gd(Notice)c(how)g(closely)g(the)g
(tag-checking)f(going)i(on)f(her)o(e)f(r)o(esembles)g(the)g(r)o
(un-time)h(tag)450 1464 y(checking)20 b(inside)h(an)e(implementation)i
(of)f(a)g(str)o(ongly-but-latently)g(typed)f(language)h(such)450
1564 y(as)h(Scheme)f([)p Ge(?)p Gd(].)25 b(In)c(this)h(sense,)f(typed)f
(computation)i(may)f(be)f(said)h(to)g(\223include\224)f(untyped)450
1663 y(or)i(dynamically)f(typed)g(computation.)29 b(Similar)21
b(tag)h(checking)g(is)g(needed)e(in)i(or)o(der)f(to)h(de-)450
1763 y(\002ne)f(the)g(successor)g(function)h(on)f(elements)g(of)g
F4(D)o Gd(:)616 1921 y FT(suc)40 b(=)694 2012 y FM(\025)p
FT(f:D.)773 2103 y(case)g(f)g(of)851 2195 y(nat=n)h FO(\))e
FT(\(<nat=succ)i(n>)f(as)g(DBody\))773 2286 y(|)f(fn=f)i
FO(\))e FT(diverge)1437 2295 y FL(D)1534 2286 y FT(unit;)529
2410 y FS(I)616 2420 y FT(suc)h(:)f(D)h FO(!)f FT(DBody)450
2602 y Gd(The)21 b(injection)h(of)f F4(0)f Gd(into)i
F4(D)e Gd(is)h(trivial:)616 2760 y FT(zro)40 b(=)f(<nat=0>)i(as)f
(DBody;)529 2883 y FS(I)616 2893 y FT(zro)g(:)f(DBody)450
3076 y Gd(Booleans,)18 b(conditionals,)h(and)e(the)g(pr)o(edecessor)f
(and)h(zer)o(o-testing)g(functions)h(can)f(be)g(writ-)450
3176 y(ten)k(in)g(a)f(similar)h(way)-9 b(.)450 3358 y
Ge(15.1.2)18 b(Exercise:)39 b Gd(Use)21 b(the)f(untyped)h(\002xed)f
(point)h(combinator)g(that)g(we)f(saw)h(above)f(to)h(de-)450
3458 y(\002ne)g(an)g(untyped)f(factorial)g(function)i(on)f
F4(D)p Gd(.)1512 b FZ(2)450 3641 y Ge(15.1.3)18 b(Exercise)h
([Homework]:)41 b F7(\(Due)30 b(on)g(Mar)o(ch)g(9.\))53
b Gd(Using)31 b(the)g F4(fullequirec)25 b Gd(checker)423
b FP(\()450 3740 y Gd(fr)o(om)20 b(the)h(course)g(web)g(dir)o(ectory)-9
b(,)19 b(extend)h(the)h(datatype)f F4(D)g Gd(to)h(include)g(untyped)g
(r)o(ecor)o(ds)616 3898 y FT(D)39 b(=)h FM(\026)p FT(X.)f(<nat:Nat,)i
(fn:X)p FO(!)q FT(X,)f(rcd:Nat)p FO(!)q FT(X>;)450 4064
y Gd(and)24 b(implement)g(r)o(ecor)o(d)f(constr)o(uction)j(and)d
(\002eld)h(pr)o(ojection.)36 b(For)25 b(simplicity)-9
b(,)25 b(use)f(natu-)450 4164 y(ral)d(numbers)h(as)f(\002eld)g
(labels\227i.e.,)g(r)o(ecor)o(ds)f(ar)o(e)g(r)o(epr)o(esented)f(as)i
(functions)i(fr)o(om)e(natural)450 4263 y(numbers)g(to)g(elements)f(of)
h F4(D)o Gd(.)26 b(\(N.b.:)e(this)d(exer)o(cise)e(has)i(nothing)h(to)f
(do)f(with)h(hungry)g(func-)450 4363 y(tions!\))2714
b FZ(2)p eop
%%Page: 137 138
137 137 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(137)450 683 y F8(Recursive)25
b(Objects)450 841 y Gd(A)20 b(simpler)-6 b(,)21 b(\223pur)o(ely)f
(functional,\224)g(r)o(epr)o(esentation)g(of)g(counter)h(objects.)616
1008 y FT(Counter)41 b(=)e FM(\026)p FT(P.)h({get:Nat,)h(inc:Unit)p
FO(!)q FT(P};)616 1176 y(p)e(=)694 1267 y(let)h(create)h(=)773
1358 y(fix)851 1450 y(\()p FM(\025)p FT(cr:)f({x:Nat})p
FO(!)r FT(Counter.)930 1541 y FM(\025)p FT(s:)f({x:Nat}.)1008
1632 y({get)h(=)g(s.x,)1048 1724 y(inc)f(=)h FM(\025)p
FT(_:Unit.)g(cr)g({x=succ\(s.x\)}}\))694 1815 y(in)773
1906 y(create)h({x=0};)529 2032 y FS(I)616 2042 y FT(p)e(:)h({get:Nat,)
h(inc:Unit)p FO(!)r FT(Counter})616 2210 y(p1)f(=)f(p.inc)i(unit;)529
2336 y FS(I)616 2346 y FT(p1)f(:)f(Counter)616 2513 y(p1.get;)529
2639 y FS(I)616 2649 y FT(1)g(:)h(Nat)450 2933 y Gj(15.2)119
b(Equi-recursive)28 b(T)-11 b(ypes)450 3172 y(15.3)119
b(Iso-recursive)29 b(T)-11 b(ypes)450 3361 y Gd(A)21
b(dif)o(fer)o(ent,)d(and)j(even)f(simpler)-6 b(,)21 b(way)g(of)g
(dealing)g(with)g(r)o(ecursive)f(types)h(is)g(to)h(\223make)e(the)450
3461 y(isomorphism)j(explicit\224...)450 3621 y Gb(\025\026)e
Ge(:)26 b(Iso-recursive)19 b(types)1844 b FV(!)35 b F4(B)3367
3621 y
 gsave currentpoint translate 0 248418 7800 div 653834 7800 div 425418
-7800 div box .9 setgray fill grestore
 3367 3621 a 16 w Gb(\026)p 409 3703 9 36 v 418
3674 3000 6 v 3418 3674 38 6 v 3455 3703 9 36 v 450 3793
a F7(New)21 b(syntactic)e(forms)592 3924 y F4(t)61 b
Gd(::=)i(...)1695 b F7(terms)852 4023 y
 gsave currentpoint translate 0 179129 7800 div 3689646 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4023 a 15
w F4(fold)42 b([T])h(t)1366 b F7(folding)852 4123 y
 gsave currentpoint translate 0 179129 7800 div 4377768 7800 div 579629
-7800 div box .9 setgray fill grestore
 852
4123 a 15 w F4(unfold)41 b([T])i(t)1279 b F7(unfolding)592
4322 y F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 4422
y
 gsave currentpoint translate 0 179129 7800 div 3689646 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4422 a 15 w F4(fold)42 b([T])h(v)1366 b F7(folding)592
4621 y F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 4721
y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4721 a 15 w F4(X)1759 b F7(type)20 b(variable)852
4820 y
 gsave currentpoint translate 0 248418 7800 div 1686017 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4820 a 15 w Gb(\026)p F4(X.T)1620 b F7(r)o(ecursive)21
b(type)p eop
%%Page: 138 139
138 138 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)784
b Gd(1)t(5)t(.)29 b(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)d
Gd(T)t F6(Y)t(P)t(E)t(S)786 b Gd(138)590 700 y Gb(\000)62
b Gd(::=)h(...)1695 b F7(contexts)852 799 y
 gsave currentpoint translate 0 124518 7800 div 1310739 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 799 a
15 w Gb(\000)6 b(;)17 b F4(X)1668 b F7(type)20 b(variable)h(binding)450
1014 y(New)g(evaluation)f(rules)p 3096 927 355 4 v 3096
1039 4 113 v 1960 w F4(t)j F5(\000)-15 b FV(!)23 b F4(t)3398
984 y FX(0)p 3447 1039 V 3096 1042 355 4 v 1098 1161
a
 gsave currentpoint translate 0 419430 7800 div 10697051 7800 div 747110
-7800 div box .9 setgray fill grestore
 1098 1161 a 1122 1160 a F4(unfold)42 b([S])g(\(fold)f([T])i(v)2081
1172 y F1(1)2122 1160 y F4(\))22 b F5(\000)-14 b FV(!)23
b F4(v)2389 1172 y F1(1)2906 1161 y Gd(\()r(E)t(-)t(F)t
F6(O)t(L)t(D)t Gd(B)t F6(E)t(T)o(A)q Gd(\))1176 1403
y
 gsave currentpoint translate 0 851966 7800 div 9478093 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1176 1403 a 1602 1347 a F4(t)1645 1359 y F1(1)1709
1347 y F5(\000)-14 b FV(!)23 b F4(t)1917 1317 y FX(0)1909
1371 y F1(1)p 1210 1384 1133 4 v 1210 1456 a F4(fold)42
b([T])g(t)1645 1468 y F1(1)1709 1456 y F5(\000)-14 b
FV(!)23 b F4(fold)42 b([T])g(t)2309 1427 y FX(0)2302
1480 y F1(1)3101 1403 y Gd(\()r(E)t(-)t(F)t F6(O)t(L)t(D)r
Gd(\))1088 1700 y
 gsave currentpoint translate 0 851966 7800 div 10854337 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1088 1700 a 1602 1644 a F4(t)1645 1656
y F1(1)1709 1644 y F5(\000)-14 b FV(!)23 b F4(t)1917
1614 y FX(0)1909 1667 y F1(1)p 1122 1681 1307 4 v 1122
1753 a F4(unfold)42 b([T])g(t)1645 1765 y F1(1)1709 1753
y F5(\000)-14 b FV(!)23 b F4(unfold)41 b([T])h(t)2396
1724 y FX(0)2389 1777 y F1(1)2983 1700 y Gd(\()r(E)t(-)t(U)t
F6(N)t(F)t(O)t(L)t(D)q Gd(\))450 1933 y F7(New)21 b(typing)e(rules)p
3067 1850 383 4 v 3067 1958 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 1958 V 3067 1961 383
4 v 1133 2134 a
 gsave currentpoint translate 0 851966 7800 div 10150304 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1133 2134 a 1167 2078 a F4(U)g FY(=)g
Gb(\026)p F4(X.T)1502 2090 y F1(1)1708 2078 y Gb(\000)g
F5(`)g F4(t)1893 2090 y F1(1)1957 2078 y FF(:)g F0(f)p
F4(X)f F5(7)p FV(!)i F4(U)o F0(g)p F4(T)2344 2090 y F1(1)p
1167 2115 1218 4 v 1396 2188 a Gb(\000)f F5(`)g F4(fold)42
b([U])g(t)1974 2200 y F1(1)2038 2188 y FF(:)23 b F4(U)3106
2134 y Gd(\()r(T)o(-)t(F)t F6(O)t(L)t(D)r Gd(\))1164
2431 y
 gsave currentpoint translate 0 851966 7800 div 9663765 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1164 2431 a 1322 2375 a F4(U)g FY(=)g Gb(\026)p
F4(X.T)1657 2387 y F1(1)1863 2375 y Gb(\000)g F5(`)g
F4(t)2048 2387 y F1(1)2112 2375 y FF(:)g F4(U)p 1198
2412 1157 4 v 1198 2485 a Gb(\000)g F5(`)g F4(unfold)41
b([U])h(t)1863 2497 y F1(1)1926 2485 y FF(:)23 b F0(f)p
F4(X)g F5(7)p FV(!)g F4(U)o F0(g)p F4(T)2313 2497 y F1(1)2987
2431 y Gd(\()r(T)o(-)t(U)t F6(N)t(F)t(O)t(L)t(D)r Gd(\))p
409 2577 9 36 v 418 2577 3000 6 v 3418 2577 38 6 v 3455
2577 9 36 v 450 2760 a Ge(15.3.1)18 b(Exercise)h([Homework]:)41
b F7(\(Due)19 b(on)h(Mar)o(ch)f(9.\))24 b Gd(Re-formulate)c(the)g
(examples)f(in)h(Sec-)422 b FP(\()450 2859 y Gd(tion)17
b(15.1)d(with)i(explicit)g F4(fold)e Gd(and)h F4(unfold)f
Gd(annotations.)25 b(Check)15 b(them)i(using)f(the)g
F4(fullisorec)450 2959 y Gd(checker)k(fr)o(om)h(the)g(course)f(web)h
(dir)o(ectory)-9 b(.)24 b(Solution)e(on)g(page)e(293.)712
b FZ(2)450 3245 y Gj(15.4)119 b(Subtyping)30 b(and)g(Recursive)g(T)-11
b(ypes)p eop
%%Page: 139 140
139 139 bop 450 1306 a F3(Chapter)44 b(16)450 1721 y
Gk(Implementing)52 b(Recursive)g(T)-19 b(ypes)450 2177
y Gd(Pr)o(ove)26 b(this)h(by)f(writing)i(a)e(function)h(that)f(expands)
g(a)g Gb(\026)g Gd(type)h(into)g(its)g(r)o(egular)e(tr)o(ee)g(form,)450
2276 y(and)i(showing)i(that)e(this)h(function)g(is)g(not)g(surjective)f
(\(maybe)g(the)g(latter)g(is)h(an)f(exer)o(cise\).)450
2376 y(intr)o(oduce)20 b(the)h(idea)f(of)h(contractive)f(types)575
2559 y F5(\017)41 b Gd(use)26 b(the)g(equivalence)g(r)o(elation)g
(\(should)h(intr)o(oduce)e(it)i(pr)o(eviously\))f(to)g(captur)o(e)f
(the)658 2658 y(intuition)d(that)f(a)f(r)o(ecursive)f(type)i(is)g
(\223the)g(same)f(as\224)g(its)h(unfolding)575 2824 y
F5(\017)41 b Gd(but)23 b(this)g(doesn't)h(give)f(us)g(enough)h
(equivalences.)33 b(For)23 b(example)f Gb(\026)p F4(X.T)p
FV(!)o F4(T)p FV(!)p F4(X)g Gd(and)658 2924 y F4(T)p
FV(!)o F4(\()p Gb(\026)p F4(X.T)p FV(!)o F4(T)p FV(!)o
F4(X\))e Gd(ar)o(e)g(equal)g(as)h(tr)o(ees)f(but)h(inequivalent.)575
3090 y F5(\017)41 b Gd(So)20 b(we)h(switch)h(to)f(a)f(coinductive)h
(view)g(of)g(equivalence.)575 3256 y F5(\017)41 b Gd(now)29
b(equivalence)g(coincides)g(with)g(equality)g(of)g(in\002nite)g(tr)o
(ee)f(expansions)h(\(pr)o(ove)658 3356 y(it!\))575 3522
y F5(\017)41 b Gd(Now)21 b(we)g(need)f(to)h F7(decide)f
Gd(this)i(coinductive)f(equivalence)757 3688 y Ge(\226)41
b Gd(show)22 b(simulation)g(algorithm)g(\(and)e(its)h(ML)f(r)o
(ealization\))757 3820 y Ge(\226)41 b Gd(pr)o(ove)20
b(that)h(it)g(is)g(sound,)g(complete,)g(and)f(terminating)575
4003 y(notice)g(that)g(we)g(need)f(to)h(deal)f(with)i(mor)o(e)e(than)h
(just)h(type)f(equivalence:)25 b(we)19 b(also)h(need)450
4103 y(to)25 b(pr)o(ovide)f(an)g F4(expose)e Gd(function)j(that)g(unr)o
(olls)g(r)o(ecursive)e(types)i(as)f(needed)f(during)i(typ-)450
4202 y(ing.)h(What)21 b(needs)f(to)h(be)g(pr)o(oved)f(about)g(this?)
1888 5169 y(139)p eop
%%Page: 140 141
140 140 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)479
b Gd(1)t(6)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)h Gd(T)t F6(Y)t(P)t(E)t(S)481
b Gd(140)450 683 y Ge(Algorithmic)19 b(rules)h(for)h(equi-recursive)d
(types)1129 b FV(!)35 b F4(B)3367 683 y
 gsave currentpoint translate 0 248418 7800 div 653834 7800 div 425418
-7800 div box .9 setgray fill grestore
 3367 683 a 16
w Gb(\026)p 409 765 9 36 v 418 735 3000 6 v 3418 735
38 6 v 3455 765 9 36 v 450 894 a F7(Algorithmic)19 b(type)h
(equivalence)p 2991 796 459 4 v 2991 935 4 139 v 3020
894 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 3020 894 a 15 w Gb(\000)39 b F5(`)3138 875 y Fx(I)3205
894 y F4(S)23 b FV($)g F4(T)p 3447 935 4 139 v 2991 938
459 4 v 1518 1111 a
 gsave currentpoint translate 0 851966 7800 div 4065077 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1518 1111 a 1552 1055 a FY(\()p F4(S)g
FV($)g F4(T)p FY(\))g F5(2)h(P)p 1552 1092 447 4 v 1581
1165 a(P)29 b(`)1687 1146 y Fx(I)1755 1165 y F4(S)22
b FV($)i F4(T)3013 1111 y Gd(\()r(Q)t(A)t(-)t(L)t F6(O)t(O)t(P)r
Gd(\))1026 1408 y
 gsave currentpoint translate 0 851966 7800 div 11836638 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1026 1408 a 1060 1352 a F5(P)7 b Gb(;)23
b FY(\()p Gb(\026)p F4(X.S)1385 1364 y F1(1)1449 1352
y FV($)g F4(T)o FY(\))47 b F5(`)1696 1333 y Fx(I)1786
1352 y F0(f)p F4(X)23 b F5(7)p FV(!)g Gb(\026)p F4(X.S)2168
1364 y F1(1)2208 1352 y F0(g)p F4(S)2278 1364 y F1(1)2342
1352 y FV($)g F4(T)p 1060 1389 1432 4 v 1491 1462 a F5(P)30
b(`)1598 1443 y Fx(I)1665 1462 y Gb(\026)p F4(X.S)1847
1474 y F1(1)1911 1462 y FV($)23 b F4(T)3014 1408 y Gd(\()r(Q)t(A)t(-)t
(R)t F6(E)t(C)t Gd(L)r(\))1026 1705 y
 gsave currentpoint translate 0 851966 7800 div 11836638 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1026 1705 a 1060
1649 a F5(P)7 b Gb(;)23 b FY(\()p F4(S)g FV($)g Gb(\026)p
F4(X.T)1558 1661 y F1(1)1598 1649 y FY(\))47 b F5(`)1696
1630 y Fx(I)1786 1649 y F4(S)23 b FV($)g F0(f)p F4(X)f
F5(7)p FV(!)h Gb(\026)p F4(X.T)2340 1661 y F1(1)2381
1649 y F0(g)p F4(T)2451 1661 y F1(1)p 1060 1686 1432
4 v 1491 1759 a F5(P)30 b(`)1598 1740 y Fx(I)1665 1759
y F4(S)23 b FV($)g Gb(\026)p F4(X.T)2020 1771 y F1(1)3010
1705 y Gd(\()r(Q)t(A)t(-)t(R)t F6(E)t(C)t Gd(R)r(\))1541
1948 y
 gsave currentpoint translate 0 430353 7800 div 3711146 7800 div 758033
-7800 div box .9 setgray fill grestore
 1541 1948 a 1565 1949 a
 gsave currentpoint translate 0 124518 7800 div 758762 7800 div 572346
-7800 div box .9 setgray fill grestore
 1565 1949 a 16 w F5(P)45
b(`)1703 1930 y Fx(I)1771 1949 y F4(B)22 b FV($)h F4(B)3030
1948 y Gd(\()r(Q)t(A)t(-)t(B)t F6(A)t(S)t(E)q Gd(\))1179
2196 y
 gsave currentpoint translate 0 881095 7800 div 9425182 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1179 2196 a 1213 2140 a
 gsave currentpoint translate 0 124518 7800 div 1441435 7800 div 579629
-7800 div box .9 setgray fill grestore
 1213 2140 a 16 w F5(P)29
b(`)1335 2120 y Fx(I)1396 2140 y F4(S)1439 2152 y F1(1)1503
2140 y FV($)23 b F4(T)1652 2152 y F1(1)1859 2140 y
 gsave currentpoint translate 0 124518 7800 div 1441435 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859
2140 a 16 w F5(P)29 b(`)1981 2120 y Fx(I)2042 2140 y
F4(S)2085 2152 y F1(2)2149 2140 y FV($)23 b F4(T)2298
2152 y F1(2)p 1213 2176 1126 4 v 1369 2253 a
 gsave currentpoint translate 0 124518 7800 div 1441435 7800 div 579629
-7800 div box .9 setgray fill grestore
 1369 2253
a 16 w F5(P)29 b(`)1491 2234 y Fx(I)1551 2253 y F4(S)1595
2265 y F1(1)1636 2253 y FV(!)p F4(S)1762 2265 y F1(2)1826
2253 y FV($)23 b F4(T)1975 2265 y F1(1)2016 2253 y FV(!)p
F4(T)2142 2265 y F1(2)2932 2196 y Gd(\()r(Q)t(A)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))450 2448 y F7(Exposur)o(e)p
2988 2350 462 4 v 2988 2489 4 140 v 3016 2448 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 3016
2448 a 16 w Gb(\000)39 b F5(`)3135 2429 y Fx(I)3202 2448
y F4(T)23 b FV(*)g F4(T)3398 2418 y FX(0)p 3447 2489
4 140 v 2988 2492 462 4 v 1344 2666 a
 gsave currentpoint translate 0 851966 7800 div 6812221 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1344 2666 a 1378
2610 a F5(`)1397 2591 y Fx(I)1465 2610 y F0(f)p F4(X)f
F5(7)p FV(!)h Gb(\026)p F4(X.T)1846 2622 y F1(1)1887
2610 y F0(g)p F4(T)1957 2622 y F1(1)2021 2610 y FV(*)g
F4(T)2150 2580 y FX(0)p 1378 2647 795 4 v 1533 2719 a
F5(`)1552 2700 y Fx(I)1620 2719 y Gb(\026)p F4(X.T)1802
2731 y F1(1)1866 2719 y FV(*)g F4(T)1995 2690 y FX(0)3079
2666 y Gd(\()r(X)t(A)t(-)t(R)t F6(E)t(C)r Gd(\))1308
2963 y
 gsave currentpoint translate 0 851966 7800 div 7394334 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1308 2963 a 1342 2907 a F4(T)d Gd(is)h(not)h(a)e(r)o(ecursive)f
(type)p 1342 2943 869 4 v 1638 3016 a F5(`)1657 2997
y Fx(I)1725 3016 y F4(T)j FV(*)i F4(T)2968 2963 y Gd(\()r(X)t(A)t(-)t
(O)t F6(T)t(H)t(E)t(R)r Gd(\))450 3196 y F7(Algorithmic)19
b(typing)p 3055 3113 396 4 v 3055 3221 4 108 v 1982 w
Gb(\000)k F5(`)3170 3176 y Fx(I)3237 3196 y F4(t)g FF(:)g
F4(T)p 3447 3221 V 3055 3224 396 4 v 1637 3317 a(x:T)f
F5(2)i Gb(\000)p 1606 3361 339 4 v 1606 3440 a(\000)f
F5(`)1693 3421 y Fx(I)1761 3440 y F4(x)f FF(:)i F4(T)3085
3380 y Gd(\()r(T)n(A)t(-)t(V)l F6(A)t(R)q Gd(\))1457
3579 y Gb(\000)6 b(;)17 b F4(x:T)1679 3591 y F1(1)1743
3579 y F5(`)1762 3560 y Fx(I)1829 3579 y F4(t)1873 3591
y F1(2)1936 3579 y FF(:)23 b F4(T)2054 3591 y F1(2)p
1352 3623 847 4 v 1352 3702 a Gb(\000)g F5(`)1439 3683
y Fx(I)1507 3702 y Gb(\025)p F4(x:T)1683 3714 y F1(1)1723
3702 y F4(.t)1810 3714 y F1(2)1874 3702 y FF(:)g F4(T)1992
3714 y F1(1)2032 3702 y FV(!)p F4(T)2159 3714 y F1(2)3093
3642 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p Gd(\))567 3845
y Gb(\000)g F5(`)654 3826 y Fx(I)722 3845 y F4(t)765
3857 y F1(1)829 3845 y FF(:)g F4(T)947 3857 y F1(1)1153
3845 y
 gsave currentpoint translate 0 251948 7800 div 4953545 7800 div 579629
-7800 div box .9 setgray fill grestore
 1153 3845 a 16 w F5(`)1188 3826 y Fx(I)1256 3845
y F4(T)1299 3857 y F1(1)1363 3845 y FV(*)g F4(T)1485
3857 y F1(11)1562 3845 y FV(!)p F4(T)1688 3857 y F1(12)1947
3845 y Gb(\000)g F5(`)2034 3826 y Fx(I)2101 3845 y F4(t)2145
3857 y F1(2)2208 3845 y FF(:)h F4(T)2326 3857 y F1(2)2533
3845 y
 gsave currentpoint translate 0 222821 7800 div 3565808 7800 div 579629
-7800 div box .9 setgray fill grestore
 2533 3845 a 16 w F5(`)2568 3826 y Fx(I)2635 3845
y F4(T)2679 3857 y F1(2)2742 3845 y FV($)f F4(T)2892
3857 y F1(11)p 567 3890 2418 4 v 1484 3970 a Gb(\000)g
F5(`)1571 3951 y Fx(I)1638 3970 y F4(t)1682 3982 y F1(1)1766
3970 y F4(t)1810 3982 y F1(2)1873 3970 y FF(:)g F4(T)1991
3982 y F1(12)3088 3910 y Gd(\()r(T)n(A)t(-)t(A)t F6(P)t(P)q
Gd(\))p 409 4039 9 36 v 418 4039 3000 6 v 3418 4039 38
6 v 3455 4039 9 36 v eop
%%Page: 141 142
141 141 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)479
b Gd(1)t(6)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)h Gd(T)t F6(Y)t(P)t(E)t(S)481
b Gd(141)450 683 y F8(ML)24 b(Implementation)450 841
y Ge(Datatypes)616 991 y FT(type)40 b(ty)g(=)773 1082
y(TyArr)g(of)g(ty)g(*)f(ty)694 1173 y(|)h(TyId)g(of)g(string)694
1265 y(|)g(TyVar)g(of)g(int)g(*)f(int)694 1356 y(|)h(TyRec)g(of)g
(string)h(*)e(ty)616 1539 y(type)h(term)g(=)773 1630
y(TmVar)g(of)g(info)g(*)g(int)g(*)f(int)694 1721 y(|)h(TmAbs)g(of)g
(info)g(*)g(string)g(*)g(ty)f(*)h(term)694 1813 y(|)g(TmApp)g(of)g
(info)g(*)g(term)g(*)f(term)450 2039 y Ge(T)-7 b(ype)20
b(substitution)450 2197 y(T)-7 b(ype)20 b(equivalence)616
2347 y FT(let)40 b(rec)g(tyeqv)g(pairs)h(ctx)f(tyS)f(tyT)h(=)694
2438 y(List.mem)i(\(tyS,tyT\))f(pairs)694 2529 y(||)f(match)h
(\(tyS,tyT\))g(with)773 2621 y(\(TyArr\(tyS1,tyS2\),TyArr\(tyT1,)q
(tyT2\))q(\))k FO(!)891 2712 y FT(\(tyeqv)40 b(pairs)h(ctx)f(tyS1)g
(tyT1\))g(&&)g(\(tyeqv)g(pairs)h(ctx)f(tyS2)g(tyT2\))694
2803 y(|)g(\(TyId\(b1\),TyId\(b2\)\))k FO(!)39 b FT(b1=b2)694
2895 y(|)h(\(TyVar\(i,_\),TyVar\(j,_\)\))k FO(!)39 b
FT(i=j)694 2986 y(|)h(\(TyRec\(x,tyS1\),_\))j FO(!)891
3077 y FT(tyeqv)d(\(\(tyS,tyT\)::pairs\))j(ctx)d(\(tysubstsnip)i(tyS)e
(tyS1\))g(tyT)694 3169 y(|)g(\(_,TyRec\(x,tyT1\)\))j
FO(!)891 3260 y FT(tyeqv)d(\(\(tyS,tyT\)::pairs\))j(ctx)d(tyS)g
(\(tysubstsnip)i(tyT)e(tyT1\))694 3351 y(|)g(_)f FO(!)g
FT(false)616 3534 y(let)h(tyeqv)g(ctx)g(tyS)g(tyT)g(=)694
3625 y(tyeqv)h([])f(ctx)f(tyS)h(tyT)450 3851 y Ge(T)-7
b(yping)616 4001 y FT(let)40 b(rec)g(typeof)g(ctx)g(t)g(=)694
4092 y(match)h(t)e(with)773 4184 y(TmVar\(fi,i,_\))j
FO(!)851 4275 y FT(gettype)f(fi)f(ctx)g(i)694 4366 y(|)g
(TmAbs\(fi,x,tyS,t1\))j FO(!)851 4458 y FT(let)d(ctx')g(=)g(addbinding)
h(ctx)f(x)g(\(VarBind\(tyS\)\))i(in)851 4549 y(let)e(tyT)g(=)g(typeof)g
(ctx')g(t1)g(in)851 4640 y(TyArr\(tyS,)i(tyshift)f(\(-1\))f(tyT\))694
4732 y(|)g(TmApp\(fi,t1,t2\))j FO(!)851 4823 y FT(let)d(tyT1)g(=)g
(typeof)h(ctx)e(t1)h(in)851 4914 y(let)g(tyT2)g(=)g(typeof)h(ctx)e(t2)h
(in)p eop
%%Page: 142 143
142 142 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)479
b Gd(1)t(6)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(R)t F6(E)t(C)t(U)t(R)t(S)t(I)t(V)t(E)h Gd(T)t F6(Y)t(P)t(E)t(S)481
b Gd(142)851 683 y FT(\(match)41 b(tyT1)f(with)1008 774
y(TyArr\(tyT11,tyT12\))k FO(!)1087 866 y FT(if)39 b(tyeqv)i(ctx)f(tyT2)
g(tyT11)g(then)g(tyT12)1087 957 y(else)g(error)g(fi)g("parameter)h
(type)g(mismatch")930 1048 y(|)e(_)h FO(!)f FT(error)h(fi)g("arrow)g
(type)h(expected"\))p eop
%%Page: 143 144
143 143 bop 450 1306 a F3(Chapter)44 b(17)450 1721 y
Gk(Case)52 b(Study:)64 b(Featherweight)53 b(Java)450
2177 y F7(This)22 b(chapter)f(will)h(draw)f(some)i(connections)f
(between)h(the)e(material)h(that')-5 b(s)22 b(been)h(pr)o(esented)f(so)
g(far)450 2277 y(and)e(the)g(mainstr)o(eam)g(world)g(of)h
(object-oriented)g(type)e(systems,)i(focusing)f(on)h(Java.)j(The)c
(pedagog-)450 2376 y(ical)28 b(vehicle)g(will)h(be)g(the)f
Gd(Featherweight)h(Java)e F7(language)h(studied)g(by)g(Atsushi)g
(Igarashi,)i(Phil)450 2476 y(W)n(adler)-6 b(,)27 b(and)e(myself)g
([IPW99)n(].)39 b(It)25 b(is)h(a)f(very)g(simple)g(cor)o(e)g(calculus,)
h(not)f(much)g(lar)o(ger)g(than)g(the)450 2575 y(lambda-calculus,)30
b(omitting)e(nearly)h(all)g(of)g(the)f(featur)o(es)i(of)f(the)f(full)h
(Java)f(language)h(\(including)450 2675 y(assignment!\),)d(while)g(r)o
(etaining)f(its)h(basic)g(\003avor:)35 b(classes,)28
b(objects,)f(methods,)f(\002elds,)h(\(explicitly)450
2775 y(declar)o(ed\))j(subtyping,)j(casts,)g(etc.)57
b(The)30 b(pr)o(esentation)h(her)o(e)g(will)h(be)f(based)h(closely)f
(on)g(\(the)g(full)450 2874 y(version)21 b(of\))g(the)f(OOPSLA)g(paper)
g(on)h(FJ.)575 2974 y(The)26 b(main)g(technical)g(work)h(to)f(be)i
(done)e(lies)i(in)f(tying)e(FJ)i(as)g(explicitly)e(as)i(possible)h
(with)e(the)450 3074 y(concepts)i(we)g(have)f(alr)o(eady)g(seen.)49
b(This)28 b(is)h(not)f(all)g(that)f(simple,)i(since)g(we've)f(been)i
(working)e(in)450 3173 y(an)21 b(entir)o(ely)f(\223structural\224)g
(setting,)g(wher)o(e)g(the)g(only)g(salient)h(thing)e(about)i(a)f(type)
g(expr)o(ession)g(is)h(its)450 3273 y(structur)o(e)28
b(\(i.e.,)h(ther)o(e)f(ar)o(e)g(no)g(\223type)f(names\224)g(except)g
(as)i(simple)f(abbr)o(eviations)g(for)g(structur)o(es\),)450
3373 y(while)g(Java)f(uses)i(names)f(thr)o(oughout)e(its)i(type)f
(system.)47 b(A)28 b(section)g(r)o(e-formulating)f(the)h(simply)450
3472 y(typed)18 b(lambda-calculus)h(with)g(subtyping)g(in)h
(\223by-name)f(form\224)g(should)h(pr)o(ovide)e(a)i(helpful)f(bridge.)
450 3671 y(Sections:)575 3837 y F5(\017)41 b F7(By-name)18
b(vs.)24 b(structural)c(pr)o(esentations)f(of)g(type)f(systems)h
(\(note)g(a)g(big)h(advantage)d(of)i(struc-)658 3937
y(tural)h(pr)o(esentations:)25 b(portability!)f(If)c(you'r)o(e)g(going)
f(to)h(transmit)g(code)f(acr)o(oss)i(the)e(network,)658
4037 y(then)h(what)g(do)g(the)g(names)h(mean??\))575
4203 y F5(\017)41 b F7(A)20 b(by-name)h(pr)o(esentation)f(of)h(the)f
(simply)g(typed)f(lambda-calculus)h(with)g(subtyping)658
4336 y(\(Comments)g(about)g(Pascal)h(vs.)k(M3)c(tr)o(eatments)f(of)g
(\223branding\224.\))575 4502 y F5(\017)41 b F7(Summary)19
b(of)i(Featherweight)f(Java)1888 5169 y Gd(143)p eop
%%Page: 144 145
144 144 bop 450 1306 a F3(Chapter)44 b(18)450 1721 y
Gk(T)-19 b(ype)52 b(Reconstruction)450 2177 y F7(For)24
b(technical)g(r)o(easons,)h(this)f(chapter)f(uses)i(a)f(slightly)f
(differ)o(ent)h(de\002nition)g(of)g(substitution)h(fr)o(om)450
2277 y(what)i(we)h(had)f(befor)o(e.)49 b(This)27 b(should)h(be)h
(changed)d(to)i(corr)o(espond)f(exactly)g(to)h(the)f(earlier)i(notion.)
450 2376 y(Aside)21 b(fr)o(om)f(that,)f(it')-5 b(s)21
b(essentially)h(\002nished.)575 2476 y(The)17 b(pr)o(esent)h(chapter)f
(does)h(not)f(mention)h(let-polymorphism.)k(I)17 b(think)g(that')-5
b(s)18 b(a)g(shame)f(and)g(I've)450 2575 y(tried)22 b(to)f(\002gur)o(e)
h(out)g(how)f(to)h(put)f(in)h(something)f(about)h(it,)g(but)h(it')-5
b(s)22 b(appar)o(ently)e(quite)j(hard)e(to)h(do)f(it)450
2675 y(in)g(a)g(rigor)o(ous)f(way)g(without)g(going)g(on)h(for)g(page)e
(after)i(page)f(of)h(technicalities.)575 2874 y Gd(Given)k(an)f
(explicitly)h(typed)g(term)f(in)i(the)f(simply)g(typed)g
(lambda-calculus,)f(we)g(have)450 2974 y(seen)17 b(an)g(algorithm)h
(for)f(determining)g(its)h(type,)f(if)g(it)g(has)g(one.)25
b(In)17 b(this)h(chapter)-6 b(,)16 b(we)h(develop)450
3074 y(a)i(mor)o(e)g(powerful)h Ge(type)e(reconstruction)g
Gd(algorithm,)i(capable)e(of)i(calculating)f(a)g Ge(principal)450
3173 y(type)31 b Gd(for)h(a)g(term)g(in)g(which)i(some)e(of)g(the)h
(explicit)f(type)g(annotations)h(ar)o(e)e(r)o(eplaced)f(by)450
3273 y(variables.)24 b(Similar)d(algorithms)h(lie)e(at)h(the)g(heart)f
(of)h(languages)f(like)h(ML)f(and)h(Haskell.)575 3373
y(The)f(term)h(\223)p Ge(type)e(inference)p Gd(\224)g(is)i(often)g
(used)f(instead)h(of)f(\223type)h(r)o(econstr)o(uction.\224)450
3658 y Gj(18.1)119 b(Substitution)450 3847 y Gd(W)-8
b(e)32 b(will)g(work)g(in)h(this)f(chapter)f(with)h(the)g(system)h
Gb(\025)p FV(!)p FN(N)s F4(X)p Gd(,)40 b(the)32 b(simply)h(typed)e
(lambda)450 3947 y(calculus)c(with)i(numbers)e(and)g(an)h(in\002nite)g
(collection)h(of)e(atomic)h(types.)46 b(When)28 b(we)f(saw)450
4047 y(them)g(in)f(Section)g(9.1,)g(these)h(atomic)f(types)g(wer)o(e)f
(completely)i(uninterpr)o(eted.)40 b(Now)27 b(we)450
4146 y(ar)o(e)20 b(going)j(to)g(think)g(of)e(them)i(as)e
Ge(type)g(variables)p Gd(\227i.e.,)e(placeholders)j(standing)g(for)g
(other)450 4246 y(types.)62 b(In)33 b(or)o(der)f(to)i(make)e(this)i
(idea)e(pr)o(ecise,)j(we)e(need)f(to)i(de\002ne)e(what)h(it)h(means)f
(to)450 4346 y(substitute)21 b(arbitrary)f(types)h(for)f(type)h
(variables.)450 4528 y Ge(18.1.1)d(De\002nition:)40 b
Gd(A)25 b Ge(type)h(substitution)d Gd(\(or)-6 b(,)27
b(for)f(purposes)g(of)h(this)g(chapter)-6 b(,)26 b(just)h
Ge(sub-)450 4628 y(stitution)p Gd(\))22 b(is)i(a)g(\002nite)h(function)
g(fr)o(om)f(type)g(variables)g(to)g(types.)37 b(For)24
b(example,)h(we)f(write)450 4727 y F0(f)p F4(X)e F5(7)p
FV(!)h F4(T)p Gb(;)g F4(Y)g F5(7)p FV(!)g F4(U)o F0(g)e
Gd(for)f(the)h(substitution)i(that)d(maps)h F4(X)f Gd(to)i
F4(T)e Gd(and)g F4(Y)h Gd(to)g F4(U)f Gd(and)h(is)g(unde\002ned)f(on)
450 4827 y(other)h(ar)o(guments.)1888 5169 y(144)p eop
%%Page: 145 146
145 145 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(145)575 683 y(W)-8
b(e)22 b(can)g(r)o(egar)o(d)e(a)i(substitution)i Gb(\033)e
Gd(as)g(a)g(function)h(fr)o(om)f(types)g(to)h(types)f(in)h(an)f
(obvious)450 783 y(way:)699 987 y Gb(\033)p F4(X)355
b FY(=)1294 870 y FV(\014)1398 937 y F4(T)82 b Gd(if)21
b Gb(\033)g Gd(maps)g F4(X)f Gd(to)h F4(T)1398 1036 y(X)82
b Gd(if)21 b F4(X)f Gd(is)h(not)h(in)f(the)g(domain)g(of)g
Gb(\033)699 1136 y(\033)p FY(\()p F4(Nat)o FY(\))204
b(=)83 b F4(Nat)699 1236 y Gb(\033)p FY(\()p F4(T)825
1248 y F1(1)866 1236 y FV(!)p F4(T)992 1248 y F1(2)1033
1236 y FY(\))g(=)g Gb(\033)p F4(T)1388 1248 y F1(1)1451
1236 y FV(!)23 b Gb(\033)p F4(T)1651 1248 y F1(2)450
1387 y Gd(Note)c(that)h(we)f(do)g(not)h(need)f(to)h(make)f(any)g
(special)g(pr)o(ovisions)h(to)g(avoid)f(variable)f(captur)o(e)450
1487 y(during)g(type)f(substitution,)i(because)e(ther)o(e)g(ar)o(e)f
(no)i(binders)f(for)g(type)g(variables.)24 b(\(This)17
b(will)450 1586 y(change)25 b(when)h(we)f(discuss)g(System)h(F)f(in)g
(Chapter)g(19;)h(we)f(will)h(then)f(have)g(to)g(tr)o(eat)f(type)450
1686 y(substitutions)f(mor)o(e)d(car)o(efully)-9 b(.\))575
1786 y(Substitution)18 b(is)f(extended)f(to)h(contexts)h(by)f
(de\002ning)h FY(\()p Gb(\033\000)6 b FY(\)\()p F4(x)-6
b FY(\))17 b Gd(to)h(be)f Gb(\033)p FY(\()p Gb(\000)6
b FY(\()p F4(x)-6 b FY(\)\))p Gd(.)24 b(Similarly)-9
b(,)450 1885 y(a)20 b(type)g(substitution)h(is)g(applied)e(to)h(a)g
(term)g F4(t)g Gd(by)g(applying)g(it)g(to)h(all)f(types)g(appearing)f
(in)i F4(t)o Gd(.)575 1985 y(If)c Gb(\033)i Gd(and)e
Gb(\015)h Gd(ar)o(e)e(type)i(substitutions,)i(we)e(write)h
Gb(\033)8 b F5(\016)g Gb(\015)18 b Gd(for)g(the)g(type)g(substitution)h
(formed)450 2085 y(by)i(composing)h Gb(\033)f Gd(and)f
Gb(\015)h Gd(as)f(follows:)658 2339 y FY(\()p Gb(\033)f
F5(\016)e Gb(\015)p FY(\)\()p F4(X)p FY(\))23 b(=)1118
2169 y FV(8)1118 2244 y(<)1118 2393 y(:)1234 2239 y Gb(\033)p
FY(\()p Gb(\015)p FY(\()p F4(X)o FY(\)\))189 b Gd(if)20
b F4(X)j F5(2)g F7(dom)o FY(\()p Gb(\015)p FY(\))1234
2338 y Gb(\033)p FY(\()p F4(X)p FY(\))303 b Gd(if)20
b F4(X)32 b Gb(=)-51 b F5(2)23 b F7(dom)o FY(\()p Gb(\015)p
FY(\))e Gd(and)f F4(X)j F5(2)g F7(dom)o FY(\()p Gb(\033)p
FY(\))1234 2438 y Gd(unde\002ned)83 b(if)20 b F4(X)32
b Gb(=)-51 b F5(2)23 b F7(dom)o FY(\()p Gb(\015)p FY(\))c
F5([)f F7(dom)o FY(\()p Gb(\033)p FY(\))q Gb(:)450 2591
y Gd(Note)j(that)g FY(\()p Gb(\033)e F5(\016)f Gb(\015)p
FY(\))p F4(T)k FY(=)h Gb(\033)p FY(\()p Gb(\015)p F4(T)o
FY(\))p Gd(.)1952 b FZ(2)575 2757 y Gd(A)31 b(cr)o(ucial)g(pr)o(operty)
g(of)g(type)h(substitutions)h(is)f(that)g(they)g(pr)o(eserve)e(the)i
(validity)f(of)450 2856 y(typing)23 b(statements:)k(if)22
b(a)f(term)h(involving)h(variables)e(is)h(well)h(typed,)e(then)h(so)h
(ar)o(e)d(all)i(of)g(its)450 2956 y(substitution)g(instances.)450
3121 y Ge(18.1.2)c(Theorem)i([Preservation)f(of)i(typing)f(under)g
(substitution]:)38 b Gd(If)20 b Gb(\000)k F5(`)f F4(t)h
FF(:)g F4(T)d Gd(and)f Gb(\033)i Gd(is)450 3221 y(any)f(type)f
(substitution,)i(then)g Gb(\033\000)h F5(`)g Gb(\033)p
F4(t)g FF(:)g Gb(\033)p F4(T)p Gd(.)1440 b FZ(2)450 3387
y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19 b(induction)j(on)f(typing)
h(derivations.)878 b FZ(2)450 3669 y Gj(18.2)119 b(Universal)29
b(vs.)h(Existential)f(T)-11 b(ype)30 b(V)-13 b(ariables)450
3858 y Gd(Suppose)31 b(that)h F4(t)f Gd(is)h(a)f(term)g(containing)i
(type)e(variables)g(and)g Gb(\000)g Gd(is)h(an)f(associated)g(envi-)450
3958 y(r)o(onment)e(\(possibly)g(also)g(containing)h(type)e
(variables\).)48 b(Ther)o(e)28 b(ar)o(e)f(two)i(quite)g(dif)o(fer)o
(ent)450 4058 y(questions)22 b(that)f(we)g(can)f(ask)h(about)g
F4(t)o Gd(:)554 4210 y(1.)41 b(\223Ar)o(e)17 b F7(all)i
Gd(substitution)i(instances)e(of)g F4(t)g Gd(well)g(typed?\224)24
b(That)19 b(is,)h(is)f(it)g(the)h(case)e(that,)h(for)658
4310 y(every)h Gb(\033)p Gd(,)g(we)h(have)f Gb(\033\000)k
F5(`)e Gb(\033)p F4(t)h FF(:)h F4(T)c Gd(for)g(some)i
F4(T)o Gd(?)554 4469 y(2.)41 b(\223Is)20 b F7(some)h
Gd(substitution)i(instance)e(of)g F4(t)f Gd(well)i(typed?\224)j(That)c
(is,)g(can)g(we)g(\002nd)g(a)f Gb(\033)i Gd(such)658
4568 y(that)e Gb(\033\000)j F5(`)g Gb(\033)p F4(t)g FF(:)g
F4(T)e Gd(for)f(some)i F4(T)o Gd(?)450 4721 y(Accor)o(ding)16
b(to)h(the)g(\002rst)g(view)-8 b(,)17 b(type)g(variables)e(should)j(be)
e F7(held)g(abstract)h Gd(during)g(typecheck-)450 4820
y(ing,)34 b(thus)d(ensuring)h(that)f(a)f(well-typed)h(term)g(will)h
(behave)e(pr)o(operly)g(no)h(matter)g(what)450 4920 y(concr)o(ete)20
b(types)h(ar)o(e)e(later)h(substituted)h(for)g(its)g(type)g(variables.)
j(For)d(example,)f(the)h(term)p eop
%%Page: 146 147
146 146 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(146)616 683 y FM(\025)p
FT(f:X)p FO(!)p FT(X.)40 b FM(\025)p FT(a:X.)g(f)f(\(f)h(a\);)450
827 y Gd(has)21 b(type)f F4(\(X)p FV(!)p F4(X\))p FV(!)o
F4(X)p FV(!)o F4(X)p Gd(,)h(and,)f(whenever)g(we)h(r)o(eplace)e
F4(X)h Gd(by)h F4(T)p Gd(,)f(the)h(instance)616 963 y
FM(\025)p FT(f:T)p FO(!)p FT(T.)40 b FM(\025)p FT(a:T.)g(f)f(\(f)h
(a\);)450 1107 y Gd(is)33 b(well)g(typed.)61 b(Holding)33
b(type)g(variables)f(abstract)f(in)i(this)h(way)e(leads)g(to)h(the)g
(idea)f(of)450 1207 y Ge(parametric)d(polymorphism)p
Gd(,)j(in)g(which)g(type)g(variables)e(ar)o(e)g(used)h(to)g(encode)g
(the)h(fact)450 1307 y(that)27 b(a)g(term)h(can)f(be)g(used)g(in)h
(many)f(concr)o(ete)g(contexts)h(with)g(dif)o(fer)o(ent)d(concr)o(ete)i
(types.)450 1406 y(W)-8 b(e)21 b(shall)g(r)o(eturn)f(to)h(parametric)f
(polymorphism)i(in)f(mor)o(e)g(depth)f(in)i(Chapter)e(19.)575
1506 y(In)25 b(the)h(second)g(view)-8 b(,)27 b(the)f(original)g(term)f
F4(t)h Gd(may)f(not)h(even)g(be)f(well)h(typed;)h(what)f(we)450
1606 y(want)i(to)h(know)g(is)g(whether)f(it)h(can)f(be)g
F7(instantiated)f Gd(to)i(a)e(well)i(typed)f(term)g(by)g(choosing)450
1705 y(appr)o(opriate)19 b(values)h(for)h(some)g(of)g(its)g(type)g
(variables.)j(For)d(example,)f(the)h(term)616 1841 y
FM(\025)p FT(f:Y.)40 b FM(\025)p FT(a:X.)g(f)f(\(f)h(a\);)450
1985 y Gd(is)18 b(not)h(typeable)e(as)g(it)i(stands,)f(but)g(if)f(we)h
(r)o(eplace)e F4(Y)i Gd(by)g F4(Nat)p FV(!)n F4(Nat)f
Gd(and)h F4(X)f Gd(by)h F4(Nat)o Gd(,)g(we)g(obtain)616
2121 y FM(\025)p FT(f:Nat)p FO(!)q FT(Nat.)40 b FM(\025)p
FT(a:Nat.)g(f)g(\(f)f(a\);)450 2265 y Gd(of)23 b(type)g
F4(\(Nat)p FV(!)n F4(Nat\))p FV(!)o F4(Nat)p FV(!)o F4(Nat)n
Gd(.)33 b(Or)-6 b(,)23 b(if)g(we)g(simply)h(r)o(eplace)e
F4(Y)g Gd(by)i F4(X)p FV(!)o F4(X)p Gd(,)f(we)g(obtain)h(the)450
2365 y(term)616 2501 y FM(\025)p FT(f:X)p FO(!)p FT(X.)40
b FM(\025)p FT(a:X.)g(f)f(\(f)h(a\);)450 2645 y Gd(which)23
b(is)g(well)g(typed)e(even)i(though)g(it)g(contains)g(variables.)29
b(Indeed,)22 b(this)h(term)f(is)h(a)f Ge(most)450 2745
y(general)16 b Gd(instance)h(of)h Gb(\025)p F4(f:Y.)42
b Gb(\025)p F4(a:X.)g(f)h(\(f)g(a\))o Gd(,)18 b(in)f(the)h(sense)g
(that)f(it)h(makes)f(the)h(least)f(com-)450 2844 y(mitment)24
b(about)e(the)h(values)f(of)h(type)g(variables)e(that)i(is)g(r)o(equir)
o(ed)e(to)i(obtain)g(a)f(well-typed)450 2944 y(term.)575
3044 y(W)-8 b(e)18 b(may)f(even,)h(in)h(the)f(limit,)h(allow)f(type)f
(annotations)i(to)g(be)e(omitted)h(completely)-9 b(,)19
b(\002ll-)450 3143 y(ing)24 b(in)g(a)g(fr)o(esh)e(type)i(variable)e
(during)i(parsing)g(whenever)f(an)h(annotation)g(is)g(discover)o(ed)450
3243 y(to)d(be)g(missing.)27 b(This)21 b(allows)g(the)g(term)g(above)f
(to)h(be)g(written)616 3379 y FM(\025)p FT(f.)39 b FM(\025)p
FT(a.)h(f)f(\(f)h(a\);)450 3523 y Gd(as)20 b(in)i(languages)e(like)h
(ML.)575 3623 y(Looking)27 b(for)e(valid)g(instantiations)j(of)d(type)h
(variables)f(leads)g(to)h(the)g(idea)f(of)h Ge(type)f(re-)450
3722 y(construction)p Gd(,)h(in)h(which)g(the)g(compiler)f(is)h(asked)f
(to)h(help)f(\002ll)h(in)g(type)g(information)g(that)450
3822 y(has)21 b(been)g(underspeci\002ed)g(by)g(the)h(pr)o(ogrammer)-6
b(.)26 b(W)-8 b(e)21 b(develop)g(this)h(point)g(of)g(view)f(in)h(the)
450 3922 y(r)o(est)e(of)h(the)g(chapter)-6 b(.)450 4077
y Ge(18.2.1)18 b(De\002nition:)40 b Gd(Let)18 b Gb(\000)g
Gd(be)g(a)g(context)h(and)f F4(t)h Gd(a)f(term.)24 b(A)19
b Ge(typing)e Gd(for)i FY(\()p Gb(\000)-11 b(;)14 b F4(t)-6
b FY(\))19 b Gd(is)g(a)f(pair)g FY(\()p Gb(\033;)c F4(T)p
FY(\))450 4177 y Gd(such)21 b(that)g Gb(\033\000)i F5(`)g
Gb(\033)p F4(t)g FF(:)g F4(T)p Gd(.)2140 b FZ(2)450 4332
y Ge(18.2.2)18 b(Example:)39 b Gd(Let)20 b Gb(\000)j
FY(=)g F4(f:)o(X)p Gb(;)g F4(a)o(:Y)d Gd(and)h F4(t)h
FY(=)h F4(f)43 b(a)p Gd(.)25 b(Then)699 4476 y FY(\()p
F0(f)p F4(X)e F5(7)p FV(!)g F4(Y)p FV(!)o F4(Nat)o F0(g)p
Gb(;)g F4(Nat)n FY(\))699 4576 y(\()p F0(f)p F4(X)g F5(7)p
FV(!)g F4(Y)p FV(!)o F4(Z)p Gb(;)g F4(Z)g F5(7)p FV(!)g
F4(Nat)n F0(g)p Gb(;)g F4(Z)p FY(\))699 4675 y(\()p F0(f)p
F4(X)g F5(7)p FV(!)g F4(Y)p FV(!)o F4(Nat)p FV(!)o F4(Nat)o
F0(g)p Gb(;)f F4(Nat)p FV(!)o F4(Nat)o FY(\))699 4775
y(\()p F0(f)p F4(X)h F5(7)p FV(!)g F4(Y)p FV(!)o F4(Z)p
F0(g)p Gb(;)g F4(Z)o FY(\))450 4920 y Gd(ar)o(e)c(all)i(typings)h(for)e
FY(\()p Gb(\000)-10 b(;)14 b F4(t)-6 b FY(\))p Gd(.)2081
b FZ(2)p eop
%%Page: 147 148
147 147 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(147)450 683 y Ge(18.2.3)18
b(Exercise)h([Quick)h(check]:)39 b Gd(Find)21 b(thr)o(ee)f(dif)o(fer)o
(ent)f(typings)j(for)658 849 y Gb(\025)p F4(x:X.)41 b
Gb(\025)p F4(y:Y.)h Gb(\025)p F4(z:Z.)g(\(x)h(z\))g(\(y)g(z\))o
Gb(:)450 1015 y Gd(with)22 b(r)o(espect)d(to)i(the)g(empty)g(context.)
1700 b FZ(2)450 1301 y Gj(18.3)119 b(Constraint-Based)29
b(T)-11 b(yping)450 1490 y Gd(W)j(e)22 b(now)g(give)g(a)f(dif)o(fer)o
(ent)f(pr)o(esentation)h(of)h(the)f(typing)i(r)o(elation)e(in)h(which,)
h(for)e(example,)450 1590 y(instead)k(of)g(checking)g(dir)o(ectly)g
(whether)g(types)g(of)g(ar)o(guments)g(match)g(domains)g(of)g(func-)450
1689 y(tions,)i(we)e(generate)g(a)g(set)g(of)g(constraints)h
Gb(C)g Gd(r)o(ecor)o(ding)e(the)h(fact)g(that)g(this)h(check)f(should)
450 1789 y(be)20 b(performed)g(later)-6 b(.)450 1972
y Ge(18.3.1)18 b(De\002nition:)40 b Gd(A)22 b Ge(constraint)f(set)g
Gb(C)j Gd(is)f(a)f(set)h(of)f(equations)i F0(f)p F4(S)2649
1984 y F1(i)2707 1972 y FY(=)j F4(T)2840 1984 y F1(i)2882
1941 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)3038 1972 y
F0(g)p Gd(.)31 b(A)23 b(substi-)450 2071 y(tution)17
b Gb(\033)g Gd(is)g(said)f(to)h Ge(satisfy)f Gd(the)g(constraint)h(set)
g Gb(C)g Gd(if,)g(for)f(each)g Gb(i)p Gd(,)h(the)g(substitution)h
(instances)450 2171 y Gb(\033)p F4(S)544 2183 y F1(i)596
2171 y Gd(and)i Gb(\033)p F4(T)851 2183 y F1(i)903 2171
y Gd(ar)o(e)g(equal.)2134 b FZ(2)450 2353 y Ge(18.3.2)18
b(De\002nition:)40 b Gd(The)22 b Ge(constraint)f(typing)g(relation)g
Gb(\000)26 b F5(`)g F4(t)g FF(:)h F4(T)f F0(j)2668 2365
y FX(X)2754 2353 y Gb(C)d Gd(is)g(de\002ned)f(by)h(the)450
2453 y(r)o(ules)d(below)-8 b(.)26 b(Informally)-9 b(,)20
b Gb(\000)j F5(`)g F4(t)f FF(:)i F4(T)e F0(j)1704 2465
y FX(X)1787 2453 y Gb(C)f Gd(can)e(be)h(r)o(ead)e(as)i(\223T)-8
b(erm)19 b F4(t)h Gd(has)g(type)g F4(T)f Gd(under)h(as-)450
2553 y(sumptions)j Gb(\000)f Gd(whenever)g(constraints)g
Gb(C)g Gd(ar)o(e)f(satis\002ed.\224)28 b(The)22 b(subscript)g
F5(X)12 b Gd(,)22 b(which)g(tracks)450 2652 y(the)g(type)g(variables)g
(intr)o(oduced)f(in)i(the)f(pr)o(ocess,)g(is)g(used)g(for)g(internal)h
(bookkeeping\227to)450 2752 y(make)i(sur)o(e)f(that)h(the)g(fr)o(esh)g
(type)g(variables)f(used)h(in)g(dif)o(fer)o(ent)e(subderivations)i(ar)o
(e)f(actu-)450 2852 y(ally)d(distinct.)1637 2978 y F4(x:T)h
F5(2)i Gb(\000)p 1535 3021 482 4 v 1535 3101 a(\000)f
F5(`)g F4(x)g FF(:)g F4(T)g F0(j)1903 3116 y FX(;)1963
3101 y F0(fg)3089 3040 y Gd(\()r(C)t(T)o(-)t(V)l F6(A)t(R)r
Gd(\))1131 3258 y Gb(\000)5 b(;)18 b F4(x)o(:S)k F5(`)h
F4(t)1493 3270 y F1(1)1556 3258 y FF(:)h F4(T)e F0(j)1715
3270 y FX(X)1798 3258 y Gb(C)167 b F4(x)22 b F5(62)i
F7(dom)o FY(\()p Gb(\000)6 b FY(\))p 1131 3302 1291 4
v 1328 3381 a Gb(\000)23 b F5(`)g Gb(\025)p F4(x:S.t)1732
3393 y F1(1)1796 3381 y FF(:)g F4(S)p FV(!)p F4(T)g F0(j)2082
3393 y FX(X)2165 3381 y Gb(C)3097 3321 y Gd(\()r(C)t(T)o(-)t(A)t
F6(B)t(S)q Gd(\))1033 3539 y Gb(\000)g F5(`)g F4(t)1218
3551 y F1(1)1282 3539 y FF(:)g F4(T)1400 3551 y F1(1)1463
3539 y F0(j)1481 3551 y FX(X)1529 3560 y FB(1)1593 3539
y Gb(C)1652 3551 y F1(1)1859 3539 y Gb(\000)g F5(`)g
F4(t)2044 3551 y F1(2)2108 3539 y FF(:)g F4(T)2226 3551
y F1(2)2289 3539 y F0(j)2307 3551 y FX(X)2355 3560 y
FB(2)2419 3539 y Gb(C)2478 3551 y F1(2)508 3639 y F5(X)567
3651 y F1(1)626 3639 y F5(\\)c(X)759 3651 y F1(2)823
3639 y FY(=)k F5(;)165 b F4(X)20 b Gd(not)i(mentioned)f(in)h
F5(X)1892 3651 y F1(1)1932 3639 y Gd(,)f F5(X)2033 3651
y F1(2)2074 3639 y Gd(,)f F4(T)2159 3651 y F1(1)2199
3639 y Gd(,)h F4(T)2284 3651 y F1(2)2325 3639 y Gd(,)f
Gb(C)2425 3651 y F1(1)2466 3639 y Gd(,)h Gb(C)2567 3651
y F1(2)2608 3639 y Gd(,)f Gb(\000)6 b Gd(,)14 b F4(t)2779
3651 y F1(1)2819 3639 y Gd(,)21 b(or)g F4(t)3003 3651
y F1(2)p 508 3682 2536 4 v 905 3761 a Gb(\000)i F5(`)f
F4(t)1090 3773 y F1(1)1174 3761 y F4(t)1218 3773 y F1(2)1281
3761 y FF(:)i F4(X)e F0(j)1440 3776 y FX(X)1488 3785
y FB(1)1525 3776 y FX([X)1618 3785 y FB(2)1654 3776 y
FX([)p FA(f)p Gc(X)o FA(g)1806 3761 y Gb(C)1865 3773
y F1(1)1924 3761 y F5([)d Gb(C)2057 3773 y F1(2)2116
3761 y F5([)g F0(f)p F4(T)2260 3773 y F1(1)2324 3761
y FY(=)k F4(T)2453 3773 y F1(2)2494 3761 y FV(!)p F4(X)o
F0(g)3092 3701 y Gd(\()r(C)t(T)o(-)t(A)t F6(P)t(P)r Gd(\))1492
3919 y Gb(\000)g F5(`)f F4(0)h FF(:)g F4(Nat)f F0(j)1946
3934 y FX(;)2007 3919 y F0(fg)3040 3920 y Gd(\()r(C)t(T)o(-)t(Z)t
F6(E)t(R)t(O)s Gd(\))1501 4077 y Gb(\000)h F5(`)g F4(t)1686
4089 y F1(1)1750 4077 y FF(:)g F4(T)g F0(j)1909 4089
y FX(X)1992 4077 y Gb(C)p 1134 4120 1284 4 v 1134 4200
a(\000)g F5(`)g F4(succ)42 b(t)1537 4212 y F1(1)1601
4200 y FF(:)23 b F4(Nat)f F0(j)1847 4212 y FX(X)1930
4200 y Gb(C)d F5([)f F0(f)p F4(T)23 b FY(=)g F4(Nat)n
F0(g)3043 4139 y Gd(\()r(C)t(T)o(-)t(S)t F6(U)t(C)t(C)r
Gd(\))620 4358 y Gb(\000)g F5(`)g F4(t)806 4370 y F1(1)869
4358 y FF(:)g F4(T)987 4370 y F1(1)1051 4358 y F0(j)1069
4370 y FX(X)1117 4379 y FB(1)1180 4358 y Gb(C)1239 4370
y F1(1)1446 4358 y Gb(\000)g F5(`)g F4(t)1631 4370 y
F1(2)1695 4358 y FF(:)g F4(T)1813 4370 y F1(2)1876 4358
y F0(j)1894 4370 y FX(X)1942 4379 y FB(2)2006 4358 y
Gb(C)2065 4370 y F1(2)2272 4358 y Gb(\000)g F5(`)f F4(t)2457
4370 y F1(3)2521 4358 y FF(:)h F4(T)2639 4370 y F1(3)2702
4358 y F0(j)2720 4370 y FX(X)2768 4379 y FB(3)2832 4358
y Gb(C)2891 4370 y F1(3)1274 4457 y F5(X)1333 4469 y
F1(1)1374 4457 y Gb(;)g F5(X)1479 4469 y F1(2)1520 4457
y Gb(;)g F5(X)1625 4469 y F1(3)1687 4457 y Gd(nonoverlapping)955
4557 y Gb(C)1022 4527 y FX(0)1068 4557 y FY(=)g Gb(C)1213
4569 y F1(1)1272 4557 y F5([)c Gb(C)1405 4569 y F1(2)1464
4557 y F5([)g Gb(C)1597 4569 y F1(3)1656 4557 y F5([)g
F0(f)p F4(T)1800 4569 y F1(1)1864 4557 y FY(=)k F4(Nat)n
Gb(;)g F4(T)2170 4569 y F1(2)2234 4557 y FY(=)f F4(T)2363
4569 y F1(3)2404 4557 y FV(!)p F4(T)2530 4569 y F1(3)2571
4557 y F0(g)p 620 4600 2312 4 v 1031 4680 a Gb(\000)h
F5(`)g F4(iter)41 b(T)j(t)1521 4692 y F1(1)1605 4680
y F4(t)1649 4692 y F1(2)1733 4680 y F4(t)1777 4692 y
F1(3)1840 4680 y FF(:)24 b F4(T)1958 4692 y F1(3)2042
4680 y F0(j)2060 4692 y FX(X)2108 4701 y FB(1)2145 4692
y FX([X)2238 4701 y FB(2)2274 4692 y FX([X)2367 4701
y FB(3)2431 4680 y Gb(C)2498 4650 y FX(0)3079 4619 y
Gd(\()r(C)t(T)o(-)t(I)t F6(T)t(E)t(R)r Gd(\))450 4803
y(As)d(usual,)f(these)h(r)o(ules)g(\(when)g(r)o(ead)e(fr)o(om)h(bottom)
i(to)f(top\))g(determine)f(a)g(straightforwar)o(d)450
4903 y(pr)o(ocedur)o(e)f(that,)h(given)i Gb(\000)e Gd(and)h
F4(t)o Gd(,)g(calculates)f F4(T)g Gd(and)h Gb(C)g Gd(\(and)f
F5(X)12 b Gd(\))21 b(such)g(that)g Gb(\000)i F5(`)g F4(t)f
FF(:)i F4(T)f F0(j)3287 4915 y FX(X)3370 4903 y Gb(C)p
Gd(.)p eop
%%Page: 148 149
148 148 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(148)450 683 y(However)-6
b(,)30 b(unlike)f(the)g(original)g(typing)g(algorithm,)i(this)e(one)g
(never)f(fails,)i(in)f(the)g(sense)450 783 y(that)g(for)h(every)e
Gb(\000)i Gd(and)f F4(t)g Gd(ther)o(e)f(ar)o(e)g(always)h(some)i
F4(T)e Gd(and)g Gb(C)g Gd(such)h(that)g Gb(\000)38 b
F5(`)h F4(t)g FF(:)g F4(T)g F0(j)g Gb(C)p Gd(,)450 882
y(and)18 b(mor)o(eover)g(that)h F4(T)f Gd(and)g Gb(C)h
Gd(ar)o(e)e(uniquely)j(determined)e(by)g Gb(\000)h Gd(and)f
F4(t)o Gd(,)h(up)g(to)f(the)h(choice)g(of)450 982 y(names)f(of)f(fr)o
(esh)g(type)g(variables)g(in)h F5(X)12 b Gd(.)24 b(\(The)18
b(nondeterminism)h(arising)e(fr)o(om)g(the)h(fr)o(eedom)450
1082 y(to)j(choose)h(dif)o(fer)o(ent)c(fr)o(esh)i(type)h(variable)e
(names)i(will)h(be)e(addr)o(essed)f(in)i(Exer)o(cise)f(18.3.9.\))575
1181 y(T)-8 b(o)21 b(lighten)h(the)f(notation)h(in)g(the)f(following)h
(discussion,)g(we)f(usually)g(elide)g(the)g F5(X)33 b
Gd(and)450 1281 y(write)21 b(just)g Gb(\000)i F5(`)g
F4(t)g FF(:)g F4(T)g F0(j)f Gb(C)p Gd(.)2108 b FZ(2)450
1438 y Ge(18.3.3)18 b(Exercise)h([Quick)h(check]:)39
b Gd(Constr)o(uct)17 b(a)e(constraint)h(typing)h(derivation)e(whose)i
(con-)450 1538 y(clusion)22 b(is)658 1684 y F5(`)g Gb(\025)p
F4(x:X.)42 b Gb(\025)p F4(y:Y.)g Gb(\025)p F4(z:Z.)g(\(x)h(z\))g(\(y)f
(z\))23 b FF(:)g F4(S)g F0(j)f Gb(C)450 1830 y Gd(for)f(some)g
F4(S)f Gd(and)h Gb(C)p Gd(.)2297 b FZ(2)450 1988 y Ge(18.3.4)18
b(De\002nition:)40 b Gd(Suppose)28 b(that)h Gb(\000)38
b F5(`)g F4(t)f FF(:)h F4(S)g F0(j)g Gb(C)p Gd(.)50 b(A)28
b Ge(typing)g Gd(for)h FY(\()p Gb(\000)-10 b(;)14 b F4(t)-7
b Gb(;)14 b F4(S)p Gb(;)g(C)p FY(\))29 b Gd(is)g(a)g(pair)450
2088 y FY(\()p Gb(\033;)14 b F4(T)p FY(\))21 b Gd(such)g(that)g
Gb(\033)g Gd(satis\002es)g Gb(C)g Gd(and)f Gb(\033)p
F4(S)j FY(=)g F4(T)p Gd(.)1483 b FZ(2)575 2245 y Gd(Given)21
b(a)f(context)h Gb(\000)f Gd(and)g(a)g(term)h F4(t)o
Gd(,)g(we)f(now)i(have)e(two)h(dif)o(fer)o(ent)e(ways)i(of)f
(calculating)450 2345 y(sets)h(of)g(typings)g(for)g Gb(\000)g
Gd(and)f F4(t)o Gd(:)554 2491 y(1.)41 b(dir)o(ectly)-9
b(,)19 b(via)h(De\002nition)j(18.2.1;)18 b(or)554 2647
y(2.)41 b(via)21 b(the)i(constraint)g(typing)g(r)o(elation,)f(by)h
(\002nding)g F4(S)f Gd(and)g Gb(C)h Gd(such)f(that)h
Gb(\000)j F5(`)f F4(t)h FF(:)g F4(S)g F0(j)g Gb(C)658
2747 y Gd(and)20 b(then)h(using)h(De\002nition)g(18.3.4)c(to)k
(identify)e(the)h(set)g(of)g(typings)g(for)g FY(\()p
Gb(\000)-10 b(;)14 b F4(t)-7 b Gb(;)14 b F4(S)p Gb(;)g(C)p
FY(\))p Gd(.)450 2893 y(Our)25 b(next)g(job)g(is)g(to)h(show)g(that)e
(these)h(two)h(methods)f(yield)g(essentially)g(the)g(same)g(sets)g(of)
450 2992 y(typings.)42 b(W)-8 b(e)26 b(do)g(this)g(in)g(two)h(steps.)41
b(First)26 b(we)g(show)h(that)e(every)h FY(\()p Gb(\000)-10
b(;)14 b F4(t)-7 b Gb(;)14 b F4(S)p Gb(;)g(C)p FY(\))p
Gd(-typing)26 b(is)g(a)450 3092 y FY(\()p Gb(\000)-10
b(;)14 b F4(t)-7 b FY(\))p Gd(-typing)25 b([soundness].)37
b(Then)24 b(we)h(show)g(that)f(every)g FY(\()p Gb(\000)-10
b(;)14 b F4(t)-7 b FY(\))p Gd(-typing)25 b(can)f(be)g(extended)450
3192 y(to)d(a)f FY(\()p Gb(\000)-10 b(;)14 b F4(t)-6
b Gb(;)14 b F4(S)o Gb(;)g(C)p FY(\))p Gd(-typing)22 b([completeness].)
450 3349 y Ge(18.3.5)c(Theorem)i([Soundness)f(of)i(constraint)e
(typing]:)40 b Gd(Suppose)24 b(that)g Gb(\000)30 b F5(`)f
F4(t)h FF(:)g F4(S)f F0(j)h Gb(C)p Gd(.)36 b(If)450 3449
y FY(\()p Gb(\033;)14 b F4(T)p FY(\))21 b Gd(is)g(a)f(typing)i(for)e
FY(\()p Gb(\000)-10 b(;)14 b F4(t)-6 b Gb(;)14 b F4(S)o
Gb(;)g(C)p FY(\))p Gd(,)21 b(then)h(it)f(is)g(also)g(a)f(typing)h(for)g
FY(\()p Gb(\000)-10 b(;)14 b F4(t)-7 b FY(\))p Gd(.)656
b FZ(2)450 3607 y F7(Pr)o(oof:)66 b Gd(By)27 b(induction)g(on)g(the)g
(given)g(constraint)g(typing)g(derivation)g(for)f Gb(\000)33
b F5(`)h F4(t)f FF(:)h F4(S)f F0(j)h Gb(C)p Gd(,)450
3706 y(r)o(easoning)21 b(by)g(cases)f(on)h(the)g(last)g(r)o(ule)g
(used.)450 3826 y F7(Case)j Gd(C)t(T)o(-)t(V)l F6(A)t(R)r
F7(:)134 b F4(t)23 b FY(=)g F4(x)1088 3925 y(x:S)f F5(2)h
Gb(\000)1088 4025 y(C)h FY(=)f F0(fg)450 4145 y Gd(The)e(r)o(esult)f
(is)h(immediate,)f(since)h(by)i(T)o(-)t(V)l F6(A)t(R)g
Gb(\033\000)h F5(`)e F4(x)h FF(:)g FY(\()p Gb(\033\000)6
b FY(\)\()p F4(x)-5 b FY(\))21 b Gd(for)f(any)h Gb(\033)p
Gd(.)450 4265 y F7(Case)j Gd(C)t(T)o(-)t(A)t F6(B)t(S)q
F7(:)135 b F4(t)22 b FY(=)h Gb(\025)p F4(x:T)1409 4277
y F1(1)1449 4265 y F4(.t)1536 4277 y F1(1)1081 4365 y
F4(S)f FY(=)h F4(T)1277 4377 y F1(1)1317 4365 y FV(!)p
F4(S)1444 4377 y F1(2)1081 4464 y Gb(\000)5 b(;)17 b
F4(x:T)1302 4476 y F1(1)1366 4464 y F5(`)23 b F4(t)1483
4476 y F1(1)1547 4464 y FF(:)g F4(S)1665 4476 y F1(2)1728
4464 y F0(j)g Gb(C)450 4585 y Gd(By)e(the)g(induction)g(hypothesis,)h
FY(\()p Gb(\033;)14 b(\033)p F4(S)1733 4597 y F1(2)1774
4585 y FY(\))21 b Gd(is)g(a)f(typing)i(for)e FY(\(\()p
Gb(\000)7 b(;)17 b F4(x)o(:T)2645 4597 y F1(1)2685 4585
y FY(\))p Gb(;)23 b F4(t)2807 4597 y F1(1)2848 4585 y
FY(\))p Gd(,)d(i.e.,)658 4731 y Gb(\033\000)5 b(;)18
b F4(x)o(:)p Gb(\033)p F4(T)980 4743 y F1(1)1043 4731
y F5(`)23 b Gb(\033)p F4(t)1211 4743 y F1(1)1274 4731
y FF(:)h Gb(\033)p F4(S)1443 4743 y F1(2)1483 4731 y
Gb(:)450 4877 y Gd(By)f(T)o(-)t(A)t F6(B)t(S)q Gd(,)e
Gb(\033\000)i F5(`)g Gb(\025)p F4(x:)o Gb(\033)p F4(T)1262
4889 y F1(1)1302 4877 y F4(.)p Gb(\033)p F4(t)1440 4889
y F1(1)1503 4877 y FF(:)h Gb(\033)p F4(T)1671 4889 y
F1(1)1712 4877 y FV(!)p Gb(\033)p F4(S)1889 4889 y F1(2)1952
4877 y FY(=)f Gb(\033)p FY(\()p F4(T)2164 4889 y F1(1)2205
4877 y FV(!)p F4(S)2331 4889 y F1(2)2372 4877 y FY(\))g(=)g
F4(T)p Gd(,)d(as)h(r)o(equir)o(ed.)p eop
%%Page: 149 150
149 149 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(149)450 683 y F7(Case)24
b Gd(C)t(T)o(-)t(A)t F6(P)t(P)r F7(:)134 b F4(t)23 b
FY(=)g F4(t)1281 695 y F1(1)1366 683 y F4(t)1409 695
y F1(2)1085 783 y F4(S)g FY(=)g F4(X)1085 882 y Gb(\000)g
F5(`)g F4(t)1271 894 y F1(1)1334 882 y FF(:)h F4(S)1452
894 y F1(1)1516 882 y F0(j)e Gb(C)1615 894 y F1(1)1085
982 y Gb(\000)h F5(`)g F4(t)1271 994 y F1(2)1334 982
y FF(:)h F4(S)1452 994 y F1(2)1516 982 y F0(j)e Gb(C)1615
994 y F1(2)1085 1082 y Gb(C)i FY(=)f Gb(C)1313 1094 y
F1(1)1372 1082 y F5([)c Gb(C)1505 1094 y F1(2)1564 1082
y F5([)g F0(f)p F4(S)1708 1094 y F1(1)1771 1082 y FY(=)k
F4(S)1901 1094 y F1(2)1941 1082 y FV(!)p F4(X)p F0(g)450
1207 y Gd(By)j(the)g(de\002nition)i(of)e(satisfaction,)h
Gb(\033)f Gd(satis\002es)h(both)g Gb(C)2303 1219 y F1(1)2370
1207 y Gd(and)e Gb(C)2595 1219 y F1(2)2662 1207 y Gd(and)h
Gb(\033)p F4(S)2923 1219 y F1(1)2997 1207 y FY(=)32 b
Gb(\033)p FY(\()p F4(S)3219 1219 y F1(2)3259 1207 y FV(!)p
F4(X\))o Gd(.)450 1306 y(By)20 b(De\002nition)h(18.3.4,)c(we)j(see)g
(that)f FY(\()p Gb(\033;)24 b(\033)p F4(S)1856 1318 y
F1(1)1896 1306 y FY(\))c Gd(and)g FY(\()p Gb(\033;)j(\033)p
F4(S)2331 1318 y F1(2)2372 1306 y FY(\))d Gd(ar)o(e)e(typings)j(for)e
FY(\()p Gb(\000)-10 b(;)14 b F4(t)3120 1318 y F1(1)3160
1306 y Gb(;)g F4(S)3240 1318 y F1(1)3281 1306 y Gb(;)g(C)3377
1318 y F1(1)3418 1306 y FY(\))450 1406 y Gd(and)25 b
FY(\()p Gb(\000)-11 b(;)14 b F4(t)757 1418 y F1(2)797
1406 y Gb(;)g F4(S)878 1418 y F1(2)918 1406 y Gb(;)g(C)1014
1418 y F1(2)1055 1406 y FY(\))p Gd(,)26 b(fr)o(om)f(which)h(the)f
(induction)h(hypothesis)g(gives)f(us)h Gb(\033\000)31
b F5(`)f Gb(\033)p F4(t)3162 1418 y F1(1)3233 1406 y
FF(:)i Gb(\033)p F4(S)3409 1418 y F1(1)450 1506 y Gd(and)21
b Gb(\033\000)j F5(`)g Gb(\033)p F4(t)900 1518 y F1(2)965
1506 y FF(:)g Gb(\033)p F4(S)1134 1518 y F1(2)1174 1506
y Gd(.)k(But)21 b(since)h Gb(\033)p F4(S)1672 1518 y
F1(1)1736 1506 y FY(=)i Gb(\033)p F4(S)1917 1518 y F1(2)1958
1506 y FV(!)p Gb(\033)p F4(X)o Gd(,)e(we)f(then)h(have)f
Gb(\033\000)j F5(`)g Gb(\033)p F4(t)2978 1518 y F1(1)3043
1506 y FF(:)g Gb(\033)p F4(S)3212 1518 y F1(2)3252 1506
y FV(!)p Gb(\033)p F4(X)p Gd(,)450 1605 y(and,)c(by)j(T)o(-)t(A)t
F6(P)t(P)r Gd(,)e Gb(\033\000)i F5(`)g Gb(\033)p FY(\()p
F4(t)1344 1617 y F1(1)1428 1605 y F4(t)1472 1617 y F1(2)1512
1605 y FY(\))g FF(:)h Gb(\033)p F4(X)f FY(=)g F4(T)o
Gd(,)e(as)f(r)o(equir)o(ed.)450 1730 y F7(Other)g(cases:)450
1854 y Gd(Left)g(as)g(an)h(exer)o(cise.)2258 b FZ(2)450
2037 y Ge(18.3.6)18 b(De\002nition:)40 b Gd(W)-6 b(rite)20
b Gb(\033)p F0(n)p F5(X)33 b Gd(for)20 b(the)h(substitution)i(that)d
(is)h(unde\002ned)g(for)g(all)f(the)h(vari-)450 2137
y(ables)f(in)i F5(X)33 b Gd(and)20 b(otherwise)h(behaves)g(like)g
Gb(\033)p Gd(.)1463 b FZ(2)450 2319 y Ge(18.3.7)18 b(Theorem)i
([Completeness)e(of)j(constraint)e(typing]:)40 b Gd(Suppose)23
b Gb(\000)28 b F5(`)g F4(t)g FF(:)h F4(S)f F0(j)3192
2331 y FX(X)3280 2319 y Gb(C)p Gd(.)34 b(If)450 2419
y FY(\()p Gb(\033;)14 b F4(T)p FY(\))20 b Gd(is)g(a)g(typing)h(for)e
FY(\()p Gb(\000)-10 b(;)14 b F4(t)-6 b FY(\))20 b Gd(and)f
F7(dom)o FY(\()p Gb(\033)p FY(\))e F5(\\)e(X)36 b FY(=)23
b F5(;)p Gd(,)c(then)h(ther)o(e)g(is)g(some)g(typing)h
FY(\()p Gb(\033)3188 2389 y FX(0)3212 2419 y Gb(;)14
b F4(T)o FY(\))20 b Gd(for)450 2519 y FY(\()p Gb(\000)-10
b(;)14 b F4(t)-7 b Gb(;)14 b F4(S)p Gb(;)g(C)p FY(\))21
b Gd(such)g(that)g Gb(\033)1235 2488 y FX(0)1258 2519
y F0(n)p F5(X)35 b FY(=)23 b Gb(\033)p Gd(.)1843 b FZ(2)450
2701 y F7(Pr)o(oof:)66 b Gd(By)21 b(induction)h(on)f(the)g(given)g
(constraint)g(typing)h(derivation.)450 2826 y F7(Case)i
Gd(C)t(T)o(-)t(V)l F6(A)t(R)r F7(:)134 b F4(t)23 b FY(=)g
F4(x)1088 2925 y(x:S)f F5(2)h Gb(\000)450 3051 y Gd(Fr)o(om)i(the)f
(assumption)i(that)e FY(\()p Gb(\033;)14 b F4(T)p FY(\))25
b Gd(is)g(a)f(typing)h(for)f FY(\()p Gb(\000)-10 b(;)14
b F4(x)-6 b FY(\))p Gd(,)25 b(the)g(inversion)g(lemma)g(for)f(the)450
3150 y(typing)h(r)o(elation)f(\(7.4.1\))e(tells)j(us)f(that)h
F4(T)f Gd(is)h FY(\()p Gb(\033\000)6 b FY(\)\()p F4(x)-6
b FY(\))p Gd(.)37 b(But)24 b(then)h FY(\()p Gb(\033;)14
b F4(T)p FY(\))25 b Gd(is)g(also)f(a)g FY(\()p Gb(\000)-10
b(;)14 b F4(x)-6 b Gb(;)14 b F4(S)o Gb(;)g F0(fg)p FY(\))p
Gd(-)450 3250 y(typing.)450 3375 y F7(Case)24 b Gd(C)t(T)o(-)t(A)t
F6(B)t(S)q F7(:)135 b F4(t)22 b FY(=)h Gb(\025)p F4(x:T)1409
3387 y F1(1)1449 3375 y F4(.t)1536 3387 y F1(1)1081 3474
y Gb(\000)5 b(;)17 b F4(x:T)1302 3486 y F1(1)1366 3474
y F5(`)23 b F4(t)1483 3486 y F1(1)1547 3474 y FF(:)g
F4(S)1665 3486 y F1(2)1728 3474 y F0(j)1746 3486 y FX(X)1829
3474 y Gb(C)1081 3574 y F4(S)f FY(=)h F4(T)1277 3586
y F1(1)1317 3574 y FV(!)p F4(S)1444 3586 y F1(2)450 3699
y Gd(Fr)o(om)f(the)g(assumption)h(that)f FY(\()p Gb(\033;)14
b F4(T)p FY(\))22 b Gd(is)h(a)e(typing)i(for)f FY(\()p
Gb(\000)-10 b(;)14 b(\025)p F4(x)o(:T)2450 3711 y F1(1)2491
3699 y F4(.t)2578 3711 y F1(1)2619 3699 y FY(\))p Gd(,)22
b(the)g(inversion)h(lemma)450 3799 y(for)e(the)f(typing)i(r)o(elation)e
(yields)h Gb(\033\000)6 b(;)17 b F4(x:)p Gb(\033)p F4(T)1840
3811 y F1(1)1904 3799 y F5(`)23 b Gb(\033)p F4(t)2072
3811 y F1(1)2135 3799 y FF(:)g F4(T)2253 3811 y F1(2)2314
3799 y Gd(and)e F4(T)h FY(=)h Gb(\033)p F4(T)2722 3811
y F1(1)2762 3799 y FV(!)q F4(T)2889 3811 y F1(2)2930
3799 y Gd(.)575 3898 y(By)g(the)h(induction)g(hypothesis,)i(ther)o(e)d
(is)h(a)f(typing)h FY(\()p Gb(\033)2370 3868 y FX(0)2394
3898 y Gb(;)14 b F4(T)2474 3910 y F1(2)2515 3898 y FY(\))24
b Gd(for)f FY(\(\()p Gb(\000)6 b(;)-6 b F4(x:T)2963 3910
y F1(1)3004 3898 y FY(\))p Gb(;)28 b F4(t)3131 3910 y
F1(1)3171 3898 y Gb(;)h F4(S)3266 3910 y F1(2)3307 3898
y Gb(;)f(C)p FY(\))450 3998 y Gd(such)36 b(that)f Gb(\033)893
3968 y FX(0)916 3998 y F0(n)p F5(X)48 b Gd(agr)o(ees)34
b(with)i Gb(\033)p Gd(.)70 b(But)36 b(then)f Gb(\033)2099
3968 y FX(0)2123 3998 y FY(\()p F4(S)o FY(\))51 b(=)f
Gb(\033)2452 3968 y FX(0)2475 3998 y FY(\()p F4(T)2551
4010 y F1(1)2592 3998 y FV(!)p F4(S)2718 4010 y F1(2)2759
3998 y FY(\))g(=)g Gb(\033)p F4(T)3048 4010 y F1(1)3089
3998 y FV(!)p Gb(\033)3230 3968 y FX(0)3253 3998 y F4(S)3296
4010 y F1(2)3387 3998 y FY(=)450 4098 y Gb(\033)p F4(T)544
4110 y F1(1)584 4098 y FV(!)p F4(T)711 4110 y F1(2)775
4098 y FY(=)22 b F4(T)p Gd(,)e(so)i FY(\()p Gb(\033)1137
4067 y FX(0)1160 4098 y Gb(;)14 b F4(T)p FY(\))21 b Gd(is)g(a)f(typing)
i(for)e FY(\()p Gb(\000)6 b(;)17 b FY(\()p Gb(\025)p
F4(x:T)2156 4110 y F1(1)2197 4098 y F4(.t)2284 4110 y
F1(1)2324 4098 y FY(\))p Gb(;)24 b F4(T)2446 4110 y F1(1)2487
4098 y FV(!)p F4(S)2613 4110 y F1(2)2654 4098 y Gb(;)f(C)p
FY(\))p Gd(.)450 4222 y F7(Case)h Gd(C)t(T)o(-)t(A)t
F6(P)t(P)r F7(:)134 b F4(t)23 b FY(=)g F4(t)1281 4234
y F1(1)1366 4222 y F4(t)1409 4234 y F1(2)1085 4322 y
Gb(\000)g F5(`)g F4(t)1271 4334 y F1(1)1334 4322 y FF(:)h
F4(S)1452 4334 y F1(1)1516 4322 y F0(j)1534 4334 y FX(X)1582
4343 y FB(1)1645 4322 y Gb(C)1704 4334 y F1(1)1085 4421
y Gb(\000)f F5(`)g F4(t)1271 4433 y F1(2)1334 4421 y
FF(:)h F4(S)1452 4433 y F1(2)1516 4421 y F0(j)1534 4433
y FX(X)1582 4442 y FB(2)1645 4421 y Gb(C)1704 4433 y
F1(2)1085 4521 y F5(X)1144 4533 y F1(1)1204 4521 y F5(\\)18
b(X)1336 4533 y F1(2)1400 4521 y FY(=)23 b F5(;)d Gd(and)h
F4(X)f Gd(not)h(mentioned)h(in)f F5(X)2485 4533 y F1(1)2526
4521 y Gd(,)f F5(X)2626 4533 y F1(2)2667 4521 y Gd(,)h
F4(S)2752 4533 y F1(1)2793 4521 y Gd(,)f F4(S)2878 4533
y F1(2)2918 4521 y Gd(,)h Gb(C)3019 4533 y F1(1)3060
4521 y Gd(,)f Gb(C)3160 4533 y F1(2)1085 4621 y F4(S)j
FY(=)g F4(X)1085 4720 y F5(X)36 b FY(=)23 b F5(X)1325
4732 y F1(1)1384 4720 y F5([)c(X)1517 4732 y F1(2)1576
4720 y F5([)g F0(f)p F4(X)o F0(g)1085 4820 y Gb(C)24
b FY(=)f Gb(C)1313 4832 y F1(1)1372 4820 y F5([)c Gb(C)1505
4832 y F1(2)1564 4820 y F5([)g F0(f)p F4(S)1708 4832
y F1(1)1771 4820 y FY(=)k F4(S)1901 4832 y F1(2)1941
4820 y FV(!)p F4(X)p F0(g)p eop
%%Page: 150 151
150 150 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(150)450 683 y(Fr)o(om)22
b(the)h(assumption)g(that)g FY(\()p Gb(\033;)14 b F4(T)p
FY(\))22 b Gd(is)h(a)f(typing)h(for)f FY(\()p Gb(\000)-10
b(;)14 b F4(t)2321 695 y F1(1)2405 683 y F4(t)2449 695
y F1(2)2489 683 y FY(\))p Gd(,)23 b(the)g(inversion)g(lemma)f(for)450
783 y(the)f(typing)g(r)o(elation)g(yields)g Gb(\033\000)i
F5(`)g Gb(\033)p F4(t)1677 795 y F1(1)1741 783 y FF(:)g
F4(T)1859 795 y F1(1)1899 783 y FV(!)p F4(T)e Gd(and)f
Gb(\033\000)j F5(`)g Gb(\033)p F4(t)2494 795 y F1(2)2557
783 y FF(:)h F4(T)2675 795 y F1(1)2716 783 y Gd(.)575
882 y(By)19 b(the)g(induction)h(hypothesis,)g(ther)o(e)f(ar)o(e)f
(typings)i FY(\()p Gb(\033)2354 894 y F1(1)2395 882 y
Gb(;)14 b F4(T)2475 894 y F1(1)2516 882 y FV(!)p F4(T)o
FY(\))20 b Gd(for)e FY(\()p Gb(\000)-10 b(;)14 b F4(t)2960
894 y F1(1)3000 882 y Gb(;)g F4(S)3081 894 y F1(1)3121
882 y Gb(;)g(C)3217 894 y F1(1)3258 882 y FY(\))19 b
Gd(and)450 982 y FY(\()p Gb(\033)532 994 y F1(2)573 982
y Gb(;)14 b F4(T)653 994 y F1(1)694 982 y FY(\))29 b
Gd(for)g FY(\()p Gb(\000)-10 b(;)14 b F4(t)1032 994 y
F1(2)1072 982 y Gb(;)g F4(S)1153 994 y F1(2)1193 982
y Gb(;)g(C)1289 994 y F1(2)1330 982 y FY(\))p Gd(,)31
b(and)e Gb(\033)1634 994 y F1(1)1675 982 y F0(n)p F5(X)41
b Gd(and)29 b Gb(\033)2037 994 y F1(2)2078 982 y F0(n)o
F5(X)42 b Gd(agr)o(ee)28 b(with)i Gb(\033)p Gd(.)51 b(W)-8
b(e)29 b(must)h(exhibit)f(a)450 1082 y(substitution)e
Gb(\033)973 1051 y FX(0)1021 1082 y Gd(such)e(that:)34
b(\(1\))24 b Gb(\033)1595 1051 y FX(0)1618 1082 y F0(n)p
F5(X)37 b Gd(agr)o(ees)24 b(with)i Gb(\033)p Gd(,)g(\(2\))e
Gb(\033)2486 1051 y FX(0)2509 1082 y F4(X)31 b FY(=)g
F4(T)o Gd(,)26 b(and)f(\(3\))f Gb(\033)3114 1051 y FX(0)3162
1082 y Gd(satis\002es)450 1181 y F0(f)p F4(S)520 1193
y F1(1)584 1181 y FY(=)f F4(S)713 1193 y F1(2)754 1181
y FV(!)p F4(X)o F0(g)p Gd(,)d(i.e.,)g Gb(\033)1153 1151
y FX(0)1176 1181 y F4(S)1220 1193 y F1(1)1284 1181 y
FY(=)i Gb(\033)1427 1151 y FX(0)1451 1181 y F4(S)1494
1193 y F1(2)1535 1181 y FV(!)p Gb(\033)1676 1151 y FX(0)1699
1181 y F4(X)o Gd(.)k(De\002ne)21 b Gb(\033)2110 1151
y FX(0)2154 1181 y Gd(as)f(follows:)699 1332 y Gb(\033)757
1302 y FX(0)780 1332 y F4(Y)83 b FY(=)g Gb(\033)p F4(Y)123
b Gd(if)21 b F4(Y)31 b Gb(=)-51 b F5(2)24 b(X)699 1432
y Gb(\033)757 1402 y FX(0)780 1432 y F4(Y)83 b FY(=)g
Gb(\033)1103 1444 y F1(1)1143 1432 y F4(Y)g Gd(if)21
b F4(Y)h F5(2)i(X)1547 1444 y F1(1)699 1531 y Gb(\033)757
1501 y FX(0)780 1531 y F4(Y)83 b FY(=)g Gb(\033)1103
1543 y F1(2)1143 1531 y F4(Y)g Gd(if)21 b F4(Y)h F5(2)i(X)1547
1543 y F1(2)699 1631 y Gb(\033)757 1601 y FX(0)780 1631
y F4(Y)83 b FY(=)g F4(T)173 b Gd(if)21 b F4(Y)h FY(=)h
F4(X)p Gd(.)450 1782 y(Conditions)29 b(\(1\))e(and)g(\(2\))g(ar)o(e)f
(obviously)j(satis\002ed.)46 b(T)-8 b(o)28 b(check)g(\(3\),)g
(calculate)f(as)g(follows:)450 1882 y Gb(\033)508 1852
y FX(0)531 1882 y F4(S)575 1894 y F1(1)638 1882 y FY(=)c
Gb(\033)774 1894 y F1(1)815 1882 y F4(S)858 1894 y F1(1)922
1882 y FY(=)g F4(T)1051 1894 y F1(1)1092 1882 y FV(!)p
F4(T)g FY(=)f Gb(\033)1377 1894 y F1(2)1418 1882 y F4(S)1462
1894 y F1(2)1502 1882 y FV(!)p F4(T)h FY(=)g Gb(\033)1796
1852 y FX(0)1819 1882 y F4(S)1863 1894 y F1(2)1903 1882
y FV(!)p Gb(\033)2044 1852 y FX(0)2067 1882 y F4(X)g
FY(=)g Gb(\033)2278 1852 y FX(0)2301 1882 y FY(\()p F4(S)2377
1894 y F1(2)2417 1882 y FV(!)p F4(X)p FY(\))p Gd(.)450
2003 y F7(Other)d(cases:)450 2124 y Gd(Left)g(as)g(an)h(exer)o(cise.)
2258 b FZ(2)450 2289 y Ge(18.3.8)18 b(Corollary:)41 b
Gd(Suppose)23 b Gb(\000)j F5(`)h F4(t)f FF(:)h F4(S)f
F0(j)h Gb(C)p Gd(.)k(Ther)o(e)22 b(is)h(some)h(typing)f(for)g
FY(\()p Gb(\000)-11 b(;)14 b F4(t)-6 b FY(\))23 b Gd(if)o(f)f(ther)o(e)
g(is)450 2388 y(some)f(typing)h(for)e FY(\()p Gb(\000)-10
b(;)14 b F4(t)-6 b Gb(;)14 b F4(S)o Gb(;)g(C)p FY(\))p
Gd(.)1970 b FZ(2)450 2553 y F7(Pr)o(oof:)66 b Gd(By)21
b(Theor)o(ems)g(18.3.5)d(and)i(18.3.7.)1555 b FZ(2)450
2718 y Ge(18.3.9)18 b(Exercise)h([Recommended]:)38 b
Gd(Because)26 b(we)i(have)e(not)j(described)d(how)i(the)g(choice)450
2818 y(of)16 b(fr)o(esh)f(variable)f(names)i(actually)f(occurs)h
(\(beyond)g(stipulating)g(that)g(they)g(must)h(be)e(\223fr)o(esh)450
2918 y(enough\224\),)23 b(the)g(constraint)g(generation)g(algorithm)h
(that)f(we)f(have)h(been)f(working)i(with)g(is)450 3017
y(actually)17 b(nondeterministic.)25 b(Fortunately)-9
b(,)18 b(this)g(nondeterminism)h(is)e(inessential)h(and)f(eas-)450
3117 y(ily)k(eliminated.)575 3216 y(In)k(a)g(pr)o(oduction)g(compiler)
-6 b(,)27 b(the)e(nondeterministic)i(choice)e(of)h(a)f(fr)o(esh)f(type)
h(variable)450 3316 y(name)f(in)h(the)g(r)o(ule)h(C)t(T)o(-)t(A)t
F6(P)t(P)h Gd(might)f(be)e(r)o(eplaced)e(by)i(a)g(call)g(to)h(a)f
(function)h(that)g(generates)450 3416 y(a)f(new)g(type)g
(variable\227dif)o(fer)o(ent)d(fr)o(om)i(all)h(others)h(that)f(it)g
(ever)g(generates,)g(and)f(fr)o(om)h(all)450 3515 y(type)31
b(variables)f(mentioned)i(explicitly)f(in)h(the)f(context)g(or)h(term)f
(being)g(checked\227each)450 3615 y(time)21 b(it)g(is)g(called.)k
(Because)19 b(this)i(global)g(\223)p F4(gensym)m Gd(\224)g(operation)f
(works)i(by)f(side)f(ef)o(fects)f(on)i(a)450 3715 y(hidden)h(global)h
(variable,)e(it)h(is)h(dif)o(\002cult)f(to)h(r)o(eason)e(about)h(it)h
(formally)-9 b(.)30 b(However)-6 b(,)22 b(we)g(can)450
3814 y(easily)c(simulate)h(it)f(by)g(\223thr)o(eading\224)f(a)h
(sequence)g(of)g(unused)h(variable)e(names)h(thr)o(ough)h(the)450
3914 y(constraint)i(generation)g(r)o(ules.)575 4013 y(Let)f
Gb(F)h Gd(denote)g(a)f(sequence)h(of)g(fr)o(esh)f(type)h(variable)f
(names)h(\(with)g(each)f(element)h(of)g(the)450 4113
y(sequence)g(dif)o(fer)o(ent)e(fr)o(om)h(every)g(other\).)26
b(Then,)20 b(instead)h(of)g(writing)658 4265 y Gb(\000)h
F5(`)h F4(t)g FF(:)g F4(T)g F0(j)1025 4277 y FX(X)1108
4265 y Gb(C)450 4417 y Gd(for)e(the)f(constraint)i(generation)f
(judgement,)g(we)g(write)658 4569 y Gb(\000)h F5(`)776
4581 y F1(F)840 4569 y F4(t)g FF(:)i F4(T)e F0(j)1065
4581 y F1(F)1108 4565 y Fz(0)1158 4569 y Gb(C;)450 4721
y Gd(wher)o(e)g Gb(\000)6 b Gd(,)17 b Gb(F)p Gd(,)24
b(and)e F4(t)g Gd(ar)o(e)g(inputs)h(to)h(the)f(algorithm)g(and)g
F4(T)o Gd(,)g Gb(F)2417 4691 y FX(0)2441 4721 y Gd(,)g(and)f
Gb(C)h Gd(ar)o(e)f(outputs.)32 b(When-)450 4820 y(ever)26
b(it)h(needs)g(a)f(fr)o(esh)g(type)h(variable,)f(the)h(algorithm)h
(takes)e(of)o(f)g(the)h(fr)o(ont)g(element)g(of)g Gb(F)450
4920 y Gd(and)20 b(r)o(eturns)h(the)f(r)o(est)h(of)f
Gb(F)i Gd(as)e Gb(F)1489 4890 y FX(0)1512 4920 y Gd(.)p
eop
%%Page: 151 152
151 151 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(151)575 683 y(W)-6
b(rite)22 b(out)i(the)f(r)o(ules)h(for)f(this)h(algorithm)g(in)g
(detail.)32 b(Pr)o(ove)23 b(that)g(they)g(ar)o(e)f(equivalent,)450
783 y(in)30 b(an)f(appr)o(opriate)f(sense,)j(to)f(the)g(original)g
(constraint)g(generation)f(r)o(ules.)52 b(Solution)30
b(on)450 882 y(page)20 b(295.)2599 b FZ(2)450 1065 y
Ge(18.3.10)18 b(Exercise)g([Recommended]:)38 b Gd(Implement)17
b(the)f(algorithm)g(discussed)g(in)g(Exer)o(cise)f(18.3.9)450
1165 y(in)21 b(ML.)f(Use)g(the)h(datatype)616 1322 y
FT(type)40 b(ty)g(=)773 1414 y(TyArr)g(of)g(ty)g(*)f(ty)694
1505 y(|)h(TyId)g(of)g(string)694 1596 y(|)g(TyBool)694
1688 y(|)g(TyNat)450 1854 y Gd(for)21 b(types,)f(and)616
2011 y FT(type)40 b(constr)h(=)e(\(ty)h(*)g(ty\))g(list)450
2177 y Gd(for)29 b(constraint)i(sets.)52 b(Y)-8 b(ou)30
b(will)h(also)f(need)f(a)g(r)o(epr)o(esentation)f(for)h(in\002nite)i
(sequences)f(of)450 2277 y(fr)o(esh)18 b(variable)e(names.)25
b(Ther)o(e)18 b(ar)o(e)e(lots)j(of)g(ways)f(of)g(doing)h(this;)h(her)o
(e)d(is)i(a)f(fairly)f(dir)o(ect)h(one)450 2377 y(using)k(a)e(r)o
(ecursive)f(datatype:)616 2534 y FT(type)40 b(nextuvar)h(=)f(NextUVar)h
(of)e(string)i(*)e(uvargenerator)616 2626 y(and)h(uvargenerator)i(=)e
(unit)g FO(!)f FT(nextuvar)616 2808 y(let)h(uvargen)h(=)694
2900 y(let)f(rec)g(f)g(n)f(\(\))h(=)f(NextUVar\("?X_")k(^)c
(string_of_int)j(n,)e(f)g(\(n+1\)\))694 2991 y(in)g(f)g(0)450
3157 y Gd(That)22 b(is,)g F4(uvargen)d Gd(is)j(a)g(function)h(that,)f
(when)g(called)f(with)i(ar)o(gument)f F4(\(\))o Gd(,)g(r)o(eturns)f(a)h
(value)450 3257 y(of)e(the)g(form)g F4(NextUVar\(x,f\))-5
b Gd(,)20 b(wher)o(e)f F4(x)h Gd(is)h(a)e(fr)o(esh)g(type)h(variable)f
(name)h(and)g F4(f)f Gd(is)i(another)450 3356 y(function)h(of)e(the)h
(same)g(form.)k(Solution)d(on)f(page)g(296.)1161 b FZ(2)450
3642 y Gj(18.4)119 b(Uni\002cation)450 3831 y Gd(W)-8
b(e)18 b(have)g(given)h(two)g(dif)o(fer)o(ent)d(characterizations)h(of)
h(the)h(set)f(of)g(typings)i(for)e(a)f(given)i(term)450
3931 y(in)g(a)e(given)h(context.)25 b(But)18 b(we)g(have)g(not)g(addr)o
(essed)e(the)j(algorithmic)f(pr)o(oblem)g(of)g(deciding)450
4030 y(whether)k(or)h(not)f(this)h(set)f(is)h(empty\227i.e.,)e(of)i
(deciding)f(whether)g(it)g(is)h(possible)f(to)h(r)o(eplace)450
4130 y(type)e(variables)e(by)i(types)g(so)g(as)g(to)g(make)f(the)h
(term)g(typeable)f(in)h(the)g(or)o(dinary)f(sense.)26
b(The)450 4230 y(key)i(insight)i(that)e(we)h(need,)g(due)f(to)h
(Hindley)g([)p Ge(?)o Gd(])f(and)g(Milner)g([)p Ge(?)p
Gd(],)h(is)g(that,)h(if)e(the)h(set)f(of)450 4329 y(typings)h(of)f(a)g
(term)g(is)h(nonempty)-9 b(,)31 b(it)d(always)g(contains)i(a)d
(\223best\224)h(element,)i(in)e(the)h(sense)450 4429
y(that)21 b(the)g(r)o(est)f(of)g(the)h(typings)h(can)e(be)h(generated)f
(straightforwar)o(dly)f(fr)o(om)i(this)g(one.)575 4529
y(T)-8 b(o)19 b(show)i(that)e(such)h Ge(principal)d(typings)h
Gd(exist)h(\(and,)g(in)h(fact,)e(to)i(give)f(an)g(algorithm)h(for)450
4628 y(generating)f(them\),)h(we)f(r)o(ely)f(on)i(the)g(familiar)e
(operation)h(of)h Ge(uni\002cation)c Gd([)p Ge(?)p Gd(])j(on)g
(constraint)450 4728 y(sets.)p eop
%%Page: 152 153
152 152 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(152)450 683 y Ge(18.4.1)18
b(De\002nition:)40 b Gd(A)24 b(substitution)i Gb(\033)f
Gd(is)g(said)f(to)h Ge(unify)g Gd(two)g(types)g F4(S)f
Gd(and)g F4(T)h Gd(if)f Gb(\033)p F4(S)30 b FY(=)g Gb(\033)p
F4(T)p Gd(.)450 783 y(So)23 b(saying)g(that)g(\223)p
Gb(\033)f Gd(satis\002es)h(the)g(constraint)g(set)g Gb(C)p
Gd(\224)g(is)g(the)g(same)f(as)h(saying)g(\223)p Gb(\033)g
Gd(uni\002es)g F4(S)3419 795 y F1(i)450 882 y Gd(and)f
F4(T)657 894 y F1(i)711 882 y Gd(for)g(every)g(equation)h
F4(S)1456 894 y F1(i)1513 882 y FY(=)k F4(T)1646 894
y F1(i)1700 882 y Gd(in)c Gb(C)p Gd(.\224)31 b(W)-8 b(e)23
b(sometimes)g(speak)f(of)h Gb(\033)g Gd(as)f(a)g Ge(uni\002er)f
Gd(for)450 982 y Gb(C)p Gd(.)2864 b FZ(2)450 1165 y Ge(18.4.2)18
b(De\002nition:)40 b Gd(W)-8 b(e)19 b(say)h(that)g(a)f(substitution)j
Gb(\033)e Gd(is)g Ge(more)f(general)g(than)f Gd(a)h(substitution)450
1264 y Gb(\033)508 1234 y FX(0)531 1264 y Gd(,)i(written)g
Gb(\033)i F5(v)g Gb(\033)1081 1234 y FX(0)1104 1264 y
Gd(,)d(if)h Gb(\033)1276 1234 y FX(0)1322 1264 y FY(=)i
Gb(\015)18 b F5(\016)g Gb(\033)j Gd(for)f(some)i(substitution)g
Gb(\015)p Gd(.)913 b FZ(2)450 1447 y Ge(18.4.3)18 b(De\002nition:)40
b Gd(A)19 b Ge(principal)f(uni\002er)h Gd(for)h(a)g(constraint)h(set)g
Gb(C)f Gd(is)h(a)f(substitution)h Gb(\033)g Gd(that)450
1546 y(satis\002es)g Gb(C)g Gd(and)f(such)i(that)e Gb(\033)k
F5(v)e Gb(\033)1575 1516 y FX(0)1619 1546 y Gd(for)f(every)f
(substitution)i Gb(\033)2490 1516 y FX(0)2534 1546 y
Gd(that)f(also)g(satis\002es)g Gb(C)p Gd(.)139 b FZ(2)450
1729 y Ge(18.4.4)18 b(Exercise)h([Quick)h(check]:)39
b Gd(W)-6 b(rite)18 b(down)h(principal)f(uni\002ers)h(\(when)g(they)f
(exist\))g(for)450 1829 y(the)j(following)h(sets)f(of)g(constraints:)
699 1997 y F0(f)p F4(X)h FY(=)h F4(Nat)o Gb(;)g F4(Y)g
FY(=)f F4(X)p FV(!)p F4(X)p F0(g)699 2096 y(f)p F4(Nat)p
FV(!)n F4(Nat)g FY(=)h F4(X)p FV(!)p F4(Y)o F0(g)699
2196 y(f)p F4(X)p FV(!)o F4(Y)g FY(=)g F4(Y)p FV(!)o
F4(Z)p Gb(;)g F4(Z)g FY(=)g F4(U)p FV(!)o F4(W)p F0(g)699
2295 y(f)p F4(Nat)e FY(=)i F4(Nat)p FV(!)o F4(Y)p F0(g)699
2395 y(f)p F4(Y)f FY(=)h F4(Nat)p FV(!)o F4(Y)o F0(g)699
2495 y(fg)414 b Gd(\(the)21 b(empty)g(set)g(of)f(constraints\))450
2661 y(Solution)i(on)f(page)f(297.)2156 b FZ(2)450 2843
y Ge(18.4.5)18 b(De\002nition:)40 b Gd(The)20 b Ge(uni\002cation)e
(algorithm)i Gd(is)h(de\002ned)f(as)h(follows:)707 3009
y F7(unify)p FY(\()p Gb(C)p FY(\))101 b Gd(=)150 b(if)20
b Gb(C)k FY(=)e F5(;)p Gd(,)e(then)i F0(f)14 b(g)1311
3109 y Gd(else)20 b(let)h F0(f)p F4(S)h FY(=)h F4(T)p
F0(g)18 b F5([)g Gb(C)1990 3079 y FX(0)2037 3109 y FY(=)23
b Gb(C)e Gd(in)1443 3209 y(if)g F4(S)i FY(=)f F4(T)1526
3308 y Gd(then)g F7(unify)p FY(\()p Gb(C)1990 3278 y
FX(0)2013 3308 y FY(\))1443 3408 y Gd(else)f(if)g F4(S)h
FY(=)h F4(X)d Gd(and)h F4(X)32 b Gb(=)-52 b F5(2)24 b
F7(FV)p FY(\()p F4(T)p FY(\))1526 3508 y Gd(then)e F7(unify)p
FY(\()p F0(f)p F4(X)g F5(7)p FV(!)h F4(T)p F0(g)p Gb(C)2260
3477 y FX(0)2283 3508 y FY(\))18 b F5(\016)g F0(f)p F4(X)k
F5(7)p FV(!)i F4(T)o F0(g)1443 3607 y Gd(else)d(if)g
F4(T)h FY(=)h F4(X)d Gd(and)h F4(X)32 b Gb(=)-52 b F5(2)24
b F7(FV)p FY(\()p F4(S)p FY(\))1526 3707 y Gd(then)e
F7(unify)p FY(\()p F0(f)p F4(X)g F5(7)p FV(!)h F4(S)p
F0(g)p Gb(C)2260 3677 y FX(0)2283 3707 y FY(\))18 b F5(\016)g
F0(f)p F4(X)k F5(7)p FV(!)i F4(S)o F0(g)1443 3806 y Gd(else)d(if)g
F4(S)h FY(=)h F4(S)1872 3818 y F1(1)1912 3806 y FV(!)p
F4(S)2039 3818 y F1(2)2100 3806 y Gd(and)d F4(T)j FY(=)g
F4(T)2457 3818 y F1(1)2498 3806 y FV(!)p F4(T)2625 3818
y F1(2)1526 3906 y Gd(then)f F7(unify)p FY(\()p Gb(C)1990
3876 y FX(0)2032 3906 y F5([)c F0(f)p F4(S)2176 3918
y F1(1)2239 3906 y FY(=)23 b F4(T)2369 3918 y F1(1)2409
3906 y Gb(;)g F4(S)2499 3918 y F1(2)2562 3906 y FY(=)g
F4(T)2692 3918 y F1(2)2732 3906 y F0(g)p FY(\))1443 4006
y Gd(else)1526 4105 y(fail)450 4270 y(wher)o(e)i Gb(\033C)i
Gd(is)f(the)h(constraint)f(set)g(formed)g(by)g(applying)g
Gb(\033)h Gd(to)f(both)h(sides)f(of)g(all)g(the)g(con-)450
4370 y(straints)21 b(in)g Gb(C)p Gd(.)2479 b FZ(2)450
4553 y Ge(18.4.6)18 b(Theorem:)41 b Gd(The)27 b(algorithm)i
F7(unify)e Gd(always)h(terminates,)h(fails)e(only)h(when)h(given)e(a)
450 4652 y(non-uni\002able)34 b(constraint)h(set)f(as)f(input,)k(and)d
(otherwise)g(r)o(eturns)f(a)h(principal)f(uni\002er)-6
b(.)450 4752 y(Mor)o(e)20 b(formally:)554 4918 y(1.)41
b F7(unify)p FY(\()p Gb(C)p FY(\))21 b Gd(halts,)g(either)g(by)f
(failing)h(or)g(by)g(r)o(eturning)g(a)f(substitution,)i(for)f(all)f
Gb(C)p Gd(;)p eop
%%Page: 153 154
153 153 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(153)554 683 y(2.)41
b(if)20 b F7(unify)p FY(\()p Gb(C)p FY(\))k(=)f Gb(\033)p
Gd(,)e(then)g Gb(\033)g Gd(is)g(a)f(uni\002er)h(for)g
Gb(C)p Gd(;)554 849 y(3.)41 b(if)20 b Gb(\016)g Gd(is)i(a)e(uni\002er)h
(for)f Gb(C)p Gd(,)h(then)h F7(unify)p FY(\()p Gb(C)p
FY(\))h(=)g Gb(\033)e Gd(with)h Gb(\033)h F5(v)g Gb(\016)p
Gd(.)884 b FZ(2)450 1032 y F7(Pr)o(oof:)66 b Gd(For)32
b(part)e(\(1\),)i(de\002ne)f(the)g F7(degr)o(ee)g Gd(of)g(a)g
(constraint)g(set)g Gb(C)h Gd(to)f(be)g(the)g(pair)g
FY(\()p Gb(m;)14 b(n)p FY(\))p Gd(,)450 1131 y(wher)o(e)29
b Gb(m)h Gd(is)h(the)f(number)g(of)g(distinct)g(type)g(variables)f(in)h
Gb(C)g Gd(and)g Gb(n)g Gd(is)g(the)g(total)g(size)g(of)450
1231 y(the)g(types)f(in)h Gb(C)p Gd(.)53 b(It)29 b(is)h(easy)g(to)g
(check)f(that)h(each)f(clause)g(of)g(the)h F7(unify)g
Gd(algorithm)g(either)450 1331 y(terminates)23 b(immediately)f(\(with)i
(success)f(in)g(the)g(\002rst)g(case)f(or)h(failur)o(e)e(in)i(the)g
(last\))f(or)h(else)450 1430 y(makes)e(a)f(r)o(ecursive)g(call)g(to)h
F7(unify)g Gd(with)g(a)g(constraint)g(set)g(of)g(smaller)f(degr)o(ee.)
575 1530 y(Part)25 b(\(2\))f(is)i(a)f(straightforwar)o(d)f(induction)j
(on)f(the)g(number)f(of)h(r)o(ecursive)e(calls)i(in)g(the)450
1629 y(computation)20 b(of)g F7(unify)p FY(\()p Gb(C)p
FY(\))p Gd(.)25 b(All)20 b(the)f(cases)g(ar)o(e)f(trivial)h(except)g
(for)g(the)g(two)h(involving)h(vari-)450 1729 y(ables,)d(which)g
(depend)f(on)h(the)g(observation)g(that,)f(if)h Gb(\033)g
Gd(uni\002es)g F0(f)p F4(X)k F5(7)p FV(!)h F4(T)p F0(g)p
Gb(C)2833 1699 y FX(0)2856 1729 y Gd(,)17 b(then)i Gb(\033)7
b F5(\016)g F0(f)p F4(X)21 b F5(7)p FV(!)i F4(T)o F0(g)450
1829 y Gd(uni\002es)e F0(f)p F4(X)i FY(=)g F4(T)o F0(g)18
b F5([)h Gb(C)1127 1799 y FX(0)1150 1829 y Gd(.)575 1928
y(Part)29 b(\(3\))g(again)h(pr)o(oceeds)f(by)h(induction)h(on)g(the)f
(number)g(of)g(r)o(ecursive)f(calls)h(in)h(the)450 2028
y(computation)21 b(of)e F7(unify)p FY(\()p Gb(C)p FY(\))p
Gd(.)26 b(If)20 b Gb(C)g Gd(is)g(empty)-9 b(,)20 b(then)g
F7(unify)p FY(\()p Gb(C)p FY(\))h Gd(immediately)f(r)o(eturns)f
F0(f)14 b(g)p Gd(;)19 b(since)450 2128 y Gb(\016)33 b
FY(=)g Gb(\016)22 b F5(\016)g F0(f)14 b(g)p Gd(,)26 b(we)g(have)g
F0(f)14 b(g)32 b F5(v)h Gb(\016)25 b Gd(as)h(r)o(equir)o(ed.)41
b(If)25 b Gb(C)i Gd(is)f(non-empty)-9 b(,)28 b(then)f
F7(unify)p FY(\()p Gb(C)p FY(\))g Gd(chooses)450 2227
y(some)21 b(pair)f FY(\()p F4(S)p Gb(;)14 b F4(T)p FY(\))21
b Gd(fr)o(om)f Gb(C)h Gd(and)g(continues)g(by)g(cases)g(on)g(the)g
(shapes)f(of)h F4(S)g Gd(and)f F4(T)o Gd(.)450 2352 y
F7(Case:)135 b F4(S)23 b FY(=)g F4(T)450 2476 y Gd(Since)c
Gb(\016)h Gd(is)g(a)f(uni\002er)h(for)f Gb(C)p Gd(,)h(it)g(also)g
(uni\002es)g Gb(C)1925 2446 y FX(0)1948 2476 y Gd(.)25
b(By)20 b(the)g(induction)g(hypothesis,)h F7(unify)p
FY(\()p Gb(C)p FY(\))j(=)450 2576 y Gb(\033)d Gd(with)h
Gb(\033)h F5(v)f Gb(\016)p Gd(,)f(as)f(r)o(equir)o(ed.)450
2700 y F7(Case:)135 b F4(S)23 b FY(=)g F4(X)d Gd(and)g
F4(X)32 b Gb(=)-51 b F5(2)23 b F4(T)450 2825 y Gd(Since)i
Gb(\016)h Gd(uni\002es)g F4(S)f Gd(and)g F4(T)p Gd(,)h(we)g(have)f
Gb(\016)p FY(\()p F4(X)p FY(\))32 b(=)g Gb(\016)p FY(\()p
F4(T)o FY(\))p Gd(.)41 b(So,)26 b(for)f(any)h(type)g
F4(U)o Gd(,)h(we)e(have)g Gb(\016)p FY(\()p F4(U)p FY(\))32
b(=)450 2925 y Gb(\016)p FY(\()p F0(f)p F4(X)g F5(7)p
FV(!)g F4(T)p F0(g)p F4(U)o FY(\))p Gd(;)d(in)d(particular)-6
b(,)26 b(since)g Gb(\016)f Gd(satis\002es)i Gb(C)2098
2894 y FX(0)2147 2925 y Gd(it)f(must)g(also)g(satisfy)g
F0(f)p F4(X)32 b F5(7)p FV(!)h F4(T)o F0(g)p Gb(C)3226
2894 y FX(0)3249 2925 y Gd(.)41 b(The)450 3024 y(induction)31
b(hypothesis)g(then)g(tells)f(us)g(that)g F7(unify)p
FY(\()p F0(f)p F4(X)40 b F5(7)p FV(!)g F4(T)p F0(g)p
Gb(C)2511 2994 y FX(0)2533 3024 y FY(\))h(=)f Gb(\033)2767
2994 y FX(0)2790 3024 y Gd(,)32 b(with)f Gb(\016)39 b
FY(=)h Gb(\015)25 b F5(\016)g Gb(\033)3427 2994 y FX(0)450
3124 y Gd(for)i(some)h Gb(\015)p Gd(.)45 b(Since)27 b
F7(unify)p FY(\()p Gb(C)p FY(\))37 b(=)e Gb(\033)1637
3094 y FX(0)1683 3124 y F5(\016)23 b F0(f)p F4(X)35 b
F5(7)p FV(!)g F4(T)p F0(g)p Gd(,)28 b(showing)h(that)f
Gb(\016)35 b FY(=)g Gb(\015)23 b F5(\016)g FY(\()p Gb(\033)3012
3094 y FX(0)3059 3124 y F5(\016)g F0(f)p F4(X)34 b F5(7)p
FV(!)i F4(T)o F0(g)p FY(\))450 3223 y Gd(will)29 b(complete)g(the)g(ar)
o(gument.)48 b(Choose)29 b(any)g(type)f(variable)g F4(Y)o
Gd(.)49 b(If)28 b F4(Y)37 b F5(6)p FY(=)h F4(X)o Gd(,)31
b(then)e(clearly)450 3323 y FY(\()p Gb(\015)20 b F5(\016)g
FY(\()p Gb(\033)705 3293 y FX(0)748 3323 y F5(\016)g
F0(f)p F4(X)26 b F5(7)p FV(!)h F4(T)p F0(g)p FY(\)\))p
F4(Y)g FY(=)g(\()p Gb(\015)20 b F5(\016)f Gb(\033)1535
3293 y FX(0)1559 3323 y FY(\))p F4(Y)27 b FY(=)g Gb(\016)p
F4(Y)o Gd(.)32 b(On)24 b(the)f(other)g(hand,)g FY(\()p
Gb(\015)d F5(\016)g FY(\()p Gb(\033)2869 3293 y FX(0)2912
3323 y F5(\016)g F0(f)p F4(X)26 b F5(7)p FV(!)i F4(T)o
F0(g)p FY(\)\))p F4(X)f FY(=)450 3423 y(\()p Gb(\015)19
b F5(\016)g Gb(\033)671 3393 y FX(0)694 3423 y FY(\))p
F4(T)26 b FY(=)g Gb(\016)p F4(X)o Gd(,)c(as)g(we)g(saw)h(above.)29
b(Combining)24 b(these)e(observations,)h(we)f(see)g(that)g
Gb(\016)p F4(Y)j FY(=)450 3522 y(\()p Gb(\015)18 b F5(\016)g
FY(\()p Gb(\033)701 3492 y FX(0)743 3522 y F5(\016)g
F0(f)p F4(X)k F5(7)p FV(!)h F4(T)p F0(g)p FY(\)\))p F4(Y)d
Gd(for)h(all)f(variables)g F4(Y)p Gd(,)g(i.e.)25 b Gb(\016)e
FY(=)g(\()p Gb(\015)18 b F5(\016)g FY(\()p Gb(\033)2409
3492 y FX(0)2451 3522 y F5(\016)g F0(f)p F4(X)k F5(7)p
FV(!)h F4(T)p F0(g)p FY(\)\))p Gd(.)450 3647 y F7(Case:)135
b F4(T)23 b FY(=)g F4(X)d Gd(and)g F4(X)32 b Gb(=)-51
b F5(2)23 b F4(S)450 3771 y Gd(Similar)-6 b(.)450 3896
y F7(Case:)135 b F4(S)23 b FY(=)g F4(S)958 3908 y F1(1)999
3896 y FV(!)p F4(S)1125 3908 y F1(2)1187 3896 y Gd(and)d
F4(T)i FY(=)h F4(T)1544 3908 y F1(1)1584 3896 y FV(!)p
F4(T)1711 3908 y F1(2)450 4021 y Gd(Straightforwar)o(d.)43
b(Just)28 b(note)g(that)f Gb(\016)g Gd(is)h(a)e(uni\002er)i(of)f
F0(f)p F4(S)2300 4033 y F1(1)2340 4021 y FV(!)p F4(S)2467
4033 y F1(2)2543 4021 y FY(=)35 b F4(T)2684 4033 y F1(1)2725
4021 y FV(!)p F4(T)2851 4033 y F1(2)2892 4021 y F0(g)23
b F5([)g Gb(C)3087 3990 y FX(0)3138 4021 y Gd(if)o(f)j(it)i(is)f(a)450
4120 y(uni\002er)21 b(of)g Gb(C)877 4090 y FX(0)918 4120
y F5([)e F0(f)p F4(S)1062 4132 y F1(1)1126 4120 y FY(=)k
F4(T)1255 4132 y F1(1)1296 4120 y Gb(;)g F4(S)1386 4132
y F1(2)1449 4120 y FY(=)g F4(T)1579 4132 y F1(2)1619
4120 y F0(g)p Gd(.)575 4220 y(If)28 b(none)h(of)g(the)f(above)g(cases)g
(apply)h(to)f F4(S)h Gd(and)f F4(T)o Gd(,)j(then)e F7(unify)p
FY(\()p Gb(C)p FY(\))g Gd(fails.)49 b(But)28 b(this)h(can)450
4319 y(only)f(happen)f(in)g(two)h(ways:)38 b(either)27
b F4(S)g Gd(is)g F4(Nat)f Gd(and)h F4(T)f Gd(is)i(an)f(arr)o(ow)f(type)
h(\(or)g(vice)f(versa\),)450 4419 y(or)i(else)g F4(S)36
b FY(=)h F4(X)27 b Gd(and)h F4(X)36 b F5(2)h F4(T)27
b Gd(\(or)h(vice)g(versa\).)46 b(The)28 b(\002rst)g(case)g(obviously)h
(contradicts)f(the)450 4519 y(assumption)33 b(that)f
Gb(C)g Gd(is)g(uni\002able.)59 b(T)-8 b(o)33 b(see)f(that)g(the)g
(second)g(does)g(too,)j(r)o(ecall)c(that,)j(by)450 4618
y(assumption,)c Gb(\016)p F4(S)35 b FY(=)h Gb(\016)p
F4(T)o Gd(;)31 b(if)d F4(X)f Gd(occurr)o(ed)f(in)i F4(T)p
Gd(,)h(then)f Gb(\016)p F4(T)f Gd(would)h(always)g(be)f(strictly)h(lar)
o(ger)450 4718 y(than)21 b Gb(\016)p F4(S)o Gd(.)26 b(Thus,)21
b F7(unify)p FY(\()p Gb(C)p FY(\))g Gd(never)g(fails)f(when)h
Gb(C)g Gd(is)h(satis\002able.)901 b FZ(2)450 4901 y Ge(18.4.7)18
b(Exercise)h([Recommended]:)38 b Gd(Implement)21 b(the)g(uni\002cation)
h(algorithm)f(in)h(ML.)p eop
%%Page: 154 155
154 154 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(154)575 683 y(The)19
b(main)h(data)e(str)o(uctur)o(e)h(needed)g(for)g(this)i(exer)o(cise)d
(is)i(a)f(r)o(epr)o(esentation)f(of)i(substitu-)450 783
y(tions.)27 b(Ther)o(e)20 b(ar)o(e)f(many)j(alternatives;)d(one)j
(simple)f(one)g(is)h(to)f(r)o(euse)f(the)h F4(constr)d
Gd(datatype)450 882 y(fr)o(om)23 b(Exer)o(cise)f(18.3.10:)28
b(a)23 b(substitution)i(is)f(just)g(a)f(constraint)h(set,)g(all)f(of)h
(whose)g(left-hand)450 982 y(sides)h(ar)o(e)f(uni\002cation)j
(variables.)38 b(If)25 b F4(substinty)d Gd(is)k(a)f(function)h(that)f
(performs)h(substitu-)450 1082 y(tion)c(of)e(a)h(type)f(for)h(a)f
(single)i(type)e(variable)616 1239 y FT(let)40 b(substinty)h(tyX)f(tyT)
g(tyS)g(=)694 1331 y(let)g(rec)g(o)g(=)f(function)851
1422 y(TyArr\(tyT1,tyT2\))k FO(!)c FT(TyArr\(o)i(tyT1,)f(o)g(tyT2\))773
1513 y(|)f(TyNat)i FO(!)e FT(TyNat)773 1605 y(|)g(TyBool)i
FO(!)e FT(TyBool)773 1696 y(|)g(TyId\(s\))i FO(!)e FT(if)h(s=tyX)g
(then)g(tyT)g(else)g(TyId\(s\))694 1787 y(in)g(o)g(tyS)450
1953 y Gd(then)21 b(application)g(of)g(a)f(whole)h(substitution)i(to)e
(a)f(type)h(can)f(be)h(de\002ned)f(as)g(follows:)616
2111 y FT(let)40 b(applysubst)h(constr)g(tyT)f(=)694
2202 y(List.fold_left)773 2294 y(\(fun)g(tyS)g(\(TyId\(tyX\),tyC2\))j
FO(!)c FT(substinty)i(tyX)f(tyC2)g(tyS\))773 2385 y(tyT)g(constr)450
2551 y Gd(Solution)22 b(on)f(page)f(297.)2156 b FZ(2)450
2837 y Gj(18.5)119 b(Principal)29 b(T)-11 b(ypings)450
3026 y Ge(18.5.1)18 b(De\002nition:)40 b Gd(A)32 b Ge(principal)f
(typing)h Gd(for)g FY(\()p Gb(\000)-10 b(;)14 b F4(t)-6
b Gb(;)14 b F4(S)o Gb(;)g(C)p FY(\))34 b Gd(is)f(a)f(typing)i
FY(\()p Gb(\033;)14 b F4(T)p FY(\))33 b Gd(such)g(that,)450
3126 y(whenever)21 b FY(\()p Gb(\033)926 3095 y FX(0)949
3126 y Gb(;)14 b F4(T)1037 3095 y FX(0)1060 3126 y FY(\))21
b Gd(is)g(also)g(a)g(typing)g(for)g FY(\()p Gb(\000)-10
b(;)14 b F4(t)-7 b Gb(;)14 b F4(S)p Gb(;)g(C)p FY(\))p
Gd(,)21 b(we)f(have)h Gb(\033)i F5(v)g Gb(\033)2750 3095
y FX(0)2773 3126 y Gd(.)600 b FZ(2)450 3308 y Ge(18.5.2)18
b(Exercise)h([Quick)h(check]:)39 b Gd(Find)21 b(a)f(principal)h(typing)
h(for)658 3474 y Gb(\025)p F4(x:X.)41 b Gb(\025)p F4(y:Y.)h
Gb(\025)p F4(z:Z.)g(\(x)h(z\))g(\(y)g(z\))o Gb(:)1445
b FZ(2)450 3657 y Ge(18.5.3)18 b(Theorem)i([Principal)f(typing]:)40
b Gd(If)20 b FY(\()p Gb(\000)-11 b(;)14 b F4(t)-6 b Gb(;)14
b F4(S)o Gb(;)g(C)p FY(\))21 b Gd(has)g(any)f(typing,)h(then)g(it)f
(has)g(a)g(prin-)450 3757 y(cipal)k(one.)36 b(Mor)o(eover)-6
b(,)24 b(the)g(uni\002cation)h(algorithm)g(can)f(be)g(used)g(to)h
(determine)f(whether)450 3856 y FY(\()p Gb(\000)-10 b(;)14
b F4(t)-7 b Gb(;)14 b F4(S)p Gb(;)g(C)p FY(\))21 b Gd(has)g(a)f(typing)
i(and,)e(if)g(so,)h(to)h(r)o(eturn)e(a)g(principal)g(one.)814
b FZ(2)450 4039 y F7(Pr)o(oof:)66 b Gd(Immediate)18 b(fr)o(om)f(the)g
(de\002nition)i(of)f(typing)g(and)f(the)h(pr)o(operties)f(of)g
(uni\002cation.)i FZ(2)450 4221 y Ge(18.5.4)f(Corollary:)41
b Gd(It)21 b(is)g(decidable)f(whether)h FY(\()p Gb(\000)-10
b(;)13 b F4(t)-6 b FY(\))21 b Gd(has)g(a)f(typing.)773
b FZ(2)450 4404 y F7(Pr)o(oof:)66 b Gd(By)21 b(Cor)o(ollary)f(18.3.8)f
(and)h(Theor)o(em)g(18.5.3.)1220 b FZ(2)450 4587 y Ge(18.5.5)18
b(Exercise)h([Recommended]:)38 b Gd(Use)33 b(the)g(implementations)h
(of)f(constraint)h(genera-)450 4686 y(tion)20 b(\(Exer)o(cise)d
(18.3.10\))f(and)j(uni\002cation)h(\(Exer)o(cise)d(18.4.7\))f(to)k
(constr)o(uct)f(a)g(r)o(unning)h(type-)450 4786 y(checker)e(that)g
(calculates)f(principal)h(typings,)i(using)f(the)f F4(simple)e
Gd(checker)i(pr)o(ovided)f(in)i(the)450 4886 y(course)i(dir)o(ectory)f
(as)g(a)g(starting)h(point.)1651 b FZ(2)p eop
%%Page: 155 156
155 155 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)666
b Gd(1)t(8)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(R)t F6(E)t(C)t(O)t(N)t(S)t(T)
t(R)t(U)t(C)t(T)t(I)t(O)t(N)670 b Gd(155)450 683 y Ge(18.5.6)18
b(Exercise:)39 b Gd(What)32 b(dif)o(\002culties)f(arise)g(in)g
(extending)h(the)f(basic)g(de\002nitions)i(\(18.3.2,)450
783 y(etc.\))j(to)25 b(deal)f(with)h(r)o(ecor)o(ds?)36
b(How)25 b(might)h(they)f(be)f(addr)o(essed?)35 b(Solution)26
b(on)f(page)f(298.)450 882 y FZ(2)575 1065 y Gd(Principal)33
b(typings)i(can)f(be)f(used)h(to)g(build)g(a)f(type)h(r)o(econstr)o
(uction)g(algorithm)h(that)450 1165 y(works)25 b(mor)o(e)f(incr)o
(ementally)g(than)h(the)g(one)f(we)h(have)f(developed)f(her)o(e.)36
b(Instead)24 b(of)g(gen-)450 1264 y(erating)29 b(all)h(the)f
(constraints)i(\002rst)f(and)f(then)h(trying)g(to)g(solve)g(them,)i(we)
e(can)f(interleave)450 1364 y(generation)23 b(and)f(solving,)i(so)f
(that)g(the)f(type)h(r)o(econstr)o(uction)g(algorithm)g(actually)f(r)o
(eturns)450 1463 y(a)16 b(principal)g(typing)h(at)f(each)f(step.)24
b(The)17 b(fact)e(that)h(the)h(typings)g(ar)o(e)e(always)h
F7(principal)f Gd(is)i(what)450 1563 y(ensur)o(es)j(that)g(the)g
(algorithm)g(never)g(needs)g(to)g(go)h(back)e(and)h(r)o(e-analyze)d(a)j
(subterm)g(that)g(it)450 1663 y(has)j(alr)o(eady)e(pr)o(ocessed,)h
(since)h(it)h(makes)f(only)g(the)g(minimum)i(commitments)g(needed)d(to)
450 1762 y(achieve)e(typeability)g(at)g(each)g(step.)25
b(One)c(major)g(advantage)e(of)h(such)h(an)f(algorithm)h(is)g(that)450
1862 y(it)g(can)f(pinpoint)i(err)o(ors)e(in)h(the)g(user)6
b('s)21 b(pr)o(ogram)f(much)i(mor)o(e)e(pr)o(ecisely)-9
b(.)450 2045 y Ge(18.5.7)18 b(Exercise:)39 b Gd(Modify)23
b(your)g(solution)h(to)f(Exer)o(cise)e(18.5.5)f(to)j(perform)f
(uni\002cation)i(in-)450 2144 y(cr)o(ementally)c(during)h(typechecking)
g(and)g(r)o(eturn)f(principal)g(typings.)647 b FZ(2)450
2430 y Gj(18.6)119 b(Further)29 b(Reading)p eop
%%Page: 156 157
156 156 bop 450 1306 a F3(Chapter)44 b(19)450 1721 y
Gk(Universal)52 b(T)-19 b(ypes)770 2177 y F7(T)-8 b(ype)20
b(structur)o(e)h(is)g(a)g(syntactic)f(discipline)g(for)h(enfor)o(cing)g
(levels)g(of)g(abstraction.)2265 2278 y Gd(\227)g(John)g(Reynolds)h
([Rey83)o(])575 2478 y F7(Some)e(writing)h(needed.)450
2762 y Gj(19.1)119 b(Motivation)450 2951 y Gd(As)28 b(we)g(observed)g
(at)f(the)i(beginning)g(of)f(Chapter)f(12,)i(the)f(pur)o(e)f(simply)i
(typed)f(lambda-)450 3051 y(calculus)18 b(is)h(a)f(rather)f(r)o
(estrictive)h(system)h(in)f(some)h(r)o(espects,)f(if)g(we)g(consider)h
(it)g(as)f(the)g(basis)450 3150 y(for)e(a)h(pr)o(ogramming)g(language.)
23 b(Although)18 b(we)f(can)f(enrich)h(it)g(with)g(numer)o(ous)g
(additional)450 3250 y(type)h(constr)o(uctors)i(\(r)o(efer)o(ences,)15
b(lists,)20 b(etc.\),)d(primitive)i(types)f(\()p F4(Nat)o
Gd(,)g F4(Bool)n Gd(,)h F4(Unit)n Gd(,)g(etc.\),)e(and)450
3349 y(convenient)i(contr)o(ol)g(constr)o(ucts)g(\()p
F4(let)o Gd(,)f F4(fix)o Gd(,)g(etc.\),)g(the)h(rigidity)f(of)h(the)f
(\223cor)o(e\224)f(typing)i(r)o(ules)450 3449 y(can)k(make)g(it)g(dif)o
(\002cult)g(to)g(exploit)g(these)h(featur)o(es)d(to)j(full)f
(advantage.)31 b(In)23 b(Chapter)g(12,)f(we)450 3549
y(explor)o(ed)28 b(one)h(way)g(of)g(r)o(e\002ning)g(the)g(typing)h(r)o
(elation)e(to)h(make)g(it)g(much)h(mor)o(e)e(\003exible:)450
3648 y(adding)c(a)f(subtyping)j(r)o(elation)d(and)h(allowing)h(types)g
(of)f(terms)g(to)h(be)e(\223pr)o(omoted\224)g(when)450
3748 y(matching)e(the)g(types)g(of)g(functions)h(and)e(their)h(ar)o
(guments.)575 3848 y(In)e(this)i(chapter)-6 b(,)18 b(we)i(intr)o(oduce)
f(another)-6 b(,)19 b(rather)g(dif)o(fer)o(ent,)e(way)j(of)f(adding)g
(\003exibility)450 3947 y(to)27 b(the)g(cor)o(e)f(type)h(system.)44
b(T)-8 b(o)27 b(motivate)g(this)g(extension,)i(note)e(that)g(in)g
Gb(\025)2912 3917 y FC(!)3008 3947 y Gd(ther)o(e)f(ar)o(e)f(an)450
4047 y(in\002nite)d(number)f(of)f(\223doubling\224)h(functions)616
4198 y FT(doubleNat)41 b(=)f FM(\025)p FT(f:Nat)p FO(!)p
FT(Nat.)h FM(\025)p FT(x:Nat.)f(f)f(\(f)h(x\);)529 4306
y FS(I)616 4316 y FT(doubleNat)h(:)f(\(Nat)p FO(!)p FT(Nat\))h
FO(!)e FT(Nat)h FO(!)f FT(Nat)616 4482 y(doubleRcd)i(=)f
FM(\025)p FT(f:{l:Nat})p FO(!)q FT({l:Nat}.)h FM(\025)p
FT(x:{l:Nat}.)h(f)d(\(f)h(x\);)529 4605 y FS(I)616 4615
y FT(doubleRcd)h(:)f(\({l:Nat})p FO(!)q FT({l:Nat}\))h
FO(!)e FT({l:Nat})i FO(!)e FT({l:Nat})616 4781 y(doubleRcd)i(=)f
FM(\025)p FT(f:\(Nat)p FO(!)q FT(Nat\))p FO(!)p FT(\(Nat)p
FO(!)q FT(Nat\).)g FM(\025)p FT(x:Nat)p FO(!)q FT(Nat.)g(f)g(\(f)f
(x\);)529 4904 y FS(I)616 4914 y FT(doubleRcd)i(:)f(\(\(Nat)p
FO(!)q FT(Nat\))p FO(!)p FT(Nat)p FO(!)q FT(Nat\))g FO(!)f
FT(\(Nat)p FO(!)q FT(Nat\))h FO(!)f FT(Nat)h FO(!)f FT(Nat)1888
5169 y Gd(156)p eop
%%Page: 157 158
157 157 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(157)616 683 y FT(\(etc.\))450
866 y Gd(each)22 b(applicable)f(to)i(a)f(dif)o(fer)o(ent)e(type)i(of)h
(ar)o(gument,)f(but)g(all)g(sharing)h(pr)o(ecisely)f(the)g(same)450
965 y(behavior)i(\(even)f(the)i(same)f(pr)o(ogram)f(text,)h(modulo)i
(typing)e(annotations\).)37 b(This)25 b(kind)f(of)450
1065 y(\223cut)c(and)h(paste\224)e(pr)o(ogramming)i(violates)g(a)f
(basic)h(principle)g(of)f(softwar)o(e)g(engineering:)658
1231 y(W)-6 b(rite)26 b(each)g(piece)g(of)h(functionality)h(in)f(one)g
(place.)43 b(If)26 b(something)j(has)e(to)g(be)658 1331
y(used)34 b(many)g(times)h(in)g(slightly)h(dif)o(fer)o(ent)c(ways,)38
b F7(abstract)c(out)g Gd(the)g(varying)658 1430 y(parts.)450
1596 y(Her)o(e,)29 b(the)g(varying)g(parts)f(ar)o(e)f(the)i(types!)50
b(What)29 b(we)f(want,)j(it)e(seems,)i(ar)o(e)c(facilities)h(for)450
1696 y(\223abstracting)19 b(out\224)h(a)f(type)h(fr)o(om)g(a)f(term)h
(and)g(later)f(instantiating)i(this)g(abstract)e(\(or)g(\223poly-)450
1796 y(morphic\224\))i(term)f(by)h(applying)g(it)g(to)g(a)f(concr)o
(ete)h(type.)575 1895 y(The)28 b(system)h(we'll)g(be)f(studying)h(in)g
(this)h(chapter)d(was)i(developed)e(\(one)i(is)f(tempted)450
1995 y(to)33 b(say)g(\223discover)o(ed\224\))d(independently)-9
b(,)36 b(in)d(the)g(early)f(1970s)f(by)i(a)g(computer)f(scientist,)450
2094 y(John)c(Reynolds,)h(who)f(called)e(it)i(the)f Ge(polymorphic)f
(lambda-calculus)c Gd([Rey74)o(],)28 b(and)f(by)450 2194
y(a)33 b(logician,)j(Jean-Y)-7 b(ves)32 b(Girar)o(d,)i(who)g(called)e
(it)i Ge(System)d(F)j Gd([Gir72)n(].)62 b(It)33 b(has)g(been)g(used)450
2294 y(extensively)25 b(as)f(a)g(r)o(esear)o(ch)f(vehicle)i(for)f
(foundational)h(work)g(on)h(polymorphism)g(and)e(as)450
2393 y(the)e(basis)g(for)f(numer)o(ous)h(pr)o(ogramming)g(language)g
(designs.)29 b(For)22 b(r)o(easons)f(that)h(we)g(shall)450
2493 y(see)d(later)h(\(in)f(Chapter)g(27\),)g(it)h(is)g(sometimes)h
(called)e(the)h Ge(second-order)e(lambda-calculus)p Gd(.)450
2779 y Gj(19.2)119 b(V)-13 b(arieties)28 b(of)i(Polymorphism)450
2968 y Gd(T)-7 b(ype)23 b(systems)i(that)f(allow)g(a)g(single)g(piece)g
(of)g(code)f(to)i(be)e(used)h(with)h(multiple)f(types)g(ar)o(e)450
3067 y(collectively)c(known)i(as)d Ge(polymorphic)g Gd(systems.)26
b(Several)19 b(types)h(of)g(polymorphism)h(have)450 3167
y(been)g(pr)o(oposed)f(\(this)h(way)g(of)f(classifying)i(them)f(is)g
(due)f(to)h(Strachey)f([)p Ge(?)p Gd(]\):)658 3333 y
Ge(Parametric)25 b(polymorphism)p Gd(,)k(the)f(subject)g(of)g(this)h
(chapter)-6 b(,)29 b(allows)f(a)g(piece)658 3433 y(of)d(code)h(to)g(be)
f(typechecked)g(\223generically)-9 b(,\224)25 b(using)i(type)e
(variables)g(in)h(place)658 3532 y(of)d(actual)g(types,)i(and)e(then)h
(instantiated)g(with)h(particular)d(types)i(as)g(needed.)658
3632 y(W)-8 b(e)18 b(have)f(seen)h(this)h(phenomenon)h(alr)o(eady)c(in)
i(Chapter)f Ge(??)p Gd(,)h(and)g(it)g(will)h(be)e(the)658
3732 y(main)k(focus)f(of)h(the)g(pr)o(esent)f(chapter)-6
b(.)658 3864 y Ge(Ad-hoc)22 b(polymorphism)h Gd(allows)i(dif)o(fer)o
(ent)d(behaviors)i(at)g(r)o(un-time)g(when)h(a)658 3964
y(single)k(piece)f(of)h(code)f(is)h(used)g(with)g(multiple)h(types.)49
b(The)29 b(most)h(powerful)658 4064 y(form)23 b(of)h(ad-hoc)f
(polymorphism)i(is)f(a)g(general)f F4(typecase)d Gd(constr)o(uct)25
b(that)e(al-)658 4163 y(lows)i(arbitrary)e(computation)i(based)f(on)h
(type)f(information,)i(but)f(this)g(is)g(sel-)658 4263
y(dom)16 b(seen)g(in)g(r)o(eal)f(languages.)23 b(Mor)o(e)15
b(common)i(ar)o(e)e(constr)o(ucts)i(such)f(as)g(Java's)658
4363 y F4(hasType)h Gd(,)k(which)h(allow)f(simple)g(branching)g(on)g(r)
o(un-time)h(type)e(tags.)658 4495 y Ge(Overloading)33
b Gd(is)i(a)g(very)f(simple)h(form)g(of)g(ad-hoc)f(polymorphism)j(wher)
o(e)658 4595 y(only)16 b(a)g(limited)g(collection)h(of)f(\(usually)g
(built-in\))g(operations)g(ar)o(e)f(given)h(multi-)658
4695 y(ple)j(types.)25 b(For)20 b(example,)f(many)h(languages)f
(overload)g(arithmetic)h(operators)658 4794 y(like)c
FY(+)f Gd(with)i(multiple)f(types)g(such)g(as)g F4(Int)p
FV(!)n F4(Int)p FV(!)o F4(Int)f Gd(and)g F4(Real)p FV(!)n
F4(Real)p FV(!)o F4(Real)n Gd(.)p eop
%%Page: 158 159
158 158 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(158)658 683 y(The)25
b Ge(subtype)e(polymorphism)h Gd(that)g(we)h(saw)g(in)h(Chapter)e(12)g
(gives)h(a)g(single)658 783 y(term)g(many)g(types)g(using)h(the)f(r)o
(ule)h(of)f(subsumption,)i(allowing)f(us)g(to)f(selec-)658
882 y(tively)c(\223for)o(get\224)e(information)i(about)g(the)g(term's)g
(behavior)-6 b(.)450 1048 y(These)20 b(categories)h(ar)o(e)e(not)i
(exclusive:)k(dif)o(fer)o(ent)18 b(forms)j(of)g(polymorphism)h(can)e
(be)g(mixed)450 1148 y(in)j(the)g(same)g(language.)31
b(For)23 b(example,)f(Standar)o(d)f(ML)h(of)o(fers)f(a)i(r)o(estricted)
e(form)i(of)g(para-)450 1248 y(metric)16 b(polymorphism)i(and)e(simple)
g(arithmetic)h(overloading,)g(but)f(not)h(subtyping,)g(while)450
1347 y(Java)23 b(includes)i(subtyping,)h(overloading,)g(and)e(simple)h
(ad-hoc)f(polymorphism,)j(but)d(not)450 1447 y(parametric)d
(polymorphism.)31 b(\(Ther)o(e)20 b(ar)o(e)h(numer)o(ous)h(pr)o
(oposals)g(for)g(adding)f(parametric)450 1546 y(polymorphism)31
b(to)e(Java.)47 b(At)29 b(the)f(time)h(of)g(this)g(writing,)j(the)c(fr)
o(ont-r)o(unner)h(is)g(pr)o(obably)450 1646 y(GJ)21 b([BOSW98)n(].\))
575 1746 y(The)i(bar)o(e)e(term)i(\223polymorphism\224)h(is)f(the)h
(sour)o(ce)e(of)h(a)g(certain)f(amount)i(of)f(confusion)450
1845 y(in)d(the)h(pr)o(ogramming)f(languages)g(literatur)o(e.)j(In)e
(the)f(functional)g(pr)o(ogramming)g(commu-)450 1945
y(nity)e(\(i.e.,)f(those)i(who)f(use)g(or)f(design)h(languages)g(like)g
(ML,)e(Haskell,)i(etc.\),)f(it)h(always)g(r)o(efers)450
2045 y(to)26 b(parametric)e(polymorphism.)41 b(In)26
b(the)f(object-oriented)h(pr)o(ogramming)f(community)-9
b(,)28 b(it)450 2144 y(almost)21 b(always)g(r)o(efers)e(to)i(subtype)g
(polymorphism.)450 2430 y Gj(19.3)119 b(De\002nitions)450
2619 y Gd(The)30 b(de\002nition)h(of)f(the)h(polymorphic)g
(lambda-calculus)e(\(System)h(F)g(for)g(short\))g(is)h(actu-)450
2719 y(ally)21 b(a)f(very)h(straightforwar)o(d)e(extension)j(of)f(the)g
(simply)h(typed)e(lambda-calculus.)25 b(In)c Gb(\025)3360
2689 y FC(!)3429 2719 y Gd(,)450 2818 y(lambda-abstraction)g(is)i(used)
g(to)g(abstract)f(terms)g(out)i(of)e(terms,)h(and)g(application)f(is)h
(used)450 2918 y(to)g(supply)g(values)f(for)h(the)g(abstracted)e
(parts.)31 b(Similarly)-9 b(,)22 b(we)h(want)g(a)f(mechanism)h(for)g
(ab-)450 3018 y(stracting)16 b(types)g(out)g(of)g(terms)g(and)f
(\002lling)i(them)g(in)f(later)o(\227we)f(might)i(as)e(well)h(use)g
(lambda-)450 3117 y(abstraction)25 b(and)g(application)h(as)f(a)g
(model.)40 b(T)-8 b(o)26 b(this)g(end,)g(we)g(intr)o(oduce)f(a)g(new)g
(form)h(of)450 3217 y(lambda-abstraction)658 3383 y Gb(\025)p
F4(X.)42 b(t)450 3549 y Gd(whose)30 b(parameter)e(is)h(a)g(type\227a)g
(kind)g(of)g(function)h(that)f(takes)g(a)g(type)g F4(X)g
Gd(as)g(ar)o(gument.)450 3649 y(Similarly)-9 b(,)20 b(we)h(intr)o
(oduce)f(a)h(new)g(form)g(of)f(application)658 3815 y
F4(t)43 b([T])450 3981 y Gd(in)25 b(which)g(the)f(ar)o(gument)g(is)g(a)
g(type)g(expr)o(ession.)35 b(W)-8 b(e)24 b(call)g(our)h(new)f
(functions)h(with)g(type)450 4080 y(parameters)18 b Ge(polymorphic)g
(functions)g Gd(or)h Ge(type)f(abstractions)p Gd(;)f(the)i(new)h
(application)f(con-)450 4180 y(str)o(uct)i(is)g(called)f
Ge(type)g(application)p Gd(.)575 4280 y(When,)i(during)h(evaluation,)f
(a)g(type)g(abstraction)g(meets)h(a)f(type)g(application,)g(the)h(pair)
450 4379 y(forms)e(a)f(r)o(edex,)f(just)j(as)e(in)h Gb(\025)p
FV(!)p Gd(.)26 b(W)-8 b(e)21 b(add)f(a)g(r)o(eduction)g(r)o(ule)575
4479 y(analogous)h(to)f(the)h(or)o(dinary)f(r)o(eduction)g(r)o(ule)h
(for)f(abstractions)g(and)g(applications.)26 b(For)450
4578 y(example,)20 b(when)h(the)g Ge(polymorphic)f(identity)e(function)
616 4736 y FT(id)40 b(=)f FM(\025)p FT(X.)h FM(\025)p
FT(x:X.)f(x;)p eop
%%Page: 159 160
159 159 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(159)450 683 y(is)31
b(applied)f(to)h(the)f(ar)o(gument)g F4(Nat)o Gd(,)j(the)e(r)o(esult)f
(is)h F0(f)p F4(X)40 b F5(7)p FV(!)h F4(Nat)o F0(g)p
FY(\()p Gb(\025)p F4(x:X.x)n FY(\))p Gd(,)33 b(i.e.,)f
Gb(\025)p F4(x:Nat.x)m Gd(,)450 783 y(which)22 b(is)f(the)g(identity)g
(function)g(on)h(natural)e(numbers.)575 882 y(Finally)-9
b(,)27 b(we)e(need)h(to)g(de\002ne)g(the)f F7(type)g
Gd(of)h(a)f(polymorphic)i(function.)41 b(Just)26 b(as)g(we)f(had)450
982 y(types)19 b(like)g F4(Nat)p FV(!)o F4(Nat)f Gd(for)h(classifying)g
(or)o(dinary)f(functions)i(like)f Gb(\025)p F4(x:Nat.x)n
Gd(,)g(we)g(now)g(need)450 1082 y(a)i(dif)o(fer)o(ent)f(form)h(of)h
(\223arr)o(ow)e(type\224)h(whose)i(domain)f(is)g(a)f(type,)g(for)h
(classifying)g(polymor)o(-)450 1181 y(phic)i(functions)i(like)e
F4(id)o Gd(.)36 b(Notice)25 b(that,)g(for)f(each)f(ar)o(gument)h
F4(T)g Gd(to)h(which)g(it)f(is)h(applied,)f F4(id)450
1281 y Gd(yields)h(a)f(function)h(of)g(type)g F4(T)p
FV(!)o F4(T)p Gd(;)h(that)f(is,)h(the)f(type)f(of)h(the)g(r)o(esult)f
(of)h F4(id)e Gd(depends)i(on)g(the)450 1380 y(actual)c(type)h(that)g
(we)g(pass)g(it)g(as)g(ar)o(gument.)29 b(T)-8 b(o)22
b(captur)o(e)f(this)i(dependency)-9 b(,)21 b(we)h(write)g(the)450
1480 y(type)f(of)f F4(id)g Gd(like)h(this:)658 1644 y
F4(id)h FF(:)h F5(8)p F4(X.X)p FV(!)n F4(X)575 1809 y
Gd(The)d(typing)i(r)o(ules)g(for)e(polymorphic)i(abstraction)f(and)g
(application)f(ar)o(e)g(analogous)i(to)450 1909 y(the)f(corr)o
(esponding)g(r)o(ules)g(for)f(or)o(dinary)g(abstraction)h(and)f
(application.)1527 2034 y Gb(\000)6 b(;)17 b F4(X)23
b F5(`)g F4(t)1802 2046 y F1(2)1866 2034 y FF(:)g F4(T)1984
2046 y F1(2)p 1440 2078 673 4 v 1440 2157 a Gb(\000)f
F5(`)h Gb(\025)p F4(X.t)1757 2169 y F1(2)1821 2157 y
FF(:)g F5(8)p F4(X)o(.T)2072 2169 y F1(2)3111 2097 y
Gd(\()r(T)o(-)t(T)n(A)t F6(B)t(S)q Gd(\))1487 2314 y
Gb(\000)g F5(`)g F4(t)1673 2326 y F1(1)1736 2314 y FF(:)h
F5(8)p F4(X)n(.T)1987 2326 y F1(12)p 1292 2357 969 4
v 1292 2437 a Gb(\000)f F5(`)f F4(t)1477 2449 y F1(1)1561
2437 y F4([T)1648 2449 y F1(2)1689 2437 y F4(])g FF(:)i
F0(f)p F4(X)e F5(7)p FV(!)h F4(T)2073 2449 y F1(2)2113
2437 y F0(g)p F4(T)2183 2449 y F1(12)3106 2377 y Gd(\()r(T)o(-)t(T)n(A)
t F6(P)t(P)r Gd(\))450 2560 y(Note)f(that)g(we)g(include)g(the)g
(\223binding\224)g F4(X)f Gd(in)i(the)f(typing)h(context)f(used)g(in)g
(the)g(subderiva-)450 2660 y(tion)j(for)g F4(t)o Gd(.)38
b(For)24 b(the)h(moment,)i(this)e(binding)g(plays)g(no)g(r)o(ole)f
(except)g(to)h(keep)f(track)g(of)h(the)450 2760 y(scopes)i(of)f(type)g
(variables)g(and)g(make)g(sur)o(e)g(that)g(the)h(same)f(type)g
(variable)g(is)g(not)i(added)450 2859 y(twice)c(to)h(the)g(context.)36
b(In)25 b(later)e(chapters,)i(we)f(will)h(annotate)f(type)g(variable)f
(bindings)j(in)450 2959 y(the)21 b(context)g(with)g(information)h(of)f
(various)g(kinds.)575 3058 y(In)29 b(summary)-9 b(,)32
b(her)o(e)c(is)i(the)f(complete)h(polymorphic)h(lambda-calculus,)e
(with)i(dif)o(fer)o(-)450 3158 y(ences)21 b(fr)o(om)f
Gb(\025)914 3128 y FC(!)1004 3158 y Gd(highlighted.)450
3323 y Ge(System)f(F)i(:)g(Polymorphic)f(lambda-calculus)1296
b FV(!)3372 3323 y
 gsave currentpoint translate 0 124518 7800 div 613126 7800 div 579629
-7800 div box .9 setgray fill grestore
 3372 3323 a 16 w F5(8)p 409 3404 9
36 v 418 3375 3000 6 v 3418 3375 38 6 v 3455 3404 9 36
v 450 3494 a F7(Syntax)592 3625 y F4(t)61 b Gd(::=)1821
b F7(terms)852 3724 y F4(x)1774 b F7(variable)852 3824
y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)852
3924 y F4(t)43 b(t)1687 b F7(application)852 4023 y
 gsave currentpoint translate 0 124518 7800 div 1636280 7800 div 577638
-7800 div box .9 setgray fill grestore
 852
4023 a 15 w Gb(\025)p F4(X.t)1626 b F7(type)20 b(abstraction)852
4123 y
 gsave currentpoint translate 0 179129 7800 div 1969341 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4123 a 15 w F4(t)44 b([T])1583 b F7(type)20
b(application)592 4322 y F4(v)61 b Gd(::=)1821 b F7(values)852
4422 y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)21
b(value)852 4521 y
 gsave currentpoint translate 0 124518 7800 div 1636280 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 4521 a 15 w Gb(\025)p F4(X.t)1626
b F7(type)20 b(abstraction)g(value)592 4721 y F4(T)61
b Gd(::=)1821 b F7(types)852 4820 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 4820 a 15 w F4(X)1759
b F7(type)20 b(variable)852 4920 y F4(T)p FV(!)o F4(T)1648
b F7(type)20 b(of)g(functions)p eop
%%Page: 160 161
160 160 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(160)852 683 y
 gsave currentpoint translate 0 124518 7800 div 1645309 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 683
a 15 w F5(8)p F4(X)o(.T)1625 b F7(universal)21 b(type)590
882 y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 982
y F5(;)1776 b F7(empty)19 b(context)852 1082 y Gb(\000)5
b(;)17 b F4(x:T)1596 b F7(term)21 b(variable)g(binding)852
1181 y
 gsave currentpoint translate 0 124518 7800 div 1310739 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 1181 a 15 w Gb(\000)6 b(;)17 b F4(X)1668 b
F7(type)20 b(variable)h(binding)450 1396 y(Evaluation)p
3096 1309 355 4 v 3096 1421 4 113 v 2304 w F4(t)i F5(\000)-15
b FV(!)23 b F4(t)3398 1366 y FX(0)p 3447 1421 V 3096
1424 355 4 v 1155 1510 a F4(\()p Gb(\025)p F4(x)o(:T)1374
1522 y F1(11)1451 1510 y F4(.t)1538 1522 y F1(12)1615
1510 y F4(\))43 b(v)1746 1522 y F1(2)1810 1510 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2209 1522
y F1(2)2250 1510 y F0(g)p F4(t)2320 1522 y F1(12)3113
1511 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1602
1649 y F4(t)1645 1661 y F1(1)1709 1649 y F5(\000)-14
b FV(!)23 b F4(t)1917 1619 y FX(0)1909 1673 y F1(1)p
1474 1693 604 4 v 1474 1772 a F4(t)1518 1784 y F1(1)1602
1772 y F4(t)1645 1784 y F1(2)1709 1772 y F5(\000)-14
b FV(!)23 b F4(t)1917 1742 y FX(0)1909 1796 y F1(1)1994
1772 y F4(t)2037 1784 y F1(2)3105 1712 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1602 1911 y F4(t)1645 1923 y F1(2)1709
1911 y F5(\000)-14 b FV(!)23 b F4(t)1917 1881 y FX(0)1909
1935 y F1(2)p 1474 1955 V 1474 2034 a F4(v)1518 2046
y F1(1)1602 2034 y F4(t)1645 2046 y F1(2)1709 2034 y
F5(\000)-14 b FV(!)23 b F4(v)1909 2046 y F1(1)1994 2034
y F4(t)2045 2004 y FX(0)2037 2058 y F1(2)3105 1974 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))1169 2198 y
 gsave currentpoint translate 0 419430 7800 div 9575847 7800 div 747110
-7800 div box .9 setgray fill grestore

1169 2198 a 1193 2197 a F4(\()p Gb(\025)p F4(X.t)1413
2209 y F1(12)1490 2197 y F4(\))43 b([T)1664 2209 y F1(2)1704
2197 y F4(])23 b F5(\000)-14 b FV(!)23 b F0(f)p F4(X)f
F5(7)p FV(!)h F4(T)2171 2209 y F1(2)2211 2197 y F0(g)p
F4(t)2282 2209 y F1(12)3067 2198 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(2\))1353 2440 y
 gsave currentpoint translate 0 851966 7800 div 6677019 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1353 2440 a 1602 2384
a F4(t)1645 2396 y F1(1)1709 2384 y F5(\000)-14 b FV(!)23
b F4(t)1917 2355 y FX(0)1909 2408 y F1(1)p 1387 2421
778 4 v 1387 2494 a F4(t)1431 2506 y F1(1)1515 2494 y
F4([T)1602 2506 y F1(2)1642 2494 y F4(])g F5(\000)-14
b FV(!)23 b F4(t)1917 2464 y FX(0)1909 2518 y F1(1)1994
2494 y F4([T)2081 2506 y F1(2)2121 2494 y F4(])3102 2440
y Gd(\()r(E)t(-)t(T)n(A)t F6(P)t(P)q Gd(\))450 2674 y
F7(T)-8 b(yping)p 3067 2591 383 4 v 3067 2698 4 108 v
2408 w Gb(\000)22 b F5(`)h F4(t)g FF(:)g F4(T)p 3447
2698 V 3067 2701 383 4 v 1637 2795 a(x:T)f F5(2)i Gb(\000)p
1613 2839 327 4 v 1613 2918 a(\000)f F5(`)f F4(x)h FF(:)g
F4(T)3152 2858 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))1464
3057 y Gb(\000)5 b(;)18 b F4(x:T)1685 3069 y F1(1)1749
3057 y F5(`)23 b F4(t)1866 3069 y F1(2)1930 3057 y FF(:)g
F4(T)2048 3069 y F1(2)p 1359 3100 835 4 v 1359 3180 a
Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676 3192 y F1(1)1717
3180 y F4(.t)1804 3192 y F1(2)1867 3180 y FF(:)i F4(T)1985
3192 y F1(1)2026 3180 y FV(!)p F4(T)2152 3192 y F1(2)3160
3120 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))1148 3319
y Gb(\000)e F5(`)h F4(t)1333 3331 y F1(1)1396 3319 y
FF(:)h F4(T)1514 3331 y F1(11)1591 3319 y FV(!)p F4(T)1718
3331 y F1(12)1961 3319 y Gb(\000)f F5(`)f F4(t)2146 3331
y F1(2)2209 3319 y FF(:)i F4(T)2327 3331 y F1(11)p 1148
3362 1257 4 v 1490 3442 a Gb(\000)f F5(`)g F4(t)1676
3454 y F1(1)1760 3442 y F4(t)1803 3454 y F1(2)1867 3442
y FF(:)g F4(T)1985 3454 y F1(12)3155 3382 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1406 3661 y
 gsave currentpoint translate 0 851966 7800 div 5847436 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1406 3661 a 1527 3605 a
Gb(\000)6 b(;)17 b F4(X)23 b F5(`)g F4(t)1802 3617 y
F1(2)1866 3605 y FF(:)g F4(T)1984 3617 y F1(2)p 1440
3642 673 4 v 1440 3714 a Gb(\000)f F5(`)h Gb(\025)p F4(X.t)1757
3726 y F1(2)1821 3714 y FF(:)g F5(8)p F4(X)o(.T)2072
3726 y F1(2)3111 3661 y Gd(\()r(T)o(-)t(T)n(A)t F6(B)t(S)q
Gd(\))1258 3958 y
 gsave currentpoint translate 0 851966 7800 div 8181874 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1258 3958 a 1487 3902 a Gb(\000)g F5(`)g
F4(t)1673 3914 y F1(1)1736 3902 y FF(:)h F5(8)p F4(X)n(.T)1987
3914 y F1(12)p 1292 3939 969 4 v 1292 4011 a Gb(\000)f
F5(`)f F4(t)1477 4023 y F1(1)1561 4011 y F4([T)1648 4023
y F1(2)1689 4011 y F4(])g FF(:)i F0(f)p F4(X)e F5(7)p
FV(!)h F4(T)2073 4023 y F1(2)2113 4011 y F0(g)p F4(T)2183
4023 y F1(12)3106 3958 y Gd(\()r(T)o(-)t(T)n(A)t F6(P)t(P)r
Gd(\))p 409 4103 9 36 v 418 4103 3000 6 v 3418 4103 38
6 v 3455 4103 9 36 v 575 4256 a(As)f(usual,)g(this)h(summary)g
(de\002nes)f(just)h(the)g(\223pur)o(e\224)d(polymorphic)k
(lambda-calculus,)450 4356 y(omitting)e(other)e(type)h(constr)o(uctors)
g(such)g(as)f(r)o(ecor)o(ds,)e(base)i(types)g(such)h(as)f
F4(Nat)f Gd(and)h F4(Bool)n Gd(,)450 4455 y(and)i(term-language)g
(extensions)i(such)f(as)f F4(let)g Gd(and)g F4(fix)o
Gd(.)31 b(These)23 b(extra)e(constr)o(ucts)j(can)e(be)450
4555 y(added)27 b(straightforwar)o(dly)h(to)i(the)f(pur)o(e)f(system,)j
(and)e(we)g(will)g(use)g(them)h(fr)o(eely)d(in)j(the)450
4655 y(examples)20 b(that)h(follow)-8 b(.)450 4820 y
Ge(19.3.1)18 b(Exercise)h([Quick)h(check]:)39 b Gd(In)16
b(Exer)o(cise)f(7.3.1,)f(we)i(saw)g(that)f(the)h(pur)o(e)f(simply)i
(typed)450 4920 y(lambda)22 b(calculus)i(\(with)f(no)h(base)f(types)g
(or)h(type)f(variables\))f(is)i(actually)e(a)h(trivial)g(system)p
eop
%%Page: 161 162
161 161 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(161)450 683 y(containing)22
b(no)f(typeable)f(terms.)26 b(What)21 b(about)f(pur)o(e)g(System)h(F?)
817 b FZ(2)450 968 y Gj(19.4)119 b(Examples)450 1157
y Gd(W)-8 b(e)33 b(now)h(turn)f(to)g(developing)g(some)g(mor)o(e)g
(inter)o(esting)g(examples)f(of)h(\223pr)o(ogramming)450
1257 y(with)22 b(polymorphism,\224)f(of)g(several)f(dif)o(fer)o(ent)f
(sorts:)575 1419 y F5(\017)41 b Gd(T)-8 b(o)27 b(warm)g(up,)i(we'll)e
(start)g(with)h(a)f(few)g(small)g(but)g(incr)o(easingly)g(tricky)h
(examples,)658 1518 y(showing)22 b(some)f(of)g(the)g(expr)o(essive)f
(power)g(of)h(System)g(F)-8 b(.)575 1682 y F5(\017)41
b Gd(W)-8 b(e'll)26 b(then)h(r)o(eview)f(the)g(basic)g(ideas)f(of)i
(\223or)o(dinary\224)d(polymorphic)k(pr)o(ogramming)658
1782 y(with)d(lists,)h(tr)o(ees,)e(etc.)37 b(This)25
b(is)g(the)f(kind)h(of)g(pr)o(ogramming)f(that)h(usually)g(comes)g(to)
658 1882 y(mind)c(when)g(polymorphism)i(is)e(mentioned.)575
2046 y F5(\017)41 b Gd(The)23 b(\002nal)h(subsection)h(will)f(intr)o
(oduce)f(typed)h(versions)g(of)g(the)g(Chur)o(ch)f(Encodings)658
2145 y(of)16 b(simple)h(algebraic)e(datatypes)g(like)h(booleans,)i
(numbers,)f(and)f(lists)h(that)f(we)g(saw)h(in)658 2245
y(Chapter)g(4)h(for)g(the)h(untyped)f(lambda-calculus.)24
b(Although)19 b(these)g(encodings)g(ar)o(e)e(of)658 2345
y(little)26 b(practical)g(importance,)h(they)g(make)f(excellent)g(exer)
o(cises)g(for)g(understanding)658 2444 y(the)20 b(intricacies)h(of)g
(System)g(F)-8 b(.)450 2686 y F8(W)h(arm-ups)450 2844
y Gd(W)f(e)23 b(have)f(seen)h(alr)o(eady)e(how)j(type)e(abstraction)h
(and)f(application)h(can)f(be)h(used)f(to)h(de\002ne)450
2944 y(a)d(single)i(polymorphic)g(identity)f(function)616
3097 y FT(id)40 b(=)f FM(\025)p FT(X.)h FM(\025)p FT(x:X.)f(x;)529
3212 y FS(I)616 3222 y FT(id)h(:)f Fv(8)p FT(X.)h(X)f
FO(!)g FT(X)450 3400 y Gd(and)31 b(instantiate)h(it)g(to)g(yield)f(any)
h(particular)e(concr)o(ete)h(identity)h(function)g(that)g(may)f(be)450
3499 y(r)o(equir)o(ed:)616 3653 y FT(id)40 b([Nat];)529
3768 y FS(I)616 3778 y FT(\()p FM(\025)p FT(x:Nat.)h(x\))e(:)h(Nat)g
FO(!)f FT(Nat)616 3947 y(id)h([Nat])g(0;)529 4077 y FS(I)616
4087 y FT(0)f(:)h(Nat)575 4265 y Gd(A)27 b(mor)o(e)g(useful)h(example)f
(is)h(the)g(polymorphic)h(\223double\224)d(function,)k(which)f(takes)e
(a)450 4364 y(function)22 b F4(f)e Gd(and)g(an)h(ar)o(gument)f
F4(a)g Gd(and)h(applies)f F4(f)g Gd(twice)h(in)g(succession)h(to)f
F4(a)p Gd(:)616 4518 y FT(double)41 b(=)e FM(\025)p FT(X.)g
FM(\025)p FT(f:X)p FO(!)q FT(X.)g FM(\025)p FT(a:X.)h(f)g(\(f)f(a\);)
529 4633 y FS(I)616 4643 y FT(double)i(:)e Fv(8)p FT(X.)g(\(X)p
FO(!)q FT(X\))g FO(!)g FT(X)h FO(!)f FT(X)450 4820 y
Gd(The)27 b(abstraction)g(on)h(the)f(type)h F4(X)e Gd(allows)i(us)g(to)
f(obtain)h(doubling)g(functions)g(for)f(speci\002c)450
4920 y(types)21 b(by)g(instantiating)g F4(double)e Gd(with)i(dif)o(fer)
o(ent)e(type)i(ar)o(guments:)p eop
%%Page: 162 163
162 162 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(162)616 683 y FT(doubleNat)41
b(=)f(double)g([Nat];)529 796 y FS(I)616 806 y FT(doubleNat)h(:)f
(\(Nat)p FO(!)p FT(Nat\))h FO(!)e FT(Nat)h FO(!)f FT(Nat)616
975 y(doubleNatArrowNat)k(=)d(double)g([Nat)p FO(!)q
FT(Nat];)529 1103 y FS(I)616 1113 y FT(doubleNatArrowNat)j(:)d(\(\(Nat)
p FO(!)q FT(Nat\))p FO(!)p FT(Nat)p FO(!)q FT(Nat\))g
FO(!)1401 1205 y FT(\(Nat)p FO(!)p FT(Nat\))g FO(!)f
FT(Nat)h FO(!)f FT(Nat)450 1382 y Gd(Once)18 b(instantiated)f(with)h(a)
f(type)h(ar)o(gument,)f F4(double)e Gd(can)i(be)g(further)g(applied)g
(to)h(an)f(actual)450 1481 y(function)22 b(and)e(an)g(ar)o(gument)h(of)
f(appr)o(opriate)f(types:)616 1634 y FT(double)41 b([Nat])f(\()p
FM(\025)p FT(x:Nat.)g(succ\(succ\(x\)\)\))j(3;)529 1748
y FS(I)616 1758 y FT(7)c(:)h(Nat)575 1935 y Gd(Her)o(e)17
b(is)i(a)g(slightly)h(trickier)e(example:)24 b(polymorphic)c
(self-application.)k(Recall)19 b(that,)g(in)450 2034
y(the)j(simply)h(typed)f(lambda-calculus,)f(ther)o(e)h(is)g(no)h(way)f
(to)h(give)f(a)f(typing)i(to)g(an)f(untyped)450 2134
y(term)h(of)f(the)h(form)g F4(x)43 b(x)22 b Gd(\(cf.)31
b(Exer)o(cise)21 b(7.4.5\).)29 b(In)23 b(System)g(F)-8
b(,)23 b(on)g(the)g(other)g(hand,)g(this)g(term)450 2233
y(becomes)17 b(typeable)f(if)g(we)h(make)g F4(x)f Gd(a)g(polymorphic)i
(function)g(and)e(add)g(a)g(type)g(application:)616 2387
y FT(selfApp)41 b(=)e FM(\025)p FT(x:)p Fv(8)p FT(X.X)p
FO(!)q FT(X.)79 b(x)39 b([)p Fv(8)p FT(X.X)p FO(!)p FT(X])h(x;)529
2500 y FS(I)616 2510 y FT(selfApp)h(:)e(\()p Fv(8)p FT(X.)h(X)p
FO(!)p FT(X\))g FO(!)f FT(\()p Fv(8)p FT(X.)g(X)h FO(!)f
FT(X\))575 2687 y Gd(Her)o(e)22 b(is)j(a)e(mor)o(e)h(useful)f(example)g
(of)h(self)g(application.)35 b(W)-8 b(e)24 b(can)f(apply)h(the)g
(polymor)o(-)450 2786 y(phic)d F4(double)d Gd(function)k(to)f(itself,)f
(yielding)i(a)e(polymorphic)i(quadr)o(upling)f(function:)616
2939 y FT(quadruple)41 b(=)f FM(\025)p FT(X.)f(double)i([X)p
FO(!)p FT(X])f(\(double)g([X]\);)529 3053 y FS(I)616
3063 y FT(quadruple)h(:)f Fv(8)p FT(X.)f(\(X)p FO(!)p
FT(X\))h FO(!)f FT(X)h FO(!)f FT(X)450 3239 y Ge(19.4.1)18
b(Exercise)h([Quick)h(check]:)39 b Gd(Using)16 b(the)g(typing)h(r)o
(ules)f(above,)g(convince)g(yourself)g(that)450 3339
y(these)21 b(terms)g(have)f(the)h(types)g(given.)1726
b FZ(2)450 3581 y F8(Polymorphic)26 b(Lists)450 3755
y(Impredicative)e(Encodings)450 3913 y Gd(Her)o(e)c(ar)o(e)f(the)i
(\223Chur)o(ch)f(booleans\224:)616 4067 y FT(CBool)40
b(=)g Fv(8)p FT(X.X)p FO(!)p FT(X)p FO(!)p FT(X;)616
4249 y(tt)g(=)f FM(\025)p FT(X.)h FM(\025)p FT(t:X.)f
FM(\025)p FT(f:X.)h(t;)529 4362 y FS(I)616 4372 y FT(tt)g(:)f
Fv(8)p FT(X.)h(X)f FO(!)g FT(X)g FO(!)g FT(X)616 4541
y(ff)h(=)f FM(\025)p FT(X.)h FM(\025)p FT(t:X.)f FM(\025)p
FT(f:X.)h(f;)529 4670 y FS(I)616 4680 y FT(ff)g(:)f Fv(8)p
FT(X.)h(X)f FO(!)g FT(X)g FO(!)g FT(X)616 4940 y(cif)h(=)f
FM(\025)p FT(b:CBool.)i FM(\025)p FT(X.)e FM(\025)p FT(th:X.)i
FM(\025)p FT(el:X.)f(b)f([X])h(th)g(el;)p eop
%%Page: 163 164
163 163 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(163)529 673 y FS(I)616
683 y FT(cif)40 b(:)f(CBool)i FO(!)e FT(\()p Fv(8)p FT(X.)g(X)h
FO(!)f FT(X)g FO(!)g FT(X\))450 859 y Gd(In)27 b(fact,)h
F4(cif)e Gd(is)i(the)f(identity)h(function!)46 b(In)27
b(other)h(wor)o(ds,)g(an)f(element)g(of)g(type)h F4(CBool)d
Gd(is)450 959 y(itself)d(a)f(\223conditional,\224)g(in)i(the)e(sense)h
(that)g(it)g(takes)f(two)h(alternatives)f(and)g(chooses)i(either)450
1059 y(the)e(\002rst)g(or)g(the)g(second)g(depending)f(on)i(whether)f
(it)g(r)o(epr)o(esents)e F4(true)g Gd(or)i F4(false)n
Gd(.)575 1158 y(W)-8 b(e)20 b(can)h(write)g(common)h(boolean)f
(operations)g(like)g F4(not)f Gd(either)g(in)h(terms)g(of)g
F4(cif)616 1311 y FT(not)40 b(=)f FM(\025)p FT(b:CBool.)i(cif)f(b)f
([CBool])i(ff)f(tt;)529 1423 y FS(I)616 1433 y FT(not)g(:)f(CBool)i
FO(!)e FT(CBool)450 1609 y Gd(or)-6 b(,)20 b(mor)o(e)h(inter)o
(estingly)-9 b(,)21 b(by)g(dir)o(ectly)f(constr)o(ucting)i(a)e(new)h
(boolean)g(fr)o(om)g(the)g(given)g(one:)616 1762 y FT(not)40
b(=)f FM(\025)p FT(b:CBool.)969 1853 y FM(\025)p FT(X.)g
FM(\025)p FT(t:X.)h FM(\025)p FT(f:X.)1048 1944 y(b)f([X])h(f)f(t;)529
2056 y FS(I)616 2066 y FT(not)h(:)f(CBool)i FO(!)e FT(\()p
Fv(8)p FT(X.)g(X)h FO(!)f FT(X)g FO(!)g FT(X\))450 2243
y Ge(19.4.2)18 b(Exercise)h([Recommended]:)38 b Gd(W)-6
b(rite)20 b(a)h(term)658 2404 y F4(and)g FF(:)j F4(CBool)p
FV(!)n F4(CBool)p FV(!)n F4(CBool)450 2564 y Gd(without)e(using)g
F4(cif)n Gd(.)2256 b FZ(2)575 2741 y Gd(W)-8 b(e)20 b(can)h(play)f(a)h
(similar)g(game)f(with)i(numbers.)k(The)20 b(elements)h(of)g(the)g
(type)616 2893 y FT(CNat)40 b(=)g Fv(8)p FT(X.)f(\(X)p
FO(!)p FT(X\))h FO(!)f FT(X)g FO(!)g FT(X;)450 3054 y
Gd(of)21 b(\223Chur)o(ch)f(numerals\224)g(can)h(be)f(used)g(to)i(r)o
(epr)o(esent)d(natural)h(numbers)h(as)g(follows:)616
3207 y FT(czero)80 b(=)e FM(\025)p FT(X.)40 b FM(\025)p
FT(s:X)p FO(!)p FT(X.)g FM(\025)p FT(z:X.)f(z;)529 3319
y FS(I)616 3329 y FT(czero)h(:)g Fv(8)p FT(X.)f(\(X)p
FO(!)p FT(X\))h FO(!)f FT(X)h FO(!)f FT(X)616 3497 y(cone)119
b(=)78 b FM(\025)p FT(X.)40 b FM(\025)p FT(s:X)p FO(!)p
FT(X.)g FM(\025)p FT(z:X.)f(s)h(z;)529 3624 y FS(I)616
3634 y FT(cone)g(:)g Fv(8)p FT(X.)f(\(X)p FO(!)p FT(X\))h
FO(!)f FT(X)g FO(!)g FT(X)616 3802 y(ctwo)119 b(=)78
b FM(\025)p FT(X.)40 b FM(\025)p FT(s:X)p FO(!)p FT(X.)g
FM(\025)p FT(z:X.)f(s)h(\(s)f(z\);)529 3929 y FS(I)616
3939 y FT(ctwo)h(:)g Fv(8)p FT(X.)f(\(X)p FO(!)p FT(X\))h
FO(!)f FT(X)g FO(!)g FT(X)616 4107 y(cthree)i(=)78 b
FM(\025)p FT(X.)40 b FM(\025)p FT(s:X)p FO(!)p FT(X.)g
FM(\025)p FT(z:X.)f(s)h(\(s)f(\(s)h(z\)\);)529 4235 y
FS(I)616 4245 y FT(cthree)h(:)e Fv(8)p FT(X.)g(\(X)p
FO(!)q FT(X\))g FO(!)g FT(X)h FO(!)f FT(X)450 4421 y
Gd(and)20 b(so)h(on.)26 b(That)20 b(is,)g(a)g(chur)o(ch)g(numeral)g
F4(n)g Gd(is)h(a)e(function)i(that,)f(given)h(ar)o(guments)f
F4(s)g Gd(and)g F4(z)o Gd(,)450 4521 y(applies)g F4(s)h
Gd(to)g F4(z)o Gd(,)g F4(n)f Gd(times.)575 4620 y(The)g(successor)h
(function)h(can)e(be)h(de\002ned)f(as)g(follows:)616
4773 y FT(csucc)40 b(=)g FM(\025)p FT(n:CNat.)1008 4864
y FM(\025)p FT(X.)g FM(\025)p FT(s:X)p FO(!)p FT(X.)g
FM(\025)p FT(z:X.)1087 4956 y(s)f(\(n)h([X])g(s)f(z\);)p
eop
%%Page: 164 165
164 164 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(164)529 673 y FS(I)616
683 y FT(csucc)40 b(:)g(CNat)g FO(!)f FT(\()p Fv(8)p
FT(X.)h(\(X)p FO(!)p FT(X\))g FO(!)f FT(X)g FO(!)g FT(X\))450
863 y Gd(That)26 b(is,)h F4(csucc)42 b(n)25 b Gd(r)o(eturns)h(an)f
(element)h(of)g F4(CNat)f Gd(that,)i(given)f F4(s)f Gd(and)h
F4(z)o Gd(,)h(applies)f F4(s)f Gd(to)i F4(z)o Gd(,)g
F4(n)450 963 y Gd(times)21 b(\(by)g(applying)g F4(n)o
Gd(\),)f(and)h(then)g(once)g(mor)o(e.)575 1063 y(Other)f(arithmetic)h
(operations)g(can)g(be)f(de\002ned)h(similarly:)616 1219
y FT(cplus)40 b(=)g FM(\025)p FT(m:CNat.)g FM(\025)p
FT(n:CNat.)1048 1310 y(m)f([CNat])i(csucc)f(n;)529 1430
y FS(I)616 1440 y FT(cplus)g(:)g(CNat)g FO(!)f FT(CNat)h
FO(!)f FT(CNat)450 1620 y Gd(Or)-6 b(,)20 b(mor)o(e)h(dir)o(ectly:)616
1776 y FT(cplus)40 b(=)g FM(\025)p FT(m:CNat.)g FM(\025)p
FT(n:CNat.)1008 1867 y FM(\025)p FT(X.)g FM(\025)p FT(s:X)p
FO(!)p FT(X.)g FM(\025)p FT(z:X.)1126 1959 y(m)f([X])h(s)g(\(n)g([X])f
(s)h(z\);)529 2078 y FS(I)616 2088 y FT(cplus)g(:)g(CNat)g
FO(!)f FT(CNat)h FO(!)f FT(\()p Fv(8)p FT(X.)h(\(X)p
FO(!)p FT(X\))g FO(!)f FT(X)g FO(!)g FT(X\))450 2269
y Gd(W)-8 b(e)21 b(can)f(convert)h(fr)o(om)f(chur)o(ch)h(numerals)g(to)
g(or)o(dinary)f(numbers)h(like)g(this:)616 2424 y FT(cnat2nat)41
b(=)f FM(\025)p FT(m:CNat.)g(m)f([Nat])i(\()p FM(\025)p
FT(x:Nat.)f(succ\(x\)\))h(0;)529 2544 y FS(I)616 2554
y FT(cnat2nat)g(:)f(CNat)g FO(!)f FT(Nat)450 2734 y Gd(This)25
b(allows)h(us)f(to)g(verify)f(that)h(the)g(terms)g(we)g(have)f
(de\002ned)g(actually)h(compute)g(the)g(de-)450 2834
y(sir)o(ed)20 b(arithmetic)h(functions:)616 2990 y FT(cnat2nat)41
b(\(cplus)g(\(csucc)f(czero\))h(\(csucc)f(\(csucc)h(czero\)\)\);)529
3110 y FS(I)616 3120 y FT(3)e(:)h(Nat)450 3300 y Ge(19.4.3)18
b(Exercise)h([Recommended]:)38 b Gd(W)-6 b(rite)22 b(a)g(function)h
F4(iszero)d Gd(that)j(r)o(eturns)f F4(true)e Gd(when)450
3400 y(applied)g(to)h(the)g(chur)o(ch)f(numeral)h F4(czero)e
Gd(and)h F4(false)f Gd(otherwise.)790 b FZ(2)450 3580
y Ge(19.4.4)18 b(Exercise:)39 b Gd(Show)22 b(that)e(the)h(terms)616
3736 y FT(ctimes)41 b(=)e FM(\025)p FT(m:CNat.)i FM(\025)p
FT(n:CNat.)1048 3827 y FM(\025)p FT(X.)e FM(\025)p FT(s:X)p
FO(!)p FT(X.)1165 3919 y(n)h([X])g(\(m)f([X])h(s\);)529
4129 y FS(I)616 4139 y FT(ctimes)h(:)e(CNat)h FO(!)f
FT(CNat)h FO(!)f FT(\()p Fv(8)p FT(X.)h(\(X)p FO(!)p
FT(X\))g FO(!)f FT(X)g FO(!)g FT(X\))616 4312 y(cexp)h(=)g
FM(\025)p FT(m:CNat.)g FM(\025)p FT(n:CNat.)969 4403
y FM(\025)p FT(X.)1048 4494 y(n)f([X)p FO(!)p FT(X])h(\(m)g([X]\);)529
4630 y FS(I)616 4640 y FT(cexp)g(:)g(CNat)g FO(!)f FT(CNat)h
FO(!)f FT(\()p Fv(8)p FT(X.)h(\(X)p FO(!)p FT(X\))f FO(!)g
FT(X)h FO(!)f FT(X\))450 4820 y Gd(have)27 b(the)g(indicated)g(types.)
46 b(Sketch)27 b(an)g(informal)h(ar)o(gument)f(that)g(they)h(implement)
g(the)450 4920 y(arithmetic)21 b(multiplication)h(and)e(exponentiation)
i(operators.)902 b FZ(2)p eop
%%Page: 165 166
165 165 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(165)575 683 y(So,)32
b(if)f(we)g(wanted)f(to,)j(we)e(could)g(actually)f(dr)o(op)g
F4(Nat)f Gd(and)h(iteration)h(fr)o(om)g(the)f(lan-)450
783 y(guage.)39 b(This)25 b(doesn't)h(af)o(fect)d(r)o(eal)h(pr)o
(ogramming)i(languages)f(based)f(on)i(System)f(F)-8 b(,)26
b(since)450 882 y(we)21 b(want)g(to)h(build)f(in)h(booleans)f(for)g(ef)
o(\002ciency)g(and)f(syntactic)i(convenience,)f(but)g(it)h(helps)450
982 y(when)f(we'r)o(e)f(doing)i(theor)o(etical)e(work)h(because)f(it)h
(keeps)f(the)h(system)h(small.)450 1165 y Ge(19.4.5)c(Exercise)h
([Recommended]:)38 b Gd(In)21 b(what)g(sense)g(does)g(the)f(type)616
1322 y FT(PairNat)41 b(=)e Fv(8)p FT(X.)h(\(CNat)p FO(!)q
FT(CNat)p FO(!)p FT(X\))g FO(!)f FT(X;)450 1488 y Gd(r)o(epr)o(esent)19
b(pairs)h(of)h(numbers?)26 b(W)-6 b(rite)21 b(functions)616
1646 y FT(pairNat)41 b(:)e(CNat)p FO(!)q FT(CNat)p FO(!)q
FT(PairNat;)616 1737 y(fstNat)i(:)e(PairNat)p FO(!)q
FT(CNat;)616 1829 y(sndNat)i(:)e(PairNat)p FO(!)q FT(CNat;)450
1995 y Gd(for)16 b(constr)o(ucting)j(elements)e(of)f(this)i(type)e(fr)o
(om)h(pairs)f(of)g(numbers)i(and)e(for)g(accessing)h(their)450
2094 y(\002rst)k(and)f(second)h(components.)1871 b FZ(2)450
2277 y Ge(19.4.6)18 b(Exercise)h([Moderately)g(dif)o(\002cult,)f
(recommended]:)38 b Gd(Use)d(the)g(functions)g(de\002ned)450
2377 y(in)h(Exer)o(cise)e(19.4.5)f(to)j(write)g(a)f(function)h
F4(pred)e Gd(that)i(computes)g(the)g(pr)o(edecessor)e(of)h(a)450
2476 y(chur)o(ch)30 b(numeral)g(\(r)o(eturning)g F4(0)g
Gd(if)g(its)h(input)g(is)g F4(0)o Gd(\).)54 b(\(Hint:)45
b(the)30 b(key)h(idea)e(is)i(developed)450 2576 y(in)25
b(the)g(example)f(in)h(Section)g Ge(??)p Gd(.)37 b(De\002ne)25
b(a)f(function)i F4(f)k FF(:)g F4(PairNat)p FV(!)n F4(PairNat)21
b Gd(that)k(maps)450 2676 y(the)j(pair)f FY(\()p Gb(i;)14
b(j)p FY(\))28 b Gd(into)g FY(\()p Gb(i)c FY(+)f Gb(1;)14
b(i)p FY(\))p Gd(\227that)28 b(is,)i(it)e(thr)o(ows)g(away)f(the)h
(second)g(component)h(of)f(its)450 2775 y(ar)o(gument,)19
b(copies)g(the)h(\002rst)f(component)i(to)f(the)f(second,)h(and)f(incr)
o(ements)g(the)g(\002rst.)26 b(Then)450 2875 y Gb(n)21
b Gd(applications)g(of)f F4(f)h Gd(to)g(the)g(starting)g(pair)f
FY(\()p Gb(0;)14 b(0)p FY(\))22 b Gd(yields)f(the)g(pair)f
FY(\()p Gb(n;)14 b(n)19 b FY(-)f Gb(1)p FY(\))p Gd(...\))346
b FZ(2)450 3057 y Ge(19.4.7)18 b(Exercise)h([Optional]:)39
b Gd(Ther)o(e)34 b(is)i(another)g(way)f(of)g(computing)i(the)e(pr)o
(edecessor)450 3157 y(function)17 b(on)g(chur)o(ch)f(numerals.)48
b(Let)16 b F4(K)g Gd(stand)g(for)g(the)h(untyped)f(lambda-term)f
Gb(\025)p F4(x.)43 b Gb(\025)p F4(y.)f(x)450 3257 y Gd(and)20
b F4(I)h Gd(for)f Gb(\025)p F4(x.)43 b(x)p Gd(.)25 b(The)c(untyped)f
(lambda-term)658 3423 y F4(vpred)h FY(=)h F4([n])43 b
Gb(\025)p F4(s.)f Gb(\025)p F4(z.)h(n)g(\()p Gb(\025)p
F4(p.)g Gb(\025)p F4(q.)f(q)i(\(p)e(s\)\))h(\(K)f(z\))h(I)450
3589 y Gd(\(due)34 b(to)h(J.)f(V)-9 b(elmans\))35 b(computes)g(the)g
(pr)o(edecessor)e(of)i(an)f(untyped)h(Chur)o(ch)f(numeral.)450
3688 y(Show)d(that)g(this)h(term)f(can)g(be)g(typed)f(in)i(System)f(F)g
(by)g(adding)g(type)g(abstractions)f(and)450 3788 y(applications)20
b(as)g(necessary)g(and)f(annotating)i(the)g(bound)f(variables)f(in)i
(the)f(untyped)g(term)450 3888 y(with)d(appr)o(opriate)e(types.)24
b(For)16 b(extra)g(cr)o(edit,)g(explain)g(why)h(it)f(works!)25
b(Solution)18 b(on)f(page)f Ge(??)o Gd(.)450 3987 y([Thanks)21
b(to)g(Michael)f(Levin)h(for)f(making)i(me)e(awar)o(e)f(of)i(this)h
(example.])572 b FZ(2)p eop
%%Page: 166 167
166 166 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(166)450 686 y Gj(19.5)119
b(Metatheory)450 892 y F8(Soundness)450 1050 y F7(The)21
b(pr)o(eservation)h(and)f(pr)o(ogr)o(ess)g(pr)o(operties)h(fr)o(om)f
(the)g(simply)g(typed)f(lambda-calculus)h(holds)h(ex-)450
1149 y(actly)e(the)g(same)h(her)o(e.)k(T)-9 b(o)20 b(pr)o(ove)g(it,)g
(we)h(need)g(one)g(additional)f(substitution)h(lemma,)f(for)h(types.)
450 1392 y F8(Strong)k(Normalization)450 1550 y Gd(The)d(str)o(ong)g
(normalization)g(pr)o(operty)f(for)h(System)g(F)-8 b(,)22
b(pr)o(oved)e(using)j(an)f(extension)g(of)g(the)450 1650
y(method)31 b(pr)o(esented)e(in)h(Chapter)g(8,)i(was)e(one)g(of)h(the)f
(major)h(achievements)f(of)g(Girar)o(d's)450 1749 y(Ph.D.)c(thesis.)42
b(Since)26 b(then,)i(this)e(pr)o(oof)g(technique)h(has)f(been)g
(studied)f(and)h(r)o(eworked)f(by)450 1849 y(many)c(authors,)g
(including)h([)p Ge(?)o Gd(].)450 2032 y Ge(19.5.1)c(Theorem)i([Strong)
h(normalization]:)37 b Gd(All)16 b(well-typed)g(System)f(F)h(terms)g
(ar)o(e)f(str)o(ongly)450 2131 y(normalizing.)2474 b
FZ(2)450 2374 y F8(Erasure)24 b(and)g(T)-9 b(ypeability)450
2532 y F7(Ther)o(e)18 b(ar)o(e)g(two)g(r)o(easonable)h(de\002nitions)f
(of)g(erasur)o(e)h(for)g(System)f(F:)g(the)g(\223type-passing\224)d
(and)j(\223type-)450 2632 y(for)o(getting\224)h(interpr)o(etations...)
450 2814 y Ge(19.5.2)f(Exercise:)39 b Gd(The)34 b(str)o(ong)g
(normalization)g(pr)o(operty)f(of)g(System)h(System)g(F)f(implies)450
2914 y(that)21 b(the)g(term)658 3080 y Gb(\012)105 b
FY(=)h F4(\()p Gb(\025)p F4(x.)43 b(x)g(x\))f(\()p Gb(\025)p
F4(y.)h(y)g(y\))450 3246 y Gd(in)29 b(the)g(untyped)f(lambda-calculus)f
(cannot)i(be)g(typed)f(in)h(System)f(F)-8 b(,)29 b(since)g(r)o
(eduction)f(of)450 3346 y Gb(\012)k Gd(never)g(r)o(eaches)f(a)g(normal)
i(form.)60 b(However)-6 b(,)34 b(it)f(is)f(possible)h(to)g(give)f(a)f
(mor)o(e)h(dir)o(ect,)450 3445 y(\223combinatorial\224)20
b(pr)o(oof)g(of)h(this)g(fact,)e(using)j(just)f(the)g(r)o(ules)f
(de\002ning)i(the)e(typing)i(r)o(elation.)554 3628 y(1.)41
b(Let)21 b(us)h(call)g(a)f(System)h(F)g(term)g Ge(exposed)d
Gd(if)j(it)g(is)g(a)g(variable,)e(an)i(abstraction)f
Gb(\025)p F4(x:T.t)n Gd(,)658 3728 y(or)h(an)g(application)g
F4(t)43 b(s)21 b Gd(\(i.e.,)h(if)g(it)g(is)g F7(not)g
Gd(a)g(type)g(abstraction)f Gb(\025)p F4(X.t)g Gd(or)h(type)g(applica-)
658 3827 y(tion)f F4(t)43 b(S)p Gd(\).)658 3960 y(Show)23
b(that)g(if)g F4(t)f Gd(is)i(well)f(typed)g(\(in)g(some)g(context\))g
(and)g F7(erase)q FY(\()p F4(t)p FY(\))k(=)g F4(M)p Gd(,)c(then)g(ther)
o(e)g(is)658 4060 y(some)d(exposed)f(term)h F4(s)f Gd(such)h(that)g
F7(erase)q FY(\()p F4(s)p FY(\))j(=)g F4(M)c Gd(and)g
F4(s)h Gd(is)g(well)g(typed)f(\(possibly)h(in)g(a)658
4159 y(dif)o(fer)o(ent)e(context\).)554 4325 y(2.)41
b(W)-6 b(rite)30 b Gb(\025)p 934 4265 44 4 v F4(X.t)g
Gd(as)h(shorthand)g(for)g(a)g(nested)g(sequence)g(of)g(type)g
(abstractions)g(of)g(the)658 4425 y(form)j Gb(\025)p
F4(X)959 4437 y F1(1)1000 4425 y F4(.)o Gd(.)12 b(.)g(.)g
Gb(\025)p F4(X)1232 4437 y F1(n)1283 4425 y F4(.t)o Gd(.)66
b(Similarly)-9 b(,)37 b(write)d F4(t)43 b([)p 2198 4364
V(A)o(])34 b Gd(for)g(a)g(nested)g(sequence)g(of)g(type)658
4525 y(applications)24 b F4(\(\(t)43 b([A)1392 4537 y
F1(1)1432 4525 y F4(]\))13 b Gb(:)h(:)g(:)g F4([A)1731
4537 y F1(n)p F2(-)p F1(1)1870 4525 y FY(])p F4(\))43
b([A)2067 4537 y F1(n)2119 4525 y F4(])24 b Gd(and)g
F5(8)p 2398 4464 V -1 w F4(X.T)g Gd(for)g(a)g(nested)h(sequence)g(of)
658 4624 y(polymorphic)g(types)f F5(8)p F4(X)1470 4636
y F1(1)1510 4624 y F4(.)p Gd(.)12 b(.)g(.)g F5(8)p F4(X)1743
4636 y F1(n)1795 4624 y F4(.T)o Gd(.)36 b(Note)24 b(that)g(these)g
(sequences)h(ar)o(e)e(allowed)h(to)658 4724 y(be)29 b(empty)-9
b(.)51 b(For)30 b(example,)g(if)p 1670 4663 V 29 w F4(X)f
Gd(is)h(the)g(empty)f(sequence)h(of)f(type)g(variables,)i(then)658
4824 y F5(8)p 704 4763 V -1 w F4(X)o(.T)20 b Gd(is)h(just)h
F4(T)o Gd(.)p eop
%%Page: 167 168
167 167 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(167)658 683 y(Show)23
b(that)f(if)h F7(erase)q FY(\()p F4(t)p FY(\))k(=)f F4(M)d
Gd(and)f Gb(\000)k F5(`)h F4(t)f FF(:)h F4(T)p Gd(,)c(then)g(ther)o(e)f
(exists)h(some)g F4(s)f Gd(of)h(the)g(form)658 783 y
Gb(\025)p 703 722 44 4 v F4(X)o(.)43 b(\(u)g([)p 1008
722 V(A)o(]\))o Gd(,)20 b(for)g(some)h(sequence)g(of)f(type)g
(variables)p 2504 722 V 19 w F4(X)p Gd(,)g(some)g(sequence)h(of)f
(types)p 658 822 V 658 882 a F4(A)o Gd(,)h(and)f(some)h(exposed)g(term)
f F4(u)p Gd(,)g(with)i F7(erase)q FY(\()p F4(s)p FY(\))h(=)g
F4(M)d Gd(and)h Gb(\000)i F5(`)f F4(s)h FF(:)g F4(T)p
Gd(.)554 1048 y(3.)41 b(Show)29 b(that)h(if)f F4(t)g
Gd(is)h(an)f(exposed)g(term)h(of)f(type)g F4(T)h Gd(\(under)e
Gb(\000)6 b Gd(\))23 b(and)29 b F7(erase)q FY(\()p F4(t)p
FY(\))40 b(=)e F4(M)44 b(N)o Gd(,)658 1148 y(then)27
b F4(t)f Gd(has)g(the)h(form)f F4(s)43 b(u)27 b Gd(for)f(some)h(terms)g
F4(s)f Gd(and)g F4(u)g Gd(such)h(that)f F7(erase)q FY(\()p
F4(s)p FY(\))34 b(=)f F4(M)26 b Gd(and)658 1248 y F7(erase)q
FY(\()p F4(u)o FY(\))e(=)f F4(N)o Gd(,)e(with)g Gb(\000)i
F5(`)g F4(s)g FF(:)g F4(U)p FV(!)o F4(T)e Gd(and)f Gb(\000)j
F5(`)g F4(u)f FF(:)i F4(U)o Gd(.)554 1414 y(4.)41 b(Suppose)20
b(that)h F4(x:T)h F5(2)h Gb(\000)6 b Gd(.)19 b(Show)j(that)e(if)h
Gb(\000)i F5(`)f F4(u)h FF(:)g F4(U)e Gd(and)f F7(erase)q
FY(\()p F4(u)p FY(\))j(=)g F4(x)43 b(x)p Gd(,)20 b(then)i(either)702
1580 y(\(a\))40 b F4(T)23 b FY(=)g F5(8)p 1039 1519 V
-1 w F4(X)o(.X)1170 1592 y F1(i)1201 1580 y Gd(,)d(wher)o(e)h
F4(X)1535 1592 y F1(i)1590 1580 y F5(2)p 1668 1519 V
23 w F4(X)p Gd(,)f(or)h(else)697 1712 y(\(b\))41 b F4(T)h
FY(=)g F5(8)p 1077 1652 V -1 w F4(X)1120 1724 y F1(1)p
1161 1652 V 1161 1712 a F4(X)1204 1724 y F1(2)1245 1712
y F4(.T)1332 1724 y F1(1)1373 1712 y FV(!)p F4(T)1499
1724 y F1(2)1540 1712 y Gd(,)33 b(wher)o(e)d F0(f)p 1880
1652 V F4(X)1924 1724 y F1(1)p 1964 1652 V 1964 1712
a F4(X)2008 1724 y F1(2)2090 1712 y F5(7)p FV(!)42 b
F4(A)p F0(g)p F4(T)2329 1724 y F1(1)2412 1712 y FY(=)f
F0(f)p 2543 1652 V F4(X)2586 1724 y F1(1)2669 1712 y
F5(7)p FV(!)h F4(B)p F0(g)p FY(\()p F5(8)p 2943 1652
V -1 w F4(Z)o(.T)3073 1724 y F1(1)3114 1712 y FV(!)p
F4(T)3240 1724 y F1(2)3281 1712 y FY(\))31 b Gd(for)840
1812 y(some)22 b(sequences)f(of)f(types)p 1759 1751 V
21 w F4(A)h Gd(and)p 1985 1751 V 20 w F4(B)f Gd(with)i
F0(j)p 2257 1751 V F4(A)o F0(j)h FY(=)g F0(j)p 2445 1751
V F4(X)2488 1824 y F1(1)p 2529 1751 V 2529 1812 a F4(X)2572
1824 y F1(2)2613 1812 y F0(j)d Gd(and)g F0(j)p 2830 1751
V F4(B)p F0(j)j FY(=)f F0(j)p 3018 1751 V F4(X)3062 1824
y F1(1)3102 1812 y F0(j)p Gd(.)554 1978 y(5.)41 b(Show)25
b(that)f(if)g F7(erase)q FY(\()p F4(s)p FY(\))31 b(=)e
Gb(\025)p F4(x.M)24 b Gd(and)g Gb(\000)29 b F5(`)h F4(s)g
FF(:)g F4(S)p Gd(,)25 b(then)g F4(S)f Gd(has)g(the)h(form)g
F5(8)p 3091 1917 V -1 w F4(X)o(.S)3222 1990 y F1(1)3262
1978 y FV(!)p F4(S)3389 1990 y F1(2)3429 1978 y Gd(,)658
2078 y(for)20 b(some)p 998 2017 V 21 w F4(X)p Gd(,)h
F4(S)1127 2090 y F1(1)1168 2078 y Gd(,)f(and)g F4(S)1414
2090 y F1(2)1455 2078 y Gd(.)554 2244 y(6.)41 b(De\002ne)21
b(the)g Ge(leftmost)e(leaf)h Gd(of)g(a)h(type)f F4(T)h
Gd(as)f(follows:)907 2445 y F7(leftmost-leaf)o FY(\()p
F4(X)p FY(\))217 b(=)82 b F4(X)907 2545 y F7(leftmost-leaf)o
FY(\()p F4(S)p FV(!)p F4(T)p FY(\))90 b(=)82 b F7(leftmost-leaf)p
FY(\()p F4(S)p FY(\))907 2644 y F7(leftmost-leaf)o FY(\()p
F5(8)p F4(X.S)n FY(\))i(=)e F7(leftmost-leaf)p FY(\()p
F4(S)p FY(\))p Gb(:)658 2849 y Gd(Show)16 b(that)g(if)f
F0(f)p 1134 2789 V F4(X)1177 2861 y F1(1)p 1218 2789
V 1218 2849 a F4(X)1261 2861 y F1(2)1325 2849 y F5(7)p
FV(!)p 1431 2789 V 23 w F4(A)p F0(g)p FY(\()p F5(8)p
1580 2789 V -1 w F4(Y)o(.T)1710 2861 y F1(1)1751 2849
y FY(\))23 b(=)g F0(f)p 1919 2789 V F4(X)1962 2861 y
F1(1)2026 2849 y F5(7)p FV(!)p 2132 2789 V 23 w F4(B)o
F0(g)p FY(\()p F5(8)p 2280 2789 V -1 w F4(Z.\()p F5(8)p
2457 2789 V -2 w F4(Y.T)2588 2861 y F1(1)2629 2849 y
F4(\))p FV(!)o F4(T)2799 2861 y F1(2)2839 2849 y FY(\))p
Gd(,)17 b(then)f F7(leftmost-leaf)p FY(\()p F4(T)3575
2861 y F1(1)3615 2849 y FY(\))23 b(=)658 2949 y F4(X)701
2961 y F1(i)753 2949 y Gd(for)e(some)g F4(X)1138 2961
y F1(i)1192 2949 y F5(2)p 1271 2888 V 24 w F4(X)1314
2961 y F1(1)p 1355 2888 V 1355 2949 a F4(X)1398 2961
y F1(2)1439 2949 y Gd(.)554 3115 y(7.)41 b(Show)21 b(that)f
Gb(\012)h Gd(is)g(not)h(typeable)e(in)h(System)g(F)-8
b(.)450 3298 y(Solution)22 b(on)f(page)f Ge(??)p Gd(.)2208
b FZ(2)575 3480 y Gd(The)22 b Ge(type)f(erasure)f Gd(function)j(for)f
(System)g(F)g(is)g(the)h(following)g(mapping)f(fr)o(om)g(System)450
3580 y(F)f(to)g(terms)g(in)g(the)g(untyped)g(lambda-calculus:)699
3748 y F7(erase)q FY(\()p F4(x)p FY(\))346 b(=)83 b F4(x)699
3847 y F7(erase)q FY(\()p Gb(\025)p F4(x:T.)42 b(t)p
FY(\))83 b(=)g Gb(\025)p F4(x.)43 b F7(erase)q FY(\()p
F4(t)p FY(\))699 3947 y F7(erase)q FY(\()p F4(t)h(s)o
FY(\))259 b(=)83 b F7(erase)q FY(\()p F4(t)p FY(\))44
b F7(erase)q FY(\()p F4(s)p FY(\))699 4047 y F7(erase)q
FY(\()p Gb(\025)p F4(X.)f(t)p FY(\))170 b(=)83 b F7(erase)q
FY(\()p F4(t)p FY(\))699 4146 y F7(erase)q FY(\()p F4(t)44
b([S])n FY(\))172 b(=)83 b F7(erase)q FY(\()p F4(t)p
FY(\))450 4311 y Gd(A)18 b(term)h F4(M)f Gd(in)h(the)g(untyped)f
(lambda-calculus)f(is)i(said)g(to)g(be)f Ge(typeable)e
Gd(in)j(System)g(F)f(if)h(ther)o(e)450 4411 y(is)i(some)g(well-typed)g
(term)g F4(t)f Gd(such)h(that)g F7(erase)q FY(\()p F4(t)p
FY(\))i(=)g F4(M)o Gd(.)p eop
%%Page: 168 169
168 168 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(168)450 683 y F8(T)-9
b(ype)25 b(Reconstruction)450 891 y Gj(19.6)119 b(Implementation)450
1097 y F8(Nameless)25 b(Representation)f(of)h(T)-9 b(ypes)450
1271 y(ML)24 b(Code)616 1421 y FT(type)40 b(ty)g(=)773
1512 y(...)694 1604 y(|)g(TyVar)g(of)g(int)g(*)f(int)694
1695 y(|)h(TyAll)g(of)g(string)h(*)e(ty)616 1878 y(type)h(term)g(=)773
1969 y(...)694 2060 y(|)g(TmTAbs)h(of)e(info)h(*)g(string)g(*)g(term)
694 2152 y(|)g(TmTApp)h(of)e(info)h(*)g(term)g(*)f(ty)616
2326 y(let)h(tyshifti)h(d)e(c)h(tyT)g(=)694 2417 y(tymap)773
2509 y(\(fun)g(c)g(x)f(n)g FO(!)g FT(if)h(x>=c)g(then)1518
2600 y(if)g(x+d<0)g(then)g(err)g("Scoping)h(error!")1518
2691 y(else)f(TyVar\(x+d,n+d\))1440 2783 y(else)g(TyVar\(x,n+d\)\))773
2874 y(c)773 2965 y(tyT)616 3148 y(let)g(tmshifti)h(d)e(c)h(t)f(=)694
3239 y(tmmap)773 3331 y(\(fun)h(fi)g(c)f(x)h(n)f FO(!)g
FT(if)h(x>=c)g(then)g(TmVar\(fi,x+d,n+d\))j(else)d(TmVar\(fi,x,n+d\)\))
773 3422 y(\(tyshifti)h(d\))773 3513 y(c)773 3604 y(t)616
3787 y(let)f(tmshift)h(d)e(t)h(=)f(tmshifti)i(d)f(0)f(t)616
3970 y(let)h(tyshift)h(d)e(tyT)h(=)g(tyshifti)h(d)e(0)h(tyT)450
4152 y Gd(\(Note)21 b(that)f(we)h(also)g(need)f(to)h(shift)h(the)f
(type)f(annotation)i(in)f(the)g F4(TmAbs)e Gd(case.\))616
4327 y FT(let)40 b(tmsubst)h(j)e(s)h(t)f(=)694 4418 y(tmmap)773
4509 y(\(fun)h(fi)g(j)f(x)h(n)f FO(!)g FT(if)h(x=j)g(then)g(\(tmshift)h
(j)e(s\))h(else)g(TmVar\(fi,x,n\)\))773 4601 y(\(fun)g(j)g(tyT)f
FO(!)g FT(tyT\))773 4692 y(j)773 4783 y(t)p eop
%%Page: 169 170
169 169 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)776
b Gd(1)t(9)t(.)29 b(U)t F6(N)t(I)t(V)t(E)t(R)t(S)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)777 b Gd(169)616 683 y FT(let)40
b(tmsubstsnip)i(s)d(t)h(=)f(tmshift)i(\(-1\))f(\(tmsubst)h(0)f
(\(tmshift)h(1)e(s\))h(t\))616 866 y(let)g(tysubsti)h(tyS)f(j)f(tyT)h
(=)694 957 y(tymap)773 1048 y(\(fun)g(j)g(x)f(n)g FO(!)g
FT(if)h(x=j)g(then)g(\(tyshift)h(j)f(tyS\))g(else)g(\(TyVar\(x,n\)\)\))
773 1140 y(j)773 1231 y(tyT)616 1414 y(let)g(tysubst)h(tyS)f(tyT)g(=)f
(tysubsti)i(tyS)f(0)f(tyT)616 1596 y(let)h(tysubstsnip)i(tyS)e(tyT)g(=)
f(tyshift)i(\(-1\))f(\(tysubst)h(\(tyshift)g(1)e(tyS\))i(tyT\))616
1779 y(let)f(rec)g(tytmsubsti)h(tyS)f(j)g(t)f(=)694 1870
y(tmmap)773 1962 y(\(fun)h(fi)g(c)f(x)h(n)f FO(!)g FT
(TmVar\(fi,x,n\)\))773 2053 y(\(fun)h(j)g(tyT)f FO(!)g
FT(tysubsti)j(tyS)d(j)h(tyT\))773 2144 y(j)773 2236 y(t)616
2418 y(let)g(tytmsubst)h(tyS)f(t)g(=)f(tytmsubsti)j(tyS)d(0)h(t)616
2601 y(let)g(tytmsubstsnip)i(tyS)e(t)g(=)f(tmshift)i(\(-1\))f
(\(tytmsubst)h(\(tyshift)g(1)f(tyS\))g(t\))450 3418 y
Gj(19.7)119 b(Further)29 b(Reading)p eop
%%Page: 170 171
170 170 bop 450 1306 a F3(Chapter)44 b(20)450 1721 y
Gk(Existential)52 b(T)-19 b(ypes)450 2177 y F7(Some)21
b(writing)f(needed.)575 2277 y Gd(Having)h(seen)g(the)g(r)o(ole)f(of)h
(universal)g(quanti\002ers)g(in)h(a)e(type)h(system,)g(one)h(might)f
(won-)450 2376 y(der)k(whether)h F7(existential)f Gd(quanti\002ers)h
(would)h(also)e(be)h(useful)f(in)h(pr)o(ogramming.)40
b(In)26 b(fact,)450 2476 y(they)19 b(pr)o(ovide)f(an)h(elegant)g
(foundation)g(for)g(data)e(abstraction)i(and)g(\223information)g
(hiding,\224)450 2575 y(as)h(we)h(shall)g(see)g(in)g(this)h(chapter)-6
b(.)450 2861 y Gj(20.1)119 b(Motivation)450 3050 y Gd(The)21
b(polymorphic)h(types)f(in)g(Chapter)f(19)g(can)g(be)g(viewed)h(in)g
(two)g(dif)o(fer)o(ent)e(ways:)554 3216 y(1.)41 b(A)22
b F7(logical)g(intuition)g Gd(is)h(that)g(an)f(element)h(of)f(the)h
(type)f F5(8)p F4(X.T)f Gd(is)i(a)f(value)g(that)g(has)h(type)658
3316 y F0(f)p F4(X)f F5(7)p FV(!)h F4(S)o F0(g)p F4(T)d
Gd(for)h(any)g(choice)g(of)f F4(S)p Gd(.)658 3449 y(This)27
b(intuition)h(corr)o(esponds)f(to)g(a)f(\223type-erasur)o(e)e(view\224)
j(of)f(what)h(a)f(term)h(means:)658 3549 y(for)c(example,)g(the)g
(polymorphic)i(identify)e(function)i Gb(\025)p F4(X.)p
Gb(\025)p F4(x:X.x)20 b Gd(erases)j(to)g(the)h(un-)658
3648 y(typed)29 b(identity)g(function)h Gb(\025)p F4(x.x)o
Gd(,)h(which)g(maps)e(an)g(ar)o(gument)g(of)g(any)h(type)f
F4(S)g Gd(to)g(a)658 3748 y(r)o(esult)20 b(of)h(the)f(same)h(type)g
F4(S)o Gd(.)554 3914 y(2.)41 b(A)21 b(mor)o(e)h F7(operational)g
(intuition)g Gd(is)g(that)g(an)g(element)h(of)f F5(8)p
F4(X.T)e Gd(is)i(a)g(function)h(mapping)658 4013 y(a)d(type)g
F4(S)h Gd(to)g(a)f(concr)o(ete)g(instance)h(with)h(type)e
F0(f)p F4(X)j F5(7)p FV(!)g F4(S)o F0(g)p F4(T)o Gd(.)658
4146 y(This)18 b(intuition)i(corr)o(esponds)e(to)h(our)f(de\002nition)h
(of)f(System)h(F)f(in)h(Chapter)e(19,)h(wher)o(e)658
4246 y(the)26 b(r)o(eduction)f(of)h(a)g(type)g(application)f(is)i
(consider)o(ed)e(an)h(actual)f(step)h(of)g(the)g(com-)658
4346 y(putation.)450 4512 y(Similarly)-9 b(,)20 b(ther)o(e)g(ar)o(e)g
(two)h(dif)o(fer)o(ent)e(ways)i(of)f(looking)j(at)d(an)h(existential)f
(type)h F4({)p F5(9)p F4(X,T})n Gd(:)554 4678 y(1.)41
b(The)25 b F7(logical)f(intuition)h Gd(is)g(that)g(an)g(element)g(of)g
F4({)p F5(9)p F4(X,T})e Gd(has)i(type)g F0(f)p F4(X)30
b F5(7)p FV(!)h F4(S)o F0(g)p F4(T)24 b Gd(for)h F7(some)658
4777 y Gd(type)20 b F4(S)p Gd(.)1888 5169 y(170)p eop
%%Page: 171 172
171 171 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(171)554 683 y(2.)41
b(The)21 b F7(operational)g(intuition)h Gd(is)g(that)g(an)f(element)h
(of)g F4({)p F5(9)p F4(X,T})d Gd(is)j(a)g(pair)f(of)g(a)h(type)f
F4(S)g Gd(and)658 783 y(a)f(term)h F4(t)f Gd(of)h(type)f
F0(f)p F4(X)i F5(7)p FV(!)i F4(S)o F0(g)p F4(T)o Gd(.)450
949 y(W)-8 b(e)23 b(will)g(take)f(an)h(operational)g(view)f(of)h
(existentials)g(in)g(this)h(chapter)-6 b(,)22 b(since)h(it)g(pr)o
(ovides)e(a)450 1048 y(closer)27 b(analogy)g(between)f(existential)h
(packages)f(and)g(modules)h(or)g(abstract)f(data)f(types.)450
1148 y(Our)k(concr)o(ete)f(syntax)h(for)g(existential)f(types)h(\()p
F4({)p F5(9)p F4(X,T})e Gd(rather)h(than)h(the)g(mor)o(e)g(standar)o(d)
450 1248 y F5(9)p F4(X.T)o Gd(\))20 b(r)o(e\003ects)g(this)i(analogy)-9
b(.)575 1347 y(As)24 b(always,)h(to)g(understand)f(existential)h(types)
f(we)h(need)f(to)h(know)h(two)f(things:)34 b(how)450
1447 y(to)26 b F7(build)h Gd(\(or)f(\223intr)o(oduce,\224)f(in)i(the)f
(jar)o(gon)g(of)g(Section)g Ge(??)p Gd(\))g(elements)g(of)g
(existential)g(types,)450 1546 y(and)20 b(how)i(to)f
F7(use)h Gd(\(or)e(\223eliminate\224\))g(these)h(values)f(in)h
(computations.)575 1646 y(A)k(value)g F4({)p F5(9)p F4(X=S,t})e
Gd(of)j(type)g F4({)p F5(9)p F4(X,T})e Gd(can)i(be)f(thought)j(of)d(as)
h(a)g(simple)g(module)g(with)450 1746 y(one)19 b(\(hidden\))f(type)g
(component)i(and)e(one)h(term)f(component.)2488 1716
y FK(1)2547 1746 y Gd(The)h(type)f F4(S)g Gd(is)h(often)g(called)450
1845 y(the)k Ge(hidden)e(representation)e(type)p Gd(,)j(or)h(sometimes)
h(\(to)f(emphasize)f(the)h(connection)h(with)450 1945
y(intuitionistic)34 b(logic\))e(the)g Ge(witness)e(type)h
Gd(of)h(the)g(package.)58 b(As)31 b(a)h(simple)g(example,)i(the)450
2045 y(package)658 2211 y F4(p)22 b FY(=)h F4({)p F5(9)p
F4(X=Nat,)41 b({a=5,)g(f=)p Gb(\025)p F4(x:Nat.)g(succ\(x\)}})450
2377 y Gd(has)21 b(the)g(existential)f(type)658 2543
y F4({)p F5(9)p F4(X,)42 b({a:X,)g(f:X)p FV(!)n F4(X}})o
Gb(:)450 2709 y Gd(That)18 b(is,)h(the)g(right-hand)f(component)i(of)f
F4(p)f Gd(is)h(a)f(r)o(ecor)o(d)e(containing)k(a)e(\002eld)g
F4(a)h Gd(of)f(type)g F4(X)g Gd(and)450 2808 y(a)i(\002eld)h
F4(f)f Gd(of)h(type)g F4(X)p FV(!)o F4(X)p Gd(,)f(for)h(some)g
F4(X)g Gd(\(namely)f F4(Nat)o Gd(\).)575 2908 y(The)g(same)h(package)e
F4(p)i F7(also)g Gd(has)f(the)h(type)658 3074 y F4({)p
F5(9)p F4(X,)42 b({a:X,)g(f:X)p FV(!)n F4(Nat}})n Gb(;)450
3240 y Gd(since)18 b(its)h(right-hand)f(component)h(is)g(a)e(r)o(ecor)o
(d)g(with)h(\002elds)h F4(a)e Gd(and)h F4(f)g Gd(of)g(type)g
F4(X)f Gd(and)h F4(X)p FV(!)o F4(Nat)o Gd(,)450 3340
y(for)25 b(some)h F4(X)e Gd(\(namely)h F4(Nat)o Gd(\).)38
b(This)26 b(example)e(shows)i(that,)g(in)g(general,)f(we)g(can't)g
(make)g(an)450 3439 y(automatic)i(decision)h(about)f(which)i
(existential)e(type)h(a)e(given)i(package)e(belongs)j(to:)39
b(the)450 3539 y(pr)o(ogrammer)25 b(must)i(specify)e(which)i(one)f(is)h
(intended.)40 b(The)26 b(simplest)h(way)f(to)g(do)g(this)h(is)450
3639 y(just)e(to)f(add)f(an)h(annotation)h(to)f(every)g(package)f(that)
h(explicitly)g(gives)g(its)g(intended)g(type.)450 3738
y(So)d(we'll)g(write)616 3896 y FT(p1)40 b(=)f({)p Fv(9)p
FT(X=Nat,)i({a=5,)f(f=)p FM(\025)p FT(x:Nat.)h(succ\(x\)}})g(as)f({)p
Fv(9)p FT(X,)f({a:X,)i(f:X)p FO(!)p FT(X}};)529 4020
y FS(I)616 4030 y FT(p1)f(:)f({)p Fv(9)p FT(X,)h({a:X,f:X)p
FO(!)q FT(X}})450 4212 y Gd(or:)p 450 4265 1200 4 v 540
4322 a FJ(1)570 4345 y F6(Obviously)-7 b(,)23 b(we)g(could)g
(generalize)f(to)g(many)g(type/term)f(components,)i(but)f(we'll)i
(stick)f(with)f(just)g(one)g(of)450 4424 y(each)17 b(to)g(keep)f(the)g
(notation)g(tractable.)21 b(The)16 b(ef)o(fect)h(of)g(multiple)g(type)f
(components)g(can)h(be)f(achieved)g(by)h(nesting)450
4503 y(single-type)g(existentials,)f(while)i(the)e(ef)o(fect)h(of)g
(multiple)g(term)f(components)h(can)g(be)f(achieved)h(by)f(using)h(a)g
(tuple)450 4582 y(or)g(r)o(ecor)o(d)g(as)g(the)f(right-hand)f
(component:)889 4741 y FH({)p Fu(9)p FH(X)999 4752 y
FL(1)1037 4741 y FH(=S)1107 4752 y FL(1)1145 4741 y FH(,)35
b Fu(9)p FH(X)1290 4752 y FL(2)1327 4741 y FH(=S)1398
4752 y FL(2)1436 4741 y FH(,)g(t)1542 4752 y FL(1)1579
4741 y FH(,)h(t)1685 4752 y FL(2)1723 4741 y FH(})1844
4703 y FJ(def)1853 4741 y Ft(=)96 b FH({)p Fu(9)p FH(X)2111
4752 y FL(1)2148 4741 y FH(=S)2219 4752 y FL(1)2257 4741
y FH(,)35 b({)p Fu(9)p FH(X)2437 4752 y FL(2)2475 4741
y FH(=S)2545 4752 y FL(2)2583 4741 y FH(,)g({t)2724 4752
y FL(1)2762 4741 y FH(,)g(t)2867 4752 y FL(2)2905 4741
y FH(}}})p eop
%%Page: 172 173
172 172 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(172)616 683 y FT(p2)40
b(=)f({)p Fv(9)p FT(X=Nat,)i({a=5,)f(f=)p FM(\025)p FT(x:Nat.)h
(succ\(x\)}})g(as)f({)p Fv(9)p FT(X,)f({a:X,)i(f:X)p
FO(!)p FT(Nat}};)529 807 y FS(I)616 817 y FT(p2)f(:)f({)p
Fv(9)p FT(X,)h({a:X,f:X)p FO(!)q FT(Nat}})450 999 y Gd(The)30
b(type)h(annotation)g(intr)o(oduced)f(by)g F4(as)g Gd(is)h(similar)f
(to)h(the)g(coer)o(cion)f(constr)o(uct)h(intr)o(o-)450
1099 y(duced)19 b(in)i(Section)f Ge(??)o Gd(,)g(which)h(allows)g
F7(any)f Gd(term)f(to)i(be)f(annotated)f(with)i(its)f(intended)g(type.)
450 1198 y(W)-8 b(e)23 b(ar)o(e)f(essentially)i(r)o(equiring)f(a)g
(single)h(coer)o(cion)g(as)e(part)h(of)g(the)h(concr)o(ete)e(syntax)i
(of)f(the)450 1298 y(package)d(constr)o(uct.)575 1398
y(The)g(complete)h(typing)h(r)o(ule)f(for)f(packages)g(is)h(as)f
(follows:)1438 1524 y Gb(\000)i F5(`)h F4(t)1623 1536
y F1(2)1686 1524 y FF(:)h F0(f)p F4(X)e F5(7)p FV(!)h
F4(U)p F0(g)p F4(T)2074 1536 y F1(2)p 1069 1567 1415
4 v 1069 1647 a Gb(\000)g F5(`)f F4({)p F5(9)p F4(X=U)o(,t)1518
1659 y F1(2)1559 1647 y F4(})43 b(as)g({)p F5(9)p F4(X)o(,T)1997
1659 y F1(2)2038 1647 y F4(})22 b FF(:)h F4({)p F5(9)p
F4(X,T)2399 1659 y F1(2)2439 1647 y F4(})3106 1586 y
Gd(\()r(T)o(-)t(P)m F6(A)t(C)t(K)r Gd(\))575 1771 y(Of)28
b(course,)h(packages)f(with)g(dif)o(fer)o(ent)e(r)o(epr)o(esentation)h
(types)i(can)e(inhabit)i(the)f(same)450 1870 y(existential)21
b(type.)k(For)c(example:)616 2028 y FT(p3)40 b(=)f({)p
Fv(9)p FT(X=Nat,)i(0})e(as)h({)p Fv(9)p FT(X,X};)529
2151 y FS(I)616 2161 y FT(p3)g(:)f({)p Fv(9)p FT(X,)h(X})616
2336 y(p4)g(=)f({)p Fv(9)p FT(X=Bool,)i(true})f(as)g({)p
Fv(9)p FT(X,X};)529 2476 y FS(I)616 2486 y FT(p4)g(:)f({)p
Fv(9)p FT(X,)h(X})450 2669 y Gd(Or)-6 b(,)20 b(mor)o(e)h(usefully:)616
2826 y FT(p5)40 b(=)f({)p Fv(9)p FT(X=Nat,)i({a=0,)f(f=)p
FM(\025)p FT(x:Nat.)h(succ\(x\)}})g(as)f({)p Fv(9)p FT(X,)f({a:X,)i
(f:X)p FO(!)p FT(Nat}};)529 2950 y FS(I)616 2960 y FT(p5)f(:)f({)p
Fv(9)p FT(X,)h({a:X,f:X)p FO(!)q FT(Nat}})616 3134 y(p6)g(=)f({)p
Fv(9)p FT(X=Bool,)i({a=true,)g(f=)p FM(\025)p FT(x:Bool.)g(0}})f(as)f
({)p Fv(9)p FT(X,)h({a:X,)g(f:X)p FO(!)q FT(Nat}};)529
3274 y FS(I)616 3284 y FT(p6)g(:)f({)p Fv(9)p FT(X,)h({a:X,f:X)p
FO(!)q FT(Nat}})450 3467 y Ge(20.1.1)18 b(Exercise)h([Quick)h(check]:)
39 b Gd(Her)o(e)20 b(ar)o(e)f(thr)o(ee)h(mor)o(e)h(variations)f(on)i
(the)f(same)f(theme:)616 3625 y FT(p7)40 b(=)f({)p Fv(9)p
FT(X=Nat,)i({a=0,)f(f=)p FM(\025)p FT(x:Nat.)h(succ\(x\)}})g(as)f({)p
Fv(9)p FT(X,)f({a:X,)i(f:X)p FO(!)p FT(X}};)529 3748
y FS(I)616 3758 y FT(p7)f(:)f({)p Fv(9)p FT(X,)h({a:X,f:X)p
FO(!)q FT(X}})616 3933 y(p8)g(=)f({)p Fv(9)p FT(X=Nat,)i({a=0,)f(f=)p
FM(\025)p FT(x:Nat.)h(succ\(x\)}})g(as)f({)p Fv(9)p FT(X,)f({a:X,)i
(f:Nat)p FO(!)q FT(X}};)529 4073 y FS(I)616 4083 y FT(p8)f(:)f({)p
Fv(9)p FT(X,)h({a:X,f:Nat)p FO(!)r FT(X}})616 4257 y(p9)g(=)f({)p
Fv(9)p FT(X=Nat,)i({a=0,)f(f=)p FM(\025)p FT(x:Nat.)h(succ\(x\)}})g(as)
f({)p Fv(9)p FT(X,)f({a:Nat,)i(f:Nat)p FO(!)q FT(Nat}};)529
4397 y FS(I)616 4407 y FT(p9)f(:)f({)p Fv(9)p FT(X,)h({a:Nat,f:Nat)p
FO(!)r FT(Nat}})450 4590 y Gd(In)21 b(what)g(ways)g(ar)o(e)e(these)i
(less)g(useful)g(than)g F4(p5)f Gd(and)g F4(p6)o Gd(?)26
b(Solution)21 b(on)h(page)e Ge(??)p Gd(.)339 b FZ(2)p
eop
%%Page: 173 174
173 173 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(173)575 683 y(A)18 b(useful)g
(intuition)j(for)d(the)h(existential)f(elimination)i(constr)o(uct)g
(comes)f(fr)o(om)f(the)h(anal-)450 783 y(ogy)g(with)g(modules.)25
b(If)18 b(an)g(existential)h(package)e(is)i(a)f(simple)g(form)h(of)f
(module,)h(then)g(pack-)450 882 y(age)27 b(elimination)h(is)g(like)g
(an)f F4(open)e Gd(or)j F4(import)d Gd(constr)o(uct:)39
b(it)28 b(allows)g(the)f(components)i(of)450 982 y(the)e(module)f(to)h
(be)f(used)h(in)g(some)g(other)f(part)g(of)h(the)f(pr)o(ogram,)h(but)g
(holds)g(the)g(identity)450 1082 y(of)k(the)h(module's)g(type)f
(component)h(abstract.)56 b(This)32 b(can)f(be)g(achieved)f(with)j(a)d
(kind)i(of)450 1181 y(pattern-matching)21 b(binding:)1029
1307 y Gb(\000)i F5(`)g F4(t)1214 1319 y F1(1)1278 1307
y FF(:)g F5(9)p F4(X.T)1529 1319 y F1(12)1772 1307 y
Gb(\000)6 b(;)17 b F4(X)p Gb(;)23 b F4(x:T)2083 1319
y F1(12)2183 1307 y F5(`)g F4(t)2301 1319 y F1(2)2364
1307 y FF(:)h F4(T)2482 1319 y F1(2)p 1029 1350 1494
4 v 1225 1430 a Gb(\000)f F5(`)g F4(let)42 b({X)o(,x}=t)1846
1442 y F1(1)1930 1430 y F4(in)h(t)2105 1442 y F1(2)2168
1430 y FF(:)24 b F4(T)2286 1442 y F1(2)2987 1369 y Gd(\()r(T)o(-)t(U)t
F6(N)t(P)n(A)t(C)t(K)r Gd(\))450 1553 y(That)f(is,)i(if)e
F4(t)865 1565 y F1(1)929 1553 y Gd(is)h(an)g(expr)o(ession)f(that)h
(yields)g(an)f(existential)h(package,)f(then)h(we)g(can)f(bind)450
1653 y(its)30 b(type)g(and)f(term)h(components)h(to)g(the)f(pattern)f
(variables)g F4(X)g Gd(and)h F4(x)f Gd(and)g(use)h(them)h(in)450
1752 y(computing)22 b F4(t)915 1764 y F1(2)956 1752 y
Gd(.)575 1852 y(For)f(example,)e(suppose)i(that)g F4(p)f
Gd(has)h(the)g(following)h(existential)f(type:)529 1890
y FS(I)616 1900 y FT(p)39 b(:)h({)p Fv(9)p FT(X,)g({a:X,f:X)p
FO(!)q FT(Nat}})450 2065 y Gd(Then)21 b(the)g(elimination)h(expr)o
(ession)616 2220 y FT(let)40 b({X,x}=p)h(in)e(\(x.f)i(x.a\);)529
2340 y FS(I)616 2350 y FT(1)e(:)h(Nat)450 2530 y Gd(opens)24
b F4(p)f Gd(and)f(uses)i(its)f(components)i(\()p F4(x.f)d
Gd(and)h F4(x.a)n Gd(\))g(to)h(compute)f(a)g(numeric)h(r)o(esult.)32
b(The)450 2630 y(body)22 b(of)g(the)g(elimination)i(form)e(is)g(also)h
(permitted)e(to)i(use)f(the)g(type)g(variable)f F4(X)o
Gd(,)i(as)e(in)i(the)450 2729 y(following)f(example:)616
2885 y FT(let)40 b({X,x}=p)h(in)e(\()p FM(\025)p FT(y:X.)h(x.f)g(y\))g
(x.a;)529 3004 y FS(I)616 3014 y FT(1)f(:)h(Nat)575 3195
y Gd(The)18 b(fact)g(that)h(the)f(package's)g(r)o(epr)o(esentation)g
(type)g(is)h(held)g(abstract)f(during)h(the)f(type-)450
3294 y(checking)27 b(of)f(the)g(body)h(\()p F4(t)1329
3306 y F1(2)1369 3294 y Gd(\))f(means)h(that)f(the)g(only)h(operations)
g(allowed)f(on)h F4(x)f Gd(ar)o(e)e(those)450 3394 y(warranted)19
b(by)i(its)g(\223abstract)e(type\224)i F4(T)1693 3406
y F1(1)1734 3394 y Gd(.)k(In)c(the)g(pr)o(esent)f(example,)g(we)g(ar)o
(e)g(not)h(allowed)g(to)450 3493 y(use)g F4(x.a)e Gd(concr)o(etely)i
(as)f(a)g(number:)655 3649 y FT(let)40 b({X,x}=p)h(in)f(succ\(x.a\);)
529 3769 y FS(I)616 3779 y FT(Error:)h(argument)g(of)e(succ)i(is)e(not)
h(a)g(number)450 3959 y Gd(This)26 b(r)o(estriction)f(makes)g(good)h
(sense,)g(since)f(we)h(saw)f(above)f(that)h(a)g(package)f
F4(p)h Gd(with)h(the)450 4058 y(given)21 b(existential)g(type)f(might)i
(use)f(either)g F4(Nat)e Gd(or)i F4(Bool)e Gd(as)i(its)g(r)o(epr)o
(esentation)e(type.)575 4158 y(Ther)o(e)31 b(is)j(another)-6
b(,)35 b(mor)o(e)e(subtle,)j(way)d(in)g(which)h(typechecking)f(of)g
(the)g(existential)450 4258 y(elimination)23 b(constr)o(uct)f(may)g
(fail.)28 b(In)22 b(the)f(r)o(ule)j(T)o(-)t(U)t F6(N)t(P)n(A)t(C)t(K)s
Gd(,)e(the)f(type)h(variable)e F4(X)h Gd(appears)450
4357 y(in)k(the)g(context)g(in)g(which)h F4(t)1372 4369
y F1(2)1412 4357 y Gd('s)f(type)g(is)g(calculated,)f(but)h(does)g
F7(not)f Gd(appear)g(in)h(the)g(context)450 4457 y(of)g(the)g(r)o
(ule's)g(conclusion.)39 b(This)25 b(means)g(that)g(the)g(r)o(esult)f
(type)h F4(T)2589 4469 y F1(2)2654 4457 y Gd(cannot)g(contain)g
F4(X)g Gd(fr)o(ee,)450 4557 y(since)f(any)g(fr)o(ee)e(occurr)o(ences)i
(of)f F4(X)h Gd(will)g(be)g(out)g(of)g(scope)g(in)h(the)f(conclusion.)
36 b(Mor)o(e)23 b(oper)o(-)450 4656 y(ationally)-9 b(,)26
b(in)f(terms)h(of)f(the)g(nameless)g(pr)o(esentation)g(of)g(terms)g
(discussed)g(in)g(Section)g(5.1,)450 4756 y(the)e(T)o(-)t(U)t
F6(N)t(P)n(A)t(C)t(K)g Gd(r)o(ule)e(pr)o(oceeds)f(in)h(thr)o(ee)f
(steps:)554 4920 y(1.)41 b(Check)15 b(the)h(subexpr)o(ession)g
F4(t)1617 4932 y F1(1)1673 4920 y Gd(and)f(ensur)o(e)g(that)h(it)g(has)
g(an)f(existential)h(type)g F4({)p F5(9)p F4(X.T)3351
4932 y F1(11)3428 4920 y F4(})p Gd(.)p eop
%%Page: 174 175
174 174 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(174)554 683 y(2.)41
b(Extend)20 b(the)h(context)g Gb(\000)f Gd(with)i F4(X)e
Gd(and)g F4(x:T)1973 695 y F1(11)2071 683 y Gd(and)g(check)h(that)g
F4(t)2669 695 y F1(2)2730 683 y Gd(has)g(some)h(type)e
F4(T)3318 695 y F1(2)3358 683 y Gd(.)554 849 y(3.)41
b(Shift)26 b(the)g(indices)h(of)g(fr)o(ee)d(variables)i(in)h
F4(T)2047 861 y F1(2)2114 849 y F7(down)f Gd(by)h(two,)h(so)f(that)g
(it)f(makes)h(sense)658 949 y(with)21 b(r)o(espect)f(to)h
Gb(\000)5 b Gd(.)554 1115 y(4.)41 b(Return)21 b(the)g(r)o(esulting)g
(type)f(as)h(the)g(type)f(of)h(the)g(whole)g F4(let...in...)c
Gd(expr)o(ession.)450 1281 y(Clearly)-9 b(,)27 b(if)g
F4(X)f Gd(occurs)h(fr)o(ee)e(in)i F4(T)1477 1293 y F1(2)1518
1281 y Gd(,)h(then)f(the)g(shifting)h(step)e(will)h(yield)g(a)f
(nonsensical)i(type)450 1380 y(containing)17 b(fr)o(ee)d(variables)h
(with)h(negative)g(indices;)h(typechecking)g(must)f(fail)f(at)h(this)g
(point.)655 1538 y FT(let)40 b({X,x}=p)h(in)f(x.a;)529
1662 y FS(I)616 1672 y FT(Error:)h(Scoping)f(error!)575
1854 y Gd(The)22 b(computation)i(r)o(ule)f(for)g(existentials)g(is)g
(straightforwar)o(d:)28 b(if)23 b(the)g(package)f(subex-)450
1954 y(pr)o(ession)i(has)f(alr)o(eady)e(been)j(r)o(educed)d(to)j(a)f
(concr)o(ete)f(package,)h(then)h(we)f(may)g(substitute)450
2054 y(the)e(components)h(of)f(the)g(package)e(for)i(the)g(variables)e
F4(X)i Gd(and)f F4(x)g Gd(in)i(the)f(body)f F4(t)2995
2066 y F1(2)3036 2054 y Gd(:)575 2153 y(In)c(terms)h(of)g(the)f
(analogy)h(with)g(modules,)h(this)f(r)o(ule)g(can)f(be)g(viewed)g(as)h
(a)f(kind)h(of)f(\223link-)450 2253 y(ing\224)22 b(operation,)f(in)h
(which)h(symbolic)g(names)e(\()p F4(X)g Gd(and)g F4(x)p
Gd(\))g(r)o(eferring)f(to)i(the)g(components)h(of)450
2352 y(a)h(separately)e(compiled)j(module)f(ar)o(e)e(r)o(eplaced)g(by)j
(dir)o(ect)d(r)o(efer)o(ences)g(to)j(the)f(actual)f(con-)450
2452 y(tents)e(of)g(the)g(module.)575 2552 y(Since)30
b(the)h(type)g(variable)f F4(X)g Gd(is)i(substituted)f(away)f(by)h
(this)h(r)o(ule,)i(the)d(r)o(esulting)g(pr)o(o-)450 2651
y(gram)26 b(actually)h(has)f(concr)o(ete)g(access)g(to)h(the)g
(package's)f(internals.)43 b(This)27 b(is)g(just)h(another)450
2751 y(example)g(of)g(a)g(phenomenon)i(we)e(have)g(seen)g(several)g
(times:)41 b(expr)o(essions)28 b(can)g(become)450 2851
y(\223mor)o(e)c(typed\224)g(as)h(computation)g(pr)o(oceeds,)g(and)f(in)
h(particular)f(an)h(ill-typed)f(expr)o(ession)450 2950
y(can)c(r)o(educe)g(to)h(a)f(well-typed)g(one.)450 3216
y Ge(Existential)d(types)2167 b FV(!)p F5(8)3373 3216
y
 gsave currentpoint translate 0 124518 7800 div 613126 7800 div 579629
-7800 div box .9 setgray fill grestore
 3373 3216 a 15 w F5(9)p 409 3298 9 36 v 418 3268 3000
6 v 3418 3268 38 6 v 3455 3298 9 36 v 450 3387 a F7(New)21
b(syntactic)e(forms)592 3518 y F4(t)61 b Gd(::=)i(...)1695
b F7(terms)852 3618 y
 gsave currentpoint translate 0 215539 7800 div 4741858 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 3618 a 15 w F4({)p F5(9)p F4(X=T)o(,t})42
b(as)h(T)1233 b F7(packing)852 3727 y
 gsave currentpoint translate 0 215539 7800 div 5754012 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 3727 a 15 w
F4(let)43 b({X)o(,x}=t)e(in)i(t)1105 b F7(unpacking)592
3926 y F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 4026
y
 gsave currentpoint translate 0 215539 7800 div 4741858 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4026 a 15 w F4({)p F5(9)p F4(X=T)o(,v})42 b(as)h(T)1233
b F7(package)19 b(value)592 4225 y F4(T)61 b Gd(::=)i(...)1695
b F7(types)852 4325 y
 gsave currentpoint translate 0 215539 7800 div 2333431 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4325 a 15 w F4({)p F5(9)p F4(X,T})1537
b F7(existential)21 b(type)450 4539 y(New)g(evaluation)f(rules)p
3096 4452 355 4 v 3096 4564 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 4509 y FX(0)p 3447 4564 V 3096
4567 355 4 v 1023 4736 a
 gsave currentpoint translate 0 812646 7800 div 11886917 7800 div 1140326
-7800 div box .9 setgray fill grestore
 1023 4736 a 1047 4685 a F4(let)42
b({X,x}={)p F5(9)p F4(X=T)1703 4697 y F1(11)1780 4685
y F4(,v)1867 4697 y F1(12)1944 4685 y F4(})h(as)g(T)2206
4697 y F1(1)2290 4685 y F4(in)g(t)2464 4697 y F1(2)1291
4785 y F5(\000)-14 b FV(!)23 b F0(f)p F4(X)f F5(7)p FV(!)h
F4(T)1691 4797 y F1(11)1768 4785 y F0(gf)p F4(x)e F5(7)p
FV(!)i F4(v)2037 4797 y F1(12)2114 4785 y F0(g)p F4(t)2184
4797 y F1(12)2906 4736 y Gd(\()r(E)t(-)t(P)m F6(A)t(C)t(K)t
Gd(B)t F6(E)t(T)o(A)q Gd(\))p eop
%%Page: 175 176
175 175 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(175)1282 749 y
 gsave currentpoint translate 0 1638398 7800 div 7801423 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1282
749 a 1566 693 a F4(t)1609 705 y F1(12)1709 693 y F5(\000)-14
b FV(!)23 b F4(t)1917 664 y FX(0)1909 717 y F1(12)p 1316
730 921 4 v 1394 803 a F4({)p F5(9)p F4(X=T)1615 815
y F1(11)1692 803 y F4(,t)1779 815 y F1(12)1856 803 y
F4(})43 b(as)g(T)2117 815 y F1(1)1316 903 y F5(\000)-14
b FV(!)23 b F4({)p F5(9)p F4(X=T)1693 915 y F1(11)1770
903 y F4(,t)1865 873 y FX(0)1857 926 y F1(12)1934 903
y F4(})43 b(as)g(T)2196 915 y F1(1)3101 749 y Gd(\()r(E)t(-)t(P)m
F6(A)t(C)t(K)r Gd(\))1274 1146 y
 gsave currentpoint translate 0 1638398 7800 div 7919809 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1274 1146 a 1602 1090
a F4(t)1645 1102 y F1(1)1709 1090 y F5(\000)-14 b FV(!)23
b F4(t)1917 1060 y FX(0)1909 1114 y F1(1)p 1308 1127
936 4 v 1387 1200 a F4(let)42 b({X,x}=t)1866 1212 y F1(1)1950
1200 y F4(in)h(t)2125 1212 y F1(2)1308 1299 y F5(\000)-14
b FV(!)23 b F4(let)42 b({X,x}=t)1952 1269 y FX(0)1945
1323 y F1(1)2029 1299 y F4(in)g(t)2203 1311 y F1(2)2983
1146 y Gd(\()r(E)t(-)t(U)t F6(N)t(P)n(A)t(C)t(K)q Gd(\))450
1479 y F7(New)21 b(typing)e(rules)p 3067 1396 383 4 v
3067 1504 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g
F4(T)p 3447 1504 V 3067 1507 383 4 v 1035 1680 a
 gsave currentpoint translate 0 851966 7800 div 11701238 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1035
1680 a 1438 1624 a Gb(\000)f F5(`)h F4(t)1623 1636 y
F1(2)1686 1624 y FF(:)h F0(f)p F4(X)e F5(7)p FV(!)h F4(U)p
F0(g)p F4(T)2074 1636 y F1(2)p 1069 1661 1415 4 v 1069
1734 a Gb(\000)g F5(`)f F4({)p F5(9)p F4(X=U)o(,t)1518
1746 y F1(2)1559 1734 y F4(})43 b(as)g({)p F5(9)p F4(X)o(,T)1997
1746 y F1(2)2038 1734 y F4(})22 b FF(:)h F4({)p F5(9)p
F4(X,T)2399 1746 y F1(2)2439 1734 y F4(})3106 1680 y
Gd(\()r(T)o(-)t(P)m F6(A)t(C)t(K)r Gd(\))995 1977 y
 gsave currentpoint translate 0 851966 7800 div 12327624 7800 div 1179646
-7800 div box .9 setgray fill grestore
 995
1977 a 1029 1921 a Gb(\000)g F5(`)g F4(t)1214 1933 y
F1(1)1278 1921 y FF(:)g F5(9)p F4(X.T)1529 1933 y F1(12)1772
1921 y Gb(\000)6 b(;)17 b F4(X)p Gb(;)23 b F4(x:T)2083
1933 y F1(12)2183 1921 y F5(`)g F4(t)2301 1933 y F1(2)2364
1921 y FF(:)h F4(T)2482 1933 y F1(2)p 1029 1958 1494
4 v 1225 2031 a Gb(\000)f F5(`)g F4(let)42 b({X)o(,x}=t)1846
2043 y F1(1)1930 2031 y F4(in)h(t)2105 2043 y F1(2)2168
2031 y FF(:)24 b F4(T)2286 2043 y F1(2)2987 1977 y Gd(\()r(T)o(-)t(U)t
F6(N)t(P)n(A)t(C)t(K)r Gd(\))p 409 2123 9 36 v 418 2123
3000 6 v 3418 2123 38 6 v 3455 2123 9 36 v 450 2408 a
Gj(20.2)119 b(Data)29 b(Abstraction)g(with)g(Existentials)450
2614 y F8(Abstract)c(Data)f(T)-9 b(ypes)450 2772 y Gd(For)20
b(a)g(mor)o(e)f(inter)o(esting)h(example,)f(her)o(e)h(is)g(a)f(simple)i
(package)d(de\002ning)j(an)f Ge(abstract)e(data)450 2871
y(type)i Gd(of)h(\(pur)o(ely)e(functional\))i(counters.)616
3025 y FT(counterADT)42 b(=)734 3117 y({)p Fv(9)p FT(Counter)e(=)g
(Nat,)773 3208 y({new)g(=)g(0,)812 3299 y(get)g(=)g FM(\025)p
FT(i:Nat.)g(i,)812 3391 y(inc)g(=)g FM(\025)p FT(i:Nat.)g(succ\(i\)}})
655 3482 y(as)g({)p Fv(9)p FT(Counter,)812 3573 y({new:)h(Counter,)851
3665 y(get:)g(Counter)p FO(!)q FT(Nat,)851 3756 y(inc:)g(Counter)p
FO(!)q FT(Counter}};)529 3871 y FS(I)616 3881 y FT(counterADT)h(:)d({)p
Fv(9)p FT(Counter,)1204 3973 y({new:Counter,get:Counter)p
FO(!)6 b FT(Nat,inc:Counter)p FO(!)s FT(Counter}})450
4151 y Gd(The)26 b(concr)o(ete)g(r)o(epr)o(esentation)f(of)h(a)g
(counter)g(is)h(just)g(a)e(number)-6 b(.)42 b(The)27
b(package)e(pr)o(ovides)450 4250 y(thr)o(ee)15 b(operations)h(on)h
(counters:)23 b(a)15 b(constant)i F4(new)n Gd(,)g(a)e(function)i
F4(get)d Gd(for)i(extracting)f(a)g(counter)6 b('s)450
4350 y(curr)o(ent)19 b(value,)h(and)f(a)h(function)h
F4(inc)d Gd(for)i(cr)o(eating)g(a)f(new)i(counter)f(whose)h(stor)o(ed)e
(value)h(is)450 4450 y(one)k(mor)o(e)g(than)g(the)g(given)g(counter)6
b('s.)35 b(Having)24 b(cr)o(eated)e(the)i(counter)g(package,)f(we)h
(next)450 4549 y(open)d(it,)g(exposing)g(the)g(operations)g(as)g(the)g
(\002elds)f(of)h(a)f(r)o(ecor)o(d)f F4(counter)n Gd(:)616
4703 y FT(let)40 b({Counter,counter}=counterADT)46 b(in)616
4795 y(counter.get)c(\(counter.inc)g(counter.new\);)529
4910 y FS(I)616 4920 y FT(1)d(:)h(Nat)p eop
%%Page: 176 177
176 176 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(176)450 683 y(If)21
b(we)g(or)o(ganize)g(our)g(code)g(so)h(that)f(the)h(body)f(of)h(this)g
F4(let)e Gd(contains)i(the)f(whole)h(r)o(emainder)450
783 y(of)f(the)g(pr)o(ogram,)e(then)j(this)f(idiom)616
917 y FT(let)40 b({Counter,counter})j(=)d(<counter)h(package>)g(in)616
1009 y(<rest)f(of)g(program>)450 1151 y Gd(has)31 b(the)g(ef)o(fect)e
(of)i(declaring)g(a)f(fr)o(esh)g(type)h F4(Counter)d
Gd(and)j(a)f(variable)g F4(counter)e Gd(of)j(type)450
1251 y F4({new:Counter,get)o(:Co)o(un)o(te)o(r)p FV(!)-6
b F4(Nat,inc:)40 b(Counter)p FV(!)m F4(Counter})m Gd(.)575
1351 y(It)23 b(is)h(instr)o(uctive)g(to)g(compar)o(e)f(the)h(above)f
(with)h(a)f(mor)o(e)g(standar)o(d)f(abstract)h(data)f(type)450
1450 y(declaration,)e(such)h(as)f(might)i(be)e(found)h(in)g(a)g(pr)o
(ogram)f(in)h(Ada)f([oD80)o(])g(or)h(Clu)g([LAB)3265
1420 y F2(+)3319 1450 y Gd(81)o(]:)616 1585 y FT(ADT)40
b(counter)h(=)694 1676 y(type)g(Counter)694 1767 y(representation)i
(Nat)694 1859 y(operations)773 1950 y({new)d(=)g(0)969
2041 y(:)g(Counter,)812 2133 y(get)g(=)g FM(\025)p FT(i:Nat.)g(i)969
2224 y(:)g(Counter)p FO(!)q FT(Nat,)812 2315 y(inc)g(=)g
FM(\025)p FT(i:Nat.)g(succ\(i\)})969 2407 y(:)g(Counter)p
FO(!)q FT(Counter};)616 2589 y(counter.get)i(\(counter.inc)g
(counter.new\);)450 2732 y Gd(The)26 b(version)h(using)g(existential)f
(types)h(is)f(somewhat)h(har)o(der)e(to)i(r)o(ead,)e(compar)o(ed)g(to)i
(the)450 2832 y(syntactically)f(sugar)o(ed)f(second)h(version,)i(but)e
(otherwise)g(the)g(two)h(pr)o(ograms)f(ar)o(e)e(essen-)450
2931 y(tially)d(identical.)575 3031 y(Note)15 b(that)h(we)g(can)f
(substitute)i(an)e(alternative)g(implementation)i(of)f(the)g
F4(Counter)d Gd(ADT)-5 b(\227)450 3131 y(for)31 b(example,)h(one)f
(wher)o(e)f(the)h(internal)g(r)o(epr)o(esentation)f(is)h(a)f(r)o(ecor)o
(d)f(containing)j(a)e F4(Nat)450 3230 y Gd(rather)20
b(than)h(just)g(a)g(single)g F4(Nat)616 3365 y FT(counterADT)42
b(=)734 3456 y({)p Fv(9)p FT(Counter)e(=)g({x:Nat},)773
3548 y({new)g(=)g({x=0},)812 3639 y(get)g(=)g FM(\025)p
FT(i:{x:Nat}.)h(i.x,)812 3730 y(inc)f(=)g FM(\025)p FT(i:{x:Nat}.)h
({x=succ\(i.x\)}}})655 3822 y(as)f({)p Fv(9)p FT(Counter,)812
3913 y({new:)h(Counter,)851 4004 y(get:)g(Counter)p FO(!)q
FT(Nat,)851 4096 y(inc:)g(Counter)p FO(!)q FT(Counter}};)529
4167 y FS(I)616 4177 y FT(counterADT)h(:)d({)p Fv(9)p
FT(Counter,)1204 4268 y({new:Counter,get:Counter)p FO(!)6
b FT(Nat,inc:Counter)p FO(!)s FT(Counter}})450 4422 y
Gd(in)22 b(complete)f(con\002dence)h(that)f(the)g(whole)h(pr)o(ogram)f
(will)h(r)o(emain)e(typesafe,)h(since)g(we)g(ar)o(e)450
4521 y(guaranteed)f(that)i(the)f(r)o(est)g(of)h(the)f(pr)o(ogram)g
(cannot)h(access)f(instances)h(of)f F4(Counter)e Gd(except)450
4621 y(using)j F4(get)d Gd(and)h F4(inc)o Gd(.)26 b(This)21
b(is)g(the)g(essence)g(of)f(data)g(abstraction)g(by)h(information)h
(hiding.)575 4721 y(In)27 b(the)h(body)f(of)g(the)h(pr)o(ogram,)g(the)f
(type)g(name)h F4(Counter)c Gd(can)j(be)g(used)g(just)h(like)g(the)450
4820 y(base)23 b(types)g(built)h(into)g(the)g(language.)33
b(W)-8 b(e)23 b(can)g(de\002ne)h(functions)g(that)f(operate)g(on)h
(coun-)450 4920 y(ters:)p eop
%%Page: 177 178
177 177 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(177)616 683 y FT(let)40
b({Counter,counter}=counterADT)616 774 y(in)616 957 y(let)g(addthree)h
(=)e FM(\025)p FT(c:Counter.)1283 1048 y(counter.inc)j(\(counter.inc)g
(\(counter.inc)g(c\)\))616 1140 y(in)616 1322 y(counter.get)g
(\(addthree)f(counter.new\);)529 1446 y FS(I)616 1456
y FT(3)e(:)h(Nat)450 1638 y Gd(W)-8 b(e)24 b(can)g(even)g(de\002ne)g
(new)g(abstract)f(data)g(types)h(whose)h(r)o(epr)o(esentation)e
(involves)i(coun-)450 1738 y(ters.)54 b(For)31 b(example,)g(the)g
(following)g(pr)o(ogram)f(de\002nes)g(an)g(ADT)h(of)f(\003ip-\003ops,)j
(using)e(a)450 1838 y(counter)21 b(as)f(the)h(\(not)g(very)g(ef)o
(\002cient\))f(r)o(epr)o(esentation)f(type:)616 1995
y FT(let)40 b({Counter,counter})j(=)812 2087 y({)p Fv(9)p
FT(Counter)e(=)e(Nat,)851 2178 y({new)i(=)e(0,)891 2269
y(get)h(=)f FM(\025)p FT(i:Nat.)h(i,)891 2361 y(inc)g(=)f
FM(\025)p FT(i:Nat.)h(succ\(i\)}})734 2452 y(as)f({)p
Fv(9)p FT(Counter,)891 2543 y({new:)h(Counter,)930 2635
y(get:)g(Counter)p FO(!)q FT(Nat,)930 2726 y(inc:)g(Counter)p
FO(!)q FT(Counter}})616 2817 y(in)616 3000 y(let)g({FlipFlop,flipflop})
k(=)812 3091 y({)p Fv(9)p FT(FlipFlop)d(=)f(Counter,)851
3183 y({new)158 b(=)40 b(counter.new,)891 3274 y(read)118
b(=)40 b FM(\025)p FT(c:Counter.)h(iseven)f(\(counter.get)i(c\),)891
3365 y(toggle)e(=)g FM(\025)p FT(c:Counter.)h(counter.inc)h(c,)891
3457 y(reset)79 b(=)40 b FM(\025)p FT(c:Counter.)h(counter.new}})734
3548 y(as)e({)p Fv(9)p FT(FlipFlop,)891 3639 y({new:)158
b(FlipFlop,)930 3731 y(read:)119 b(FlipFlop)p FO(!)q
FT(Bool,)930 3822 y(toggle:)41 b(FlipFlop)p FO(!)q FT(FlipFlop,)930
3913 y(reset:)80 b(FlipFlop)p FO(!)q FT(FlipFlop}})616
4005 y(in)616 4187 y(flipflop.read)42 b(\(flipflop.toggle)h
(\(flipflop.toggle)g(flipflop.new\)\);)529 4311 y FS(I)616
4321 y FT(false)d(:)g(Bool)450 4503 y Ge(20.2.1)18 b(Exercise)h
([Recommended]:)38 b Gd(Follow)32 b(the)f(model)g(of)f(the)h(above)f
(example)g(to)h(de-)450 4603 y(\002ne)20 b(an)f(abstract)f(data)g(type)
h(of)h F7(stacks)f Gd(of)g(numbers,)h(with)g(operations)g
F4(new)n Gd(,)g F4(push)n Gd(,)f F4(pop)o Gd(,)g(and)450
4703 y F4(isempty)m Gd(.)25 b(Use)17 b(the)g F4(List)f
Gd(type)h(intr)o(oduced)g(in)h(Exer)o(cise)e Ge(??)i
Gd(as)f(the)g(underlying)h(r)o(epr)o(esenta-)450 4802
y(tion.)25 b(W)-6 b(rite)17 b(a)g(simple)h(main)f(pr)o(ogram)g(that)g
(cr)o(eates)e(a)i(stack,)h(pushes)f(a)g(couple)g(of)h(numbers)450
4902 y(onto)k(it,)f(pops)g(of)o(f)e(the)i(top)g(element,)g(and)f(r)o
(eturns)h(it.)p eop
%%Page: 178 179
178 178 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(178)575 683 y(This)27
b(exer)o(cise)e(is)i(best)f(done)h(on-line.)44 b(Use)26
b(the)h(checker)f(named)g(\223)p F4(everything)-5 b Gd(\224)26
b(and)450 783 y(copy)18 b(the)g(contents)g(of)g(the)f(\002le)h
F4(test.f)d Gd(fr)o(om)i(the)h F4(everything)13 b Gd(dir)o(ectory)k
(\(which)h(contains)450 882 y(de\002nitions)29 b(of)f(the)g
F4(List)e Gd(constr)o(uctor)j(and)f(associated)f(operations\))h(to)g
(the)h(top)f(of)g(your)450 982 y(own)22 b(input)f(\002le.)2405
b FZ(2)450 1223 y F8(Existential)25 b(Objects)450 1381
y Gd(The)19 b(sequence)f(of)h(\223pack)e(then)i(open\224)g(that)f(we)h
(saw)f(in)h(the)g(last)g(section)g(is)g(the)g(hallmark)f(of)450
1481 y(ADT)-5 b(-style)18 b(pr)o(ogramming)g(using)h(existential)f
(packages.)24 b(A)17 b(package)g(de\002nes)h(an)g(abstract)450
1580 y(type)k(and)g(its)h(associated)f(operations,)h(and)f(each)g
(package)g(is)g(opened)h(immediately)f(after)450 1680
y(it)d(is)h(built,)g(binding)g(a)e(type)h(variable)f(for)h(the)h
(abstract)e(type)h(and)g(exposing)h(the)f(ADT's)g(op-)450
1780 y(erations)24 b(abstractly)-9 b(,)24 b(with)h(this)f(variable)f
(in)i(place)e(of)h(the)g(concr)o(ete)g(r)o(epr)o(esentation)e(type.)450
1879 y(Existential)k(types)g(can)g(also)h(be)f(used)g(to)g(model)h
(other)f(common)i(types)e(of)g(data)g(abstrac-)450 1979
y(tion.)37 b(In)24 b(this)h(section,)h(we)e(show)h(how)g(a)f(simple)h
(form)f(of)g(objects)h(can)f(be)g(understood)h(in)450
2079 y(terms)c(of)g(a)f(dif)o(fer)o(ent)f(idiom)i(based)f(on)h
(existentials.)575 2178 y(W)-8 b(e)32 b(will)g(again)g(use)g(simple)g
(counters)g(as)g(our)g(r)o(unning)i(example,)f(as)f(we)g(did)f(both)450
2278 y(in)f(the)g(pr)o(evious)g(section)g(on)g(existential)g(ADT)-7
b(s)29 b(and)h(in)g(our)g(pr)o(evious)f(encounter)h(with)450
2377 y(objects,)19 b(in)h(Chapter)e(14.)24 b(Unlike)19
b(the)f(counters)i(of)e(Chapter)g(14,)g(however)-6 b(,)19
b(the)g(counter)g(ob-)450 2477 y(jects)g(in)h(this)f(section)h(will)g
(be)e(pur)o(ely)h(functional:)25 b(sending)19 b(the)g(message)g
F4(inc)f Gd(to)h(a)g(counter)450 2577 y(will)j(not)h(change)e(its)h
(internal)g(state)f(in-place,)g(but)h(rather)f(will)h(r)o(eturn)f(a)h
F7(fr)o(esh)f Gd(counter)h(ob-)450 2676 y(ject)f(with)g(incr)o(emented)
g(internal)f(state.)575 2776 y(A)j(counter)g(object,)i(then,)f(will)g
(comprise)g(two)g(basic)f(components:)33 b(a)23 b(number)g(\(its)h(in-)
450 2876 y(ternal)j(state\),)h(and)e(a)h(pair)g(of)g(methods,)i
F4(get)d Gd(and)h F4(inc)o Gd(,)h(that)g(can)e(be)h(used)g(to)h(query)f
(and)450 2975 y(update)32 b(the)h(state.)61 b(W)-8 b(e)33
b(also)g(need)f(to)h(ensur)o(e)g(that)f(the)h(only)h(way)f(that)f(the)h
(state)g(of)f(a)450 3075 y(counter)22 b(object)g(can)f(be)h(queried)f
(or)h(updated)f(is)h(by)f(using)i(one)f(of)g(its)g(two)g(methods.)29
b(This)450 3174 y(can)18 b(be)g(accomplished)h(by)g(wrapping)f(the)h
(state)f(and)g(methods)h(in)g(an)g(existential)f(package,)450
3274 y(abstracting)h(the)g(type)g(of)g(the)g(internal)h(state.)k(For)c
(example,)e(a)h(counter)g(object)h(holding)g(the)450
3374 y(value)g F4(5)h Gd(might)g(be)g(written)616 3525
y FT(c)39 b(=)h({)p Fv(9)p FT(X)f(=)h(Nat,)812 3616 y({state)h(=)e(5,)
851 3707 y(methods)i(=)f({get)g(=)f FM(\025)p FT(x:Nat.)i(x,)1283
3799 y(inc)f(=)f FM(\025)p FT(x:Nat.)i(succ\(x\)}}})655
3890 y(as)f(Counter;)450 4049 y Gd(wher)o(e:)616 4200
y FT(Counter)h(=)e({)p Fv(9)p FT(X,)h({state:X,)h(methods:)g({get:X)p
FO(!)q FT(Nat,)g(inc:X)p FO(!)p FT(X}}};)575 4360 y Gd(T)-8
b(o)32 b(use)g(a)g(method)h(of)f(a)g(counter)g(object,)j(we)d(will)h
(need)f(to)h(open)f(it)h(up)f(and)f(apply)450 4459 y(the)26
b(appr)o(opriate)e(element)i(of)f(its)h F4(methods)d
Gd(to)j(its)g F4(state)e Gd(\002eld.)40 b(For)26 b(example,)g(to)g(get)
g(the)450 4559 y(curr)o(ent)20 b(value)g(of)h F4(c)f
Gd(we)h(can)f(write:)616 4710 y FT(let)40 b({X,body})h(=)e(c)h(in)1008
4801 y(body.methods.get\(body.state\))q(;)529 4910 y
FS(I)616 4920 y FT(5)f(:)h(Nat)p eop
%%Page: 179 180
179 179 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(179)450 683 y(Mor)o(e)18
b(generally)-9 b(,)19 b(we)g(can)g(de\002ne)g(a)g(little)g(function)h
(that)g(\223sends)e(the)i F4(get)e Gd(message\224)g(to)i(any)450
783 y(counter:)616 932 y FT(sendget)41 b(=)e FM(\025)p
FT(c:Counter.)1087 1023 y(let)h({X,body})h(=)e(c)h(in)1087
1115 y(body.methods.get\(body.state\);)529 1219 y FS(I)616
1229 y FT(sendget)h(:)e(Counter)i FO(!)e FT(Nat)450 1401
y Gd(Invoking)31 b(the)e F4(inc)g Gd(method)h(of)f(a)g(counter)h
(object)g(is)g(a)f(little)g(mor)o(e)h(complicated.)51
b(If)29 b(we)450 1500 y(simply)22 b(do)e(the)h(same)g(as)f(for)h
F4(get)o Gd(,)f(the)h(typechecker)f(complains)655 1650
y FT(let)40 b({X,body})h(=)f(c)f(in)1008 1741 y
(body.methods.inc\(body.state\))q(;)529 1845 y FS(I)616
1855 y FT(Error:)i(Scoping)f(error!)450 2027 y Gd(because)19
b(the)g(type)h(variable)e F4(X)h Gd(appears)f(fr)o(ee)h(in)h(the)f
(type)h(of)f(the)h(body)g(of)f(the)h F4(let)o Gd(.)25
b(Indeed,)450 2127 y(what)e(we've)f(written)h(doesn't)g(make)g
(intuitive)g(sense)g(either)-6 b(,)22 b(since)h(the)g(r)o(esult)f(of)g
(the)h F4(inc)450 2227 y Gd(method)18 b(is)h(a)e(\223bar)o(e\224)f
(internal)i(state,)g(not)g(an)g(object.)25 b(T)-8 b(o)19
b(satisfy)e(both)i(the)f(typechecker)f(and)450 2326 y(our)28
b(informal)g(understanding)g(of)g(what)h(invoking)g F4(inc)e
Gd(should)i(do,)g(we)f(must)h(take)e(this)450 2426 y(fr)o(esh)e
(internal)h(state)f(and)g(\223r)o(epackage\224)e(it)j(as)f(a)h(counter)
g(object,)h(using)f(the)g(same)g(r)o(ecor)o(d)450 2526
y(of)21 b(methods)g(and)g(the)f(same)h(internal)g(state)f(type)h(as)f
(in)i(the)e(original)i(object:)616 2675 y FT(c1)40 b(=)f(let)h
({X,body})h(=)f(c)f(in)891 2766 y({)p Fv(9)p FT(X)g(=)g(X,)930
2857 y({state)h(=)g(body.methods.inc\(body.state\),)969
2949 y(methods)h(=)e(body.methods}})655 3040 y(as)h(Counter;)450
3198 y Gd(Mor)o(e)24 b(generally)-9 b(,)25 b(to)h(\223send)e(the)h
F4(inc)f Gd(message\224)g(to)i(an)e(arbitrary)g(counter)h(object,)h(we)
f(can)450 3297 y(write:)616 3446 y FT(sendinc)41 b(=)e
FM(\025)p FT(c:Counter.)1087 3538 y(let)h({X,body})h(=)e(c)h(in)1165
3629 y({)p Fv(9)p FT(X)g(=)f(X,)1204 3720 y({state)i(=)f
(body.methods.inc\(body.state\),)1244 3812 y(methods)h(=)e
(body.methods}})1165 3903 y(as)h(Counter;)529 4007 y
FS(I)616 4017 y FT(sendinc)h(:)e(Counter)i FO(!)e FT(Counter)450
4189 y Gd(Mor)o(e)24 b(complex)i(operations)g(on)g(counters)g(can)f(be)
h(implemented)f(in)i(terms)e(of)h(these)f(two)450 4289
y(basic)20 b(operations:)616 4438 y FT(addthree)41 b(=)f
FM(\025)p FT(c:Counter.)h(sendinc)g(\(sendinc)g(\(sendinc)g(c\)\);)529
4543 y FS(I)616 4553 y FT(addthree)g(:)f(Counter)g FO(!)f
FT(Counter)450 4725 y Ge(20.2.2)18 b(Exercise:)39 b Gd(Implement)19
b F4(FlipFlop)14 b Gd(objects)k(with)g F4(Counter)d Gd(objects)j(as)f
(their)h(internal)450 4824 y(r)o(epr)o(esentation)i(type,)g(following)i
(the)f(model)g(of)g(the)g F4(FlipFlop)c Gd(ADT)k(in)g(Section)g(20.2.)
78 b FZ(2)p eop
%%Page: 180 181
180 180 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(180)450 683 y F8(Objects)25
b(vs.)h(ADT)-11 b(s)450 841 y Gd(What)26 b(we)g(have)g(seen)g(in)h
(Section)f(20.2)f(falls)h(signi\002cantly)h(short)g(of)f(a)g
(full-blown)h(model)450 941 y(of)22 b(object-oriented)h(pr)o
(ogramming.)30 b(Many)22 b(of)g(the)g(featur)o(es)f(that)h(we)h(saw)f
(in)h(Chapter)e(14,)450 1040 y(including)k(subtyping,)g(classes,)g
(inheritance,)g(and)e(r)o(ecursion)h(thr)o(ough)g F4(self)f
Gd(and)g F4(super)n Gd(,)450 1140 y(ar)o(e)f(missing)k(her)o(e.)34
b(W)-8 b(e)24 b(will)h(come)f(back)f(to)h(modeling)h(these)f(featur)o
(es)e(in)j(later)e(chapters,)450 1240 y(when)g(we)e(have)h(added)e(a)i
(few)f(necessary)h(r)o(e\002nements)f(to)i(our)f(modeling)h(language.)
28 b(But)450 1339 y(even)22 b(for)g(the)g(simple)h(objects)g(we)f(have)
f(developed)h(so)g(far)-6 b(,)21 b(ther)o(e)h(ar)o(e)e(several)i(inter)
o(esting)450 1439 y(comparisons)g(to)f(be)f(made)g(with)i(ADT)-7
b(s.)575 1538 y(At)27 b(the)h(coarsest)g(level,)i(the)e(two)g(pr)o
(ogramming)h(idioms)g(fall)e(at)h(opposite)g(ends)g(of)g(a)450
1638 y(spectr)o(um:)c(when)18 b(pr)o(ogramming)g(with)g(ADT)-7
b(s,)17 b(packages)g(ar)o(e)f(opened)h(immediately)g(after)450
1738 y(they)27 b(ar)o(e)e(built;)k(on)e(the)g(other)g(hand,)g(when)g
(packages)f(ar)o(e)f(used)h(to)h(model)g(objects)g(they)450
1837 y(ar)o(e)22 b(kept)h(closed)g(as)f(long)i(as)f(possible\227until)h
(the)g(moment)g(when)f(they)h F7(must)e Gd(be)h(opened)450
1937 y(so)e(that)g(one)g(of)g(the)g(methods)g(can)g(be)f(applied)g(to)h
(the)g(internal)g(state.)575 2037 y(A)26 b(consequence)i(of)f(this)h
(dif)o(fer)o(ence)c(is)k(that)f(the)g(\223abstract)f(type\224)g(of)h
(counters)h(r)o(efers)450 2136 y(to)i(dif)o(fer)o(ent)d(things)k(in)f
(the)g(two)g(styles.)52 b(In)30 b(an)f(ADT)-5 b(-style)30
b(pr)o(ogram,)g(the)g(counter)g(val-)450 2236 y(ues)25
b(manipulated)g(by)h(client)g(code)f(such)g(as)h F4(addthree)c
Gd(ar)o(e)i(elements)h(of)h(the)f(underlying)450 2335
y(r)o(epr)o(esentation)f(type)h(\(e.g.,)g(simple)h(numbers\).)39
b(In)26 b(an)f(object-style)h(pr)o(ogram,)f(a)g(counter)450
2435 y(value)30 b(is)i(a)e(whole)i(package\227not)f(only)h(a)f(number)
-6 b(,)33 b(but)e(also)g(the)h(implementations)g(of)450
2535 y(the)c F4(get)e Gd(and)h F4(inc)f Gd(methods.)47
b(This)28 b(stylistic)h(dif)o(fer)o(ence)c(is)j(r)o(e\003ected)e(in)i
(the)g(fact)f(that,)i(in)450 2634 y(the)f(ADT)f(style,)i(the)f(type)f
F4(Counter)d Gd(is)k(a)f(bound)h(type)f(variable)f(intr)o(oduced)h(by)h
(the)f F4(let)450 2734 y Gd(constr)o(uct,)e(while)f(in)f(the)h(object)g
(style)f F4(Counter)e Gd(abbr)o(eviates)g(the)j(whole)g(existential)f
(type)450 2834 y F4({)p F5(9)p F4(X,)42 b({state:X,)e(methods:)h
({get:X)p FV(!)m F4(Nat,inc:X)p FV(!)l F4(X}}})o Gd(.)25
b(Thus:)575 2987 y F5(\017)41 b Gd(All)24 b(the)i(counter)f(values)f
(generated)g(fr)o(om)h(the)g(counter)g(ADT)g(ar)o(e)f(elements)h(of)g
(the)658 3087 y(same)31 b(internal)h(r)o(epr)o(esentation)f(type;)37
b(ther)o(e)31 b(is)i(a)e(single)i(implementation)g(of)f(the)658
3186 y(counter)21 b(operations)g(that)f(works)i(on)f(this)h(internal)f
(r)o(epr)o(esentation.)575 3346 y F5(\017)41 b Gd(Each)26
b(counter)i(object,)h(on)f(the)f(other)h(hand,)h(carries)d(its)i(own)g
(r)o(epr)o(esentation)e(type)658 3446 y(and)20 b(its)h(own)h(set)e(of)h
(methods)h(that)e(work)i(for)e(this)i(r)o(epr)o(esentation)d(type.)450
3613 y Ge(20.2.3)f(Exercise:)39 b Gd(In)27 b(what)e(ways)h(do)g(the)g
F7(classes)h Gd(found)f(in)g(mainstr)o(eam)f(object-oriented)450
3712 y(languages)f(like)g(C++)h(and)f(Java)f(r)o(esemble)g(the)h
(simple)h(object)f(types)h(discussed)f(her)o(e?)35 b(In)450
3812 y(what)21 b(ways)g(do)g(they)g(r)o(esemble)f(ADT)-7
b(s?)1630 b FZ(2)450 4095 y Gj(20.3)119 b(Encoding)31
b(Existentials)450 4284 y Gd(The)24 b(encoding)h(of)f(pairs)g(as)g(a)g
(polymorphic)h(type)f(in)h(Exer)o(cise)e(19.4.5)f(suggests)j(a)f
(similar)450 4384 y(encoding)g(for)g(existential)g(types)f(in)i(terms)f
(of)f(universal)h(types,)g(using)h(the)f(intuition)h(that)450
4483 y(an)c(element)f(of)h(an)g(existential)g(type)f(is)h(a)g(pair)f
(of)g(a)h(type)f(and)h(a)f(value:)658 4667 y F4({)p F5(9)p
F4(X,T})1028 4620 y FK(def)1038 4667 y FY(=)115 b F5(8)p
F4(Y.)42 b(\()p F5(8)p F4(X.)g(T)p FV(!)o F4(Y\))h FV(!)h
F4(Y)o Gb(:)450 4820 y Gd(That)18 b(is,)i(an)e(existential)h(package)e
(is)i(thought)h(of)e(as)h(a)f(data)f(value)h(that,)h(given)g(a)f(r)o
(esult)g(type)450 4920 y(and)e(a)g(\223continuation,\224)i(calls)e(the)
h(continuation)h(to)f(yield)g(a)f(\002nal)g(r)o(esult.)24
b(The)17 b(continuation)p eop
%%Page: 181 182
181 181 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(181)450 683 y(takes)16
b(two)i(ar)o(guments\227a)e(type)h F4(X)f Gd(and)g(a)h(value)f(of)h
(type)f F4(T)p Gd(\227and)g(uses)h(them)h(in)f(computing)450
783 y(the)k(\002nal)g(r)o(esult.)575 882 y(Given)31 b(this)i(encoding)f
(of)f(existential)h(types,)i(the)d(encoding)h(of)g(the)f(packaging)g
(and)450 982 y(unpackaging)21 b(constr)o(ucts)h(is)f(essentially)g(for)
o(ced.)j(T)-8 b(o)22 b(encode)e(a)g(package)658 1142
y F4({)p F5(9)p F4(X=S,t})40 b(as)j({)p F5(9)p F4(X,T})450
1303 y Gd(we)28 b(must)h(exhibit)f(a)g(value)f(of)h(type)g
F5(8)p F4(Y.)42 b(\()p F5(8)p F4(X.)f(T)p FV(!)p F4(Y\))i
FV(!)g F4(Y)p Gd(.)k(This)29 b(type)f(begins)h(with)f(a)450
1403 y(universal)18 b(quanti\002er)-6 b(,)19 b(the)g(body)g(of)f(which)
i(is)f(an)f(arr)o(ow)-8 b(.)25 b(An)18 b(element)h(of)f(this)i(type)e
(should)450 1502 y(ther)o(efor)o(e)h(begin)i(with)h(two)f
(abstractions:)658 1693 y F4({)p F5(9)p F4(X=S,lt})40
b(as)j({)p F5(9)p F4(X,T})1597 1646 y FK(def)1607 1693
y FY(=)116 b Gb(\025)p F4(Y.)42 b Gb(\025)p F4(f:\()p
F5(8)p F4(X.T)p FV(!)m F4(Y\).)g(...)450 1853 y Gd(T)-8
b(o)25 b(complete)g(the)g(job,)h(we)f(need)f(to)i(r)o(eturn)e(a)g(r)o
(esult)g(of)h(type)g F4(Y)o Gd(;)i(clearly)-9 b(,)24
b(the)h(only)h(way)f(to)450 1953 y(do)h(this)g(is)g(to)f(apply)g
F4(f)h Gd(to)f(some)h(appr)o(opriate)e(ar)o(guments.)39
b(First,)27 b(we)f(supply)f(the)h(type)f F4(S)450 2053
y Gd(\(this)20 b(is)g(a)f(natural)f(choice,)i(being)g(the)g(only)g
(type)f(we)h(have)f(lying)h(ar)o(ound)f(at)g(the)h(moment\):)658
2243 y F4({)p F5(9)p F4(X=S,t})40 b(as)j({)p F5(9)p F4(X,T})1553
2196 y FK(def)1563 2243 y FY(=)116 b Gb(\025)p F4(Y.)43
b Gb(\025)p F4(f:\()p F5(8)p F4(X.T)p FV(!)l F4(Y\).)g(f)g([S])f(...)
450 2404 y Gd(Now)-8 b(,)26 b(the)f(type)g(application)g
F4(f)43 b([S])23 b Gd(has)i(type)g F0(f)p F4(X)k F5(7)p
FV(!)i F4(S)o F0(g)p F4(\(T)p FV(!)o F4(Y\))o Gd(,)26
b(i.e.,)f FY(\()p F0(f)p F4(X)k F5(7)p FV(!)i F4(S)o
F0(g)p F4(T)p FY(\))p FV(!)p F4(Y)o Gd(.)38 b(W)-8 b(e)450
2503 y(can)16 b(thus)h(supply)g F4(t)g Gd(\(which,)g(by)g(r)o(ule)i(T)o
(-)t(P)m F6(A)t(C)t(K)s Gd(,)e(has)f(type)h F0(f)p F4(X)22
b F5(7)p FV(!)h F4(S)p F0(g)p F4(T)o Gd(\))16 b(as)g(the)h(next)g(ar)o
(gument:)658 2694 y F4({)p F5(9)p F4(X=S,t})40 b(as)j({)p
F5(9)p F4(X,T})1553 2647 y FK(def)1563 2694 y FY(=)116
b Gb(\025)p F4(Y.)43 b Gb(\025)p F4(f:\()p F5(8)p F4(X.T)p
FV(!)l F4(Y\).)g(f)g([S])f(t)450 2854 y Gd(The)21 b(type)f(of)h(the)g
(whole)h(application)e F4(f)43 b([S])g(t)20 b Gd(is)h(now)h
F4(Y)o Gd(,)f(as)f(r)o(equir)o(ed.)575 2954 y(T)-8 b(o)21
b(encode)f(the)h(unpacking)h(constr)o(uct)658 3145 y
F4(let)42 b({X,x}=t)1137 3157 y F1(1)1221 3145 y F4(in)h(t)1395
3157 y F1(2)1542 3097 y FK(def)1552 3145 y FY(=)116 b
F4(...)450 3305 y Gd(we)30 b(pr)o(oceed)e(as)i(follows.)54
b(First,)32 b(the)f(typing)f(r)o(ule)i(T)o(-)t(U)t F6(N)t(P)n(A)t(C)t
(K)h Gd(tells)d(us)g(that)g F4(t)3126 3317 y F1(1)3196
3305 y Gd(should)450 3405 y(have)19 b(some)h(type)g F4({)p
F5(9)p F4(X,T)1262 3417 y F1(11)1339 3405 y F4(})p Gd(,)f(that)h
F4(t)1630 3417 y F1(2)1690 3405 y Gd(should)h(have)e(type)g
F4(T)2386 3417 y F1(2)2446 3405 y Gd(\(under)g(an)g(extended)g(context)
450 3504 y(binding)h F4(X)f Gd(and)h F4(x:T)1111 3516
y F1(11)1188 3504 y Gd(\),)f(and)h(that)f F4(T)1624 3516
y F1(2)1684 3504 y Gd(is)h(the)f(type)h(we)f(expect)g(for)g(the)h
(whole)h F4(let...in...)450 3604 y Gd(expr)o(ession.)863
3574 y FK(2)930 3604 y Gd(As)i(in)i(the)e(Chur)o(ch)h(encodings)g(in)g
(Section)g(19.4,)e(the)i(intuition)h(her)o(e)e(is)h(that)450
3704 y(the)f(intr)o(oduction)h(form)f(\()p F4({)p F5(9)p
F4(X=S,t})m Gd(\))f(is)i(encoded)e(as)h(an)g(active)f(value)g(that)h
(\223performs)g(its)450 3803 y(own)31 b(elimination.\224)55
b(So)30 b(the)h(encoding)g(of)f(the)h(elimination)g(form)g(her)o(e)e
(should)i(simply)450 3903 y(take)22 b(the)h(existential)g(package)e
F4(t)1530 3915 y F1(1)1593 3903 y Gd(and)h(apply)h(it)f(to)i(enough)f
(ar)o(guments)g(to)g(yield)f(a)g(r)o(esult)450 4003 y(of)f(the)g(desir)
o(ed)e(type)i F4(T)1199 4015 y F1(2)1240 4003 y Gd(:)658
4193 y F4(let)42 b({X,x}=t)1137 4205 y F1(1)1221 4193
y F4(in)h(t)1395 4205 y F1(2)1542 4146 y FK(def)1552
4193 y FY(=)116 b F4(t)1774 4205 y F1(1)1858 4193 y F4(...)450
4354 y Gd(The)22 b(\002rst)h(ar)o(gument)f(to)h F4(t)1297
4366 y F1(1)1360 4354 y Gd(should)h(be)e(the)g(desir)o(ed)f(r)o(esult)h
(of)h(the)f(whole)h(expr)o(ession,)g(i.e.,)450 4453 y
F4(T)494 4465 y F1(2)534 4453 y Gd(:)658 4633 y F4(let)42
b({X,x}=t)1137 4645 y F1(1)1221 4633 y F4(in)h(t)1395
4645 y F1(2)1542 4586 y FK(def)1552 4633 y FY(=)116 b
F4(t)1774 4645 y F1(1)1858 4633 y F4([T)1946 4645 y F1(2)1986
4633 y F4(])43 b(...)p 450 4683 1200 4 v 540 4739 a FJ(2)570
4762 y F6(Strictly)28 b(speaking,)h(the)e(fact)h(that)f(the)f
(translation)i(r)o(equir)o(es)g(these)f(extra)g(bits)h(of)g(type)f
(information)g(not)450 4841 y(pr)o(esent)d(in)g(the)g(syntax)h(of)g
(terms)f(means)g(that)g(what)g(we)h(ar)o(e)g(translating)g(is)g
(actually)h FI(typing)f(derivations)p F6(,)j(not)450
4920 y(terms.)p eop
%%Page: 182 183
182 182 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)751
b Gd(2)t(0)t(.)29 b(E)t F6(X)t(I)t(S)t(T)t(E)t(N)t(T)t(I)t(A)t(L)c
Gd(T)t F6(Y)t(P)t(E)t(S)752 b Gd(182)450 683 y(Now)-8
b(,)20 b(the)g(application)f F4(t)1277 695 y F1(1)1361
683 y F4([T)1448 695 y F1(2)1489 683 y F4(])g Gd(has)g(type)h
F4(\()p F5(8)p F4(X.)41 b(T)p FV(!)p F4(T)2269 695 y
F1(2)2310 683 y F4(\))i FV(!)h F4(T)2567 695 y F1(2)2608
683 y Gd(.)25 b(That)19 b(is,)h(if)f(we)h(can)f(now)450
783 y(supply)24 b(another)g(ar)o(gument)f(of)h(type)g
F4(\()p F5(8)p F4(X.T)p FV(!)m F4(T)2048 795 y F1(2)2088
783 y F4(\))p Gd(,)g(we)g(will)g(be)g(\002nished.)35
b(Such)24 b(an)f(ar)o(gu-)450 882 y(ment)e(can)g(be)f(obtained)h(by)f
F7(abstracting)h Gd(the)g(body)g F4(t)2155 894 y F1(2)2216
882 y Gd(on)h(the)f(variables)e F4(X)i Gd(and)f F4(x)p
Gd(:)658 1078 y F4(let)42 b({X,x}=t)1137 1090 y F1(1)1221
1078 y F4(in)h(t)1395 1090 y F1(2)1542 1031 y FK(def)1552
1078 y FY(=)116 b F4(t)1774 1090 y F1(1)1858 1078 y F4([T)1946
1090 y F1(2)1986 1078 y F4(])43 b(\()p Gb(\025)p F4(X.)g
Gb(\025)p F4(x:T)2468 1090 y F1(11)2545 1078 y F4(.)g(t)2676
1090 y F1(2)2717 1078 y F4(\))o Gb(:)450 1244 y Gd(This)21
b(\002nishes)h(the)f(encoding.)450 1427 y Ge(20.3.1)d(Exercise:)39
b Gd(What)25 b(must)g(we)f(pr)o(ove)g(to)h(show)g(that)g(our)f
(encoding)i(of)e(existentials)h(is)450 1527 y(corr)o(ect?)2656
b FZ(2)450 1709 y Ge(20.3.2)18 b(Exercise)h([Recommended]:)38
b Gd(T)-8 b(ake)16 b(a)f(blank)h(piece)g(of)g(paper)f(and,)h(without)h
(looking)450 1809 y(at)j(the)h(above)f(encoding,)i(r)o(egenerate)d(it)i
(fr)o(om)f(scratch.)1140 b FZ(2)450 1991 y Ge(20.3.3)18
b(Exercise:)39 b Gd(Can)21 b(universal)g(types)f(be)h(encoded)f(in)h
(terms)g(of)g(existential)g(types?)108 b FZ(2)450 2277
y Gj(20.4)119 b(Implementation)616 2458 y FT(type)40
b(ty)g(=)773 2549 y(...)694 2641 y(|)g(TySome)h(of)e(string)i(*)e(ty)
616 2823 y(type)h(term)g(=)773 2915 y(...)694 3006 y(|)g(TmPack)h(of)e
(info)h(*)g(string)g(*)g(ty)g(*)f(term)h(*)g(ty)694 3097
y(|)g(TmUnpack)h(of)f(info)g(*)f(string)i(*)e(string)i(*)e(term)i(*)e
(term)450 3557 y Gj(20.5)119 b(Historical)28 b(Notes)450
3747 y Gd(The)g(corr)o(espondence)f(between)h(ADT)-7
b(s)28 b(and)f(existential)h(types)h(was)f(\002rst)g(developed)f(by)450
3846 y(Mitchell)20 b(and)g(Plotkin)i([MP88)n(].)j(\(They)20
b(also)h(noticed)f(the)h(corr)o(espondance)e(with)i(objects.\))p
eop
%%Page: 183 184
183 183 bop 450 1306 a F3(Chapter)44 b(21)450 1721 y
Gk(Bounded)52 b(Quanti\002cation)450 2153 y Gd(Many)31
b(of)h(the)g(inter)o(esting)g(pr)o(oblems)g(in)g(type)g(systems)g
(arise)f(fr)o(om)h(the)g F7(combination)f Gd(of)450 2252
y(featur)o(es)26 b(that,)k(in)e(themselves,)i(may)e(be)f(quite)i
(simple.)47 b(In)29 b(this)f(chapter)-6 b(,)29 b(we)f(encounter)450
2352 y(our)21 b(\002rst)g(substantial)g(example:)k(a)20
b(system)h(that)g(mixes)g(subtyping)h(with)f(polymorphism.)575
2451 y(The)g(most)i(basic)e(combination)i(of)e(these)h(featur)o(es)e
(is)i(actually)f(quite)h(straightforwar)o(d.)450 2551
y(W)-8 b(e)21 b(simply)h(add)d(to)i(the)g(subtyping)h(r)o(elation)e(a)h
(r)o(ule)g(for)f(comparing)h(quanti\002ed)g(types:)1666
2676 y F4(S)i FF(<)-17 b(:)24 b F4(T)p 1533 2719 486
4 v 1533 2799 a F5(8)p F4(X.S)d FF(<)-17 b(:)24 b F5(8)p
F4(X.T)450 2921 y Gd(W)-8 b(e)19 b(consider)g(her)o(e)g(a)f(mor)o(e)h
(inter)o(esting)g(combination,)i(in)e(which)h(the)f(syntax,)h(typing,)f
(and)450 3020 y(subtyping)f(r)o(ules)g(for)g(universal)f(quanti\002ers)
h(ar)o(e)e(actually)h(r)o(e\002ned)g(to)h(take)f(subtyping)h(into)450
3120 y(account.)47 b(The)28 b(r)o(esulting)g(notion)h(of)f
Ge(bounded)e(quanti\002cation)f Gd(substantially)j(incr)o(eases)450
3220 y(both)21 b(the)g(expr)o(essive)f(power)h(of)f(the)h(system)h(and)
e(its)h(metatheor)o(etic)f(complexity)-9 b(.)450 3504
y Gj(21.1)119 b(Motivation)450 3693 y Gd(T)-8 b(o)22
b(see)f(why)g(we)h(might)g(want)f(to)g(combine)h(subtyping)g(and)f
(polymorphism)i(in)e(this)h(mor)o(e)450 3793 y(intimate)f(manner)-6
b(,)20 b(consider)h(the)g(identity)g(function)h(on)f(r)o(ecor)o(ds)f
(with)h(a)f(numeric)h(\002eld)g F4(a)p Gd(:)616 3944
y FT(f)39 b(=)h FM(\025)p FT(x:{a:Nat}.)h(x;)529 4053
y FS(I)616 4063 y FT(f)e(:)h({a:Nat})h FO(!)e FT({a:Nat})450
4238 y Gd(If)20 b(we)h(de\002ne)g(a)f(r)o(ecor)o(d)f(of)i(this)g(form)
616 4390 y FT(ra)40 b(=)f({a=0};)450 4550 y Gd(then)29
b(we)f(can)g(apply)g F4(f)g Gd(to)h F4(ra)e Gd(\(in)i(any)f(of)h(the)f
(systems)h(that)g(we)f(have)g(seen\),)i(yielding)e(a)450
4649 y(r)o(ecor)o(d)19 b(of)i(the)g(same)f(form.)616
4801 y FT(\(f)40 b(ra\);)529 4910 y FS(I)616 4920 y FT({a=0})g(:)g
({a:Nat})1888 5169 y Gd(183)p eop
%%Page: 184 185
184 184 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(184)450 683 y(If)20 b(we)h(de\002ne)g(a)f(lar)o(ger)f(r)o(ecor)o
(d)g F4(rab)h Gd(with)i(two)f(\002elds,)f F4(a)h Gd(and)f
F4(b)p Gd(,)616 836 y FT(rab)40 b(=)f({a=0,)i(b=true};)450
998 y Gd(we)29 b(can)g(also)h(apply)f F4(f)g Gd(to)h
F4(rab)n Gd(,)i(using)e(the)g(r)o(ule)f(of)g(subsumption)i(intr)o
(oduced)e(in)h(Chap-)450 1097 y(ter)20 b(12.)616 1250
y FT(\(f)40 b(rab\);)529 1363 y FS(I)616 1373 y FT({a=0,)g(b=true})h(:)
f({a:Nat})450 1550 y Gd(However)-6 b(,)24 b(the)f(type)h(of)f(the)h(r)o
(esult)f(has)h(only)g(the)g(\002eld)f F4(a)p Gd(,)h(which)g(means)g
(that)f(a)g(term)h(like)450 1650 y F4(\(f)43 b(rab\).b)25
b Gd(will)j(be)g(judged)f(ill)h(typed.)46 b(In)28 b(other)g(wor)o(ds,)h
(by)e(passing)h F4(rab)f Gd(thr)o(ough)h(the)450 1750
y(identity)21 b(function,)g(we)g(have)f(lost)i(the)f(ability)g(to)g
(access)f(its)h F4(b)g Gd(\002eld!)575 1849 y(Using)g(the)g
(polymorphism)h(of)f(System)g(F)-8 b(,)21 b(we)g(can)f(write)h
F4(f)f Gd(in)h(a)g(dif)o(fer)o(ent)d(way:)616 2002 y
FT(fpoly)40 b(=)g FM(\025)p FT(X.)f FM(\025)p FT(x:X.)h(x;)529
2115 y FS(I)616 2125 y FT(fpoly)g(:)g Fv(8)p FT(X.)f(X)h
FO(!)f FT(X)450 2302 y Gd(The)32 b(application)f(of)h
F4(fpoly)d Gd(to)j F4(rab)f Gd(\(and)g(an)g(appr)o(opriate)f(type)h(ar)
o(gument\))g(yields)h(the)450 2402 y(desir)o(ed)19 b(r)o(esult:)616
2555 y FT(\(fpoly)41 b([{a:Nat,)g(b:Bool}])g(rab\);)529
2668 y FS(I)616 2678 y FT({a=0,)f(b=true})h(:)f({a:Nat,)h(b:Bool})450
2855 y Gd(But)26 b(in)h(making)h(the)e(type)h(of)f F4(x)g
Gd(into)i(a)e(variable,)g(we)h(have)f(given)g(up)h(some)g(information)
450 2955 y(that)c F4(f)g Gd(might)h(have)e(wanted)h(to)g(use.)32
b(For)23 b(example,)g(suppose)g(we)g(intend)h(that)f
F4(f)f Gd(r)o(eturn)g(a)450 3054 y(pair)e(of)h(its)g(original)g(ar)o
(gument)g(and)f(the)h(numeric)g(successor)g(of)g(its)g
F4(a)f Gd(\002eld.)616 3207 y FT(f2)40 b(=)f FM(\025)p
FT(x:{a:Nat}.)i({orig=x,)g(asucc=succ\(x.a\)};)529 3321
y FS(I)616 3331 y FT(f2)f(:)f({a:Nat})i FO(!)e FT({orig:{a:Nat},)j
(asucc:Nat})450 3507 y Gd(Again,)20 b(we)h(can)f(apply)h
F4(f2)f Gd(to)h(both)g F4(ra)f Gd(and)h F4(rab)n Gd(,)g(losing)h(the)f
F4(b)f Gd(\002eld)h(in)g(the)g(second)g(case.)616 3661
y FT(\(f2)40 b(ra\);)529 3774 y FS(I)616 3784 y FT({orig={a=0},)i
(asucc=1})f(:)f({orig:{a:Nat},)i(asucc:Nat})616 3952
y(\(f2)e(rab\);)529 4081 y FS(I)616 4091 y FT({orig={a=0,b=true},)k
(asucc=1})d(:)e({orig:{a:Nat},)k(asucc:Nat})450 4268
y Gd(But)26 b(this)g(time)h(polymorphism)h(of)o(fers)c(us)j(no)f
(solution.)43 b(If)25 b(we)h(r)o(eplace)f(the)h(type)f(of)h
F4(x)g Gd(by)450 4367 y(a)d(variable)f F4(X)h Gd(as)h(befor)o(e,)e(we)i
(lose)g(the)f(constraint)h(that)g F4(x)f Gd(must)h(have)f(an)g
F4(a)g Gd(\002eld,)h(which)h(is)450 4467 y(r)o(equir)o(ed)19
b(to)i(compute)h(the)e F4(asucc)f Gd(\002eld)i(of)f(the)h(r)o(esult.)
616 4620 y FT(f2poly)41 b(=)e FM(\025)p FT(X.)g FM(\025)p
FT(x:X.)h({orig=x,)h(asucc=succ\(x.a\)};)529 4733 y FS(I)616
4743 y FT(Error:)g(Expected)g(record)f(type)450 4920
y Gd(The)19 b(fact)g(about)g(the)h(operational)f(behavior)g(of)h
F4(f2)e Gd(that)i(we)f(want)h(to)f(expr)o(ess)g(in)h(its)g(type)f(is:)p
eop
%%Page: 185 186
185 185 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(185)658 683 y F4(f2)27 b Gd(takes)h(an)g(ar)o(gument)f(of)i(any)f
(r)o(ecor)o(d)e(type)i F4(R)g Gd(that)g(includes)h(a)e(numeric)i
F4(a)658 783 y Gd(\002eld)20 b(and)g(r)o(eturns)g(as)h(its)g(r)o(esult)
f(a)g(r)o(ecor)o(d)f(containing)j(a)e(\002eld)g(of)h(type)g
F4(R)f Gd(and)g(a)658 882 y(\002eld)g(of)h(type)g F4(Nat)n
Gd(.)450 1048 y(W)-8 b(e)21 b(can)f(use)h(the)g(subtype)g(r)o(elation)f
(to)h(expr)o(ess)f(this)i(concisely)f(as)g(follows:)658
1214 y F4(f2)d Gd(takes)h(an)h(ar)o(gument)f(of)g(any)g(subtype)h
F4(R)f Gd(of)g(the)h(type)f F4({a:Nat})e Gd(and)i(r)o(eturns)658
1314 y(a)h(r)o(ecor)o(d)f(containing)j(a)e(\002eld)h(of)f(type)h
F4(R)f Gd(and)h(a)f(\002eld)h(of)f(type)h F4(Nat)o Gd(.)450
1480 y(This)34 b(intuition)h(can)f(be)f(formalized)f(by)i(intr)o
(oducing)g(a)f Ge(subtyping)f(constraint)g Gd(on)i(the)450
1580 y(bound)21 b(variable)f F4(X)g Gd(of)h F4(f2poly)m
Gd(.)616 1737 y FT(f2poly)41 b(=)e FM(\025)p FT(X<:{a:Nat}.)i
FM(\025)p FT(x:X.)f({orig=x,)h(asucc=succ\(x.a\)};)529
1861 y FS(I)616 1871 y FT(f2poly)g(:)e Fv(8)p FT(X<:{a:Nat}.)i(X)f
FO(!)f FT({orig:X,)i(asucc:Nat})450 2054 y Gd(This)23
b(interaction)g(of)g(subtyping)g(and)g(polymorphism,)h(called)e
Ge(bounded)f(quanti\002cation)p Gd(,)450 2153 y(leads)e(us)h(to)g(a)f
(type)g(system)h(commonly)i(called)c(System)i(F)2357
2165 y Gc(<)-11 b(:)2431 2153 y Gd(\(\223F)19 b(sub\224\),)g(which)h
(is)g(the)g(topic)450 2253 y(of)h(this)g(chapter)-6 b(.)450
2539 y Gj(21.2)119 b(De\002nitions)450 2728 y Gd(W)-8
b(e)25 b(form)f(System)h(F)1129 2740 y Gc(<)-11 b(:)1208
2728 y Gd(by)24 b(combining)i(the)f(types)f(and)g(terms)h(of)f(System)h
(F)f(with)i(the)e(sub-)450 2827 y(type)29 b(r)o(elation)f(fr)o(om)g
(Chapter)g(12)g(and)g(r)o(e\002ning)i(universal)e(quanti\002ers)i(with)
f(subtyping)450 2927 y(constraints)21 b(on)h(their)e(bound)h
(variables.)k(When)c(we)f(de\002ne)h(the)f(subtyping)i(r)o(ule)f(for)f
(these)450 3027 y(bounded)25 b(quanti\002ers,)i(ther)o(e)d(will)i
(actually)f(be)g(two)h(choices:)35 b(a)25 b(mor)o(e)f(tractable)g(but)i
(less)450 3126 y(\003exible)36 b(r)o(ule)g(called)f(the)h
Ge(kernel)e Gd(r)o(ule)i(and)f(a)g(mor)o(e)h(expr)o(essive)e
Ge(full)h Gd(subtyping)i(r)o(ule,)450 3226 y(which)31
b(will)h(turn)f(out)g(to)f(raise)g(some)i(unexpected)d(dif)o
(\002culties)h(when)i(we)e(come)h(to)g(de-)450 3325 y(signing)22
b(typechecking)f(algorithms.)450 3568 y F8(Kernel)j Gh(F)840
3583 y Gc(<)-11 b(:)450 3726 y Gd(Since)23 b(type)g(variables)f(now)i
(have)f(associated)g(bounds)g(\(just)h(as)f(or)o(dinary)f(variables)g
(have)450 3826 y(associated)27 b(types\),)j(we)d(must)i(keep)f(track)f
(of)h(them)g(during)g(both)h(subtyping)g(and)e(type-)450
3926 y(checking.)58 b(W)-8 b(e)31 b(change)g(the)h(type)f(bindings)h
(in)g(contexts)g(to)f(include)h(an)f(upper)g(bound)450
4025 y(for)f(each)f(type)g(variable,)i(and)e(add)g(contexts)h(to)g(all)
g(the)g(r)o(ules)g(in)g(the)g(subtype)g(r)o(elation.)450
4125 y(These)22 b(bounds)g(will)h(be)e(used)h(during)g(subtyping)h(to)f
(justify)h(steps)f(of)g(the)g(form)g(\223the)f(type)450
4224 y(variable)e F4(X)i Gd(is)g(a)f(subtype)h(of)g(the)g(type)f
F4(T)h Gd(because)e(we)i(assumed)g(it)g(was.\224)1616
4351 y F4(X<:T)g F5(2)i Gb(\000)p 1595 4394 361 4 v 1595
4473 a(\000)g F5(`)g F4(X)g FF(<)-17 b(:)24 b F4(T)3100
4413 y Gd(\()r(S)t(-)t(T)t(V)l F6(A)t(R)q Gd(\))450 4655
y Ge(21.2.1)18 b(Exercise)h([Quick)h(check]:)39 b Gd(Exhibit)21
b(a)f(subtyping)i(derivation)e(showing)j(that)658 4821
y F4(B)o(<)-14 b(:)o(Top)o Gb(;)23 b F4(X<)-14 b(:)o(B)p
Gb(;)23 b F4(Y<)-14 b(:)o(X)23 b F5(`)f F4(B)p FV(!)p
F4(Y)h FF(<)-17 b(:)24 b F4(X)p FV(!)o F4(B)p Gb(:)1483
b FZ(2)p eop
%%Page: 186 187
186 186 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(186)575 683 y(Next,)31 b(we)g(intr)o(oduce)e(bounded)h(universal)g
(types,)j(extending)d(the)g(syntax)h(and)e(typ-)450 783
y(ing)h(r)o(ules)g(for)f(or)o(dinary)g(universal)h(types)f(in)h(the)g
(obvious)g(way)-9 b(.)52 b(The)29 b(only)i(r)o(ule)f(wher)o(e)450
882 y(the)22 b(extension)g(is)g(not)g(completely)g(obvious)g(is)g(the)g
(subtyping)g(r)o(ule)g(for)f(quanti\002ed)h(types,)452
982 y(S)t(-)t(A)t F6(L)t(L)q Gd(.)62 b(W)-8 b(e)34 b(give)f(her)o(e)f
(the)i(simpler)f(variant,)i(called)e(the)g Ge(kernel)f
Gd(subtyping)i(r)o(ule)f(for)450 1082 y(universal)23
b(quanti\002ers,)h(in)f(which)h(the)f(bounds)g(of)g(the)g(two)h
(quanti\002ers)f(being)g(compar)o(ed)450 1181 y(must)h(be)e(identical.)
32 b(\(The)22 b(term)h(\223kernel\224)f(comes)h(fr)o(om)g(Car)o(delli)e
(and)i(W)-8 b(egner)6 b('s)23 b(original)450 1281 y(paper)d([CW85)n(],)
g(wher)o(e)g(this)i(variant)e(of)h(F)1834 1293 y Gc(<)-11
b(:)1909 1281 y Gd(was)21 b(called)f Ge(Kernel)f(Fun)p
Gd(.\))1616 1407 y F4(X<:T)i F5(2)i Gb(\000)p 1595 1450
361 4 v 1595 1530 a(\000)g F5(`)g F4(X)g FF(<)-17 b(:)24
b F4(T)3100 1469 y Gd(\()r(S)t(-)t(T)t(V)l F6(A)t(R)q
Gd(\))575 1654 y(For)17 b(easy)g(r)o(efer)o(ence,)f(her)o(e)h(is)g(the)
h(complete)g(de\002nition)g(of)g(kernel)f(F)2770 1666
y Gc(<)-11 b(:)2825 1654 y Gd(,)18 b(with)g(dif)o(fer)o(ences)450
1753 y(fr)o(om)i(pr)o(evious)h(systems)g(highlighted:)450
1928 y Gb(F)491 1898 y Ga(k)491 1948 y F9(<:)560 1928
y Ge(:)26 b(Bounded)20 b(quanti\002cation)1527 b FV(!)35
b F5(8)f F4(<)-14 b(:)3342 1928 y
 gsave currentpoint translate 0 305389 7800 div 855882 7800 div 604894
-7800 div box .9 setgray fill grestore
 3342 1928 a 15 w F7(bq)p
409 2010 9 36 v 418 1980 3000 6 v 3418 1980 38 6 v 3455
2010 9 36 v 450 2099 a(Syntax)592 2230 y F4(t)61 b Gd(::=)1821
b F7(terms)852 2330 y F4(x)1774 b F7(variable)852 2430
y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)852
2529 y F4(t)43 b(t)1687 b F7(application)852 2629 y Gb(\025)p
F4(X)940 2629 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 2629 a 16 w F4(<:T)14 b(.t)1480 b
F7(type)20 b(abstraction)852 2728 y F4(t)43 b([T])1599
b F7(type)20 b(application)592 2928 y F4(v)61 b Gd(::=)1821
b F7(values)852 3027 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)21 b(value)852 3127 y Gb(\025)p F4(X)940
3127 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 3127 a 16 w F4(<:T)14 b(.t)1480 b F7(type)20
b(abstraction)g(value)592 3326 y F4(T)61 b Gd(::=)1821
b F7(types)852 3426 y F4(X)1774 b F7(type)20 b(variable)852
3525 y F4(Top)1686 b F7(maximum)19 b(type)852 3625 y
F4(T)p FV(!)o F4(T)1648 b F7(type)20 b(of)g(functions)852
3725 y F5(8)p F4(X)941 3725 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 941 3725 a 16 w F4(<:T)15
b(.T)1478 b F7(universal)21 b(type)590 3924 y Gb(\000)62
b Gd(::=)1821 b F7(contexts)852 4024 y F5(;)1776 b F7(empty)19
b(context)852 4123 y Gb(\000)5 b(;)17 b F4(x:T)1596 b
F7(term)21 b(variable)g(binding)852 4223 y Gb(\000)5
b(;)17 b F4(X)986 4223 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 986 4223 a 16 w F4(<:T)1536
b F7(type)20 b(variable)h(binding)450 4438 y(Evaluation)p
3096 4350 355 4 v 3096 4463 4 113 v 2304 w F4(t)i F5(\000)-15
b FV(!)23 b F4(t)3398 4408 y FX(0)p 3447 4463 V 3096
4466 355 4 v 1155 4552 a F4(\()p Gb(\025)p F4(x)o(:T)1374
4564 y F1(11)1451 4552 y F4(.t)1538 4564 y F1(12)1615
4552 y F4(\))43 b(v)1746 4564 y F1(2)1810 4552 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2209 4564
y F1(2)2250 4552 y F0(g)p F4(t)2320 4564 y F1(12)3113
4553 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1602
4691 y F4(t)1645 4703 y F1(1)1709 4691 y F5(\000)-14
b FV(!)23 b F4(t)1917 4661 y FX(0)1909 4714 y F1(1)p
1474 4734 604 4 v 1474 4814 a F4(t)1518 4826 y F1(1)1602
4814 y F4(t)1645 4826 y F1(2)1709 4814 y F5(\000)-14
b FV(!)23 b F4(t)1917 4784 y FX(0)1909 4837 y F1(1)1994
4814 y F4(t)2037 4826 y F1(2)3105 4753 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))p eop
%%Page: 187 188
187 187 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(187)1602 670 y F4(t)1645 682 y F1(2)1709 670 y F5(\000)-14
b FV(!)23 b F4(t)1917 640 y FX(0)1909 693 y F1(2)p 1474
713 604 4 v 1474 792 a F4(v)1518 804 y F1(1)1602 792
y F4(t)1645 804 y F1(2)1709 792 y F5(\000)-14 b FV(!)23
b F4(v)1909 804 y F1(1)1994 792 y F4(t)2045 762 y FX(0)2037
816 y F1(2)3105 732 y Gd(\()r(E)t(-)t(A)t F6(P)t(P)t
Gd(2)q(\))1074 932 y F4(\()p Gb(\025)p F4(X)1206 932
y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1206 932 a 16 w F4(<:T)1353 944 y F1(11)1445 932 y
F4(.t)1532 944 y F1(12)1609 932 y F4(\))43 b([T)1784
944 y F1(2)1824 932 y F4(])23 b F5(\000)-15 b FV(!)24
b F0(f)p F4(X)e F5(7)p FV(!)h F4(T)2290 944 y F1(2)2331
932 y F0(g)p F4(t)2401 944 y F1(12)3067 933 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(2\))1602 1071 y F4(t)1645 1083 y F1(1)1709
1071 y F5(\000)-14 b FV(!)23 b F4(t)1917 1041 y FX(0)1909
1094 y F1(1)p 1387 1114 778 4 v 1387 1193 a F4(t)1431
1205 y F1(1)1515 1193 y F4([T)1602 1205 y F1(2)1642 1193
y F4(])g F5(\000)-14 b FV(!)23 b F4(t)1917 1164 y FX(0)1909
1217 y F1(1)1994 1193 y F4([T)2081 1205 y F1(2)2121 1193
y F4(])3102 1133 y Gd(\()r(E)t(-)t(T)n(A)t F6(P)t(P)q
Gd(\))450 1365 y F7(Subtyping)p 3024 1266 426 4 v 3024
1405 4 140 v 3052 1365 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 3052 1365 a 16 w Gb(\000)g F5(`)16
b F4(S)22 b FF(<)-17 b(:)24 b F4(T)p 3447 1405 4 140
v 3024 1408 426 4 v 1591 1506 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1591 1506 a 16 w Gb(\000)f
F5(`)15 b F4(S)23 b FF(<)-17 b(:)24 b F4(S)3129 1505
y Gd(\()r(S)t(-)t(R)t F6(E)t(FL)q Gd(\))1324 1649 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1324
1649 a 15 w Gb(\000)f F5(`)16 b F4(S)22 b FF(<)-17 b(:)24
b F4(U)1859 1649 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 1649 a 16 w Gb(\000)f F5(`)15
b F4(U)23 b FF(<)-17 b(:)24 b F4(T)p 1324 1692 905 4
v 1591 1775 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1591 1775 a 16 w Gb(\000)f F5(`)15 b F4(S)23
b FF(<)-17 b(:)24 b F4(T)3058 1711 y Gd(\()r(S)t(-)t(T)t
F6(R)t(A)t(N)t(S)q Gd(\))1548 1918 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1548 1918 a 15 w
Gb(\000)f F5(`)16 b F4(S)22 b FF(<)-17 b(:)24 b F4(Top)3161
1917 y Gd(\()r(S)t(-)t(T)s F6(O)t(P)q Gd(\))1561 2137
y
 gsave currentpoint translate 0 851966 7800 div 3386120 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1561 2137 a 1616 2081 a F4(X<:T)d F5(2)i Gb(\000)p
1595 2118 361 4 v 1595 2190 a(\000)g F5(`)g F4(X)g FF(<)-17
b(:)24 b F4(T)3100 2137 y Gd(\()r(S)t(-)t(T)t(V)l F6(A)t(R)q
Gd(\))1243 2358 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1243 2358 a 15 w Gb(\000)f F5(`)16
b F4(T)1436 2370 y F1(1)1500 2358 y FF(<)-17 b(:)24 b
F4(S)1652 2370 y F1(1)1859 2358 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 2358 a 16 w Gb(\000)f
F5(`)15 b F4(S)2053 2370 y F1(2)2116 2358 y FF(<)-17
b(:)24 b F4(T)2269 2370 y F1(2)p 1243 2401 1067 4 v 1384
2484 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1384 2484 a 15 w Gb(\000)f F5(`)16 b F4(S)1577
2496 y F1(1)1618 2484 y FV(!)p F4(S)1744 2496 y F1(2)1808
2484 y FF(<)-17 b(:)24 b F4(T)1961 2496 y F1(1)2001 2484
y FV(!)p F4(T)2128 2496 y F1(2)3023 2420 y Gd(\()r(S)t(-)t(A)t
F6(R)t(R)t(O)t(W)r Gd(\))1216 2703 y
 gsave currentpoint translate 0 851966 7800 div 8833982 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1216 2703 a 1424
2647 a Gb(\000)6 b(;)17 b F4(X<:)o(U)1690 2659 y F1(1)1753
2647 y F5(`)23 b F4(S)1871 2659 y F1(2)1934 2647 y FF(<)-17
b(:)24 b F4(T)2087 2659 y F1(2)p 1250 2684 1052 4 v 1250
2757 a Gb(\000)f F5(`)g(8)p F4(X<:)n(U)1613 2769 y F1(1)1653
2757 y F4(.S)1740 2769 y F1(2)1804 2757 y FF(<)-17 b(:)24
b F5(8)p F4(X<:)n(U)2133 2769 y F1(1)2174 2757 y F4(.T)2261
2769 y F1(2)3157 2703 y Gd(\()r(S)t(-)t(A)t F6(L)t(L)p
Gd(\))450 2936 y F7(T)-8 b(yping)p 3067 2854 383 4 v
3067 2961 4 108 v 2408 w Gb(\000)22 b F5(`)h F4(t)g FF(:)g
F4(T)p 3447 2961 V 3067 2964 383 4 v 1637 3058 a(x:T)f
F5(2)i Gb(\000)p 1613 3101 327 4 v 1613 3181 a(\000)f
F5(`)f F4(x)h FF(:)g F4(T)3152 3120 y Gd(\()r(T)o(-)t(V)l
F6(A)t(R)r Gd(\))1464 3320 y Gb(\000)5 b(;)18 b F4(x:T)1685
3332 y F1(1)1749 3320 y F5(`)23 b F4(t)1866 3332 y F1(2)1930
3320 y FF(:)g F4(T)2048 3332 y F1(2)p 1359 3363 835 4
v 1359 3443 a Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676
3455 y F1(1)1717 3443 y F4(.t)1804 3455 y F1(2)1867 3443
y FF(:)i F4(T)1985 3455 y F1(1)2026 3443 y FV(!)p F4(T)2152
3455 y F1(2)3160 3382 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q
Gd(\))1148 3582 y Gb(\000)e F5(`)h F4(t)1333 3594 y F1(1)1396
3582 y FF(:)h F4(T)1514 3594 y F1(11)1591 3582 y FV(!)p
F4(T)1718 3594 y F1(12)1961 3582 y Gb(\000)f F5(`)f F4(t)2146
3594 y F1(2)2209 3582 y FF(:)i F4(T)2327 3594 y F1(11)p
1148 3625 1257 4 v 1490 3705 a Gb(\000)f F5(`)g F4(t)1676
3717 y F1(1)1760 3705 y F4(t)1803 3717 y F1(2)1867 3705
y FF(:)g F4(T)1985 3717 y F1(12)3155 3644 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1345 3848 y Gb(\000)g F5(`)g F4(t)f
FF(:)i F4(S)1837 3848 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1837 3848 a 16 w Gb(\000)f F5(`)16
b F4(S)22 b FF(<)-17 b(:)24 b F4(T)p 1345 3891 862 4
v 1613 3970 a Gb(\000)f F5(`)f F4(t)h FF(:)g F4(T)3164
3910 y Gd(\()r(T)o(-)t(S)t F6(U)t(B)q Gd(\))1426 4109
y Gb(\000)6 b(;)17 b F4(X)1561 4109 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1561 4109 a 1576
4110 a F4(<:T)1707 4122 y F1(1)1786 4109 y F5(`)23 b
F4(t)1904 4121 y F1(2)1967 4109 y FF(:)h F4(T)2085 4121
y F1(2)p 1237 4153 1079 4 v 1237 4232 a Gb(\000)f F5(`)f
Gb(\025)p F4(X)1467 4232 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1467 4232 a 16 w F4(<:T)1614
4244 y F1(1)1670 4232 y F4(.t)1757 4244 y F1(2)1821 4232
y FF(:)h F5(8)p F4(X)1985 4232 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1985 4232 a 15 w F4(<:T)2131
4244 y F1(1)2187 4232 y F4(.T)2275 4244 y F1(2)3111 4172
y Gd(\()r(T)o(-)t(T)n(A)t F6(B)t(S)q Gd(\))1030 4375
y Gb(\000)g F5(`)g F4(t)1215 4387 y F1(1)1279 4375 y
FF(:)g F5(8)p F4(X)1443 4375 y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1443 4375 a 16 w F4(<:T)1589
4387 y F1(11)1682 4375 y F4(.T)1769 4387 y F1(12)2012
4375 y
 gsave currentpoint translate 0 222821 7800 div 4024298 7800 div 579629
-7800 div box .9 setgray fill grestore
 2012 4375 a 16 w Gb(\000)g F5(`)f F4(T)2213 4387
y F1(2)2277 4375 y FF(<)-17 b(:)24 b F4(T)2429 4387 y
F1(11)p 1030 4418 1492 4 v 1292 4498 a Gb(\000)f F5(`)f
F4(t)1477 4510 y F1(1)1561 4498 y F4([T)1648 4510 y F1(2)1689
4498 y F4(])g FF(:)i F0(f)p F4(X)e F5(7)p FV(!)h F4(T)2073
4510 y F1(2)2113 4498 y F0(g)p F4(T)2183 4510 y F1(12)3106
4437 y Gd(\()r(T)o(-)t(T)n(A)t F6(P)t(P)r Gd(\))p 409
4567 9 36 v 418 4567 3000 6 v 3418 4567 38 6 v 3455 4567
9 36 v eop
%%Page: 188 189
188 188 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(188)450 683 y F8(Full)26 b Gh(F)713 698 y Gc(<)-11
b(:)450 841 y Gd(In)20 b(kernel)f(F)842 853 y Gc(<)-11
b(:)897 841 y Gd(,)20 b(two)g(quanti\002ed)g(types)f(can)g(only)i(be)e
(compar)o(ed)f(if)i(their)f(upper)g(bounds)h(ar)o(e)450
941 y(identical.)47 b(If)28 b(we)g(think)h(of)f(quanti\002ers)h(as)e(a)
h(kind)g(of)g(arr)o(ow)g(types)g(\(since)g(they)g(classify)450
1040 y(functions)e(fr)o(om)f(types)h(to)f(terms\),)h(then)g(the)f
(kernel)h(r)o(ule)f(corr)o(esponds)g(to)h(a)f(\223covariant\224)450
1140 y(version)e(of)f(the)h(subtyping)g(r)o(ule)f(for)g(arr)o(ows,)g
(in)h(which)g(the)g(domain)f(of)h(an)f(arr)o(ow)f(type)i(is)450
1240 y(not)e(allowed)g(to)g(vary)f(in)i(subtypes:)1626
1366 y F4(S)1669 1378 y F1(2)1733 1366 y FF(<)-17 b(:)24
b F4(T)1886 1378 y F1(2)p 1499 1409 554 4 v 1499 1489
a F4(U)p FV(!)p F4(S)1669 1501 y F1(2)1733 1489 y FF(<)-17
b(:)24 b F4(U)p FV(!)p F4(T)2012 1501 y F1(2)450 1612
y Gd(This)30 b(r)o(estriction)f(feels)g(rather)g(unnatural,)h(both)g
(for)f(arr)o(ows)g(and)g(for)g(quanti\002ers.)52 b(Car)o(-)450
1712 y(rying)30 b(the)g(analogy)f(a)h(little)f(further)-6
b(,)31 b(we)f(can)f(allow)h(the)g(\223left-hand)e(side\224)h(of)g
(bounded)450 1812 y(quanti\002ers)21 b(to)g(vary)g(\(contravariantly\))
e(during)i(subtyping:)450 2077 y Gb(F)491 2033 y Ga(f)491
2085 y F9(<:)560 2077 y Ge(:)26 b(\223Full\224)19 b(bounded)g
(quanti\002cation)1126 b FV(!)35 b F5(8)f F4(<)-14 b(:)34
b F7(bq)3303 2077 y
 gsave currentpoint translate 0 305389 7800 div 1159961 7800 div 604894
-7800 div box .9 setgray fill grestore
 3303 2077 a 16 w F7(full)p 409 2159
9 36 v 418 2130 3000 6 v 3418 2130 38 6 v 3455 2159 9
36 v 450 2273 a(New)21 b(subtyping)f(rules)p 3033 2190
418 4 v 3033 2298 4 108 v 1909 w Gb(\000)j F5(`)g F4(S)f
FF(<)-17 b(:)24 b F4(T)p 3447 2298 V 3033 2301 418 4
v 1089 2398 a
 gsave currentpoint translate 0 222821 7800 div 3737298 7800 div 579629
-7800 div box .9 setgray fill grestore
 1089 2398 a 16 w Gb(\000)f F5(`)f F4(T)1290
2410 y F1(1)1354 2398 y FF(<)-17 b(:)24 b F4(S)1506 2410
y F1(1)1728 2398 y Gb(\000)6 b(;)17 b F4(X<:)1950 2398
y
 gsave currentpoint translate 0 222821 7800 div 912865 7800 div 525016
-7800 div box .9 setgray fill grestore
 1950 2398 a 16 w F4(T)2009 2410 y F1(1)2089 2398 y
F5(`)23 b F4(S)2206 2410 y F1(2)2270 2398 y FF(<)-17
b(:)24 b F4(T)2422 2410 y F1(2)p 1089 2442 1374 4 v 1219
2521 a Gb(\000)f F5(`)g(8)p F4(X<:)1537 2521 y
 gsave currentpoint translate 0 222821 7800 div 912865 7800 div 525016
-7800 div box .9 setgray fill grestore
 1537 2521
a 16 w F4(S)1597 2533 y F1(1)1653 2521 y F4(.S)1740 2533
y F1(2)1804 2521 y FF(<)-17 b(:)24 b F5(8)p F4(X<:)2090
2521 y
 gsave currentpoint translate 0 222821 7800 div 912865 7800 div 525016
-7800 div box .9 setgray fill grestore
 2090 2521 a 15 w F4(T)2149 2533 y F1(1)2205 2521
y F4(.T)2292 2533 y F1(2)3157 2461 y Gd(\()r(S)t(-)t(A)t
F6(L)t(L)p Gd(\))p 409 2590 9 36 v 418 2590 3000 6 v
3418 2590 38 6 v 3455 2590 9 36 v 575 2756 a(Intuitively)-9
b(,)32 b(the)f(\223full)f(F)1394 2768 y Gc(<)-11 b(:)1448
2756 y Gd(\224)30 b(quanti\002er)h(subtyping)g(r)o(ule)f(can)g(be)g
(understood)g(as)g(fol-)450 2855 y(lows.)43 b(A)25 b(type)i
F4(T)32 b FY(=)h F5(8)p F4(X<:T)1360 2867 y F1(1)1400
2855 y F4(.T)1487 2867 y F1(2)1554 2855 y Gd(describes)26
b(a)f(collection)i(of)g(polymorphic)g(values)f(\(func-)450
2955 y(tions)f(fr)o(om)f(types)g(to)g(values\),)g(each)g(mapping)g
(subtypes)g(of)h F4(T)2527 2967 y F1(1)2592 2955 y Gd(to)f(instances)h
(of)f F4(T)3189 2967 y F1(2)3230 2955 y Gd(.)35 b(If)24
b F4(T)3409 2967 y F1(1)450 3055 y Gd(is)g(a)f(subtype)h(of)g
F4(S)1057 3067 y F1(1)1097 3055 y Gd(,)h(then)f(the)g(domain)g(of)g
F4(T)f Gd(is)h(smaller)g(than)g(that)g(of)g F4(S)k FY(=)g
F5(8)p F4(X<:S)3156 3067 y F1(1)3196 3055 y F4(.S)3284
3067 y F1(2)3324 3055 y Gd(,)c(so)450 3154 y F4(S)19
b Gd(is)g(a)g(str)o(onger)g(constraint)h(and)f(describes)f(a)h(smaller)
g(collection)h(of)f(polymorphic)i(values.)450 3254 y(Mor)o(eover)-6
b(,)17 b(if,)h(for)g(each)f(type)h F4(U)g Gd(that)g(is)g(an)g
(acceptable)e(ar)o(gument)h(to)i(the)f(functions)h(in)f(both)450
3354 y(collections)28 b(\(i.e.,)e(one)h(that)f(satis\002es)h(the)g(mor)
o(e)f(stringent)h(r)o(equir)o(ement)f F4(U)33 b FF(<)-17
b(:)34 b F4(T)3121 3366 y F1(1)3161 3354 y Gd(\),)27
b(the)g F4(U)o Gd(-)450 3453 y(instance)22 b(of)f F4(S)911
3465 y F1(2)972 3453 y Gd(is)h(a)f(subtype)g(of)h(the)f
F4(U)p Gd(-instance)g(of)h F4(T)2194 3465 y F1(2)2235
3453 y Gd(,)f(then)h F4(S)f Gd(is)g(a)g(\223pointwise)h(str)o(onger)6
b(\224)450 3553 y(constraint)21 b(and)g(again)f(describes)g(a)h
(smaller)f(collection)i(of)f(polymorphic)h(values.)575
3652 y(The)29 b(system)h(with)h(just)f(the)g(kernel)g(subtyping)g(r)o
(ule)g(for)f(quanti\002ed)h(types)g(is)g(called)450 3752
y(Kernel)18 b(F)759 3764 y Gc(<)-11 b(:)832 3752 y Gd(\(or)18
b Gb(F)997 3722 y Ga(k)997 3773 y F9(<:)1045 3752 y Gd(\).)25
b(The)18 b(same)f(system)i(with)g(the)f(full)g(quanti\002er)g
(subtyping)h(r)o(ule)f(is)h(called)450 3871 y(Full)i(F)661
3883 y Gc(<)-11 b(:)737 3871 y Gd(\(or)20 b Gb(F)904
3826 y Ga(f)904 3879 y F9(<:)953 3871 y Gd(\).)25 b(The)c(bar)o(e)e
(name)i(F)1636 3883 y Gc(<)-11 b(:)1711 3871 y Gd(r)o(efers)19
b(ambiguously)j(to)f(both)h(systems.)450 4054 y Ge(21.2.2)c(Exercise)h
([Quick)h(check]:)39 b Gd(Give)19 b(a)f(couple)h(of)f(examples)h(of)f
(pairs)g(of)h(types)g(that)f(ar)o(e)450 4153 y(r)o(elated)h(by)i(the)g
(subtype)g(r)o(elation)f(of)h(full)f(F)1877 4165 y Gc(<)-11
b(:)1953 4153 y Gd(but)21 b(ar)o(e)e(not)j(subtypes)f(in)g(kernel)g(F)
3113 4165 y Gc(<)-11 b(:)3167 4153 y Gd(.)206 b FZ(2)450
4336 y Ge(21.2.3)18 b(Exercise)h([Challenging]:)38 b
Gd(Can)27 b(you)i(\002nd)f(any)f F7(useful)i Gd(examples)e(with)i(this)
f(pr)o(op-)450 4436 y(erty?)2761 b FZ(2)p eop
%%Page: 189 190
189 189 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(189)450 686 y Gj(21.3)119 b(Examples)450 875 y Gd(W)-8
b(e)18 b(now)h(pr)o(esent)e(some)i(simple)f(examples)g(of)g(pr)o
(ogramming)g(in)h(F)2652 887 y Gc(<)-11 b(:)2706 875
y Gd(.)25 b(Mor)o(e)17 b(sophisticated)450 975 y(uses)k(of)g(bounded)f
(quanti\002cation)i(will)g(appear)d(in)i(later)f(chapters.)450
1216 y F8(Encoding)26 b(Products)450 1374 y Gd(In)d(Exer)o(cise)e
Ge(??)p Gd(,)i(we)f(gave)g(the)h(following)h(encoding)f(of)f(pairs)h
(in)g(System)f(F)-8 b(.)23 b(The)g(elements)450 1473
y(of)e(the)g(type)616 1623 y FT(Pair)40 b(T)851 1632
y FL(1)928 1623 y FT(T)967 1632 y FL(2)1044 1623 y FT(=)g
Fv(8)p FT(X.)f(\(T)1361 1632 y FL(1)1399 1623 y FO(!)p
FT(T)1515 1632 y FL(2)1553 1623 y FO(!)p FT(X\))g FO(!)g
FT(X;)450 1782 y Gd(corr)o(espond)17 b(to)i(pairs)e(of)h
F4(T)1309 1794 y F1(1)1368 1782 y Gd(and)f F4(T)1570
1794 y F1(2)1610 1782 y Gd(.)25 b(The)17 b(constr)o(uctor)i
F4(pair)d Gd(and)i(the)g(destr)o(uctors)g F4(fst)e Gd(and)450
1881 y F4(snd)k Gd(wer)o(e)f(de\002ned)i(as)f(follows:)616
2032 y FT(pair)40 b(=)g FM(\025)p FT(X.)f FM(\025)p FT(Y.)g
FM(\025)p FT(x:X.)h FM(\025)p FT(y:Y.)969 2123 y(\()118
b FM(\025)p FT(R.)39 b FM(\025)p FT(p:X)p FO(!)q FT(Y)p
FO(!)p FT(R.)g(p)h(x)f(y)1008 2214 y(as)h(Pair)g(X)g(Y\);)616
2379 y(fst)g(=)f FM(\025)p FT(X.)h FM(\025)p FT(Y.)f
FM(\025)p FT(p:)g(Pair)i(X)e(Y.)930 2470 y(p)g([X])h(\()p
FM(\025)p FT(x:X.)g FM(\025)p FT(y:Y.)g(x\);)616 2635
y(snd)g(=)f FM(\025)p FT(X.)h FM(\025)p FT(Y.)f FM(\025)p
FT(p:)g(Pair)i(X)e(Y.)930 2726 y(p)g([Y])h(\()p FM(\025)p
FT(x:X.)g FM(\025)p FT(y:Y.)g(y\);)450 2900 y Gd(Of)22
b(course,)g(the)g(same)g(encoding)h(can)e(be)h(used)g(in)g(F)2153
2912 y Gc(<)-11 b(:)2208 2900 y Gd(,)22 b(since)g(F)2503
2912 y Gc(<)-11 b(:)2580 2900 y Gd(contains)23 b(all)f(the)g(featur)o
(es)450 2999 y(of)17 b(System)g(F)-8 b(.)17 b(What)g(is)g(inter)o
(esting,)g(though,)i(is)e(that)g(this)h(encoding)f(also)g(has)g(some)h
(natural)450 3099 y(subtyping)k(pr)o(operties.)i(In)d(fact,)f(the)h
(expected)e(subtyping)j(r)o(ule)f(for)f(pairs)1251 3223
y Gb(\000)j F5(`)g F4(S)1436 3235 y F1(1)1500 3223 y
FF(<)-17 b(:)24 b F4(T)1652 3235 y F1(1)1859 3223 y Gb(\000)f
F5(`)g F4(S)2044 3235 y F1(2)2108 3223 y FF(<)-17 b(:)24
b F4(T)2260 3235 y F1(2)p 1209 3266 1134 4 v 1209 3346
a Gb(\000)f F5(`)g F4(Pair)42 b(S)1613 3358 y F1(1)1697
3346 y F4(S)1740 3358 y F1(2)1804 3346 y FF(<)-17 b(:)24
b F4(Pair)42 b(T)2174 3358 y F1(1)2258 3346 y F4(T)2302
3358 y F1(2)450 3468 y Gd(follows)22 b(dir)o(ectly)e(fr)o(om)g(the)h
(encoding.)450 3641 y Ge(21.3.1)d(Exercise)h([Quick)h(check]:)39
b Gd(Show)21 b(this.)1414 b FZ(2)450 3882 y F8(Encoding)26
b(Records)450 4040 y Gd(It)32 b(is)g(inter)o(esting)h(to)f(notice)h
(that)f(r)o(ecor)o(ds)e(and)i(r)o(ecor)o(d)e(types\227including)j
(subtyping\227)450 4139 y(can)28 b(actually)g(be)g(encoded)g(in)h(the)f
(pur)o(e)g(calculus.)48 b(The)28 b(encoding)h(pr)o(esented)f(her)o(e)f
(was)450 4239 y(discover)o(ed)19 b(by)i(Car)o(delli)f([Car92)n(].)25
b(W)-8 b(e)21 b(begin)g(by)f(de\002ning)i Ge(\003exible)c(tuples)h
Gd(as)h(follows:)450 4398 y Ge(21.3.2)e(De\002nition:)40
b Gd(For)21 b(each)f Gb(n)j F5(\025)g Gb(0)e Gd(and)f(types)h
F4(T)2117 4410 y F1(1)2178 4398 y Gd(thr)o(ough)g F4(T)2539
4410 y F1(n)2590 4398 y Gd(,)g(let)699 4586 y F4({T)786
4598 y F1(i)828 4556 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)984
4586 y F4(})1051 4539 y FK(def)1061 4586 y FY(=)33 b
F4(Pair)42 b(T)1418 4598 y F1(1)1502 4586 y F4(\(Pair)g(T)1807
4598 y F1(2)1891 4586 y F4(...)h(\(Pair)e(T)2371 4598
y F1(n)2466 4586 y F4(Top\)...\))l Gb(:)450 4743 y Gd(In)21
b(particular)-6 b(,)19 b F4({})j FY(=)h F4(Top)o Gd(.)j(Similarly)-9
b(,)20 b(for)g(terms)h F4(t)2082 4755 y F1(1)2143 4743
y Gd(thr)o(ough)g F4(t)2504 4755 y F1(n)2555 4743 y Gd(,)g(let)699
4931 y F4({t)786 4943 y F1(i)828 4901 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)984 4931 y F4(})1051 4884 y FK(def)1061
4932 y FY(=)1157 4931 y F4(pair)42 b(t)1418 4943 y F1(1)1502
4931 y F4(\(pair)g(t)1807 4943 y F1(2)1891 4931 y F4(...)h(\(pair)e(t)
2371 4943 y F1(n)2466 4931 y F4(top\)...\))l Gb(;)p eop
%%Page: 190 191
190 190 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(190)450 683 y(wher)o(e)18 b(we)h(elide)g(the)g(type)g(ar)o
(guments)g(to)g F4(pair)o Gd(,)g(for)g(the)g(sake)g(of)g(br)o(evity)-9
b(.)24 b(\(Recall)18 b(that)h F4(top)450 783 y Gd(is)i(just)h(some)f
(element)g(of)g F4(Top)n Gd(.\))26 b(The)20 b(pr)o(ojection)h
F4(t.n)f Gd(\(again)g(eliding)h(type)g(ar)o(guments\))f(is:)658
949 y F4(fst\()12 b(snd\(snd...\(snd)846 989 y FV(|)p
883 989 231 9 v 231 w({z)p 1188 989 V 231 w(})1036 1063
y FB(n)p Fy(-)p FB(1)e Fs(times)1470 949 y F4(t\)...\))1660
b FZ(2)450 1210 y Gd(Fr)o(om)25 b(this)h(abbr)o(eviation,)f(we)g
(immediately)g(obtain)g(the)g(following)i(r)o(ules)e(for)g(subtyping)
450 1310 y(and)20 b(typing.)1481 1436 y Gb(\000)j F5(`)1610
1406 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1789 1436 y
F4(S)1833 1448 y F1(i)1887 1436 y FF(<)-17 b(:)24 b F4(T)2040
1448 y F1(i)p 1270 1479 1013 4 v 1270 1559 a Gb(\000)e
F5(`)h F4({S)1498 1571 y F1(i)1540 1529 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1778 1559 y F4(})22
b FF(<)-17 b(:)24 b F4({T)2041 1571 y F1(i)2082 1529
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2239 1559 y F4(})1498
1692 y Gb(\000)23 b F5(`)1627 1662 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1806 1692 y F4(t)1850 1704 y F1(i)1904 1692
y FF(:)24 b F4(T)2022 1704 y F1(i)p 1328 1735 897 4 v
1328 1815 a Gb(\000)f F5(`)f F4({t)1556 1827 y F1(i)1598
1785 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1754 1815 y
F4(})23 b FF(:)g F4({T)1983 1827 y F1(i)2024 1785 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2181 1815 y F4(})1470 1948
y Gb(\000)23 b F5(`)g F4(t)g FF(:)g F4({T)1840 1960 y
F1(i)1882 1918 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2038
1948 y F4(})p 1470 1991 612 4 v 1554 2070 a Gb(\000)22
b F5(`)h F4(t.i)f FF(:)h F4(T)1967 2082 y F1(i)575 2194
y Gd(Now)-8 b(,)22 b(let)g F5(L)g Gd(be)f(a)g(countable)h(set)g(of)g
(labels,)f(with)h(a)g(\002xed)f(total)h(or)o(dering)f(given)h(by)g(the)
450 2294 y(bijective)f(function)g F7(label-with-index)h
FF(:)h FN(N)33 b FV(!)24 b F5(L)p Gd(.)h(W)-8 b(e)21
b(de\002ne)g(r)o(ecor)o(ds)e(as)h(follows:)450 2460 y
Ge(21.3.3)e(De\002nition:)40 b Gd(Let)24 b Gb(L)g Gd(be)h(a)f(\002nite)
h(subset)f(of)h F5(L)f Gd(and)g(let)h F4(S)2496 2472
y F1(l)2553 2460 y Gd(be)f(a)g(type)g(for)g(each)g Gb(l)31
b F5(2)f Gb(L)p Gd(.)450 2559 y(Let)20 b Gb(m)h Gd(be)g(the)f(maximal)h
(index)g(of)f(any)h(element)g(of)g Gb(L)p Gd(,)g(and)659
2767 y FY(^)658 2778 y F4(S)701 2790 y F1(i)756 2778
y FY(=)841 2661 y FV(\014)945 2727 y F4(S)989 2739 y
F1(l)1159 2727 y Gd(if)g F7(label-with-index)n FY(\()p
Gb(i)p FY(\))j(=)f Gb(l)g F5(2)g Gb(L)945 2827 y F4(Top)82
b Gd(if)21 b F7(label-with-index)n FY(\()p Gb(i)p FY(\))33
b Gb(=)-51 b F5(2)23 b Gb(L)q(:)450 3009 y Gd(The)h(r)o(ecor)o(d)d
(type)j F4({)o Gb(l)p F4(:S)1219 3021 y F1(l)1251 2978
y(l)p FX(2)p F1(L)1367 3009 y F4(})f Gd(is)h(de\002ned)g(as)f(the)h
(\003exible)f(tuple)h F4({)2609 2998 y FY(^)2608 3009
y F4(S)2662 2960 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(m)2652
3029 y F1(i)2831 3009 y F4(})p Gd(.)34 b(Similarly)-9
b(,)23 b(if)h F4(t)3418 3021 y F1(l)450 3108 y Gd(is)d(a)f(term)h(for)g
(each)f Gb(l)j FF(:)h Gb(L)p Gd(,)c(then)659 3310 y FY(^)658
3316 y F4(t)701 3328 y F1(i)756 3316 y FY(=)841 3199
y FV(\014)945 3265 y F4(t)989 3277 y F1(i)1159 3265 y
Gd(if)h F7(label-with-index)n FY(\()p Gb(i)p FY(\))j(=)f
Gb(l)g F5(2)g Gb(L)945 3365 y F4(top)82 b Gd(if)21 b
F7(label-with-index)n FY(\()p Gb(i)p FY(\))33 b Gb(=)-51
b F5(2)23 b Gb(L)q(:)450 3542 y Gd(The)d(r)o(ecor)o(d)e(value)h
F4({)p Gb(l)p F4(=t)1247 3554 y F1(l)1279 3512 y(l)p
FX(2)p F1(L)1396 3542 y F4(})g Gd(is)i F4({)1583 3536
y FY(^)1582 3542 y F4(t)1636 3499 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(m)1626 3562 y F1(i)1805 3542 y F4(})p Gd(.)25
b(The)20 b(pr)o(ojection)g F4(t.l)2572 3554 y F1(i)2623
3542 y Gd(is)g(just)h(the)f(tuple)g(pr)o(ojec-)450 3642
y(tion)i F4(t.i)n Gd(.)2627 b FZ(2)575 3808 y Gd(This)21
b(encoding)g(validates)f(the)h(expected)e(r)o(ules)i(for)g(typing)g
(and)g(subtyping:)1151 3931 y Gb(\000)i F5(`)g F4({l)1380
3943 y F1(i)1411 3931 y F4(:T)1498 3943 y F1(i)1540 3901
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1778
3931 y F4(})22 b FF(<)-17 b(:)24 b F4({l)2041 3943 y
F1(i)2072 3931 y F4(:T)2159 3943 y F1(i)2201 3901 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2357 3931 y F4(})2844 3932
y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s
Gd(\))1351 4089 y(for)20 b(each)h Gb(i)82 b(\000)23 b
F5(`)g F4(S)1963 4101 y F1(i)2017 4089 y FF(<)-17 b(:)24
b F4(T)2170 4101 y F1(i)p 1192 4132 1169 4 v 1192 4212
a Gb(\000)f F5(`)f F4({l)1421 4224 y F1(i)1452 4212 y
F4(:S)1539 4224 y F1(i)1581 4182 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1737 4212 y F4(})23 b FF(<)-17 b(:)24 b F4({l)2000
4224 y F1(i)2031 4212 y F4(:T)2118 4224 y F1(i)2160 4182
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2316 4212 y F4(})2855
4151 y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s
Gd(\))p eop
%%Page: 191 192
191 191 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(191)450 683 y F8(Church)24 b(Encodings)i(with)f(Subtyping)450
841 y Gd(As)h(a)g(last)g(simple)g(illustration)h(of)g(the)f(expr)o
(essiveness)f(of)h(F)2455 853 y Gc(<)-11 b(:)2510 841
y Gd(,)27 b(let's)g(take)e(a)h(look)h(at)f(what)450 941
y(happens)20 b(when)h(we)f(add)f(bounded)i(quanti\002cation)g(to)f(the)
h(encoding)g(of)f(Chur)o(ch)g(Numer)o(-)450 1040 y(als)32
b(in)g(System)g(F)h(that)e(we)h(saw)g(in)h(Section)f(19.4.)57
b(The)32 b(original)h(polymorphic)g(type)f(of)450 1140
y(chur)o(ch)20 b(numerals)h(was:)616 1278 y FT(CNat)40
b(=)g Fv(8)p FT(X.)f(\(X)p FO(!)p FT(X\))h FO(!)f FT(X)g
FO(!)g FT(X;)450 1424 y Gd(The)32 b(intuitive)i(r)o(eading)d(of)i(this)
g(type)f(was:)49 b(\223T)-8 b(ell)32 b(me)h(a)f(r)o(esult)g(type)g
F4(T)g Gd(and)g(give)h(me)f(a)450 1524 y(function)g(on)f
F4(T)f Gd(and)h(an)f(element)h(of)g F4(T)o Gd(,)i(and)e(I'll)g(give)f
(you)i(back)e(another)h(element)g(of)f F4(T)450 1623
y Gd(formed)h(by)g(iterating)g(the)g(function)h(you)f(gave)g(me)g
Gb(n)g Gd(times)h(over)e(the)i(base)e(value)g(you)450
1723 y(gave.\224)575 1822 y(W)-8 b(e)32 b(can)g(generalize)f(this)i(by)
g(adding)e(two)i(bounded)g(quanti\002ers)f(and)g(r)o(e\002ning)h(the)
450 1922 y(types)21 b(of)g(the)f(parameters)g F4(s)g
Gd(and)g F4(z)p Gd(.)616 2060 y FT(SNat)40 b(=)g Fv(8)p
FT(X<:Top.)g Fv(8)p FT(S<:X.)g Fv(8)p FT(Z<:X.)g(\(X)p
FO(!)p FT(S\))g FO(!)f FT(Z)h FO(!)f FT(X;)450 2206 y
Gd(Intuitively)-9 b(,)25 b(this)g(type)f(can)f(be)h(r)o(ead)e(as)i
(follows:)33 b(\223Give)23 b(me)h(a)g(generic)g(r)o(esult)f(type)h
F4(T)f Gd(and)450 2306 y(two)c(subtypes)g F4(S)f Gd(and)g
F4(Z)o Gd(.)25 b(Then)19 b(give)f(me)h(a)f(function)h(that)f(maps)h(fr)
o(om)f(the)g(whole)i(set)e F4(T)g Gd(into)450 2405 y(the)j(subset)f
F4(S)h Gd(and)f(an)g(element)h(of)f(the)h(special)f(set)h
F4(Z)o Gd(,)g(and)f(I'll)h(r)o(eturn)f(you)h(an)f(element)h(of)f
F4(T)450 2505 y Gd(formed)g(in)i(the)e(same)h(way)g(as)f(befor)o
(e.\224)575 2604 y(T)-8 b(o)23 b(see)f(why)i(this)f(is)g(an)f(inter)o
(esting)h(generalization,)g(consider)g(this)g(slightly)h(dif)o(fer)o
(ent)450 2704 y(type:)616 2842 y FT(SZero)40 b(=)g Fv(8)p
FT(X<:Top.)g Fv(8)p FT(S<:X.)g Fv(8)p FT(Z<:X.)g(\(X)p
FO(!)q FT(S\))f FO(!)g FT(Z)h FO(!)f FT(Z;)450 2988 y
Gd(Although)17 b F4(SZero)c Gd(has)j(almost)h(the)f(same)f(form)h(as)f
F4(SNat)o Gd(,)h(it)g(says)g(something)i(much)e(str)o(onger)450
3088 y(about)26 b(the)f(behavior)h(of)f(its)i(elements,)g(since)f(it)g
(pr)o(omises)f(that)h(its)g(r)o(esult)f(will)i(be)e(an)h(ele-)450
3187 y(ment)d(of)f F4(Z)o Gd(,)h(not)f(just)h(of)f F4(T)p
Gd(.)30 b(In)22 b(fact,)f(ther)o(e)h(is)g(just)h(one)g(way)f(that)g(an)
g(element)g(of)g F4(Z)g Gd(could)g(be)450 3287 y(r)o(eturned\227namely)
e(by)h(yielding)g(just)g F4(z)g Gd(itself.)k(In)c(other)g(wor)o(ds,)g
(the)g(value)616 3425 y FT(szero)40 b(=)g(\()p FM(\025)p
FT(X.)f FM(\025)p FT(S<:X.)h FM(\025)p FT(Z<:X.)h FM(\025)p
FT(s:X)p FO(!)p FT(S.)e FM(\025)p FT(z:Z.)h(z\))g(as)g(SZero;)529
3504 y FS(I)616 3514 y FT(szero)g(:)g(SZero)450 3671
y Gd(is)21 b(the)g F7(only)f Gd(inhabitant)h(of)g(the)g(type)g
F4(SZero)n Gd(.)k(On)d(the)e(other)h(hand,)g(the)g(similar)g(type)616
3809 y FT(SPos)40 b(=)g Fv(8)p FT(X<:Top.)g Fv(8)p FT(S<:X.)g
Fv(8)p FT(Z<:X.)g(\(X)p FO(!)p FT(S\))g FO(!)f FT(Z)h
FO(!)f FT(S;)450 3955 y Gd(has)21 b(mor)o(e)f(inhabitants;)h(for)g
(example,)616 4093 y FT(sone)119 b(=)39 b(\()p FM(\025)p
FT(X.)h FM(\025)p FT(S<:X.)g FM(\025)p FT(Z<:X.)g FM(\025)p
FT(s:X)p FO(!)p FT(S.)g FM(\025)p FT(z:Z.)f(s)h(z\))g(as)f(SPos;)616
4184 y(stwo)119 b(=)39 b(\()p FM(\025)p FT(X.)h FM(\025)p
FT(S<:X.)g FM(\025)p FT(Z<:X.)g FM(\025)p FT(s:X)p FO(!)p
FT(S.)g FM(\025)p FT(z:Z.)f(s)h(\(s)g(z\)\))f(as)h(SPos;)616
4276 y(sthree)h(=)e(\()p FM(\025)p FT(X.)h FM(\025)p
FT(S<:X.)g FM(\025)p FT(Z<:X.)g FM(\025)p FT(s:X)p FO(!)p
FT(S.)g FM(\025)p FT(z:Z.)f(s)h(\(s)g(\(s)f(z\)\)\))h(as)g(SPos;)450
4422 y Gd(and)20 b(so)i(on.)575 4521 y(Mor)o(eover)-6
b(,)37 b(notice)g(that)f F4(SZero)d Gd(and)j F4(SPos)e
Gd(ar)o(e)g(both)j(subtypes)f(of)g F4(SNat)e Gd(\(Exer)o(cise:)450
4621 y(check)21 b(this\),)g(so)g(we)g(also)g(have)f F4(szero)h
FF(:)i F4(SNat)o Gd(,)d F4(sone)h FF(:)j F4(SNat)n Gd(,)d
F4(stwo)g FF(:)i F4(SNat)o Gd(,)d(etc.)575 4721 y(Finally)-9
b(,)35 b(we)d(can)g(similarly)h(r)o(e\002ne)f(the)h(typings)g(of)g
(operations)f(de\002ned)g(on)h(chur)o(ch)450 4820 y(numerals.)f(For)23
b(example,)g(the)g(type)g(system)g(is)h(capable)d(of)i(detecting)g
(that)g(the)g(successor)450 4920 y(function)f(always)e(r)o(eturns)g(a)h
(positive)g(number:)p eop
%%Page: 192 193
192 192 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(192)616 683 y FT(ssucc)40 b(=)g FM(\025)p FT(n:SNat.)969
774 y(\()p FM(\025)p FT(X.)g FM(\025)p FT(S<:X.)g FM(\025)p
FT(Z<:X.)g FM(\025)p FT(s:X)p FO(!)p FT(S.)g FM(\025)p
FT(z:Z.)1048 866 y(s)f(\(n)h([X])g([S])g([Z])f(s)h(z\)\))969
957 y(as)g(SPos;)529 1081 y FS(I)616 1091 y FT(ssucc)g(:)g(SNat)g
FO(!)f FT(SPos)450 1273 y Gd(Similarly)-9 b(,)19 b(by)g(r)o(e\002ning)h
(the)f(types)g(of)g(its)h(parameters,)e(we)h(can)g(write)g(the)g
(function)h F4(plus)e Gd(in)450 1373 y(such)j(a)f(way)h(that)g(the)g
(typechecker)f(gives)h(it)g(the)g(r)o(e\002ned)f(type)g
F4(SPos)p FV(!)o F4(SZero)p FV(!)n F4(SPos)n Gd(.)616
1531 y FT(spluspz)41 b(=)e FM(\025)p FT(n:SPos.)i FM(\025)p
FT(m:SZero.)1087 1622 y(\()p FM(\025)p FT(X.)e FM(\025)p
FT(S<:X.)h FM(\025)p FT(Z<:X.)g FM(\025)p FT(s:X)p FO(!)q
FT(S.)f FM(\025)p FT(z:Z.)1165 1713 y(n)h([X])g([S])g([Z])f(s)h(\(m)g
([X])f([S])h([Z])g(s)g(z\)\))1087 1805 y(as)f(SPos;)529
1928 y FS(I)616 1938 y FT(spluspz)i(:)e(SPos)h FO(!)f
FT(SZero)i FO(!)e FT(SPos)450 2121 y Ge(21.3.4)18 b(Exercise:)39
b Gd(W)-6 b(rite)27 b(a)f(similar)h(version)h(of)f F4(plus)e
Gd(that)i(has)f(type)h F4(SPos)p FV(!)o F4(SPos)p FV(!)n
F4(SPos)n Gd(.)450 2220 y(W)-6 b(rite)20 b(one)i(that)e(has)h(type)g
F4(SNat)p FV(!)n F4(SNat)p FV(!)n F4(SNat)o Gd(.)1364
b FZ(2)575 2403 y Gd(The)30 b(pr)o(evious)f(example)h(and)g(exer)o
(cise)f(raise)g(an)h(inter)o(esting)h(point:)45 b(obviously)-9
b(,)33 b(we)450 2503 y(don't)20 b(want)g(to)g(have)g(several)e(dif)o
(fer)o(ent)g(versions)j(of)e F4(plus)f Gd(lying)j(ar)o(ound)e(and)g
(have)h(to)g(de-)450 2602 y(cide)d(which)i(to)f(apply)g(based)f(on)h
(the)g(expected)f(types)h(of)f(its)i(ar)o(guments:)k(we)18
b(want)g(to)g(have)450 2702 y(a)h F7(single)h Gd(version)g(of)f
F4(plus)f Gd(whose)i(type)f(contains)i(all)e(these)g
(possibilities\227something)k(like)616 2860 y FT(plus)40
b(:)118 b(SZero)p FO(!)q FT(SZero)p FO(!)q FT(SZero)891
2951 y Fr(^)39 b FT(SNat)p FO(!)q FT(SPos)p FO(!)q FT(SPos)891
3042 y Fr(^)g FT(SPos)p FO(!)q FT(SNat)p FO(!)q FT(SPos)891
3134 y Fr(^)g FT(SNat)p FO(!)q FT(SNat)p FO(!)q FT(SNat)450
3300 y Gd(The)19 b(desir)o(e)f(to)h(support)h(this)f(kind)h(of)f
(overloading)g(has)g(led)g(to)g(the)g(study)g(of)g(systems)h(with)450
3399 y Ge(intersection)e(types)p Gd(.)450 3582 y Ge(21.3.5)g(Exercise)h
([Recommended]:)38 b Gd(Generalize)30 b(the)i(type)f
F4(CBool)f Gd(of)h(Chur)o(ch)h(Booleans)450 3682 y(fr)o(om)g(Section)g
(19.4)f(in)i(a)e(similar)i(way)f(by)h(de\002ning)g(a)e(type)i
F4(SBool)d Gd(and)i(two)h(subtypes)450 3781 y F4(STrue)19
b Gd(and)i F4(SFalse)m Gd(.)27 b(W)-6 b(rite)21 b(a)g(function)h
F4(notft)d Gd(with)j(type)f F4(SFalse)p FV(!)m F4(STrue)e
Gd(and)i(a)g(similar)450 3881 y(one)g F4(nottf)e Gd(with)i(type)g
F4(STrue)p FV(!)n F4(SFalse)n Gd(.)1594 b FZ(2)575 4063
y Gd(The)25 b(examples)g(that)g(we)g(have)g(seen)g(in)h(this)g(section)
g(ar)o(e)e(amusing)i(to)g(play)f(with,)i(but)450 4163
y(they)g(might)h(not)f(convince)h(you)f(that)g(F)1770
4175 y Gc(<)-11 b(:)1851 4163 y Gd(is)28 b(a)e(system)h(of)g(tr)o
(emendous)g(practical)e(impor)o(-)450 4263 y(tance!)43
b(W)-8 b(e)27 b(will)g(come)g(to)g(some)g(mor)o(e)g(inter)o(esting)g
(uses)g(of)f(bounded)h(quanti\002cation)h(in)450 4362
y(Chapter)c(31,)h(but)g(these)g(will)h(r)o(equir)o(e)e(just)i(a)e
(little)i(mor)o(e)e(machinery)-9 b(,)26 b(which)g(we)f(will)h(de-)450
4462 y(velop)21 b(in)g(the)g(intervening)g(chapters.)p
eop
%%Page: 193 194
193 193 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(193)450 686 y Gj(21.4)119 b(Safety)450 875 y Gd(W)-8
b(e)18 b(now)g(consider)f(the)h(metatheory)f(of)h(both)g(kernel)f(and)g
(full)g(systems)h(of)g(bounded)f(quan-)450 994 y(ti\002cation)25
b(\()p Gb(F)868 964 y Ga(k)868 1015 y F9(<:)916 994 y
Gd(and)f Gb(F)1122 949 y Ga(f)1122 1002 y F9(<:)1171
994 y Gd(\).)35 b(Much)24 b(of)g(the)g(development)g(is)h(the)f(same)g
(for)g(both)h(systems:)33 b(we)450 1113 y(carry)20 b(it)h(out)g
(\002rst)g(for)g(the)g(simpler)g(case)f(of)g Gb(F)1913
1083 y Ga(k)1913 1133 y F9(<:)1983 1113 y Gd(and)g(then)h(consider)g
Gb(F)2703 1068 y Ga(f)2703 1121 y F9(<:)2752 1113 y Gd(.)575
1213 y(The)k(type)h(pr)o(eservation)e(pr)o(operty)h(can)g(actually)g
(be)h(pr)o(oved)e(quite)i(dir)o(ectly)f(for)g(both)450
1312 y(systems,)h(with)f(minimal)h(technical)e(pr)o(eliminaries.)37
b(This)25 b(is)g(good,)g(since)g(the)g(soundness)450
1412 y(of)19 b(the)h(type)f(system)i(is)e(a)g(critical)h(pr)o(operty)-9
b(,)18 b(while)i(other)g(pr)o(operties)f(such)g(as)h(decidability)450
1511 y(may)26 b(be)g(less)g(important)h(in)f(some)h(contexts.)42
b(\(The)25 b(soundness)j(theor)o(em)d(belongs)i(in)g(the)450
1611 y(language)j(de\002nition,)35 b(while)c(decision)g(pr)o(ocedur)o
(es)e(ar)o(e)h(buried)g(in)h(the)g(compiler)-6 b(.\))56
b(W)-8 b(e)450 1730 y(develop)20 b(the)h(pr)o(oof)f(in)i(detail)e(for)g
Gb(F)1612 1700 y Ga(k)1612 1751 y F9(<:)1661 1730 y Gd(.)26
b(The)20 b(ar)o(gument)h(for)f Gb(F)2413 1685 y Ga(f)2413
1738 y F9(<:)2483 1730 y Gd(is)h(very)f(similar)-6 b(.)575
1830 y(W)e(e)22 b(begin)g(with)h(a)f(couple)g(of)g(technical)g(facts)f
(about)h(the)g(typing)h(and)f(subtyping)h(r)o(ela-)450
1929 y(tions.)k(The)20 b(pr)o(oofs)h(go)g(by)g(straightforwar)o(d)e
(induction)j(on)g(derivations.)450 2112 y Ge(21.4.1)c(Lemma)h
([Permutation]:)554 2278 y Gd(1.)41 b(If)20 b Gb(\000)j
F5(`)g F4(t)f FF(:)i F4(T)c Gd(and)g Gb(\001)h Gd(is)g(a)g(permutation)
g(of)f Gb(\000)6 b Gd(,)15 b(then)21 b Gb(\001)i F5(`)g
F4(t)g FF(:)g F4(T)p Gd(.)554 2444 y(2.)41 b(If)20 b
Gb(\000)j F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)d Gd(and)f
Gb(\001)h Gd(is)g(a)f(permutation)h(of)g Gb(\000)6 b
Gd(,)14 b(then)22 b Gb(\001)h F5(`)g F4(S)f FF(<)-17
b(:)24 b F4(T)p Gd(.)654 b FZ(2)450 2627 y Ge(21.4.2)18
b(Lemma)h([W)-6 b(eakening]:)554 2793 y Gd(1.)41 b(If)20
b Gb(\000)j F5(`)g F4(t)f FF(:)i F4(T)c Gd(and)g F4(x)32
b Gb(=)-51 b F5(2)23 b F7(dom)o FY(\()p Gb(\000)6 b FY(\))p
Gd(,)15 b(then)21 b Gb(\000)6 b(;)17 b F4(x:S)22 b F5(`)h
F4(t)f FF(:)i F4(T)o Gd(.)554 2959 y(2.)41 b(If)20 b
Gb(\000)j F5(`)g F4(t)f FF(:)i F4(T)c Gd(and)g F4(X)32
b Gb(=)-51 b F5(2)23 b F7(dom)o FY(\()p Gb(\000)6 b FY(\))p
Gd(,)15 b(then)21 b Gb(\000)6 b(;)17 b F4(X<:S)22 b F5(`)g
F4(t)h FF(:)g F4(T)p Gd(.)554 3125 y(3.)41 b(If)20 b
Gb(\000)j F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)d Gd(and)f
F4(x)32 b Gb(=)-51 b F5(2)23 b F7(dom)o FY(\()p Gb(\000)6
b FY(\))p Gd(,)15 b(then)21 b Gb(\000)6 b(;)17 b F4(x:S)22
b F5(`)g F4(S)h FF(<)-17 b(:)24 b F4(T)p Gd(.)554 3291
y(4.)41 b(If)20 b Gb(\000)j F5(`)g F4(S)f FF(<)-17 b(:)24
b F4(T)d Gd(and)f F4(X)32 b Gb(=)-51 b F5(2)23 b F7(dom)o
FY(\()p Gb(\000)6 b FY(\))p Gd(,)15 b(then)21 b Gb(\000)6
b(;)17 b F4(X<:S)k F5(`)i F4(S)g FF(<)-17 b(:)24 b F4(T)o
Gd(.)892 b FZ(2)575 3474 y Gd(As)21 b(usual,)h(the)h(pr)o(oof)e(of)h
(type)g(pr)o(eservation)f(r)o(elies)h(on)g(several)f(lemmas)i(r)o
(elating)e(sub-)450 3573 y(stitution)h(with)g(the)f(typing)g(and)f
(subtyping)i(r)o(elations.)450 3756 y Ge(21.4.3)c(De\002nition:)40
b Gd(W)-8 b(e)20 b(write)g F0(f)p F4(X)i F5(7)p FV(!)h
F4(S)p F0(g)p Gb(\000)d Gd(for)g(the)g(context)g(obtained)g(by)h
(substituting)g F4(S)f Gd(for)450 3855 y F4(X)g Gd(in)i(the)e
(right-hand)h(sides)g(of)g(all)f(of)h(the)g(bindings)h(in)f
Gb(\000)6 b Gd(.)1086 b FZ(2)450 4038 y Ge(21.4.4)18
b(Exercise)h([Quick)h(check]:)39 b Gd(Show)d(the)g(following)h(pr)o
(operties)e(of)h(subtyping)g(and)450 4138 y(typing)22
b(derivations:)554 4304 y(1.)41 b(if)20 b Gb(\000)6 b(;)17
b F4(X<:Q)n Gb(;)23 b(\001)h F5(`)f F4(S)f FF(<)-17 b(:)24
b F4(T)d Gd(and)f Gb(\000)j F5(`)g F4(P)f FF(<)-17 b(:)24
b F4(Q)p Gd(,)c(then)h Gb(\000)6 b(;)17 b F4(X<:P)o Gb(;)23
b(\001)g F5(`)g F4(S)g FF(<)-17 b(:)24 b F4(T)o Gd(;)554
4470 y(2.)41 b(if)20 b Gb(\000)6 b(;)17 b F4(X<:Q)n Gb(;)23
b(\001)h F5(`)f F4(t)f FF(:)i F4(T)c Gd(and)g Gb(\000)j
F5(`)g F4(P)f FF(<)-17 b(:)24 b F4(Q)p Gd(,)d(then)g
Gb(\000)5 b(;)18 b F4(X<:P)n Gb(;)23 b(\001)g F5(`)g
F4(t)g FF(:)g F4(T)p Gd(;)450 4636 y(These)28 b(pr)o(operties)g(ar)o(e)
e(often)j(called)e Ge(narrowing)h Gd(because)f(they)i(involve)g(r)o
(estricting)f(the)450 4735 y(range)20 b(of)h(the)g(variable)e
F4(X)p Gd(.)2103 b FZ(2)575 4918 y Gd(Next,)20 b(we)g(have)h(the)g
(usual)f(lemma)h(r)o(elating)f(substitution)j(and)d(the)h(typing)g(r)o
(elation.)p eop
%%Page: 194 195
194 194 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(194)450 683 y Ge(21.4.5)18 b(Lemma)h([Substitution)f(preserves)h
(typing]:)40 b Gd(If)21 b Gb(\000)6 b(;)18 b F4(x:Q)o
Gb(;)24 b(\001)h F5(`)e F4(t)h FF(:)h F4(T)c Gd(and)g
Gb(\000)j F5(`)f F4(q)h FF(:)h F4(Q)o Gd(,)450 783 y(then)c
Gb(\000)6 b(;)17 b(\001)23 b F5(`)g F0(f)p F4(x)f F5(7)p
FV(!)i F4(q)o F0(g)p F4(t)e FF(:)i F4(T)o Gd(.)2038 b
FZ(2)450 962 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)24
b(induction)i(on)g(a)f(derivation)f(of)i Gb(\000)5 b(;)26
b F4(x:Q)o Gb(;)31 b(\001)h F5(`)f F4(t)f FF(:)i F4(T)p
Gd(,)26 b(using)g(the)450 1061 y(pr)o(operties)20 b(pr)o(oved)g(above.)
2022 b FZ(2)575 1240 y Gd(Since)15 b(we)h(may)g(substitute)h(types)f
(for)f(type)h(variables)f(during)h(r)o(eduction,)g(we)g(also)g(need)450
1340 y(a)f(lemma)h(r)o(elating)f(type)h(substitution)i(and)d(typing,)i
(as)f(we)g(did)f(in)h(System)g(F)-8 b(.)17 b(Her)o(e,)e(though,)450
1439 y(we)22 b(must)h(deal)e(with)i(one)g(new)g(twist:)29
b(the)22 b(pr)o(oof)g(of)g(this)h(lemma)f(\(speci\002cally)-9
b(,)22 b(the)j(T)o(-)t(S)t F6(U)t(B)450 1539 y Gd(case\))20
b(depends)g(on)h(a)g(new)g(lemma)f(r)o(elating)h(substitution)h(and)e
(subtyping:)450 1718 y Ge(21.4.6)e(Lemma)h([T)-7 b(ype)20
b(substitution)e(preserves)h(subtyping]:)40 b Gd(If)31
b Gb(\000)6 b(;)37 b F4(X<:Q)n Gb(;)44 b(\001)f F5(`)g
F4(S)g FF(<)-17 b(:)44 b F4(T)450 1818 y Gd(and)20 b
Gb(\000)j F5(`)g F4(P)g FF(<)-17 b(:)24 b F4(Q)o Gd(,)d(then)g
Gb(\000)6 b(;)17 b F0(f)p F4(X)22 b F5(7)p FV(!)h F4(P)p
F0(g)p Gb(\001)g F5(`)f F0(f)p F4(X)h F5(7)p FV(!)g F4(P)o
F0(g)p F4(S)f FF(<)-17 b(:)24 b F0(f)p F4(X)f F5(7)p
FV(!)g F4(P)o F0(g)p F4(T)p Gd(.)900 b FZ(2)450 1997
y F7(Pr)o(oof:)66 b Gd(By)25 b(induction)i(on)f(a)e(derivation)h(of)h
Gb(\000)5 b(;)26 b F4(X<:Q)n Gb(;)32 b(\001)f F5(`)g
F4(S)g FF(<)-17 b(:)33 b F4(T)o Gd(.)39 b(The)26 b(only)g(inter)o
(esting)450 2096 y(cases)20 b(ar)o(e)g(the)h(last)f(two:)450
2220 y F7(Case)k Gd(S)t(-)t(T)t(V)l F6(A)t(R)q F7(:)135
b F4(S)22 b FY(=)h F4(Y)166 b(Y<:T)21 b F5(2)i FY(\()p
Gb(\000)6 b(;)18 b F4(X<:Q)n Gb(;)23 b(\001)p FY(\)\()p
F4(Y)p FY(\))450 2344 y Gd(Ther)o(e)h(ar)o(e)f(two)i(subcases)f(to)h
(consider)-6 b(.)37 b(If)24 b F4(Y)30 b F5(6)p FY(=)g
F4(X)o Gd(,)25 b(then)h(the)e(r)o(esult)g(follows)i(immediately)450
2443 y(fr)o(om)e(S)t(-)t(T)t(V)l F6(A)t(R)r Gd(.)31 b(On)24
b(the)f(other)g(hand,)g(if)f F4(Y)k FY(=)h F4(X)o Gd(,)c(then)h(we)e
(have)h F4(T)j FY(=)g F4(Q)d Gd(and)f F0(f)p F4(X)k F5(7)p
FV(!)h F4(P)o F0(g)p F4(S)f FY(=)h F4(Q)o Gd(,)450 2543
y(and)20 b(the)h(r)o(esult)g(follows)g(by)i(S)t(-)t(R)t
F6(E)t(FL)r Gd(.)450 2667 y F7(Case)h Gd(S)t(-)t(A)t
F6(L)t(L)p F7(:)134 b F4(S)23 b FY(=)g F5(8)p F4(Z<:U)1393
2679 y F1(1)1434 2667 y F4(.S)1521 2679 y F1(2)2215 2667
y F4(T)g FY(=)g F5(8)p F4(Z<:U)2588 2679 y F1(1)2629
2667 y F4(.T)2716 2679 y F1(2)1020 2766 y Gb(\000)6 b(;)17
b F4(X<:Q)o Gb(;)23 b(\001;)g F4(Z<:U)1611 2778 y F1(1)1675
2766 y F5(`)g F4(S)1792 2778 y F1(2)1856 2766 y FF(<)-17
b(:)24 b F4(T)2009 2778 y F1(2)450 2891 y Gd(By)d(the)h(induction)h
(hypothesis,)f Gb(\000)6 b(;)19 b F0(f)p F4(X)k F5(7)p
FV(!)i F4(P)o F0(g)p Gb(\001;)g F4(Z<:)o F0(f)p F4(X)e
F5(7)p FV(!)i F4(P)o F0(g)p F4(U)2441 2903 y F1(1)2506
2891 y F5(`)g F0(f)p F4(X)e F5(7)p FV(!)i F4(P)o F0(g)p
F4(S)2897 2903 y F1(2)2962 2891 y FF(<)-17 b(:)26 b F0(f)p
F4(X)d F5(7)p FV(!)i F4(P)p F0(g)p F4(T)3389 2903 y F1(2)3429
2891 y Gd(.)450 2991 y(By)g(S)t(-)t(A)t F6(L)t(L)q Gd(,)f
Gb(\000)5 b(;)22 b F0(f)p F4(X)28 b F5(7)p FV(!)f F4(P)p
F0(g)p Gb(\001)h F5(`)f(8)p F4(Z<:)n F0(f)p F4(X)g F5(7)p
FV(!)h F4(P)p F0(g)p F4(U)1893 3003 y F1(1)1934 2991
y F4(.)o F0(f)p F4(X)f F5(7)p FV(!)h F4(P)p F0(g)p F4(S)2300
3003 y F1(2)2368 2991 y FF(<)-17 b(:)29 b F5(8)p F4(Z<:)n
F0(f)p F4(X)e F5(7)p FV(!)h F4(P)p F0(g)p F4(U)2982 3003
y F1(1)3022 2991 y F4(.)p F0(f)p F4(X)f F5(7)p FV(!)h
F4(P)p F0(g)p F4(T)3389 3003 y F1(2)3429 2991 y Gd(,)450
3090 y(that)21 b(is,)g Gb(\000)5 b(;)17 b F0(f)p F4(X)23
b F5(7)p FV(!)g F4(P)o F0(g)p Gb(\001)g F5(`)g F0(f)p
F4(X)f F5(7)p FV(!)h F4(P)p F0(g)p FY(\()p F5(8)p F4(Z<:U)1754
3102 y F1(1)1795 3090 y F4(.S)1882 3102 y F1(2)1922 3090
y FY(\))h FF(<)-17 b(:)24 b F0(f)p F4(X)e F5(7)p FV(!)h
F4(P)p F0(g)p FY(\()p F5(8)p F4(Z<:U)2609 3102 y F1(1)2649
3090 y F4(.T)2737 3102 y F1(2)2777 3090 y FY(\))p Gd(,)e(as)f(r)o
(equir)o(ed.)110 b FZ(2)450 3269 y Ge(21.4.7)18 b(Lemma)h([T)-7
b(ype)20 b(substitution)e(preserves)h(typing]:)40 b Gd(If)32
b Gb(\000)5 b(;)38 b F4(X<:Q)n Gb(;)44 b(\001)f F5(`)g
F4(t)g FF(:)h F4(T)31 b Gd(and)450 3369 y Gb(\000)23
b F5(`)g F4(P)f FF(<)-17 b(:)24 b F4(Q)p Gd(,)c(then)i
Gb(\000)5 b(;)18 b F0(f)p F4(X)k F5(7)p FV(!)h F4(P)o
F0(g)p Gb(\001)g F5(`)g F0(f)p F4(X)f F5(7)p FV(!)h F4(P)p
F0(g)p F4(t)f FF(:)h F0(f)p F4(X)g F5(7)p FV(!)g F4(P)o
F0(g)p F4(T)p Gd(.)1096 b FZ(2)450 3548 y F7(Pr)o(oof:)66
b Gd(By)33 b(induction)i(on)f(a)e(derivation)h(of)h Gb(\000)5
b(;)41 b F4(X<:Q)n Gb(;)46 b(\001)h F5(`)e F4(t)h FF(:)h
F4(T)o Gd(.)63 b(W)-8 b(e)34 b(give)f(just)h(the)450
3647 y(inter)o(esting)21 b(cases.)450 3771 y F7(Case)j
Gd(T)o(-)t(T)n(A)t F6(P)t(P)r F7(:)134 b F4(t)23 b FY(=)g
F4(t)1267 3783 y F1(1)1351 3771 y F4([T)1439 3783 y F1(2)1479
3771 y F4(])297 b Gb(\000)6 b(;)17 b F4(X<:Q)n Gb(;)24
b(\001)f F5(`)g F4(t)2331 3783 y F1(1)2395 3771 y FF(:)g
F5(8)p F4(Z<:T)2690 3783 y F1(11)2766 3771 y F4(.T)2854
3783 y F1(12)1071 3871 y F4(T)g FY(=)g F0(f)p F4(Z)f
F5(7)p FV(!)h F4(T)1467 3883 y F1(2)1507 3871 y F0(g)p
F4(T)1577 3883 y F1(12)450 3995 y Gd(By)k(the)f(induction)i
(hypothesis,)h Gb(\000)6 b(;)28 b F0(f)p F4(X)34 b F5(7)p
FV(!)g F4(P)o F0(g)p Gb(\001)g F5(`)g F0(f)p F4(X)f F5(7)p
FV(!)h F4(P)p F0(g)p F4(t)2452 4007 y F1(1)2527 3995
y FF(:)g F0(f)p F4(X)f F5(7)p FV(!)h F4(P)p F0(g)p FY(\()p
F5(8)p F4(Z<:T)3156 4007 y F1(11)3233 3995 y F4(.T)3320
4007 y F1(12)3397 3995 y FY(\))p Gd(,)450 4095 y(i.e,)27
b Gb(\000)6 b(;)27 b F0(f)p F4(X)33 b F5(7)p FV(!)g F4(P)o
F0(g)p Gb(\001)g F5(`)g F0(f)p F4(X)g F5(7)p FV(!)g F4(P)p
F0(g)p F4(t)1484 4107 y F1(1)1557 4095 y FF(:)h F5(8)p
F4(Z<:T)1862 4107 y F1(11)1939 4095 y F4(.)p F0(f)p F4(X)e
F5(7)p FV(!)h F4(P)p F0(g)p F4(T)2316 4107 y F1(12)2393
4095 y Gd(.)42 b(By)28 b(T)o(-)t(T)n(A)t F6(P)t(P)s Gd(,)f
Gb(\000)6 b(;)27 b F0(f)p F4(X)32 b F5(7)p FV(!)i F4(P)o
F0(g)p Gb(\001)f F5(`)450 4195 y F0(f)p F4(X)27 b F5(7)p
FV(!)g F4(P)p F0(g)p F4(t)772 4207 y F1(1)856 4195 y
F4([)p FY(\()p F0(f)p F4(X)f F5(7)p FV(!)i F4(P)o F0(g)p
F4(T)1254 4207 y F1(2)1294 4195 y F4(])p FY(\))f FF(:)h
F0(f)p F4(Z)f F5(7)p FV(!)g F0(f)p F4(X)g F5(7)p FV(!)g
F4(P)p F0(g)p F4(T)2006 4207 y F1(2)2047 4195 y F0(g)p
FY(\()p F0(f)p F4(X)f F5(7)p FV(!)i F4(P)o F0(g)p F4(T)2427
4207 y F1(12)2504 4195 y FY(\))p Gd(,)c(i.e.,)f Gb(\000)5
b(;)22 b F0(f)p F4(X)27 b F5(7)p FV(!)g F4(P)p F0(g)p
Gb(\001)g F5(`)g F0(f)p F4(X)g F5(7)p FV(!)450 4294 y
F4(P)p F0(g)p FY(\()p F4(t)596 4306 y F1(1)680 4294 y
F4([T)767 4306 y F1(2)808 4294 y F4(])o FY(\))d FF(:)f
F0(f)p F4(X)f F5(7)p FV(!)h F4(P)p F0(g)p FY(\()p F0(f)p
F4(Z)f F5(7)p FV(!)h F4(T)1526 4306 y F1(2)1566 4294
y F0(g)p F4(T)1636 4306 y F1(12)1713 4294 y FY(\))p Gd(.)450
4418 y F7(Case)h Gd(T)o(-)t(S)t F6(U)t(B)q F7(:)134 b
Gb(\000)6 b(;)17 b F4(X<:Q)o Gb(;)23 b(\001)g F5(`)g
F4(t)f FF(:)i F4(S)165 b Gb(\000)6 b(;)17 b F4(X<:Q)o
Gb(;)23 b(\001)g F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)450
4542 y Gd(By)e(the)h(induction)g(hypothesis,)h Gb(\000)5
b(;)20 b F0(f)p F4(X)25 b F5(7)p FV(!)h F4(P)p F0(g)p
Gb(\001)g F5(`)f F0(f)p F4(X)g F5(7)p FV(!)h F4(P)p F0(g)p
F4(t)f FF(:)h F0(f)p F4(X)f F5(7)p FV(!)h F4(P)o F0(g)p
F4(T)p Gd(.)k(By)22 b(the)g(pr)o(eserva-)450 4641 y(tion)h(of)g
(subtyping)g(under)f(substitution)i(\(21.4.6\),)c Gb(\000)5
b(;)21 b F0(f)p F4(X)k F5(7)p FV(!)h F4(P)p F0(g)p Gb(\001)g
F5(`)g F0(f)p F4(X)f F5(7)p FV(!)h F4(P)p F0(g)p F4(S)f
FF(<)-17 b(:)27 b F0(f)p F4(X)e F5(7)p FV(!)i F4(P)o
F0(g)p F4(T)o Gd(,)450 4741 y(and)20 b(the)h(r)o(esult)g(follows)g(by)i
(T)o(-)t(S)t F6(U)t(B)r Gd(.)1762 b FZ(2)575 4920 y Gd(Next,)20
b(we)g(establish)i(some)f(simple)g(str)o(uctural)g(facts)f(about)g(the)
h(subtype)g(r)o(elation.)p eop
%%Page: 195 196
195 195 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(195)450 683 y Ge(21.4.8)18 b(Lemma)h([Inversion)h(of)h(the)f
(subtyping)f(relation,)g(from)i(right)f(to)h(left]:)554
845 y Gd(1.)41 b(If)20 b Gb(\000)j F5(`)g F4(S)f FF(<)-17
b(:)24 b F4(X)p Gd(,)c(then)i F4(S)e Gd(is)h(a)f(type)h(variable.)554
1009 y(2.)41 b(If)25 b Gb(\000)34 b F5(`)f F4(S)g FF(<)-17
b(:)34 b F4(T)1141 1021 y F1(1)1182 1009 y FV(!)p F4(T)1309
1021 y F1(2)1349 1009 y Gd(,)28 b(then)e(either)g F4(S)g
Gd(is)h(a)f(type)g(variable)f(or)h(else)h F4(S)33 b FY(=)g
F4(S)3047 1021 y F1(1)3088 1009 y FV(!)p F4(S)3214 1021
y F1(2)3281 1009 y Gd(with)658 1109 y Gb(\000)22 b F5(`)h
F4(T)843 1121 y F1(1)906 1109 y FF(<)-17 b(:)24 b F4(S)1059
1121 y F1(1)1120 1109 y Gd(and)d Gb(\000)h F5(`)h F4(S)1467
1121 y F1(2)1530 1109 y FF(<)-17 b(:)24 b F4(T)1683 1121
y F1(2)1723 1109 y Gd(.)554 1273 y(3.)41 b(If)22 b Gb(\000)k
F5(`)h F4(S)f FF(<)-17 b(:)28 b F5(8)p F4(X<:U)1288 1285
y F1(1)1329 1273 y F4(.T)1416 1285 y F1(2)1457 1273 y
Gd(,)23 b(then)g(either)f F4(S)h Gd(is)g(a)f(type)h(variable)e(or)i
(else)g F4(S)j FY(=)g F5(8)p F4(X<:U)3282 1285 y F1(1)3322
1273 y F4(.S)3409 1285 y F1(2)658 1373 y Gd(with)21 b
Gb(\000)6 b(;)17 b F4(X<:U)1112 1385 y F1(1)1176 1373
y F5(`)23 b F4(S)1293 1385 y F1(2)1357 1373 y FF(<)-17
b(:)24 b F4(T)1509 1385 y F1(2)1550 1373 y Gd(.)1823
b FZ(2)450 1551 y F7(Pr)o(oof:)66 b Gd(Part)26 b(\(1\))g(follows)h(by)g
(an)f(easy)h(induction)g(on)g(subtyping)h(derivations.)43
b(The)26 b(only)450 1650 y(inter)o(esting)c(case)f(is)h(the)g(r)o(ule)i
(S)t(-)t(T)t F6(R)t(A)t(N)t(S)s Gd(,)d(which)i(pr)o(oceeds)e(by)h(two)g
(uses)g(of)g(the)g(induction)450 1750 y(hypothesis,)k(\002rst)e(on)h
(the)f(right)h(pr)o(emise)e(and)h(then)g(on)h(the)f(left.)35
b(The)24 b(ar)o(guments)g(for)g(the)450 1850 y(other)d(parts)f(ar)o(e)g
(similar)h(\(part)e(\(1\))h(is)h(used)f(in)i(the)f(transitivity)g
(cases\).)627 b FZ(2)450 2027 y Ge(21.4.9)18 b(Exercise:)39
b Gd(Show)22 b(the)f(following)h(\223left)e(to)h(right)g(inversion\224)
g(pr)o(operties:)554 2190 y(1.)41 b(If)22 b Gb(\000)27
b F5(`)g F4(S)930 2202 y F1(1)970 2190 y FV(!)p F4(S)1097
2202 y F1(2)1165 2190 y FF(<)-17 b(:)28 b F4(T)o Gd(,)c(then)f(either)g
F4(T)k FY(=)g F4(Top)22 b Gd(or)h(else)g F4(T)j FY(=)h
F4(T)2569 2202 y F1(1)2610 2190 y FV(!)p F4(T)2736 2202
y F1(2)2800 2190 y Gd(with)c Gb(\000)k F5(`)g F4(T)3185
2202 y F1(1)3253 2190 y FF(<)-17 b(:)28 b F4(S)3409 2202
y F1(1)658 2289 y Gd(and)20 b Gb(\000)j F5(`)g F4(S)1004
2301 y F1(2)1068 2289 y FF(<)-17 b(:)24 b F4(T)1220 2301
y F1(2)1261 2289 y Gd(.)554 2453 y(2.)41 b(If)19 b Gb(\000)k
F5(`)g(8)p F4(X<:U.S)1183 2465 y F1(2)1246 2453 y FF(<)-17
b(:)24 b F4(T)p Gd(,)c(then)g(either)g F4(T)j FY(=)f
F4(Top)d Gd(or)h(else)g F4(T)j FY(=)g F5(8)p F4(X<:U.T)2875
2465 y F1(2)2936 2453 y Gd(with)e Gb(\000)5 b(;)18 b
F4(X)o(<)-14 b(:U)22 b F5(`)658 2553 y F4(S)701 2565
y F1(2)765 2553 y FF(<)-17 b(:)24 b F4(T)917 2565 y F1(2)958
2553 y Gd(.)554 2717 y(3.)41 b(If)20 b Gb(\000)j F5(`)g
F4(X)f FF(<)-17 b(:)24 b F4(T)p Gd(,)c(then)i(either)e
F4(T)j FY(=)g F4(Top)c Gd(or)i F4(T)i FY(=)g F4(X)d Gd(or)h
Gb(\000)i F5(`)f F4(S)h FF(<)-17 b(:)24 b F4(T)p Gd(,)c(wher)o(e)g
F4(X<:S)i F5(2)h Gb(\000)6 b Gd(.)554 2881 y(4.)41 b(If)20
b Gb(\000)j F5(`)g F4(Top)e FF(<)-17 b(:)24 b F4(T)p
Gd(,)c(then)i F4(T)g FY(=)h F4(Top)o Gd(.)1682 b FZ(2)575
3059 y Gd(W)-8 b(e)20 b(use)g(Lemma)f(21.4.8)f(for)i(one)g
(straightforwar)o(d)f(str)o(uctural)h(pr)o(operty)f(of)h(the)g(typing)
450 3159 y(r)o(elation)g(that)h(will)h(be)e(needed)g(in)h(the)g
(critical)f(cases)h(of)f(the)h(type)g(pr)o(eservation)f(pr)o(oof.)450
3337 y Ge(21.4.10)e(Lemma:)554 3499 y Gd(1.)41 b(If)20
b Gb(\000)k F5(`)f Gb(\025)p F4(x:S)1053 3511 y F1(1)1093
3499 y F4(.s)1180 3511 y F1(2)1244 3499 y FF(:)h F4(T)d
Gd(and)f Gb(\000)k F5(`)f F4(T)g FF(<)-17 b(:)25 b F4(U)1908
3511 y F1(1)1949 3499 y FV(!)p F4(U)2075 3511 y F1(2)2116
3499 y Gd(,)c(then)g Gb(\000)j F5(`)f F4(U)2528 3511
y F1(1)2593 3499 y FF(<)-17 b(:)24 b F4(S)2746 3511 y
F1(1)2807 3499 y Gd(and)d(ther)o(e)f(is)h(some)658 3598
y F4(S)701 3610 y F1(2)762 3598 y Gd(such)h(that)e Gb(\000)6
b(;)17 b F4(x:S)1340 3610 y F1(1)1404 3598 y F5(`)22
b F4(s)1521 3610 y F1(2)1585 3598 y FF(:)h F4(S)1702
3610 y F1(2)1764 3598 y Gd(and)d Gb(\000)j F5(`)g F4(S)2110
3610 y F1(2)2174 3598 y FF(<)-17 b(:)24 b F4(U)2326 3610
y F1(2)2367 3598 y Gd(.)554 3763 y(2.)41 b(If)19 b Gb(\000)k
F5(`)g Gb(\025)p F4(X<:S)1094 3775 y F1(1)1135 3763 y
F4(.s)1222 3775 y F1(2)1285 3763 y FF(:)h F4(T)19 b Gd(and)h
Gb(\000)i F5(`)h F4(T)g FF(<)-17 b(:)24 b F5(8)p F4(X<:U)2121
3775 y F1(1)2162 3763 y F4(.U)2249 3775 y F1(2)2289 3763
y Gd(,)c(then)h F4(U)2557 3775 y F1(1)2621 3763 y FY(=)i
F4(S)2750 3775 y F1(1)2811 3763 y Gd(and)c(ther)o(e)g(is)h(some)658
3862 y F4(S)701 3874 y F1(2)762 3862 y Gd(such)i(that)e
Gb(\000)6 b(;)17 b F4(X<:S)1384 3874 y F1(1)1447 3862
y F5(`)23 b F4(s)1565 3874 y F1(2)1628 3862 y FF(:)g
F4(S)1746 3874 y F1(2)1807 3862 y Gd(and)e Gb(\000)5
b(;)17 b F4(X<:S)2234 3874 y F1(1)2297 3862 y F5(`)23
b F4(S)2415 3874 y F1(2)2478 3862 y FF(<)-17 b(:)24 b
F4(U)2631 3874 y F1(2)2671 3862 y Gd(.)702 b FZ(2)450
4040 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)26 b(induction)i(on)h
(typing)f(derivations,)h(using)f(Lemma)f(21.4.8)e(for)450
4140 y(the)c(induction)h(case)e(\(r)o(ule)i(T)o(-)t(S)t
F6(U)t(B)r Gd(\).)1784 b FZ(2)575 4318 y Gd(W)-5 b(ith)20
b(all)f(these)g(facts)g(in-hand,)g(the)h(actual)e(pr)o(oof)h(of)h(type)
f(pr)o(eservation)f(is)i(straightfor)o(-)450 4417 y(war)o(d.)450
4595 y Ge(21.4.1)m(1)e(Theorem)i([Preservation]:)38 b
Gd(If)21 b Gb(\000)i F5(`)g F4(t)f FF(:)i F4(T)c Gd(and)g
Gb(\000)j F5(`)g F4(t)f F5(\000)-14 b FV(!)23 b F4(t)2672
4565 y FX(0)2696 4595 y Gd(,)d(then)h Gb(\000)i F5(`)g
F4(t)3114 4565 y FX(0)3161 4595 y FF(:)g F4(T)p Gd(.)94
b FZ(2)450 4773 y F7(Pr)o(oof:)66 b Gd(By)25 b(induction)g(on)g(a)f
(derivation)g(of)g Gb(\000)29 b F5(`)h F4(t)f FF(:)h
F4(T)o Gd(.)36 b(All)24 b(of)h(the)f(cases)g(ar)o(e)f(straightfor)o(-)
450 4873 y(war)o(d,)c(using)j(the)f(facts)f(established)g(in)i(the)f
(above)f(lemmas.)p eop
%%Page: 196 197
196 196 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(196)450 683 y F7(Case)24 b Gd(T)o(-)t(V)l F6(A)t(R)r
F7(:)134 b F4(t)23 b FY(=)g F4(x)450 808 y Gd(This)k(case)f(cannot)h
(actually)f(arise,)h(since)g(we)g(assumed)f Gb(\000)34
b F5(`)f F4(t)h F5(\000)-15 b FV(!)34 b F4(t)2787 777
y FX(0)2837 808 y Gd(and)26 b(ther)o(e)g(ar)o(e)f(no)450
907 y(evaluation)c(r)o(ules)g(for)f(variables.)450 1032
y F7(Case)k Gd(T)o(-)t(A)t F6(B)t(S)q F7(:)135 b F4(t)22
b FY(=)h Gb(\025)p F4(x:T)1346 1044 y F1(1)1386 1032
y F4(.t)1473 1044 y F1(2)450 1156 y Gd(Ditto.)450 1281
y F7(Case)h Gd(T)o(-)t(A)t F6(P)t(P)r F7(:)134 b F4(t)23
b FY(=)g F4(t)1218 1293 y F1(1)1303 1281 y F4(t)1346
1293 y F1(2)1553 1281 y Gb(\000)g F5(`)f F4(t)1738 1293
y F1(1)1801 1281 y FF(:)i F4(T)1919 1293 y F1(11)1996
1281 y FV(!)p F4(T)2123 1293 y F1(12)1022 1380 y F4(T)f
FY(=)g F4(T)1218 1392 y F1(12)1553 1380 y Gb(\000)g F5(`)f
F4(t)1738 1392 y F1(2)1801 1380 y FF(:)i F4(T)1919 1392
y F1(11)450 1504 y Gd(By)d(the)g(de\002nition)g(of)g(the)g(evaluation)g
(r)o(elation,)f(ther)o(e)g(ar)o(e)f(thr)o(ee)h(subcases)g(to)i
(consider:)568 1670 y F7(Subcase:)135 b Gb(\000)23 b
F5(`)g F4(t)1175 1682 y F1(1)1238 1670 y F5(\000)-14
b FV(!)23 b F4(t)1446 1640 y FX(0)1439 1693 y F1(1)1645
1670 y F4(t)1696 1640 y FX(0)1743 1670 y FY(=)f F4(t)1880
1640 y FX(0)1872 1693 y F1(1)1956 1670 y F4(t)2000 1682
y F1(2)568 1795 y Gd(Then)f(the)g(r)o(esult)f(follows)i(fr)o(om)f(the)f
(induction)i(hypothesis)g(and)h(T)o(-)t(A)t F6(P)t(P)r
Gd(.)568 1952 y F7(Subcase:)135 b F4(t)1033 1964 y F1(1)1094
1952 y Gd(is)21 b(a)g(value)186 b Gb(\000)23 b F5(`)f
F4(t)1811 1964 y F1(2)1875 1952 y F5(\000)-15 b FV(!)23
b F4(t)2083 1922 y FX(0)2075 1976 y F1(2)2282 1952 y
F4(t)2333 1922 y FX(0)2379 1952 y FY(=)g F4(t)2508 1964
y F1(1)2593 1952 y F4(t)2644 1922 y FX(0)2636 1976 y
F1(2)568 2077 y Gd(Similar)-6 b(.)568 2235 y F7(Subcase:)135
b F4(t)1033 2247 y F1(1)1097 2235 y FY(=)22 b Gb(\025)p
F4(x:U)1358 2247 y F1(11)1435 2235 y F4(.u)1522 2247
y F1(12)1765 2235 y F4(t)1816 2204 y FX(0)1863 2235 y
FY(=)g F0(f)p F4(x)h F5(7)p FV(!)g F4(t)2191 2247 y F1(2)2232
2235 y F0(g)p F4(u)2302 2247 y F1(12)568 2359 y Gd(By)d(Lemma)h
(21.4.10,)c Gb(\000)6 b(;)17 b F4(x:U)1497 2371 y F1(11)1597
2359 y F5(`)22 b F4(u)1714 2371 y F1(12)1814 2359 y FF(:)h
F4(U)1932 2371 y F1(12)2029 2359 y Gd(with)e Gb(\000)i
F5(`)g F4(T)2404 2371 y F1(11)2504 2359 y FF(<)-17 b(:)24
b F4(U)2656 2371 y F1(11)2754 2359 y Gd(and)c Gb(\000)i
F5(`)h F4(U)3100 2371 y F1(12)3200 2359 y FF(<)-17 b(:)24
b F4(T)3352 2371 y F1(12)3429 2359 y Gd(.)568 2459 y(By)32
b(the)g(pr)o(eservation)f(of)h(typing)g(under)g(substitution)h(\(Lemma)
f(21.4.5\),)f Gb(\000)44 b F5(`)f F0(f)p F4(x)g F5(7)p
FV(!)568 2558 y F4(t)612 2570 y F1(2)652 2558 y F0(g)p
F4(u)722 2570 y F1(12)822 2558 y FF(:)24 b F4(U)940 2570
y F1(12)1017 2558 y Gd(,)d(fr)o(om)f(which)i Gb(\000)g
F5(`)h F0(f)p F4(x)f F5(7)p FV(!)i F4(t)1889 2570 y F1(2)1930
2558 y F0(g)p F4(u)2000 2570 y F1(12)2100 2558 y FF(:)f
F4(T)2218 2570 y F1(12)2315 2558 y Gd(follows)f(by)h(T)o(-)t(S)t
F6(U)t(B)q Gd(.)450 2724 y F7(Case)h Gd(T)o(-)t(T)n(A)t
F6(B)t(S)q F7(:)134 b F4(t)23 b FY(=)g Gb(\025)p F4(X<:U.t)450
2849 y Gd(Can't)e(happen.)450 2973 y F7(Case)j Gd(T)o(-)t(T)n(A)t
F6(P)t(P)r F7(:)134 b F4(t)23 b FY(=)g F4(t)1267 2985
y F1(1)1351 2973 y F4([T)1439 2985 y F1(2)1479 2973 y
F4(])297 b Gb(\000)23 b F5(`)g F4(t)g FF(:)g F5(8)p F4(X<:T)2323
2985 y F1(11)2400 2973 y F4(.T)2487 2985 y F1(12)1071
3073 y F4(T)g FY(=)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)1467
3085 y F1(2)1507 3073 y F0(g)p F4(T)1577 3085 y F1(12)1820
3073 y Gb(\000)g F5(`)g F4(T)2005 3085 y F1(2)2069 3073
y FF(<)-17 b(:)24 b F4(T)2222 3085 y F1(11)450 3197 y
Gd(By)d(the)g(de\002nition)g(of)g(the)g(evaluation)g(r)o(elation,)f
(ther)o(e)g(ar)o(e)f(two)i(subcases)g(to)g(consider:)568
3363 y F7(Subcase:)135 b F4(t)1033 3375 y F1(1)1097 3363
y F5(\000)-15 b FV(!)23 b F4(t)1304 3333 y FX(0)1297
3386 y F1(1)1503 3363 y F4(t)1555 3333 y FX(0)1601 3363
y FY(=)g F4(t)1738 3333 y FX(0)1730 3386 y F1(1)1814
3363 y F4([T)1902 3375 y F1(2)1942 3363 y F4(])568 3487
y Gd(The)e(r)o(esult)f(follows)i(fr)o(om)e(the)h(induction)h
(hypothesis)g(and)g(T)o(-)t(T)n(A)t F6(P)t(P)s Gd(.)568
3645 y F7(Subcase:)135 b F4(t)1033 3657 y F1(1)1097 3645
y FY(=)22 b Gb(\025)p F4(X<:U)1402 3657 y F1(11)1479
3645 y F4(.u)1566 3657 y F1(12)1809 3645 y F4(t)1860
3615 y FX(0)1906 3645 y FY(=)h F0(f)p F4(X)f F5(7)p FV(!)h
F4(T)2235 3657 y F1(2)2275 3645 y F0(g)p F4(u)2346 3657
y F1(12)568 3770 y Gd(By)31 b(Lemma)f(21.4.10,)g F4(U)1352
3782 y F1(11)1470 3770 y FY(=)42 b F4(T)1618 3782 y F1(11)1726
3770 y Gd(and)30 b Gb(\000)6 b(;)35 b F4(X<:U)2181 3782
y F1(11)2299 3770 y F5(`)42 b F4(u)2435 3782 y F1(12)2554
3770 y FF(:)f F4(U)2690 3782 y F1(12)2798 3770 y Gd(with)31
b Gb(\000)6 b(;)35 b F4(X<:U)3281 3782 y F1(11)3399 3770
y F5(`)568 3869 y F4(U)612 3881 y F1(12)716 3869 y FF(<)-17
b(:)28 b F4(T)872 3881 y F1(12)949 3869 y Gd(.)k(By)23
b(the)g(pr)o(eservation)f(of)h(typing)h(under)e(substitution)j
(\(21.4.5\),)20 b Gb(\000)27 b F5(`)g F0(f)p F4(X)f F5(7)p
FV(!)568 3969 y F4(T)612 3981 y F1(2)652 3969 y F0(g)p
F4(u)722 3981 y F1(12)831 3969 y FF(:)32 b F0(f)p F4(X)f
F5(7)p FV(!)h F4(T)1175 3981 y F1(2)1215 3969 y F0(g)p
F4(U)1285 3981 y F1(12)1362 3969 y Gd(,)27 b(fr)o(om)e(which)h
Gb(\000)32 b F5(`)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2285
3981 y F1(2)2326 3969 y F0(g)p F4(u)2396 3981 y F1(12)2505
3969 y FF(:)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2848 3981
y F1(2)2889 3969 y F0(g)p F4(T)2959 3981 y F1(12)3061
3969 y Gd(follows)27 b(by)568 4068 y(Lemma)20 b(21.4.6)f(and)j(T)o(-)t
(S)t F6(U)t(B)r Gd(.)450 4234 y F7(Case)i Gd(T)o(-)t(S)t
F6(U)t(B)q F7(:)134 b Gb(\000)23 b F5(`)g F4(t)g FF(:)g
F4(S)166 b Gb(\000)22 b F5(`)h F4(S)g FF(<)-17 b(:)24
b F4(T)450 4359 y Gd(By)d(the)g(induction)g(hypothesis,)h
Gb(\000)h F5(`)g F4(t)1713 4329 y FX(0)1759 4359 y FF(:)h
F4(S)o Gd(;)d(the)g(r)o(esult)f(follows)i(by)h(T)o(-)t(S)t
F6(U)t(B)q Gd(.)455 b FZ(2)450 4561 y Ge(21.4.12)18 b(Exercise:)39
b Gd(Show)21 b(how)h(to)f(extend)f(the)h(ar)o(gument)f(in)i(this)f
(section)h(to)f Gb(F)3039 4516 y Ga(f)3039 4569 y F9(<:)3087
4561 y Gd(.)286 b FZ(2)p eop
%%Page: 197 198
197 197 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(197)450 686 y Gj(21.5)119 b(Bounded)30 b(Existential)e(T)-11
b(ypes)450 875 y F7(This)20 b(\002nal)h(section)g(r)o(emains)g(to)f(be)
i(written.)450 1032 y Ge(Bounded)e(existential)c(quanti\002cation)1449
b Gb(F)3253 1002 y Ga(k)3253 1053 y F9(<:)3301 1032 y
 gsave currentpoint translate 0 124518 7800 div 646180 7800 div 453834
-7800 div box .9 setgray fill grestore

3301 1032 a 16 w Ge(+)37 b F5(9)p 409 1114 9 36 v 418
1084 3000 6 v 3418 1084 38 6 v 3455 1114 9 36 v 450 1204
a F7(New)21 b(syntactic)e(forms)592 1334 y F4(T)61 b
Gd(::=)i(...)1695 b F7(types)852 1434 y F4({)p F5(9)p
F4(X)985 1434 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 985 1434 a 16 w F4(<:T)14 b(,T})1391
b F7(existential)21 b(type)450 1649 y(New)g(subtyping)f(rules)p
3033 1566 418 4 v 3033 1674 4 108 v 1909 w Gb(\000)j
F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)p 3447 1674 V 3033
1677 418 4 v 1170 1850 a
 gsave currentpoint translate 0 851966 7800 div 9570690 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1170 1850 a 1445 1794 a Gb(\000)5
b(;)18 b F4(X<:)n(U)23 b F5(`)g F4(S)1850 1806 y F1(2)1914
1794 y FF(<)-17 b(:)24 b F4(T)2067 1806 y F1(2)p 1204
1831 1145 4 v 1204 1904 a Gb(\000)f F5(`)f F4({)p F5(9)p
F4(X<:)o(U)o(,S)1697 1916 y F1(2)1737 1904 y F4(})h FF(<)-17
b(:)24 b F4({)p F5(9)p F4(X<:)n(U,T)2264 1916 y F1(2)2305
1904 y F4(})3100 1850 y Gd(\()r(S)t(-)t(S)t F6(O)t(M)t(E)p
Gd(\))450 2084 y F7(New)d(typing)e(rules)p 3067 2001
383 4 v 3067 2109 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g
FF(:)g F4(T)p 3447 2109 V 3067 2112 383 4 v 1138 2209
a Gb(\000)g F5(`)g F4(t)1323 2221 y F1(2)1387 2209 y
FF(:)g F0(f)p F4(X)f F5(7)p FV(!)i F4(U)o F0(g)p F4(T)1774
2221 y F1(2)1981 2209 y
 gsave currentpoint translate 0 222821 7800 div 3417530 7800 div 579629
-7800 div box .9 setgray fill grestore
 1981 2209 a 16 w Gb(\000)e F5(`)h
F4(U)g FF(<)-17 b(:)24 b F4(T)2357 2221 y F1(1)p 866
2252 1820 4 v 866 2332 a Gb(\000)f F5(`)g F4({)p F5(9)p
F4(X=U)n(,t)1315 2344 y F1(2)1356 2332 y F4(})43 b(as)g({)p
F5(9)p F4(X)1707 2332 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1707 2332 a 16 w F4(<:T)1854
2344 y F1(1)1910 2332 y F4(,T)1997 2344 y F1(2)2038 2332
y F4(})22 b FF(:)h F4({)p F5(9)p F4(X)2312 2332 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 2312
2332 a 16 w F4(<:T)2458 2344 y F1(1)2515 2332 y F4(,T)2602
2344 y F1(2)2642 2332 y F4(})3106 2271 y Gd(\()r(T)o(-)t(P)m
F6(A)t(C)t(K)r Gd(\))790 2471 y Gb(\000)g F5(`)g F4(t)975
2483 y F1(1)1039 2471 y FF(:)g F5(9)p F4(X)1203 2471
y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1203 2471 a 16 w F4(<:T)1349 2483 y F1(11)1442 2471
y F4(.T)1529 2483 y F1(12)1772 2471 y Gb(\000)6 b(;)17
b F4(X)1907 2471 y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1907 2471 a 15 w F4(<:T)2053 2483
y F1(11)2146 2471 y Gb(;)23 b F4(x:T)2323 2483 y F1(12)2423
2471 y F5(`)f F4(t)2540 2483 y F1(2)2603 2471 y FF(:)i
F4(T)2721 2483 y F1(2)p 790 2514 1972 4 v 1225 2594 a
Gb(\000)f F5(`)g F4(let)42 b({X)o(,x}=t)1846 2606 y F1(1)1930
2594 y F4(in)h(t)2105 2606 y F1(2)2168 2594 y FF(:)24
b F4(T)2286 2606 y F1(2)2987 2533 y Gd(\()r(T)o(-)t(U)t
F6(N)t(P)n(A)t(C)t(K)r Gd(\))p 409 2663 9 36 v 418 2663
3000 6 v 3418 2663 38 6 v 3455 2663 9 36 v 450 2834 a
Ge(21.5.1)18 b(Exercise:)39 b Gd(Show)28 b(how)h(the)e(subtyping)i(r)o
(ule)g(S)t(-)t(S)t F6(O)t(M)t(E)g Gd(can)e(be)g(obtained)g(fr)o(om)g
(the)450 2934 y(subtyping)k(r)o(ules)f(for)g(universals)g(by)g
(extending)g(the)h(encoding)f(of)g(existential)g(types)h(in)450
3033 y(terms)21 b(of)g(universal)f(types)h(described)f(in)h(Section)g
(20.3.)1115 b FZ(2)450 3317 y Gj(21.6)119 b(Historical)28
b(Notes)i(and)g(Further)f(Reading)450 3506 y Gd(The)16
b(idea)f(of)g(bounded)h(quanti\002cation)h(was)f(intr)o(oduced)f(by)h
(Car)o(delli)e(and)h(W)-8 b(egner)16 b([CW85)o(])450
3606 y(in)24 b(the)g(language)g(Fun.)35 b(\(Their)23
b(\223Kernel)g(Fun\224)h(calculus)g(corr)o(esponds)f(to)h(our)g
Gb(F)3100 3575 y Ga(k)3100 3626 y F9(<:)3149 3606 y Gd(.\))34
b(Based)450 3705 y(on)16 b(informal)g(ideas)g(by)f(Car)o(delli)g(and)g
(formalized)g(using)i(techniques)f(developed)f(by)h(Mitchell)450
3805 y([Mit84b)n(],)h(Fun)f(integrated)f(Girar)o(d-Reynolds)g
(polymorphism)j([Gir72)o(,)d(Rey74])g(with)i(Car)o(delli's)450
3904 y(\002rst-or)o(der)25 b(calculus)h(of)g(subtyping)h([)p
Ge(?)p Gd(,)f(Car84)n(].)42 b(The)26 b(original)h(Fun)f(was)h
(simpli\002ed)f(and)450 4004 y(slightly)17 b(generalized)e(by)g(Br)o
(uce)h(and)f(Longo)i([BL90)n(],)f(and)f(again)h(by)g(Curien)f(and)h
(Ghelli)g([CG92)o(],)450 4123 y(yielding)21 b(the)g(calculus)g(we)g
(call)f Gb(F)1548 4078 y Ga(f)1548 4131 y F9(<:)1597
4123 y Gd(.)575 4223 y(The)g(most)h(compr)o(ehensive)g(single)g(paper)e
(on)i(bounded)f(quanti\002cation)i(is)f(the)f(survey)450
4322 y(by)h(Car)o(delli,)e(Martini,)h(Mitchell,)h(and)f(Scedr)o(ov)f
([CMMS94)m(].)575 4422 y(Fun)i(and)g(its)g(r)o(elatives)f(have)g(been)h
(studied)g(extensively)g(by)g(pr)o(ogramming)g(language)450
4521 y(theorists)28 b(and)f(designers.)45 b(Car)o(delli)26
b(and)h(W)-8 b(egner)6 b('s)28 b(survey)f(paper)f(gives)i(the)f
(\002rst)h(pr)o(o-)450 4621 y(gramming)16 b(examples)g(using)g(bounded)
g(quanti\002cation;)i(mor)o(e)e(ar)o(e)e(developed)h(in)h(Car)o
(delli's)450 4721 y(study)j(of)g(power)g(kinds)h([Car88)m(].)25
b(Curien)19 b(and)f(Ghelli)i([CG92)o(,)f(Ghe90)o(])g(addr)o(ess)e(a)i
(number)450 4820 y(of)e(syntactic)g(pr)o(operties)g(of)g(F)1409
4832 y Gc(<)-11 b(:)1464 4820 y Gd(.)24 b(Semantic)17
b(aspects)f(of)h(closely)h(r)o(elated)e(systems)i(have)e(been)450
4920 y(studied)28 b(by)g(Br)o(uce)g(and)g(Longo)h([BL90)n(],)h(Martini)
e([Mar88)m(],)i(Br)o(eazu-T)-8 b(annen,)28 b(Coquand,)p
eop
%%Page: 198 199
198 198 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)588
b Gd(2)t(1)t(.)29 b(B)t F6(O)t(U)t(N)t(D)t(E)t(D)d Gd(Q)t
F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)t(A)o(T)t(I)t(O)t(N)591
b Gd(198)450 683 y(Gunter)-6 b(,)17 b(and)e(Scedr)o(ov)f([BCGS91)n(],)j
(Car)o(done)d([Car89)n(],)i(Car)o(delli)f(and)g(Longo)i([CL91)n(],)f
(Car)o(delli,)450 783 y(Martini,)i(Mitchell,)g(and)f(Scedr)o(ov)f([)p
Ge(?)p Gd(],)h(Curien)h(and)f(Ghelli)i([CG92)o(,)e(CG91)o(],)h(and)f
(Br)o(uce)g(and)450 882 y(Mitchell)k([BM92)n(].)27 b(F)1136
894 y Gc(<)-11 b(:)1212 882 y Gd(has)21 b(been)g(extended)g(to)g
(include)h(r)o(ecor)o(d)d(types)i(and)g(richer)g(notions)450
982 y(of)30 b(inheritance)f(by)h(Car)o(delli)e(and)h(Mitchell)h([CM91)n
(],)h(Br)o(uce)f([Br)o(u91)n(],)h(Car)o(delli)e([Car92)n(],)450
1082 y(and)17 b(Canning,)i(Cook,)g(Hill,)f(Olthof)o(f,)g(and)f
(Mitchell)h([CCH)2375 1051 y F2(+)2429 1082 y Gd(89].)24
b(Bounded)17 b(quanti\002cation)450 1181 y(also)i(plays)g(a)f(key)h(r)o
(ole)f(in)h(Car)o(delli's)f(pr)o(ogramming)h(language)f(Quest)h([Car91)
n(,)f(CL91)o(])g(and)450 1281 y(in)h(the)g(Abel)g(language)f(developed)
g(at)h(HP)g(Labs)f([CCHO89)o(,)g(CCH)2638 1251 y F2(+)2693
1281 y Gd(89)o(,)h(CHO88)o(,)g(CHC90)o(].)575 1380 y(The)e
(undecidability)h(of)f(full)h(F)1563 1392 y Gc(<)-11
b(:)1635 1380 y Gd(was)18 b(shown)h(by)e(Pier)o(ce)g([Pie94)o(])g(and)g
(further)g(analyzed)450 1480 y(by)k(Ghelli)g([Ghe95].)575
1580 y(The)15 b(ef)o(fect)f(of)i(bounded)g(quanti\002cation)h(on)f
(Chur)o(ch)f(encodings)i(of)f(algebraic)e(datatypes)450
1679 y(\(cf.)29 b(Section)h(21.3\))e(was)i(consider)o(ed)f(by)h(Ghelli)
h(thesis)g([Ghe90)o(])e(and)h(Car)o(delli,)h(Martini,)450
1779 y(Mitchell,)21 b(and)f(Scedr)o(ov)f([CMMS94)m(].)575
1879 y(An)d(extension)g(of)g(F)1205 1891 y Gc(<)-11 b(:)1276
1879 y Gd(with)17 b(intersection)g(types)f(was)g(studied)g(by)g(Pier)o
(ce)f([Pie91a)n(,)h(Pie97)o(])450 1978 y(and)31 b(applied)g(to)h(the)g
(modeling)h(of)f(object-oriented)f(languages)h(with)h(multiple)f
(inheri-)450 2078 y(tance)20 b(by)h(Compagnoni)h(and)e(Pier)o(ce)g
([CP96)o(].)p eop
%%Page: 199 200
199 199 bop 450 1306 a F3(Chapter)44 b(22)450 1721 y
Gk(Implementing)52 b(Bounded)450 1970 y(Quanti\002cation)450
2402 y Gd(Next)17 b(we)h(consider)f(the)h(pr)o(oblem)f(of)g(building)h
(a)f(typechecking)h(algorithm)g(for)f(a)g(language)450
2501 y(with)26 b(bounded)f(quanti\002ers.)39 b(The)26
b(algorithm)g(that)f(we)g(constr)o(uct)h(will)g(be)f(parametric)f(in)
450 2601 y(an)d(algorithm)g(for)g(the)g(subtype)f(r)o(elation,)h(which)
g(we)g(consider)g(in)g(the)g(following)h(section.)450
2887 y Gj(22.1)119 b(Promotion)450 3076 y Gd(In)22 b(the)g
(typechecking)g(algorithm)g(for)g Gb(\025)1753 3088 y
F9(<:)1823 3076 y Gd(in)g(Section)f(13.2,)f(the)i(key)g(idea)f(was)g
(that)h(we)f(can)450 3175 y(calculate)g(a)g F7(minimal)g
Gd(type)h(for)g(each)f(term)h(fr)o(om)f(the)h(minimal)h(types)f(of)g
(its)g(subterms.)29 b(W)-8 b(e)450 3275 y(will)22 b(use)e(the)h(same)g
(basic)f(idea)g(to)i(typecheck)e Gb(F)2012 3245 y Ga(k)2012
3296 y F9(<:)2061 3275 y Gd(,)h(but)f(we)h(need)g(to)g(take)f(into)i
(account)f(one)450 3375 y(slight)h(complication)g(arising)f(fr)o(om)f
(the)h(pr)o(esence)e(of)i(type)g(variables)f(in)h(the)g(system.)575
3474 y(Consider)f(the)h(term)616 3632 y FT(f)39 b(=)h
FM(\025)p FT(X<:Nat)p FO(!)q FT(Nat.)g FM(\025)p FT(y:X.)g(y)f(5;)529
3756 y FS(I)616 3766 y FT(f)g(:)h Fv(8)p FT(X<:Nat)p
FO(!)q FT(Nat.)g(X)f FO(!)g FT(Nat)450 3948 y Gd(This)26
b(term)f(is)h(clearly)f(well)g(typed,)h(since)g(the)f(type)g(of)h(the)f
(variable)f F4(y)h Gd(in)h(the)f(application)450 4048
y F4(\(y)43 b(5\))27 b Gd(is)h F4(X)o Gd(,)i(which)e(can)g(be)f(pr)o
(omoted)g(to)i F4(Nat)p FV(!)n F4(Nat)e Gd(by)j(T)o(-)t(S)t
F6(U)t(B)q Gd(.)46 b(But)28 b(the)g F7(minimal)f Gd(type)450
4147 y(of)c F4(y)f Gd(is)h(not)g(an)g(arr)o(ow)e(type.)32
b(In)22 b(or)o(der)g(to)h(\002nd)g(the)g(minimal)g(type)g(of)f(the)h
(application,)g(we)450 4247 y(need)18 b(to)h(\002nd)f(the)g(minimal)i
(arr)o(ow)d(type)h(that)g F4(y)g Gd(possesses\227i.e.,)h(the)f(minimal)
i(arr)o(ow)d(type)450 4347 y(that)k(is)f(a)g(supertype)h(of)f
F4(X)p Gd(.)25 b(Not)c(too)g(surprisingly)-9 b(,)22 b(the)e(corr)o(ect)
g(way)g(to)h(\002nd)g(this)g(type)g(is)g(to)450 4446
y Ge(promote)f Gd(the)h(minimal)h(type)e(of)h F4(y)f
Gd(until)i(it)f(is)g(something)h(other)f(than)g(a)g(type)f(variable.)
575 4546 y(Formally)-9 b(,)31 b(write)f Gb(\000)39 b
F5(`)g F4(S)f FV(*)i F4(T)29 b Gd(to)h(mean)f(\223)p
F4(T)g Gd(is)g(the)h F7(least)g(nonvariable)g(supertype)f
Gd(of)g F4(S)p Gd(,\224)450 4646 y(de\002ned)20 b(by)h(r)o(epeated)e
(pr)o(omotion)i(of)g(variables)f(as)g(follows:)1888 5169
y(199)p eop
%%Page: 200 201
200 200 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(200)450 683 y Ge(Exposure)p
409 765 9 36 v 418 735 3000 6 v 3418 735 38 6 v 3455
765 9 36 v 450 894 a F7(Exposur)o(e)p 2988 796 462 4
v 2988 935 4 140 v 3016 894 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 3016 894 a 16 w Gb(\000)39
b F5(`)3135 875 y Fx(I)3202 894 y F4(T)23 b FV(*)g F4(T)3398
864 y FX(0)p 3447 935 4 140 v 2988 938 462 4 v 1312 1112
a
 gsave currentpoint translate 0 851966 7800 div 7329996 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1312 1112 a 1346 1056 a F4(X<:T)e F5(2)i Gb(\000)166
b(\000)23 b F5(`)1919 1037 y Fx(I)1987 1056 y F4(T)f
FV(*)i F4(T)2183 1026 y FX(0)p 1346 1093 861 4 v 1589
1165 a Gb(\000)f F5(`)1676 1146 y Fx(I)1743 1165 y F4(X)g
FV(*)g F4(T)1940 1136 y FX(0)2863 1112 y Gd(\()r(X)t(A)t(-)t(P)t
F6(R)t(O)t(M)t(O)t(T)t(E)r Gd(\))1328 1409 y
 gsave currentpoint translate 0 879104 7800 div 7077799 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1328 1409
a 1362 1353 a F4(T)d Gd(is)h(not)h(a)e(type)g(variable)p
1362 1390 829 4 v 1589 1466 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1589 1466 a 15 w Gb(\000)39
b F5(`)1707 1447 y Fx(I)1775 1466 y F4(T)22 b FV(*)i
F4(T)2968 1409 y Gd(\()r(X)t(A)t(-)t(O)t F6(T)t(H)t(E)t(R)r
Gd(\))p 409 1558 9 36 v 418 1558 3000 6 v 3418 1558 38
6 v 3455 1558 9 36 v 575 1724 a(It)30 b(is)h(easy)e(to)i(check)f(that)h
(these)f(r)o(ules)h(de\002ne)f(a)g(total)g(function.)55
b(Mor)o(eover)-6 b(,)31 b(the)f(r)o(e-)450 1823 y(sult)c(of)f(pr)o
(omotion)h(is)g(always)f(the)g(least)g(supertype)g(that)g(has)g(some)h
(shape)f(other)g(than)g(a)450 1923 y(variable.)450 2106
y Ge(22.1.1)18 b(Lemma:)40 b Gd(Suppose)20 b Gb(\000)j
F5(`)g F4(S)g FV(*)g F4(T)p Gd(.)554 2272 y(1.)41 b Gb(\000)22
b F5(`)h F4(S)g FF(<)-17 b(:)24 b F4(T)o Gd(.)554 2438
y(2.)41 b(If)20 b Gb(\000)j F5(`)g F4(S)f FF(<)-17 b(:)24
b F4(U)d Gd(and)f F4(U)g Gd(is)h(not)h(a)e(variable,)f(then)j
Gb(\000)g F5(`)h F4(T)g FF(<)-17 b(:)24 b F4(U)o Gd(.)865
b FZ(2)450 2621 y F7(Pr)o(oof:)66 b Gd(Part)23 b(\(1\))g(is)h(easy)-9
b(.)33 b(Part)23 b(\(2\))f(goes)i(by)g(straightforwar)o(d)e(induction)j
(on)f(a)f(derivation)450 2720 y(of)e Gb(\000)i F5(`)f
F4(S)h FF(<)-17 b(:)24 b F4(U)p Gd(.)2468 b FZ(2)450
3006 y Gj(22.2)119 b(Minimal)29 b(T)-11 b(yping)450 3195
y Gd(The)24 b(algorithm)h(for)e(calculating)h(minimal)h(types)f(is)g
(built)h(along)f(the)g(same)g(basic)g(lines)g(as)450
3295 y(the)f(one)h(for)f Gb(\025)919 3307 y F9(<:)967
3295 y Gd(,)h(with)f(one)h(additional)f(twist:)31 b(the)23
b(minimal)h(type)f(of)g(a)g(term)g(may)g(always)450 3394
y(be)i(a)g(type)g(variable,)g(and)g(such)h(a)f(type)g(will)h(need)f(to)
h(be)f(pr)o(omoted)g(to)h(its)g(smallest)f(non-)450 3494
y(variable)f(supertype)h(\(its)g(smallest)h Ge(concrete)e
Gd(supertype,)h(we)h(might)g(say\))f(in)g(or)o(der)g(to)g(be)450
3594 y(used)c(on)g(the)g(left)f(of)h(an)g(application)f(or)h(type)g
(application.)450 3760 y Ge(Algorithmic)e(typing)p 409
3841 V 418 3812 3000 6 v 3418 3812 38 6 v 3455 3841 9
36 v 450 3955 a F7(Algorithmic)g(typing)p 3055 3873 396
4 v 3055 3980 4 108 v 1982 w Gb(\000)k F5(`)3170 3936
y Fx(I)3237 3955 y F4(t)g FF(:)g F4(T)p 3447 3980 V 3055
3983 396 4 v 1637 4077 a(x:T)f F5(2)i Gb(\000)p 1606
4120 339 4 v 1606 4200 a(\000)f F5(`)1693 4180 y Fx(I)1761
4200 y F4(x)f FF(:)i F4(T)3085 4139 y Gd(\()r(T)n(A)t(-)t(V)l
F6(A)t(R)q Gd(\))1457 4339 y Gb(\000)6 b(;)17 b F4(x:T)1679
4351 y F1(1)1743 4339 y F5(`)1762 4319 y Fx(I)1829 4339
y F4(t)1873 4351 y F1(2)1936 4339 y FF(:)23 b F4(T)2054
4351 y F1(2)p 1352 4382 847 4 v 1352 4462 a Gb(\000)g
F5(`)1439 4442 y Fx(I)1507 4462 y Gb(\025)p F4(x:T)1683
4474 y F1(1)1723 4462 y F4(.t)1810 4474 y F1(2)1874 4462
y FF(:)g F4(T)1992 4474 y F1(1)2032 4462 y FV(!)p F4(T)2159
4474 y F1(2)3093 4401 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p
Gd(\))466 4604 y Gb(\000)g F5(`)553 4585 y Fx(I)620 4604
y F4(t)664 4616 y F1(1)727 4604 y FF(:)h F4(T)845 4616
y F1(1)1052 4604 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1052 4604 a 15 w Gb(\000)39 b F5(`)1170
4585 y Fx(I)1238 4604 y F4(T)1281 4616 y F1(1)1345 4604
y FV(*)23 b FY(\()p F4(T)1499 4616 y F1(11)1576 4604
y FV(!)p F4(T)1702 4616 y F1(12)1779 4604 y FY(\))167
b Gb(\000)23 b F5(`)2065 4585 y Fx(I)2132 4604 y F4(t)2176
4616 y F1(2)2239 4604 y FF(:)g F4(T)2357 4616 y F1(2)2564
4604 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 2564 4604 a 15 w Gb(\000)39 b F5(`)2682 4585 y
Fx(I)2750 4604 y F4(T)2793 4616 y F1(2)2857 4604 y FF(<)-17
b(:)24 b F4(T)3009 4616 y F1(11)p 466 4647 2621 4 v 1484
4727 a Gb(\000)f F5(`)1571 4708 y Fx(I)1638 4727 y F4(t)1682
4739 y F1(1)1766 4727 y F4(t)1810 4739 y F1(2)1873 4727
y FF(:)g F4(T)1991 4739 y F1(12)3088 4826 y Gd(\()r(T)n(A)t(-)t(A)t
F6(P)t(P)q Gd(\))p eop
%%Page: 201 202
201 201 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(201)1196 749 y
 gsave currentpoint translate 0 851966 7800 div 9149545 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1196 749
a 1420 693 a Gb(\000)5 b(;)18 b F4(X)1554 693 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1554
693 a 1570 694 a F4(<:T)1701 706 y F1(1)1780 693 y F5(`)1799
674 y Fx(I)1867 693 y F4(t)1910 705 y F1(2)1974 693 y
FF(:)23 b F4(T)2092 705 y F1(2)p 1230 730 1092 4 v 1230
803 a Gb(\000)g F5(`)1317 784 y Fx(I)1385 803 y Gb(\025)p
F4(X)1473 803 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1473 803 a 16 w F4(<:T)1620 815 y F1(1)1676
803 y F4(.t)1763 815 y F1(2)1827 803 y FF(:)g F5(8)p
F4(X)1991 803 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1991 803 a 16 w F4(<:T)2137 815 y F1(1)2194
803 y F4(.T)2281 815 y F1(2)3044 749 y Gd(\()r(T)n(A)t(-)t(T)n(A)t
F6(B)t(S)p Gd(\))688 1052 y
 gsave currentpoint translate 0 851966 7800 div 17172253 7800 div 1224791
-7800 div box .9 setgray fill grestore
 688 1052 a 722 994 a Gb(\000)g
F5(`)809 975 y Fx(I)877 994 y F4(t)920 1006 y F1(1)984
994 y FF(:)g F4(T)1102 1006 y F1(1)1308 994 y
 gsave currentpoint translate 0 251948 7800 div 6574204 7800 div 579629
-7800 div box .9 setgray fill grestore
 1308 994
a 16 w Gb(\000)g F5(`)1411 975 y Fx(I)1478 994 y F4(T)1522
1006 y F1(1)1585 994 y FV(*)h F5(8)p F4(X<:T)1884 1006
y F1(11)1961 994 y F4(.T)2048 1006 y F1(12)2307 994 y
 gsave currentpoint translate 0 222821 7800 div 4124433 7800 div 579629
-7800 div box .9 setgray fill grestore

2307 994 a 16 w Gb(\000)f F5(`)2410 975 y Fx(I)2477 994
y F4(T)2521 1006 y F1(2)2584 994 y FF(<)-17 b(:)24 b
F4(T)2737 1006 y F1(11)p 722 1033 2108 4 v 1285 1106
a Gb(\000)f F5(`)1372 1086 y Fx(I)1440 1106 y F4(t)1483
1118 y F1(1)1567 1106 y F4([T)1655 1118 y F1(2)1695 1106
y F4(])g FF(:)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2079
1118 y F1(2)2119 1106 y F0(g)p F4(T)2190 1118 y F1(12)3039
1052 y Gd(\()r(T)n(A)t(-)t(T)n(A)t F6(P)t(P)q Gd(\))p
409 1198 9 36 v 418 1198 3000 6 v 3418 1198 38 6 v 3455
1198 9 36 v 575 1364 a(The)18 b(pr)o(oofs)g(of)g(soundness)h(and)f
(completeness)h(of)f(this)h(algorithm)g(with)g(r)o(espect)e(to)i(the)
450 1463 y(original)i(typing)h(r)o(ules)f(ar)o(e)e(fairly)h(r)o
(outine.)450 1646 y Ge(22.2.1)e(Theorem)i([Minimal)f(typing]:)554
1812 y Gd(1.)41 b(If)20 b Gb(\000)j F5(`)821 1793 y Fx(I)888
1812 y F4(t)g FF(:)g F4(T)p Gd(,)d(then)i Gb(\000)g F5(`)h
F4(t)g FF(:)g F4(T)p Gd(.)554 1978 y(2.)41 b(If)20 b
Gb(\000)j F5(`)g F4(t)f FF(:)i F4(T)o Gd(,)d(then)g Gb(\000)i
F5(`)1373 1959 y Fx(I)1440 1978 y F4(t)g FF(:)g F4(M)e
Gd(wher)o(e)f Gb(\000)j F5(`)f F4(M)h FF(<)-17 b(:)24
b F4(T)p Gd(.)1117 b FZ(2)450 2161 y F7(Pr)o(oof:)97
b Gd(Part)30 b(\(1\))f(pr)o(oceeds)h(by)h(a)f(straightforwar)o(d)f
(induction)j(on)f(algorithmic)g(deriva-)450 2260 y(tions.)26
b(Part)20 b(\(2\))f(is)i(mor)o(e)f(inter)o(esting;)g(it)h(goes)g(by)f
(induction)h(on)g(a)f(derivation)g(of)g Gb(\000)j F5(`)g
F4(t)f FF(:)i F4(T)o Gd(.)450 2360 y(\(The)c(most)i(important)f(cases)g
(ar)o(e)e(those)i(for)g(the)g(r)o(ules)i(T)o(-)t(A)t
F6(P)t(P)g Gd(and)f(T)o(-)t(T)n(A)t F6(P)t(P)s Gd(.\))450
2485 y F7(Case)i Gd(T)o(-)t(V)l F6(A)t(R)r F7(:)134 b
F4(t)23 b FY(=)g F4(x)165 b(x:T)22 b F5(2)i Gb(\000)450
2609 y Gd(By)f(T)n(A)t(-)t(V)l F6(A)t(R)q Gd(,)e Gb(\000)i
F5(`)1006 2590 y Fx(I)1073 2609 y F4(x)g FF(:)g F4(T)p
Gd(.)i(By)e(S)t(-)t(R)t F6(E)t(FL)q Gd(,)e Gb(\000)h
F5(`)h F4(T)g FF(<)-17 b(:)24 b F4(T)p Gd(.)450 2734
y F7(Case)g Gd(T)o(-)t(A)t F6(B)t(S)q F7(:)135 b F4(t)22
b FY(=)h Gb(\025)p F4(x:T)1346 2746 y F1(1)1386 2734
y F4(.t)1473 2746 y F1(2)1680 2734 y Gb(\000)6 b(;)17
b F4(x:T)1902 2746 y F1(1)1965 2734 y F5(`)23 b F4(t)2083
2746 y F1(2)2146 2734 y FF(:)h F4(T)2264 2746 y F1(2)2471
2734 y F4(T)e FY(=)h F4(T)2667 2746 y F1(1)2707 2734
y FV(!)p F4(T)2834 2746 y F1(2)450 2858 y Gd(By)16 b(the)g(induction)g
(hypothesis,)i Gb(\000)6 b(;)17 b F4(x:T)1723 2870 y
F1(1)1787 2858 y F5(`)1806 2839 y Fx(I)1873 2858 y F4(t)1917
2870 y F1(2)1980 2858 y FF(:)24 b F4(M)2098 2870 y F1(2)2155
2858 y Gd(for)15 b(some)h F4(M)2529 2870 y F1(2)2585
2858 y Gd(with)h Gb(\000)6 b(;)17 b F4(x:T)2992 2870
y F1(1)3055 2858 y F5(`)23 b F4(M)3173 2870 y F1(2)3236
2858 y FF(<)-17 b(:)24 b F4(T)3389 2870 y F1(2)3429 2858
y Gd(,)450 2958 y(i.e.)i(\(since)21 b(subtyping)h(does)f(not)h(depend)e
(on)i(term)f(variable)e(bindings\),)j Gb(\000)h F5(`)h
F4(M)3048 2970 y F1(2)3112 2958 y FF(<)-17 b(:)25 b F4(T)3265
2970 y F1(2)3306 2958 y Gd(.)h(By)452 3057 y(T)n(A)t(-)t(A)t
F6(B)t(S)q Gd(,)19 b Gb(\000)k F5(`)g F4(t)f FF(:)i F4(T)1118
3069 y F1(1)1159 3057 y FV(!)p F4(M)1285 3069 y F1(2)1326
3057 y Gd(.)h(Finally)-9 b(,)19 b(by)i(S)t(-)t(R)t F6(E)t(FL)g
Gd(and)f(S)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(,)g(we)f(have)f
Gb(\000)23 b F5(`)g F4(T)3133 3069 y F1(1)3174 3057 y
FV(!)p F4(M)3301 3069 y F1(2)3364 3057 y FF(<)-17 b(:)450
3157 y F4(T)494 3169 y F1(1)534 3157 y FV(!)p F4(T)661
3169 y F1(2)701 3157 y Gd(.)450 3282 y F7(Case)24 b Gd(T)o(-)t(A)t
F6(P)t(P)r F7(:)134 b F4(t)23 b FY(=)g F4(t)1218 3294
y F1(1)1303 3282 y F4(t)1346 3294 y F1(2)1553 3282 y
Gb(\000)g F5(`)f F4(t)1738 3294 y F1(1)1801 3282 y FF(:)i
F4(T)1919 3294 y F1(11)1996 3282 y FV(!)p F4(T)2123 3294
y F1(12)1022 3381 y F4(T)f FY(=)g F4(T)1218 3393 y F1(12)1553
3381 y Gb(\000)g F5(`)f F4(t)1738 3393 y F1(2)1801 3381
y FF(:)i F4(T)1919 3393 y F1(11)450 3505 y Gd(By)d(the)h(induction)g
(hypothesis,)g(we)g(have)e Gb(\000)k F5(`)1938 3485 y
Fx(I)2006 3505 y F4(t)2050 3517 y F1(1)2115 3505 y FF(:)g
F4(M)2233 3517 y F1(1)2295 3505 y Gd(and)d Gb(\000)j
F5(`)2545 3485 y Fx(I)2613 3505 y F4(t)2657 3517 y F1(2)2721
3505 y FF(:)g F4(M)2840 3517 y F1(2)2880 3505 y Gd(,)e(with)g
Gb(\000)h F5(`)h F4(M)3300 3517 y F1(1)3364 3505 y FF(<)-17
b(:)450 3604 y F4(T)494 3616 y F1(11)570 3604 y FV(!)p
F4(T)697 3616 y F1(12)797 3604 y Gd(and)24 b Gb(\000)k
F5(`)g F4(M)1157 3616 y F1(2)1226 3604 y FF(<)-17 b(:)29
b F4(T)1384 3616 y F1(11)1461 3604 y Gd(.)34 b(Let)23
b F4(N)1700 3616 y F1(1)1764 3604 y Gd(be)h(the)f(least)h(nonvariable)f
(supertype)g(of)h F4(M)3200 3616 y F1(1)3241 3604 y Gd(\227i.e.,)450
3704 y(suppose)h Gb(\000)31 b F5(`)g F4(M)982 3716 y
F1(1)1054 3704 y FV(*)g F4(N)1184 3716 y F1(1)1224 3704
y Gd(.)39 b(By)25 b(the)g(pr)o(omotion)h(lemma)g(\(22.1.1\),)c
Gb(\000)31 b F5(`)g F4(N)2750 3716 y F1(1)2821 3704 y
FF(<)-17 b(:)33 b F4(T)2982 3716 y F1(11)3059 3704 y
FV(!)p F4(T)3186 3716 y F1(12)3263 3704 y Gd(.)38 b(But)450
3804 y(we)22 b(know)g(that)g F4(N)1021 3816 y F1(1)1083
3804 y Gd(is)g(not)g(a)g(variable,)e(so)i(the)g(inversion)h(lemma)e
(for)h(the)g(subtype)f(r)o(elation)450 3903 y(\(21.4.8\))i(tells)k(us)g
(that)g F4(N)1242 3915 y F1(1)1316 3903 y FY(=)34 b F4(N)1457
3915 y F1(11)1533 3903 y FV(!)p F4(N)1660 3915 y F1(12)1737
3903 y Gd(,)28 b(with)f Gb(\000)33 b F5(`)h F4(T)2188
3915 y F1(11)2298 3903 y FF(<)-17 b(:)35 b F4(N)2461
3915 y F1(11)2565 3903 y Gd(and)26 b Gb(\000)33 b F5(`)h
F4(N)2939 3915 y F1(12)3049 3903 y FF(<)-17 b(:)35 b
F4(T)3212 3915 y F1(12)3289 3903 y Gd(.)43 b(By)450 4003
y(transitivity)-9 b(,)25 b Gb(\000)k F5(`)f F4(M)1088
4015 y F1(2)1157 4003 y FF(<)-17 b(:)30 b F4(N)1316 4015
y F1(11)1393 4003 y Gd(,)24 b(so)h(r)o(ule)h(T)n(A)t(-)t(A)t
F6(P)t(P)f Gd(applies)f(and)f(gives)h(us)h Gb(\000)j
F5(`)2914 3983 y Fx(I)2988 4003 y F4(t)3031 4015 y F1(1)3116
4003 y F4(t)3159 4015 y F1(2)3229 4003 y FF(:)h F4(N)3352
4015 y F1(12)3429 4003 y Gd(,)450 4103 y(which)22 b(satis\002es)f(the)g
(r)o(equir)o(ements.)450 4227 y F7(Case)j Gd(T)o(-)t(T)n(A)t
F6(B)t(S)q F7(:)134 b F4(t)23 b FY(=)g Gb(\025)p F4(X<:T)1438
4239 y F1(1)1479 4227 y F4(.t)1566 4239 y F1(2)1772 4227
y Gb(\000)6 b(;)17 b F4(X<:T)2038 4239 y F1(1)2101 4227
y F5(`)23 b F4(t)2219 4239 y F1(2)2282 4227 y FF(:)h
F4(T)2400 4239 y F1(2)2607 4227 y F4(T)e FY(=)h F5(8)p
F4(X<:T)2980 4239 y F1(1)3020 4227 y F4(.T)3107 4239
y F1(2)450 4352 y Gd(By)d(the)h(induction)g(hypothesis,)h
Gb(\000)6 b(;)17 b F4(X<:T)1784 4364 y F1(1)1848 4352
y F5(`)1867 4332 y Fx(I)1934 4352 y F4(t)1978 4364 y
F1(2)2041 4352 y FF(:)24 b F4(M)2159 4364 y F1(2)2220
4352 y Gd(for)d(some)g F4(M)2604 4364 y F1(2)2665 4352
y Gd(with)g Gb(\000)6 b(;)17 b F4(X<:T)3120 4364 y F1(1)3183
4352 y F5(`)23 b F4(M)3301 4364 y F1(2)3364 4352 y FF(<)-17
b(:)450 4451 y F4(T)494 4463 y F1(2)534 4451 y Gd(.)52
b(By)32 b(T)n(A)t(-)t(T)n(A)t F6(B)t(S)p Gd(,)g Gb(\000)39
b F5(`)1240 4432 y Fx(I)1324 4451 y F4(t)g FF(:)h F5(8)p
F4(X<:T)1719 4463 y F1(1)1759 4451 y F4(.M)1846 4463
y F1(2)1887 4451 y Gd(.)52 b(Finally)-9 b(,)32 b(by)g(S)t(-)t(R)t
F6(E)t(FL)e Gd(and)i(S)t(-)t(A)t F6(L)t(L)p Gd(,)g(we)d(have)450
4551 y Gb(\000)23 b F5(`)g(8)p F4(X<:T)812 4563 y F1(1)853
4551 y F4(.M)940 4563 y F1(2)1003 4551 y FF(<)-17 b(:)24
b F5(8)p F4(X<:T)1333 4563 y F1(1)1373 4551 y F4(.T)1461
4563 y F1(2)1501 4551 y Gd(.)p eop
%%Page: 202 203
202 202 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(202)450 683 y F7(Case)24
b Gd(T)o(-)t(T)n(A)t F6(P)t(P)r F7(:)134 b F4(t)23 b
FY(=)g F4(t)1267 695 y F1(1)1351 683 y F4([T)1439 695
y F1(2)1479 683 y F4(])297 b Gb(\000)23 b F5(`)g F4(t)2005
695 y F1(1)2069 683 y FF(:)g F5(8)p F4(X<:T)2364 695
y F1(11)2441 683 y F4(.T)2528 695 y F1(12)1071 783 y
F4(T)g FY(=)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)1467 795
y F1(2)1507 783 y F0(g)p F4(T)1577 795 y F1(12)1820 783
y Gb(\000)g F5(`)g F4(T)2005 795 y F1(2)2069 783 y FF(<)-17
b(:)24 b F4(T)2222 795 y F1(11)450 906 y Gd(By)h(the)h(induction)h
(hypothesis,)h(we)d(have)g Gb(\000)32 b F5(`)1973 887
y Fx(I)2049 906 y F4(t)2093 918 y F1(1)2165 906 y FF(:)h
F4(M)2292 918 y F1(1)2333 906 y Gd(,)26 b(with)h Gb(\000)k
F5(`)h F4(M)2778 918 y F1(1)2850 906 y FF(<)-17 b(:)33
b F5(8)p F4(X<:T)3188 918 y F1(11)3265 906 y F4(.T)3352
918 y F1(12)3429 906 y Gd(.)450 1006 y(Let)c F4(N)641
1018 y F1(1)711 1006 y Gd(be)h(the)g(least)f(nonvariable)h(supertype)f
(of)h F4(M)2184 1018 y F1(1)2225 1006 y Gd(\227i.e.,)h(suppose)f
Gb(\000)40 b F5(`)f F4(M)3020 1018 y F1(1)3100 1006 y
FV(*)h F4(N)3239 1018 y F1(1)3280 1006 y Gd(.)52 b(By)450
1105 y(the)30 b(pr)o(omotion)g(lemma)g(\(22.1.1\),)e
Gb(\000)40 b F5(`)f F4(N)1829 1117 y F1(1)1909 1105 y
FF(<)-17 b(:)40 b F5(8)p F4(X<:T)2255 1117 y F1(11)2332
1105 y F4(.T)2419 1117 y F1(12)2496 1105 y Gd(.)52 b(But)29
b(we)h(know)g(that)g F4(N)3321 1117 y F1(1)3391 1105
y Gd(is)450 1205 y(not)21 b(a)f(variable,)g(so)h(the)f(inversion)i
(lemma)f(for)f(the)h(subtype)g(r)o(elation)f(\(21.4.8\))d(tells)k(us)g
(that)450 1305 y F4(N)494 1317 y F1(1)570 1305 y FY(=)37
b F5(8)p F4(X<:N)890 1317 y F1(11)967 1305 y F4(.N)1054
1317 y F1(12)1131 1305 y Gd(,)29 b(with)g F4(N)1422 1317
y F1(11)1535 1305 y FY(=)36 b F4(T)1678 1317 y F1(11)1782
1305 y Gd(and)28 b Gb(\000)5 b(;)31 b F4(X<:T)2229 1317
y F1(11)2343 1305 y F5(`)36 b F4(N)2473 1317 y F1(12)2586
1305 y FF(<)-17 b(:)38 b F4(T)2752 1317 y F1(12)2829
1305 y Gd(.)47 b(Rule)30 b(T)n(A)t(-)t(T)n(A)t F6(P)t(P)450
1404 y Gd(gives)g(us)f Gb(\000)40 b F5(`)890 1385 y Fx(I)973
1404 y F4(t)1017 1416 y F1(1)1101 1404 y F4([T)1188 1416
y F1(2)1229 1404 y F4(])e FF(:)i F0(f)p F4(X)e F5(7)p
FV(!)i F4(T)1677 1416 y F1(2)1718 1404 y F0(g)p F4(N)1788
1416 y F1(12)1865 1404 y Gd(,)31 b(and)e(the)h(pr)o(eservation)e(of)i
(subtyping)g(under)450 1504 y(substitution)22 b(\(21.4.6\))c(yields)j
Gb(\000)i F5(`)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)1819
1516 y F1(2)1860 1504 y F0(g)p F4(N)1930 1516 y F1(12)2030
1504 y FF(<)-17 b(:)24 b F0(f)p F4(X)e F5(7)p FV(!)h
F4(T)2382 1516 y F1(2)2422 1504 y F0(g)p F4(T)2493 1516
y F1(12)2592 1504 y FY(=)g F4(T)p Gd(.)450 1629 y F7(Case)h
Gd(T)o(-)t(S)t F6(U)t(B)q F7(:)134 b Gb(\000)23 b F5(`)g
F4(t)g FF(:)g F4(S)166 b Gb(\000)22 b F5(`)h F4(S)g FF(<)-17
b(:)24 b F4(T)450 1753 y Gd(By)f(the)h(induction)h(hypothesis,)g
Gb(\000)j F5(`)1624 1734 y Fx(I)1697 1753 y F4(t)g FF(:)g
F4(M)c Gd(with)g Gb(\000)k F5(`)g F4(M)g FF(<)-17 b(:)29
b F4(S)p Gd(.)34 b(By)25 b(S)t(-)t(T)t F6(R)t(A)t(N)t(S)r
Gd(,)f Gb(\000)29 b F5(`)f F4(M)f FF(<)-17 b(:)30 b F4(T)o
Gd(,)450 1853 y(fr)o(om)20 b(which)k(T)o(-)t(S)t F6(U)t(B)e
Gd(yields)f(the)g(desir)o(ed)e(r)o(esult.)1349 b FZ(2)450
2035 y Ge(22.2.2)18 b(Corollary)j([Decidability)c(of)k(typing]:)40
b Gd(The)31 b Gb(F)2231 2005 y Ga(k)2231 2056 y F9(<:)2311
2035 y Gd(typing)g(r)o(elation)g(is)g(decidable)f(\(if)450
2135 y(we)21 b(ar)o(e)e(given)i(a)f(decision)i(pr)o(ocedur)o(e)c(for)j
(the)g(subtyping)h(r)o(elation\).)684 b FZ(2)450 2318
y F7(Pr)o(oof:)66 b Gd(Given)21 b Gb(\000)e Gd(and)h
F4(t)o Gd(,)g(we)g(can)f(check)h(whether)g(ther)o(e)f(is)h(some)h
F4(T)e Gd(such)h(that)g Gb(\000)j F5(`)g F4(t)f FF(:)i
F4(T)19 b Gd(by)450 2417 y(using)k(the)f(algorithmic)g(typing)h(r)o
(ules)f(to)g(generate)f(a)g(pr)o(oof)h(of)f Gb(\000)k
F5(`)2624 2398 y Fx(I)2694 2417 y F4(t)f FF(:)i F4(T)o
Gd(.)j(If)21 b(we)h(succeed,)450 2517 y(then)c(this)h
F4(T)f Gd(is)g(also)g(a)g(type)g(for)g F4(T)f Gd(in)i(the)f(original)g
(typing)h(r)o(elation)f(\(by)g(part)f(\(1\))g(of)h(22.2.1\).)j(If)450
2616 y(not,)f(then)g(part)e(\(2\))g(of)i(22.2.1)c(implies)k(that)f
F4(t)g Gd(has)h(no)g(type)f(in)g(the)h(original)g(typing)g(r)o
(elation.)575 2716 y(Finally)-9 b(,)35 b(note)d(that)g(the)g
(algorithmic)h(typing)g(r)o(ules)f(constitute)h(a)f(terminating)g
(algo-)450 2816 y(rithm,)d(since)f(they)g(ar)o(e)e(syntax-dir)o(ected)f
(and)i(always)h(r)o(educe)e(the)h(size)g(of)h F4(t)f
Gd(when)h(r)o(ead)450 2915 y(fr)o(om)20 b(bottom)i(to)f(top.)2225
b FZ(2)450 3098 y Ge(22.2.3)18 b(Exercise:)39 b Gd(Show)21
b(how)f(to)g(add)e(primitive)i(booleans)g(and)f(conditionals)i(to)f
(the)g(min-)450 3198 y(imal)h(typing)g(algorithm)h(for)e
Gb(F)1447 3168 y Ga(k)1447 3218 y F9(<:)1496 3198 y Gd(.)26
b(Solution)21 b(on)h(page)e(299.)1063 b FZ(2)450 3483
y Gj(22.3)119 b(Subtyping)30 b(in)g Fq(F)1589 3440 y
F7(k)1589 3513 y F9(<:)450 3673 y Gd(As)g(we)h(saw)f(in)h(the)f(simply)
i(typed)e(lambda-calculus)f(with)i(subtyping,)j(the)c(subtyping)450
3772 y(r)o(ules)21 b(in)g(their)g(pr)o(esent)f(form)h(do)g(not)g
(constitute)h(an)e(algorithm)i(for)f(deciding)f(the)h(subtyp-)450
3872 y(ing)g(r)o(elation.)k(W)-8 b(e)21 b(cannot)h(use)e(them)i(\223fr)
o(om)d(bottom)j(to)f(top,\224)g(for)f(two)i(r)o(easons:)554
4038 y(1.)41 b(Ther)o(e)23 b(ar)o(e)g(some)i(overlaps)f(between)h(the)f
(conclusions)j(of)d(dif)o(fer)o(ent)f(r)o(ules)i(\(speci\002-)658
4137 y(cally)-9 b(,)23 b(between)j(S)t(-)t(R)t F6(E)t(FL)f
Gd(and)e(nearly)h(all)f(the)h(other)g(r)o(ules\).)34
b(That)24 b(is,)g(looking)i(at)d(the)658 4237 y(form)e(of)g(a)g
(derivable)e(subtyping)j(statement)g Gb(\000)h F5(`)h
F4(S)f FF(<)-17 b(:)25 b F4(T)o Gd(,)c(we)g(cannot)h(decide)e(which)658
4337 y(of)g(the)h(r)o(ules)g(must)h(have)e(been)g(used)h(last)g(in)g
(deriving)g(it.)554 4503 y(2.)41 b(Mor)o(e)22 b(seriously)-9
b(,)25 b(one)f(r)o(ule)g(\()r(S)t(-)t(T)t F6(R)t(A)t(N)t(S)r
Gd(\))f(contains)i(a)e(metavariable)f(in)i(the)g(pr)o(emises)658
4602 y(that)c(does)g(not)h(appear)d(in)j(the)f(conclusion.)27
b(T)-8 b(o)21 b(apply)e(this)i(r)o(ule)g(fr)o(om)e(botom)i(to)g(top,)
658 4702 y(we'd)f(need)g(to)i(guess)f(what)g(type)f(to)h(r)o(eplace)e
(this)j(metavariable)d(with.)p eop
%%Page: 203 204
203 203 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(203)575 683 y(The)22 b(overlap)g(between)i
(S)t(-)t(R)t F6(E)t(FL)g Gd(and)e(the)h(other)g(r)o(ules)g(is)g(easily)
f(dealt)g(with,)h(using)h(ex-)450 783 y(actly)e(the)h(same)g(technique)
g(as)f(we)h(used)f(in)h(Chapter)f(12:)28 b(we)23 b(r)o(emove)f(the)h
(full)f(r)o(e\003exivity)450 882 y(r)o(ule)17 b(and)g(r)o(eplace)f(it)h
(by)g(a)g(r)o(estricted)f(r)o(e\003exivity)h(r)o(ule)g(that)h(applies)e
(only)j(to)e(type)g(variables.)1595 1002 y Gb(\000)23
b F5(`)g F4(X)g FF(<)-17 b(:)24 b F4(X)575 1124 y Gd(Next)c(we)i(must)f
(deal)g(with)j(S)t(-)t(T)t F6(R)t(A)t(N)t(S)r Gd(.)j(Unfortunately)-9
b(,)20 b(unlike)i(the)f(simple)h(subtyping)450 1224 y(r)o(elation)i
(studied)h(in)g(Chapter)f(12,)g(the)h(transitivity)g(r)o(ule)g(her)o(e)
f(interacts)g(in)h(an)g(important)450 1324 y(way)30 b(with)g(another)g
(r)o(ule\227namely)i(S)t(-)t(T)t(V)l F6(A)t(R)q Gd(,)g(which)f(allows)f
(assumptions)h(about)e(type)450 1423 y(variables)20 b(to)h(be)f(used)h
(in)g(deriving)g(subtyping)g(statements.)26 b(For)21
b(example,)f(if)658 1575 y Gb(\000)105 b FY(=)h F4(W<)-14
b(:)o(Top)o Gb(;)23 b F4(X<)-14 b(:)o(W)p Gb(;)23 b F4(Y)o(<)-14
b(:X)o Gb(;)23 b F4(Z<)-14 b(:)o(Y)450 1727 y Gd(then)21
b(the)g(statement)658 1879 y Gb(\000)h F5(`)h F4(Z)g
FF(<)-17 b(:)24 b F4(W)450 2031 y Gd(is)i(pr)o(ovable)f(using)i(all)f
(the)g(subtyping)h(r)o(ules,)g(but)f(cannot)h(be)e(pr)o(oved)g(if)j(S)t
(-)t(T)t F6(R)t(A)t(N)t(S)g Gd(is)e(r)o(e-)450 2131 y(moved.)44
b(That)26 b(is,)j(an)d(instance)h(of)i(S)t(-)t(T)t F6(R)t(A)t(N)t(S)g
Gd(whose)e(left-hand)f(subderivation)h(is)g(an)g(in-)450
2231 y(stance)20 b(of)h(the)g(axiom)i(S)t(-)t(T)t(V)l
F6(A)t(R)r Gd(,)d(as)h(in)p 1091 2496 361 5 v 1477 2515
a FY(\()r FD(S)t(-)t(T)t(V)m FE(A)t(R)o FY(\))1091 2586
y Gb(\000)i F5(`)f F4(Z)h FF(<)-17 b(:)24 b F4(Y)2226
2377 y Gd(.)2226 2410 y(.)2226 2443 y(.)p 2055 2496 V
2055 2586 a Gb(\000)f F5(`)g F4(Y)g FF(<)-17 b(:)24 b
F4(W)p 1091 2639 1326 5 v 2441 2658 a FY(\()r FD(S)t(-)t(T)t
FE(R)t(A)t(N)t(S)p FY(\))1573 2729 y Gb(\000)f F5(`)g
F4(Z)f FF(<)-17 b(:)24 b F4(W)450 2863 y Gd(cannot,)d(in)g(general,)f
(be)h(eliminated.)575 2963 y(Fortunately)-9 b(,)20 b(it)h(turns)h(out)f
(that)g(derivations)g(of)f(this)i(form)f(ar)o(e)e(the)i
F7(only)g Gd(essential)g(uses)450 3063 y(of)i(transitivity)h(in)g
(subtyping.)34 b(This)24 b(observation)f(can)g(be)g(made)g(pr)o(ecise)f
(by)i(intr)o(oducing)450 3162 y(a)c(new)h(subtyping)h(r)o(ule)1352
3285 y F4(X<:U)g F5(2)h Gb(\000)166 b(\000)23 b F5(`)f
F4(U)h FF(<)-17 b(:)24 b F4(T)p 1352 3328 848 4 v 1595
3408 a Gb(\000)f F5(`)g F4(X)g FF(<)-17 b(:)24 b F4(T)450
3528 y Gd(that)h(captur)o(es)f(exactly)h(this)h(pattern)f(of)g
(variable)f(lookup)i(followed)g(by)f(transitivity)-9
b(,)26 b(and)450 3628 y(showing)c(\(as)e(we)g(will)h(do)f(below\))h
(that)f(r)o(eplacing)f(the)i(transitivity)g(and)e(variable)g(r)o(ules)i
(by)450 3727 y(this)g(one)h(does)e(not)i(change)f(the)g(set)f(of)h
(derivable)e(subtyping)j(statements.)575 3827 y(These)j(intuitions)j
(ar)o(e)d(summarized)g(in)i(the)f(following)h(de\002nition.)42
b(The)26 b(algorithmic)450 3927 y(subtype)21 b(r)o(elation)f(of)h
Gb(F)1202 3896 y Ga(k)1202 3947 y F9(<:)1271 3927 y Gd(is)g(the)g
(least)g(r)o(elation)f(closed)h(under)f(the)h(following)i(r)o(ules:)450
4079 y Ge(Algorithmic)c(subtyping)p 409 4160 9 36 v 418
4131 3000 6 v 3418 4131 38 6 v 3455 4160 9 36 v 450 4274
a F7(Algorithmic)g(subtyping)p 3020 4192 431 4 v 3020
4299 4 108 v 1831 w Gb(\000)k F5(`)3135 4255 y Fx(I)3203
4274 y F4(S)f FF(<)-17 b(:)24 b F4(T)p 3447 4299 V 3020
4302 431 4 v 1506 4423 a
 gsave currentpoint translate 0 432999 7800 div 4266127 7800 div 760679
-7800 div box .9 setgray fill grestore
 1506 4423 a 1530 4424 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1530
4424 a 16 w Gb(\000)38 b F5(`)1648 4404 y Fx(I)1716 4424
y F4(S)22 b FF(<)-17 b(:)24 b F4(Top)3092 4423 y Gd(\()r(S)t(A)t(-)t(T)
s F6(O)t(P)q Gd(\))1565 4612 y
 gsave currentpoint translate 0 419430 7800 div 3328969 7800 div 747110
-7800 div box .9 setgray fill grestore
 1565 4612 a 1589 4611
a Gb(\000)f F5(`)1676 4591 y Fx(I)1743 4611 y F4(X)g
FF(<)-17 b(:)24 b F4(X)2814 4612 y Gd(\()r(S)t(A)t(-)t(R)t
F6(E)t(FL)t Gd(-)t(T)t(V)l F6(A)t(R)p Gd(\))1312 4854
y
 gsave currentpoint translate 0 851966 7800 div 7327853 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1312 4854 a 1346 4798 a F4(X<:U)d F5(2)j Gb(\000)165
b(\000)23 b F5(`)1919 4778 y Fx(I)1987 4798 y F4(U)f
FF(<)-17 b(:)24 b F4(T)p 1346 4834 861 4 v 1589 4907
a Gb(\000)f F5(`)1676 4888 y Fx(I)1743 4907 y F4(X)g
FF(<)-17 b(:)24 b F4(T)2742 4854 y Gd(\()r(S)t(A)t(-)t(T)t
F6(R)t(A)t(N)t(S)t Gd(-)t(T)t(V)l F6(A)t(R)q Gd(\))p
eop
%%Page: 204 205
204 204 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(204)1173 753 y
 gsave currentpoint translate 0 879104 7800 div 9522980 7800 div 1206784
-7800 div box .9 setgray fill grestore
 1173 753
a 1207 697 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1207 697 a 16 w Gb(\000)38 b F5(`)1325 678
y Fx(I)1393 697 y F4(T)1436 709 y F1(1)1500 697 y FF(<)-17
b(:)24 b F4(S)1652 709 y F1(1)1859 697 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1859 697 a 16
w Gb(\000)38 b F5(`)1977 678 y Fx(I)2045 697 y F4(S)2088
709 y F1(2)2152 697 y FF(<)-17 b(:)24 b F4(T)2305 709
y F1(2)p 1207 734 1139 4 v 1366 810 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1366 810 a 16 w
Gb(\000)38 b F5(`)1484 791 y Fx(I)1552 810 y F4(S)1595
822 y F1(1)1636 810 y FV(!)p F4(S)1762 822 y F1(2)1826
810 y FF(<)-17 b(:)24 b F4(T)1978 822 y F1(1)2019 810
y FV(!)p F4(T)2146 822 y F1(2)2954 753 y Gd(\()r(S)t(A)t(-)t(A)t
F6(R)t(R)t(O)t(W)r Gd(\))1210 1053 y
 gsave currentpoint translate 0 851966 7800 div 8934117 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1210 1053 a 1418
997 a Gb(\000)6 b(;)17 b F4(X<:)o(U)1683 1009 y F1(1)1747
997 y F5(`)1766 978 y Fx(I)1833 997 y F4(S)1877 1009
y F1(2)1941 997 y FF(<)-17 b(:)24 b F4(T)2093 1009 y
F1(2)p 1244 1034 1064 4 v 1244 1107 a Gb(\000)f F5(`)1331
1088 y Fx(I)1398 1107 y F5(8)p F4(X<:)n(U)1619 1119 y
F1(1)1659 1107 y F4(.S)1747 1119 y F1(2)1810 1107 y FF(<)-17
b(:)24 b F5(8)p F4(X<:)n(U)2140 1119 y F1(1)2180 1107
y F4(.T)2267 1119 y F1(2)3088 1053 y Gd(\()r(S)t(A)t(-)t(A)t
F6(L)t(L)p Gd(\))p 409 1199 9 36 v 418 1199 3000 6 v
3418 1199 38 6 v 3455 1199 9 36 v 450 1382 a Ge(22.3.1)18
b(Lemma)h([Re\003exivity)f(of)j(the)f(algorithmic)f(subtype)g
(relation]:)39 b Gd(The)16 b(statement)g Gb(\000)23 b
F5(`)3465 1362 y Fx(I)450 1481 y F4(T)g FF(<)-17 b(:)24
b F4(T)c Gd(is)h(pr)o(ovable)f(for)g(all)h Gb(\000)f
Gd(and)h F4(T)o Gd(.)1750 b FZ(2)450 1664 y F7(Pr)o(oof:)66
b Gd(Easy)21 b(induction)g(on)h F4(T)o Gd(.)1929 b FZ(2)450
1846 y Ge(22.3.2)18 b(Lemma)h([T)-9 b(ransitivity)19
b(of)i(the)f(algorithmic)f(subtype)g(relation]:)39 b
Gd(If)c Gb(\000)50 b F5(`)3081 1827 y Fx(I)3176 1846
y F4(S)g FF(<)-17 b(:)51 b F4(Q)450 1946 y Gd(and)20
b Gb(\000)j F5(`)698 1927 y Fx(I)766 1946 y F4(Q)f FF(<)-17
b(:)24 b F4(T)p Gd(,)c(then)i Gb(\000)g F5(`)1297 1927
y Fx(I)1365 1946 y F4(S)h FF(<)-17 b(:)24 b F4(T)o Gd(.)1789
b FZ(2)450 2129 y F7(Pr)o(oof:)66 b Gd(By)31 b(induction)g(on)g(the)g
(sum)g(of)f(the)h(sizes)f(of)g(the)h(two)g(derivations.)54
b(Given)31 b(two)450 2228 y(derivations)21 b(of)f(some)i(total)f(size,)
f(we)h(pr)o(oceed)e(by)i(considering)g(the)g(\002nal)g(r)o(ules)g(in)h
(each.)575 2328 y(First,)i(if)g(the)g(right-hand)f(derivation)h(is)g
(an)f(instance)h(of)i(S)t(A)t(-)t(T)s F6(O)t(P)r Gd(,)e(then)g(we)g(ar)
o(e)e(done,)450 2428 y(since)g Gb(\000)h F5(`)h F4(S)g
FF(<)-17 b(:)25 b F4(Top)20 b Gd(by)j(S)t(A)t(-)t(T)s
F6(O)t(P)r Gd(.)k(Mor)o(eover)-6 b(,)20 b(if)h(the)g(left-hand)g
(derivation)g(is)h(an)f(instance)450 2527 y(of)27 b(S)t(A)t(-)t(T)s
F6(O)t(P)r Gd(,)f(then)g F4(Q)31 b FY(=)g F4(Top)25 b
Gd(and)f(by)i(looking)h(at)e(the)g(algorithmic)h(r)o(ules)g(we)f(see)h
(that)f(the)450 2627 y(right-hand)c(derivation)f(must)i(also)f(be)f(an)
h(instance)g(of)h(S)t(A)t(-)t(T)s F6(O)t(P)r Gd(.)575
2727 y(If)27 b(either)g(derivation)g(is)h(an)f(instance)h(of)h(S)t(A)t
(-)t(R)t F6(E)t(FL)t Gd(-)t(T)t(V)l F6(A)t(R)q Gd(,)g(then)f(we)g(ar)o
(e)e(again)h(done)450 2826 y(since)21 b(the)g(other)g(derivation)f(is)i
(the)f(desir)o(ed)e(r)o(esult.)575 2926 y(Next,)33 b(if)d(the)i
(left-hand)e(derivation)g(ends)h(with)h(an)f(instance)g(of)i(S)t(A)t(-)
t(T)t F6(R)t(A)t(N)t(S)t Gd(-)t(T)t(V)l F6(A)t(R)r Gd(,)450
3025 y(then)21 b F4(S)i FY(=)g F4(X)d Gd(with)h F4(X<:U)h
F5(2)h Gb(\000)d Gd(and)g(we)h(have)f(a)g(subderivation)h(with)g
(conclusion)h Gb(\000)h F5(`)g F4(U)g FF(<)-17 b(:)24
b F4(Q)o Gd(.)450 3125 y(By)c(the)h(induction)g(hypothesis,)g
Gb(\000)i F5(`)1605 3106 y Fx(I)1673 3125 y F4(U)f FF(<)-17
b(:)24 b F4(T)p Gd(,)c(and,)g(by)i(S)t(A)t(-)t(T)t F6(R)t(A)t(N)t(S)t
Gd(-)t(T)t(V)l F6(A)t(R)g Gd(again,)e Gb(\000)j F5(`)3230
3106 y Fx(I)3297 3125 y F4(X)g FF(<)-17 b(:)450 3225
y F4(T)p Gd(,)20 b(as)h(r)o(equir)o(ed.)575 3324 y(If)h(the)g
(left-hand)g(derivation)h(ends)f(with)h(an)g(instance)g(of)h(S)t(A)t(-)
t(A)t F6(R)t(R)t(O)t(W)s Gd(,)f(then)g(we)f(have)450
3424 y F4(S)29 b FY(=)g F4(S)659 3436 y F1(1)699 3424
y FV(!)p F4(S)826 3436 y F1(2)890 3424 y Gd(and)24 b
F4(Q)29 b FY(=)g F4(Q)1264 3436 y F1(1)1304 3424 y FV(!)p
F4(Q)1431 3436 y F1(2)1471 3424 y Gd(,)c(with)g(subderivations)f
Gb(\000)29 b F5(`)2374 3404 y Fx(I)2448 3424 y F4(Q)2492
3436 y F1(1)2561 3424 y FF(<)-17 b(:)31 b F4(S)2720 3436
y F1(1)2785 3424 y Gd(and)24 b Gb(\000)29 b F5(`)3043
3404 y Fx(I)3116 3424 y F4(S)3160 3436 y F1(2)3230 3424
y FF(<)-17 b(:)30 b F4(Q)3389 3436 y F1(2)3429 3424 y
Gd(.)450 3524 y(But,)21 b(since)h(we)f(have)g(alr)o(eady)f(consider)o
(ed)g(the)i(case)f(wher)o(e)f(the)i(right-hand)f(derivation)h(is)452
3623 y(S)t(A)t(-)t(T)s F6(O)t(P)r Gd(,)e(the)g(only)i(r)o(emaining)e
(possibility)i(is)f(that)f(the)h(right-hand)f(derivation)g(also)h(ends)
450 3723 y(with)33 b(S)t(A)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(;)h(we)c(ther)o(efor)o(e)e(have)h F4(T)40 b FY(=)g
F4(T)2081 3735 y F1(1)2121 3723 y FV(!)p F4(T)2248 3735
y F1(2)2288 3723 y Gd(,)32 b(and)e(two)g(mor)o(e)g(subderivations)450
3822 y Gb(\000)k F5(`)548 3803 y Fx(I)627 3822 y F4(T)671
3834 y F1(1)746 3822 y FF(<)-17 b(:)36 b F4(Q)910 3834
y F1(1)978 3822 y Gd(and)26 b Gb(\000)35 b F5(`)1244
3803 y Fx(I)1323 3822 y F4(Q)1366 3834 y F1(2)1441 3822
y FF(<)-17 b(:)36 b F4(T)1605 3834 y F1(2)1646 3822 y
Gd(.)44 b(W)-8 b(e)27 b(now)h(apply)f(the)g(induction)h(hypothesis)g
(twice,)450 3922 y(obtaining)19 b Gb(\000)k F5(`)906
3903 y Fx(I)974 3922 y F4(T)1017 3934 y F1(1)1081 3922
y FF(<)-17 b(:)24 b F4(S)1234 3934 y F1(1)1293 3922 y
Gd(and)18 b Gb(\000)23 b F5(`)1539 3903 y Fx(I)1606 3922
y F4(S)1650 3934 y F1(2)1713 3922 y FF(<)-17 b(:)24 b
F4(T)1866 3934 y F1(2)1906 3922 y Gd(.)h(Finally)-9 b(,)21
b(S)t(A)t(-)t(A)t F6(R)t(R)t(O)t(W)h Gd(yields)c Gb(\000)23
b F5(`)3022 3903 y Fx(I)3090 3922 y F4(S)3133 3934 y
F1(1)3174 3922 y FV(!)p F4(S)3301 3934 y F1(2)3364 3922
y FF(<)-17 b(:)450 4022 y F4(T)494 4034 y F1(1)534 4022
y FV(!)p F4(T)661 4034 y F1(2)701 4022 y Gd(,)21 b(as)f(r)o(equir)o
(ed.)575 4121 y(The)29 b(case)f(wher)o(e)h(the)g(left-hand)g
(derivation)g(ends)g(with)h(an)f(instance)h(of)h(S)t(A)t(-)t(A)t
F6(L)t(L)f Gd(is)450 4221 y(similar)-6 b(.)2674 b FZ(2)450
4404 y Ge(22.3.3)18 b(Theorem)i([Soundness)f(and)h(completeness)d(of)k
(algorithmic)e(subtyping]:)554 4570 y Gd(1.)41 b(If)20
b Gb(\000)j F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)d Gd(then)g
Gb(\000)i F5(`)1387 4550 y Fx(I)1454 4570 y F4(S)g FF(<)-17
b(:)24 b F4(T)o Gd(.)554 4736 y(2.)41 b(If)20 b Gb(\000)j
F5(`)821 4716 y Fx(I)888 4736 y F4(S)g FF(<)-17 b(:)24
b F4(T)c Gd(then)h Gb(\000)i F5(`)g F4(S)g FF(<)-17 b(:)24
b F4(T)o Gd(.)1700 b FZ(2)p eop
%%Page: 205 206
205 205 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(205)450 683 y F7(Pr)o(oof:)66
b Gd(Both)21 b(dir)o(ections)f(pr)o(oceed)e(by)i(induction)h(on)g
(derivations.)k(Soundness)c(is)f(r)o(outine.)450 783
y(Completeness)25 b(is)f(also)h(straightforwar)o(d,)e(since)i(we)f
(have)g(alr)o(eady)e(done)i(the)g(har)o(d)f(work)450
882 y(\(for)i(the)h(r)o(e\003exivity)g(and)f(transitivity)i(r)o(ules)f
(of)g(the)g(original)g(subtype)g(r)o(elation\))f(in)i(Lem-)450
982 y(mas)21 b(22.3.1)d(and)i(22.3.2.)2153 b FZ(2)575
1165 y Gd(Finally)-9 b(,)30 b(we)e(should)h(check)f(that)g(the)h
(subtyping)g(r)o(ules)f(de\002ne)g(an)g(algorithm)h(that)g(is)450
1264 y F7(total)p Gd(\227i.e.,)23 b(that)i(always)f(terminates)g(no)h
(matter)f(what)g(input)h(it)f(is)h(given.)36 b(W)-8 b(e)25
b(do)f(this)h(by)450 1364 y(assigning)c(a)d(weight)i(to)g(each)f
(subtyping)h(statement,)g(and)e(checking)i(that)g(the)f(algorithmic)450
1463 y(r)o(ules)i(all)g(have)f(conclusions)i(with)g(gr)o(eater)d
(weight)j(than)f(their)f(pr)o(emises.)450 1646 y Ge(22.3.4)e
(De\002nition:)40 b Gd(The)23 b Ge(weight)f Gd(of)h(a)g(type)g
F4(T)g Gd(in)h(a)f(context)g Gb(\000)6 b Gd(,)18 b(written)23
b F7(weight)3053 1673 y F1(\000)3096 1646 y FY(\()p F4(T)p
FY(\))p Gd(,)h(is)g(de-)450 1746 y(\002ned)d(as)f(follows:)699
1891 y F7(weight)925 1919 y F1(\000)968 1891 y FY(\()p
F4(X)p FY(\))388 b(=)83 b F7(weight)1836 1919 y F1(\000)1873
1928 y FB(1)1909 1891 y FY(\()p F4(U)o FY(\))19 b(+)f
Gb(1)612 b Gd(if)21 b Gb(\000)h FY(=)h Gb(\000)3037 1903
y F1(1)3071 1891 y Gb(;)h F4(X<:U)n Gb(;)f(\000)3380
1903 y F1(2)699 1997 y F7(weight)925 2024 y F1(\000)968
1997 y FY(\()p F4(Top)o FY(\))301 b(=)83 b Gb(1)699 2097
y F7(weight)925 2124 y F1(\000)968 2097 y FY(\()p F4(T)1044
2109 y F1(1)1085 2097 y FV(!)p F4(T)1211 2109 y F1(2)1252
2097 y FY(\))180 b(=)83 b F7(weight)1836 2124 y F1(\000)1879
2097 y FY(\()p F4(T)1955 2109 y F1(1)1995 2097 y FY(\))19
b(+)f F7(weight)2353 2124 y F1(\000)2396 2097 y FY(\()p
F4(T)2472 2109 y F1(2)2513 2097 y FY(\))g(+)h Gb(1)699
2196 y F7(weight)925 2223 y F1(\000)968 2196 y FY(\()p
F5(8)p F4(X<:T)1221 2208 y F1(1)1261 2196 y F4(.T)p FY(\))83
b(=)g F7(weight)1836 2223 y F1(\000)5 b(;)13 b Gc(X<:T)2039
2232 y FB(1)2080 2196 y FY(\()p F4(T)2156 2208 y F1(2)2196
2196 y FY(\))19 b(+)f Gb(1)450 2368 y Gd(The)h Ge(weight)e
Gd(of)i(a)f(subtyping)i(statement)e(\223)p Gb(\000)23
b F5(`)g F4(S)f FF(<)-17 b(:)24 b F4(T)p Gd(\224)18 b(is)h(the)g
(maximum)g(weight)h(of)e F4(S)g Gd(and)450 2467 y F4(T)i
Gd(in)i Gb(\000)5 b Gd(.)2715 b FZ(2)450 2650 y Ge(22.3.5)18
b(Theorem:)41 b Gd(The)18 b(weight)g(of)g(the)g(conclusion)h(in)g(an)e
(instance)h(of)g(any)g(of)g(the)g(algorith-)450 2749
y(mic)j(subtyping)h(r)o(ules)f(is)g(strictly)g(gr)o(eater)e(than)i(the)
g(weight)h(of)e(any)h(of)g(the)g(pr)o(emises.)132 b FZ(2)450
2932 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19 b(inspection)j(of)f
(the)g(r)o(ules.)1236 b FZ(2)450 3218 y Gj(22.4)119 b(Subtyping)30
b(in)g Fq(F)1589 3174 y F7(f)1589 3247 y F9(<:)450 3435
y Gd(The)17 b(only)h(dif)o(fer)o(ence)c(in)k(the)f(full)g(system)g
Gb(F)1847 3390 y Ga(f)1847 3443 y F9(<:)1913 3435 y Gd(is)g(that)g(the)
g(quanti\002er)g(subtyping)h(r)o(ule)h(S)t(-)t(A)t F6(L)t(L)450
3534 y Gd(is)i(r)o(eplaced)e(by)i(the)g(mor)o(e)f(expr)o(essive)g
(variant:)1121 3660 y Gb(\000)i F5(`)h F4(T)1306 3672
y F1(1)1369 3660 y FF(<)-17 b(:)24 b F4(S)1522 3672 y
F1(1)1728 3660 y Gb(\000)6 b(;)17 b F4(X<:T)1994 3672
y F1(1)2057 3660 y F5(`)23 b F4(S)2175 3672 y F1(2)2238
3660 y FF(<)-17 b(:)24 b F4(T)2391 3672 y F1(2)p 1121
3704 1311 4 v 1250 3783 a Gb(\000)f F5(`)g(8)p F4(X<:S)1613
3795 y F1(1)1653 3783 y F4(.S)1740 3795 y F1(2)1804 3783
y FF(<)-17 b(:)24 b F5(8)p F4(X<:T)2133 3795 y F1(1)2174
3783 y F4(.T)2261 3795 y F1(2)3157 3723 y Gd(\()r(S)t(-)t(A)t
F6(L)t(L)p Gd(\))575 3934 y(The)e(algorithmic)i(subtype)e(r)o(elation)h
(of)f Gb(F)1940 3889 y Ga(f)1940 3942 y F9(<:)2012 3934
y Gd(consists)i(of)e(exactly)g(the)h(same)f(set)h(of)g(r)o(ules)450
4033 y(as)d(the)h(algorithm)g(for)f Gb(F)1233 4003 y
Ga(k)1233 4054 y F9(<:)1282 4033 y Gd(,)g(except)g(that)j(S)t(A)t(-)t
(A)t F6(L)t(L)d Gd(is)h(r)o(e\002ned)f(to)h(r)o(e\003ect)f(the)g(new)h
(version)g(of)452 4133 y(S)t(-)t(A)t F6(L)t(L)q Gd(:)1114
4237 y Gb(\000)i F5(`)g F4(T)1299 4249 y F1(1)1363 4237
y FF(<)-17 b(:)24 b F4(S)1516 4249 y F1(1)1722 4237 y
Gb(\000)6 b(;)17 b F4(X<:)o(T)1987 4249 y F1(1)2051 4237
y F5(`)2070 4218 y Fx(I)2137 4237 y F4(S)2181 4249 y
F1(2)2245 4237 y FF(<)-17 b(:)24 b F4(T)2397 4249 y F1(2)p
1114 4281 1324 4 v 1244 4360 a Gb(\000)f F5(`)1331 4341
y Fx(I)1398 4360 y F5(8)p F4(X<:)n(S)1619 4372 y F1(1)1659
4360 y F4(.S)1747 4372 y F1(2)1810 4360 y FF(<)-17 b(:)24
b F5(8)p F4(X<:)n(T)2140 4372 y F1(1)2180 4360 y F4(.T)2267
4372 y F1(2)3088 4300 y Gd(\()r(S)t(A)t(-)t(A)t F6(L)t(L)p
Gd(\))575 4496 y(As)g(with)i Gb(F)934 4466 y Ga(k)934
4517 y F9(<:)983 4496 y Gd(,)g(the)f(soundness)h(and)e(completeness)i
(of)f(this)h(algorithmic)g(r)o(elation)e(with)450 4596
y(r)o(espect)h(to)h(the)g(original)g(subtype)g(r)o(elation)f(can)h(be)f
(shown)i(easily)-9 b(,)27 b(once)f(we)g(have)f(estab-)450
4695 y(lished)i(that)f(the)g(algorithmic)i(r)o(elation)d(is)i(r)o
(e\003exive)e(and)h(transitive.)42 b(For)27 b(r)o(e\003exivity)-9
b(,)27 b(the)450 4795 y(ar)o(gument)j(is)h(exactly)f(the)g(same)h(as)f
(befor)o(e.)53 b(For)31 b(transitivity)-9 b(,)33 b(on)e(the)g(other)f
(hand,)j(the)450 4895 y(issues)21 b(ar)o(e)f(mor)o(e)g(subtle.)p
eop
%%Page: 206 207
206 206 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(206)450 683 y Ge(22.4.1)18
b(Lemma)h([T)-9 b(ransitivity)19 b(and)h(narrowing]:)554
849 y Gd(1.)41 b(If)20 b Gb(\000)j F5(`)821 830 y Fx(I)888
849 y F4(S)g FF(<)-17 b(:)24 b F4(Q)c Gd(and)h Gb(\000)h
F5(`)1376 830 y Fx(I)1444 849 y F4(Q)h FF(<)-17 b(:)24
b F4(T)o Gd(,)d(then)g Gb(\000)i F5(`)1976 830 y Fx(I)2043
849 y F4(S)g FF(<)-17 b(:)24 b F4(T)o Gd(.)554 1015 y(2.)41
b(If)20 b Gb(\000)6 b(;)17 b F4(X<:Q)n Gb(;)23 b(\001)h
F5(`)1147 996 y Fx(I)1214 1015 y F4(M)f FF(<)-17 b(:)24
b F4(N)c Gd(and)g Gb(\000)j F5(`)1702 996 y Fx(I)1770
1015 y F4(P)f FF(<)-17 b(:)24 b F4(Q)d Gd(then)g Gb(\000)5
b(;)18 b F4(X<:P)n Gb(;)23 b(\001)h F5(`)2607 996 y Fx(I)2674
1015 y F4(S)f FF(<)-17 b(:)24 b F4(T)o Gd(.)480 b FZ(2)450
1198 y F7(Pr)o(oof:)66 b Gd(The)22 b(two)g(parts)f(ar)o(e)g(pr)o(oved)f
(simultaneously)-9 b(,)23 b(by)f(induction)g(on)h(the)f(size)f(of)h
F4(Q)o Gd(.)28 b(At)450 1297 y(each)16 b(stage)h(of)f(the)h(induction,)
i(the)e(ar)o(gument)f(for)g(part)g(\(2\))g(assumes)h(that)g(part)f
(\(1\))f(has)i(been)450 1397 y(established)23 b(alr)o(eady)e(for)i(the)
h F4(Q)e Gd(in)i(question;)i(part)c(\(1\),)g(on)i(the)f(other)h(hand,)f
(uses)h(part)e(\(2\))450 1497 y(only)g(for)e(strictly)h(smaller)g
F4(Q)p Gd(s.)554 1679 y(1.)41 b(Most)33 b(of)h(the)f(ar)o(gument)g(is)h
(identical)f(to)h(the)g(pr)o(oof)f(of)g(22.3.2.)62 b(The)33
b(only)i(dif)o(fer)o(-)658 1779 y(ence)c(lies)h(in)g(the)g(case)f(wher)
o(e)g(both)h(of)g(the)f(given)h(derivations)g(end)f(in)i(instances)658
1879 y(of)22 b(S)t(A)t(-)t(A)t F6(L)t(L)q Gd(.)j(In)c(this)h(case,)e
(we)g(have)865 2078 y F4(S)j FY(=)g F5(8)p F4(X<:S)1238
2090 y F1(1)1279 2078 y F4(.S)1366 2090 y F1(2)865 2177
y F4(Q)g FY(=)g F5(8)p F4(X<:Q)1238 2189 y F1(1)1279
2177 y F4(.Q)1366 2189 y F1(2)865 2277 y F4(T)g FY(=)g
F5(8)p F4(X<:T)1238 2289 y F1(1)1279 2277 y F4(.T)1366
2289 y F1(2)865 2377 y Gb(\000)g F5(`)g F4(Q)1050 2389
y F1(1)1114 2377 y FF(<)-17 b(:)24 b F4(S)1267 2389 y
F1(1)865 2476 y Gb(\000)6 b(;)17 b F4(X<:Q)1130 2488
y F1(1)1194 2476 y F5(`)1213 2457 y Fx(I)1280 2476 y
F4(S)1324 2488 y F1(2)1388 2476 y FF(<)-17 b(:)24 b F4(Q)1540
2488 y F1(2)1581 2476 y Gb(\000)f F5(`)f F4(T)1766 2488
y F1(1)1829 2476 y FF(<)-17 b(:)24 b F4(Q)1982 2488 y
F1(1)865 2576 y Gb(\000)6 b(;)17 b F4(X<:T)1130 2588
y F1(1)1194 2576 y F5(`)1213 2556 y Fx(I)1280 2576 y
F4(Q)1324 2588 y F1(2)1388 2576 y FF(<)-17 b(:)24 b F4(S)1540
2588 y F1(2)658 2774 y Gd(as)g(subderivations.)39 b(By)25
b(part)f(\(1\))g(of)h(the)h(induction)g(hypothesis,)h(we)e(can)g
(immedi-)658 2874 y(ately)17 b(combine)h(the)g(thr)o(ee)e
(subderivations)i(for)f(the)h(bounds)g(to)g(obtain)g
Gb(\000)23 b F5(`)3062 2854 y Fx(I)3129 2874 y F4(T)3173
2886 y F1(1)3236 2874 y FF(<)-17 b(:)24 b F4(S)3389 2886
y F1(1)3429 2874 y Gd(.)658 2973 y(For)30 b(the)h(bodies,)i(we)d(need)g
(to)h(work)g(a)f(little)h(har)o(der)-6 b(,)31 b(since)f(the)h(two)g
(contexts)g(do)658 3073 y(not)g(quite)h(agr)o(ee.)54
b(W)-8 b(e)31 b(\002rst)g(use)g(part)f(\(2\))g(of)g(the)h(induction)h
(hypothesis)g(to)g(\223nar)o(-)658 3173 y(r)o(ow\224)e(the)h(bound)g
(of)g F4(X)f Gd(in)i(the)f(derivation)f(of)h Gb(\000)6
b(;)36 b F4(X<:Q)2520 3185 y F1(1)2602 3173 y F5(`)2621
3153 y Fx(I)2707 3173 y F4(S)2751 3185 y F1(2)2833 3173
y FF(<)-17 b(:)43 b F4(Q)3004 3185 y F1(2)3045 3173 y
Gd(,)33 b(obtaining)658 3272 y Gb(\000)5 b(;)17 b F4(X<:T)923
3284 y F1(1)986 3272 y F5(`)1005 3253 y Fx(I)1073 3272
y F4(S)1116 3284 y F1(2)1180 3272 y FF(<)-17 b(:)24 b
F4(Q)1333 3284 y F1(2)1373 3272 y Gd(.)h(Now)c(part)e(\(1\))f(of)i(the)
g(induction)h(hypothesis)g(applies,)e(yield-)658 3372
y(ing)k Gb(\000)6 b(;)22 b F4(X<:T)1069 3384 y F1(1)1137
3372 y F5(`)1156 3353 y Fx(I)1228 3372 y F4(S)1272 3384
y F1(2)1340 3372 y FF(<)-17 b(:)28 b F4(T)1497 3384 y
F1(2)1538 3372 y Gd(.)k(Finally)-9 b(,)24 b(by)i(S)t(A)t(-)t(A)t
F6(L)t(L)p Gd(,)d Gb(\000)28 b F5(`)2439 3353 y Fx(I)2511
3372 y F5(8)p F4(X<:S)2731 3384 y F1(1)2772 3372 y F4(.S)2859
3384 y F1(2)2927 3372 y FF(<)-17 b(:)29 b F5(8)p F4(X<:T)3261
3384 y F1(1)3302 3372 y F4(.T)3389 3384 y F1(2)3429 3372
y Gd(,)658 3472 y(as)20 b(r)o(equir)o(ed.)554 3638 y(2.)41
b(Given)18 b F4(Q)f Gd(of)h(a)f(certain)g(size,)h(we)f(use)h(an)f
(inner)h(induction)h(on)f(the)g(size)f(of)h(a)f(derivation)658
3737 y(of)30 b Gb(\000)5 b(;)36 b F4(X<:Q)n Gb(;)41 b(\001)g
F5(`)1227 3718 y Fx(I)1312 3737 y F4(S)g FF(<)-17 b(:)42
b F4(T)o Gd(,)33 b(with)e(a)f(case)f(analysis)i(on)g(the)f(last)h(r)o
(ule)f(used)g(in)h(this)658 3837 y(derivation.)658 3970
y(The)20 b(only)i(inter)o(esting)g(case)e(is)j(S)t(A)t(-)t(T)t
F6(R)t(A)t(N)t(S)t Gd(-)t(T)t(V)l F6(A)t(R)r Gd(,)e(wher)o(e)f
F4(S)j FY(=)g F4(X)e Gd(and)f Gb(\000)6 b(;)17 b F4(X<:Q)o
Gb(;)23 b(\001)h F5(`)3406 3950 y Fx(I)658 4069 y F4(Q)31
b FF(<)-17 b(:)32 b F4(T)25 b Gd(as)g(a)g(subderivation.)39
b(By)25 b(the)g(inner)h(induction)g(hypothesis,)i Gb(\000)5
b(;)26 b F4(X<:P)n Gb(;)32 b(\001)g F5(`)3406 4050 y
Fx(I)658 4169 y F4(Q)22 b FF(<)-17 b(:)24 b F4(T)p Gd(.)h(Rule)c(S)t(A)
t(-)t(T)t F6(R)t(A)t(N)t(S)t Gd(-)t(T)t(V)l F6(A)t(R)g
Gd(now)f(yields)g Gb(\000)5 b(;)18 b F4(X<:P)n Gb(;)23
b(\001)g F5(`)2617 4150 y Fx(I)2685 4169 y F4(X)g FF(<)-17
b(:)24 b F4(T)o Gd(,)19 b(as)g(r)o(equir)o(ed.)f FZ(2)450
4352 y Ge(22.4.2)g(Exercise:)39 b Gd(Show)22 b(that)e
Gb(F)1482 4322 y Ga(k)1482 4372 y F9(<:)1551 4352 y Gd(has)h(joins)h
(and)e(bounded)g(meets.)26 b(Solution)c(on)f(page)f(299.)450
4451 y FZ(2)450 4634 y Ge(22.4.3)e(Exercise:)39 b Gd(Consider)21
b(the)g(types)g(\(due)f(to)h(Ghelli)h([Ghe90)o(,)f(p.)f(92]\))658
4800 y F4(S)i FY(=)h F5(8)p F4(X<:Y)p FV(!)n F4(Z.Y)p
FV(!)n F4(Z)p eop
%%Page: 207 208
207 207 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(207)450 683 y(and)658 837
y F4(T)22 b FY(=)h F5(8)p F4(X<:Y)1038 802 y FX(0)1061
837 y FV(!)p F4(Z)1196 802 y FX(0)1219 837 y F4(.Y)1314
802 y FX(0)1337 837 y FV(!)p F4(Z)1471 802 y FX(0)450
990 y Gd(and)d(the)h(context)g Gb(\000)i FY(=)g F4(Y<:Top)m
Gb(;)h F4(Z<:Top)m Gb(;)f F4(Y)1855 960 y FX(0)1879 990
y F4(<:Y)n Gb(;)g F4(Z)2107 960 y FX(0)2130 990 y F4(<:Z)o
Gd(.)554 1159 y(1.)41 b(In)21 b Gb(F)796 1114 y Ga(f)796
1166 y F9(<:)844 1159 y Gd(,)g(how)g(many)h(types)e(ar)o(e)g(subtypes)h
(of)f(both)i F4(S)e Gd(and)g F4(T)h Gd(under)f Gb(\000)6
b Gd(.)554 1338 y(2.)41 b(Show)21 b(that,)f(in)h Gb(F)1204
1293 y Ga(f)1204 1346 y F9(<:)1253 1338 y Gd(,)g(the)g(types)f
F4(S)h Gd(and)f F4(T)g Gd(have)h(no)g(meet)g(under)f
Gb(\000)6 b Gd(.)554 1517 y(3.)41 b(Exhibit)20 b(a)h(pair)f(of)h(types)
f(that)h(has)g(no)g(join)h(\(under)e Gb(\000)6 b Gd(\))15
b(in)21 b Gb(F)2566 1472 y Ga(f)2566 1525 y F9(<:)2615
1517 y Gd(.)450 1671 y(Solution)h(on)f(page)f(302.)2156
b FZ(2)450 1953 y Gj(22.5)119 b(Undecidability)29 b(of)h(Subtyping)h
(in)e(Full)h Fp(F)2840 1971 y Gc(<)-11 b(:)450 2156 y
Gd(Unfortunately)i(,)18 b(the)h(pr)o(oof)f(of)g(termination)h(of)g(the)
f Gb(F)2162 2126 y Ga(k)2162 2176 y F9(<:)2229 2156 y
Gd(subtyping)i(algorithm)f(in)g(Section)f Ge(??)450 2275
y Gd(does)j(not)g(work)h(for)e Gb(F)1165 2230 y Ga(f)1165
2283 y F9(<:)1214 2275 y Gd(.)450 2442 y Ge(22.5.1)e(Exercise)h([Quick)
h(check]:)39 b Gd(Why)21 b(not?)1441 b FZ(2)575 2609
y Gd(In)22 b(fact,)g(not)h(only)h(does)f(this)g(particular)e(pr)o(oof)h
(technique)i(not)f(work\227the)g(subtyping)450 2709 y(algorithm)29
b(actually)f(does)h F7(not)f Gd(terminate)h(on)g(some)g(inputs.)50
b(Her)o(e)27 b(is)i(an)g(example,)g(due)450 2808 y(to)j(Ghelli)g
([Ghe95)o(],)h(that)e(makes)g(the)h(algorithm)g(diver)o(ge.)56
b(First)31 b(de\002ne)g(the)h(following)450 2908 y(abbr)o(eviation:)658
3062 y F0(:)p F4(S)864 3015 y FK(def)874 3062 y FY(=)116
b F5(8)p F4(X<:S.X)l Gb(:)450 3229 y Ge(22.5.2)18 b(Fact:)41
b Gb(\000)23 b F5(`)f F0(:)p F4(S)h FF(<)-17 b(:)24 b
F0(:)p F4(T)c Gd(if)o(f)g Gb(\000)j F5(`)f F4(T)h FF(<)-17
b(:)24 b F4(S)p Gd(.)1525 b FZ(2)450 3396 y F7(Pr)o(oof:)66
b Gd(Exer)o(cise.)2355 b FZ(2)575 3563 y Gd(Now)-8 b(,)21
b(de\002ne)g(a)f(type)g F4(T)h Gd(as)f(follows:)658 3717
y F4(T)105 b FY(=)h F5(8)p F4(X<:Top.)40 b F0(:)p F4(\()p
F5(8)p F4(Y<:X.)l F0(:)p F4(Y\))o Gb(:)450 3871 y Gd(If)24
b(we)g(use)h(the)f(algorithmic)h(subtyping)h(r)o(ules)e(bottom-to-top)i
(to)e(attempt)g(to)h(constr)o(uct)g(a)450 3971 y(subtyping)d
(derivation)e(for)h(the)g(statement)658 4124 y F4(X)701
4136 y F1(0)742 4124 y F4(<:T)g F5(`)i F4(X)1013 4136
y F1(0)1076 4124 y FF(<)-17 b(:)24 b F4(\()p F5(8)p F4(X)1319
4136 y F1(1)1359 4124 y F4(<:X)1490 4136 y F1(0)1530
4124 y F4(.)p F0(:)p F4(X)1674 4136 y F1(1)1715 4124
y F4(\))450 4278 y Gd(we)d(end)f(up)h(in)g(an)g(in\002nite)h(r)o(egr)o
(ess)d(of)i(lar)o(ger)e(and)i(lar)o(ger)e(\223subgoals\224:)638
4433 y F4(X)682 4445 y F1(0)722 4433 y F4(<:T)384 b F5(`)82
b F4(X)1415 4445 y F1(0)2520 4433 y FF(<)-17 b(:)84 b
F4(\()p F5(8)p F4(X)2822 4445 y F1(1)2862 4433 y F4(<:X)2993
4445 y F1(0)3034 4433 y F4(.)o F0(:)p F4(X)3178 4445
y F1(1)3218 4433 y F4(\))638 4533 y(X)682 4545 y F1(0)722
4533 y F4(<:T)384 b F5(`)82 b(8)p F4(X)1461 4545 y F1(1)1502
4533 y F4(<:Top.)41 b F0(:)p F4(\()p F5(8)p F4(X)1997
4545 y F1(2)2037 4533 y F4(<:X)2168 4545 y F1(1)2209
4533 y F4(.)o F0(:)p F4(X)2353 4545 y F1(2)2393 4533
y F4(\))83 b FF(<)-17 b(:)84 b F4(\()p F5(8)p F4(X)2822
4545 y F1(1)2862 4533 y F4(<:X)2993 4545 y F1(0)3034
4533 y F4(.)o F0(:)p F4(X)3178 4545 y F1(1)3218 4533
y F4(\))638 4633 y(X)682 4645 y F1(0)722 4633 y F4(<:T)o
Gb(;)23 b F4(X)943 4645 y F1(1)983 4633 y F4(<:X)1114
4645 y F1(0)1238 4633 y F5(`)82 b F0(:)p F4(\()p F5(8)p
F4(X)1561 4645 y F1(2)1602 4633 y F4(<:X)1733 4645 y
F1(1)1773 4633 y F4(.)p F0(:)p F4(X)1917 4645 y F1(2)1958
4633 y F4(\))518 b FF(<)-17 b(:)84 b F0(:)p F4(X)2789
4645 y F1(1)638 4732 y F4(X)682 4744 y F1(0)722 4732
y F4(<:T)o Gb(;)23 b F4(X)943 4744 y F1(1)983 4732 y
F4(<:X)1114 4744 y F1(0)1238 4732 y F5(`)82 b F4(X)1415
4744 y F1(1)2520 4732 y FF(<)-17 b(:)84 b F4(\()p F5(8)p
F4(X)2822 4744 y F1(2)2862 4732 y F4(<:X)2993 4744 y
F1(1)3034 4732 y F4(.)o F0(:)p F4(X)3178 4744 y F1(2)3218
4732 y F4(\))638 4832 y(X)682 4844 y F1(0)722 4832 y
F4(<:T)o Gb(;)23 b F4(X)943 4844 y F1(1)983 4832 y F4(<:X)1114
4844 y F1(0)1238 4832 y F5(`)82 b F4(X)1415 4844 y F1(0)2520
4832 y FF(<)-17 b(:)84 b F4(\()p F5(8)p F4(X)2822 4844
y F1(2)2862 4832 y F4(<:X)2993 4844 y F1(1)3034 4832
y F4(.)o F0(:)p F4(X)3178 4844 y F1(2)3218 4832 y F4(\))638
4932 y Gd(etc.)p eop
%%Page: 208 209
208 208 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(208)450 683 y(The)25 b Gb(\013)p
Gd(-conversion)g(steps)g(necessary)f(to)i(maintain)f(the)g
(well-formedness)g(of)g(the)g(context)450 783 y(when)30
b(new)f(variables)f(ar)o(e)g(added)g(ar)o(e)f(performed)h(tacitly)i
(her)o(e,)g(choosing)g(new)g(names)450 882 y(so)d(as)g(to)g(clarify)f
(the)h(pattern)f(of)h(r)o(egr)o(ess.)42 b(The)27 b(cr)o(ucial)g(trick)f
(is)i(the)f(\223r)o(e-bounding\224)e(that)450 982 y(occurs,)30
b(for)f(instance,)h(between)f(the)g(second)f(and)h(thir)o(d)f(lines,)j
(wher)o(e)d(the)g(bound)h(of)g F4(X)3409 994 y F1(1)450
1082 y Gd(on)23 b(the)g(left-hand)f(side)g(is)h(changed)f(fr)o(om)g
F4(Top)f Gd(in)i(line)g(2)f(to)h F4(X)2460 1094 y F1(0)2523
1082 y Gd(in)g(line)g(3.)30 b(Since)23 b(the)f(whole)450
1181 y(left-hand)k(side)h(in)g(line)h(2)e(is)i(itself)f(the)g(upper)o
(-bound)f(of)h F4(X)2413 1193 y F1(0)2454 1181 y Gd(,)h(the)f(r)o
(e-bounding)g(cr)o(eates)e(a)450 1281 y(cyclic)g(pattern)f(wher)o(e)g
(longer)h(and)f(longer)i(chains)f(of)f(variables)g(in)h(the)g(context)g
(must)g(be)450 1380 y(traversed)19 b(on)i(each)f(loop.)26
b(\(The)20 b(r)o(eader)f(is)i(cautioned)f(not)h(to)g(look)h(for)e
F7(semantic)g Gd(intuitions)450 1480 y(behind)i(this)g(example;)e(in)i
(particular)-6 b(,)20 b F0(:)p F4(T)h Gd(is)h(a)f(negation)h(only)g(in)
g(the)g(sense)f(that)h(it)f(allows)450 1580 y(the)g(left-)f(and)g
(right-hand)h(sides)g(of)g(subtyping)g(judgements)h(to)f(be)f
(swapped.\))575 1679 y(W)-8 b(orse)21 b(yet,)f(not)h(only)h(does)f
(this)g(particular)e(algorithm)j(fail)e(to)h(terminate)f(on)i(some)f
(in-)450 1779 y(puts,)g(it)g(can)f(be)g(shown)i([Pie94)o(])e(that)h
(ther)o(e)f(is)h F7(no)f Gd(algorithm)i(that)e(is)h(sound)h(and)e
(complete)450 1898 y(for)h(the)f(original)i Gb(F)1061
1853 y Ga(f)1061 1906 y F9(<:)1130 1898 y Gd(subtyping)g(r)o(elation)e
(and)h(that)f(terminates)h(on)g(all)g(inputs.)575 1997
y(The)28 b(full)g(pr)o(oof)g(of)g(this)h(fact)e(is)i(beyond)f(the)g
(scope)h(of)f(this)h(book)g(\(the)f(ar)o(gument)f(r)o(e-)450
2097 y(quir)o(es)16 b(no)g(particularly)f(deep)g(mathematics,)i(but)e
(takes)h(several)f(pages)g(to)h(develop\).)23 b(How-)450
2197 y(ever)-6 b(,)20 b(to)h(give)f(a)h(little)g(of)g(its)g(\003avor)-6
b(,)20 b(let's)h(look)h(at)e(one)h(mor)o(e)g(example.)450
2379 y Ge(22.5.3)d(De\002nition:)40 b Gd(The)20 b Ge(positive)e
Gd(and)i Ge(negative)e Gd(occur)o(ences)h(in)i(a)e(type)h
F4(T)g Gd(ar)o(e)f(de\002ned)g(as)450 2479 y(follows:)575
2645 y F5(\017)41 b F4(T)20 b Gd(itself)h(is)g(a)f(positive)h(occur)o
(ence)f(in)h F4(T)p Gd(.)575 2811 y F5(\017)41 b Gd(If)24
b F4(T)782 2823 y F1(1)822 2811 y FV(!)p F4(T)949 2823
y F1(2)1014 2811 y Gd(is)h(a)g(positive)g(\(r)o(espectively)-9
b(,)24 b(negative\))g(occurr)o(ence,)h(then)g F4(T)3031
2823 y F1(1)3096 2811 y Gd(is)g(a)g(nega-)658 2911 y(tive)20
b(\(r)o(esp.)g(positive\))g(occurr)o(ence)g(and)g F4(T)2006
2923 y F1(2)2067 2911 y Gd(is)h(a)g(positive)g(\(negative\))f(occurr)o
(ence.)575 3077 y F5(\017)41 b Gd(If)16 b F5(8)p F4(X<:T)951
3089 y F1(1)991 3077 y F4(.T)1078 3089 y F1(2)1136 3077
y Gd(is)h(a)f(positive)i(\(r)o(espectively)-9 b(,)16
b(negative\))g(occurr)o(ence,)g(then)h F4(T)3096 3089
y F1(1)3153 3077 y Gd(is)h(a)e(neg-)658 3176 y(ative)k(\(r)o(esp.)f
(positive\))i(occurr)o(ence)f(and)g F4(T)2047 3188 y
F1(2)2109 3176 y Gd(is)h(a)f(positive)h(\(negative\))f(occurr)o(ence.)
450 3342 y(The)31 b(positive)h(and)g(negative)f(occur)o(ences)f(in)i(a)
f(subtyping)i(statement)e Gb(\000)43 b F5(`)g F4(S)f
FF(<)-17 b(:)44 b F4(T)31 b Gd(ar)o(e)450 3442 y(de\002ned)25
b(as)g(follows:)35 b(the)26 b(type)f F4(S)f Gd(and)h(the)h(bounds)f(of)
h(type)f(variables)f(in)i Gb(\000)f Gd(ar)o(e)e(negative)450
3542 y(occurr)o(ences.)i(The)20 b(type)h F4(T)f Gd(is)h(a)g(positive)g
(occurr)o(ence.)1181 b FZ(2)575 3724 y Gd(The)23 b(wor)o(ds)g
(\223positive\224)f(and)h(\223negative\224)f(come)h(fr)o(om)g(logic.)34
b(Accor)o(ding)22 b(to)i(the)f(well-)450 3824 y(known)j
(\223Curry-Howar)o(d)d(isomorphism\224)k([How80)o(,)e(CF58)o(])f
(between)h(pr)o(opositions)h(and)450 3924 y(types,)h(the)f(type)g
F4(S)p FV(!)p F4(T)f Gd(corr)o(esponds)h(to)g(the)g(logical)h(pr)o
(oposition)f F4(S)33 b FV(\))f F4(T)p Gd(,)27 b(which,)h(by)e(the)450
4023 y(de\002nition)31 b(of)e(logical)h(implication,)i(is)e(equivalent)
g(to)g F0(:)p F4(S)38 b F0(_)i F4(T)p Gd(.)51 b(The)30
b(subpr)o(oposition)g F4(S)450 4123 y Gd(her)o(e)g(is)i(obviously)g(in)
f(a)g(\223negative\224)f(position\227that)i(is,)i(inside)d(of)g(an)g
(odd)g(number)g(of)450 4222 y(negations\227if)22 b(and)e(only)i(if)f
(the)g(whole)h(implication)g(appears)d(inside)i(an)g(even)g(number)g
(of)450 4322 y(negations.)450 4505 y Ge(22.5.4)d(Fact:)41
b Gd(If)21 b F4(X)g Gd(occurs)g(only)i(positively)f(in)g
F4(S)f Gd(and)g(negatively)h(in)f F4(T)p Gd(,)g(then)h
F4(X<:U)h F5(`)h F4(S)g FF(<)-17 b(:)25 b F4(T)450 4604
y Gd(if)o(f)20 b F5(`)j F0(f)p F4(X)f F5(7)p FV(!)h F4(U)o
F0(g)p F4(S)g FF(<)-17 b(:)24 b F0(f)p F4(X)e F5(7)p
FV(!)h F4(U)o F0(g)p F4(T)p Gd(.)1992 b FZ(2)450 4787
y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355 b FZ(2)p eop
%%Page: 209 210
209 209 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(209)575 683 y(Now)-8 b(,)21
b(let)g F4(T)f Gd(be)g(the)h(following)i(\(pr)o(etty)c(horrible\))i
(type)658 844 y F4(T)h FY(=)h F5(8)p F4(X)900 856 y F1(0)940
844 y F4(<:Top.)p F5(8)p F4(X)1291 856 y F1(1)1332 844
y F4(<:Top.)p F5(8)p F4(X)1683 856 y F1(2)1724 844 y
F4(<:Top.)893 944 y F0(:)p F4(\()p F5(8)p F4(Y)1083 956
y F1(0)1124 944 y F4(<:X)1254 956 y F1(0)1295 944 y F4(.)p
F5(8)p F4(Y)1428 956 y F1(1)1469 944 y F4(<:X)1600 956
y F1(1)1640 944 y F4(.)p F5(8)p F4(Y)1773 956 y F1(2)1814
944 y F4(<:X)1945 956 y F1(2)1985 944 y F4(.)p F0(:)p
F4(X)2129 956 y F1(0)2170 944 y F4(\))450 1105 y Gd(and)d(consider)h
(the)g(subtyping)h(statement)699 1268 y F5(`)118 b F4(T)699
1367 y FF(<)-17 b(:)84 b F5(8)p F4(X)958 1379 y F1(0)998
1367 y F4(<:T.)p F5(8)p F4(X)1262 1379 y F1(1)1303 1367
y F4(<:P.)p F5(8)p F4(X)1567 1379 y F1(2)1607 1367 y
F4(<:Q.)951 1467 y F0(:)p F4(\()p F5(8)p F4(Y)1141 1479
y F1(0)1182 1467 y F4(<:Top.)p F5(8)p F4(Y)1533 1479
y F1(1)1573 1467 y F4(<:Top.)p F5(8)p F4(Y)1925 1479
y F1(2)1965 1467 y F4(<:Top.)1034 1567 y F0(:)p F4(\()p
F5(8)p F4(Z)1224 1579 y F1(0)1265 1567 y F4(<:Y)1395
1579 y F1(0)1436 1567 y F4(.)p F5(8)p F4(Z)1569 1579
y F1(1)1610 1567 y F4(<:Y)1741 1579 y F1(2)1781 1567
y F4(.)p F5(8)p F4(Z)1914 1579 y F1(2)1955 1567 y F4(<:Y)2086
1579 y F1(1)2126 1567 y F4(.)43 b(U\)\))o Gb(:)450 1727
y Gd(W)-8 b(e)21 b(can)f(think)i(of)f(this)g(statement)g(as)g(a)f
(description)h(of)g(the)g(state)f(of)h(a)f(simple)h(computer:)575
1888 y F5(\017)41 b Gd(The)30 b(variables)f F4(X)1233
1900 y F1(1)1303 1888 y Gd(and)h F4(X)1518 1900 y F1(2)1589
1888 y Gd(ar)o(e)f(the)h(\223r)o(egisters\224)f(of)h(this)h(machine.)55
b(Their)30 b(curr)o(ent)658 1988 y(contents)21 b(ar)o(e)f(the)g(types)h
F4(P)g Gd(and)f F4(Q)p Gd(.)575 2152 y F5(\017)41 b Gd(The)22
b(\223instr)o(uction)i(str)o(eam\224)d(of)i(the)g(machine)g(is)g(the)f
(last)h(line)g(of)g(the)g(statement:)29 b(the)658 2251
y(\002rst)e(instr)o(uction)h(is)f(encoded)g(in)g(the)g(bounds)g(\()p
F4(Y)2294 2263 y F1(2)2362 2251 y Gd(and)f F4(Y)2573
2263 y F1(1)2613 2251 y Gd(\227note)i(their)e(or)o(der!\))43
b(of)658 2351 y(the)27 b(variables)f F4(Z)1202 2363 y
F1(1)1270 2351 y Gd(and)h F4(Z)1481 2363 y F1(2)1522
2351 y Gd(,)h(and)f(the)g(type)g F4(U)g Gd(is)g(the)g(r)o(emaining)g
(instr)o(uctions)i(in)f(the)658 2451 y(pr)o(ogram.)575
2614 y F5(\017)41 b Gd(The)16 b(type)h F4(T)p Gd(,)g(the)g(nested)f
(negations,)i(and)f(the)g(bound)g(variables)e F4(X)2797
2626 y F1(0)2854 2614 y Gd(and)i F4(Y)3055 2626 y F1(0)3112
2614 y Gd(her)o(e)f(play)658 2714 y(much)k(the)g(same)g(r)o(ole)f(as)g
(their)h(counterparts)g(in)g(the)g(simpler)g(example)f(above:)25
b(they)658 2814 y(allow)e(us)h(to)g(\223turn)f(the)g(crank\224)f(and)h
(get)h(back)e(to)i(a)f(subgoal)g(of)h(the)f(same)g(shape)g(as)658
2913 y(the)h(original)i(goal.)37 b(One)26 b(turn)e(of)h(the)g(crank)g
(will)g(corr)o(espond)f(to)h(one)h(cycle)e(of)h(our)658
3013 y(machine.)450 3174 y(In)h(this)g(example,)g(the)g(instr)o(uction)
h(at)e(the)h(fr)o(ont)f(of)h(the)f(instr)o(uction)j(str)o(eam)c
(encodes)i(the)450 3274 y(command)g(\223switch)h(the)f(contents)g(of)g
(r)o(egisters)g Gb(1)g Gd(and)g Gb(2)p Gd(.\224)41 b(T)-8
b(o)26 b(see)g(this,)h(we)f(use)g(the)g(two)450 3374
y(facts)c(stated)h(above)f(to)i(calculate)e(as)g(follows.)34
b(\(The)23 b(values)f F4(P)h Gd(and)g F4(Q)f Gd(in)i(the)f(two)h(r)o
(egisters)450 3473 y(ar)o(e)19 b(highlighted,)j(to)f(make)g(them)g
(easier)f(to)h(track)f(thr)o(ough)i(the)e(derivation.\))860
3636 y F5(`)118 b F4(T)860 3736 y FF(<)-17 b(:)84 b F5(8)p
F4(X)1119 3748 y F1(0)1159 3736 y F4(<:T.)p F5(8)p F4(X)1423
3748 y F1(1)1464 3736 y F4(<:)1551 3736 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1551 3736 a
16 w F4(P)15 b(.)p F5(8)p F4(X)1759 3748 y F1(2)1800
3736 y F4(<:)1887 3736 y
 gsave currentpoint translate 0 215539 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1887 3736 a 16 w F4(Q)g(.)1112
3836 y F0(:)p F4(\()p F5(8)p F4(Y)1302 3848 y F1(0)1343
3836 y F4(<:Top.)p F5(8)p F4(Y)1694 3848 y F1(1)1734
3836 y F4(<:Top.)p F5(8)p F4(Y)2086 3848 y F1(2)2126
3836 y F4(<:Top.)1195 3935 y F0(:)p F4(\()p F5(8)p F4(Z)1385
3947 y F1(0)1426 3935 y F4(<:Y)1556 3947 y F1(0)1597
3935 y F4(.)p F5(8)p F4(Z)1730 3947 y F1(1)1771 3935
y F4(<:Y)1901 3947 y F1(2)1942 3935 y F4(.)p F5(8)p F4(Z)2075
3947 y F1(2)2116 3935 y F4(<:Y)2247 3947 y F1(1)2287
3935 y F4(.)43 b(U\)\))699 4035 y Gd(if)o(f)82 b F5(`)118
b F0(:)p F4(\()p F5(8)p F4(Y)1219 4047 y F1(0)1260 4035
y F4(<:T.)p F5(8)p F4(Y)1524 4047 y F1(1)1564 4035 y
F4(<:)1651 4035 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1651 4035 a 16 w F4(P)15 b(.)p F5(8)p
F4(Y)1860 4047 y F1(2)1900 4035 y F4(<:)1987 4035 y
 gsave currentpoint translate 0 215539 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1987
4035 a 16 w F4(Q)h(.)o F0(:)p F4(T\))860 4135 y FF(<)-17
b(:)84 b F0(:)p F4(\()p F5(8)p F4(Y)1219 4147 y F1(0)1260
4135 y F4(<:Top.)p F5(8)p F4(Y)1611 4147 y F1(1)1651
4135 y F4(<:Top.)p F5(8)p F4(Y)2003 4147 y F1(2)2043
4135 y F4(<:Top.)1112 4234 y F0(:)p F4(\()p F5(8)p F4(Z)1302
4246 y F1(0)1343 4234 y F4(<:Y)1473 4246 y F1(0)1514
4234 y F4(.)p F5(8)p F4(Z)1647 4246 y F1(1)1688 4234
y F4(<:Y)1818 4246 y F1(2)1859 4234 y F4(.)p F5(8)p F4(Z)1992
4246 y F1(2)2033 4234 y F4(<:Y)2164 4246 y F1(1)2204
4234 y F4(.)43 b(U\)\))2630 4135 y Gd(by)20 b(Fact)h(22.5.4)699
4334 y(if)o(f)82 b F5(`)118 b F4(\()p F5(8)p F4(Y)1162
4346 y F1(0)1203 4334 y F4(<:Top.)p F5(8)p F4(Y)1554
4346 y F1(1)1595 4334 y F4(<:Top.)p F5(8)p F4(Y)1946
4346 y F1(2)1986 4334 y F4(<:Top.)1112 4433 y F0(:)p
F4(\()p F5(8)p F4(Z)1302 4445 y F1(0)1343 4433 y F4(<:Y)1473
4445 y F1(0)1514 4433 y F4(.)p F5(8)p F4(Z)1647 4445
y F1(1)1688 4433 y F4(<:Y)1818 4445 y F1(2)1859 4433
y F4(.)p F5(8)p F4(Z)1992 4445 y F1(2)2033 4433 y F4(<:Y)2164
4445 y F1(1)2204 4433 y F4(.)43 b(U\)\))860 4533 y FF(<)-17
b(:)84 b F4(\()p F5(8)p F4(Y)1162 4545 y F1(0)1203 4533
y F4(<:T.)p F5(8)p F4(Y)1467 4545 y F1(1)1507 4533 y
F4(<:)1595 4533 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1595 4533 a 15 w F4(P)16 b(.)p F5(8)p
F4(Y)1803 4545 y F1(2)1843 4533 y F4(<:)1931 4533 y
 gsave currentpoint translate 0 215539 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1931
4533 a 15 w F4(Q)g(.)o F0(:)p F4(T\))436 b Gd(by)20 b(Fact)h(22.5.2)699
4633 y(if)o(f)82 b F5(`)118 b F0(:)p F4(\()p F5(8)p F4(Z)1219
4645 y F1(0)1260 4633 y F4(<:T.)p F5(8)p F4(Z)1524 4645
y F1(1)1564 4633 y F4(<:)1651 4633 y
 gsave currentpoint translate 0 215539 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1651 4633 a 16 w
F4(Q)15 b(.)p F5(8)p F4(Z)1860 4645 y F1(2)1900 4633
y F4(<:)1987 4633 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1987 4633 a 16 w F4(P)h(.)43 b(U\)\))860
4732 y FF(<)-17 b(:)84 b F0(:)p F4(T)1500 b Gd(by)20
b(Fact)h(22.5.4)699 4832 y(if)o(f)82 b F5(`)118 b F4(T)860
4932 y FF(<)-17 b(:)84 b F4(\()p F5(8)p F4(Z)1162 4944
y F1(0)1203 4932 y F4(<:T.)p F5(8)p F4(Z)1467 4944 y
F1(1)1507 4932 y F4(<:)1595 4932 y
 gsave currentpoint translate 0 215539 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1595 4932 a 15 w F4(Q)16
b(.)p F5(8)p F4(Z)1803 4944 y F1(2)1843 4932 y F4(<:)1931
4932 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 1931 4932 a 15 w F4(P)g(.)43 b(U\)\))405 b Gd(by)20
b(Fact)h(22.5.2)p eop
%%Page: 210 211
210 210 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)283
b Gd(2)t(2)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(B)t F6(O)t(U)t(N)t(D)t(E)t(D)h Gd(Q)t F6(U)t(A)t(N)t(T)t(I)t(FI)t(C)
t(A)o(T)t(I)t(O)t(N)286 b Gd(210)450 683 y(Note)23 b(that,)g(at)g(the)g
(end)g(of)g(the)g(derivation,)g(not)h(only)g(have)e(the)h(values)g
F4(P)g Gd(and)f F4(Q)h Gd(switched)450 783 y(places,)d(but)h(the)h
(instr)o(uction)g(that)f(caused)f(this)i(to)g(happen)e(has)h(been)g
(used)g(up)g(in)h(the)f(pr)o(o-)450 882 y(cess,)34 b(leaving)e
F4(U)g Gd(at)f(the)h(fr)o(ont)g(of)f(the)h(instr)o(uction)i(str)o(eam)d
(to)h(be)g(\223executed\224)d(next.)59 b(By)450 982 y(choosing)27
b(a)f(value)f(of)g F4(U)h Gd(that)f(begins)h(in)g(the)g(same)g(way)f
(as)h(the)g(instr)o(uction)h(we)f(just)g(exe-)450 1082
y(cuted)658 1248 y F4(U)105 b FY(=)h F0(:)p F4(\()p F5(8)p
F4(Y)1166 1260 y F1(0)1207 1248 y F4(<:Top.)p F5(8)p
F4(Y)1558 1260 y F1(1)1598 1248 y F4(<:Top.)p F5(8)p
F4(Y)1950 1260 y F1(2)1990 1248 y F4(<:Top.)1059 1347
y F0(:)p F4(\()p F5(8)p F4(Z)1249 1359 y F1(0)1290 1347
y F4(<:Y)1420 1359 y F1(0)1461 1347 y F4(.)p F5(8)p F4(Z)1594
1359 y F1(1)1635 1347 y F4(<:Y)1766 1359 y F1(2)1806
1347 y F4(.)p F5(8)p F4(Z)1939 1359 y F1(2)1980 1347
y F4(<:Y)2111 1359 y F1(1)2151 1347 y F4(.)43 b(U)2289
1317 y FX(0)2313 1347 y F4(\)\))450 1512 y Gd(we)20 b(can)f(perform)g
(another)h(swap)g(and)f(r)o(eturn)g(the)h(r)o(egisters)f(to)h(their)g
(original)g(state)f(befor)o(e)450 1612 y(continuing)i(with)f
F4(U)1107 1582 y FX(0)1130 1612 y Gd(.)25 b(Mor)o(e)18
b(inter)o(estingly)-9 b(,)20 b(we)f(can)g(choose)h(other)f(values)g
(for)g F4(U)g Gd(that)g(cause)450 1712 y(dif)o(fer)o(ent)g(sorts)i(of)g
(behavior)-6 b(.)25 b(For)c(example,)f(if)658 1878 y
F4(U)105 b FY(=)h F0(:)p F4(\()p F5(8)p F4(Y)1166 1890
y F1(0)1207 1878 y F4(<:Top.)p F5(8)p F4(Y)1558 1890
y F1(1)1598 1878 y F4(<:Top.)p F5(8)p F4(Y)1950 1890
y F1(2)1990 1878 y F4(<:Top.)1059 1977 y F0(:)p F4(\()p
F5(8)p F4(Z)1249 1989 y F1(0)1290 1977 y F4(<:Y)1420
1989 y F1(0)1461 1977 y F4(.)p F5(8)p F4(Z)1594 1989
y F1(1)1635 1977 y F4(<:Y)1766 1989 y F1(1)1806 1977
y F4(.)p F5(8)p F4(Z)1939 1989 y F1(2)1980 1977 y F4(<:Y)2111
1989 y F1(2)2151 1977 y F4(.)43 b(Y)2282 1989 y F1(1)2322
1977 y F4(\)\))450 2142 y Gd(then,)18 b(on)g(the)f(next)g(cycle)g(of)g
(the)g(machine,)h(the)f(curr)o(ent)f(value)g(of)h(r)o(egister)g
Gb(1)g Gd(\()p F4(Q)o Gd(\))g(will)h(appear)450 2242
y(in)24 b(the)f(position)i(of)e F4(U)p Gd(\227in)g(ef)o(fect,)f
(performing)i(an)f(\223indir)o(ect)f(branch\224)g(thr)o(ough)i(r)o
(egister)f Gb(1)450 2342 y Gd(to)j(the)h(str)o(eam)e(of)h(instr)o
(uctions)i F4(Q)o Gd(.)42 b(Conditional)27 b(constr)o(ucts)g(and)e
(arithmetic)h(\(successor)-6 b(,)450 2441 y(pr)o(edecessor)g(,)19
b(and)h(zer)o(o-test\))f(can)i(be)f(encoded)g(using)i(a)e
(generalization)h(of)f(this)i(trick.)575 2541 y(Putting)j(all)f(of)g
(this)g(together)-6 b(,)25 b(we)f(arrive)f(at)h(a)g(pr)o(oof)f(of)h
(undecidability)-9 b(,)24 b(via)g(a)g(r)o(educ-)450 2640
y(tion)j(fr)o(om)f(two-counter)h(machines\227a)f(simple)h(variant)e(on)
i(or)o(dinary)f(turing)h(machines,)450 2740 y(consisting)35
b(of)e(a)f(\002nite)h(contr)o(ol)h(and)e(two)i(counters,)i(each)c
(holding)i(a)f(natural)f(number)450 2840 y(\(cf.)20 b([HU79)n(],)g(for)
h(example\)\227to)f(subtyping)h(statements.)450 3022
y Ge(22.5.5)d(Theorem)i([Undecidability]:)37 b Gd(For)18
b(each)g(two-counter)h(machine)f Gb(M)p Gd(,)h(ther)o(e)e(exists)h(a)
450 3140 y(subtyping)j(statement)g Gb(S)p FY(\()p Gb(M)p
FY(\))f Gd(such)h(that)f Gb(S)p FY(\()p Gb(M)p FY(\))h
Gd(is)g(derivable)e(in)i Gb(F)2593 3095 y Ga(f)2593 3148
y F9(<:)2662 3140 y Gd(if)o(f)e(the)i(execution)f(of)g
Gb(M)450 3240 y Gd(halts.)2747 b FZ(2)575 3422 y Gd(Thus,)24
b(if)g(we)g(could)g(decide)f(whether)h(any)g(subtype)g(statement)g(is)g
(pr)o(ovable,)g(then)g(we)450 3522 y(could)d(also)g(decide)f(whether)h
(any)f(given)h(two-counter)h(machine)f(will)g(eventually)g(halt.)450
3705 y Ge(22.5.6)d(Exercise)h([Challenging]:)554 3889
y Gd(1.)41 b(De\002ne)21 b(a)f(variant)g(of)h Gb(F)1401
3844 y Ga(f)1401 3896 y F9(<:)1470 3889 y Gd(with)h(no)f
F4(Top)f Gd(type)g(but)h(with)h(both)f F4(X<:T)e Gd(and)h
F4(X)h Gd(bindings.)554 4055 y(2.)41 b(Show)21 b(that)f(the)h(subtype)g
(r)o(elation)g(for)f(this)i(system)f(is)g(decidable.)554
4221 y(3.)41 b(Does)18 b(this)h(r)o(estriction)f(of)o(fer)f(a)g
(satisfactory)h(solution)i(to)e(the)g(basic)g(pr)o(oblem?)24
b(In)19 b(par)o(-)658 4320 y(ticular)-6 b(,)19 b(does)g(it)h(work)g
(for)f(languages)g(with)i(additional)e(featur)o(es)f(such)i(as)f
(numbers,)658 4420 y(r)o(ecor)o(ds,)g(variants,)h(etc.?)450
4586 y(Hint)h(on)h(page)e(303.)2295 b FZ(2)p eop
%%Page: 211 212
211 211 bop 450 1306 a F3(Chapter)44 b(23)450 1721 y
Gk(Denotational)52 b(Semantics)1182 1913 y Gj(By)30 b(Martin)e(Hofmann)
i(and)g(Benjamin)f(Pierce)575 2294 y F7(Some)20 b(notation)g(is)h(out)g
(of)f(date)h(in)g(this)f(chapter)-6 b(.)450 2394 y Gd(Denotational)31
b(semantics)h(is)f(a)f(compositional)i(assigment)f(of)g(mathematical)f
(objects)i(to)450 2494 y(pr)o(ogram)23 b(phrases)g(\(terms,)h(types,)g
(and)f(typing)h(and)f(subtyping)i(statements\).)33 b(Composi-)450
2593 y(tionality)26 b(means)g(that)f(the)h(meaning)g(of)f(a)g(phrase)g
(is)h(de\002ned)f(in)h(terms)g(of)f(its)h(outermost)450
2693 y(constr)o(uctor)c(and)e(the)h(meanings)g(of)g(its)g(immediate)g
(subphrases.)575 2793 y(The)f(for)o(emost)h(and)g(easiest)g
(application)f(of)h(semantics)h(is)f(demonstrating)h(the)f(sound-)450
2892 y(ness)29 b(and)f(consistency)i(of)e(equational)h(theories\227in)g
(particular)-6 b(,)29 b(the)g(one)g(generated)e(by)450
2992 y(the)g(r)o(eduction)f(r)o(ules.)44 b(\(T)-8 b(o)27
b(show)h(that)f(the)g(equational)g(theory)g(is)h(sound,)g(we)f(show)h
(that)450 3091 y(terms)16 b(equated)f(by)h(the)g(theory)g(have)f(equal)
h(interpr)o(etations;)h(to)f(show)h(that)f(it)g(is)g(consistent\227)450
3191 y(i.e.,)26 b(that)g(not)g(all)g(terms)g(ar)o(e)e(equated)h(by)h
(the)g(equational)g(theory\227it)g(suf)o(\002ces)g(to)g(exhibit)450
3291 y(two)20 b(terms)f(with)g(dif)o(fer)o(ent)e(interpr)o(etations.\))
24 b(Semantic)19 b(models)g(can)g(also)g(suggest)h(exten-)450
3390 y(sions)i(to)f(the)g(syntax,)g(in)g(particular)e(pr)o(ogram)h
(logics.)575 3490 y(If)d(a)g(semantics)h(is)h(\223computationally)f
(adequate\224)e(\(we'll)i(come)g(back)f(to)h(this)h(term)f(later)450
3590 y(on\),)33 b(it)d(can)g(also)g(be)g(used)g(to)g(r)o(eason)g(about)
g(observational)g(equivalence)g(of)g(pr)o(ograms.)450
3689 y(For)i(example,)i(it)e(is)g(intuitively)h(the)f(case)f(that)h
(the)g(two)g(r)o(ecor)o(ds)f F4(p)43 b FY(=)g F4({x=0,y=0})28
b Gd(and)450 3789 y F4(q)f FY(=)g F4({x=0,y=1})20 b Gd(ar)o(e)i(equal)h
(when)h(used)f(at)f(type)h F4({)p 2123 3784 5 41 v 4
w(x:Nat)p 2375 3784 V 4 w(})n Gd(,)g(because)f(the)i(only)g(thing)g
(that)450 3888 y(a)j(pr)o(ogram)f(can)h(do)g(with)g(a)g(r)o(ecor)o(d)e
(of)i(type)g F4({)p 1989 3883 V 4 w(x:Nat)p 2241 3883
V 4 w(})d Gd(is)k(to)f(pr)o(oject)g(out)g(its)h F4(x)e
Gd(\002eld,)i(and)450 3988 y F4(p.x)22 b FY(=)h F4(q.x)f
FY(=)h F4(0)p Gd(.)j(The)21 b(semantics)g(we)g(ar)o(e)e(going)j(to)g
(develop)e(will)i(allow)f(us)g(to)h(ar)o(gue)d(that,)450
4088 y(indeed,)i F4(p)g Gd(and)h F4(q)f Gd(ar)o(e)f(observationally)i
(equivalent)g(at)f(type)h F4({)p 2477 4083 V 3 w(x:Nat)p
2729 4083 V 4 w(})n Gd(,)f(i.e.,)h(that)f(for)h(every)450
4187 y(closed)i(term)g F4(c)29 b FF(:)g F4({)p 1086 4182
V 3 w(x:Nat)p 1337 4182 V 4 w(})n FV(!)p F4(Nat)o Gd(,)24
b(the)g(terms)h F4(c)43 b(p)23 b Gd(and)h F4(c)43 b(q)24
b Gd(of)g(type)f F4(Nat)g Gd(yield)h(the)g(same)450 4287
y(r)o(esult.)575 4387 y(Finally)-9 b(,)20 b(in)h(some)g(cases)f(a)g
(\(non-standar)o(d\))f(semantics)i(can)f(be)g(employed)h(to)g
(establish)450 4486 y(syntactic)g(meta-pr)o(operties)e(such)i(as)g
(normalization)g(or)g(con\003uence.)1890 5169 y(21)-5
b(1)p eop
%%Page: 212 213
212 212 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(212)450
686 y Gj(23.1)119 b(T)-11 b(ypes)30 b(as)g(Subsets)g(of)f(the)h
(Natural)e(Numbers)450 875 y Gd(In)16 b(building)g(semantic)g(models)h
(of)e(pr)o(ogramming)h(languages,)h(types)f(ar)o(e)e(commonly)k(mod-)
450 975 y(eled)26 b(as)h(sets)g(\(or)-6 b(,)28 b(if)f(the)g(language)g
(includes)g(r)o(ecursion,)h(\223domains\224\);)h(closed)e(terms)g(ar)o
(e)450 1074 y(modeled)j(as)g(elements)g(of)g(the)g(appr)o(opriate)f
(sets,)j(open)e(terms)h(as)f(functions)h(of)f(the)g(in-)450
1174 y(terpr)o(etations)25 b(of)g(their)g(fr)o(ee)f(variables.)39
b(For)25 b(example,)h(a)f(straightforwar)o(d)f(model)h(of)h(the)450
1274 y(simply)e(typed)f(lambda-calculus)f(can)g(be)h(obtained)g(by)g
(interpr)o(eting)g(base)g(types)g(as)g(arbi-)450 1373
y(trary)d(sets)i(\(e.g.)e FY([)-12 b([)p F4(Nat)o FY(])g(])24
b(=)g FN(N)s Gd(\))j(and)21 b(each)f(function)i(type)f
F4(S)p FV(!)p F4(T)f Gd(as)h(the)g(set)g(of)g(functions)h(fr)o(om)450
1473 y FY([)-12 b([)p F4(S)p FY(])g(])21 b Gd(to)g FY([)-12
b([)q F4(T)p FY(])g(])p Gd(.)575 1572 y(For)17 b(F)762
1584 y Gc(<)-11 b(:)817 1572 y Gd(,)17 b(a)g(mor)o(e)g(r)o(e\002ned)f
(framework)g(is)i(r)o(equir)o(ed,)e(due)h(principally)g(to)g(the)h
(impr)o(edica-)450 1672 y(tivity)h(of)f(the)h(universal)f(quanti\002er)
h(in)g(System)f(F\227the)h(fact)e(that)i(the)f(bound)h(type)f(variable)
450 1772 y(in)31 b(a)g(type)g F5(8)p F4([X]T)d Gd(ranges)j(over)g(all)g
(types,)i(including)f F5(8)p F4([X]T)c Gd(itself.)56
b(Accor)o(dingly)-9 b(,)33 b(in)e(a)450 1871 y(simple)d(set-theor)o
(etic)e(model,)k(the)d(\002rst)h(candidate)e(for)h(an)g(intepr)o
(etation)g(of)g(a)g(universal)450 1971 y(type)c(would)h(be)e(a)h
(function)h(whose)g(domain)f(is)g(the)h(set)f(of)g(all)g(sets;)h(such)f
(a)g(function)h(can-)450 2071 y(not)g(exist,)g(for)f(car)o(dinality)f
(r)o(easons.)33 b(A)23 b(mor)o(e)g(r)o(e\002ned)f(strategy)h(would)h
(be)f(to)g(r)o(estrict)g(the)450 2170 y(domain)h(of)g(polymorphic)i
(functions)f(to)f(only)h(those)g(sets)f(which)h(actually)f(arise)f(as)h
(inter)o(-)450 2270 y(pr)o(etations)17 b(of)g(types)g(in)h(our)f(pr)o
(ogramming)g(language.)24 b(However)-6 b(,)18 b(Reynolds)g([Rey84)o(,)f
(RP])450 2369 y(has)25 b(shown)i(that,)f(no)g(matter)f(how)h(we)f
(interpr)o(et)g(universal)g(types,)h(ther)o(e)f(cannot)g(exist)g(a)450
2469 y(model)j(of)f(System)g(F)h(in)g(which)g(a)f(function)h(type)f
F4(S)p FV(!)p F4(T)g Gd(is)h(interpr)o(eted)e(as)h(the)g(full)h(set)f
(of)450 2569 y(functions)c(fr)o(om)e FY([)-12 b([)q F4(S)o
FY(])g(])23 b Gd(to)f FY([)-12 b([)p F4(T)p FY(])g(])p
Gd(.)29 b(Intuitively)-9 b(,)22 b(what)g(Reynolds)h(shows)g(is)g(that)e
(ther)o(e)g(is)i(a)e(type)3417 2539 y FK(1)450 2668 y
F4(R)29 b Gd(in)g(System)h(F)f(whose)h(interpr)o(etation)f(must)h(be)e
(the)i(same)f(size)g(as)f(the)i(function)g(space)450
2768 y F4(\(R)p FV(!)o F4(Bool\))p FV(!)n F4(Bool)n Gd(;)g(the)d(fact)f
(that)h(no)g(such)h(set)f(exists)g(is)g(a)f(dir)o(ect)g(consequence)i
(of)f(Rus-)450 2868 y(sell's)21 b(Paradox.)575 2967 y(The)c(key)h(to)g
(a)f(successful)h(interpr)o(etation)f(of)g(F)2079 2979
y Gc(<)-11 b(:)2152 2967 y Gd(lies)17 b(in)i(the)e(observation)h(that)g
(the)f(func-)450 3067 y(tions)27 b(we)e(ar)o(e)g(inter)o(ested)g(in)h
(always)f(arise)g(as)h(the)g(interpr)o(etations)f(of)h(\002nite)g(expr)
o(essions)450 3166 y(in)f(our)f(pr)o(ogramming)h(language\227they)f(ar)
o(e)f(\223algorithms,\224)j(not)f(arbitrary)e(set-theor)o(etic)450
3266 y(functions.)37 b(This)25 b(means)f(that)g(we)g(may)h(r)o(estrict)
e(the)h(interpr)o(etations)g(of)h(types)f(to)h(subsets)450
3366 y(of)18 b(some)g F7(a)g(priori)g Gd(given)g(universe)g(of)g(data)f
(values)h(and)f(algorithms;)j(universal)d(quanti\002ers)450
3465 y(may)k(now)g(be)g(taken)f(to)i(range)e(over)g(the)h(subsets)g(of)
g(this)h(set.)450 3708 y F8(The)j(Universe)g(of)g(Natural)f(Numbers)450
3866 y Gd(A)29 b(convenient)i(choice)f(for)f(the)h(universe)f(of)h
(data)e(values)i(and)f(algorithms)i(is)f(the)f(set)h
FN(N)450 3966 y Gd(of)24 b(natural)f(numbers.)35 b(As)24
b(is)g(well)g(known,)i(all)d(\003at)h(datatypes)f(such)h(as)g
(integers,)g(strings,)450 4065 y(lists,)d(\003oating)h(point)g
(numbers,)e(etc.)h(can)f(be)h(encoded)f(as)g(natural)g(numbers.)2984
4035 y FK(2)575 4165 y Gd(W)-8 b(e)29 b(will)i(not)f(need)f(to)h(be)f
(too)i(formal,)g(her)o(e,)g(about)e(the)h(pr)o(ecise)e(encoding)j(of)e
(algo-)450 4265 y(rithms)22 b(as)e(numbers.)26 b(W)-8
b(e)21 b(just)g(assume)g(that)554 4431 y(1.)41 b(we)26
b(ar)o(e)g(given)h(some)g(way)f(of)h(intepr)o(eting)g(a)f(number)h
Gb(n)g Gd(as)f(a)g(partial)g(function)i F0(f)p Gb(n)p
F0(g)658 4530 y Gd(fr)o(om)20 b(numbers)h(to)g(numbers,)g(and)f(that)p
450 4583 1200 4 v 540 4640 a FJ(1)570 4663 y F6(Namely)c
FH(R)k Ft(=)g Fu(8)p FH([X])35 b(\(\(\(X)p Fo(!)q FH(Bool\))p
Fo(!)q FH(Bool\))i Fo(!)e FH(X\))g Fo(!)g FH(X)q F6(.)540
4721 y FJ(2)570 4744 y F6(For)17 b(example,)f(a)h(pair)g
Ft(\()p FG(m;)11 b(n)p Ft(\))16 b F6(of)h(numbers)f(can)h(be)f(encoded)
g(as)h FG(2)2303 4721 y FL(m)2380 4744 y Fu(\001)e Ft(\()p
FG(2)h Fu(\001)f FG(n)g Ft(+)h FG(1)p Ft(\))p F6(.)p
eop
%%Page: 213 214
213 213 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(213)554
683 y(2.)41 b(every)24 b(\223intuitively)h(computable)f(partial)g
(function\224)g Gb(f)h Gd(on)g(the)g(natural)f(numbers)h(is)658
783 y(r)o(epr)o(esented)e(by)i(some)h(number)g Gb(n)p
Gd(,)g(in)g(the)f(sense)h(that)f F0(f)p Gb(n)p F0(g)p
FY(\()p Gb(m)p FY(\))31 b(=)h Gb(f)p FY(\()p Gb(m)p FY(\))26
b Gd(\(wher)o(e)e(by)658 882 y(the)31 b(equality)h(symbol)g(her)o(e)f
(we)g(mean)g(the)h(so-called)f(\223Kleene)g(equality\224:)46
b(either)658 982 y(both)19 b F0(f)p Gb(n)p F0(g)p FY(\()p
Gb(m)p FY(\))g Gd(and)g Gb(f)p FY(\()p Gb(m)p FY(\))g
Gd(ar)o(e)f(unde\002ned,)h(or)g(both)h(ar)o(e)d(de\002ned)i(and)g(they)
g(ar)o(e)f(equal\).)450 1122 y(W)-8 b(e)31 b(write)g
Gb(\025)p 820 1135 45 4 v(x:)42 b(g)p FY(\()p Gb(x)p
FY(\))31 b Gd(for)g(the)g(number)g(r)o(epr)o(esenting)f(the)i(function)
f(mapping)g(each)g Gb(x)g Gd(to)450 1221 y Gb(g)p FY(\()p
Gb(x)p FY(\))p Gd(,)21 b(wher)o(e)f Gb(g)p FY(\()p Gb(x)p
FY(\))h Gd(is)g(some)h(concr)o(ete)e(description)h(of)g(a)f(computable)
g(function.)450 1458 y F8(Subset)25 b(Semantics)f(for)h
Gh(F)1487 1473 y Gc(<)-11 b(:)450 1616 y Gd(W)j(e)17
b(can)f(obtain)h(a)f(simple)i(semantics)f(for)f(F)1842
1628 y Gc(<)-11 b(:)1914 1616 y Gd(in)17 b(this)g(setting)h(by)f
(interpr)o(eting)f(types)h(as)f(sub-)450 1716 y(sets)24
b(of)g FN(N)33 b Gd(and)23 b(terms)h(as)g(elements)g(of)f(the)h
(meaning)g(of)g(their)g(types.)34 b(Mor)o(e)23 b(formally)-9
b(,)24 b(the)450 1815 y(interpr)o(etation)c(of)g(simple)h(types)f
(\(i.e.,)f(the)i(types)f(of)g(the)h(simply)g(typed)f(lambda-calculus\))
450 1915 y(is)h(given)g(by)g(the)g(following)h(r)o(ecursive)e
(de\002nition:)699 2057 y FY([)-12 b([)q F4(Nat)n FY(])g(])624
b(=)83 b FN(N)699 2156 y FY([)-12 b([)q F4(Top)n FY(])g(])624
b(=)83 b FN(N)699 2256 y FY([)-12 b([)q F4(S)p FV(!)o
F4(T)p FY(])g(])584 b(=)83 b F0(f)p Gb(t)20 b F0(j)g
F5(8)p Gb(x)i F5(2)i FY([)-12 b([)p F4(S)p FY(])g(])p
Gb(:)23 b F0(f)p Gb(t)p F0(g)p FY(\()p Gb(x)p FY(\))f
F5(2)i FY([)-12 b([)p F4(T)p FY(])g(])p F0(g)699 2356
y FY([)g([)q F4({)p 763 2351 5 41 v 3 w(l)825 2368 y
F1(1)865 2356 y F4(:T)952 2368 y F1(1)993 2356 y F4(...l)1167
2368 y F1(n)1219 2356 y F4(:T)1306 2368 y F1(n)p 1371
2351 V 1361 2356 a F4(})p FY(])g(])83 b(=)g F0(f)p Gb(t)20
b F0(j)g F5(8)p F4(l)1878 2368 y F1(i)1933 2356 y F5(2)j
F0(f)p F4(l)2081 2368 y F1(1)2135 2356 y Gb(:)14 b(:)g(:)g
F4(l)2290 2368 y F1(n)2341 2356 y F0(g)p Gb(:)23 b F0(f)p
Gb(t)p F0(g)p FY(\()p F4(l)2577 2368 y F1(i)2609 2356
y FY(\))g F5(2)g FY([)-12 b([)q F4(T)2820 2368 y F1(i)2852
2356 y FY(])g(])p F0(g)p Gb(:)450 2494 y Gd(A)20 b(few)h(comments)h
(about)e(this)i(de\002nition)g(ar)o(e)d(in)i(or)o(der:)575
2634 y F5(\017)41 b Gd(By)19 b(convention,)i(a)d(statement)i(like)f
F0(f)p Gb(t)p F0(g)p FY(\()p Gb(x)p FY(\))j F5(2)i FY([)-12
b([)p F4(T)p FY(])g(])20 b Gd(means,)f(in)h(particular)-6
b(,)18 b(that)h F0(f)p Gb(t)p F0(g)p FY(\()p Gb(x)p FY(\))g
Gd(is)658 2734 y(de\002ned.)33 b(Thus,)25 b(if)f Gb(t)k
F5(2)h FY([)-12 b([)p F4(S)p FV(!)p F4(T)o FY(])g(])q
Gd(,)24 b(then)g F0(f)p Gb(t)p F0(g)e Gd(is)j(de\002ned)e(whenever)g
(it)h(is)g(applied)f(to)h(an)658 2834 y(element)c(of)h
FY([)-12 b([)q F4(S)o FY(])g(])q Gd(.)658 2960 y(In)32
b(other)g(wor)o(ds,)i(although)f(we)f(ar)o(e)e(interpr)o(eting)i(the)g
(elements)h(of)e FN(N)42 b Gd(as)32 b(partial)658 3059
y(functions,)26 b(the)f(interpr)o(etations)f(of)h(types)g(turn)g(out)g
(to)g(be)f(functions)i(that)f(ar)o(e)e(total)658 3159
y(on)e(the)g(elements)g(of)g(their)g(domains.)575 3312
y F5(\017)41 b Gd(For)31 b(notational)h(convenience,)i(we)d(assume)g
(that)g(r)o(ecor)o(d)e(labels)i(ar)o(e)f(drawn)g(fr)o(om)658
3412 y FN(N)t Gd(,)e(so)c(that)e(r)o(ecor)o(ds)f(can)i(be)f(modeled)h
(as)f(partial)g(functions)h(on)h(numbers)f(and)f(\002eld)658
3511 y(pr)o(ojection)f(as)f(application.)575 3651 y(In)c(or)o(der)e(to)
i(interpr)o(et)f(types)h(containing)h(variables,)f(we)f(must)i
(parameterize)c(the)j(above)450 3751 y(de\002nition)28
b(with)f(an)f Ge(environment)f Gd(mapping)i(type)f(variables)g(to)g
(subsets)h(of)g FN(N)36 b Gd(and)27 b(\(for)450 3850
y(subsequent)i(use\))g(term)f(variables)g(to)h(natural)f(numbers.)50
b(W)-8 b(e)28 b(parameterize)f(the)i(above)450 3950 y(de\002nition)22
b(by)f(an)f(envir)o(onment)i Gb(\032)699 4092 y FY([)-12
b([)q F4(Nat)n FY(])g(])899 4117 y F1(\032)1566 4092
y FY(=)83 b FN(N)699 4197 y FY([)-12 b([)q F4(Top)n FY(])g(])899
4222 y F1(\032)1566 4197 y FY(=)83 b FN(N)699 4303 y
FY([)-12 b([)q F4(S)p FV(!)o F4(T)p FY(])g(])938 4328
y F1(\032)1566 4303 y FY(=)83 b F0(f)p Gb(t)20 b F0(j)g
F5(8)p Gb(x)i F5(2)h FY([)-12 b([)q F4(S)o FY(])g(])2136
4328 y F1(\032)2180 4303 y Gb(:)23 b F0(f)p Gb(t)p F0(g)p
FY(\()p Gb(x)p FY(\))f F5(2)h FY([)-12 b([)q F4(T)o FY(])g(])2636
4328 y F1(\032)2679 4303 y F0(g)699 4409 y FY([)g([)q
F4({)p 763 4404 V 3 w(l)825 4421 y F1(1)865 4409 y F4(:T)952
4421 y F1(1)993 4409 y F4(...l)1167 4421 y F1(n)1219
4409 y F4(:T)1306 4421 y F1(n)p 1371 4404 V 1361 4409
a F4(})p FY(])g(])1439 4434 y F1(\032)1566 4409 y FY(=)83
b F0(f)p Gb(t)20 b F0(j)g F5(8)p F4(l)1922 4421 y F1(i)1976
4409 y F5(2)k F0(f)p F4(l)2125 4421 y F1(1)2179 4409
y Gb(:)14 b(:)g(:)g F4(l)2333 4421 y F1(n)2385 4409 y
F0(g)p Gb(:)22 b F0(f)p Gb(t)p F0(g)p FY(\()p F4(l)2621
4421 y F1(i)2652 4409 y FY(\))i F5(2)f FY([)-12 b([)q
F4(T)2864 4421 y F1(i)2895 4409 y FY(])g(])2930 4434
y F1(\032)2974 4409 y F0(g)450 4554 y Gd(and)20 b(add)g(appr)o(opriate)
f(clauses)h(for)h(type)g(variables)e(and)i(universal)f(types:)699
4695 y FY([)-12 b([)q F4(X)o FY(])g(])812 4720 y F1(\032)1246
4695 y FY(=)83 b Gb(\032)p FY(\()p F4(X)p FY(\))699 4801
y([)-12 b([)q F5(8)p F4([X<:S]T)l FY(])g(])1119 4826
y F1(\032)1246 4801 y FY(=)83 b F0(f)p Gb(t)20 b F0(j)g
F5(8)p Gb(U)j F5(\022)f FY([)-12 b([)q F4(S)o FY(])g(])1846
4826 y F1(\032)1889 4801 y Gb(:)24 b(t)e F5(2)i FY([)-12
b([)p F4(T)p FY(])g(])2184 4826 y F1(\032)p F2(+)p FA(f)p
Gc(X)o FX(7)p FC(!)p F1(U)p FA(g)2478 4801 y F0(g)1392
4910 y Gd(that)20 b(is,)1671 4848 y FU(T)1740 4935 y
F1(U)p FX(\022)p F2([)-12 b([)q Gc(S)p F2(])g(])1938
4954 y FB(\032)1981 4910 y FY([)g([)q F4(T)o FY(])g(])2094
4935 y F1(\032)p F2(+)p FA(f)p Gc(X)o FX(7)p FC(!)p F1(U)p
FA(g)p eop
%%Page: 214 215
214 214 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(214)450
683 y(Similarly)21 b(we)g(de\002ne)f(the)h(meaning)g(of)g(terms:)699
851 y FY([)-12 b([)q F4(x)o FY(])g(])812 876 y F1(\032)1539
851 y FY(=)83 b Gb(\032)p FY(\()p Gb(x)p FY(\))699 957
y([)-12 b([)q F4(0)o FY(])g(])812 981 y F1(\032)1539
957 y FY(=)83 b Gb(0)699 1062 y FY([)-12 b([)q F4(succ)41
b(t)p FY(])-12 b(])1030 1087 y F1(\032)1539 1062 y FY(=)83
b([)-12 b([)q Gb(t)p FY(])g(])1789 1087 y F1(\032)1851
1062 y FY(+)18 b Gb(1)699 1168 y FY([)-12 b([)q F4(iter)41
b(T)j(t)1082 1180 y F1(1)1166 1168 y F4(t)1210 1180 y
F1(2)1294 1168 y F4(t)1338 1180 y F1(3)1378 1168 y FY(])-12
b(])1413 1193 y F1(\032)1539 1168 y FY(=)83 b([)-12 b([)q
F4(t)1763 1180 y F1(2)1804 1168 y FY(])g(])1838 1126
y F1(n)1838 1193 y(\032)1889 1168 y FY(\([)g([)q F4(t)2000
1180 y F1(3)2040 1168 y FY(])g(])2075 1193 y F1(\032)2118
1168 y FY(\))p Gb(;)35 b Gd(wher)o(e)21 b Gb(n)i FY(=)g([)-12
b([)p F4(t)2700 1180 y F1(1)2740 1168 y FY(])g(])2775
1193 y F1(\032)699 1273 y FY([)g([)q F4(t.l)n FY(])g(])899
1298 y F1(\032)1539 1273 y FY(=)83 b F0(f)p FY([)-12
b([)p F4(t)p FY(])g(])1824 1298 y F1(\032)1868 1273 y
F0(g)p FY(\()p F4(l)o FY(\))699 1379 y([)g([)q F4({l)821
1391 y F1(i)852 1379 y F4(=t)939 1391 y F1(i)971 1379
y F4(})o FY(])g(])1049 1404 y F1(\032)1539 1379 y FY(=)83
b Gb(\025)p 1685 1392 45 4 v(l:)24 b Gd(if)c Gb(l)j FY(=)g
F4(l)2062 1391 y F1(i)2114 1379 y Gd(then)e FY([)-12
b([)q F4(t)2376 1391 y F1(i)2408 1379 y FY(])g(])2442
1404 y F1(\032)2507 1379 y Gd(else)20 b(unde\002ned)699
1485 y FY([)-12 b([)q F4(t)43 b(t)872 1455 y FX(0)895
1485 y FY(])-12 b(])930 1510 y F1(\032)1539 1485 y FY(=)83
b F0(f)p FY([)-12 b([)p F4(t)p FY(])g(])1824 1510 y F1(\032)1868
1485 y F0(g)p FY(\([)g([)p F4(t)2012 1455 y FX(0)2036
1485 y FY(])g(])2070 1510 y F1(\032)2114 1485 y FY(\))699
1590 y([)g([)q F4(fun[x:S]t)l FY(])g(])1160 1615 y F1(\032)1539
1590 y FY(=)83 b Gb(\025)p 1685 1603 V(v:)23 b FY([)-12
b([)q F4(t)o FY(])g(])1930 1615 y F1(\032)p F2(+)p FA(f)p
Gc(x)o FX(7)p FC(!)p F1(v)p FA(g)699 1699 y FY([)g([)q
F4(fun[X<:S]t)-5 b FY(])-12 b(])1204 1724 y F1(\032)1539
1699 y FY(=)83 b([)-12 b([)q F4(t)o FY(])g(])1798 1724
y F1(\032)699 1805 y FY([)g([)q F4(t)43 b(S)o FY(])-12
b(])899 1830 y F1(\032)1539 1805 y FY(=)83 b([)-12 b([)q
F4(t)o FY(])g(])1798 1830 y F1(\032)450 1978 y Gd(Notice)31
b(that)f(the)g(meaning)h FY([)-12 b([)q F4(t)o FY(])g(])1507
2003 y F1(\032)1581 1978 y Gd(only)31 b(depends)f(on)h(the)f(r)o
(estriction)h(of)f Gb(\032)h Gd(to)g(term)f(vari-)450
2078 y(ables;)21 b(the)h(interpr)o(etation)f(of)g(types,)h(even)f(of)h
(those)g(which)g(occur)g(as)f(annotations)i(in)f F4(t)o
Gd(,)g(is)450 2177 y(irr)o(elevant.)575 2277 y(Notice)17
b(also)h(that)g(the)g(semantics)g(of)f(a)h(term)f(may)h(be)f
(unde\002ned)h(either)f(because)g(one)h(of)450 2376 y(its)j(variables)f
(is)h(not)h(declar)o(ed)d(in)i(the)g(envir)o(onment)h(or)f(because)f
(one)h(of)g(the)g(semantic)g(ap-)450 2476 y(plications)f(is)g
(unde\002ned.)25 b(Our)19 b(aim)g(is)h(to)g(formulate)f(a)f(soundness)j
(theor)o(em)e(which)h(states)450 2576 y(that)e(the)g(meaning)g(of)g
(every)f(well-typed)h(term)g(is)g(de\002ned)f(and)h(is)g(contained)g
(in)g(the)g(mean-)450 2675 y(ing)j(of)f(its)h(type.)k(T)-8
b(o)21 b(this)g(end,)f(we)g(need)g(to)h(de\002ne)f(what)h(it)f(means)h
(for)f(an)g(envir)o(onment)h(to)450 2775 y(match)g(a)f(typing)i
(context.)450 2958 y Ge(23.1.1)c(De\002nition:)40 b Gd(Let)17
b Gb(\032)h Gd(be)f(an)g(envir)o(onment)h(and)f Gb(\000)g
Gd(be)h(a)f(context.)24 b(Say)17 b(that)g Gb(\032)h Gd(satis\002es)g
Gb(\000)450 3057 y Gd(\(written)k Gb(\032)j F0(j)-14
b FY(=)24 b Gb(\000)5 b Gd(\))16 b(if,)21 b(whenever)g
F4(X<:S)f Gd(occurs)i(in)g Gb(\000)5 b Gd(,)16 b(we)21
b(have)g Gb(\032)p FY(\()p F4(X)q FY(\))h Gd(and)f FY([)-12
b([)p F4(S)p FY(])g(])2917 3082 y F1(\032)2982 3057 y
Gd(both)22 b(de\002ned)450 3157 y(and)h(the)h(former)g(a)f(subset)h(of)
g(the)g(latter)f(and,)h(similarly)-9 b(,)24 b(whenever)g
F4(x:S)f Gd(occurs)h(in)g Gb(\000)5 b Gd(,)19 b(we)450
3256 y(have)h Gb(\032)p FY(\()p F4(x)q FY(\))h Gd(and)f
FY([)-12 b([)p F4(S)p FY(])g(])1095 3281 y F1(\032)1160
3256 y Gd(both)21 b(de\002ned)g(with)g(the)g(former)f(an)h(element)g
(of)g(the)g(latter)-6 b(.)287 b FZ(2)450 3439 y Ge(23.1.2)18
b(Theorem)i([Soundness]:)39 b Gd(If)21 b Gb(\000)h Gd(is)g(a)43
b(context)22 b(and)f Gb(\032)h Gd(an)g(envir)o(onment)g(satisfying)g
Gb(\000)6 b Gd(,)450 3539 y(then:)554 3705 y(1.)41 b(If)20
b(all)h(the)f(fr)o(ee)g(type)g(variables)g(in)h F4(S)g
Gd(appear)e(in)i F7(dom)o FY(\()p Gb(\000)6 b FY(\))15
b Gd(then)21 b FY([)-12 b([)q F4(S)o FY(])g(])2773 3730
y F1(\032)2837 3705 y Gd(is)21 b(de\002ned.)554 3871
y(2.)41 b(If)20 b Gb(\000)j F5(`)g F4(S<:T)c Gd(then)i
FY([)-12 b([)p F4(S)p FY(])g(])1367 3896 y F1(\032)1434
3871 y F5(\022)23 b FY([)-12 b([)p F4(T)p FY(])g(])1634
3896 y F1(\032)1678 3871 y Gd(.)554 4037 y(3.)41 b(If)20
b Gb(\000)j F5(`)g F4(t)f F5(2)i F4(S)c Gd(then)h FY([)-12
b([)q F4(t)o FY(])g(])1382 4062 y F1(\032)1446 4037 y
Gd(is)21 b(an)g(element)g(of)g FY([)-12 b([)p Gb(S)p
FY(])g(])2159 4062 y F1(\032)2202 4037 y Gd(.)1171 b
FZ(2)575 4219 y Gd(The)20 b(pr)o(oof)h(is)g(by)g(induction)h(on)g
(derivations.)k(The)21 b(most)g(important)h(ingr)o(edient)f(is)g(the)
450 4319 y(following)h(substitution)h(lemma.)450 4502
y Ge(23.1.3)18 b(Lemma)h([Semantic)f(substitution]:)554
4668 y Gd(1.)41 b(If)20 b FY([)-12 b([)p F4(S)p FY(])g(])846
4693 y F1(\032)p F2(+)p FA(f)p Gc(X)o FX(7)p FC(!)p F2([)g([)q
Gc(T)p F2(])g(])1149 4711 y FB(\032)1188 4693 y FA(g)1238
4668 y Gd(is)21 b(de\002ned,)f(then)h(so)g(is)g FY([)-12
b([)q F0(f)p F4(X)22 b F5(7)p FV(!)h F4(T)p F0(g)p F4(S)o
FY(])-12 b(])2386 4693 y F1(\032)2451 4668 y Gd(and)20
b(they)h(ar)o(e)f(equal.)554 4856 y(2.)41 b(If)20 b FY([)-12
b([)p F4(t)p FY(])g(])846 4881 y F1(\032)p F2(+)p FA(f)p
Gc(x)o FX(7)p FC(!)p F2([)g([)q Gc(t)1125 4865 y Fz(0)1148
4881 y F2(])g(])1178 4900 y FB(\032)1217 4881 y FA(g)1267
4856 y Gd(is)21 b(de\002ned,)f(then)h(so)g(is)h FY([)-12
b([)p F0(f)p F4(x)22 b F5(7)p FV(!)h F4(t)2319 4826 y
FX(0)2342 4856 y F0(g)p F4(t)o FY(])-12 b(])2446 4881
y F1(\032)2511 4856 y Gd(and)20 b(they)h(ar)o(e)f(equal.)183
b FZ(2)p eop
%%Page: 215 216
215 215 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(215)450
683 y F7(Pr)o(oof:)66 b Gd(By)21 b(induction)h(on)f(types)g(\(part)f
(1\))g(or)g(terms)h(\(part)f(2\).)943 b FZ(2)575 866
y Gd(Notice)31 b(that)g(this)h(substitution)h(lemma)e(is)g(nothing)i
(but)e(a)g(formalisation)h(of)f(the)g(r)o(e-)450 965
y(quir)o(ement)21 b(of)g F7(compositionality)d Gd(mentioned)k(in)f(the)
g(intr)o(oduction)g(to)h(this)f(chapter)-6 b(.)450 1148
y F7(Pr)o(oof)20 b(of)h(Theor)o(em)f(23.1.2:)64 b Gd(Part)25
b(\(1\))f(is)i(by)f(induction)i(on)f(types.)39 b(Part)25
b(\(2\))f(is)i(by)f(induction)450 1248 y(on)e(subtyping)g(derivations)f
(\(not)h(necessarily)f(algorithmic)h(derivations:)29
b(the)22 b(transitivity)450 1347 y(r)o(ule)c(is)h(not)g(pr)o
(oblematic\).)k(Part)18 b(\(3\))f(is)i(by)f(induction)h(on)g(typing)g
(derivations.)25 b(None)19 b(of)f(the)450 1447 y(cases)i(in)h(these)g
(inductions)h(ar)o(e)d(dif)o(\002cult;)h(as)g(examples,)g(we)g(show)i
(the)f(cases)f(for)g(function)450 1546 y(abstraction)g(and)h(type)f
(application)h(in)g(part)f(\(3\).)575 1646 y(For)k(the)g(function)h
(abstraction)f(case,)g(suppose)h(that)f Gb(\000)6 b(;)23
b F4(x:S)29 b F5(`)g F4(t)g FF(:)h F4(T)23 b Gd(and)h(that)g
Gb(\032)30 b F0(j)-14 b FY(=)29 b Gb(\000)6 b Gd(.)450
1746 y(Then)32 b FY([)-12 b([)q F4(fun[x:S]t)l FY(])g(])1131
1771 y F1(\032)1219 1746 y FY(=)44 b Gb(\025)p 1326 1759
45 4 v(v:)g FY([)-12 b([)p F4(t)p FY(])g(])1591 1771
y F1(\032)p F2(+)p FA(f)p Gc(x)o FX(7)p FC(!)p F1(v)p
FA(g)1867 1746 y Gd(;)38 b(call)32 b(this)h(number)f
Gb(d)p Gd(.)60 b(W)-8 b(e)32 b(must)h(show)g Gb(d)45
b F5(2)450 1856 y FY([)-12 b([)p F4(S)p FV(!)p F4(T)p
FY(])g(])689 1881 y F1(\032)733 1856 y Gd(\227that)26
b(is,)i(if)e Gb(a)34 b F5(2)g FY([)-12 b([)p F4(S)p FY(])g(])1458
1881 y F1(\032)1502 1856 y Gd(,)27 b(then)g F0(f)p Gb(d)p
F0(g)p FY(\()p Gb(a)p FY(\))f Gd(is)h(de\002ned)f(and)g(belongs)h(to)g
FY([)-12 b([)p F4(T)p FY(])g(])3066 1881 y F1(\032)3110
1856 y Gd(.)43 b(Now)-8 b(,)28 b(if)450 1955 y Gb(a)37
b F5(2)i FY([)-12 b([)p F4(S)p FY(])g(])744 1980 y F1(\032)788
1955 y Gd(,)30 b(then)g F0(f)p Gb(d)p F0(g)p FY(\()p
Gb(a)p FY(\))37 b(=)h([)-12 b([)p F4(t)p FY(])g(])1501
1980 y F1(\032)p F2(+)p FA(f)p Gc(x)o FX(7)p FC(!)p F1(a)p
FA(g)1784 1955 y Gd(.)50 b(Since)28 b Gb(a)38 b F5(2)g
FY([)-12 b([)q F4(S)o FY(])g(])2371 1980 y F1(\032)2414
1955 y Gd(,)31 b(the)e(extended)e(envir)o(onment)450
2065 y Gb(\032)20 b FY(+)f F0(f)p F4(x)25 b F5(7)p FV(!)h
Gb(a)p F0(g)21 b Gd(satis\002es)h Gb(\000)6 b(;)20 b
F4(x:S)n Gd(,)j(so)f(the)h(induction)g(hypothesis)g(applies,)f
(yielding)h F0(f)p Gb(d)p F0(g)p FY(\()p Gb(a)p FY(\))i
F5(2)450 2165 y FY([)-12 b([)p F4(T)p FY(])g(])563 2190
y F1(\032)606 2165 y Gd(,)21 b(as)f(r)o(equir)o(ed.)575
2264 y(For)j(the)h(type)g(application)f(case,)h(suppose)g(that)f
Gb(\000)28 b F5(`)h F4(t)f FF(:)g F5(8)p F4([X<:S]T)l
Gd(,)c(that)g Gb(\000)k F5(`)g F4(U)g FF(<)-17 b(:)30
b F4(S)o Gd(,)450 2364 y(and)21 b(that)g Gb(\032)k F0(j)-14
b FY(=)24 b Gb(\000)6 b Gd(.)22 b(Part)f(\(2\))f(gives)i(us)f
FY([)-12 b([)q F4(U)o FY(])g(])1756 2389 y F1(\032)1824
2364 y F5(\022)24 b FY([)-12 b([)p F4(S)p FY(])g(])2025
2389 y F1(\032)2069 2364 y Gd(.)28 b(Using)21 b(the)h(induction)g
(hypothesis)h(on)f F4(t)450 2464 y Gd(and)d(the)h(interpr)o(etation)f
(of)h(universal)g(types,)f(we)h(obtain)g FY([)-12 b([)q
F4(t)o FY(])g(])2459 2489 y F1(\032)2525 2464 y F5(2)24
b FY([)-12 b([)p F4(T)p FY(])g(])2716 2489 y F1(\032)p
F2(+)p FA(f)p Gc(X)o FX(7)p FC(!)p F2([)g([)q Gc(U)o
F2(])g(])3018 2507 y FB(\032)3058 2489 y FA(g)3087 2464
y Gd(.)25 b(Thus,)20 b(by)450 2586 y(Lemma)h(23.1.3)d(and)i(the)h
(interpr)o(etation)g(of)g(type)f(application,)h(we)g(have)f
FY([)-12 b([)q F4(t)43 b(U)p FY(])-12 b(])3062 2611 y
F1(\032)3129 2586 y FY(=)23 b([)-12 b([)q F4(t)o FY(])g(])3328
2611 y F1(\032)3395 2586 y F5(2)450 2685 y FY([)g([)p
F0(f)p F4(X)23 b F5(7)p FV(!)g F4(U)o F0(g)p F4(T)p FY(])-12
b(])832 2710 y F1(\032)876 2685 y Gd(.)2497 b FZ(2)450
2868 y Ge(23.1.4)18 b(Exercise)h([Quick)h(check]:)39
b Gd(How)32 b(can)e(it)h(happen)f(that)h FY([)-12 b([)q
F0(f)p F4(x)40 b F5(7)p FV(!)i F4(t)2857 2838 y FX(0)2880
2868 y F0(g)p F4(t)p FY(])-12 b(])2985 2893 y F1(\032)3060
2868 y Gd(is)31 b(de\002ned,)450 2968 y(but)21 b FY([)-12
b([)p F4(t)p FY(])g(])706 2993 y F1(\032)p F2(+)p FA(f)p
Gc(x)o FX(7)p FC(!)p F2([)g([)q Gc(t)985 2976 y Fz(0)1008
2993 y F2(])g(])1038 3011 y FB(\032)1077 2993 y FA(g)1127
2968 y Gd(is)21 b(not?)2030 b FZ(2)450 3171 y Ge(23.1.5)18
b(Exercise:)39 b Gd(Show)26 b(the)g(pr)o(oofs)f(of)g(the)g(cases)g(for)
g(r)o(ecor)o(d)f(and)g(quanti\002er)i(subtyping)450 3271
y(for)21 b(part)f(\(2\))f(of)i(the)g(last)f(pr)o(oof.)1929
b FZ(2)575 3453 y Gd(An)30 b(application)h(of)g(the)g(subset)g(model)g
(is)h(that)f(it)g(can)f(be)h(used)g(to)g(decide)f(whether)450
3553 y(certain)g(types)h(ar)o(e)e(inhabited)h(by)h(any)f(closed)h
(terms.)55 b(For)31 b(example,)h FY([)-12 b([)p F5(8)p
F4([X<:Top]X)l FY(])g(])41 b(=)450 3590 y FU(T)519 3677
y F1(U)p FX(\022)p Fn(N)685 3652 y Gb(U)33 b Gd(is)g(the)g(empty)f(set)
1392 3622 y FK(3)1426 3652 y Gd(;)38 b(so)33 b(ther)o(e)f(can)g(be)g
(no)h(closed)g(term)f(of)g(type)h F5(8)p F4([X<:Top]X)-5
b Gd(,)450 3752 y(because)19 b(its)i(interpr)o(etation)f(would)h(have)f
(to)g(be)g(an)g(element)h(of)f(the)h(empty)f(set.)25
b(Similarly)-9 b(,)450 3852 y(the)19 b(set)f FY([)-12
b([)q F5(8)p F4([X<:Top])p F5(8)p F4([Y<:)o(To)o(p]\()o(\(X)o
FV(!)-6 b F4(Y\))p FV(!)p F4(\(X)p FV(!)o F4(Y\)\))p
FV(!)o F4(X)p FV(!)o F4(Y)p FY(])-12 b(])p Gd(\227the)19
b(interpr)o(etation)f(of)h(the)450 3951 y(type)30 b(of)h(the)g
(\002xed-point)f(combinator)o(\227is)h(empty)-9 b(,)33
b(which)f(shows)g(that)e(the)h(\002xed-point)450 4051
y(combinator)17 b(cannot)f(be)g(interpr)o(eted)f(in)h(the)h(subset)f
(model,)h(and)f(hence)g(cannot)h(be)e(de\002ned)450 4151
y(in)21 b(pur)o(e)f(System)h(F)1067 4163 y Gc(<)-11 b(:)1121
4151 y Gd(.)26 b(This)21 b(ties)g(in)g(with)h(the)f(observation)g(made)
f(above)g(that)g(all)h(functions)450 4250 y(in)g(the)g(subset)g(model)g
(ar)o(e)e(total.)p 450 4841 1200 4 v 540 4897 a FJ(3)570
4920 y F6(Fr)o(om)d(her)o(e)g(on,)g(when)g(the)g(envir)o(onment)f
FG(\032)i F6(in)f(an)h(expr)o(ession)g Ft([)-9 b([)p
FH(T)p Ft(])g(])2322 4941 y FL(\032)2379 4920 y F6(is)17
b(empty)-7 b(,)15 b(we)i(will)h(usually)f(omit)g(it.)p
eop
%%Page: 216 217
216 216 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(216)450
683 y F8(Problems)25 b(with)g(the)f(Subset)h(Semantics)450
841 y Gd(Though)e(it)f(validates)e(the)i(typing,)h(subtyping,)f(and)g
(evaluation)f(r)o(elations,)h(the)f(subset)h(se-)450
941 y(mantics)k(is)g(unsatisfactory)f(because)g(it)h(does)f(not)i
(validate)d(some)i(of)g(the)f(r)o(ules)h(of)g(the)f(r)o(e-)450
1040 y(duction)c(r)o(elation.)k(Mor)o(e)20 b(pr)o(ecisely)-9
b(,)20 b(fr)o(om)658 1206 y FY([)-12 b([)p F4(t)p FY(])g(])770
1231 y F1(\032)p F2(+)p FA(f)p Gc(x)o FX(7)p FC(!)p F1(v)p
FA(g)1069 1206 y FY(=)23 b([)-12 b([)p F4(t)1241 1172
y FX(0)1264 1206 y FY(])g(])1298 1231 y F1(\032)p F2(+)p
FA(f)p Gc(x)o FX(7)p FC(!)p F1(v)p FA(g)1657 1206 y Gd(for)21
b(all)f Gb(v)k F5(2)f FY([)-12 b([)q F4(S)o FY(])g(])2150
1231 y F1(\032)450 1381 y Gd(we)21 b(cannot)g(conclude)g(that)658
1546 y FY([)-12 b([)p F4(fun[x:S]t)l FY(])g(])1119 1571
y F1(\032)1186 1546 y FY(=)22 b([)-12 b([)q F4(fun[x:S]t)1706
1512 y FX(0)1729 1546 y FY(])g(])1763 1571 y F1(\032)1807
1546 y Gb(:)450 1712 y Gd(For)23 b(instance,)h(we)f(have)f
FY([)-12 b([)q F4(0)o FY(])g(])1387 1737 y FA(f)p Gc(x)o
FX(7)p FC(!)p F1(v)p FA(g)1599 1712 y FY(=)27 b Gb(0)h
FY(=)f([)-12 b([)p F4(\(fun[y:Nat]0\)x)-6 b FY(])-12
b(])2527 1737 y FA(f)p Gc(x)o FX(7)p FC(!)p F1(v)p FA(g)2712
1712 y Gd(,)23 b(but)g(not)h(necessarily)450 1822 y FY([)-12
b([)p F4(fun[x:Nat]0)l FY(])g(])25 b(=)g([)-12 b([)p
F4(fun[x:Nat])40 b(\(fun[y:Nat]0\)x)-6 b FY(])-12 b(])p
Gd(,)22 b(because)f(the)g(semantical)h(lambda)450 1922
y(abstraction)32 b(is)g(de\002ned)g(on)h(descriptions,)i(not)e(on)g
(actual)e(functions.)61 b(This)33 b(possibility)450 2022
y(r)o(epr)o(esents)19 b(a)i(failur)o(e)e(of)i Ge(extensionality)16
b Gd(of)21 b(the)g(semantics.)575 2121 y(Another)e(pr)o(oblem)f(with)i
(the)e(subset)h(semantics)h(is)f(that,)g(since)g(subtypes)g(ar)o(e)e
(modeled)450 2221 y(as)32 b(subsets,)k(the)d(model)g(fails)g(to)g
(validate)e(some)j(expected)d(typed)i(equations)g(between)450
2320 y(r)o(ecor)o(ds,)19 b(such)i(as)g(the)g(one)g(we)f(saw)h(above:)
658 2486 y F4({x=0,y=0})e FY(=)k F4({x=0,y=1})c F5(2)k
F4({)p 1682 2481 5 41 v 4 w(x:Nat)p 1934 2481 V 4 w(})450
2772 y Gj(23.2)119 b(The)29 b(PER)i(interpretation)450
2961 y Gd(W)-8 b(e)20 b(can)g(obtain)h(these)f(missing)i(equations)f
(by)f(endowing)i(each)d(type)h(interpr)o(etation)g(with)450
3061 y(its)e(own)g(\223local\224)e(notion)j(of)e(equality)-9
b(.)25 b(In)17 b(the)h(case)e(of)i(function)g(types,)g(this)g(equality)
f(will)h(be)450 3160 y(de\002ned)24 b(in)h(such)g(a)e(way)i(that)f
(algorithms)h(that)g(map)f(equal)g(ar)o(guments)g(to)h(equal)f(r)o
(esults)450 3260 y(ar)o(e)19 b(r)o(egar)o(ded)e(as)j(equal.)25
b(\(This)20 b(will)h(solve)f(both)h(of)f(the)g(pr)o(oblems)g(observed)f
(at)h(the)g(end)g(of)450 3360 y(the)h(pr)o(evious)f(Section,)h(since)g
(r)o(ecor)o(ds)e(ar)o(e)h(interpr)o(eted)f(as)h(partial)g(functions)i
(on)f(labels.\))450 3542 y Ge(23.2.1)d(De\002nition:)40
b Gd(A)18 b Ge(partial)g(equivalence)e(relation)h Gd(\(PER\))i(is)h(a)e
(symmetric)i(and)f(transi-)450 3642 y(tive)i(r)o(elation)f(\(not,)h(in)
g(general,)f(r)o(e\003exive\))f(on)j(the)f(set)g FN(N)30
b Gd(of)21 b(natural)f(numbers.)343 b FZ(2)575 3824 y
Gd(W)-8 b(e)22 b(write)h Gb(mRn)f Gd(when)h Gb(m)f Gd(and)g
Gb(n)h Gd(ar)o(e)e(r)o(elated)g(by)h Gb(R)p Gd(;)h(alternatively)-9
b(,)21 b(we)i(can)f(view)g Gb(R)g Gd(as)450 3924 y(a)27
b(subset)g(of)g FN(N)44 b F5(\002)35 b FN(N)h Gd(and)27
b(write)g FY(\()p Gb(m;)14 b(n)p FY(\))35 b F5(2)g Gb(R)p
Gd(.)44 b(When)28 b Gb(R)e Gd(is)i(a)e(PER,)h(we)g(write)g
F7(dom)o FY(\()p Gb(R)p FY(\))g Gd(for)450 4023 y(the)f(set)h
F0(f)p Gb(n)f F0(j)g Gb(nRn)p F0(g)p Gd(,)h(the)f(set)g(of)h(numbers)f
(r)o(elated)f(to)h(themselves)h(by)g Gb(R)p Gd(.)41 b(Notice)27
b(that)f Gb(R)g Gd(is)450 4123 y(an)g(equivalence)h(r)o(elation)f(on)h
F7(dom)o FY(\()p Gb(R)p FY(\))p Gd(,)h(so)f(a)f(PER)h(can)g(be)f
(thought)i(of)e(as)h(consisting)h(of)e(a)450 4223 y(subset)21
b(of)h FN(N)31 b Gd(together)21 b(with)h(a)f(local)g(equality)h(r)o
(elation.)k(Also,)21 b(note)h(that)f(if)g Gb(xRy)g Gd(then)g(both)450
4322 y Gb(x)f Gd(and)h Gb(y)g Gd(ar)o(e)e(in)i F7(dom)o
FY(\()p Gb(R)p FY(\))p Gd(.)575 4422 y(If)i Gb(R)g Gd(and)g
Gb(S)h Gd(ar)o(e)e(PERs,)i(we)g(write)f Gb(R)28 b F5(\022)g
Gb(S)c Gd(to)f(mean)h(that)f Gb(R)g Gd(is)h(a)f(subr)o(elation)h(of)f
Gb(S)h Gd(in)g(the)450 4521 y(set-theor)o(etic)f(sense\227i.e.,)g
Gb(xRy)g Gd(implies)h Gb(xSy)p Gd(.)34 b(This)23 b(means)h(that)f
F7(dom)o FY(\()p Gb(S)p FY(\))h Gd(is)g(a)f(superset)g(of)450
4621 y F7(dom)o FY(\()p Gb(R)p FY(\))e Gd(and)g(that)g(the)h(equality)f
(in)h Gb(S)f Gd(on)h(the)f(common)i(part)e(is)g(coarser)g(than)g(the)g
(one)h(in)g Gb(R)p Gd(.)450 4721 y(This)h(will)g(account)f(for)g(the)g
(\223non-injective\224)g(natur)o(e)f(of)h(the)g(subtyping)h(r)o
(elation)f(between)450 4820 y(r)o(ecor)o(d)17 b(types)i(\(the)g(fact)f
(that)h(two)g(dif)o(fer)o(ent)e(r)o(ecor)o(ds)h(in)h(a)g(type)f
F4(S)h Gd(can)g(become)f(equal)h(when)450 4920 y(viewed)h(at)h(a)f
(supertype)g F4(T)p Gd(\).)p eop
%%Page: 217 218
217 217 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(217)450
683 y F8(Interpretation)24 b(of)h(T)-9 b(ypes)450 841
y Gd(The)26 b(types)g(of)g(F)984 853 y Gc(<)-11 b(:)1065
841 y Gd(ar)o(e)25 b(interpr)o(eted)g(as)g(PERs)i(as)f(follows.)42
b(\(The)26 b(envir)o(onment)h Gb(\032)f Gd(her)o(e)g(as-)450
941 y(signs)32 b(PERs,)i(not)e(just)g(sets)g(of)f(numbers,)j(to)e(type)
f(variables\227and,)h(as)f(befor)o(e,)i(natural)450 1040
y(numbers)21 b(to)g(term)g(variables.\))699 1198 y FY([)-12
b([)q F4(Nat)n FY(])g(])899 1223 y F1(\032)1566 1198
y FY(=)83 b F0(f)p FY(\()p Gb(n;)14 b(n)p FY(\))21 b
F0(j)f Gb(n)j F5(2)h FN(N)t F0(g)699 1304 y FY([)-12
b([)q F4(Top)n FY(])g(])899 1329 y F1(\032)1566 1304
y FY(=)83 b FN(N)33 b F5(\002)22 b FN(N)93 b Gd(\(the)21
b(everywher)o(e-tr)o(ue)e(r)o(elation\))699 1410 y FY([)-12
b([)q F4(S)p FV(!)o F4(T)p FY(])g(])938 1435 y F1(\032)1566
1410 y FY(=)83 b F0(f)p FY(\()p Gb(t;)14 b(t)1886 1380
y FX(0)1907 1410 y FY(\))21 b F0(j)g F5(8)p FY(\()p Gb(x;)14
b(x)2211 1380 y FX(0)2232 1410 y FY(\))24 b F5(2)f FY([)-12
b([)q F4(S)o FY(])g(])2479 1435 y F1(\032)2522 1410 y
Gb(:)21 b F0(f)p Gb(t)p F0(g)p FY(\()p Gb(x)p FY(\)[)-12
b([)p F4(T)o FY(])g(])2875 1435 y F1(\032)2918 1410 y
F0(f)p Gb(t)2988 1380 y FX(0)3010 1410 y F0(g)p FY(\()p
Gb(x)3121 1380 y FX(0)3144 1410 y FY(\))p F0(g)699 1515
y FY([)g([)q F4({)p 763 1510 5 41 v 3 w(l)825 1527 y
F1(1)865 1515 y F4(:T)952 1527 y F1(1)993 1515 y F4(...l)1167
1527 y F1(n)1219 1515 y F4(:T)1306 1527 y F1(n)p 1371
1510 V 1361 1515 a F4(})p FY(])g(])1439 1540 y F1(\032)1566
1515 y FY(=)83 b F0(f)p FY(\()p Gb(t;)14 b(t)1886 1485
y FX(0)1907 1515 y FY(\))21 b F0(j)g F5(8)p F4(l)2089
1527 y F1(i)2143 1515 y F5(2)i F0(f)p F4(l)2292 1527
y F1(1)2346 1515 y Gb(:)14 b(:)g(:)g F4(l)2500 1527 y
F1(n)2552 1515 y F0(g)p Gb(:)20 b FY(\()p F0(f)p Gb(t)p
F0(g)p F4(l)2786 1527 y F1(i)2817 1515 y Gb(;)14 b F0(f)p
Gb(t)2924 1485 y FX(0)2946 1515 y F0(g)p F4(l)3016 1527
y F1(i)3047 1515 y FY(\))24 b F5(2)f FY([)-12 b([)p F4(T)3259
1527 y F1(i)3290 1515 y FY(])g(])3325 1540 y F1(\032)3369
1515 y F0(g)699 1621 y FY([)g([)q F5(8)p F4([X<:S]T)l
FY(])g(])1119 1646 y F1(\032)1566 1621 y FY(=)83 b F0(f)p
FY(\()p Gb(t;)14 b(t)1886 1591 y FX(0)1907 1621 y FY(\))21
b F0(j)g Gb(t)p FY([)-12 b([)p F4(T)p FY(])g(])2146 1646
y F1(\032)p F2(+)p FA(f)p Gc(X)o FX(7)p FC(!)p F1(U)p
FA(g)2440 1621 y Gb(t)2483 1591 y FX(0)2527 1621 y Gd(for)20
b(all)h Gb(U)i F5(\022)g FY([)-12 b([)p F4(S)p FY(])g(])3051
1646 y F1(\032)3095 1621 y F0(g)1712 1730 y Gd(that)20
b(is,)1991 1668 y FU(T)2060 1755 y F1(U)p FX(\022)p F2([)-12
b([)q Gc(S)p F2(])g(])2258 1774 y FB(\032)2301 1730 y
FY([)g([)q F4(T)o FY(])g(])2414 1755 y F1(\032)p F2(+)p
FA(f)p Gc(X)o FX(7)p FC(!)p F1(U)p FA(g)450 1914 y Ge(23.2.2)18
b(Exercise)h([Quick)h(check]:)39 b Gd(Show)28 b(that,)i(if)d
Gb(f;)14 b(g)37 b F5(2)f F7(dom)o FY(\([)-12 b([)q F4(S)p
FV(!)o F4(T)p FY(])g(])2767 1939 y F1(\032)2811 1914
y FY(\))p Gd(,)30 b(then)e Gb(f)p FY([)-12 b([)p F4(S)p
FV(!)p F4(T)p FY(])g(])3359 1939 y F1(\032)3403 1914
y Gb(g)450 2014 y Gd(if)o(f)20 b Gb(f)p FY(\()p Gb(a)p
FY(\)[)-12 b([)p F4(T)p FY(])g(])811 2039 y F1(\032)855
2014 y Gb(g)p FY(\()p Gb(a)p FY(\))21 b Gd(for)f(all)h
Gb(a)i F5(2)g F7(dom)o FY(\([)-12 b([)q F4(S)o FY(])g(])q(\))p
Gd(.)1626 b FZ(2)575 2176 y Gd(The)33 b(interpr)o(etation)h(of)g(terms)
g(is)g(exactly)f(as)h(in)g(the)g(subset)g(interpr)o(etation)g(in)g
(Sec-)450 2276 y(tion)27 b(23.1.)39 b(T)-8 b(o)27 b(show)g(that)f(this)
h(interpr)o(etation)e(is)i(sound,)g(we)f(must)h(slightly)h(modify)e
(the)450 2375 y(de\002nition)c(of)g(satisfaction)f(between)g(envir)o
(onments)h(and)f(contexts:)27 b(when)22 b F4(x:S)e Gd(is)h(a)g(bind-)
450 2475 y(ing)g(in)h Gb(\000)5 b Gd(,)15 b(we)21 b(r)o(equir)o(e)e
(that)i Gb(\032)p FY(\()p Gb(x)p FY(\))j F5(2)f F7(dom)o
FY(\([)-12 b([)q F4(S)o FY(])g(])1890 2500 y F1(\032)1934
2475 y FY(\))p Gd(.)450 2637 y Ge(23.2.3)18 b(Theorem)i([Semantic)e
(soundness)h(of)i(the)f(PER)g(intepretation]:)38 b Gd(The)15
b(PER)h(interpr)o(e-)450 2736 y(tation)21 b(is)g(sound)g(in)g(the)f
(sense)h(that)g(all)f(statements)h(ar)o(e)e(validated)g(semantically)-9
b(.)25 b(If)20 b Gb(\032)k F0(j)-14 b FY(=)22 b Gb(\000)6
b Gd(,)450 2836 y(then:)554 2985 y(1.)41 b Gb(\000)22
b F5(`)h F4(S)g FF(<)-17 b(:)24 b F4(T)c Gd(implies)i
FY([)-12 b([)p F4(S)p FY(])g(])1443 3010 y F1(\032)1510
2985 y F5(\022)23 b FY([)-12 b([)p F4(T)p FY(])g(])1710
3010 y F1(\032)1754 2985 y Gd(;)554 3143 y(2.)41 b Gb(\000)22
b F5(`)h F4(t)g FF(:)g F4(S)e Gd(implies)g FY([)-12 b([)p
F4(t)p FY(])g(])1408 3168 y F1(\032)1475 3143 y F5(2)24
b F7(dom)o FY(\([)-12 b([)p F4(S)p FY(])g(])1841 3168
y F1(\032)1885 3143 y FY(\))p Gd(;)554 3301 y(3.)41 b
F4(t)22 b F5(\000)-14 b FV(!)858 3271 y FX(\003)919 3301
y F4(t)970 3271 y FX(0)994 3301 y Gd(,)20 b(with)i Gb(\000)h
F5(`)f F4(t)h FF(:)g F4(T)e Gd(and)f Gb(\000)j F5(`)g
F4(t)1926 3271 y FX(0)1972 3301 y FF(:)g F4(T)p Gd(,)e(implies)g
FY([)-12 b([)p F4(t)p FY(])g(])2535 3326 y F1(\032)2579
3301 y FY([)g([)q F4(T)o FY(])g(])2692 3326 y F1(\032)2735
3301 y FY([)g([)q F4(t)2821 3271 y FX(0)2844 3301 y FY(])g(])2879
3326 y F1(\032)2922 3301 y Gd(.)451 b FZ(2)450 3463 y
F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)46 b(The)28 b(ar)o(gument)f(is)i
(similar)f(to)g(the)h(pr)o(oof)e(of)h(23.1.2.)45 b(First,)30
b(one)e(estab-)450 3563 y(lishes)c(the)f(validity)f(of)h(the)g
(semantic)g(substitution)h(lemma,)g(r)o(eplacing)e(subsets)h(by)g
(PERs.)450 3662 y(The)29 b(pr)o(oofs)g(then)g(pr)o(oceed)f(by)h
(induction)h(on)g(derivations.)50 b(In)30 b(part)e(\(2\),)i(the)f
(statement)450 3762 y(must)21 b(be)g(str)o(engthened)f(as)h(follows:)
531 3911 y(2'.)41 b(If)24 b Gb(\032)32 b F0(j)-14 b FY(=)31
b Gb(\000)25 b Gd(and)g Gb(\032)1202 3881 y FX(0)1256
3911 y F0(j)-14 b FY(=)31 b Gb(\000)6 b Gd(,)20 b(and)25
b(if)g Gb(\032)p FY(\()p F4(X)p FY(\))32 b(=)f Gb(\032)2021
3881 y FX(0)2044 3911 y FY(\()p F4(X)p FY(\))26 b Gd(for)f(all)g(type)g
(variables)f F4(X)h Gd(declar)o(ed)e(in)658 4011 y Gb(\000)29
b Gd(and)g Gb(\032)p FY(\()p F4(x)p FY(\)[)-12 b([)q
F4(S)o FY(])g(])1168 4036 y F1(\032)1211 4011 y Gb(\032)1264
3981 y FX(0)1288 4011 y FY(\()p F4(x)p FY(\))29 b Gd(for)g(all)g(term)h
(variable)e(declarations)g F4(x:S)o Gd(,)j(then)f Gb(\000)39
b F5(`)g F4(t)f FF(:)h F4(S)658 4110 y Gd(implies)21
b FY([)-12 b([)p F4(t)p FY(])g(])1061 4135 y F1(\032)1105
4110 y FY([)g([)q F4(S)o FY(])g(])1218 4135 y F1(\032)1261
4110 y FY([)g([)q F4(t)o FY(])g(])1374 4135 y F1(\032)1421
4119 y Fz(0)1447 4110 y Gd(.)450 4260 y(Notice)21 b(that)g
FY([)-12 b([)p F4(S)p FY(])g(])990 4285 y F1(\032)1057
4260 y FY(=)23 b([)-12 b([)p F4(S)p FY(])g(])1255 4285
y F1(\032)1302 4268 y Fz(0)3394 4260 y FZ(2)575 4422
y Gd(One)27 b(technical)h(note)g(is)g(in)g(or)o(der)-6
b(.)44 b(Strictly)27 b(speaking,)i(the)f(PER)g(semantics)g(does)f(not)
450 4521 y(model)e(r)o(eduction)f(as)g(equality)-9 b(,)25
b(but)f(rather)g(as)g(r)o(elatedness)f(in)i(a)f(certain)g(PER.)g(If)g
(one)h(de-)450 4621 y(sir)o(es)k(actual)g(equality)-9
b(,)32 b(one)e(can)g(decr)o(ee)e(that)i(the)g(meaning)g(of)g(a)f(term)h
(is)g(not)g(a)g(natural)450 4721 y(number)-6 b(,)31 b(but)e(rather)f
(an)h(equivalence)f(class)h(of)g(natural)g(numbers;)k(then,)e(however)
-6 b(,)31 b(the)450 4820 y(meaning)22 b(of)f(a)f(term)h(depends)g(on)g
(its)h(type,)e(which)i(makes)f(the)h(interpr)o(etation)e(of)h(subtyp-)
450 4920 y(ing)g(mor)o(e)g(complicated.)p eop
%%Page: 218 219
218 218 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(218)450
683 y F8(Applications)25 b(of)g(the)g(PER)g(model)450
841 y Gd(Now)e(we)g(come)g(to)f(the)h(pr)o(omised)f(application)h(of)f
(the)h(PER)g(model)g(as)f(a)g(means)h(to)g(estab-)450
941 y(lish)28 b(observational)f(equivalence)g(of)g(pr)o(ograms.)44
b(The)27 b(main)h(idea)e(is)h(that,)i(at)d(the)i(atomic)450
1040 y(type)22 b F4(Nat)o Gd(,)h(the)g(semantic)f(equality)h(agr)o(ees)
e(with)j(the)e(syntactic)h(equality)g(given)g(by)g(the)f(r)o(e-)450
1140 y(duction)f(r)o(elation.)450 1323 y Ge(23.2.4)d(Lemma:)40
b Gd(If)27 b F4(t)1148 1335 y F1(1)1216 1323 y Gd(and)g
F4(t)1428 1335 y F1(2)1495 1323 y Gd(ar)o(e)f(closed)i(terms)f(of)g
(type)h F4(Nat)n Gd(,)h(then)f FY([)-12 b([)p F4(t)2870
1335 y F1(1)2910 1323 y FY(])g(])q([)g([)p F4(Nat)o FY(])g(])q([)g([)p
F4(t)3223 1335 y F1(2)3263 1323 y FY(])g(])28 b Gd(im-)450
1422 y(plies)21 b(that)g F4(t)852 1434 y F1(1)913 1422
y Gd(and)g F4(t)1118 1434 y F1(2)1180 1422 y Gd(have)f(the)h(same)f
(number)h(as)g(normal)g(form.)776 b FZ(2)450 1605 y F7(Pr)o(oof:)66
b Gd(By)16 b(the)g(str)o(ong)g(normalization)g(of)g(System)g(F)2158
1617 y Gc(<)-11 b(:)2228 1605 y Gd(\(Theor)o(em)16 b
Ge(??)o Gd(\))g(together)g(with)g(pr)o(eser)o(-)450 1704
y(vation)24 b(\()p Ge(??)o Gd(\),)g F4(t)924 1716 y F1(1)988
1704 y Gd(and)f F4(t)1196 1716 y F1(2)1260 1704 y Gd(each)g(have)g
(some)h(number)f(as)g(normal)h(form.)34 b(By)23 b(the)h(soundness)450
1804 y(theor)o(em)d(\(23.2.3,)e(part)i(3\),)g(the)h(interpr)o(etation)f
(of)g(a)g(term)h(is)g(r)o(elated)e(to)i(the)f(interpr)o(etation)450
1904 y(of)26 b(its)h(normal)g(form,)h(so)f(the)f(normal)h(forms)g(of)f
F4(t)2106 1916 y F1(1)2173 1904 y Gd(and)g F4(t)2383
1916 y F1(2)2450 1904 y Gd(ar)o(e)f(r)o(elated)g(by)i
FY([)-12 b([)p F4(Nat)o FY(])g(])p Gd(,)28 b(hence)450
2003 y(equal.)2721 b FZ(2)575 2186 y Gd(The)25 b(pr)o(oof)g(of)g(this)h
(lemma)g(r)o(elies)f(heavily)g(on)h(the)g(str)o(ong)g(normalization)f
(of)h(F)3222 2198 y Gc(<)-11 b(:)3277 2186 y Gd(.)39
b(An)450 2286 y(analogous)25 b(pr)o(operty)e(also)h(holds)g(in)h(the)f
(absence)f(of)h(str)o(ong)g(normalization)h(\(e.g.,)e(in)i(the)450
2385 y(pr)o(esence)d(of)g(the)h(\002xed-point)g(operator\).)31
b(Her)o(e,)22 b(one)h(must)g(show)h(that,)f(if)g(the)g(interpr)o(eta-)
450 2485 y(tion)f(of)e(a)h(term)f(is)h(a)g(number)-6
b(,)20 b(then)h(the)g(term)g(admits)g(a)f(r)o(eduction)g(to)i(this)f
(number)-6 b(.)450 2668 y Ge(23.2.5)18 b(Exercise:)39
b Gd(Give)21 b(this)h(ar)o(gument)e(in)h(detail.)1294
b FZ(2)450 2850 y Ge(23.2.6)18 b(De\002nition:)40 b Gd(T)-7
b(wo)26 b(closed)g(terms)g F4(t)1852 2862 y F1(1)1893
2850 y Gd(,)h F4(t)1985 2862 y F1(2)2051 2850 y Gd(of)f(type)g
F4(S)g Gd(ar)o(e)f Ge(observationally)e(equiva-)450 2980
y(lent)e(at)h(type)g F4(S)h Gd(\(written)g F4(t)1330
2992 y F1(1)1398 2933 y FK(obs)1410 2980 y FY(=)1486
2992 y Gc(S)1548 2980 y F4(t)1592 2992 y F1(2)1655 2980
y Gd(or)-6 b(,)23 b(when)g F4(S)g Gd(is)g(clear)f(fr)o(om)g(context,)i
(just)f F4(t)3056 2992 y F1(1)3123 2933 y FK(obs)3136
2980 y FY(=)44 b F4(t)3286 2992 y F1(2)3327 2980 y Gd(\))22
b(if,)450 3079 y(for)i(every)g(closed)h(term)f F4(c)29
b FF(:)i F4(S)p FV(!)o F4(Nat)o Gd(,)25 b(it)g(holds)g(that)f
F4(c)44 b(t)2325 3091 y F1(1)2390 3079 y Gd(and)24 b
F4(c)43 b(t)2686 3091 y F1(2)2751 3079 y Gd(r)o(educe)23
b(to)i(the)f(same)450 3179 y(number)-6 b(.)2639 b FZ(2)575
3362 y Gd(The)22 b(idea)g(is)h(that)f F4(t)1207 3374
y F1(1)1273 3314 y FK(obs)1286 3362 y FY(=)43 b F4(t)1436
3374 y F1(2)1499 3362 y Gd(means)23 b(that)f F4(t)1970
3374 y F1(1)2033 3362 y Gd(and)g F4(t)2239 3374 y F1(2)2302
3362 y Gd(can)h(be)f(r)o(eplaced)e(by)j(one)g(another)450
3461 y(in)e(an)g(arbitrary)e(pr)o(ogram,)h(since)h(the)g(visible)g
(output)g(of)g(a)f(pr)o(ogram)g(must)i(be)e(a)g(number)-6
b(.)450 3644 y Ge(23.2.7)18 b(Remark:)40 b Gd(This)33
b(rather)d(simple)i(de\002nition)h(of)f(observational)f(equivalence)h
(r)o(elies)450 3744 y(on)20 b(the)g(fact)e(that)i(ther)o(e)e(is)i(a)f
(distinguished)h(atomic)g(type)f(in)h(which)h(to)e(make)h(observations)
450 3843 y(and)g(on)h(the)f(fact)f(that)h(open)h(terms)f(can)g(be)g(tr)
o(eated)f(as)h(closed)g(terms)g(using)h(functional)g(ab-)450
3943 y(straction)g(\(so)g(that)g(we)f(can)h(r)o(egar)o(d)d(every)i
(term)h(containing)h F4(t)e Gd(as)g(a)h(subphrase)f(is)h(equal)g(to)450
4042 y(an)g(term)f(of)h(the)g(form)g F4(c)43 b(t)p Gd(,)20
b(wher)o(e)g F4(t)h Gd(does)f(not)i(occur)f(in)g F4(c)o
Gd(\).)26 b(In)21 b(mor)o(e)f(complex)h(languages)450
4142 y(wher)o(e)h(other)h(binders)g(ar)o(e)e(available,)h(it)h(may)f
(be)h(necessary)f(to)h(extend)f(the)h(notion)h(of)f(ob-)450
4242 y(servational)f(equivalence)g(to)h(so-called)f Ge(contextual)e
(equivalence)p Gd(,)f(wher)o(e)j(the)g(observing)450
4341 y(context)d(is)f(a)g(term)h(with)g(a)f(hole)h(somewher)o(e)f
(inside)h(it.)25 b(In)18 b(particular)-6 b(,)18 b(such)g(a)g(context)h
(may)450 4441 y(bind)i(fr)o(ee)e(variables)h(in)h(the)g(observed)f
(term.)1462 b FZ(2)450 4624 y Ge(23.2.8)18 b(Theorem)i([Computational)e
(adequacy]:)38 b Gd(Let)c F4(t)2306 4636 y F1(1)2380
4624 y Gd(and)g F4(t)2599 4636 y F1(2)2673 4624 y Gd(be)g(closed)g
(terms)g(of)g(a)450 4752 y(closed)21 b(type)f F4(S)p
Gd(.)26 b(If)20 b FY([)-12 b([)p F4(t)1131 4764 y F1(1)1171
4752 y FY(])g(])q([)g([)p F4(S)p FY(])g(][)g([)q F4(t)1397
4764 y F1(2)1437 4752 y FY(])g(])q Gd(,)20 b(then)h F4(t)1741
4764 y F1(1)1804 4705 y FK(obs)1817 4752 y FY(=)1893
4764 y Gc(S)1951 4752 y F4(t)1995 4764 y F1(2)2035 4752
y Gd(.)1338 b FZ(2)p eop
%%Page: 219 220
219 219 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(219)450
683 y F7(Pr)o(oof:)66 b Gd(Suppose)16 b F4(t)1089 695
y F1(1)1130 683 y Gb(;)e F4(t)1210 695 y F1(2)1274 683
y FF(:)23 b F4(S)16 b Gd(and)f FY([)-12 b([)p F4(t)1642
695 y F1(1)1683 683 y FY(])g(][)g([)q F4(S)o FY(])g(])q([)g([)p
F4(t)1908 695 y F1(2)1948 683 y FY(])g(])q Gd(.)23 b(If)16
b F4(c)23 b FF(:)g F4(S)p FV(!)o F4(Nat)o Gd(,)17 b(then)f
FY([)-12 b([)p F4(c)p FY(])g(])24 b F5(2)f F7(dom)o FY(\([)-12
b([)q F4(S)p FV(!)o F4(Nat)o FY(])g(])q(\))p Gd(.)450
783 y(Thus,)658 949 y FY([)g([)p F4(c)43 b(t)823 961
y F1(1)863 949 y FY(])-12 b(])24 b(=)f F0(f)p FY([)-12
b([)p F4(c)o FY(])g(])q F0(g)p FY(\([)g([)p F4(t)1283
961 y F1(1)1323 949 y FY(])g(])q(\))21 b([)-12 b([)p
F4(Nat)o FY(])g(])21 b F0(f)p FY([)-12 b([)p F4(c)p FY(])g(])p
F0(g)p FY(\([)g([)q F4(t)1907 961 y F1(2)1948 949 y FY(])g(]\))24
b(=)e([)-12 b([)q F4(c)43 b(t)2289 961 y F1(2)2329 949
y FY(])-12 b(])q Gb(:)450 1115 y Gd(Hence,)29 b(by)f(Lemma)f(23.2.4,)g
F4(c)43 b(t)1549 1127 y F1(1)1617 1115 y Gd(and)27 b
F4(c)43 b(t)1916 1127 y F1(2)1984 1115 y Gd(must)29 b(have)e(the)h
(same)f(number)h(as)g(normal)450 1244 y(form,)21 b(and)f
F4(t)875 1256 y F1(1)939 1197 y FK(obs)952 1244 y FY(=)40
b F4(t)1098 1256 y F1(2)1139 1244 y Gd(.)2234 b FZ(2)450
1427 y Gd(The)17 b(computational)g(adequacy)f(theor)o(em)h(shows)h(how)
g(the)f(PER)g(model)h(can)e(be)h(employed)450 1527 y(to)35
b(r)o(eason)f(about)g(observational)h(equivalence.)66
b(For)35 b(example,)i(the)e(two)g(r)o(ecor)o(ds)e F4(p)48
b FY(=)450 1626 y F4({x=0,y=0})27 b Gd(and)k F4(q)42
b FY(=)g F4({x=0,y=1})28 b Gd(ar)o(e)h(observationally)j(equivalent)f
(at)g(type)g F4({)p 3146 1621 5 41 v 4 w(x:Nat)p 3398
1621 V 4 w(})m Gd(.)450 1726 y(T)-8 b(o)21 b(see)g(this,)g(note)g(that)
g FY([)-12 b([)q F4(p)o FY(])g(])q([)g([)p F4({)p 1394
1721 V 4 w(x:Nat)p 1646 1721 V 4 w(})m FY(])g(])q([)g([)p
F4(q)p FY(])g(])p Gd(,)21 b(since)g F0(f)p FY([)-12 b([)p
F4(p)o FY(])g(])q F0(g)p FY(\()p F4(x)o FY(\))24 b(=)e
F0(f)p FY([)-12 b([)q F4(q)o FY(])g(])q F0(g)p FY(\()p
F4(x)o FY(\))p Gd(.)450 1908 y Ge(23.2.9)18 b(Exercise)h
([Recommended]:)554 2090 y Gd(1.)41 b(Show)21 b(that)f(if)h
F4(e)f Gd(and)h F4(f)f Gd(ar)o(e)f(closed,)i(well)g(typed)f(terms,)h
(then)g F4(e)2732 2042 y FK(obs)2745 2090 y FY(=)2820
2102 y Gc(Top)2940 2090 y F4(f)p Gd(.)554 2288 y(2.)41
b(Show)26 b(that)g(whenever)g F5(`)33 b F4(p)g FF(:)g
F4(T)26 b Gd(wher)o(e)f F4(T)33 b FY(=)g F4({)p 2222
2283 V 3 w(l)2284 2300 y F1(1)2324 2288 y F4(:T)2412
2300 y F1(1)2452 2288 y F4(...l)2626 2300 y F1(n)2678
2288 y F4(:T)2765 2300 y F1(n)p 2830 2283 V 2820 2288
a F4(})p Gd(,)27 b(we)f(have)g F4(p)3326 2240 y FK(obs)3339
2288 y FY(=)3415 2300 y Gc(T)658 2387 y F4({l)745 2399
y F1(1)785 2387 y F4(=p.l)960 2399 y F1(1)1000 2387 y
F4(...l)1174 2399 y F1(n)1226 2387 y F4(=p.l)1400 2399
y F1(n)1451 2387 y F4(})p Gd(.)1878 b FZ(2)575 2570 y
Gd(W)-8 b(e)29 b(now)i(investigate)e(observational)h(equivalence)f(at)h
(polymorphic)g(types.)53 b(As)29 b(we)450 2670 y(did)c(with)h(the)g
(subset)g(semantics,)h(we)e(can)g(use)h(the)g(PER)f(semantics)h(to)g
(ar)o(gue)e(that)i(types)450 2769 y(such)21 b(as)f FY([)-12
b([)p F5(8)p F4([X])42 b F5(8)p F4([Y])f(\(\(X)p FV(!)o
F4(Y\))p FV(!)o F4(\(X)p FV(!)o F4(Y\)\))p FV(!)o F4(X)p
FV(!)p F4(Y)o FY(])-12 b(])21 b Gd(ar)o(e)e(empty)i(\(showing)g(that)g
(no)g(\002xed-)450 2869 y(point)k(operator)f(can)h(be)f(de\002ned\).)36
b(Unlike)25 b(the)g(subset)g(model,)g(though,)i(the)e(PER)g(model)450
2968 y(can)f(also)g(be)g(used)g(to)h(constrain)f(the)h(elements)f(of)h
F7(inhabited)e Gd(universal)h(types,)h(validating)450
3068 y(some)c(useful)g(principles)g(of)g(uniformity)-9
b(.)450 3251 y Ge(23.2.10)18 b(Notation:)40 b Gd(T)-8
b(o)17 b(r)o(educe)d(clutter)i(in)h(the)f(following,)j(we)d(will)h
(often)g(abbr)o(eviate)d F0(f)p Gb(t)p F0(g)p FY(\()p
Gb(n)p FY(\))450 3350 y Gd(by)21 b Gb(t)14 b(n)20 b Gd(or)h
Gb(t)p FY(\()p Gb(n)p FY(\))p Gd(.)2433 b FZ(2)450 3533
y Ge(23.2.1)m(1)18 b(Proposition:)40 b Gd(Let)30 b F4(S)g
Gd(be)g(an)h(arbitrary)e(type)h(and)g Gb(U)42 b FY(=)f([)-12
b([)p F5(8)p F4([X<:S]X)p FV(!)m F4(X)o FY(])g(])q Gd(.)54
b(If)31 b Gb(f)41 b F5(2)450 3633 y F7(dom)o FY(\()p
Gb(U)p FY(\))p Gd(,)21 b(then)h Gb(f)g(U)f(\025)p 1090
3646 45 4 v(x:)14 b(x)p Gd(.)2113 b FZ(2)450 3815 y F7(Pr)o(oof:)66
b Gd(W)-8 b(e)22 b(must)g(show)h(that,)e(for)g(every)g(PER)h
Gb(X)j F5(\022)f FY([)-12 b([)p F4(S)p FY(])g(])22 b
Gd(and)f(every)g Gb(x)j F5(2)h F7(dom)o FY(\()p Gb(X)p
FY(\))p Gd(,)d(we)f(have)450 3915 y Gb(f)p FY(\()p Gb(x)p
FY(\))29 b Gb(X)f(x)p Gd(.)34 b(Fr)o(om)24 b Gb(f)k F5(2)h
F7(dom)o FY(\()p Gb(U)p FY(\))p Gd(,)c(we)f(know)h(that,)f(for)f(each)g
(PER)h Gb(Y)29 b F5(\022)f FY([)-12 b([)p F4(S)p FY(])g(])24
b Gd(and)f Gb(x)28 b F5(2)h F7(dom)o FY(\()p Gb(Y)5 b
FY(\))p Gd(,)450 4014 y(we)18 b(have)f Gb(f)p FY(\()p
Gb(x)p FY(\))23 b F5(2)g F7(dom)o FY(\()p Gb(Y)5 b FY(\))p
Gd(.)20 b(Suppose)d(that)h Gb(X)23 b F5(\022)g FY([)-12
b([)p F4(S)p FY(])g(])18 b Gd(and)f Gb(x)23 b F5(2)g
F7(dom)o FY(\()p Gb(X)p FY(\))p Gd(.)j(Choose)18 b Gb(Y)23
b F5(\022)f Gb(X)i F5(\022)e FY([)-12 b([)q F4(S)p FY(])g(])450
4114 y Gd(to)25 b(be)f(the)h(singleton)h F0(f)p FY(\()p
Gb(x;)14 b(x)p FY(\))p F0(g)p Gd(.)35 b(Fr)o(om)25 b
Gb(x)k F5(2)i F7(dom)o FY(\()p Gb(Y)5 b FY(\))19 b Gd(we)25
b(infer)f Gb(f)p FY(\()p Gb(x)p FY(\))30 b F5(2)g F7(dom)o
FY(\()p Gb(Y)5 b FY(\))p Gd(,)21 b(so)k Gb(f)p FY(\()p
Gb(x)p FY(\))30 b(=)g Gb(x)p Gd(.)450 4214 y(Thus,)21
b Gb(f)p FY(\()p Gb(x)p FY(\))i Gb(X)g(x)e Gd(for)f(every)h
Gb(x)h F5(2)i F7(dom)o FY(\()p Gb(X)p FY(\))p Gd(.)1628
b FZ(2)575 4396 y Gd(Notice)26 b(that)f(this)i(excludes)e(the)h
(possibility)h(of)f(\223polymorphically)h(updating\224)e(\002elds)450
4496 y(of)k(r)o(ecor)o(ds)e(in)i(the)g(PER)g(model;)k(for)28
b(example,)i(it)f(follows)h(by)f(a)f(similar)h(ar)o(gument)f(that)450
4596 y(every)h(function)h(of)g(type)g F5(8)p F4([X<{x:Nat}]Na)o(t)p
FV(!)-6 b F4(X)29 b Gd(must)i(discar)o(d)d(its)i F4(Nat)e
Gd(ar)o(gument)h(and)450 4695 y(r)o(eturn)d(its)i F4(X)e
Gd(ar)o(gument)g(unchanged.)45 b(In)27 b(particular)-6
b(,)27 b(such)g(a)f(function)i(cannot)f(have)g(the)450
4795 y(ef)o(fect)c(of)i(r)o(eplacing)f(the)h F4(x)f Gd(\002eld)h(in)g
(its)g(\002rst)h(ar)o(gument)e(by)h(the)g(number)g(given)g(as)f(its)i
(sec-)450 4895 y(ond)i(ar)o(gument.)45 b(Also,)30 b(notice)e(that,)h
(by)e(computational)i(adequacy)-9 b(,)27 b(every)g(closed)h(term)p
eop
%%Page: 220 221
220 220 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(220)450
683 y(of)23 b(this)h(type)f(must)g(be)g(observationally)g(equivalent)g
(to)h(such)f(a)g(constant)h(function.)33 b(Poly-)450
783 y(morphic)26 b(update)e(can)h(be)g(supported)g(by)g(extending)g
(the)h(syntax)f(of)g(F)2799 795 y Gc(<)-11 b(:)2854 783
y Gd(,)26 b(as)f(we)g(shall)g(see)450 882 y(in)k(Chapter)e(30,)i(but)f
(such)h(extensions)g(cannot)g(be)f(interpr)o(eted)f(in)h(the)h(PER)f
(model)h(as)f(it)450 982 y(stands;)36 b(it)31 b(is,)j(however)-6
b(,)33 b(possible)e(to)h(constr)o(uct)g(a)e(mor)o(e)h(r)o(e\002ned)f
(PER)h(model,)j(using)d(a)450 1082 y(dif)o(fer)o(ent)24
b(interpr)o(etation)i(of)g(subtyping,)j(in)e(which)g(polymorphic)g
(update)f(functions)h(do)450 1181 y(exist)21 b([HP95)o(,)f(Pol96,)g
Ge(?)p Gd(].)575 1281 y(Next)28 b(we)h(examine)f(the)h(interpr)o
(etations)f(of)h(impr)o(edicative)e(encodings)j(of)e(algebraic)450
1380 y(datatypes,)d(such)g(as)f(the)i(Chur)o(ch)e(booleans)i(and)e
(Chur)o(ch)h(numerals)g(intr)o(oduced)f(in)h(Sec-)450
1480 y(tion)d(19.4.)450 1663 y Ge(23.2.12)c(Proposition:)40
b Gd(Let)22 b F7(CBool)g Gd(be)g(the)h(PER)f FY([)-12
b([)q F5(8)p F4([X])41 b(X)p FV(!)p F4(X)p FV(!)p F4(X)o
FY(])-12 b(])q Gd(.)30 b(Let)22 b F7(tt)j FY(=)h Gb(\025)p
2962 1676 45 4 v(x:)g(\025)p 3100 1676 V(y:)g(x)c Gd(and)450
1762 y F7(ff)31 b FY(=)g Gb(\025)p 621 1775 V(x:)f(\025)p
763 1775 V(y:)h(y)p Gd(.)39 b(W)-8 b(e)25 b(have)f F7(ff)p
Gb(;)14 b F7(tt)30 b F5(2)i F7(dom)o FY(\()p F7(CBool)p
FY(\))25 b Gd(and,)g(whenever)g Gb(f)31 b F5(2)g F7(dom)o
FY(\()p F7(CBool)p FY(\))p Gd(,)26 b(either)450 1862
y Gb(f)d F7(CBool)g(tt)d Gd(or)h Gb(f)i F7(CBool)g(ff)p
Gd(.)2134 b FZ(2)450 2045 y F7(Pr)o(oof:)66 b Gd(First,)39
b(r)o(ecall)33 b(that)h Gb(f)49 b F5(2)g F7(dom)o FY(\()p
F7(CBool)p FY(\))35 b Gd(means)g(that)f Gb(x)48 b(X)h(x)2683
2014 y FX(0)2741 2045 y Gd(and)34 b Gb(y)49 b(X)g(y)3175
2014 y FX(0)3232 2045 y Gd(imply)450 2144 y Gb(f)34 b(x)f(y)i(X)f(f)g
(x)890 2114 y FX(0)946 2144 y Gb(y)1003 2114 y FX(0)1026
2144 y Gd(,)28 b(for)f(every)f(PER)g Gb(X)h Gd(and)g(numbers)g
Gb(x;)14 b(x)2357 2114 y FX(0)2379 2144 y Gb(;)g(y;)g(y)2559
2114 y FX(0)2582 2144 y Gd(.)43 b(In)27 b(particular)-6
b(,)26 b(if)h Gb(x;)14 b(y)34 b F5(2)450 2244 y F7(dom)o
FY(\()p Gb(X)p FY(\))p Gd(,)21 b(then)h Gb(f)g(x)h(y)h
F5(2)f F7(dom)o FY(\()p Gb(X)p FY(\))p Gd(.)575 2343
y(Now)j(consider)f(the)h(PER)g Gb(X)32 b FY(=)f F0(f)p
FY(\()p Gb(0;)14 b(0)p FY(\))p Gb(;)29 b FY(\()p Gb(1;)14
b(1)p FY(\))p F0(g)p Gd(,)27 b(with)g F7(dom)n FY(\()p
Gb(X)p FY(\))33 b(=)f F0(f)p Gb(0;)14 b(1)p F0(g)p Gd(.)39
b(Since)25 b Gb(f)32 b(0)g(1)h F5(2)450 2443 y F7(dom)o
FY(\()p Gb(X)p FY(\))p Gd(,)23 b(we)f(have)g(either)g
Gb(f)j(0)h(1)g FY(=)g Gb(0)c Gd(or)g Gb(f)k(0)g(1)g FY(=)f
Gb(1)p Gd(.)30 b(Suppose,)22 b(without)i(loss)f(of)f(generality)-9
b(,)450 2543 y(that)25 b Gb(f)32 b(0)g(1)g FY(=)g Gb(0)p
Gd(.)40 b(W)-8 b(e)25 b(claim)g(that,)i(in)f(this)g(case,)f
Gb(f)32 b F7(CBool)f Gb(tt)p Gd(.)39 b(Letting)26 b Gb(x)f
Gd(and)g Gb(y)h Gd(be)f(natural)450 2642 y(numbers,)e(we)g(must)g(show)
g(that)g Gb(f)j(x)g(y)h FY(=)f Gb(x)p Gd(.)31 b(Using)22
b(the)h(same)f(ar)o(gument)h(as)f(befor)o(e,)f(with)450
2742 y Gb(0)h Gd(and)g Gb(1)g Gd(r)o(eplaced)e(by)i Gb(x)g
Gd(and)f Gb(y)p Gd(,)i(we)f(\002nd)g(that)g Gb(f)j(x)g(y)h
F5(2)f F0(f)p Gb(x;)14 b(y)p F0(g)p Gd(.)28 b(So)22 b(if)g
Gb(x)j FY(=)g Gb(y)p Gd(,)d(then)h Gb(f)i(x)g(y)g FY(=)g
Gb(x)450 2842 y Gd(and)20 b(we)h(ar)o(e)e(done.)25 b(Suppose,)20
b(on)h(the)g(other)g(hand,)f(that)g Gb(x)h Gd(and)f Gb(y)g
Gd(ar)o(e)g(dif)o(fer)o(ent.)j(Ther)o(e)c(ar)o(e)450
2941 y(several)h(cases)g(to)h(consider)-6 b(.)575 3124
y F5(\017)41 b Gd(Suppose)31 b Gb(x)g Gd(and)g Gb(y)h
Gd(ar)o(e)e(both)i(dif)o(fer)o(ent)d(fr)o(om)i Gb(0)h
Gd(and)g Gb(1)p Gd(.)58 b(Let)31 b Gb(X)h Gd(be)f(the)g(PER)h(with)658
3223 y(equivalence)20 b(classes)h F0(f)p Gb(x;)14 b(0)p
F0(g)20 b Gd(and)g F0(f)p Gb(y;)14 b(1)p F0(g)p Gd(\227i.e.,)865
3423 y Gb(X)23 b FY(=)g F0(f)p FY(\()p Gb(0;)14 b(0)p
FY(\))p Gb(;)29 b FY(\()p Gb(0;)14 b(x)p FY(\))p Gb(;)28
b FY(\()p Gb(x;)14 b(0)p FY(\))p Gb(;)29 b FY(\()p Gb(x;)14
b(x)p FY(\))p Gb(;)27 b FY(\()p Gb(1;)14 b(1)p FY(\))p
Gb(;)29 b FY(\()p Gb(1;)14 b(y)p FY(\))p Gb(;)29 b FY(\()p
Gb(y;)14 b(1)p FY(\))p Gb(;)29 b FY(\()p Gb(y;)14 b(y)p
FY(\))p F0(g)p Gb(:)658 3622 y Gd(Fr)o(om)23 b Gb(x)k(X)h(0)c
Gd(and)f Gb(y)28 b(X)g(1)p Gd(,)c(we)f(get)g FY(\()p
Gb(f)28 b(x)f(y)p FY(\))i Gb(X)f FY(\()p Gb(f)f(0)i(1)p
FY(\))24 b Gd(so)f FY(\()p Gb(f)28 b(x)g(y)p FY(\))g
Gb(X)g(0)23 b Gd(and)g Gb(f)28 b(x)f(y)h FY(=)g Gb(x)p
Gd(,)658 3722 y(using)21 b(the)g(fact)f(that)h Gb(f)i(x)f(y)f
Gd(is)h(either)e Gb(x)h Gd(or)f Gb(y)p Gd(,)h(hence)g(not)h
Gb(0)p Gd(.)575 3888 y F5(\017)41 b Gd(Suppose)32 b Gb(x)h
Gd(is)g Gb(0)p Gd(.)63 b(Let)33 b Gb(X)g Gd(be)g(the)g(PER)h(with)f
(equivalence)g(classes)g F0(f)p Gb(0)p F0(g)g Gd(and)f
F0(f)p Gb(y;)14 b(1)p F0(g)p Gd(.)658 3987 y(Since)27
b Gb(x)35 b F5(6)p FY(=)h Gb(y)p Gd(,)30 b(these)d(two)i(classes)e(ar)o
(e)g(dif)o(fer)o(ent.)44 b(Reasoning)29 b(as)e(befor)o(e,)h(we)f(have)
658 4087 y FY(\()p Gb(f)c(x)f(y)p FY(\))i Gb(X)f(0)p
Gd(,)e(so)h Gb(f)h(x)f(y)i FY(=)f Gb(0)g FY(=)g Gb(x)p
Gd(.)575 4253 y F5(\017)41 b Gd(Suppose)16 b Gb(x)23
b FY(=)g Gb(1)17 b Gd(and)f Gb(y)24 b FY(=)e Gb(0)p Gd(.)j(Let)16
b Gb(X)h Gd(be)g(the)g(PER)g(with)g(equivalence)g(classes)g
F0(f)p Gb(0;)d(2)p F0(g)i Gd(and)658 4353 y F0(f)p Gb(1)p
F0(g)25 b Gd(and)g(let)h Gb(Y)g Gd(be)f(the)h(PER)g(with)h(equivalence)
e(classes)h F0(f)p Gb(0;)14 b(1)p F0(g)26 b Gd(and)f
F0(f)p Gb(2)p F0(g)p Gd(.)40 b(Fr)o(om)26 b Gb(2)33 b(X)g(0)658
4452 y Gd(and)19 b Gb(1)k(X)h(1)p Gd(,)c(we)g(obtain)g
Gb(f)j(2)g(1)h FY(=)f Gb(2)p Gd(.)i(Fr)o(om)20 b Gb(2)k(Y)e(2)f
Gd(and)e Gb(0)24 b(Y)e(1)p Gd(,)f(we)e(get)h Gb(f)j(2)h(0)f
FY(=)g Gb(f)g(2)g(1)h FY(=)f Gb(2)p Gd(.)658 4552 y(Finally)-9
b(,)24 b(using)h Gb(Z)f Gd(with)h(classes)f F0(f)p Gb(1;)14
b(2)p F0(g)24 b Gd(and)f F0(f)p Gb(0)p F0(g)p Gd(,)h(we)g(get)g
FY(\()p Gb(f)29 b(1)h(0)p FY(\))p Gb(Z)p FY(\()p Gb(f)g(2)f(0)p
FY(\))p Gd(,)c(and)f(hence)658 4651 y Gb(f)e(1)i(0)g
F5(2)f F0(f)p Gb(1;)14 b(2)p F0(g)p Gd(.)25 b(Since)c
Gb(f)i(x)g(y)g F5(2)g F0(f)p Gb(x;)14 b(y)p F0(g)p Gd(,)20
b(we)h(conclude)f(that)h Gb(f)i(1)h(0)f FY(=)g Gb(1)p
Gd(.)450 4834 y(The)e(other)g(cases)f(ar)o(e)f(left)i(as)f(exer)o
(cises.)1644 b FZ(2)p eop
%%Page: 221 222
221 221 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(221)575
683 y(Similar)27 b(in)h(spirit)g(but)g(mor)o(e)f(complex)h(is)g(Fr)o
(eyd's)f(pr)o(oof)h(that)f(every)g(element)h(of)g(the)450
783 y(type)f FY([)-12 b([)q F5(8)p F4([X])41 b(\(X)p
FV(!)p F4(X\))p FV(!)o F4(X)p FV(!)o F4(X)p FY(])-12
b(])28 b Gd(must)g(be)f(r)o(elated)f(to)i(the)g(interpr)o(etation)f(of)
h(a)f(Chur)o(ch)g(nu-)450 882 y(meral)20 b([Fr)o(e89)n(].)575
982 y(The)32 b(above)f(characterisation)h(of)g(Chur)o(ch)g(booleans)g
(would)h(be)f(much)h(easier)e(if)h(we)450 1082 y(wer)o(e)16
b(allowed)g(to)h(use)g(arbitrary)e(r)o(elations,)j(not)f(just)g
(PERs\227if)g(it)g(wer)o(e)f(the)h(case,)f(for)h(exam-)450
1181 y(ple,)k(that)g Gb(f)k F5(2)f F7(dom)o FY(\()p F7(CBool)p
FY(\))e Gd(implied)f FY(\()p Gb(f)k(x)f(y)p FY(\))e Gb(R)f
FY(\()p Gb(f)j(x)2127 1151 y FX(0)2174 1181 y Gb(y)2231
1151 y FX(0)2254 1181 y FY(\))e Gd(whenever)f Gb(x)j(R)g(x)2889
1151 y FX(0)2932 1181 y Gd(and)d Gb(y)k(R)f(y)3300 1151
y FX(0)3344 1181 y Gd(for)450 1281 y(some)d(r)o(elation)e
Gb(R)p Gd(.)25 b(W)-8 b(e)20 b(could)g(then)g(dir)o(ectly)f(use)h(the)g
(r)o(elation)g(de\002ned)f(by)h Gb(0)k(R)e(x)e Gd(and)g
Gb(1)j(R)g(y)450 1380 y Gd(and)k(wouldn't)h(need)f(any)g(case)f
(distinctions.)47 b(A)26 b(model)i(in)f(which)h(such)g(r)o(elation)f
(based)450 1480 y(r)o(easoning)21 b(principles)f(ar)o(e)f(valid)h(for)g
(arbitrary)f(polymorphic)j(types)f(\(not)f(only)i(booleans\))450
1580 y(is)28 b(called)e Ge(parametric)f Gd([Rey83)o(,)i
Ge(?)p Gd(].)44 b(In)28 b(a)e(parametric)g(model,)j(very)e(powerful)g
(principles)450 1679 y(for)19 b(polymorphic)i(encodings)f(of)g
(inductive)f(types)h(and)f(abstract)f(datatypes)g(ar)o(e)g(available)
450 1779 y(\(cf.)g([P)-8 b(A93)o(]\).)24 b(However)-6
b(,)19 b(it)g(is)g(an)g(open)g(pr)o(oblem)g(whether)g(the)g(PER)g
(model)g(is)h(parametric,)450 1879 y(and)g(the)h(only)h(known)g
(parametric)d(models)j(ar)o(e)d(rather)h(syntactic)h(in)g(\003avor)-6
b(.)575 1978 y(However)g(,)21 b(some)h(simple)g(instances)g(of)f
(parametric)g(r)o(easoning)g(do)h(go)g(thr)o(ough)g(in)g(the)450
2078 y(PER)f(model.)450 2224 y Ge(23.2.13)d(Proposition:)40
b Gd(Let)15 b Gb(f)23 b F5(2)h FY([)-12 b([)p F5(8)p
F4([X]X)p FV(!)m F4(S)p FY(])g(])q Gd(,)16 b(wher)o(e)f
F4(X)h Gd(is)g(not)g(fr)o(ee)e(in)j F4(S)o Gd(.)24 b(Then)16
b Gb(f)g Gd(is)g(constant\227)450 2323 y(that)21 b(is,)g(for)f(each)g
(PER)h Gb(X)g Gd(and)g(element)g Gb(x)h F5(2)i F7(dom)o
FY(\()p Gb(X)p FY(\))p Gd(,)d(we)g(have)f FY(\()p Gb(f)j(x)p
FY(\))e([)-12 b([)q F4(S)o FY(])g(])21 b(\()p Gb(f)j(0)p
FY(\))p Gd(.)356 b FZ(2)450 2470 y F7(Pr)o(oof:)66 b
Gd(Using)24 b(the)e(everywher)o(e)g(tr)o(ue)h(r)o(elation)f
FY([)-12 b([)q F4(Top)n FY(])g(])q Gd(.)31 b(\(Let)22
b Gb(x)h Gd(be)f(given.)32 b(Then)23 b Gb(x)j FY([)-12
b([)q F4(Top)o FY(])g(])27 b Gb(0)p Gd(,)450 2569 y(so)21
b FY(\()p Gb(f)i(x)p FY(\))e([)-12 b([)q F4(S)o FY(])g(])21
b(\()p Gb(f)j(0)p FY(\))p Gd(.\))2310 b FZ(2)575 2715
y Gd(The)28 b(above)g(example)f(is)i(a)f(a)g(simple)h(case)f(of)g
Ge(representation)d(independence)p Gd(.)45 b(One)450
2815 y(can)23 b(view)h Gb(f)k F5(2)h FY([)-12 b([)q F5(8)p
F4([X]X)p FV(!)m F4(A)p FY(])g(])24 b Gd(as)f(a)g(piece)g(of)h(code)f
(depending)h(on)g(a)f(module)h(that)g(supplies)450 2915
y(a)d(type)h Gb(X)g Gd(and)g(a)f(constant)i(of)f(that)f(type.)29
b(\(Think)22 b(of)g(the)g(encoding)h(of)f(existential)g(types)g(in)450
3014 y(terms)f(of)f(universal)h(types)g(sketched)f(in)h(Exer)o(cise)f
Ge(??)o Gd(.\))26 b(If)20 b(ther)o(e)g(ar)o(e)f(no)i(other)g(constants)
h(or)450 3114 y(functions)27 b(de\002ned)e(on)h(this)h(type,)f(then)h
(intuitively)f(it)g(should)h(not)f(be)g(possible)g(to)g(make)450
3213 y(any)21 b(use)g(of)f(it.)26 b(The)21 b(PER)g(model)g(validates)f
(this)h(intuition.)575 3313 y(Her)o(e)i(is)h(another)h(r)o(easoning)f
(principle)g(based)f(on)i(the)g(observation)f(that)g(the)h(PER)f(se-)
450 3413 y(mantics)d(uses)g(neither)g(type)g(annotations)h(nor)f(type)f
(applications)h(or)g(abstractions.)450 3559 y Ge(23.2.14)d(Reasoning)h
(Principle)f([Mitchell]:)39 b Gd(Any)26 b(two)h(F)2348
3571 y Gc(<)-11 b(:)2429 3559 y Gd(terms)26 b(of)h(the)f(same)g(type)g
(and)450 3658 y(with)c(equal)e(erasur)o(es)g(ar)o(e)f(observationally)i
(equal.)575 3758 y(For)g(example,)e(if)699 3897 y F4(f)k
FF(:)g F5(8)p F4([X])42 b(\(X)p FV(!)o F4(X\))g FV(!)i
F4(\(Nat)p FV(!)n F4(X\))f FV(!)h F4(X)699 3996 y(V)23
b FF(<)-17 b(:)24 b F4(Top)699 4096 y(U)f FF(<)-17 b(:)24
b F4(V)699 4196 y(g)f FF(:)g F4(V)p FV(!)p F4(U)699 4295
y(h)g FF(:)g F4(Nat)p FV(!)o F4(U)o Gb(;)450 4431 y Gd(then)658
4568 y F4(f)43 b(U)g(\(fun[u:U]g\(u\)\)\(h)o(\))1596
4521 y FK(obs)1609 4568 y FY(=)1684 4580 y Gc(V)1743
4568 y F4(f)g(V)g(\(fun[v:V]g\(v\)\)\(h)o(\))-6 b Gb(:)3394
4705 y FZ(2)450 4851 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355
b FZ(2)p eop
%%Page: 222 223
222 222 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(222)450
683 y F8(Digression)26 b(on)f(full)g(abstraction)450
841 y Gd(One)f(may)h(ask)e(whether)i(the)f(r)o(easoning)g(method)h
(arising)f(fr)o(om)g(Theor)o(em)g(23.2.8)d(is)k(com-)450
971 y(plete,)c(i.e.,)f(whether)i F4(t)1190 983 y F1(1)1255
923 y FK(obs)1268 971 y FY(=)41 b F4(t)1415 983 y F1(2)1477
971 y Gd(implies)22 b FY([)-12 b([)p Gb(s)p FY(])g(])q
Gd(=)p FY([)g([)p Gb(t)p FY(])g(])q Gd(.)26 b(Semantic)21
b(models)h(for)f(which)h(this)g(is)g(the)450 1070 y(case)i(ar)o(e)g
(called)g Ge(fully)g(abstract)p Gd(.)36 b(It)24 b(is)i(an)e(open)h(pr)o
(oblem)g(\(as)f(far)g(as)g(we)h(know\))h(whether)450
1170 y(the)21 b(PER)g(model)g(is)g(fully)g(abstract,)f(but)g(it)h
(seems)g(unlikely)h(for)f(the)f(following)j(r)o(eason.)575
1269 y(W)-8 b(e)21 b(might)h(attempt)f(to)h(pr)o(ove)e(full)i
(abstraction)e(by)i(induction)g(on)g(the)f(type)h F4(S)e
Gd(of)i F4(s)e Gd(and)450 1369 y F4(t)p Gd(.)k(If)17
b F4(S)23 b FY(=)g F4(Nat)o Gd(,)18 b(then)g(it)g(clearly)f(holds;)i
(but)f(for)f(the)h(function)g(space)f F4(S)p FV(!)p F4(T)g
Gd(we)h(encounter)g(the)450 1499 y(following)j(pr)o(oblem.)k(Suppose)19
b F5(`)k F4(f)o Gb(;)14 b F4(g)23 b FF(:)g F4(S)p FV(!)p
F4(T)c Gd(and)g F4(f)2224 1451 y FK(obs)2237 1499 y FY(=)40
b F4(g)p Gd(.)25 b(T)-8 b(o)20 b(pr)o(ove)f FY([)-12
b([)p F4(f)p FY(])g(])23 b(=)g([)-12 b([)p F4(g)p FY(])g(])q
Gd(,)19 b(we)g(have)450 1598 y(to)27 b(show)g(that)g
FY([)-12 b([)p F4(f)p FY(])g(]\()p Gb(v)p FY(\))35 b([)-12
b([)p F4(T)p FY(])g(])34 b([)-12 b([)p F4(g)p FY(])g(]\()p
Gb(v)p FY(\))28 b Gd(for)e(all)g Gb(v)34 b F5(2)g F7(dom)o
FY(\([)-12 b([)q F4(S)o FY(])g(])q(\))p Gd(.)43 b(Using)27
b(full)f(abstraction)g(induc-)450 1698 y(tively)c(on)h
F4(T)o Gd(,)g(we)f(get)g FY([)-12 b([)p F4(f)p FY(])g(]\()p
Gb(v)p FY(\))26 b([)-12 b([)q F4(T)o FY(])g(])26 b([)-12
b([)q F4(g)o FY(])g(])q(\()p Gb(v)p FY(\))22 b Gd(for)g(all)g
F7(de\002nable)g Gb(v)p Gd(,)h(i.e.,)e(those)h(of)g(the)h(form)f
FY([)-12 b([)p F4(t)p FY(])g(])22 b Gd(for)450 1798 y(some)k
F5(`)32 b F4(t)g FF(:)g F4(S)p Gd(.)40 b(But)26 b(even)f
F7(dom)o FY(\([)-12 b([)q F4(Nat)p FV(!)o F4(Nat)n FY(])g(])q(\))26
b Gd(contains)g(non-de\002nable)g(elements)g(\(since)450
1897 y(it)j(contains)g(all)g(total)g(computable)f(functions,)k(and)c
(some)h(of)g(these)g(cannot)g(be)f(de\002ned)3417 1867
y FK(4)450 1997 y Gd(in)e(F)594 2009 y Gc(<)-11 b(:)648
1997 y Gd(\).)39 b(It)25 b(could,)i(however)-6 b(,)26
b(be)f(that)g(every)f(non-de\002nable)i(element)f(is)h(observationally)
450 2096 y(equivalent)21 b(to)g(a)f(de\002nable)h(one,)f(in)i(which)f
(case)f(we)h(could)g(salvage)f(this)i(ar)o(gument.)450
2382 y Gj(23.3)119 b(General)28 b(Recursion)i(and)g(Recursive)f(T)-11
b(ypes)450 2571 y Gd(Although)23 b(the)g(PER)f(semantics)h(is)g(based)e
(on)i(arbitrary)e(computable)h(functions,)i(only)f(the)450
2671 y(total)i(ones)h(actually)e(arise)h(as)g(denotations.)39
b(In)25 b(or)o(der)f(to)i(account)f(for)g(general)f(r)o(ecursion)450
2771 y(and)c(r)o(ecursive)g(types,)g(we)h(need)g(a)f(mor)o(e)g(gener)o
(ous)h(notion)h(of)f(model.)450 3013 y F8(Continuous)26
b(Partial)e(Orders)450 3171 y Gd(W)-8 b(e)19 b(have)e(alr)o(eady)g
(seen)h(that)h(the)f(PER)h(model)f(does)h(not)g(account)f(for)g
(general)g(r)o(ecursion\227)450 3271 y(although)i(the)g(elements)g(of)f
(the)h(underlying)g(universe)g(\()p FN(N)s Gd(\))25 b(encode)20
b(partial)e(functions,)j(the)450 3371 y(interpr)o(etations)f(of)g
(types)h(include)f(only)i(elements)e(encoding)h(functions)h(that)e(ar)o
(e)f(total)h(on)450 3470 y(the)31 b(r)o(elevant)f(domain.)57
b(Ther)o(e)30 b(does)i(not)f(seem)h(to)f(be)g(an)g(easy)g(way)g(of)g(r)
o(emoving)g(this)450 3570 y(r)o(estriction:)39 b(if)27
b(we)h(insist)h(on)f(interpr)o(eting)f(types)h(as)f(PERs)h(over)f
FN(N)t Gd(,)35 b(our)28 b(model)g(will)g(ac-)450 3670
y(count)23 b(only)g(for)f(total)h(functions.)31 b(T)-8
b(o)22 b(model)h(r)o(ecursive)e(types)h(\(and)g(accor)o(dingly)-9
b(,)22 b(general)450 3769 y(r)o(ecursion)h(and)h(higher)o(-or)o(der)e
(partial)g(functions\),)j(we)f(must)g(adopt)f(a)g(richer)h(view)f(of)h
(the)450 3869 y(underlying)g(computations.)35 b(The)24
b(r)o(equir)o(ed)e(machinery)i(comes)g(fr)o(om)f(the)g(mathematical)450
3968 y(ar)o(ea)c(of)i Ge(domain)e(theory)p Gd(.)450 4151
y Ge(23.3.1)f(De\002nition:)40 b Gd(A)29 b Ge(domain)g
Gd(is)h(a)g(partial)f(or)o(dering)g FY(\()p Gb(D;)14
b F5(v)p FY(\))30 b Gd(\(that)g(is,)i(a)e(set)g Gb(D)g
Gd(with)g(a)450 4251 y(transitive,)17 b(r)o(e\003exive,)g(and)f
(anti-symmetric)h(or)o(dering)g F5(v)o Gd(\))g(with)h(the)f(following)h
(pr)o(operties:)554 4417 y(1.)41 b(If)17 b Gb(x)775 4429
y F1(0)838 4417 y F5(v)23 b Gb(x)970 4429 y F1(1)1033
4417 y F5(v)g Gb(x)1165 4429 y F1(2)1228 4417 y F5(v)g
Gb(:::)18 b Gd(is)g(an)g(incr)o(easing)f(chain)h(in)h
Gb(D)e Gd(then)i(ther)o(e)e(exists)h(a)f(least)h(upper)658
4516 y(bound)925 4454 y FU(F)994 4541 y F1(i)1039 4516
y Gb(x)1083 4528 y F1(i)1148 4516 y F5(2)35 b Gb(D)p
Gd(.)44 b(That)26 b(is,)j Gb(x)1719 4528 y F1(i)1784
4516 y F5(v)1883 4454 y FU(F)1952 4541 y F1(i)1998 4516
y Gb(x)2042 4528 y F1(i)2099 4516 y Gd(for)e(all)g Gb(i)f
Gd(and,)i(if)f Gb(x)2718 4528 y F1(i)2783 4516 y F5(v)34
b Gb(y)27 b Gd(for)g(all)g Gb(i)p Gd(,)h(then)658 4554
y FU(F)727 4641 y F1(i)772 4616 y Gb(x)816 4628 y F1(i)870
4616 y F5(v)23 b Gb(y)p Gd(.)p 450 4669 1200 4 v 540
4725 a FJ(4)570 4749 y F6(This)g(can)h(be)f(seen)g(fr)o(om)h(a)f
(simple)h(diagonalization)h(ar)o(gument.)40 b(Suppose)23
b(that)g Ft(\()p FG(f)2831 4757 y FL(x)2870 4749 y Ft(\))2897
4760 y FL(x)p Fm(2)p Fl(N)3037 4749 y F6(is)h(an)g(ef)o(fective)450
4828 y(enumeration)15 b(of)h(all)g(closed)g(F)1241 4838
y Gc(<)-11 b(:)1311 4828 y F6(terms)15 b(of)h(type)e
FH(Nat)p Fo(!)q FH(Nat)q F6(.)19 b(Then)c FG(\025)p 2197
4840 39 3 v(x:)k(f)2343 4836 y FL(x)2382 4828 y Ft(\()p
FG(x)p Ft(\))11 b(+)g FG(1)k F6(is)h(a)g(computable)f(function)h(that)
450 4907 y(is)h(not)f(de\002nable)g(in)h(F)1028 4917
y Gc(<)-11 b(:)1082 4907 y F6(.)p eop
%%Page: 223 224
223 223 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(223)554
683 y(2.)41 b Gb(D)20 b Gd(has)h(a)f(least)h(element)f(\(written)h
F5(?)g Gd(or)g F5(?)2023 695 y F1(D)2105 683 y Gd(and)f(pr)o(onounced)h
(\223bottom\224\).)265 b FZ(2)450 854 y Ge(23.3.2)18
b(Exercise)h([Easy]:)40 b Gd(Show)20 b(that)g(the)g(least)f(upper)g
(bound)h(of)g(each)f(chain)h(in)g(a)g(domain)450 954
y Gb(D)e Gd(is)i(uniquely)f(determined,)g(in)g(the)g(sense)g(that,)f
(if)h Gb(x)2170 966 y F1(i)2224 954 y F5(v)k Gb(z)18
b Gd(for)h(all)f Gb(i)h Gd(and,)f(whenever)h Gb(x)3259
966 y F1(i)3313 954 y F5(v)k Gb(y)450 1053 y Gd(for)e(all)f
Gb(i)p Gd(,)h(we)f(have)h Gb(z)i F5(v)f Gb(y)p Gd(,)f(then)g
Gb(z)i FY(=)1658 991 y FU(F)1728 1078 y F1(i)1773 1053
y Gb(x)1817 1065 y F1(i)1848 1053 y Gd(.)1525 b FZ(2)575
1224 y Gd(The)30 b(str)o(uctur)o(es)g(we)g(call)g(domains)h(ar)o(e)e
(often)h(called)g(\223omega-complete)f(partial)h(or)o(-)450
1324 y(ders)18 b(\(with)h(bottom\),\224)f(r)o(eserving)g(the)h(wor)o(d)
f(\223domain\224)f(for)i(str)o(uctur)o(es)f(satisfying)h(further)450
1423 y(pr)o(operties)h(such)h(as)g(\223algebraicity\224)e(or)h
(\223continuity)-9 b(.\224)575 1523 y(Let)22 b Gb(D)h
Gd(and)f Gb(E)h Gd(be)g(domains.)32 b(W)-8 b(e)23 b(de\002ne)f(the)h
(space)g FY([)p Gb(D)p FV(!)o Gb(E)p FY(])g Gd(of)g Ge(continuous)e
(functions)450 1623 y Gd(fr)o(om)k Gb(D)g Gd(to)h Gb(E)f
Gd(as)g(the)h(set)f(of)g(monotone)i(functions)g Gb(f)k
F5(2)h Gb(D)f FV(!)h Gb(E)25 b Gd(that)g(pr)o(eserve)f(supr)o(ema,)450
1722 y(i.e.,)575 1879 y F5(\017)41 b Gb(x)22 b F5(v)h
Gb(y)e Gd(implies)g Gb(f)p FY(\()p Gb(x)p FY(\))j F5(v)e
Gb(f)p FY(\()p Gb(y)p FY(\))p Gd(,)f(and)575 2040 y F5(\017)41
b Gb(f)p FY(\()725 1978 y FU(F)794 2065 y F1(i)839 2040
y Gb(x)883 2052 y F1(i)914 2040 y FY(\))23 b(=)1055 1978
y FU(F)1124 2065 y F1(i)1170 2040 y Gb(f)p FY(\()p Gb(x)1281
2052 y F1(i)1312 2040 y FY(\))e Gd(for)f(every)g(incr)o(easing)h(chain)
g FY(\()p Gb(x)2410 2052 y F1(i)2441 2040 y FY(\))2473
2052 y F1(i)p FX(2)p Fn(N)2591 2040 y Gd(.)450 2197 y
Gb(D)32 b FV(!)g Gb(E)26 b Gd(can)g(be)f(viewed)h(as)f(a)h(domain)g
(itself)f(by)h(or)o(dering)g(its)g(elements)g(pointwise,)i(i.e.,)450
2297 y Gb(f)33 b F5(v)f Gb(g)27 b Gd(if)o(f)e Gb(f)p
FY(\()p Gb(x)p FY(\))33 b F5(v)f Gb(g)p FY(\()p Gb(x)p
FY(\))27 b Gd(for)f(all)g Gb(x)32 b F5(2)i Gb(D)p Gd(.)41
b(The)26 b(bottom)h(element)f(and)g(least)g(upper)f(bounds)450
2396 y(in)e(this)g(domain)g(ar)o(e)e(also)h(calculated)f(pointwise.)32
b(Note)22 b(that)g(we)h(do)f(not)h(r)o(equir)o(e)f(that)g(the)450
2496 y(elements)f(of)g FY([)p Gb(D)p FV(!)p Gb(E)p FY(])g
Gd(should)g(be)g(strict)g(\(i.e.,)e(map)i F5(?)2171 2508
y F1(D)2253 2496 y Gd(to)g F5(?)2411 2508 y F1(E)2458
2496 y Gd(\).)450 2667 y Ge(23.3.3)d(Proposition:)40
b Gd(Every)22 b(continuous)h(function)g Gb(f)i F5(2)g
FY([)p Gb(D)p FV(!)p Gb(D)p FY(])c Gd(has)h(a)g(\002xed)f(point)i
(given)450 2767 y(as)d(the)h(least)g(upper)f(bound)h(of)g(the)g(chain)g
F5(?)h(v)h Gb(f)p FY(\()p F5(?)p FY(\))g F5(v)g Gb(f)p
FY(\()p Gb(f)p FY(\()p F5(?)p FY(\)\))g F5(v)g Gb(:)14
b(:)g(:)647 b FZ(2)450 2938 y F7(Pr)o(oof:)66 b Gd(Exer)o(cise.)2355
b FZ(2)450 3109 y Ge(23.3.4)18 b(De\002nition:)40 b Gd(Let)19
b Gb(L)g Gd(denote)h(the)f(set)h(of)f(natural)g(numbers)h(consider)o
(ed)f(as)g(r)o(ecor)o(d)f(la-)450 3208 y(bels.)26 b(\(For)21
b(technical)g(convenience,)g(we)h(continue)f(using)h(numbers)g(as)e
(labels.\))26 b(W)-8 b(e)21 b(de\002ne)450 3308 y F7(Rcd)p
FY(\()p Gb(D)p FY(\))h Gd(as)f(the)h(set)g(of)g(functions)g
Gb(f)j F5(2)g Gb(L)h FV(!)f Gb(D)p Gd(,)c(or)o(der)o(ed)f(pointwise,)j
(plus)f(a)f(distinguished)450 3407 y(least)f(element)h
F5(?)1016 3440 y F7(Rcd)p F2(\()p F1(D)p F2(\))1285 3407
y Gd(\(usually)g(written)g(just)g F5(?)p Gd(\).)k(Again,)20
b(this)i(forms)f(a)f(domain.)575 3525 y(W)-8 b(e)28 b(will)h(use)f
F7(Rcd)p FY(\()p Gb(D)p FY(\))g Gd(to)h(interpr)o(et)e(r)o(ecor)o(d)g
(types.)48 b(The)28 b(addition)g(of)h(the)f F5(?)g Gd(element)450
3624 y(allows)33 b(us)g(to)g(distinguish)h(a)e(nonterminating)i
(computation)g(of)e(r)o(ecor)o(d)f(type)i(\(such)f(as)450
3724 y F4(fix)42 b({)p 654 3719 5 41 v 686 3719 V 8 w(})h(fun[r:{)p
1054 3719 V 1086 3719 V 5 w(}])g(r)p Gd(\))32 b(fr)o(om)g(a)h(r)o(ecor)
o(d)e(containing)j(an)e(unde\002ned)h(\(nonterminating\))450
3824 y(\002eld)28 b(\(such)g(as)g F4({l=omega})l Gd(\).)47
b(This)28 b(r)o(e\003ects)g(the)g(fact)f(that)h(the)g(call-by-name)f
(evaluation)450 3923 y(r)o(elation)h(does)h(not)g(evaluate)e(within)j
(the)e(\002elds)h(of)f(a)g(r)o(ecor)o(d,)h(but)f(waits)h(until)g(a)f
(\002eld)h(is)450 4023 y(pr)o(ojected)20 b(to)h(evaluate)f(it)h
(further)-6 b(.)1812 b FZ(2)450 4194 y Ge(23.3.5)18 b(De\002nition:)40
b Gd(The)32 b Ge(\003at)f(domain)f(of)j(natural)d(numbers)h
FN(N)2615 4206 y FX(?)2710 4194 y Gd(has)h(as)f(elements)i(the)450
4293 y(natural)21 b(numbers)h(plus)g(an)f(extra)g(bottom)h(element)g
F5(?)p Gd(.)27 b(The)22 b(or)o(dering)f(is:)27 b Gb(x)d
F5(v)h Gb(y)c Gd(if)o(f)g Gb(x)j FY(=)g F5(?)450 4393
y Gd(or)d Gb(x)i FY(=)f Gb(y)p Gd(.)2623 b FZ(2)575 4564
y Gd(As)22 b(befor)o(e,)f(types)h(will)h(be)f(interpr)o(eted)e(as)i
(partial)g(equivalence)g(r)o(elations.)29 b(Instead)22
b(of)450 4664 y(the)29 b(natural)f(numbers,)j(though,)g(the)e
(underlying)g(universe)g(of)f(these)h(PERs)g(will)h(be)e(the)450
4763 y(domain)21 b(that)g(forms)g(the)g(least)f(solution)j(of)d(the)h
(following)h(equation:)658 4920 y Gb(D)841 4898 y F0(\030)832
4924 y FY(=)1001 4920 y FN(N)1055 4932 y FX(?)1156 4920
y FY(+)39 b([)p Gb(D)p FV(!)p Gb(D)p FY(])g(+)g F7(Rcd)p
FY(\()p Gb(D)p FY(\))p eop
%%Page: 224 225
224 224 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(224)450
683 y(That)16 b(is,)i(we)e(will)h(use)g(a)e(domain)i
Gb(D)f Gd(that)h(\223contains\224)f(the)g(\003at)h(domain)g(of)f
(natural)g(numbers,)450 783 y(the)i(function)g(space)f
FY([)p Gb(D)p FV(!)p Gb(D)p FY(])p Gd(,)h(and)f(the)h(r)o(ecor)o(d)e
(domain)i F7(Rcd)p FY(\()p Gb(D)p FY(\))p Gd(.)24 b(Rather)18
b(than)g(developing)450 882 y(a)23 b(general)g(theory)h(of)g(such)g
(equations)h(and)e(their)h(solutions,)i(we)d(simply)i(assert)e
(\(without)450 982 y(pr)o(oof\))d(the)h(existence)f(of)h(a)f(suitable)h
(domain)g(and)f(list)i(its)f(r)o(elevant)e(pr)o(operties:)450
1165 y Ge(23.3.6)f(Proposition:)40 b Gd(Ther)o(e)20 b(exists)h(a)f
(domain)h Gb(D)g Gd(with)h(functions)699 1330 y FN(N)148
b F5(2)84 b FY([)p FN(N)1113 1342 y FX(?)1198 1330 y
FV(!)23 b Gb(D)p FY(])483 b FN(N)1933 1300 y Fw(?)2115
1330 y F5(2)84 b FY([)p Gb(D)22 b FV(!)i FN(N)2529 1342
y FX(?)2591 1330 y FY(])699 1430 y F7(fun)83 b F5(2)h
FY([[)p Gb(D)p FV(!)p Gb(D)p FY(])23 b FV(!)g Gb(D)p
FY(])332 b F7(fun)1994 1390 y Fw(?)2115 1430 y F5(2)84
b FY([)p Gb(D)22 b FV(!)i FY([)p Gb(D)p FV(!)o Gb(D)p
FY(]])699 1530 y F7(r)o(cd)91 b F5(2)84 b FY([)p F7(Rcd)p
FY(\()p Gb(D)p FY(\))23 b FV(!)g Gb(D)p FY(])335 b F7(r)o(cd)1985
1489 y Fw(?)2115 1530 y F5(2)84 b FY([)p Gb(D)22 b FV(!)i
F7(Rcd)o FY(\()p Gb(D)p FY(\)])450 1697 y Gd(satisfying)d(the)g
(following)h(equations)g(\(for)e F5(\005)i(2)h F0(f)p
FN(N)t Gb(;)14 b F7(fun)6 b Gb(;)14 b F7(r)o(cd)o F0(g)p
Gd(\))699 1864 y F5(\005)p FY(\()p F5(\005)817 1834 y
Fw(?)853 1864 y FY(\()p Gb(x)p FY(\)\))23 b(=)g Gb(x)699
1964 y F5(\005)p FY(\()p F5(?)p FY(\))f(=)h F5(?)1044
1976 y F1(D)699 2114 y F5(\005)742 2084 y Fw(?)779 2114
y FY(\()p Gb(d)p FY(\))g(=)1002 1997 y FV(\014)1106 2064
y Gb(e)107 b Gd(if)20 b Gb(d)j FY(=)g F5(\005)p FY(\()p
Gb(e)p FY(\))e Gd(for)f(some)h Gb(e)1106 2163 y F5(?)83
b Gd(otherwise)450 2330 y(and)19 b(such)i(that)e(every)g(element)h
Gb(d)k F5(2)f Gb(D)d Gd(can)f(be)g(expr)o(essed)g(as)g
Gb(d)k FY(=)g F5(\005)p FY(\()p Gb(e)p FY(\))c Gd(for)h(some)g
Gb(e)p Gd(,)h(wher)o(e)450 2430 y F5(\005)h Gd(is)h(one)h(of)f
F0(f)p FN(N)s Gb(;)15 b F7(fun)6 b Gb(;)14 b F7(r)o(cd)o
F0(g)p Gd(.)32 b(Furthermor)o(e,)23 b(ther)o(e)g(is)g(an)g(incr)o
(easing)g(sequence)g(of)h(pr)o(ojection)450 2529 y(functions)658
2695 y Gb(\031)709 2707 y F1(r)767 2695 y F5(2)g FY([)p
Gb(D)f FV(!)g Gb(D)p FY(])165 b Gd(for)21 b(all)g Gb(r)i
F5(2)g FN(N)450 2861 y Gd(with)f(the)e(following)j(pr)o(operties:)554
3027 y(1.)41 b Gb(\031)709 3039 y F1(r)744 3027 y FY(\()p
Gb(d)p FY(\))24 b F5(v)f Gb(d)554 3194 y Gd(2.)41 b Gb(\031)709
3206 y F1(r)744 3194 y FY(\()p Gb(\031)827 3206 y F1(s)865
3194 y FY(\()p Gb(d)p FY(\)\))24 b(=)e Gb(\031)1171 3209
y FK(min)p F2(\()p F1(r;s)p F2(\))1420 3194 y FY(\()p
Gb(d)p FY(\))554 3360 y Gd(3.)41 b Gb(\031)709 3372 y
F1(0)749 3360 y FY(\()p Gb(d)p FY(\))23 b(=)g F5(?)554
3526 y Gd(4.)658 3463 y FU(F)727 3551 y F1(r)777 3526
y Gb(\031)828 3538 y F1(r)863 3526 y FY(\()p Gb(d)p FY(\))h(=)f
Gb(d)554 3723 y Gd(5.)41 b Gb(D)727 3735 y F1(r)785 3676
y FK(def)795 3723 y FY(=)33 b F0(f)p Gb(d)21 b F0(j)f
Gb(\031)1078 3735 y F1(r)1114 3723 y FY(\()p Gb(d)p FY(\))k(=)e
Gb(d)p F0(g)f Gd(is)g(a)f(\002nite)i(set)554 3889 y(6.)41
b(the)31 b(pr)o(ojections)g Gb(\031)1288 3901 y F1(r)1355
3889 y Gd(ar)o(e)e(compatible)i(with)g(the)g(str)o(uctur)o(e)g(of)g
Gb(D)f Gd(in)i(the)f(following)658 3989 y(sense:)702
4185 y(\(a\))40 b Gb(\031)891 4197 y F1(r)p F2(+)p F1(1)1014
4185 y FY(\()p FN(N)t FY(\()q Gb(n)p FY(\)\))29 b(=)1367
4068 y FV(\014)1471 4135 y FN(N)t FY(\()p Gb(n)p FY(\))90
b Gd(if)20 b Gb(n)j F5(\024)g Gb(r)1471 4234 y F5(?)198
b Gd(otherwise)697 4368 y(\(b\))41 b Gb(\031)891 4380
y F1(r)p F2(+)p F1(1)1014 4368 y FY(\()p F7(fun)q FY(\()p
Gb(f)p FY(\)\))24 b(=)e F7(fun)q FY(\()p Gb(\025x:)14
b(\031)1727 4380 y F1(r)1762 4368 y FY(\()p Gb(f)p FY(\()p
Gb(\031)1912 4380 y F1(r)1948 4368 y FY(\()p Gb(x)p FY(\)\)\)\))p
Gd(.)707 4501 y(\(c\))40 b Gb(\031)891 4513 y F1(r)p
F2(+)p F1(1)1014 4501 y FY(\()p F7(r)o(cd)o FY(\()p Gb(f)p
FY(\)\))24 b(=)f F7(r)o(cd)o FY(\()p Gb(\025l:)f Gd(if)e
Gb(l)k F5(\024)e Gb(r)f Gd(then)g Gb(\031)2156 4513 y
F1(r)2192 4501 y FY(\()p Gb(f)p FY(\()p Gb(l)p FY(\)\))h
Gd(else)e F5(?)p FY(\))731 b FZ(2)450 4683 y F7(Pr)o(oof:)66
b Gd(See)20 b([Gun92])g(or)h(any)g(other)g(standar)o(d)e(text)h(on)i
(domain)f(theory)-9 b(.)569 b FZ(2)p eop
%%Page: 225 226
225 225 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(225)575
683 y(In)22 b(other)f(wor)o(ds,)h Gb(D)f Gd(has)h FN(N)1453
695 y FX(?)1515 683 y Gd(,)g F7(Rcd)p FY(\()p Gb(D)p
FY(\))p Gd(,)g(and\227in)f(particular)o(\227its)g(own)h(function)h
(space)450 783 y FY([)p Gb(D)p FV(!)p Gb(D)p FY(])32
b Gd(as)g(\223subdomains,\224)j(and)d Gb(D)g Gd(is)g(obtained)g(as)g
(the)h(\223limit\224)f(of)g(an)g(incr)o(easing)g(se-)450
882 y(quence)e(of)g(\002nite)g(subsets\227the)h(ranges)e
Gb(D)1902 894 y F1(r)1968 882 y Gd(of)h(the)g Gb(\031)2267
894 y F1(r)2302 882 y Gd(.)53 b(These)30 b(appr)o(oximating)f(subdo-)
450 982 y(mains)21 b(can)e(be)h(explicitly)g(constr)o(ucted)h(by)f
(taking)g(the)g(clauses)g(under)g(\(6\))e(as)i(an)g(inductive)450
1082 y(de\002nition.)27 b(In)21 b(particular)-6 b(,)699
1249 y Gb(D)768 1261 y F1(0)831 1249 y FY(=)23 b F0(f)p
F5(?)p F0(g)699 1349 y Gb(D)768 1361 y F1(1)831 1349
y FY(=)g F0(f)p F5(?)p Gb(;)k FN(N)t FY(\()p Gb(0)q FY(\))p
Gb(;)34 b F7(r)o(cd)o FY(\()p Gb(\025l:)14 b F5(?)p FY(\))p
F0(g)699 1449 y Gb(D)768 1461 y F1(2)831 1449 y FY(=)23
b F0(f)p F5(?)p Gb(;)k FN(N)t FY(\()p Gb(0)q FY(\))p
Gb(;)34 b FN(N)t FY(\()p Gb(1)q FY(\))p Gb(;)944 1548
y F7(r)o(cd)o FY(\()p Gb(\025l:)14 b F5(?)p FY(\))p Gb(;)28
b F7(r)o(cd)o FY(\()p Gb(0)c F5(7)p FV(!)f FN(N)t FY(\()p
Gb(0)q FY(\))p Gb(;)34 b(l>0)23 b F5(7)p FV(!)g F5(?)p
FY(\))p Gb(;)28 b F7(r)o(cd)o FY(\()p Gb(0)c F5(7)p FV(!)f
FN(N)t FY(\()p Gb(0)q FY(\))p Gb(;)34 b(1)23 b F5(7)p
FV(!)g FN(N)t FY(\()q Gb(0)p FY(\))p Gb(;)34 b(l>1)24
b F5(7)p FV(!)f F5(?)p FY(\))p Gb(;)1027 1648 y F7(r)o(cd)o
FY(\()p Gb(0)h F5(7)p FV(!)f F7(r)o(cd)o FY(\()p Gb(\025l:)14
b F5(?)p FY(\))p Gb(;)28 b(1)c F5(7)p FV(!)f F7(r)o(cd)o
FY(\()p Gb(\025l:)14 b F5(?)p FY(\))p Gb(;)1027 1748
y(l>1)24 b F5(7)p FV(!)f F5(?)p FY(\))p Gb(;)k Gd(and)20
b(5)h(mor)o(e)f(r)o(ecor)o(ds)13 b Gb(:)h(:)g(:)f(;)944
1847 y F7(fun)p FY(\()p Gb(\025x)23 b F5(2)h Gb(D)1351
1859 y F1(1)1391 1847 y Gb(:)14 b FN(N)t FY(\()p Gb(0)p
FY(\))q(\))p Gb(;)34 b F7(fun)p FY(\()p Gb(\025x)23 b
F5(2)h Gb(D)2084 1859 y F1(1)2124 1847 y Gb(:)14 b(x)p
FY(\))p Gb(;)27 b Gd(and)21 b(8)f(mor)o(e)g(functions)15
b Gb(:)f(:)g(:)21 b F0(g)699 1947 y Gd(etc.)450 2126
y Ge(23.3.7)d(Exercise:)554 2292 y Gd(1.)41 b(How)21
b(many)g(elements)g(does)g Gb(D)1701 2304 y F1(3)1762
2292 y Gd(contain?)554 2458 y(2.)41 b(Convince)21 b(yourself)g(that)f
Gb(D)1582 2470 y F1(r)1639 2458 y Gd(can)g(be)h(described)f(as)g
F0(f)p Gb(\031)2445 2470 y F1(r)2480 2458 y FY(\()p Gb(d)p
FY(\))i F0(j)e Gb(d)j F5(2)h Gb(D)p F0(g)p Gd(.)554 2624
y(3.)41 b(Describe)22 b(explicitly)h(the)g(action)h(of)f(the)g(pr)o
(ojection)g Gb(\031)2421 2636 y F1(1)2484 2624 y Gd(viewed)g(as)f(a)h
(function)g(fr)o(om)658 2724 y Gb(D)727 2736 y F1(2)788
2724 y Gd(to)e Gb(D)950 2736 y F1(1)990 2724 y Gd(.)2383
b FZ(2)450 2907 y Ge(23.3.8)18 b(Exercise)h([Recommended]:)554
3073 y Gd(1.)41 b(Call)18 b(a)g(domain)h Gb(D)g Ge(\002nitary)e
Gd(if)i(every)f(incr)o(easing)h(chain)g(in)g Gb(D)g Gd(contains)g(a)f
(\002nite)i(num-)658 3172 y(ber)28 b(of)i(elements.)52
b(Show)29 b(that,)j(if)d Gb(D)g Gd(is)h(\002nitary)-9
b(,)31 b(then)f(the)f(least)g(upper)g(bound)h(of)658
3272 y(every)20 b(incr)o(easing)h(chain)h(in)g Gb(D)f
Gd(is)g(an)h(element)f(of)g(the)h(chain.)27 b(Does)22
b(this)g(implication)658 3371 y(hold)f(in)g(the)g(other)g(dir)o
(ection?)554 3538 y(2.)41 b(Note)33 b(that)g FN(N)1103
3550 y FX(?)1198 3538 y Gd(and)g(each)f Gb(D)1640 3550
y F1(r)1709 3538 y Gd(ar)o(e)g(\(trivially\))h(\002nitary)-9
b(.)62 b(Give)34 b(an)f(example)f(of)h(an)658 3637 y(incr)o(easing)20
b(chain)h(with)h(in\002nitely)g(many)f(distinct)g(elements)g(in)g
FY([)p FN(N)2859 3649 y FX(?)2921 3637 y FV(!)p FN(N)3058
3649 y FX(?)3120 3637 y FY(])p Gd(.)554 3803 y(3.)41
b(Consider)29 b(an)g(incr)o(easing)h(chain)f Gb(x)1819
3815 y F1(0)1898 3803 y F5(v)39 b Gb(x)2046 3815 y F1(1)2125
3803 y F5(v)g Gb(:)14 b(:)g(:)29 b Gd(in)h Gb(D)p Gd(.)51
b(Show)30 b(that)g Gb(\031)3059 3815 y F1(r)3094 3803
y FY(\()3126 3741 y FU(F)3196 3828 y F1(i)3241 3803 y
Gb(x)3285 3815 y F1(i)3316 3803 y FY(\))39 b(=)658 3903
y Gb(\031)709 3915 y F1(r)744 3903 y FY(\()p Gb(x)820
3915 y F1(j)850 3903 y FY(\))21 b Gd(for)f(some)i Gb(j)p
Gd(.)2101 b FZ(2)450 4085 y Ge(23.3.9)18 b(Exercise:)39
b Gd(Give)21 b(an)f(explicit)g(de\002nition)i(of)e(a)g(continuous)i
(function)f F7(succ)i F5(2)g FY([)p Gb(D)p FV(!)p Gb(D)p
FY(])450 4185 y Gd(with)f(the)e(pr)o(operty)g(that)h
F7(succ)p FY(\()p FN(N)t FY(\()q Gb(n)p FY(\)\))29 b(=)23
b FN(N)t FY(\()p Gb(n)i FY(+)18 b Gb(1)p FY(\))p Gd(.)1271
b FZ(2)p eop
%%Page: 226 227
226 226 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(226)450
683 y F8(The)25 b(CUPER)f(Interpretation)450 841 y Gd(As)e(befor)o(e,)g
(we)g(will)h(interpr)o(et)f(types)g(as)g(\223subsets)h(of)f
Gb(D)g Gd(equipped)g(with)h(local)g(notions)h(of)450
941 y(equality\224\227i.e.,)19 b(PERs)i(over)e Gb(D)p
Gd(.)25 b(However)-6 b(,)20 b(in)g(or)o(der)f(to)h(interpr)o(et)f
(general)h(r)o(ecursion)f(and)450 1040 y(r)o(ecursive)h(types,)g(some)i
(additional)e(conditions)i(will)g(be)e(needed.)554 1211
y(1.)41 b(In)32 b(or)o(der)g(to)h(ensur)o(e)f(that)g(the)h
(\002xed-point)g(functional)g(described)e(in)i(Exer)o(cise)e
Ge(??)658 1341 y Gd(\(which)16 b(sends)g Gb(f)g Gd(to)g
F7(\002x)o FY(\()p Gb(f)p FY(\))1499 1293 y FK(def)1509
1341 y FY(=)1605 1278 y FU(F)1674 1366 y F1(i)1720 1341
y Gb(f)1755 1311 y F1(i)1786 1341 y FY(\()p F5(?)p FY(\))p
Gd(\))f(will)i(be)e(an)h(element)g(of)g F7(dom)o FY(\([)-12
b([)p F5(8)p F4([X]\(X)p FV(!)m F4(X\))p FV(!)p F4(X)o
FY(])g(])q(\))p Gd(,)658 1440 y(we)15 b(r)o(equir)o(e)g(that)h(every)g
(PER)g(used)f(to)i(interpr)o(et)e(types)h(contains)h(the)f(pair)f
FY(\()p F5(?)p Gb(;)f F5(?)p FY(\))h Gd(and)658 1540
y(is)25 b(closed)g(under)g(least)g(upper)g(bounds)h(of)f(incr)o(easing)
g(chains.)39 b(\(Informally)-9 b(,)26 b(if)f Gb(R)g Gd(is)658
1640 y(such)e(a)f(PER)i(and)e Gb(f)h Gd(sends)g(R-r)o(elated)e
(elements)j(to)f(R-r)o(elated)e(elements,)j(then)f(fr)o(om)658
1739 y F5(?)f Gb(R)h F5(?)17 b Gd(we)h(see)g(by)g(induction)h(that)f
Gb(f)1841 1709 y F1(i)1873 1739 y F5(?)k Gb(R)h(f)2069
1709 y F1(i)2100 1739 y F5(?)18 b Gd(for)g(every)f Gb(i)p
Gd(.)24 b(Hence)18 b F7(\002x)p FY(\()p Gb(f)p FY(\))23
b F5(2)h F7(dom)o FY(\()p Gb(R)p FY(\))p Gd(.\))658 1839
y(This)d(condition)h(is)f(called)f Ge(completeness)p
Gd(.)554 2000 y(2.)41 b(In)25 b(or)o(der)f(to)h(interpr)o(et)f(r)o
(ecursive)g(types,)i(we)f(must)h(further)e(r)o(equir)o(e)g(that)h(the)g
(PERs)658 2100 y(used)i(to)g(interpr)o(et)g(types)g(be)g(determined)g
(by)h(their)f(r)o(estrictions)h(to)f(the)h(\002nite)g(sets)658
2199 y Gb(D)727 2211 y F1(r)762 2199 y Gd(.)e(This)21
b(condition)h(is)f(called)f Ge(uniformity)p Gd(.)450
2370 y Ge(23.3.10)e(De\002nition:)39 b Gd(A)24 b Ge(complete)f(uniform)
h(PER)g Gd(\(CUPER\))g(is)h(a)f(symmetric,)i(transitive)450
2470 y(r)o(elation)20 b Gb(R)h Gd(on)g Gb(D)g Gd(such)g(that:)554
2626 y(1.)41 b F5(?)22 b Gb(R)h F5(?)p Gd(.)554 2788
y(2.)41 b(If)28 b FY(\()p Gb(x)818 2800 y F1(i)849 2788
y FY(\))881 2800 y F1(i)p FX(2)p Fn(N)1028 2788 y Gd(and)g
FY(\()p Gb(y)1278 2800 y F1(i)1310 2788 y FY(\))1342
2800 y F1(i)p FX(2)p Fn(N)1488 2788 y Gd(ar)o(e)f(two)i(incr)o(easing)g
(chains)f(such)h(that)g Gb(x)2882 2800 y F1(i)2950 2788
y Gb(R)37 b(y)3087 2800 y F1(i)3147 2788 y Gd(for)28
b(all)g Gb(i)p Gd(,)658 2887 y(then)842 2825 y FU(F)911
2912 y F1(i)956 2887 y Gb(x)1000 2899 y F1(i)1054 2887
y Gb(R)1142 2825 y FU(F)1211 2912 y F1(i)1256 2887 y
Gb(y)1305 2899 y F1(i)1357 2887 y Gd(\(completeness\).)554
3048 y(3.)41 b Gb(x)22 b(R)h(y)e Gd(if)o(f)f Gb(\031)1018
3060 y F1(r)1053 3048 y FY(\()p Gb(x)p FY(\))k Gb(R)e(\031)1309
3060 y F1(r)1345 3048 y FY(\()p Gb(y)p FY(\))f Gd(for)g(all)g
Gb(r)f Gd(\(uniformity\).)1146 b FZ(2)450 3219 y Ge(23.3.1)m(1)18
b(Exercise:)39 b Gd(Ther)o(e)23 b(is)h(some)g(r)o(edundancy)e(in)i
(this)h(de\002nition:)32 b(we)24 b(can)f(either)h(dr)o(op)450
3319 y(\(2\))c(or)g(r)o(eplace)f(the)i(\223if)o(f)5 b(\224)19
b(in)i(\(3\))e(by)i(\223implies.\224)k(Show)d(this.)1015
b FZ(2)450 3490 y Ge(23.3.12)18 b(De\002nition:)554 3646
y Gd(1.)41 b(The)20 b(CUPER)h F7(Nat)f Gd(is)h(de\002ned)f(by)h
F0(f)p FY(\()p FN(N)t FY(\()p Gb(n)p FY(\))p Gb(;)14
b FN(N)c FY(\()q Gb(n)p FY(\)\))27 b F0(j)20 b Gb(n)k
F5(2)f FN(N)2518 3658 y FX(?)2580 3646 y F0(g)p Gd(.)554
3808 y(2.)41 b(The)20 b(CUPER)h F7(T)-9 b(op)19 b Gd(is)j(the)e(total)h
(r)o(elation)g Gb(D)d F5(\002)g Gb(D)p Gd(.)554 3969
y(3.)41 b(When)21 b Gb(R)f Gd(and)g Gb(S)h Gd(ar)o(e)f(CUPERs,)g(the)h
(CUPER)g Gb(R)h FV(\))h Gb(S)e Gd(is)g(de\002ned)g(by)658
4068 y F0(f)p FY(\()p F7(fun)p FY(\()p Gb(f)p FY(\))p
Gb(;)14 b F7(fun)p FY(\()p Gb(g)p FY(\)\))22 b F0(j)f
Gd(for)f(all)h Gb(x;)14 b(y)23 b F5(2)g Gb(D)p Gd(,)d(if)h
Gb(x)i(R)f(y)f Gd(then)h Gb(f)p FY(\()p Gb(x)p FY(\))h
Gb(S)g(g)p FY(\()p Gb(y)p FY(\))q F0(g)p Gd(.)554 4230
y(4.)41 b(If)15 b Gb(R)780 4242 y F1(1)836 4230 y Gd(thr)o(ough)h
Gb(R)1199 4242 y F1(n)1266 4230 y Gd(ar)o(e)e(CUPERs)i(and)f
Gb(l)1911 4242 y F1(1)1966 4230 y Gb(:)f(:)g(:)g(l)2107
4242 y F1(n)2174 4230 y Gd(ar)o(e)g(labels,)j(then)f(the)g(CUPER)f
F0(f)p Gb(l)3213 4242 y F1(1)3254 4230 y FY(:)p Gb(R)3323
4242 y F1(1)3377 4230 y Gb(:)f(:)g(:)f(l)3517 4242 y
F1(n)3569 4230 y FY(:)p Gb(R)3638 4242 y F1(n)3689 4230
y F0(g)658 4329 y Gd(is)j(de\002ned)f(by)h F0(f)p FY(\()p
F5(?)p Gb(;)e F5(?)p FY(\))p F0(g)p F5([)p F0(f)p FY(\()p
F7(r)o(cd)n FY(\()p Gb(f)p FY(\))p Gb(;)g F7(r)o(cd)o
FY(\()p Gb(g)p FY(\)\))j F0(j)f Gb(f;)e(g)23 b F5(2)g
Gb(L)p FV(!)p Gb(D)16 b Gd(and)f Gb(f)p FY(\()p Gb(l)2763
4341 y F1(i)2795 4329 y FY(\))23 b Gb(R)2901 4341 y F1(i)2955
4329 y Gb(g)p FY(\()p Gb(l)3064 4341 y F1(i)3097 4329
y FY(\))16 b Gd(for)k Gb(i)j FY(=)g Gb(1)14 b(:)g(:)g(:)g(n)p
F0(g)p Gd(.)554 4491 y(5.)41 b(Let)22 b Gb(I)h Gd(be)f(any)h(set)g(and)
f FY(\()p Gb(R)1492 4503 y F1(i)1523 4491 y FY(\))1555
4503 y F1(i)p FX(2)p F1(I)1684 4491 y Gd(be)h(an)f Gb(I)p
Gd(-indexed)g(family)h(of)g(CUPERs.)31 b(The)23 b(CUPER)658
4528 y FU(T)727 4615 y F1(i)772 4590 y Gb(R)823 4602
y F1(i)878 4590 y Gd(is)i(de\002ned)g(as)f(the)h(intersection)g(of)g
(all)f(the)h Gb(R)2364 4602 y F1(i)2395 4590 y Gd(,)g(i.e.,)g
Gb(x)2681 4528 y FU(T)2750 4615 y F1(i)2795 4590 y Gb(R)2846
4602 y F1(i)2908 4590 y Gb(y)g Gd(if)o(f)e Gb(x)30 b(R)3209
4602 y F1(i)3270 4590 y Gb(y)25 b Gd(for)658 4690 y(all)20
b Gb(i)j F5(2)g Gb(I)p Gd(.)658 4820 y(\(When)g(we)g(use)h(this)g
(de\002nition)g(below)-8 b(,)24 b(the)g(index)f(set)g
Gb(I)g Gd(will)h(always)f(be)g(the)h(set)f(of)658 4920
y(sub-CUPERs)d(of)h(some)g(CUPER.\))p eop
%%Page: 227 228
227 227 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(227)554
683 y(6.)41 b Fk(?)19 b Gd(is)i(the)g(CUPER)g F0(f)p
FY(\()p F5(?)p Gb(;)14 b F5(?)p FY(\))p F0(g)p Gd(.)1800
b FZ(2)450 866 y Ge(23.3.13)18 b(Exercise)g([Recommended]:)38
b Gd(Show)17 b(that)e(all)h(of)g(these)g(constr)o(uctions)i(actually)d
(de-)450 965 y(\002ne)21 b(CUPERs.)2449 b FZ(2)575 1148
y Gd(These)18 b(constr)o(uctions)j(on)e(CUPERs)g(allow)g(us)g(to)g
(de\002ne)g(a)f(semantics)h(that)g(maps)g(types)450 1248
y(of)26 b(F)595 1260 y Gc(<)-11 b(:)676 1248 y Gd(\(without)28
b(r)o(ecursive)d(types\))h(to)h(CUPERs)f(and)g(maps)g(terms)h(to)g
(elements)g(of)f Gb(D)g Gd(ly-)450 1347 y(ing)g(in)h(the)f(domains)g
(of)g(their)f(types,)i(using)g(essentially)f(the)g(same)g(de\002nition)
g(as)g(in)g(Sec-)450 1447 y(tion)i(23.2)e(\(the)h(inter)o(epr)o
(etations)f(of)h(both)h(types)f(and)g(terms)h(ar)o(e)d(with)j(r)o
(espect)f(to)g(an)g(en-)450 1546 y(vir)o(onment,)f(as)e(befor)o(e\).)35
b(In)25 b(this)g(semantics,)g(the)g(type)f F7(dom)o FY(\([)-12
b([)q F5(8)p F4([X])41 b(\(X)p FV(!)p F4(X\))p FV(!)o
F4(X)o FY(])-12 b(])q(\))25 b Gd(is)f(non-)450 1646 y(empty;)c(in)f
(particular)-6 b(,)18 b(it)h(contains)h(the)f(function)h(that)f(sends)g
Gb(f)k F5(2)g FY([)p Gb(D)p FV(!)p Gb(D)p FY(])c Gd(to)g(its)h(least)e
(\002xed)450 1746 y(point.)27 b(Other)21 b(elements)g(of)g(this)h(type)
f(ar)o(e)e(\002nite)j(appr)o(oximations)f(of)g(the)g(\002xed)f(point,)i
(i.e.,)450 1845 y(functionals)f(mapping)g(functions)h
Gb(f)f Gd(to)g Gb(f)1781 1815 y F1(n)1832 1845 y FY(\()p
F5(?)p FY(\))g Gd(for)f(some)i Gb(n)p Gd(.)575 1945 y(It)e(r)o(emains)h
(to)g(show)h(how)f(to)g(interpr)o(et)f(r)o(ecursive)g(types.)450
2188 y F8(Interpreting)k(Recursive)h(T)-9 b(ypes)450
2346 y Ge(23.3.14)18 b(De\002nition:)39 b Gd(Let)24 b
Gb(R)g Gd(be)g(a)g(CUPER)h(and)f Gb(r)29 b F5(2)i FN(N)t
Gd(.)42 b(W)-8 b(e)25 b(write)f Gb(R)p Fj(\026)2748 2358
y F1(r)2808 2346 y Gd(for)g(the)h(r)o(estriction)450
2445 y(of)c Gb(R)f Gd(to)h(the)g(\002nite)g(set)g Gb(D)1246
2457 y F1(r)1282 2445 y Gd(,)g(i.e.,)e Gb(x)k(R)p Fj(\026)1623
2457 y F1(r)1682 2445 y Gb(y)e Gd(if)o(f)e Gb(x)k(R)g(y)e
Gd(and)f Gb(\031)2273 2457 y F1(r)2309 2445 y FY(\()p
Gb(x)p FY(\))j(=)g Gb(x)d Gd(and)h Gb(\031)2803 2457
y F1(r)2838 2445 y FY(\()p Gb(y)p FY(\))j(=)f Gb(y)p
Gd(.)263 b FZ(2)575 2640 y Gd(Notice)22 b(that)g Gb(R)p
Fj(\026)1091 2652 y F1(0)1156 2640 y FY(=)k Fk(?)21 b
Gd(and)g Gb(R)p Fj(\026)1608 2652 y F1(r)1666 2640 y
Gd(is)h(a)g(sub-CUPER)g(of)g Gb(R)f Gd(and)h Gb(R)p Fj(\026)2688
2652 y F1(r)p F2(+)p F1(1)2811 2640 y Gd(,)g(for)g(each)f(CUPER)450
2740 y Gb(R)p Gd(.)34 b(Also)24 b(note)h(that,)f(by)g(the)g(uniformity)
h(condition,)h(two)e(CUPERs)g Gb(R)f Gd(and)h Gb(S)g
Gd(ar)o(e)e(equal)i(if)o(f)450 2840 y Gb(R)p Fj(\026)536
2852 y F1(r)594 2840 y FY(=)f Gb(S)p Fj(\026)761 2852
y F1(r)818 2840 y Gd(for)d(all)h Gb(r)i F5(2)g FN(N)t
Gd(.)450 3022 y Ge(23.3.15)18 b(De\002nition:)39 b Gd(A)27
b(function)i Gb(F)f Gd(mapping)g(CUPERs)g(to)g(CUPERs)g(is)g(called)f
Ge(contrac-)450 3122 y(tive)f Gd(if,)i(for)e(each)g(CUPER)h
Gb(R)f Gd(and)h Gb(r)34 b F5(2)g FN(N)j Gd(we)27 b(have)f
Gb(F)p FY(\()p Gb(R)p FY(\))p Fj(\026)2374 3134 y F1(r)p
F2(+)p F1(1)2532 3122 y FY(=)34 b Gb(F)p FY(\()p Gb(R)p
Fj(\026)2788 3134 y F1(r)2824 3122 y FY(\))p Fj(\026)2891
3134 y F1(r)p F2(+)p F1(1)3014 3122 y Gd(.)43 b Gb(F)28
b Gd(is)f(called)450 3222 y Ge(nonexpansive)18 b Gd(if)i
Gb(F)p FY(\()p Gb(R)p FY(\))p Fj(\026)1260 3234 y F1(r)p
F2(+)p F1(1)1407 3222 y FY(=)j Gb(F)p FY(\()p Gb(R)p
Fj(\026)1652 3234 y F1(r)p F2(+)p F1(1)1775 3222 y FY(\))p
Fj(\026)1842 3234 y F1(r)p F2(+)p F1(1)1965 3222 y Gd(.)1408
b FZ(2)575 3404 y Gd(Note)36 b(that)g(\223)p Gb(F)g Gd(contractive\224)
g(implies)h(\223)p Gb(F)f Gd(non-expansive,\224)j(since)e
Gb(F)p FY(\()p Gb(R)p Fj(\026)3022 3416 y F1(r)p F2(+)p
F1(1)3145 3404 y FY(\))p Fj(\026)3212 3416 y F1(r)p F2(+)p
F1(1)3387 3404 y FY(=)450 3504 y Gb(F)p FY(\()p Gb(R)p
Fj(\026)609 3516 y F1(r)p F2(+)p F1(1)732 3504 y FY(\))p
Fj(\026)799 3516 y F1(r)p F2(+)p F1(2)922 3504 y Fj(\026)957
3516 y F1(r)p F2(+)p F1(1)1103 3504 y FY(=)23 b Gb(F)p
FY(\()p Gb(R)p FY(\))p Fj(\026)1380 3516 y F1(r)p F2(+)p
F1(2)1504 3504 y F0(j)p Fj(\026)1557 3516 y F1(r)p F2(+)p
F1(1)1703 3504 y FY(=)f Gb(F)p FY(\()p Gb(R)p FY(\))p
Fj(\026)1979 3516 y F1(r)p F2(+)p F1(1)2103 3504 y Gd(.)450
3687 y Ge(23.3.16)c(Exercise)g([Recommended]:)38 b Gd(Show)24
b(that)f Gb(F)p FY(\()p Gb(R)p FY(\))28 b(=)f Gb(R)g
FV(\))h FN(N)2648 3699 y FX(?)2733 3687 y Gd(is)c(contractive.)32
b(Give)450 3786 y(an)21 b(example)f(of)g(a)h(nonexpansive)g(function)g
(on)h(CUPERs)e(that)h(is)g(not)h(contractive.)221 b FZ(2)450
3969 y Ge(23.3.17)18 b(De\002nition:)39 b Gd(Let)24 b
Gb(F)h Gd(be)f(a)g(contractive)g(function)h(mapping)f(CUPERs)h(to)f
(CUPERs.)450 4084 y(The)d(CUPER)f Gb(\026)p FY(\()p Gb(F)p
FY(\))i Gd(is)f(de\002ned)g(by)g Gb(x)h(\026)p FY(\()p
Gb(F)p FY(\))j Gb(y)c Gd(if)o(f)e Gb(\031)2048 4096 y
F1(r)2084 4084 y FY(\()p Gb(x)p FY(\))k Gb(F)2256 4053
y F1(r)2293 4084 y FY(\()p Fk(?)o FY(\))g Gb(\031)2524
4096 y F1(r)2560 4084 y FY(\()p Gb(y)p FY(\))f Gd(for)e(all)h
Gb(r)p Gd(.)405 b FZ(2)450 4281 y Ge(23.3.18)18 b(Lemma:)39
b Gb(\026)p FY(\()p Gb(F)p FY(\))p Fj(\026)1254 4293
y F1(r)1314 4281 y FY(=)23 b Gb(F)1441 4251 y F1(r)1478
4281 y FY(\()p Fk(?)o FY(\))p Fj(\026)1670 4293 y F1(r)1706
4281 y Gd(.)1667 b FZ(2)450 4476 y F7(Pr)o(oof:)66 b
Gd(The)23 b(dir)o(ection)g Gb(\026)p FY(\()p Gb(F)p FY(\))p
Fj(\026)1420 4488 y F1(r)1484 4476 y F5(\022)j Gb(F)1616
4446 y F1(r)1653 4476 y FY(\()p Fk(?)o FY(\))p Fj(\026)1845
4488 y F1(r)1904 4476 y Gd(is)d(immediate)g(fr)o(om)f(the)h
(de\002nitions.)34 b(For)23 b(the)450 4576 y(other)e(dir)o(ection,)f
(we)h(\002rst)g(establish)658 4742 y Gb(F)699 4708 y
F1(k)p F2(+)p F1(1)830 4742 y FY(\()p Fk(?)p FY(\))p
Fj(\026)1023 4754 y F1(k)1090 4742 y FY(=)i Gb(F)1217
4708 y F1(k)1261 4742 y FY(\()p Fk(?)p FY(\))p Fj(\026)1454
4754 y F1(k)1581 4742 y Gd(for)d(all)h Gb(k)i F5(2)g
FN(N)1234 b Gd(\(23.1\))p eop
%%Page: 228 229
228 228 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(228)450
683 y(by)27 b(calculating)g(as)f(follows:)39 b Gb(F)1471
653 y F1(k)p F2(+)p F1(1)1603 683 y FY(\()p Fk(?)o FY(\))p
Fj(\026)1795 695 y F1(k)1874 683 y FY(=)34 b Gb(F)2012
653 y F1(k)2057 683 y FY(\()p Gb(F)p FY(\()p Fk(?)p FY(\))p
Fj(\026)2323 695 y F1(0)2363 683 y FY(\))p Fj(\026)2430
695 y F1(k)2509 683 y FY(=)g Gb(F)2647 653 y F1(k)2692
683 y FY(\()p Fk(?)o FY(\))p Fj(\026)2884 695 y F1(k)2928
683 y Gd(.)44 b(The)27 b(penulti-)450 783 y(mate)20 b(step)h(follows)h
(by)f(\223commuting\224)g Fj(\026)1793 795 y F1(k)1858
783 y Gd(with)g Gb(k)g Gd(applications)g(of)g Gb(F)p
Gd(,)g(r)o(educing)f(the)h(index)450 882 y(by)g Gb(1)g
Gd(at)f(each)h(step)f(using)i(contractiveness.)575 997
y(Now)16 b(assume)g(that)f Gb(xF)1309 967 y F1(r)1346
997 y FY(\()p Fk(?)o FY(\))p Fj(\026)1538 1009 y F1(r)1574
997 y Gb(y)p Gd(,)i(hence,)f Gb(x;)e(y)23 b F5(2)h Gb(D)2212
1009 y F1(r)2247 997 y Gd(.)g(Fr)o(om)16 b Gb(F)2545
967 y F1(k)p F2(+)p F1(1)2677 997 y FY(\()p Fk(?)o FY(\))p
Fj(\026)2869 1009 y F1(k)p F2(+)p F1(1)3024 997 y F5(\023)22
b Gb(F)3152 967 y F1(k)p F2(+)p F1(1)3284 997 y FY(\()p
Fk(?)p FY(\))p Fj(\026)3477 1009 y F1(k)3544 997 y FY(=)450
1109 y Gb(F)491 1079 y F1(k)536 1109 y FY(\()p Fk(?)o
FY(\))p Fj(\026)728 1121 y F1(k)797 1109 y Gd(we)j(obtain)g
(inductively)h(that)f Gb(\031)1852 1121 y F1(k)1895 1109
y FY(\()p Gb(x)p FY(\))p Gb(F)2044 1079 y F1(k)2089 1109
y FY(\()p Fk(?)o FY(\))p Fj(\026)2281 1121 y F1(k)2325
1109 y Gb(\031)2376 1121 y F1(k)2420 1109 y FY(\()p Gb(y)p
FY(\))h Gd(for)f(all)g Gb(k)31 b F5(\025)f Gb(r)p Gd(.)38
b(\(Note)25 b(that)450 1209 y Gb(\031)501 1221 y F1(k)545
1209 y FY(\()p Gb(x)p FY(\))e(=)g Gb(\031)813 1221 y
F1(k)857 1209 y FY(\()p Gb(\031)940 1221 y F1(r)976 1209
y FY(\()p Gb(x)p FY(\)\))g(=)g Gb(\031)1276 1221 y F1(r)1312
1209 y FY(\()p Gb(x)p FY(\))g(=)g Gb(x)p Gd(.\))575 1321
y(On)e(the)g(other)g(hand,)f Gb(\031)1340 1333 y F1(r)p
F2(-)p F1(1)1463 1321 y FY(\()p Gb(x)p FY(\))p Gb(F)1612
1291 y F1(r)1649 1321 y FY(\()p Fk(?)o FY(\))p Fj(\026)1841
1333 y F1(r)p F2(-)p F1(1)1964 1321 y Gb(\031)2015 1333
y F1(r)p F2(-)p F1(1)2138 1321 y FY(\()p Gb(y)p FY(\))i
Gd(by)f(uniformity)-9 b(,)21 b(hence)658 1499 y Gb(\031)709
1511 y F1(r)p F2(-)p F1(1)831 1499 y FY(\()p Gb(x)p FY(\))p
Gb(F)980 1465 y F1(r)p F2(-)p F1(1)1105 1499 y FY(\()p
Fk(?)o FY(\))p Fj(\026)1297 1511 y F1(r)p F2(-)p F1(1)1420
1499 y Gb(\031)1471 1511 y F1(r)p F2(-)p F1(1)1594 1499
y FY(\()p Gb(y)p FY(\))450 1675 y Gd(by)27 b(Equation)h(23.1.)42
b(Pr)o(oceeding)26 b(inductively)i(in)f(this)h(way)e(yields)h
Gb(\031)2767 1687 y F1(k)2811 1675 y FY(\()p Gb(x)p FY(\))p
Gb(F)2960 1644 y F1(k)3005 1675 y FY(\()p Fk(?)o FY(\))p
Fj(\026)3197 1687 y F1(k)3241 1675 y Gb(\031)3292 1687
y F1(k)3336 1675 y FY(\()p Gb(y)p FY(\))450 1774 y Gd(for)21
b(all)f Gb(k)j(<)g(r)p Gd(.)2495 b FZ(2)450 1953 y Ge(23.3.19)18
b(Proposition:)40 b Gb(\026)p FY(\()p Gb(F)p FY(\))20
b Gd(is)f(the)g(unique)g(\002xed)f(point)i(of)e Gb(F)p
Gd(,)i(that)e(is,)i Gb(F)p FY(\()p Gb(\026)p FY(\()p
Gb(F)p FY(\)\))25 b(=)e Gb(\026)p FY(\()p Gb(F)p FY(\))d
Gd(and,)450 2053 y(if)h Gb(F)p FY(\()p Gb(R)p FY(\))i(=)g
Gb(R)d Gd(then)i Gb(R)g FY(=)h Gb(\026)p FY(\()p Gb(F)p
FY(\))p Gd(.)2014 b FZ(2)450 2232 y F7(Pr)o(oof:)66 b
Gd(T)-8 b(o)26 b(show)h(that)e Gb(\026)p FY(\()p Gb(F)p
FY(\))i Gd(is)f(a)f(\002xed)g(point)h(of)f Gb(F)p Gd(,)i(it)f(suf)o
(\002ces)f(to)g(show)i(that)e Gb(\026)p FY(\()p Gb(F)p
FY(\))p Fj(\026)3231 2244 y F1(r)p F2(+)p F1(1)3387 2232
y FY(=)450 2332 y Gb(F)p FY(\()p Gb(\026)p FY(\()p Gb(F)p
FY(\)\))p Fj(\026)746 2344 y F1(r)p F2(+)p F1(1)887 2332
y Gd(for)16 b(all)f Gb(r)23 b F5(2)g FN(N)t Gd(.)30 b(Now)-8
b(,)18 b(since)e Gb(F)g Gd(is)g(contractive,)g Gb(F)p
FY(\()p Gb(\026)p FY(\()p Gb(F)p FY(\)\))p Fj(\026)2642
2344 y F1(r)p F2(+)p F1(1)2791 2332 y FY(=)22 b Gb(F)p
FY(\()p Gb(\026)p FY(\()p Gb(F)p FY(\))p Fj(\026)3140
2344 y F1(r)3178 2332 y FY(\))p Fj(\026)3245 2344 y F1(r)p
F2(+)p F1(1)3391 2332 y FY(=)450 2444 y Gb(F)p FY(\()p
Gb(F)564 2413 y F1(r)601 2444 y FY(\()p Fk(?)p FY(\))p
Fj(\026)794 2456 y F1(r)829 2444 y FY(\))p Fj(\026)896
2456 y F1(r)p F2(+)p F1(1)1055 2444 y FY(=)35 b Gb(F)1194
2413 y F1(r)p F2(+)p F1(1)1318 2444 y FY(\()p Fk(?)o
FY(\))p Fj(\026)1510 2456 y F1(r)p F2(+)p F1(1)1669 2444
y FY(=)g Gb(\026)p FY(\()p Gb(F)p FY(\))p Fj(\026)1958
2456 y F1(r)p F2(+)p F1(1)2110 2444 y Gd(\(using)28 b(Lemma)f(23.3.18)d
(in)k(the)g(second)450 2543 y(step)c(and)f(the)h(de\002nition)g(of)g
(contractiveness)g(in)g(the)g(thir)o(d)f(step\).)34 b(On)24
b(the)g(other)g(hand,)g(if)450 2658 y Gb(F)p FY(\()p
Gb(R)p FY(\))g(=)e Gb(R)p Gd(,)c(we)g(can)f(show)i Gb(R)p
Fj(\026)1378 2670 y F1(r)1436 2658 y FY(=)k Gb(mu)p FY(\()p
Gb(F)p FY(\))p Fj(\026)1791 2670 y F1(r)1846 2658 y Gd(by)17
b(induction)i(on)f Gb(r)p Gd(.)25 b(If)17 b Gb(r)23 b
FY(=)g Gb(0)p Gd(,)18 b(both)g(sides)g(ar)o(e)e Fk(?)o
Gd(.)450 2758 y(Otherwise,)29 b(we)e(have)f Gb(R)p Fj(\026)1306
2770 y F1(r)p F2(+)p F1(1)1463 2758 y FY(=)34 b Gb(F)p
FY(\()p Gb(R)p FY(\))p Fj(\026)1751 2770 y F1(r)p F2(+)p
F1(1)1909 2758 y FY(=)g Gb(F)p FY(\()p Gb(R)p Fj(\026)2165
2770 y F1(r)2201 2758 y FY(\))p Fj(\026)2268 2770 y F1(r)p
F2(+)p F1(1)2426 2758 y FY(=)g Gb(F)p FY(\()p Gb(\026)p
FY(\()p Gb(F)p FY(\))p Fj(\026)2787 2770 y F1(r)2825
2758 y Fj(\026)2860 2770 y F1(r)p F2(+)p F1(1)3017 2758
y FY(=)g Gb(\026)p FY(\()p Gb(F)p FY(\))p Fj(\026)3305
2770 y F1(r)p F2(+)p F1(1)3429 2758 y Gd(,)450 2857 y(wher)o(e)20
b(the)h(induction)h(hypothesis)g(is)f(used)g(in)g(the)g(penultimate)g
(step.)618 b FZ(2)450 3036 y Ge(23.3.20)18 b(Proposition:)40
b Gd(All)33 b(functions)h(on)g(CUPERs)f(de\002nable)g(fr)o(om)g(the)g
(operations)h(in)450 3136 y(De\002nition)24 b(23.3.12)19
b(plus)k Gb(\026)f Gd(ar)o(e)f(nonexpansive;)i(they)f(ar)o(e)f
(contractive)h(if)g(their)g(outermost)450 3235 y(operation)f(is)g(r)o
(ecor)o(d)e(formation)i(or)g(function)h(space)e(formation.)809
b FZ(2)450 3415 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19
b(induction)j(\(see)e([AC96)n(]\).)1218 b FZ(2)450 3594
y Ge(23.3.21)18 b(Exercise)g([Possibly)i(dif)o(\002cult]:)38
b Gd(W)-8 b(e)35 b(believe)e(that)h(the)g(only)i(nonexpansive)e(but)450
3693 y(not)23 b(contractive)f(function)i(that)e(can)g(be)h(constr)o
(ucted)g(using)g(these)g(operators)f(is)h(the)f(iden-)450
3793 y(tity)-9 b(.)26 b(Pr)o(ove)20 b(or)h(r)o(efute)e(this)j(claim.)
1836 b FZ(2)575 3972 y Gd(It)27 b(follows)h(that,)g(if)f(a)f(function)i
Gb(F)f Gd(on)h(CUPERs)f(is)g(de\002nable)g(fr)o(om)f(the)h(operations)h
(in)450 4071 y(De\002nition)h(23.3.12)24 b(plus)k Gb(\026)p
Gd(,)h(then)f(the)f(function)i Gb(G)e Gd(mapping)g(each)g(CUPER)g
Gb(R)g Gd(to)h F7(T)-9 b(op)34 b FV(\))450 4171 y Gb(F)p
FY(\()p Gb(R)p FY(\))24 b Gd(is)g(contractive.)34 b(This)24
b(enables)f(us)h(to)g(interpr)o(et)f(r)o(ecursive)f(types)i(by)f
(adding)g(the)h(fol-)450 4271 y(lowing)e(semantic)f(clauses:)699
4436 y FY([)-12 b([)q Gb(\026)p F4(\(X\)T)n FY(])g(])994
4461 y F1(\032)1513 4436 y FY(=)82 b Gb(\026)p FY(\()p
Gb(\025R:)14 b F7(T)-9 b(op)22 b FY(=)p Gb(>)h FY([)-12
b([)p F4(T)p FY(])g(])2279 4461 y F1(\032)p F2(+)p FA(f)p
Gc(X)n FX(7)p FC(!)p Gc(R)q FA(g)2549 4436 y FY(\))699
4545 y([)g([)q F4(fold)41 b(\()p Gb(\026)p F4(\(X\)T\))n
FY(])-12 b(])1299 4570 y F1(\032)1513 4545 y FY(=)82
b F7(fun)q FY(\()p Gb(\025d:)14 b F7(fun)q FY(\()p Gb(\025x:)g(d)p
FY(\)\))699 4650 y([)-12 b([)q F4(unfold)41 b(\()p Gb(\026)p
F4(\(X\)T\))m FY(])-12 b(])1386 4675 y F1(\032)1513 4650
y FY(=)82 b F7(fun)q FY(\()p Gb(\025d:)14 b F7(fun)2054
4610 y Fw(?)2092 4650 y FY(\()p Gb(d)p FY(\)\()p Gb(0)p
FY(\)\))450 4820 y Gd(For)23 b(the)h(last)f(two)g(clauses,)g(we)g(use)g
(the)h(fact)e(that)h FY([)-12 b([)p Gb(\026)p F4(\(X\)T)o
FY(])g(])2394 4845 y F1(\032)2465 4820 y FY(=)27 b F7(T)-9
b(op)27 b FV(\))g FY([)-12 b([)p F0(f)p F4(X)27 b F5(7)p
FV(!)g Gb(\026)p F4(\(X\)T)o F0(g)p F4(T)o FY(])-12 b(])3386
4845 y F1(\032)3429 4820 y Gd(,)450 4920 y(which)22 b(follows)f(fr)o
(om)g(Pr)o(oposition)h(23.3.20)c(and)i(an)h(appr)o(opriate)d
(substitution)23 b(lemma.)p eop
%%Page: 229 230
229 229 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)590
b Gd(2)t(3)t(.)29 b(D)t F6(E)t(N)t(O)t(T)o(A)o(T)t(I)t(O)t(N)t(A)t(L)c
Gd(S)t F6(E)t(M)t(A)t(N)t(T)t(I)t(C)t(S)591 b Gd(229)575
683 y(This)27 b(semantics)g(shows)h(us)g(\(somewhat)f(trivially\))g
(that)f(the)h(r)o(eduction)g(r)o(ules)g(for)g(the)450
783 y(system)d(including)g(r)o(ecursive)e(types)i(do)f(not)h(equate)f
(dif)o(fer)o(ent)e(natural)i(numbers.)33 b(It)24 b(also)450
882 y(shows)j(the)f(soundness)i(of)e(an)f(equational)i(theory)f(for)g
(F)2337 894 y Gc(<)-11 b(:)p F1(\026)2462 882 y Gd(including)27
b(additional)f(equa-)450 982 y(tions)c(like)658 1148
y F4(fold)41 b(\()p Gb(\026)p F4(\(X\)T\))h(\(unfold)f(\()p
Gb(\026)p F4(\(X\)T\))g(t\))i FY(=)h F4(t)f F5(2)h Gb(\026)p
F4(\(X\)T)o Gb(:)575 1314 y Gd(An)20 b(appr)o(opriate)e(de\002nition)j
(of)f(observational)g(equivalence)g(for)g(F)2780 1326
y Gc(<)-11 b(:)p F1(\026)2899 1314 y Gd(must)21 b(deal)e(with)450
1414 y(the)i(possibility)h(of)f(nontermination\227for)h(example,)e(as)g
(follows:)658 1580 y(T)-7 b(wo)29 b(closed)h(terms)h
F4(t)1389 1592 y F1(1)1460 1580 y Gd(and)e F4(t)1674
1592 y F1(2)1744 1580 y Gd(of)h(type)g F4(T)f Gd(ar)o(e)g
(observationally)h(equivalent)658 1679 y(\(at)22 b(type)i
F4(T)p Gd(\))f(if,)h(for)g(all)f(closed)h(terms)g F4(C)k
FF(:)h F4(T)p FV(!)o F4(Nat)o Gd(,)24 b(the)g(terms)g
F4(C)43 b(t)2843 1691 y F1(1)2907 1679 y Gd(and)23 b
F4(C)43 b(t)3202 1691 y F1(2)658 1779 y Gd(either)27
b(both)h(diver)o(ge)e(\(i.e.,)h(admit)h(no)f(normal)h(form\))f(or)h
(can)f(be)g(r)o(educed)e(to)658 1879 y(the)20 b(same)h(number)-6
b(.)450 2045 y(Computational)29 b(adequacy)f(of)g(the)h(CUPER)f
(semantics)h(with)g(r)o(espect)f(to)h(this)g(notion)h(of)450
2144 y(equivalence)24 b(now)i(becomes)f(a)f(nontrivial)h(r)o(esult.)37
b(W)-8 b(e)25 b(must)g(show)h(that,)f(if)g F4(m)f Gd(is)h(a)f(closed)
450 2244 y(term)i(of)g(type)f F4(Nat)o Gd(,)i(then)f
FY([)-12 b([)q F4(m)o FY(])g(])34 b(=)e F5(?)25 b Gd(if)o(f)g
F4(m)h Gd(has)f(no)i(normal)f(form.)41 b(One)26 b(dir)o(ection)g(is)g
(trivial)450 2343 y(\(which?\).)60 b(The)33 b(other)f(r)o(equir)o(es)g
(a)g(\223logical)g(r)o(elations\224)g(pr)o(oof,)i(i.e.,)h(an)d
(induction)h(over)450 2443 y(terms)24 b(using)h(a)f(suitable)g
(generalization)g(of)g(the)g(desir)o(ed)f(pr)o(operty)g(for)h(types)g
(other)h(than)450 2543 y F4(Nat)o Gd(.)43 b(\(W)-8 b(e)26
b(ar)o(e)f(not)i(awar)o(e)e(of)i(such)g(a)f(pr)o(oof)g(in)h(the)g
(literatur)o(e,)f(but)h(ther)o(e)f(seem)g(to)h(be)f(no)450
2642 y(major)21 b(obstacles.\))450 2928 y Gj(23.4)119
b(Further)29 b(Reading)450 3117 y Gd(The)16 b(subset)g(and)f(PER)h
(models)g(of)g(the)g(simply)h(typed)e(lambda-calculus)g(ar)o(e)f(due)h
(to)h(Kr)o(eisel,)450 3217 y(who)22 b(called)f(them)g(HRO)h(\(\223her)o
(editarily)d(r)o(ecursive)h(operations\224\))h(and)g(HEO)g(\(\223her)o
(editar)o(-)450 3316 y(ily)27 b(ef)o(fective)d(operations\224\),)j(r)o
(espectively)-9 b(.)41 b(A)26 b(good)h(r)o(efer)o(ence)d(with)j
(pointers)g(to)g(r)o(elated)450 3416 y(topics)22 b(of)g(historical)g
(inter)o(est)g(is)g(T)-7 b(r)o(oelstra)20 b(and)h(van)h(Dalen's)g(book)
g([TvD88)o(].)28 b(A)22 b(standar)o(d)450 3516 y(r)o(efer)o(ence)c(on)k
(PER)f(models)g(in)g(a)f(computer)h(science)g(context)g(is)g
(Mitchell's)g(book)h([Mit96)n(].)575 3615 y(Our)i(pr)o(esentation)h(of)
f(CUPERs)h(is)g(a)f(simpli\002ed)h(version)g(of)g(the)g(one)g(used)f
(by)h(Abadi)450 3715 y(and)20 b(Car)o(delli)g([AC96)n(].)25
b(Other)c(tr)o(eatments)f(of)h(CUPERs)g(can)f(be)g(found)h(in)g([)p
Ge(?)p Gd(,)f Ge(?)p Gd(])575 3815 y(The)32 b(concept)h(of)f(full)h
(abstraction)f(was)h(intr)o(oduced)f(by)h(Plotkin)h(in)f([Plo77)o(],)i
(which)450 3914 y(is)30 b(still)h(well)g(worth)f(r)o(eading.)53
b(Recent)30 b(pr)o(ogr)o(ess)f(in)i(the)f(constr)o(uction)i(of)e(fully)
g(abstract)450 4014 y(models)21 b(\(albeit)f(not)i(yet)e(for)h(F)1438
4026 y Gc(<)-11 b(:)1493 4014 y Gd(\))20 b(is)h(r)o(eported)f(in)h
([AJM94)m(,)g(HO94)o(,)g(OR94)o(].)575 4114 y(Parametricity)30
b(was)i(\002rst)g(studied)f(by)h(Reynolds)g(in)g(the)g(context)g(of)f
(r)o(epr)o(esentation)450 4213 y(independence)25 b([Rey83)o(].)41
b(Parametric)25 b(models)h(of)g(System)g(F)g(ar)o(e)e(described)h(in)i
([BFSS90)m(,)450 4313 y(RR94].)e(Parametricity)20 b(in)h(System)g(F)
1661 4325 y Gc(<)-11 b(:)1737 4313 y Gd(is)21 b(consider)o(ed)f(in)h
([CMMS94)m(].)575 4412 y(Good)33 b(general)g(textbooks)h(on)g
(semantics)g(include)f([Sch86)n(,)g(Gun92,)g(T)-8 b(en81)o(,)33
b(W)-5 b(in93,)450 4512 y(Mit96)o(].)p eop
%%Page: 230 231
230 230 bop 450 1306 a F3(Chapter)44 b(24)450 1721 y
Gk(T)-19 b(ype)52 b(Equivalence)450 2177 y F7(T)-9 b(o)20
b(be)i(written.)575 2277 y(The)29 b(point)g(of)h(intr)o(oducing)f
(equivalence)h(as)h(a)e(separate)h(notion)g(is)g(that)f(it)g(gives)h(a)
g(uniform)450 2376 y(framework)19 b(for)f(all)h(kinds)g(of)f
(de\002nitional)g(equivalences)i(on)f(types.)24 b(It)17
b(intr)o(oduces)i(a)f(bit)h(of)f(over)o(head)450 2476
y(too,)i(but)h(I)f(think)g(it')-5 b(s)22 b(worth)e(it)g(in)h(this)f
(case.)575 2575 y(This)h(chapter)f(has)h(just)h(been)g(added,)e(and)h
(some)g(of)h(the)f(later)g(chapters)g(have)f(not)h(been)i(br)o(ought)
450 2675 y(up)d(to)h(date)f(\(the)g(equivalence)h(rules)h(used)f(to)f
(be)i(folded)e(into)h(the)f(subtyping)g(r)o(elation\).)450
2823 y Ge(Records)g(with)g(permutation)e(of)j(\002elds)1364
b FV(!)35 b FA(fg)3335 2823 y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 3335 2823 a 16 w FV($)p
409 2905 9 36 v 418 2876 3000 6 v 3418 2876 38 6 v 3455
2905 9 36 v 450 3012 a F7(T)-8 b(ype)20 b(equivalence)p
3177 2936 273 4 v 3177 3037 4 101 v 2191 w F4(S)j FV($)g
F4(T)p 3447 3037 V 3177 3040 273 4 v 1644 3159 a
 gsave currentpoint translate 0 419430 7800 div 2087671 7800 div 747110
-7800 div box .9 setgray fill grestore
 1644
3159 a 1668 3158 a F4(T)f FV($)h F4(T)3108 3159 y Gd(\()r(Q)t(-)t(R)t
F6(E)t(FL)q Gd(\))1634 3401 y
 gsave currentpoint translate 0 851966 7800 div 2244957 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1634 3401 a 1668 3345 a
F4(T)f FV($)h F4(S)p 1668 3381 217 4 v 1668 3454 a(S)f
FV($)h F4(T)3064 3401 y Gd(\()r(Q)t(-)t(S)t F6(Y)t(M)t(M)q
Gd(\))1443 3697 y
 gsave currentpoint translate 0 851966 7800 div 5263240 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1443 3697 a 1477 3641 a F4(S)f FV($)h
F4(U)166 b(U)23 b FV($)g F4(T)p 1477 3678 599 4 v 1668
3751 a(S)f FV($)h F4(T)3036 3697 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))1362 3994 y
 gsave currentpoint translate 0 851966 7800 div 6542312 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1362 3994 a 1396
3938 a F4(S)1439 3950 y F1(1)1503 3938 y FV($)g F4(T)1652
3950 y F1(1)1859 3938 y F4(S)1903 3950 y F1(2)1966 3938
y FV($)g F4(T)2116 3950 y F1(2)p 1396 3975 761 4 v 1460
4048 a F4(S)1504 4060 y F1(1)1544 4048 y FV(!)p F4(S)1671
4060 y F1(2)1734 4048 y FV($)g F4(T)1884 4060 y F1(1)1925
4048 y FV(!)p F4(T)2051 4060 y F1(2)3001 3994 y Gd(\()r(Q)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))1224 4291 y
 gsave currentpoint translate 0 851966 7800 div 8714381 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1224 4291 a 1284
4235 a Gb(\031)e Gd(is)g(a)f(permutation)h(of)g F0(f)p
Gb(1::n)p F0(g)p 1258 4272 1036 4 v 1258 4345 a F4({l)1345
4357 y F1(i)1376 4345 y F4(:T)1464 4357 y F1(i)1505 4315
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1662 4345 y F4(})22
b FV($)h F4({l)1922 4357 y F1(\031i)1996 4345 y F4(:T)2094
4312 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2084 4370 y
F1(\031i)2250 4345 y F4(})2881 4291 y Gd(\()r(Q)t(-)t(R)t
F6(C)t(D)t Gd(-)t(P)t F6(E)t(R)t(M)s Gd(\))450 4524 y
F7(New)21 b(typing)e(rules)p 3067 4442 383 4 v 3067 4549
4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p
3447 4549 V 3067 4552 383 4 v 1388 4726 a
 gsave currentpoint translate 0 851966 7800 div 6130788 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1388 4726 a
1422 4670 a Gb(\000)f F5(`)h F4(t)g FF(:)g F4(S)166 b(S)23
b FV($)g F4(T)p 1422 4707 709 4 v 1613 4779 a Gb(\000)g
F5(`)f F4(t)h FF(:)g F4(T)3201 4726 y Gd(\()r(T)o(-)t(E)t
F6(Q)r Gd(\))p 409 4872 9 36 v 418 4872 3000 6 v 3418
4872 38 6 v 3455 4872 9 36 v 1888 5169 a(230)p eop
%%Page: 231 232
231 231 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)746
b Gd(2)t(4)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(E)t F6(Q)t(U)t(I)t(V)m(A)t(L)
t(E)t(N)t(C)t(E)746 b Gd(231)450 683 y Ge(Algorithmic)19
b(rules)h(for)h(simply)f(typed)f(lambda-calculus)868
b FV(!)34 b F4(B)p 409 765 9 36 v 418 735 3000 6 v 3418
735 38 6 v 3455 765 9 36 v 450 879 a F7(Algorithmic)19
b(typing)p 3055 796 396 4 v 3055 903 4 108 v 1982 w Gb(\000)k
F5(`)3170 859 y Fx(I)3237 879 y F4(t)g FF(:)g F4(T)p
3447 903 V 3055 906 396 4 v 1572 1080 a
 gsave currentpoint translate 0 851966 7800 div 3212640 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1572 1080 a 1637
1024 a F4(x:T)f F5(2)i Gb(\000)p 1606 1061 339 4 v 1606
1134 a(\000)f F5(`)1693 1115 y Fx(I)1761 1134 y F4(x)f
FF(:)i F4(T)3085 1080 y Gd(\()r(T)n(A)t(-)t(V)l F6(A)t(R)q
Gd(\))1318 1377 y
 gsave currentpoint translate 0 851966 7800 div 7222439 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1318 1377 a 1457 1321 a Gb(\000)6 b(;)17
b F4(x:T)1679 1333 y F1(1)1743 1321 y F5(`)1762 1302
y Fx(I)1829 1321 y F4(t)1873 1333 y F1(2)1936 1321 y
FF(:)23 b F4(T)2054 1333 y F1(2)p 1352 1358 847 4 v 1352
1431 a Gb(\000)g F5(`)1439 1411 y Fx(I)1507 1431 y Gb(\025)p
F4(x:T)1683 1443 y F1(1)1723 1431 y F4(.t)1810 1443 y
F1(2)1874 1431 y FF(:)g F4(T)1992 1443 y F1(1)2032 1431
y FV(!)p F4(T)2159 1443 y F1(2)3093 1377 y Gd(\()r(T)n(A)t(-)t(A)t
F6(B)t(S)p Gd(\))658 1674 y
 gsave currentpoint translate 0 851966 7800 div 17653984 7800 div 1179646
-7800 div box .9 setgray fill grestore
 658 1674 a 692 1618 a Gb(\000)g
F5(`)779 1599 y Fx(I)846 1618 y F4(t)890 1630 y F1(1)953
1618 y FF(:)h F4(T)1071 1630 y F1(1)1278 1618 y F4(T)1321
1630 y F1(1)1385 1618 y FY(=)f F4(T)1514 1630 y F1(11)1591
1618 y FV(!)p F4(T)1718 1630 y F1(12)1961 1618 y Gb(\000)g
F5(`)2048 1599 y Fx(I)2115 1618 y F4(t)2159 1630 y F1(2)2222
1618 y FF(:)h F4(T)2340 1630 y F1(2)2547 1618 y F4(T)2590
1630 y F1(2)2654 1618 y FY(=)f F4(T)2783 1630 y F1(11)p
692 1655 2169 4 v 1484 1727 a Gb(\000)g F5(`)1571 1708
y Fx(I)1638 1727 y F4(t)1682 1739 y F1(1)1766 1727 y
F4(t)1810 1739 y F1(2)1873 1727 y FF(:)g F4(T)1991 1739
y F1(12)3088 1674 y Gd(\()r(T)n(A)t(-)t(A)t F6(P)t(P)q
Gd(\))p 409 1820 9 36 v 418 1820 3000 6 v 3418 1820 38
6 v 3455 1820 9 36 v 450 2052 a Ge(Algorithmic)c(rules)h(for)h(records)
g(with)f(permutation)894 b FV(!)35 b FA(fg)3335 2052
y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 3335 2052 a 16 w FV($)p 409 2134 9 36 v 418 2104 3000
6 v 3418 2104 38 6 v 3455 2134 9 36 v 450 2248 a F7(Algorithmic)19
b(type)h(equivalence)p 3091 2165 360 4 v 3091 2272 4
108 v 1692 w F5(`)3138 2228 y Fx(I)3205 2248 y F4(S)j
FV($)g F4(T)p 3447 2272 V 3091 2275 360 4 v 1264 2449
a
 gsave currentpoint translate 0 851966 7800 div 8089698 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1264 2449 a 1298 2393 a F5(`)1317 2374 y Fx(I)1384
2393 y F4(S)1428 2405 y F1(1)1491 2393 y FV($)g F4(T)1641
2405 y F1(1)1870 2393 y F5(`)1889 2374 y Fx(I)1957 2393
y F4(S)2001 2405 y F1(2)2064 2393 y FV($)g F4(T)2214
2405 y F1(2)p 1298 2430 957 4 v 1417 2503 a F5(`)1436
2484 y Fx(I)1503 2503 y F4(S)1547 2515 y F1(1)1587 2503
y FV(!)p F4(S)1714 2515 y F1(2)1778 2503 y FV($)g F4(T)1927
2515 y F1(1)1968 2503 y FV(!)p F4(T)2094 2515 y F1(2)2932
2449 y Gd(\()r(Q)t(A)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(\))1181
2846 y
 gsave currentpoint translate 0 851966 7800 div 9397054 7800 div 1966078
-7800 div box .9 setgray fill grestore
 1181 2846 a 1284 2690 a Gb(\031)e Gd(is)g(a)f(permutation)h(of)g
F0(f)p Gb(1::n)p F0(g)1347 2790 y Gd(for)f(each)g Gb(i)106
b F5(`)1815 2770 y Fx(I)1883 2790 y F4(T)1926 2802 y
F1(i)1981 2790 y FV($)23 b F4(T)2130 2802 y F1(\031i)p
1215 2826 1123 4 v 1215 2899 a F5(`)1234 2880 y Fx(I)1301
2899 y F4({l)1388 2911 y F1(i)1420 2899 y F4(:T)1507
2911 y F1(i)1548 2869 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)1705
2899 y F4(})23 b FV($)g F4({l)1965 2911 y F1(\031i)2040
2899 y F4(:T)2137 2867 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2127
2924 y F1(\031i)2294 2899 y F4(})3058 2846 y Gd(\()r(Q)t(A)t(-)t(R)t
F6(C)t(D)s Gd(\))450 3079 y F7(Algorithmic)19 b(typing)p
3055 2996 396 4 v 3055 3104 4 108 v 1982 w Gb(\000)k
F5(`)3170 3059 y Fx(I)3237 3079 y F4(t)g FF(:)g F4(T)p
3447 3104 V 3055 3107 396 4 v 1572 3280 a
 gsave currentpoint translate 0 851966 7800 div 3212640 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1572 3280 a
1637 3224 a F4(x:T)f F5(2)i Gb(\000)p 1606 3261 339 4
v 1606 3334 a(\000)f F5(`)1693 3315 y Fx(I)1761 3334
y F4(x)f FF(:)i F4(T)3085 3280 y Gd(\()r(T)n(A)t(-)t(V)l
F6(A)t(R)q Gd(\))1318 3577 y
 gsave currentpoint translate 0 851966 7800 div 7222439 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1318 3577 a 1457 3521 a
Gb(\000)6 b(;)17 b F4(x:T)1679 3533 y F1(1)1743 3521
y F5(`)1762 3502 y Fx(I)1829 3521 y F4(t)1873 3533 y
F1(2)1936 3521 y FF(:)23 b F4(T)2054 3533 y F1(2)p 1352
3558 847 4 v 1352 3631 a Gb(\000)g F5(`)1439 3612 y Fx(I)1507
3631 y Gb(\025)p F4(x:T)1683 3643 y F1(1)1723 3631 y
F4(.t)1810 3643 y F1(2)1874 3631 y FF(:)g F4(T)1992 3643
y F1(1)2032 3631 y FV(!)p F4(T)2159 3643 y F1(2)3093
3577 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p Gd(\))589 3878
y
 gsave currentpoint translate 0 851966 7800 div 18745454 7800 div 1208775
-7800 div box .9 setgray fill grestore
 589 3878 a 623 3822 a Gb(\000)f F5(`)709 3803 y Fx(I)777
3822 y F4(t)821 3834 y F1(1)884 3822 y FF(:)h F4(T)1002
3834 y F1(1)1209 3822 y F4(T)1252 3834 y F1(1)1316 3822
y FY(=)g F4(T)1445 3834 y F1(11)1522 3822 y FV(!)p F4(T)1649
3834 y F1(12)1892 3822 y Gb(\000)f F5(`)1978 3803 y Fx(I)2046
3822 y F4(t)2089 3834 y F1(2)2153 3822 y FF(:)h F4(T)2271
3834 y F1(2)2478 3822 y
 gsave currentpoint translate 0 222821 7800 div 3565808 7800 div 579629
-7800 div box .9 setgray fill grestore
 2478 3822 a 15 w F5(`)2512 3803
y Fx(I)2580 3822 y F4(T)2623 3834 y F1(2)2687 3822 y
FV($)g F4(T)2837 3834 y F1(11)p 623 3859 2307 4 v 1484
3931 a Gb(\000)g F5(`)1571 3912 y Fx(I)1638 3931 y F4(t)1682
3943 y F1(1)1766 3931 y F4(t)1810 3943 y F1(2)1873 3931
y FF(:)g F4(T)1991 3943 y F1(12)3088 3878 y Gd(\()r(T)n(A)t(-)t(A)t
F6(P)t(P)q Gd(\))953 4174 y
 gsave currentpoint translate 0 851966 7800 div 12993604 7800 div 1179646
-7800 div box .9 setgray fill grestore
 953 4174 a 1362 4118 a Gd(for)d(each)h
Gb(i)82 b(\000)23 b F5(`)1875 4099 y Fx(I)1943 4118 y
F4(t)1986 4130 y F1(i)2041 4118 y FF(:)g F4(T)2159 4130
y F1(i)p 987 4155 1578 4 v 987 4228 a Gb(\000)g F5(`)1074
4209 y Fx(I)1141 4228 y F4({l)1228 4240 y F1(1)1269 4228
y F4(=t)1356 4240 y F1(1)1397 4228 y F4(...l)1571 4240
y F1(n)1622 4228 y F4(=t)1709 4240 y F1(n)1761 4228 y
F4(})f FF(:)i F4({l)1989 4240 y F1(1)2029 4228 y F4(:T)2117
4240 y F1(1)2157 4228 y F4(...l)2331 4240 y F1(n)2383
4228 y F4(:T)2470 4240 y F1(n)2521 4228 y F4(})3079 4174
y Gd(\()r(T)n(A)t(-)t(R)t F6(C)t(D)r Gd(\))1263 4471
y
 gsave currentpoint translate 0 851966 7800 div 8103122 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1263 4471 a 1297 4415 a Gb(\000)f F5(`)1384 4396 y
Fx(I)1451 4415 y F4(t)g FF(:)g F4({l)1679 4427 y F1(1)1720
4415 y F4(:T)1807 4427 y F1(1)1847 4415 y F4(...l)2022
4427 y F1(n)2073 4415 y F4(:T)2160 4427 y F1(n)2212 4415
y F4(})p 1297 4452 959 4 v 1532 4525 a Gb(\000)f F5(`)1618
4506 y Fx(I)1686 4525 y F4(t.l)1817 4537 y F1(i)1871
4525 y FF(:)h F4(T)1989 4537 y F1(i)3060 4471 y Gd(\()r(T)n(A)t(-)t(P)t
F6(R)t(O)t(J)r Gd(\))p 409 4617 9 36 v 418 4617 3000
6 v 3418 4617 38 6 v 3455 4617 9 36 v eop
%%Page: 232 233
232 232 bop 450 1306 a F3(Chapter)44 b(25)450 1721 y
Gk(De\002nitions)450 2202 y Gj(25.1)119 b(T)-11 b(ype)30
b(De\002nitions)450 2392 y Gd(\(needed)19 b(for)i(equir)o(ec)f
(implementation)i(stuf)o(f\))575 2491 y(intr)o(oduce)29
b(type)g(variables)g(\(this)h(section)h(is)f(optional,)i(so)f(we)e
(need)h(to)g(r)o(e-intr)o(oduce)450 2591 y(them)21 b(when)h(we)e(get)h
(to)g(polymporphism\))575 2690 y(extend)f(type)g(equivalence)h(r)o
(elation)575 2790 y(talk)f(about)h(exposing)g(types)g(befor)o(e)f
(matching)h(against)g(them)575 2890 y(Exer)o(cise:)29
b(inner)24 b(defns)f(\(not)g(trivial:)31 b(must)24 b(eliminate)f(r)o
(emaining)h(occurr)o(ences)e(when)450 2989 y(leaving)f(the)g(scope)f
(of)h(the)g(de\002nition\))450 3155 y Ge(T)-7 b(ype)20
b(de\002nitions)2070 b FV(!)34 b F4(B)3335 3155 y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 3335
3155 a 16 w FV($)p 409 3237 9 36 v 418 3208 3000 6 v
3418 3208 38 6 v 3455 3237 9 36 v 450 3327 a F7(New)21
b(syntactic)e(forms)592 3458 y F4(T)61 b Gd(::=)i(...)1695
b F7(types)852 3557 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3557 a 15 w F4(X)1759 b F7(type)20
b(variable)590 3757 y Gb(\000)62 b Gd(::=)h(...)1695
b F7(contexts)852 3856 y
 gsave currentpoint translate 0 124518 7800 div 2310161 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 3856 a 15 w Gb(\000)6 b(;)17
b F4(X)p FV($)p F4(T)1541 b F7(type)20 b(de\002nition)g(binding)450
4081 y(New)h(type)e(equivalence)j(rules)p 3027 3983 423
4 v 3027 4122 4 140 v 3055 4081 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 3055 4081 a 16 w Gb(\000)h
F5(`)15 b F4(S)23 b FV($)g F4(T)p 3447 4122 4 140 v 3027
4125 423 4 v 1593 4223 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1593 4223 a 15 w Gb(\000)g F5(`)16
b F4(T)22 b FV($)i F4(T)3108 4222 y Gd(\()r(Q)t(-)t(R)t
F6(E)t(FL)q Gd(\))1593 4365 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1593 4365 a 15 w Gb(\000)f
F5(`)16 b F4(T)22 b FV($)i F4(S)p 1593 4409 367 4 v 1593
4492 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1593 4492 a 15 w Gb(\000)f F5(`)16 b F4(S)22 b
FV($)i F4(T)3064 4428 y Gd(\()r(Q)t(-)t(S)t F6(Y)t(M)t(M)q
Gd(\))1326 4635 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1326 4635 a 16 w Gb(\000)f F5(`)16
b F4(S)22 b FV($)h F4(U)1859 4635 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 4635 a 16 w
Gb(\000)g F5(`)15 b F4(U)23 b FV($)g F4(T)p 1326 4678
899 4 v 1593 4761 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1593 4761 a 15 w Gb(\000)g F5(`)16
b F4(S)22 b FV($)i F4(T)3036 4697 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))1888 5169 y(232)p eop
%%Page: 233 234
233 233 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)877
b Gd(2)t(5)t(.)29 b(D)t F6(E)t(FI)t(N)t(I)t(T)t(I)t(O)t(N)t(S)881
b Gd(233)1245 673 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1245 673 a 16 w Gb(\000)23 b F5(`)16
b F4(S)1439 685 y F1(1)1503 673 y FV($)23 b F4(T)1652
685 y F1(1)1859 673 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 673 a 16 w Gb(\000)g F5(`)15
b F4(S)2053 685 y F1(2)2116 673 y FV($)23 b F4(T)2266
685 y F1(2)p 1245 717 1062 4 v 1385 800 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1385 800 a
16 w Gb(\000)g F5(`)15 b F4(S)1579 812 y F1(1)1619 800
y FV(!)p F4(S)1746 812 y F1(2)1809 800 y FV($)24 b F4(T)1959
812 y F1(1)2000 800 y FV(!)p F4(T)2126 812 y F1(2)3001
736 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(\))1563
1019 y
 gsave currentpoint translate 0 851966 7800 div 3363181 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1563 1019 a 1618 963 a F4(X)p FV($)o F4(T)f F5(2)g
Gb(\000)p 1597 1000 358 4 v 1597 1072 a(\000)g F5(`)g
F4(X)f FV($)h F4(T)3139 1019 y Gd(\()r(Q)t(-)t(D)t F6(E)t(F)r
Gd(\))450 1252 y F7(New)e(typing)e(rules)p 3067 1169
383 4 v 3067 1277 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g
FF(:)g F4(T)p 3447 1277 V 3067 1280 383 4 v 1347 1378
a Gb(\000)f F5(`)h F4(t)g FF(:)g F4(S)1839 1378 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1839
1378 a 16 w Gb(\000)f F5(`)16 b F4(S)23 b FV($)g F4(T)p
1347 1421 859 4 v 1613 1500 a Gb(\000)g F5(`)f F4(t)h
FF(:)g F4(T)3201 1440 y Gd(\()r(T)o(-)t(E)t F6(Q)r Gd(\))p
409 1569 9 36 v 418 1569 3000 6 v 3418 1569 38 6 v 3455
1569 9 36 v 450 1801 a Ge(Algorithmic)c(rules)h(for)h(type)f
(de\002nitions)1267 b FV(!)34 b F4(B)3335 1801 y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 3335
1801 a 16 w FV($)p 409 1883 9 36 v 418 1854 3000 6 v
3418 1854 38 6 v 3455 1883 9 36 v 450 2013 a F7(Algorithmic)19
b(r)o(eduction)p 2951 1914 499 4 v 2951 2053 4 139 v
2979 2013 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 2979 2013 a 16 w Gb(\000)39 b F5(`)3098 1993
y Fx(I)3165 2013 y F4(T)23 b Fj(\032)g F4(T)3398 1982
y FX(0)p 3447 2053 4 139 v 2951 2056 499 4 v 1558 2230
a
 gsave currentpoint translate 0 851966 7800 div 3436000 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1558 2230 a 1618 2174 a F4(X)p FV($)o F4(T)g F5(2)g
Gb(\000)p 1592 2211 368 4 v 1592 2283 a(\000)g F5(`)g
F4(X)g Fj(\032)g F4(T)3080 2230 y Gd(\()r(R)t(A)t(-)t(D)t
F6(E)t(F)r Gd(\))450 2479 y F7(Algorithmic)c(type)h(equivalence)p
2991 2381 459 4 v 2991 2519 4 139 v 3020 2479 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 3020
2479 a 15 w Gb(\000)39 b F5(`)3138 2459 y Fx(I)3205 2479
y F4(S)23 b FV($)g F4(T)p 3447 2519 4 139 v 2991 2522
459 4 v 1575 2620 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1575 2620 a 16 w Gb(\000)38 b F5(`)1693
2600 y Fx(I)1761 2620 y F4(B)22 b FV($)h F4(B)3030 2619
y Gd(\()r(Q)t(A)t(-)t(B)t F6(A)t(S)t(E)q Gd(\))1221 2842
y
 gsave currentpoint translate 0 879104 7800 div 8757919 7800 div 1206784
-7800 div box .9 setgray fill grestore
 1221 2842 a 1255 2786 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1255 2786 a 16 w Gb(\000)39
b F5(`)1374 2767 y Fx(I)1441 2786 y F4(S)23 b Fj(\032)g
F4(S)1674 2756 y FX(0)1864 2786 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1864 2786 a 15 w Gb(\000)39
b F5(`)1982 2767 y Fx(I)2049 2786 y F4(S)2101 2756 y
FX(0)2147 2786 y FV($)23 b F4(T)p 1255 2823 1042 4 v
1575 2899 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1575 2899 a 16 w Gb(\000)38 b F5(`)1693 2880
y Fx(I)1761 2899 y F4(S)22 b FV($)h F4(T)2858 2842 y
Gd(\()r(Q)t(A)t(-)t(R)t F6(E)t(D)t(U)t(C)t(E)t Gd(L)r(\))1221
3146 y
 gsave currentpoint translate 0 879104 7800 div 8757919 7800 div 1206784
-7800 div box .9 setgray fill grestore
 1221 3146 a 1255 3090 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1255 3090 a 16 w Gb(\000)39
b F5(`)1374 3071 y Fx(I)1441 3090 y F4(T)23 b Fj(\032)g
F4(T)1674 3060 y FX(0)1864 3090 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1864 3090 a 15 w Gb(\000)39
b F5(`)1982 3071 y Fx(I)2049 3090 y F4(S)23 b FV($)g
F4(T)2273 3060 y FX(0)p 1255 3127 1042 4 v 1575 3203
a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1575 3203 a 16 w Gb(\000)38 b F5(`)1693 3184 y Fx(I)1761
3203 y F4(S)22 b FV($)h F4(T)2854 3146 y Gd(\()r(Q)t(A)t(-)t(R)t
F6(E)t(D)t(U)t(C)t(E)t Gd(R)r(\))1210 3370 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1210 3370
a 15 w Gb(\000)39 b F5(`)1328 3350 y Fx(I)1396 3370 y
F4(S)1439 3382 y F1(1)1503 3370 y FV($)23 b F4(T)1652
3382 y F1(1)1859 3370 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1859 3370 a 16 w Gb(\000)38 b
F5(`)1977 3350 y Fx(I)2045 3370 y F4(S)2088 3382 y F1(2)2152
3370 y FV($)23 b F4(T)2302 3382 y F1(2)p 1210 3413 1133
4 v 1367 3496 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1367 3496 a 16 w Gb(\000)39 b F5(`)1486
3476 y Fx(I)1553 3496 y F4(S)1597 3508 y F1(1)1637 3496
y FV(!)p F4(S)1764 3508 y F1(2)1827 3496 y FV($)23 b
F4(T)1977 3508 y F1(1)2018 3496 y FV(!)p F4(T)2144 3508
y F1(2)2932 3432 y Gd(\()r(Q)t(A)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(\))450 3667 y F7(Exposur)o(e)p 2988 3569 462 4 v 2988
3708 4 140 v 3016 3667 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 3016 3667 a 16 w Gb(\000)39
b F5(`)3135 3647 y Fx(I)3202 3667 y F4(T)23 b FV(*)g
F4(T)3398 3637 y FX(0)p 3447 3708 4 140 v 2988 3711 462
4 v 1555 3884 a
 gsave currentpoint translate 0 879104 7800 div 3493899 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1555 3884 a 1595 3828 a Gd(otherwise)p
1589 3865 375 4 v 1589 3942 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1589 3942 a 15 w Gb(\000)39
b F5(`)1707 3922 y Fx(I)1775 3942 y F4(T)22 b FV(*)i
F4(T)2968 3884 y Gd(\()r(X)t(A)t(-)t(O)t F6(T)t(H)t(E)t(R)r
Gd(\))1210 4188 y
 gsave currentpoint translate 0 879104 7800 div 8934098 7800 div 1206784
-7800 div box .9 setgray fill grestore
 1210 4188 a 1244 4132 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1244 4132 a
16 w Gb(\000)38 b F5(`)1362 4113 y Fx(I)1430 4132 y F4(T)23
b Fj(\032)g F4(T)1663 4102 y FX(0)1852 4132 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1852 4132
a 16 w Gb(\000)39 b F5(`)1971 4113 y Fx(I)2038 4132 y
F4(T)2089 4102 y FX(0)2136 4132 y FV(*)23 b F4(T)2265
4102 y FX(00)p 1244 4169 1064 4 v 1564 4245 a
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1564 4245
a 15 w Gb(\000)39 b F5(`)1682 4226 y Fx(I)1750 4245 y
F4(T)22 b FV(*)i F4(T)1946 4215 y FX(00)2923 4188 y Gd(\()r(X)t(A)t(-)t
(R)t F6(E)t(D)t(U)t(C)t(E)r Gd(\))450 4425 y F7(Algorithmic)19
b(typing)p 3055 4342 396 4 v 3055 4450 4 108 v 1982 w
Gb(\000)k F5(`)3170 4405 y Fx(I)3237 4425 y F4(t)g FF(:)g
F4(T)p 3447 4450 V 3055 4453 396 4 v 1637 4546 a(x:T)f
F5(2)i Gb(\000)p 1606 4590 339 4 v 1606 4669 a(\000)f
F5(`)1693 4650 y Fx(I)1761 4669 y F4(x)f FF(:)i F4(T)3085
4609 y Gd(\()r(T)n(A)t(-)t(V)l F6(A)t(R)q Gd(\))1457
4808 y Gb(\000)6 b(;)17 b F4(x:T)1679 4820 y F1(1)1743
4808 y F5(`)1762 4789 y Fx(I)1829 4808 y F4(t)1873 4820
y F1(2)1936 4808 y FF(:)23 b F4(T)2054 4820 y F1(2)p
1352 4852 847 4 v 1352 4931 a Gb(\000)g F5(`)1439 4912
y Fx(I)1507 4931 y Gb(\025)p F4(x:T)1683 4943 y F1(1)1723
4931 y F4(.t)1810 4943 y F1(2)1874 4931 y FF(:)g F4(T)1992
4943 y F1(1)2032 4931 y FV(!)p F4(T)2159 4943 y F1(2)3093
4871 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p Gd(\))p eop
%%Page: 234 235
234 234 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)877
b Gd(2)t(5)t(.)29 b(D)t F6(E)t(FI)t(N)t(I)t(T)t(I)t(O)t(N)t(S)881
b Gd(234)467 673 y Gb(\000)23 b F5(`)554 654 y Fx(I)622
673 y F4(t)665 685 y F1(1)729 673 y FF(:)g F4(T)847 685
y F1(1)1053 673 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 1053 673 a 16 w Gb(\000)39 b F5(`)1172
654 y Fx(I)1239 673 y F4(T)1283 685 y F1(1)1346 673 y
FV(*)24 b FY(\()p F4(T)1500 685 y F1(11)1577 673 y FV(!)p
F4(T)1704 685 y F1(12)1781 673 y FY(\))166 b Gb(\000)23
b F5(`)2066 654 y Fx(I)2133 673 y F4(t)2177 685 y F1(2)2241
673 y FF(:)g F4(T)2359 685 y F1(2)2565 673 y
 gsave currentpoint translate 0 124518 7800 div 602682 7800 div 577638
-7800 div box .9 setgray fill grestore
 2565 673
a 16 w Gb(\000)38 b F5(`)2683 654 y Fx(I)2751 673 y F4(T)2795
685 y F1(2)2858 673 y FV($)23 b F4(T)3008 685 y F1(11)p
467 716 2618 4 v 1484 796 a Gb(\000)g F5(`)1571 777 y
Fx(I)1638 796 y F4(t)1682 808 y F1(1)1766 796 y F4(t)1810
808 y F1(2)1873 796 y FF(:)g F4(T)1991 808 y F1(12)3088
895 y Gd(\()r(T)n(A)t(-)t(A)t F6(P)t(P)q Gd(\))p 409
1024 9 36 v 418 1024 3000 6 v 3418 1024 38 6 v 3455 1024
9 36 v 450 1310 a Gj(25.2)119 b(T)-13 b(erm)29 b(De\002nitions)450
1499 y Gd(\(This)e(should)g(be)f(very)g(optional,)i(but)f(it's)g(nice)f
(to)h(be)f(honest)i(about)e(what)h(the)f(checkers)450
1598 y(ar)o(e)19 b(doing.\))p eop
%%Page: 235 236
235 235 bop 450 1306 a F3(Chapter)44 b(26)450 1721 y
Gk(T)-19 b(ype)52 b(Operators)h(and)f(Kinding)450 2177
y F7(The)23 b(intr)o(oduction)f(to)h(this)g(chapter)f(is)i(in)g(good)e
(shape.)33 b(The)23 b(technicalities)f(ar)o(e)i(all)f(missing)h(at)f
(the)450 2277 y(moment.)575 2476 y Gd(In)e(pr)o(evious)f(chapters,)g
(we)h(have)f(often)h(made)f(use)h(of)f(informal)h(abbr)o(eviations)f
(like)616 2634 y FT(Pair)40 b(S)g(T)f(=)h Fv(8)p FT(X.)f(\(S)p
FO(!)p FT(T)p FO(!)p FT(X\))h FO(!)f FT(X;)450 2800 y
Gd(for)32 b(br)o(evity)g(and)g(r)o(eadability)-9 b(,)33
b(writing)g F4(Pair)42 b(Nat)h(Bool)n Gd(,)35 b(for)d(example,)i
(instead)e(of)h(the)450 2899 y(mor)o(e)19 b(cumbersome)g
F5(8)p F4(X.)42 b(\(Nat)p FV(!)n F4(Bool)p FV(!)o F4(X\))g
FV(!)i F4(X)p Gd(.)25 b(What)18 b(sort)i(of)f(thing)h(is)f
F4(Pair)f Gd(in)h(itself?)450 2999 y(Given)i(any)f(pair)f(of)h(types)g
F4(S)g Gd(and)g F4(T)o Gd(,)g(it)h(picks)f(out)h(the)f(type)g(of)g
(\223pairs)f(of)h F4(S)g Gd(and)g F4(T)o Gd(\224\227that)g(is,)450
3099 y(it)26 b(is)g(intuitively)g(a)f F7(function)h Gd(fr)o(om)f(types)
h(to)g(types.)40 b(The)26 b(de\002nition)g(of)g F4(Pair)e
Gd(can)h(thus)h(be)450 3198 y(written)21 b(explicitly)g(as)g(follows:)
616 3356 y FT(Pair)40 b(=)g FM(\025)p FT(A.)f FM(\025)p
FT(B.)g Fv(8)p FT(X.)h(\(A)p FO(!)p FT(B)p FO(!)p FT(X\))g
FO(!)f FT(X;)450 3522 y Gd(Formally)-9 b(,)27 b(then,)h(the)e(type)f
(expr)o(ession)h F4(Pair)42 b(S)h(T)26 b Gd(is)g(actually)f(a)h(nested)
f(operator)h(appli-)450 3622 y(cation)31 b F4(\(Pair)41
b(S\))i(T)p Gd(.)55 b(In)31 b(other)g(wor)o(ds,)i F4(Pair)c
Gd(itself)h(is)h(a)g(function)g(fr)o(om)f(types)h(to)g(type)450
3721 y(operators)24 b(mapping)g(types)g(to)h(types.)36
b(In)24 b(this)h(chapter)-6 b(,)24 b(we)g(take)f(a)h(mor)o(e)g(car)o
(eful)e(look)j(at)450 3821 y(the)c(mechanisms)h(involved)f(in)g
(de\002ning)g(and)g(using)g(such)g(functions.)450 4107
y Gj(26.1)119 b(Intuitions)450 4296 y Gd(Once)23 b(we)g(have)g(intr)o
(oduced)f(syntax)h(for)g(abstracting)g(type)g(expr)o(essions)g(on)h
(type)f(expr)o(es-)450 4395 y(sions)29 b(\()p Gb(\025)p
Gd(\))f(and)g(performing)g(the)g(corr)o(esponding)h(instantiations)g
(\(application\),)g(nothing)450 4495 y(pr)o(events)i(us)g(fr)o(om)g
(considering)h(functions)h(mapping)e(type)h(operators)f(to)h(types,)h
(func-)450 4595 y(tions)21 b(mapping)f(type)f(operators)g(to)h(type)g
(operators,)f(etc.)25 b(T)-8 b(o)20 b(keep)f(things)i(or)o(ganized)d
(and)450 4694 y(pr)o(event)24 b(ourselves)h(fr)o(om)f(writing)i
(nonsensical)g(type)e(applications)h(like)g F4(Pair)42
b(Pair)n Gd(,)26 b(we)1888 5169 y(235)p eop
%%Page: 236 237
236 236 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(236)450 683 y(classify)21 b(types)f(and)h(type)f(operators)h(by)g
Ge(kinds)p Gd(.)j(E.g.,)699 847 y F4(*)400 b Gd(the)21
b(kind)g(of)g(\223pr)o(oper)e(types\224)i(like)g F4(Bool)e
Gd(and)h F4(Bool)p FV(!)o F4(Bool)699 946 y(*)p FV(!)p
F4(*)273 b Gd(the)21 b(kind)g(of)g(type)g(operators)f(\(functions)i(fr)
o(om)e(types)h(to)g(types\))699 1046 y F4(*)p FV(!)p
F4(*)o FV(!)p F4(*)147 b Gd(the)21 b(kind)g(of)g(functions)h(fr)o(om)e
(types)h(to)g(type)g(operators)699 1146 y FY(\()p F4(*)p
FV(!)p F4(*)p FY(\))p FV(!)p F4(*)82 b Gd(the)21 b(kind)g(of)g
(functions)h(fr)o(om)e(type)h(operators)f(to)h(types)699
1245 y(etc.)450 1406 y(Kinds)27 b(can)g(be)f(thought)i(of)e(as)h(the)g
(\223types)f(of)g(types.\224)43 b(In)27 b(essence,)h(the)f(system)g(of)
f(kinds)450 1506 y(is)32 b(a)f(little)h(copy)g(of)f(the)h(simply)g
(typed)f(lambda-calculus,)i(placed)d(one)i(level)f(higher)i(in)450
1605 y(the)23 b(hierar)o(chy)g(of)g(classi\002cation.)33
b(Just)24 b(as)f(in)g(the)h(lambda-calculus,)e(we)h(shall)h(henceforth)
450 1705 y(annotate)g(the)f(bound)h(variables)f(in)h(operator)f
(abstractions)h(with)g(the)g(kind)g(of)g(the)g(bound)450
1805 y(type)d(variable,)e(so)i(that)g F4(Pair)e Gd(is)i(r)o(eally)f
(de\002ned)g(as:)616 1958 y FT(Pair)40 b(=)g FM(\025)p
FT(A:)-25 b(:*.)40 b FM(\025)p FT(B:)-25 b(:*.)40 b Fv(8)p
FT(X.)f(\(A)p FO(!)q FT(B)p FO(!)p FT(X\))g FO(!)g FT(X;)450
2120 y Gd(However)-6 b(,)17 b(since)g F4(*)f Gd(is)h(by)g(far)e(the)i
(most)h(common)g(case,)e(we)h(allow)g Gb(\025)p F4(X.T)e
Gd(as)i(an)f(abbr)o(eviation)450 2219 y(for)21 b Gb(\025)p
F4(X:)-25 b(:*.T)m Gd(.)575 2319 y(A)25 b(few)g(pictur)o(es)g(should)h
(make)g(all)f(this)h(easier)f(to)h(understand.)39 b(The)26
b(phrases)f(of)h(our)450 2419 y(language)19 b(ar)o(e)e(divided)h(now)i
(into)g(thr)o(ee)e(separate)f(classes:)25 b(terms,)19
b(types,)g(and)g(kinds.)25 b(The)450 2518 y(level)16
b(of)f Ge(terms)g Gd(contains)i(actual)e(data)f(values)i(\(integers,)g
(r)o(ecor)o(ds,)f(etc.\))24 b(and)15 b(computations)450
2618 y(\(functions\))21 b(over)g(them.)525 3290 y @beginspecial
-1 @llx 720 @lly 341 @urx 790 @ury 3420 @rwi @setspecial
%%BeginDocument: figures/fomega1.eps
%!
%%BoundingBox: -1 720 341 790
%%Title: book/figures/fomega1
%%CreationDate: Mon Mar 29 17:00:12 1999
%%Creator: Tgif-4.0.10 by William Chia-Wei Cheng (william@cs.UCLA.edu)
/tgifdict 50 dict def tgifdict begin /TGMAX { exch dup 3 1 roll exch dup 3 1
roll gt { pop } { exch pop } ifelse } def /TGMIN { exch dup 3 1 roll exch dup
3 1 roll lt { pop } { exch pop } ifelse } def /TGSW { stringwidth pop } def
/bd { bind def } bind def /GS { gsave } bd /GR { grestore } bd /NP { newpath
} bd /CP { closepath } bd /CHP { charpath } bd /CT { curveto } bd /L { lineto
} bd /RL { rlineto } bd /M { moveto } bd /RM { rmoveto } bd /S { stroke } bd
/F { fill } bd /TR { translate } bd /RO { rotate } bd /SC { scale } bd /MU {
mul } bd /DI { div } bd /DU { dup } bd /NE { neg } bd /AD { add } bd /SU {
sub } bd /PO { pop } bd /EX { exch } bd /CO { concat } bd /CL { clip } bd /EC
{ eoclip } bd /EF { eofill } bd /IM { image } bd /IMM { imagemask } bd /ARY {
array } bd /SG { setgray } bd /RG { setrgbcolor } bd /SD { setdash } bd /W {
setlinewidth } bd /SM { setmiterlimit } bd /SLC { setlinecap } bd /SLJ {
setlinejoin } bd /SH { show } bd /FF { findfont } bd /MS { makefont setfont }
bd /AR { arcto 4 {pop} repeat } bd /FLAT { flattenpath strokepath clip
newpath } bd /TGSM { tgiforigctm setmatrix } def /TGRM { savematrix setmatrix
} def end
%%PageBoundingBox: -1 720 341 790
tgifdict begin /tgifsavedpage save def 1 SM 1 W 0 SG 72 0 MU 72 11 MU TR 72
128 DI 100.000 MU 100 DI DU NE SC GS /tgiforigctm matrix currentmatrix def 0
SG GS GS NP 589 29 M 605 29 605 125 16 AR 605 109 L 605 125 1 125 16 AR 17
125 L 1 125 1 29 16 AR 1 45 L 1 29 605 29 16 AR CP S GR GR 0 SG GS 33 74 M GS
0 SG /Courier FF [17 0 0 -17 0 0] MS (5) SH GR GR 0 SG GS 138 51 M GS 0 SG
/Courier FF [17 0 0 -17 0 0] MS ( x:Nat.x) SH GR GR 0 SG GS 62 90 M GS 0 SG
/Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)5) SH GR GR 0 SG GS 238 106 M GS
0 SG /Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)true) SH GR GR 0 SG GS 307
54 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS ( X. x:X.x) SH GR GR 0 SG GS 344
85 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (pair [Nat] [Bool] 5 false) SH
GR GR 0 SG GS 577 119 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (etc.)
SH GR GR 0 SG GS 552 22 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS
(Terms) SH GR GR 0 SG GS 309 55 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l)
SH GR GR 0 SG GS 335 54 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR
0 SG GS 75 91 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS
140 52 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 251 107
M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR GR tgifsavedpage
restore end showpage

%%EndDocument
 @endspecial 450 3451 a(The)26 b(level)g(of)g Ge(types)f
Gd(contains)h Ge(proper)g(types)f Gd(like)h F4(Nat)o
Gd(,)h F4(Nat)p FV(!)o F4(Nat)o Gd(,)g F4(Pair)42 b(Nat)g(Bool)24
b Gd(and)450 3551 y F5(8)p F4(X.X)p FV(!)n F4(X)o Gd(,)d(which)h
(classify)e(terms,)525 4920 y @beginspecial -1 @llx 640
@lly 341 @urx 793 @ury 3420 @rwi @setspecial
%%BeginDocument: figures/fomega2.eps
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: -1 640 341 793
%%Title: book/figures/fomega2
%%CreationDate: Sat Dec 18 13:30:15 1999
%%Creator: Tgif-4.1.25 by William Chia-Wei Cheng (william@cs.UCLA.edu)
%%ProducedBy: (unknown)
%%Pages: 1
%%DocumentFonts: (atend)
%%EndComments
%%BeginProlog

/tgifdict 53 dict def
tgifdict begin

/tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put

/TGAT % tgifarrowtip
 { tgifarrowtipdict begin
      /dy exch def
      /dx exch def
      /h exch def
      /w exch def
      /y exch def
      /x exch def
      /savematrix mtrx currentmatrix def
      x y translate
      dy dx atan rotate
      0 0 moveto
      w neg h lineto
      w neg h neg lineto
      savematrix setmatrix
   end
 } def

/TGMAX
 { exch dup 3 1 roll exch dup 3 1 roll gt { pop } { exch pop } ifelse
 } def
/TGMIN
 { exch dup 3 1 roll exch dup 3 1 roll lt { pop } { exch pop } ifelse
 } def
/TGSW { stringwidth pop } def

/bd { bind def } bind def

/GS { gsave } bd
/GR { grestore } bd
/NP { newpath } bd
/CP { closepath } bd
/CHP { charpath } bd
/CT { curveto } bd
/L { lineto } bd
/RL { rlineto } bd
/M { moveto } bd
/RM { rmoveto } bd
/S { stroke } bd
/F { fill } bd
/TR { translate } bd
/RO { rotate } bd
/SC { scale } bd
/MU { mul } bd
/DI { div } bd
/DU { dup } bd
/NE { neg } bd
/AD { add } bd
/SU { sub } bd
/PO { pop } bd
/EX { exch } bd
/CO { concat } bd
/CL { clip } bd
/EC { eoclip } bd
/EF { eofill } bd
/IM { image } bd
/IMM { imagemask } bd
/ARY { array } bd
/SG { setgray } bd
/RG { setrgbcolor } bd
/SD { setdash } bd
/W { setlinewidth } bd
/SM { setmiterlimit } bd
/SLC { setlinecap } bd
/SLJ { setlinejoin } bd
/SH { show } bd
/FF { findfont } bd
/MS { makefont setfont } bd
/AR { arcto 4 {pop} repeat } bd
/CURP { currentpoint } bd
/FLAT { flattenpath strokepath clip newpath } bd
/TGSM { tgiforigctm setmatrix } def
/TGRM { savematrix setmatrix } def

end

%%EndProlog
%%Page: 1 1

%%PageBoundingBox: -1 640 341 793
tgifdict begin
/tgifsavedpage save def

1 SM
1 W

0 SG

72 0 MU 72 11 MU TR
72 128 DI 100.000 MU 100 DI DU NE SC

GS

/tgiforigctm matrix currentmatrix def

% RCBOX
0 SG
GS
   GS
      NP
         589 170 M
         605 170 605 266 16 AR
         605 250 L
         605 266 1 266 16 AR
         17 266 L
         1 266 1 170 16 AR
         1 186 L
         1 170 605 170 16 AR
      CP
      S
   GR
GR

% TEXT
NP
0 SG
   GS
      1 W
      33 215 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (5) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      138 192 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            ( x:Nat.x) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      62 231 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (\( x:Nat.x\)5) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      238 247 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (\( x:Nat.x\)true) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      307 195 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            ( X. x:X.x) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      339 224 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (pair [Nat] [Bool] 5 false) SH
      GR
   GR

% RCBOX
0 SG
GS
   GS
      NP
         589 26 M
         605 26 605 122 16 AR
         605 106 L
         605 122 1 122 16 AR
         17 122 L
         1 122 1 26 16 AR
         1 42 L
         1 26 605 26 16 AR
      CP
      S
   GR
GR

% TEXT
NP
0 SG
   GS
      1 W
      17 71 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Nat) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      94 94 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Nat->Nat) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      280 81 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (Pair Nat Bool) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      142 62 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (\( X.X->X\)Nat) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      224 105 M
      GS
            0 SG
            /Courier FF [17 0 0 -17 0 0] MS
            (  X.X->X) SH
      GR
   GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      38 197 M
      -119 -9 atan DU cos 8.000 MU 29 exch SU
      exch sin 8.000 MU 78 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      29 78 8.000 3.000 -9 -119 TGAT
   1 SG CP F
   0 SG
   NP
      29 78 8.000 3.000 -9 -119 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      107 214 M
      -134 -70 atan DU cos 8.000 MU 37 exch SU
      exch sin 8.000 MU 80 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      37 80 8.000 3.000 -70 -134 TGAT
   1 SG CP F
   0 SG
   NP
      37 80 8.000 3.000 -70 -134 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      183 177 M
      -76 -52 atan DU cos 8.000 MU 131 exch SU
      exch sin 8.000 MU 101 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      131 101 8.000 3.000 -52 -76 TGAT
   1 SG CP F
   0 SG
   NP
      131 101 8.000 3.000 -52 -76 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   [2 2] 0 SD
   NP
      297 234 M
      -79 -31 atan DU cos 8.000 MU 266 exch SU
      exch sin 8.000 MU 155 exch SU L
   TGSM
   1 W
   S
   [] 0 SD
GR
GS
   TGSM
   NP
      266 155 8.000 3.000 -31 -79 TGAT
   1 SG CP F
   0 SG
   NP
      266 155 8.000 3.000 -31 -79 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      347 176 M
      -66 -72 atan DU cos 8.000 MU 275 exch SU
      exch sin 8.000 MU 110 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      275 110 8.000 3.000 -72 -66 TGAT
   1 SG CP F
   0 SG
   NP
      275 110 8.000 3.000 -72 -66 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      502 207 M
      -119 -147 atan DU cos 8.000 MU 355 exch SU
      exch sin 8.000 MU 88 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      355 88 8.000 3.000 -147 -119 TGAT
   1 SG CP F
   0 SG
   NP
      355 88 8.000 3.000 -147 -119 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      195 176 M
      -107 18 atan DU cos 8.000 MU 213 exch SU
      exch sin 8.000 MU 69 exch SU L
   TGSM
   1 W
   S
GR
GS
   TGSM
   NP
      213 69 8.000 3.000 18 -107 TGAT
   1 SG CP F
   0 SG
   NP
      213 69 8.000 3.000 18 -107 TGAT
   CP F
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      292 190 M
      270 202 L
   TGSM
   3 W
   S
   1 W
GR

% POLY/OPEN-SPLINE
0 SG
GS
   NP
      271 189 M
      294 203 L
   TGSM
   3 W
   S
   1 W
GR

% TEXT
NP
0 SG
   GS
      1 W
      574 115 M
      GS
            0 SG
            /Times-Italic FF [17 0 0 -17 0 0] MS
            (etc.) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      577 260 M
      GS
            0 SG
            /Times-Italic FF [17 0 0 -17 0 0] MS
            (etc.) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      552 163 M
      GS
            0 SG
            /Times-Italic FF [17 0 0 -17 0 0] MS
            (Terms) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      555 17 M
      GS
            0 SG
            /Times-Italic FF [17 0 0 -17 0 0] MS
            (Types) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      154 62 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      309 196 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      337 195 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      75 232 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      140 193 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      251 248 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (l) SH
      GR
   GR

% TEXT
NP
0 SG
   GS
      1 W
      236 107 M
      GS
            0 SG
            /Symbol FF [17 0 0 -17 0 0] MS
            (") SH
      GR
   GR

GR
tgifsavedpage restore
end
showpage

%%Trailer
%MatchingCreationDate: Sat Dec 18 13:30:15 1999
%%DocumentFonts: Symbol
%%+ Times-Italic
%%+ Courier
%%EOF

%%EndDocument
 @endspecial eop
%%Page: 237 238
237 237 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(237)450 683 y(as)29 b(well)g(as)f Ge(type)g(operators)g
Gd(like)h F4(Pair)f Gd(and)g Gb(\025)p F4(X.X)p FV(!)o
F4(X)g Gd(that)h(do)g(not)h(themselves)f(classify)450
783 y(terms)k(but)g(that)g(can)g(be)f(applied)h(to)g(type)g(ar)o
(guments)f(to)i(form)f(type)g(expr)o(essions)g(like)450
882 y F4(\()p Gb(\025)p F4(X.X)p FV(!)n F4(X\)Nat)27
b Gd(that)i(do)g(classify)f(terms.)50 b(\(W)-8 b(e)28
b(use)h(the)g(wor)o(d)g(\223types\224)e(to)j(include)e(both)450
982 y(pr)o(oper)20 b(types)h(and)f(type)h(operators.\))525
2343 y @beginspecial -1 @llx 640 @lly 341 @urx 793 @ury
3420 @rwi @setspecial
%%BeginDocument: figures/fomega3.eps
%!
%%BoundingBox: -1 640 341 793
%%Title: book/figures/fomega3
%%CreationDate: Mon Mar 29 17:00:12 1999
%%Creator: Tgif-4.0.10 by William Chia-Wei Cheng (william@cs.UCLA.edu)
/tgifdict 52 dict def tgifdict begin /tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put /TGAT { tgifarrowtipdict begin /dy exch def
/dx exch def /h exch def /w exch def /y exch def /x exch def /savematrix mtrx
currentmatrix def x y translate dy dx atan rotate 0 0 moveto w neg h lineto w
neg h neg lineto savematrix setmatrix end } def /TGMAX { exch dup 3 1 roll
exch dup 3 1 roll gt { pop } { exch pop } ifelse } def /TGMIN { exch dup 3 1
roll exch dup 3 1 roll lt { pop } { exch pop } ifelse } def /TGSW {
stringwidth pop } def /bd { bind def } bind def /GS { gsave } bd /GR {
grestore } bd /NP { newpath } bd /CP { closepath } bd /CHP { charpath } bd
/CT { curveto } bd /L { lineto } bd /RL { rlineto } bd /M { moveto } bd /RM {
rmoveto } bd /S { stroke } bd /F { fill } bd /TR { translate } bd /RO {
rotate } bd /SC { scale } bd /MU { mul } bd /DI { div } bd /DU { dup } bd /NE
{ neg } bd /AD { add } bd /SU { sub } bd /PO { pop } bd /EX { exch } bd /CO {
concat } bd /CL { clip } bd /EC { eoclip } bd /EF { eofill } bd /IM { image }
bd /IMM { imagemask } bd /ARY { array } bd /SG { setgray } bd /RG {
setrgbcolor } bd /SD { setdash } bd /W { setlinewidth } bd /SM {
setmiterlimit } bd /SLC { setlinecap } bd /SLJ { setlinejoin } bd /SH { show
} bd /FF { findfont } bd /MS { makefont setfont } bd /AR { arcto 4 {pop}
repeat } bd /FLAT { flattenpath strokepath clip newpath } bd /TGSM {
tgiforigctm setmatrix } def /TGRM { savematrix setmatrix } def end
%%PageBoundingBox: -1 640 341 793
tgifdict begin /tgifsavedpage save def 1 SM 1 W 0 SG 72 0 MU 72 11 MU TR 72
128 DI 100.000 MU 100 DI DU NE SC GS /tgiforigctm matrix currentmatrix def 0
SG GS GS NP 589 170 M 605 170 605 266 16 AR 605 250 L 605 266 1 266 16 AR 17
266 L 1 266 1 170 16 AR 1 186 L 1 170 605 170 16 AR CP S GR GR 0 SG GS 33 215
M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (5) SH GR GR 0 SG GS 138 192 M GS 0
SG /Courier FF [17 0 0 -17 0 0] MS ( x:Nat.x) SH GR GR 0 SG GS 62 231 M GS 0
SG /Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)5) SH GR GR 0 SG GS 238 247 M
GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)true) SH GR GR 0 SG GS
307 195 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS ( X. x:X.x) SH GR GR 0 SG
GS 344 225 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(pair [Nat] [Bool] 5 false) SH GR GR 0 SG GS GS NP 589 26 M 605 26 605 122 16
AR 605 106 L 605 122 1 122 16 AR 17 122 L 1 122 1 26 16 AR 1 42 L 1 26 605 26
16 AR CP S GR GR 0 SG GS 17 71 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(Nat) SH GR GR 0 SG GS 94 94 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(Nat->Nat) SH GR GR 0 SG GS 280 81 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(Pair Nat Bool) SH GR GR 0 SG GS 489 49 M GS 0 SG /Courier FF [17 0 0 -17 0
0] MS (Pair) SH GR GR 0 SG GS 427 104 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS (Pair Nat) SH GR GR 0 SG GS 326 51 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS ( X.X->X) SH GR GR 0 SG GS 142 62 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS (\( X.X->X\)Nat) SH GR GR 0 SG GS 224 105 M GS 0 SG /Courier FF [17 0 0
-17 0 0] MS (  X.X->X) SH GR GR 0 SG GS NP 38 197 M -119 -9 atan DU cos 8.000
MU 29 exch SU exch sin 8.000 MU 78 exch SU L TGSM 1 W S GR GS TGSM NP 29 78
8.000 3.000 -9 -119 TGAT 1 SG CP F 0 SG NP 29 78 8.000 3.000 -9 -119 TGAT CP
F GR 0 SG GS NP 107 214 M -134 -70 atan DU cos 8.000 MU 37 exch SU exch sin
8.000 MU 80 exch SU L TGSM 1 W S GR GS TGSM NP 37 80 8.000 3.000 -70 -134
TGAT 1 SG CP F 0 SG NP 37 80 8.000 3.000 -70 -134 TGAT CP F GR 0 SG GS NP 183
177 M -76 -52 atan DU cos 8.000 MU 131 exch SU exch sin 8.000 MU 101 exch SU
L TGSM 1 W S GR GS TGSM NP 131 101 8.000 3.000 -52 -76 TGAT 1 SG CP F 0 SG NP
131 101 8.000 3.000 -52 -76 TGAT CP F GR 0 SG GS [2 2] 0 SD NP 297 234 M -79
-31 atan DU cos 8.000 MU 266 exch SU exch sin 8.000 MU 155 exch SU L TGSM 1 W
S [] 0 SD GR GS TGSM NP 266 155 8.000 3.000 -31 -79 TGAT 1 SG CP F 0 SG NP
266 155 8.000 3.000 -31 -79 TGAT CP F GR 0 SG GS NP 347 176 M -66 -72 atan DU
cos 8.000 MU 275 exch SU exch sin 8.000 MU 110 exch SU L TGSM 1 W S GR GS
TGSM NP 275 110 8.000 3.000 -72 -66 TGAT 1 SG CP F 0 SG NP 275 110 8.000
3.000 -72 -66 TGAT CP F GR 0 SG GS NP 502 207 M -119 -147 atan DU cos 8.000
MU 355 exch SU exch sin 8.000 MU 88 exch SU L TGSM 1 W S GR GS TGSM NP 355 88
8.000 3.000 -147 -119 TGAT 1 SG CP F 0 SG NP 355 88 8.000 3.000 -147 -119
TGAT CP F GR 0 SG GS NP 195 176 M -107 18 atan DU cos 8.000 MU 213 exch SU
exch sin 8.000 MU 69 exch SU L TGSM 1 W S GR GS TGSM NP 213 69 8.000 3.000 18
-107 TGAT 1 SG CP F 0 SG NP 213 69 8.000 3.000 18 -107 TGAT CP F GR 0 SG GS
NP 292 190 M 270 202 L TGSM 3 W S 1 W GR 0 SG GS NP 271 189 M 294 203 L TGSM
3 W S 1 W GR 0 SG GS 574 115 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS
(etc.) SH GR GR 0 SG GS 577 260 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0]
MS (etc.) SH GR GR 0 SG GS 552 163 M GS 0 SG /Times-Italic FF [17 0 0 -17 0
0] MS (Terms) SH GR GR 0 SG GS 555 17 M GS 0 SG /Times-Italic FF [17 0 0 -17
0 0] MS (Types) SH GR GR 0 SG GS 509 83 M GS 0 SG /Courier FF [17 0 0 -17 0
0] MS (Pair Pair) SH GR GR 0 SG GS 328 52 M GS 0 SG /Symbol FF [17 0 0 -17 0
0] MS (l) SH GR GR 0 SG GS 154 62 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS
(l) SH GR GR 0 SG GS 309 196 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH
GR GR 0 SG GS 336 194 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0
SG GS 75 232 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS
140 193 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 251 248
M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 236 107 M GS 0
SG /Symbol FF [17 0 0 -17 0 0] MS (") SH GR GR GR tgifsavedpage restore end
showpage

%%EndDocument
 @endspecial 450 2498 a(Pr)o(oper)j(types)h(ar)o(e)e(classi\002ed)i(by)
g(the)g(kind)g F4(*)p Gd(,)g(pr)o(onounced)g(\223kind)g(type\224)f(or)h
(just)g(\223type.\224)450 2597 y(T)-7 b(ype)20 b(operators)g(ar)o(e)g
(classi\002ed)g(by)h(mor)o(e)g(complex)g(kinds,)g(such)g(as)f
F4(*)p FV(\))p F4(*)g Gd(and)h F4(*)p FV(\))o F4(*)p
FV(\))p F4(*)o Gd(.)525 4467 y @beginspecial -1 @llx
577 @lly 341 @urx 791 @ury 3420 @rwi @setspecial
%%BeginDocument: figures/fomega-all.eps
%!
%%BoundingBox: -1 577 341 791
%%Title: book/figures/fomega-all
%%CreationDate: Mon Mar 29 17:00:12 1999
%%Creator: Tgif-4.0.10 by William Chia-Wei Cheng (william@cs.UCLA.edu)
/tgifdict 52 dict def tgifdict begin /tgifarrowtipdict 8 dict def
tgifarrowtipdict /mtrx matrix put /TGAT { tgifarrowtipdict begin /dy exch def
/dx exch def /h exch def /w exch def /y exch def /x exch def /savematrix mtrx
currentmatrix def x y translate dy dx atan rotate 0 0 moveto w neg h lineto w
neg h neg lineto savematrix setmatrix end } def /TGMAX { exch dup 3 1 roll
exch dup 3 1 roll gt { pop } { exch pop } ifelse } def /TGMIN { exch dup 3 1
roll exch dup 3 1 roll lt { pop } { exch pop } ifelse } def /TGSW {
stringwidth pop } def /bd { bind def } bind def /GS { gsave } bd /GR {
grestore } bd /NP { newpath } bd /CP { closepath } bd /CHP { charpath } bd
/CT { curveto } bd /L { lineto } bd /RL { rlineto } bd /M { moveto } bd /RM {
rmoveto } bd /S { stroke } bd /F { fill } bd /TR { translate } bd /RO {
rotate } bd /SC { scale } bd /MU { mul } bd /DI { div } bd /DU { dup } bd /NE
{ neg } bd /AD { add } bd /SU { sub } bd /PO { pop } bd /EX { exch } bd /CO {
concat } bd /CL { clip } bd /EC { eoclip } bd /EF { eofill } bd /IM { image }
bd /IMM { imagemask } bd /ARY { array } bd /SG { setgray } bd /RG {
setrgbcolor } bd /SD { setdash } bd /W { setlinewidth } bd /SM {
setmiterlimit } bd /SLC { setlinecap } bd /SLJ { setlinejoin } bd /SH { show
} bd /FF { findfont } bd /MS { makefont setfont } bd /AR { arcto 4 {pop}
repeat } bd /FLAT { flattenpath strokepath clip newpath } bd /TGSM {
tgiforigctm setmatrix } def /TGRM { savematrix setmatrix } def end
%%PageBoundingBox: -1 577 341 791
tgifdict begin /tgifsavedpage save def 1 SM 1 W 0 SG 72 0 MU 72 11 MU TR 72
128 DI 100.000 MU 100 DI DU NE SC GS /tgiforigctm matrix currentmatrix def 0
SG GS GS NP 589 282 M 605 282 605 378 16 AR 605 362 L 605 378 1 378 16 AR 17
378 L 1 378 1 282 16 AR 1 298 L 1 282 605 282 16 AR CP S GR GR 0 SG GS 33 327
M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (5) SH GR GR 0 SG GS 138 304 M GS 0
SG /Courier FF [17 0 0 -17 0 0] MS ( x:Nat.x) SH GR GR 0 SG GS 62 343 M GS 0
SG /Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)5) SH GR GR 0 SG GS 238 359 M
GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (\( x:Nat.x\)true) SH GR GR 0 SG GS
307 307 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS ( X. x:X.x) SH GR GR 0 SG
GS 346 336 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(pair [Nat] [Bool] 5 false) SH GR GR 0 SG GS GS NP 589 138 M 605 138 605 234
16 AR 605 218 L 605 234 1 234 16 AR 17 234 L 1 234 1 138 16 AR 1 154 L 1 138
605 138 16 AR CP S GR GR 0 SG GS 17 183 M GS 0 SG /Courier FF [17 0 0 -17 0
0] MS (Nat) SH GR GR 0 SG GS 94 206 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(Nat->Nat) SH GR GR 0 SG GS 280 193 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS
(Pair Nat Bool) SH GR GR 0 SG GS 489 161 M GS 0 SG /Courier FF [17 0 0 -17 0
0] MS (Pair) SH GR GR 0 SG GS 427 216 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS (Pair Nat) SH GR GR 0 SG GS 326 163 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS ( X.X->X) SH GR GR 0 SG GS 142 174 M GS 0 SG /Courier FF [17 0 0 -17 0 0]
MS (\( X.X->X\)Nat) SH GR GR 0 SG GS 224 217 M GS 0 SG /Courier FF [17 0 0
-17 0 0] MS (  X.X->X) SH GR GR 0 SG GS NP 38 309 M -119 -9 atan DU cos 8.000
MU 29 exch SU exch sin 8.000 MU 190 exch SU L TGSM 1 W S GR GS TGSM NP 29 190
8.000 3.000 -9 -119 TGAT 1 SG CP F 0 SG NP 29 190 8.000 3.000 -9 -119 TGAT CP
F GR 0 SG GS NP 107 326 M -134 -70 atan DU cos 8.000 MU 37 exch SU exch sin
8.000 MU 192 exch SU L TGSM 1 W S GR GS TGSM NP 37 192 8.000 3.000 -70 -134
TGAT 1 SG CP F 0 SG NP 37 192 8.000 3.000 -70 -134 TGAT CP F GR 0 SG GS NP
183 289 M -76 -52 atan DU cos 8.000 MU 131 exch SU exch sin 8.000 MU 213 exch
SU L TGSM 1 W S GR GS TGSM NP 131 213 8.000 3.000 -52 -76 TGAT 1 SG CP F 0 SG
NP 131 213 8.000 3.000 -52 -76 TGAT CP F GR 0 SG GS [2 2] 0 SD NP 297 346 M
-79 -31 atan DU cos 8.000 MU 266 exch SU exch sin 8.000 MU 267 exch SU L TGSM
1 W S [] 0 SD GR GS TGSM NP 266 267 8.000 3.000 -31 -79 TGAT 1 SG CP F 0 SG
NP 266 267 8.000 3.000 -31 -79 TGAT CP F GR 0 SG GS NP 347 288 M -66 -72 atan
DU cos 8.000 MU 275 exch SU exch sin 8.000 MU 222 exch SU L TGSM 1 W S GR GS
TGSM NP 275 222 8.000 3.000 -72 -66 TGAT 1 SG CP F 0 SG NP 275 222 8.000
3.000 -72 -66 TGAT CP F GR 0 SG GS NP 502 319 M -119 -147 atan DU cos 8.000
MU 355 exch SU exch sin 8.000 MU 200 exch SU L TGSM 1 W S GR GS TGSM NP 355
200 8.000 3.000 -147 -119 TGAT 1 SG CP F 0 SG NP 355 200 8.000 3.000 -147
-119 TGAT CP F GR 0 SG GS NP 195 288 M -107 18 atan DU cos 8.000 MU 213 exch
SU exch sin 8.000 MU 181 exch SU L TGSM 1 W S GR GS TGSM NP 213 181 8.000
3.000 18 -107 TGAT 1 SG CP F 0 SG NP 213 181 8.000 3.000 18 -107 TGAT CP F GR
0 SG GS NP 292 302 M 270 314 L TGSM 3 W S 1 W GR 0 SG GS NP 271 301 M 294 315
L TGSM 3 W S 1 W GR 0 SG GS GS NP 589 26 M 605 26 605 90 16 AR 605 74 L 605
90 1 90 16 AR 17 90 L 1 90 1 26 16 AR 1 42 L 1 26 605 26 16 AR CP S GR GR 0
SG GS 162 61 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (*) SH GR GR 0 SG GS
320 60 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (*->*) SH GR GR 0 SG GS 469
60 M GS 0 SG /Courier FF [17 0 0 -17 0 0] MS (*->*->*) SH GR GR 0 SG GS 575
84 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (etc.) SH GR GR 0 SG GS 574
227 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (etc.) SH GR GR 0 SG GS
577 372 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (etc.) SH GR GR 0 SG
GS 552 275 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (Terms) SH GR GR 0
SG GS 555 129 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (Types) SH GR GR
0 SG GS 554 19 M GS 0 SG /Times-Italic FF [17 0 0 -17 0 0] MS (Kinds) SH GR
GR 0 SG GS NP 33 168 M -104 124 atan DU cos 8.000 MU 157 exch SU exch sin
8.000 MU 64 exch SU L TGSM 1 W S GR GS TGSM NP 157 64 8.000 3.000 124 -104
TGAT 1 SG CP F 0 SG NP 157 64 8.000 3.000 124 -104 TGAT CP F GR 0 SG GS NP
123 187 M 124 187 L -117 37 atan DU cos 8.000 MU 161 exch SU exch sin 8.000
MU 70 exch SU L TGSM 1 W S GR GS TGSM NP 161 70 8.000 3.000 37 -117 TGAT 1 SG
CP F 0 SG NP 161 70 8.000 3.000 37 -117 TGAT CP F GR 0 SG GS NP 221 155 M -85
-52 atan DU cos 8.000 MU 169 exch SU exch sin 8.000 MU 70 exch SU L TGSM 1 W
S GR GS TGSM NP 169 70 8.000 3.000 -52 -85 TGAT 1 SG CP F 0 SG NP 169 70
8.000 3.000 -52 -85 TGAT CP F GR 0 SG GS NP 365 144 M -80 -30 atan DU cos
8.000 MU 335 exch SU exch sin 8.000 MU 64 exch SU L TGSM 1 W S GR GS TGSM NP
335 64 8.000 3.000 -30 -80 TGAT 1 SG CP F 0 SG NP 335 64 8.000 3.000 -30 -80
TGAT CP F GR 0 SG GS NP 464 196 M -131 -110 atan DU cos 8.000 MU 354 exch SU
exch sin 8.000 MU 65 exch SU L TGSM 1 W S GR GS TGSM NP 354 65 8.000 3.000
-110 -131 TGAT 1 SG CP F 0 SG NP 354 65 8.000 3.000 -110 -131 TGAT CP F GR 0
SG GS NP 511 143 M -80 -6 atan DU cos 8.000 MU 505 exch SU exch sin 8.000 MU
63 exch SU L TGSM 1 W S GR GS TGSM NP 505 63 8.000 3.000 -6 -80 TGAT 1 SG CP
F 0 SG NP 505 63 8.000 3.000 -6 -80 TGAT CP F GR 0 SG GS NP 308 172 M -113
-126 atan DU cos 8.000 MU 182 exch SU exch sin 8.000 MU 59 exch SU L TGSM 1 W
S GR GS TGSM NP 182 59 8.000 3.000 -126 -113 TGAT 1 SG CP F 0 SG NP 182 59
8.000 3.000 -126 -113 TGAT CP F GR 0 SG GS 509 195 M GS 0 SG /Courier FF [17
0 0 -17 0 0] MS (Pair Pair) SH GR GR 0 SG GS [2 2] 0 SD NP 563 182 M -59 -30
atan DU cos 8.000 MU 533 exch SU exch sin 8.000 MU 123 exch SU L TGSM 1 W S
[] 0 SD GR GS TGSM NP 533 123 8.000 3.000 -30 -59 TGAT 1 SG CP F 0 SG NP 533
123 8.000 3.000 -30 -59 TGAT CP F GR 0 SG GS NP 541 151 M 564 165 L TGSM 3 W
S 1 W GR 0 SG GS NP 561 152 M 539 164 L TGSM 3 W S 1 W GR 0 SG GS 328 164 M
GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 154 174 M GS 0 SG
/Symbol FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 309 308 M GS 0 SG /Symbol
FF [17 0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 337 307 M GS 0 SG /Symbol FF [17
0 0 -17 0 0] MS (l) SH GR GR 0 SG GS 75 344 M GS 0 SG /Symbol FF [17 0 0 -17
0 0] MS (l) SH GR GR 0 SG GS 140 305 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS
(l) SH GR GR 0 SG GS 251 360 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (l) SH
GR GR 0 SG GS 236 219 M GS 0 SG /Symbol FF [17 0 0 -17 0 0] MS (") SH GR GR
GR tgifsavedpage restore end showpage

%%EndDocument
 @endspecial 450 4621 a(Note)j(that)g(pr)o(oper)f(types)h(\(type)f
(expr)o(essions)h(of)g(kind)g F4(*)p Gd(\))f(can)h(include)g(type)f
(operators)h(of)450 4721 y(higher)d(kinds)h(as)e(subphrases,)g(as)h(in)
g F4(\()p Gb(\025)p F4(X:)-25 b(:*.X)p FV(!)m F4(X\)Nat)19
b Gd(or)i F4(Pair)42 b(Nat)g(Bool)o Gd(.)575 4820 y(Also,)29
b(note)e(the)h(dif)o(fer)o(ent)d(r)o(oles)i(in)h(this)g(diagram)f(of)g
(the)h(pr)o(oper)e(type)i F5(8)p F4(X.X)p FV(!)m F4(X)f
Gd(and)450 4920 y(the)19 b(type)g(operator)g Gb(\025)p
F4(X.X)p FV(!)o F4(X)o Gd(.)25 b(The)19 b(former)g(classi\002es)h
(terms)f(like)g Gb(\025)p F4(X.)p Gb(\025)p F4(x:X.x)m
Gd(\227it)h(is)f(a)g(type)p eop
%%Page: 238 239
238 238 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(238)450 683 y(whose)25 b F7(elements)f Gd(ar)o(e)f(functions)i(fr)
o(om)e(types)h(to)g(terms\227while)h(the)f(latter)f(is)i
F7(itself)f Gd(a)f(func-)450 783 y(tion)f(fr)o(om)e(types)h(to)g
(types,)g(and)f(does)h(not)g(have)f(any)h(terms)g(as)f
(\223elements.\224)575 882 y(A)25 b(natural)h(question)i(to)f(ask)f(at)
g(this)h(point)g(is)g(\223Why)f(stop)h(at)f(thr)o(ee)g(levels)g(of)h
(expr)o(es-)450 982 y(sions?\224)f(That)19 b(is,)g(why)h(couldn't)g(we)
f(go)g(on)h(to)f(intr)o(oduce)g(functions)h(fr)o(om)f(kinds)g(to)h
(kinds,)450 1082 y(application)28 b(at)g(the)h(level)f(of)h(kinds,)i
(etc.,)e(and)f(add)g(a)g(fourth)g(level)h(to)g(classify)f(kind)h(ex-)
450 1181 y(pr)o(essions)19 b(accor)o(ding)g(to)g(their)g
(functionality?)26 b(In)20 b(fact,)e(why)i(stop)f(ther)o(e?)24
b(W)-8 b(e)20 b(could)f(go)g(on)450 1281 y(adding)g(levels)f
(inde\002nitely!)26 b(The)19 b(answer)g(is)g(that)g(we)g(could)g(very)g
(well)g(do)g(this,)h(and)f(such)450 1380 y(systems)29
b(\(without)g(subtyping\))g(have)f(been)g(studied)g(under)g(the)g
(heading)g(of)g Ge(pure)g(type)450 1480 y(systems)21
b Gd([Bar92a)m(,)h(Bar92b)n(,)h(JMP94)n(,)f(MP93)o(,)g(Pol94)o(,)h
(etc.])30 b(and)22 b(used)g(in)h(computer)f(science)450
1580 y(for)d(applications)g(such)g(as)g(theor)o(em)g(pr)o(oving.)25
b(For)19 b(purposes)h(of)f(this)g(book,)h(though,)h(ther)o(e)450
1679 y(is)g(no)h(need)e(to)h(go)g(beyond)g(thr)o(ee)f(levels.)450
1965 y Gj(26.2)119 b(De\002nitions)450 2154 y Gd(W)-8
b(e)25 b(now)h(de\002ne)e(a)h(cor)o(e)f(calculus)g(with)i(type)f
(operators.)37 b(At)25 b(the)g(term)f(level,)i(it)f(includes)450
2254 y(just)17 b(the)e(variables,)h(abstraction,)g(and)f(application)h
(of)g(the)g(simply)g(typed)g(lambda-calculus;)450 2353
y(the)k(type)g(level)f(includes)i(the)f(usual)f(arr)o(ow)g(types)h(and)
g(type)g(variables,)e(plus)j(operator)e(ab-)450 2453
y(straction)32 b(and)f(application.)58 b(T)-8 b(o)33
b(formalize)e(this)h(system,)j(we)d(need)f(to)h(add)f(thr)o(ee)g(new)
450 2553 y(things)22 b(to)f(the)g(systems)h(we)e(have)h(seen)g(befor)o
(e.)575 2652 y(First,)39 b(we)c(need)g(a)g(collection)h(of)f(r)o(ules)h
(of)f Ge(kinding)f Gd(\(or)-6 b(,)38 b(mor)o(e)d(pedantically)-9
b(,)38 b Ge(type)450 2752 y(well-formedness)p Gd(\),)22
b(which)j(specify)e(how)i(type)f(expr)o(essions)h(can)e(be)h(combined)h
(to)f(yield)450 2852 y(new)h(type)f(expr)o(essions.)37
b(In)24 b(ef)o(fect,)g(these)g(r)o(ules)h(constitute)g(a)f(copy)h(of)f
(the)h(simply)g(typed)450 2951 y(lambda-calculus,)j(\223one)g(level)g
(up.\224)47 b(W)-8 b(e)28 b(write)g Gb(\000)36 b F5(`)g
F4(T)g FF(:)-25 b(:)37 b F4(K)28 b Gd(for)g(\223type)f
F4(T)h Gd(has)g(kind)g F4(K)g Gd(in)450 3051 y(context)21
b Gb(\000)6 b Gd(.\224)575 3150 y(Second,)17 b(whenever)h(a)f(type)g
F4(T)g Gd(appears)f(in)j(a)e(term)g(\(as)g(in)h Gb(\025)p
F4(x:T.t)n Gd(\),)g(we)f(must)h(check)g(that)450 3250
y F4(T)25 b Gd(is)h(well)f(formed.)39 b(This)26 b(involves)g(adding)f
(a)g(new)g(pr)o(emise)g(to)h(the)f(old)j(T)o(-)t(A)t
F6(B)t(S)f Gd(r)o(ule)e(that)450 3350 y(checks)f Gb(\000)j
F5(`)h F4(T)g FF(:)-25 b(:)29 b F4(*)o Gd(.)34 b(Note)23
b(that)h F4(T)f Gd(must)h(have)f(exactly)f(kind)i F4(*)p
Gd(\227i.e.,)f(it)h(must)g(be)f(a)g(pr)o(oper)450 3449
y(type\227since)e(it)g(is)g(being)g(used)g(to)g(describe)f(the)h
(values)f(that)h F4(x)f Gd(may)h(range)f(over)-6 b(.)575
3549 y(Thir)o(d,)23 b(note)h(that,)h(by)e(intr)o(oducing)i(abstraction)
e(and)h(application)f(in)h(types,)h(we)e(have)450 3649
y(given)c(ourselves)g(the)g(ability)g(to)h(write)f(dif)o(fer)o(ent)d
(\223names\224)j(for)f(the)h(same)g(type.)25 b(For)19
b(exam-)450 3748 y(ple,)h(if)h F4(Id)h FY(=)h Gb(\025)p
F4(X.X)o Gd(,)d(then)699 3916 y F4(Nat)42 b FV(!)i F4(Bool)699
4016 y(Nat)e FV(!)i F4(Id)f(Bool)699 4115 y(Id)g(Nat)f
FV(!)i F4(Id)f(Bool)699 4215 y(Id)g(Nat)f FV(!)i F4(Bool)699
4315 y(Id)f(\(Id)f(\(Id)h(Nat\)\))e FV(!)j F4(Bool)450
4480 y Gd(all)21 b(mean)f(the)h(same)g(thing,)g(in)g(the)g(sense)g
(that)g(they)g(have)f(the)h(same)g(terms)g(as)f(members.)p
eop
%%Page: 239 240
239 239 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(239)450 683 y Ge(T)-7 b(ype)20 b(operators)g(and)g(kinding)1597
b FV(!)35 b($)3335 683 y
 gsave currentpoint translate 0 124518 7800 div 904397 7800 div 364953
-7800 div box .9 setgray fill grestore
 3335 683 a 16 w FV(\))p 409
765 9 36 v 418 735 3000 6 v 3418 735 38 6 v 3455 765
9 36 v 450 854 a F7(Syntax)592 985 y F4(t)61 b Gd(::=)1821
b F7(terms)852 1085 y F4(x)1774 b F7(variable)852 1185
y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)852
1284 y F4(t)43 b(t)1687 b F7(application)592 1483 y F4(v)61
b Gd(::=)1821 b F7(values)852 1583 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)21 b(value)592 1782 y F4(T)61 b Gd(::=)1821
b F7(types)852 1882 y F4(X)1774 b F7(type)20 b(variable)852
1982 y
 gsave currentpoint translate 0 124518 7800 div 2471855 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 1982 a 15 w Gb(\025)p F4(X:)-25 b(:K.T)1519
b F7(operator)20 b(abstraction)852 2081 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 2081 a
15 w F4(T)44 b(T)1671 b F7(operator)20 b(application)852
2181 y F4(T)p FV(!)o F4(T)1648 b F7(type)20 b(of)g(functions)590
2380 y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 2480
y F5(;)1776 b F7(empty)19 b(context)852 2579 y Gb(\000)5
b(;)17 b F4(x:T)1596 b F7(term)21 b(variable)g(binding)852
2679 y Gb(\000)5 b(;)17 b F4(X)986 2679 y
 gsave currentpoint translate 0 124518 7800 div 1084611 7800 div 525016
-7800 div box .9 setgray fill grestore
 986 2679 a
16 w F4(:)-25 b(:K)1561 b F7(type)20 b(variable)h(binding)560
2878 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 560 2878 a 16 w F4(K)77 b Gd(::=)1821 b F7(kinds)852
2978 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 465851
-7800 div box .9 setgray fill grestore
 852 2978 a 15 w F4(*)1759 b F7(kind)20 b(of)h(pr)o(oper)f(types)
852 3077 y
 gsave currentpoint translate 0 124518 7800 div 1592519 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3077 a 15 w F4(K)p FV(\))p F4(K)1632 b
F7(kind)20 b(of)h(operators)450 3292 y(Evaluation)p 3096
3205 355 4 v 3096 3317 4 113 v 2304 w F4(t)i F5(\000)-15
b FV(!)23 b F4(t)3398 3262 y FX(0)p 3447 3317 V 3096
3320 355 4 v 1155 3407 a F4(\()p Gb(\025)p F4(x)o(:T)1374
3419 y F1(11)1451 3407 y F4(.t)1538 3419 y F1(12)1615
3407 y F4(\))43 b(v)1746 3419 y F1(2)1810 3407 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2209 3419
y F1(2)2250 3407 y F0(g)p F4(t)2320 3419 y F1(12)3113
3408 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1602
3546 y F4(t)1645 3558 y F1(1)1709 3546 y F5(\000)-14
b FV(!)23 b F4(t)1917 3516 y FX(0)1909 3569 y F1(1)p
1474 3589 604 4 v 1474 3668 a F4(t)1518 3680 y F1(1)1602
3668 y F4(t)1645 3680 y F1(2)1709 3668 y F5(\000)-14
b FV(!)23 b F4(t)1917 3639 y FX(0)1909 3692 y F1(1)1994
3668 y F4(t)2037 3680 y F1(2)3105 3608 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1602 3808 y F4(t)1645 3820 y F1(2)1709
3808 y F5(\000)-14 b FV(!)23 b F4(t)1917 3778 y FX(0)1909
3831 y F1(2)p 1474 3851 V 1474 3930 a F4(v)1518 3942
y F1(1)1602 3930 y F4(t)1645 3942 y F1(2)1709 3930 y
F5(\000)-14 b FV(!)23 b F4(v)1909 3942 y F1(1)1994 3930
y F4(t)2045 3900 y FX(0)2037 3954 y F1(2)3105 3870 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))450 4086 y F7(T)-8
b(ype)20 b(equivalence)p 3036 4003 415 4 v 3036 4111
4 108 v 2050 w Gb(\000)j F5(`)f F4(S)h FV($)g F4(T)p
3447 4111 V 3036 4114 415 4 v 1595 4211 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1595 4211 a
16 w Gb(\000)g F5(`)16 b F4(T)22 b FF(:)-25 b(:)24 b
F4(K)p 1505 4255 543 4 v 1505 4338 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1505 4338 a 16 w
Gb(\000)e F5(`)16 b F4(T)23 b FV($)g F4(T)1871 4338 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore

1871 4338 a 16 w FF(:)-25 b(:)24 b F4(K)3108 4274 y Gd(\()r(Q)t(-)t(R)t
F6(E)t(FL)q Gd(\))1505 4481 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1505 4481 a 16 w Gb(\000)e
F5(`)16 b F4(T)23 b FV($)g F4(S)1871 4481 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1871 4481
a 16 w FF(:)-25 b(:)24 b F4(K)p 1505 4524 543 4 v 1505
4607 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1505 4607 a 16 w Gb(\000)e F5(`)16 b F4(S)23 b
FV($)g F4(T)1871 4607 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1871 4607 a 16 w FF(:)-25 b(:)24
b F4(K)3064 4543 y Gd(\()r(Q)t(-)t(S)t F6(Y)t(M)t(M)q
Gd(\))1151 4750 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1151 4750 a 15 w Gb(\000)f F5(`)16
b F4(S)22 b FV($)h F4(U)1517 4750 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1517 4750 a 16 w
FF(:)-25 b(:)24 b F4(K)1859 4750 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 4750 a 16 w Gb(\000)f
F5(`)15 b F4(U)23 b FV($)g F4(T)2225 4750 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 2225 4750
a 16 w FF(:)-25 b(:)24 b F4(K)p 1151 4793 1251 4 v 1505
4877 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1505 4877 a 16 w Gb(\000)e F5(`)16 b F4(S)23 b
FV($)g F4(T)1871 4877 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1871 4877 a 16 w FF(:)-25 b(:)24
b F4(K)3036 4812 y Gd(\()r(Q)t(-)t(T)t F6(R)t(A)t(N)t(S)r
Gd(\))p eop
%%Page: 240 241
240 240 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(240)944 749 y
 gsave currentpoint translate 0 851966 7800 div 13132747 7800 div 1179646
-7800 div box .9 setgray fill grestore
 944 749 a 1069 693 a Gb(\000)5 b(;)17
b F4(X:)-25 b(:K)1309 705 y F1(11)1409 693 y F5(`)23
b F4(T)1526 705 y F1(12)1626 693 y FF(:)-25 b(:)24 b
F4(K)1770 705 y F1(12)2013 693 y Gb(\000)f F5(`)g F4(T)2199
705 y F1(2)2262 693 y FF(:)-25 b(:)24 b F4(K)2406 705
y F1(11)p 978 730 1596 4 v 978 803 a Gb(\000)f F5(`)g
F4(\()p Gb(\025)p F4(X:)-25 b(:K)1358 815 y F1(11)1435
803 y F4(.T)1522 815 y F1(12)1599 803 y F4(\))43 b(T)1729
815 y F1(2)1793 803 y FV($)23 b F0(f)p F4(X)f F5(7)p
FV(!)h F4(T)2142 815 y F1(2)2182 803 y F0(g)p F4(T)2253
815 y F1(12)2353 803 y FF(:)-25 b(:)23 b F4(K)2497 815
y F1(12)3098 749 y Gd(\()r(Q)t(-)t(B)t F6(E)t(T)o(A)q
Gd(\))1099 1146 y
 gsave currentpoint translate 0 851966 7800 div 10692406 7800 div 1966078
-7800 div box .9 setgray fill grestore
 1099 1146 a 1133 991 a Gb(\000)g F5(`)f
F4(S)h FF(:)-25 b(:)24 b F4(K)1485 1003 y F1(1)1526 991
y FV(\))p F4(K)1652 1003 y F1(2)1859 991 y Gb(\000)f
F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)2212 1003 y F1(1)2252
991 y FV(\))p F4(K)2379 1003 y F1(2)1288 1090 y Gb(\000)5
b(;)18 b F4(X:)-25 b(:K)1528 1102 y F1(1)1592 1090 y
F5(`)23 b F4(S)43 b(X)22 b FV($)h F4(T)44 b(X)22 b FF(:)-25
b(:)24 b F4(K)2224 1102 y F1(2)p 1133 1127 1287 4 v 1423
1199 a Gb(\000)e F5(`)h F4(S)g FV($)g F4(T)g FF(:)g F4(K)1922
1211 y F1(1)1962 1199 y FV(\))p F4(K)2089 1211 y F1(2)3145
1146 y Gd(\()r(Q)t(-)t(E)t F6(X)t(T)r Gd(\))1056 1443
y
 gsave currentpoint translate 0 851966 7800 div 11359630 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1056 1443 a 1334 1387 a Gb(\000)6 b(;)17 b F4(X:)-25
b(:K)1575 1399 y F1(1)1638 1387 y F5(`)23 b F4(S)1756
1399 y F1(2)1819 1387 y FV($)g F4(T)1969 1399 y F1(2)2033
1387 y FF(:)-25 b(:)23 b F4(K)2177 1399 y F1(2)p 1090
1424 1371 4 v 1090 1496 a Gb(\000)g F5(`)g Gb(\025)p
F4(X:)-25 b(:K)1427 1508 y F1(1)1467 1496 y F4(.S)1554
1508 y F1(2)1618 1496 y FV($)23 b Gb(\025)p F4(X:)-25
b(:K)1918 1508 y F1(1)1959 1496 y F4(.T)2046 1508 y F1(2)2110
1496 y FF(:)g(:)23 b F4(K)2254 1508 y F1(1)2294 1496
y FV(\))p F4(K)2421 1508 y F1(2)3092 1443 y Gd(\()r(Q)t(-)t(T)n(A)t
F6(B)t(S)q Gd(\))874 1740 y
 gsave currentpoint translate 0 851966 7800 div 14240292 7800 div 1179646
-7800 div box .9 setgray fill grestore
 874 1740 a 908 1684 a Gb(\000)g
F5(`)g F4(S)1093 1696 y F1(1)1157 1684 y FV($)g F4(T)1306
1696 y F1(1)1370 1684 y FF(:)-25 b(:)24 b F4(K)1514 1696
y F1(11)1591 1684 y FV(\))p F4(K)1718 1696 y F1(12)1961
1684 y Gb(\000)f F5(`)f F4(S)2146 1696 y F1(2)2209 1684
y FV($)i F4(T)2359 1696 y F1(2)2423 1684 y FF(:)-25 b(:)23
b F4(K)2567 1696 y F1(11)p 908 1720 1736 4 v 1307 1793
a Gb(\000)f F5(`)h F4(S)1492 1805 y F1(1)1576 1793 y
F4(S)1620 1805 y F1(2)1683 1793 y FV($)g F4(T)1833 1805
y F1(1)1917 1793 y F4(S)1960 1805 y F1(2)2024 1793 y
FF(:)-25 b(:)24 b F4(K)2168 1805 y F1(12)3136 1740 y
Gd(\()r(Q)t(-)t(A)t F6(P)t(P)r Gd(\))1070 1960 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1070
1960 a 15 w Gb(\000)f F5(`)16 b F4(S)1263 1972 y F1(1)1327
1960 y FV($)23 b F4(T)1477 1972 y F1(1)1517 1960 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 1517
1960 a 16 w FF(:)-25 b(:)24 b F4(*)1859 1960 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1859 1960
a 16 w Gb(\000)f F5(`)15 b F4(S)2053 1972 y F1(2)2116
1960 y FV($)23 b F4(T)2266 1972 y F1(2)2306 1960 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2306
1960 a 16 w FF(:)-25 b(:)24 b F4(*)p 1070 2004 1413 4
v 1297 2087 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1297 2087 a 16 w Gb(\000)f F5(`)15 b F4(S)1491
2099 y F1(1)1531 2087 y FV(!)p F4(S)1658 2099 y F1(2)1722
2087 y FV($)23 b F4(T)1871 2099 y F1(1)1912 2087 y FV(!)p
F4(T)2038 2099 y F1(2)2079 2087 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2079 2087 a 16 w FF(:)-25
b(:)23 b F4(*)3001 2023 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(\))450 2242 y F7(Kinding)p 3041 2160 410 4 v 3041
2267 4 108 v 2342 w Gb(\000)g F5(`)g F4(T)f FF(:)-25
b(:)24 b F4(K)p 3447 2267 V 3041 2270 410 4 v 1566 2444
a
 gsave currentpoint translate 0 851966 7800 div 3320582 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1566 2444 a 1628 2388 a F4(X:)-25 b(:K)22 b F5(2)h
Gb(\000)p 1600 2425 353 4 v 1600 2497 a(\000)f F5(`)h
F4(X)g FF(:)-25 b(:)24 b F4(K)3083 2444 y Gd(\()r(K)t(-)t(T)t(V)l
F6(A)t(R)r Gd(\))1302 2740 y
 gsave currentpoint translate 0 851966 7800 div 7477834 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1302 2740 a 1441 2684 a
Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1681 2696 y F1(1)1745
2684 y F5(`)23 b F4(T)1862 2696 y F1(2)1926 2684 y FF(:)-25
b(:)24 b F4(K)2070 2696 y F1(2)p 1336 2721 880 4 v 1336
2794 a Gb(\000)f F5(`)g Gb(\025)p F4(X:)-25 b(:K)1672
2806 y F1(1)1713 2794 y F4(.T)1800 2806 y F1(2)1864 2794
y FF(:)g(:)23 b F4(K)2008 2806 y F1(1)2048 2794 y FV(\))p
F4(K)2175 2806 y F1(2)3097 2740 y Gd(\()r(K)t(-)t(T)n(A)t
F6(B)t(S)q Gd(\))1087 3037 y
 gsave currentpoint translate 0 851966 7800 div 10873752 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1087 3037 a 1121 2981 a
Gb(\000)g F5(`)g F4(T)1306 2993 y F1(1)1370 2981 y FF(:)-25
b(:)24 b F4(K)1514 2993 y F1(11)1591 2981 y FV(\))p F4(K)1718
2993 y F1(12)1961 2981 y Gb(\000)f F5(`)f F4(T)2146 2993
y F1(2)2209 2981 y FF(:)-25 b(:)24 b F4(K)2354 2993 y
F1(11)p 1121 3018 1310 4 v 1477 3091 a Gb(\000)f F5(`)g
F4(T)1662 3103 y F1(1)1746 3091 y F4(T)1790 3103 y F1(2)1854
3091 y FF(:)-25 b(:)23 b F4(K)1998 3103 y F1(12)3092
3037 y Gd(\()r(K)t(-)t(T)n(A)t F6(P)t(P)r Gd(\))1266
3334 y
 gsave currentpoint translate 0 851966 7800 div 8054026 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1266 3334 a 1300 3278 a Gb(\000)g F5(`)f F4(T)1485
3290 y F1(1)1549 3278 y FF(:)-25 b(:)23 b F4(*)166 b
Gb(\000)23 b F5(`)g F4(T)2044 3290 y F1(2)2108 3278 y
FF(:)-25 b(:)23 b F4(*)p 1300 3315 953 4 v 1496 3388
a Gb(\000)g F5(`)f F4(T)1681 3400 y F1(1)1722 3388 y
FV(!)p F4(T)1848 3400 y F1(2)1912 3388 y FF(:)-25 b(:)23
b F4(*)3006 3334 y Gd(\()r(K)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(\))450 3567 y F7(T)-8 b(yping)p 3067 3485 383 4 v
3067 3592 4 108 v 2408 w Gb(\000)22 b F5(`)h F4(t)g FF(:)g
F4(T)p 3447 3592 V 3067 3595 383 4 v 1259 3693 a Gb(\000)g
F5(`)f F4(t)h FF(:)g F4(S)1751 3693 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1751 3693 a 16
w Gb(\000)g F5(`)15 b F4(S)23 b FV($)g F4(T)2117 3693
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2117 3693 a 16 w FF(:)-25 b(:)24 b F4(*)p 1259 3736
1035 4 v 1613 3816 a Gb(\000)f F5(`)f F4(t)h FF(:)g F4(T)3201
3755 y Gd(\()r(T)o(-)t(E)t F6(Q)r Gd(\))1637 3955 y F4(x:T)f
F5(2)i Gb(\000)p 1613 3998 327 4 v 1613 4078 a(\000)f
F5(`)f F4(x)h FF(:)g F4(T)3152 4017 y Gd(\()r(T)o(-)t(V)l
F6(A)t(R)r Gd(\))1168 4220 y
 gsave currentpoint translate 0 222821 7800 div 3351992 7800 div 579629
-7800 div box .9 setgray fill grestore
 1168 4220 a 16 w Gb(\000)g
F5(`)g F4(T)1369 4232 y F1(1)1433 4220 y FF(:)-25 b(:)24
b F4(*)181 b Gb(\000)6 b(;)17 b F4(x:T)1981 4232 y F1(1)2044
4220 y F5(`)23 b F4(t)2162 4232 y F1(2)2225 4220 y FF(:)g
F4(T)2343 4232 y F1(2)p 1168 4264 1216 4 v 1359 4343
a Gb(\000)g F5(`)f Gb(\025)p F4(x:T)1676 4355 y F1(1)1717
4343 y F4(.t)1804 4355 y F1(2)1867 4343 y FF(:)i F4(T)1985
4355 y F1(1)2026 4343 y FV(!)p F4(T)2152 4355 y F1(2)3160
4283 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))1148 4482
y Gb(\000)e F5(`)h F4(t)1333 4494 y F1(1)1396 4482 y
FF(:)h F4(T)1514 4494 y F1(11)1591 4482 y FV(!)p F4(T)1718
4494 y F1(12)1961 4482 y Gb(\000)f F5(`)f F4(t)2146 4494
y F1(2)2209 4482 y FF(:)i F4(T)2327 4494 y F1(11)p 1148
4526 1257 4 v 1490 4605 a Gb(\000)f F5(`)g F4(t)1676
4617 y F1(1)1760 4605 y F4(t)1803 4617 y F1(2)1867 4605
y FF(:)g F4(T)1985 4617 y F1(12)3155 4545 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))450 4736 y F7(Abbr)o(eviations)1069
4869 y
 gsave currentpoint translate 0 530384 7800 div 11159787 7800 div 858065
-7800 div box .9 setgray fill grestore
 1069 4869 a 1093 4882 a Gd(unannotated)e(binder)f(for)h
F4(X)2120 4835 y FK(def)2130 4882 y FY(=)116 b F4(X:)-25
b(:*)p eop
%%Page: 241 242
241 241 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)513
b Gd(2)t(6)t(.)29 b(T)t F6(Y)t(P)t(E)c Gd(O)t F6(P)t(E)t(R)t(A)o(T)s(O)
t(R)t(S)h(A)t(N)t(D)f Gd(K)t F6(I)t(N)t(D)t(I)t(N)t(G)517
b Gd(241)p 409 755 9 36 v 418 755 3000 6 v 3418 755 38
6 v 3455 755 9 36 v eop
%%Page: 242 243
242 242 bop 450 1306 a F3(Chapter)44 b(27)450 1721 y
Gk(Higher)l(-Order)53 b(Polymorphism)450 2177 y F7(Just)21
b(a)f(sketch.)575 2277 y(I'm)j(not)h(certain)g(whether)g(it')-5
b(s)24 b(pr)o(oductive)e(to)i(develop)f(metatheory)g(in)h(detail)g(for)
g(this)g(part)f(of)450 2376 y(the)h(book,)h(or)g(whether)f(to)g(r)o
(efer)i(inter)o(ested)f(r)o(eaders)g(into)f(the)g(literatur)o(e.)37
b(For)25 b(F-omega)f(itself,)i(the)450 2476 y(pr)o(oofs)18
b(ar)o(e)h(not)g(all)f(that)g(hard)g(or)h(tedious,)g(so)g(it)f(may)g
(be)i(illuminating)e(to)h(go)f(thr)o(ough)f(at)h(least)h(some)450
2575 y(of)j(them.)28 b(For)23 b(later)f(systems)g(like)g(F-omega-sub,)g
(it)f(becomes)i(incr)o(easingly)e(heavy)m(.)28 b(\(One)22
b(purpose)450 2675 y(of)i(putting)g(some)g(of)h(that)e(in)i(would)f(pr)
o(obably)g(be)h(to)f(give)g(students)h(the)f(impr)o(ession)g(that)f
(it')-5 b(s)25 b(not)450 2775 y(that)19 b(easy)m(,)i(in)g(case)g(they)f
(thought)e(type)i(systems)h(was)f(a)h(trivial)f(topic!\))575
2874 y Gd(When)k(type)f(operators)h(ar)o(e)e(added)h(to)h(System)g(F,)f
(we)h(can)g(abstract)e(over)i(types)g(of)g(ar)o(-)450
2974 y(bitrary)g(kinds.)37 b(This)25 b(substantially)g(incr)o(eases)e
(the)i(power)g(of)f(the)h(system.)37 b(In)25 b(particular)-6
b(,)450 3074 y(higher)o(-or)o(der)26 b(universal)i(polymorphism)h
(\(i.e.,)f(abstraction)g(over)f(types)h(of)g(kinds)g(other)450
3173 y(than)k F4(*)p Gd(\))g(will)g(be)g(used)g(in)g(Chapter)g(31)f(to)
h(complete)h(our)f(model)g(of)g(pur)o(ely)g(functional)450
3273 y(object-oriented)24 b(pr)o(ogramming.)35 b(Higher)o(-or)o(der)22
b(existential)i(types)f(have)h(mor)o(e)f(practical)450
3373 y(uses,)c(for)g(building)h(abstract)e(data)g(types)h(whose)h
(hidden)f(r)o(epr)o(esentation)f(type)h(is)h(actually)450
3472 y(an)h(operator)f(like)h F4(List)e Gd(or)i F4(Pair)n
Gd(.)450 3758 y Gj(27.1)119 b(Higher)n(-Order)27 b(Universal)i(T)-11
b(ypes)450 3947 y Gd(The)20 b(higher)o(-or)o(der)e(extension)i(of)f
(the)h(polymorphic)h(lambda-calculus)d(is)i(formed)f(by)h(sim-)450
4047 y(ply)h(allowing)h F4(X:)-25 b(:K)19 b Gd(in)i(place)f(of)h(just)g
F4(X)g Gd(in)g(the)g(original)g(de\002nition)h(of)f(System)g(F)-8
b(.)450 4246 y(For)21 b(example,)f(her)o(e)g(is)h(a)f(ridiculously)i
(polymorphic)g(identity)f(function)616 4404 y FT(wayPolyId)41
b(=)f FM(\025)p FT(F:)-25 b(:*)p FO(\))p FT(*.)40 b FM(\025)p
FT(X.)f FM(\025)p FT(x:F)h(X.)g(x;)529 4527 y FS(I)616
4537 y FT(wayPolyId)h(:)f Fv(8)p FT(F:)-25 b(:*)p FO(\))p
FT(*.)40 b Fv(8)p FT(X.)f(F)h(X)f FO(!)g FT(F)h(X)450
4720 y Gd(and)20 b(her)o(e)g(is)h(a)g(typical)f(use:)616
4878 y FT(wayPolyId)41 b([)p FM(\025)p FT(Y.{a:Y}])g([Bool])g
({a=true};)1888 5169 y Gd(242)p eop
%%Page: 243 244
243 243 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(243)450 683 y Ge(27.1.1)18 b(Exercise:)39 b
Gd(W)-6 b(rite)16 b(and)f(typecheck)h(a)f(ridiculously)i(polymorphic)g
F4(applyTwice)11 b Gd(func-)450 783 y(tion,)21 b(of)g(type)g
F5(8)p F4(F:)-25 b(:*)p FV(\))m F4(*.)43 b F5(8)p F4(X.)f(\(\(F)g(X\))h
FV(!)h F4(\(F)e(X\)\))h FV(!)g F4(\(F)g(X\))o Gd(.)792
b FZ(2)575 965 y Gd(W)-8 b(e)20 b(will)h(see)f(some)g(mor)o(e)g(inter)o
(esting)h(applications)f(of)g(higher)o(-or)o(der)f(universal)h(types)
450 1065 y(in)h(later)f(chapters.)450 1231 y(F)507 1201
y F1(!)592 1231 y Ge(:)25 b(Higher)o(-order)20 b(polymorphic)f
(lambda-calculus)629 b(System)19 b(F)3264 1231 y
 gsave currentpoint translate 0 124518 7800 div 646180 7800 div 453834
-7800 div box .9 setgray fill grestore
 3264
1231 a 16 w Ge(+)37 b FV(\))p 409 1313 9 36 v 418 1283
3000 6 v 3418 1283 38 6 v 3455 1313 9 36 v 450 1402 a
F7(New)21 b(syntactic)e(forms)592 1533 y F4(t)61 b Gd(::=)i(...)1695
b F7(terms)852 1633 y Gb(\025)p F4(X)940 1633 y
 gsave currentpoint translate 0 124518 7800 div 1084611 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 1633
a 16 w F4(:)-25 b(:K)15 b(.t)1504 b F7(type)20 b(abstraction)592
1832 y F4(v)61 b Gd(::=)i(...)1695 b F7(values)852 1932
y Gb(\025)p F4(X)940 1932 y
 gsave currentpoint translate 0 124518 7800 div 1152527 7800 div 577638
-7800 div box .9 setgray fill grestore
 940 1932 a 16 w FY(::)23
b Gb(K)15 b F4(.t)1496 b F7(type)20 b(abstraction)g(value)592
2131 y F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 2231
y F5(8)p F4(X)941 2231 y
 gsave currentpoint translate 0 124518 7800 div 1084611 7800 div 525016
-7800 div box .9 setgray fill grestore
 941 2231 a 16 w F4(:)-25 b(:K)15
b(.T)1503 b F7(universal)21 b(type)450 2445 y(New)g(evaluation)f(rules)
p 3096 2358 355 4 v 3096 2470 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 2415 y FX(0)p 3447 2470 V 3096
2473 355 4 v 1086 2560 a F4(\()p Gb(\025)p F4(X)1218
2560 y
 gsave currentpoint translate 0 222821 7800 div 1691379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1218 2560 a 16 w F4(:)-25 b(:K)1340 2572 y F1(11)1433
2560 y F4(.t)1520 2572 y F1(12)1597 2560 y F4(\))43 b([T)1771
2572 y F1(2)1812 2560 y F4(])22 b F5(\000)-14 b FV(!)23
b F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2278 2572 y F1(2)2318
2560 y F0(g)p F4(t)2389 2572 y F1(12)3067 2561 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(2\))450 2715 y F7(New)e(type)e(equivalence)j(rules)p
3036 2633 415 4 v 3036 2740 4 108 v 1701 w Gb(\000)h
F5(`)f F4(S)h FV($)g F4(T)p 3447 2740 V 3036 2743 415
4 v 1123 2917 a
 gsave currentpoint translate 0 851966 7800 div 10303798 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1123 2917 a 1335 2861 a Gb(\000)5 b(;)18
b F4(X)1469 2861 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1469 2861 a 16 w F4(:)-25 b(:K)1591
2873 y F1(1)1670 2861 y F5(`)23 b F4(S)1788 2873 y F1(2)1851
2861 y FV($)g F4(T)2001 2873 y F1(2)2041 2861 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2041
2861 a 16 w FF(:)-25 b(:)24 b F4(*)p 1157 2898 1238 4
v 1157 2970 a Gb(\000)f F5(`)g(8)p F4(X)1389 2970 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1389
2970 a 1404 2971 a F4(:)-25 b(:K)1510 2983 y F1(1)1567
2970 y F4(.S)1654 2982 y F1(2)1717 2970 y FV($)23 b F5(8)p
F4(X)1913 2970 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1913 2970 a 1929 2971 a F4(:)-25 b(:K)2035
2983 y F1(1)2091 2970 y F4(.T)2178 2982 y F1(2)2219 2970
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2219 2970 a 15 w FF(:)g(:)24 b F4(*)3135 2917 y Gd(\()r(Q)t(-)t(A)t
F6(L)t(L)q Gd(\))450 3150 y F7(New)d(kinding)f(rules)p
3041 3067 410 4 v 3041 3175 4 108 v 1997 w Gb(\000)j
F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)p 3447 3175 V 3041
3178 410 4 v 1406 3351 a
 gsave currentpoint translate 0 851966 7800 div 5847905 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1406 3351 a 1461 3295 a Gb(\000)6
b(;)17 b F4(X:)-25 b(:K)1702 3307 y F1(1)1765 3295 y
F5(`)23 b F4(T)1883 3307 y F1(2)1946 3295 y FF(:)-25
b(:)24 b F4(*)p 1440 3332 673 4 v 1440 3405 a Gb(\000)e
F5(`)h(8)p F4(X:)-25 b(:K)1777 3417 y F1(1)1817 3405
y F4(.T)1904 3417 y F1(2)1968 3405 y FF(:)g(:)24 b F4(*)3140
3351 y Gd(\()r(K)t(-)t(A)t F6(L)t(L)q Gd(\))450 3585
y F7(New)d(typing)e(rules)p 3067 3502 383 4 v 3067 3610
4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p
3447 3610 V 3067 3613 383 4 v 1438 3706 a Gb(\000)6 b(;)17
b F4(X)1573 3706 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1573 3706 a 1589 3707 a F4(:)-25 b(:K)1695
3719 y F1(1)1774 3706 y F5(`)23 b F4(t)1891 3718 y F1(2)1955
3706 y FF(:)g F4(T)2073 3718 y F1(2)p 1262 3750 1029
4 v 1262 3829 a Gb(\000)g F5(`)f Gb(\025)p F4(X)1492
3829 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1492 3829 a 16 w F4(:)-25 b(:K)1614 3841 y F1(1)1670
3829 y F4(.t)1757 3841 y F1(2)1821 3829 y FF(:)23 b F5(8)p
F4(X)1985 3829 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1985 3829 a 15 w F4(:)-25 b(:K)2106
3841 y F1(1)2162 3829 y F4(.T)2250 3841 y F1(2)3111 3769
y Gd(\()r(T)o(-)t(T)n(A)t F6(B)t(S)q Gd(\))1047 3972
y Gb(\000)22 b F5(`)h F4(t)1232 3984 y F1(1)1295 3972
y FF(:)h F5(8)p F4(X)1459 3972 y
 gsave currentpoint translate 0 222821 7800 div 1691379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1459 3972 a 16 w F4(:)-25
b(:K)1581 3984 y F1(11)1674 3972 y F4(.T)1761 3984 y
F1(12)2004 3972 y
 gsave currentpoint translate 0 222821 7800 div 3958760 7800 div 579629
-7800 div box .9 setgray fill grestore
 2004 3972 a 16 w Gb(\000)22 b F5(`)h
F4(T)2205 3984 y F1(2)2268 3972 y FF(:)-25 b(:)24 b F4(K)2413
3984 y F1(11)p 1047 4015 1459 4 v 1292 4095 a Gb(\000)f
F5(`)f F4(t)1477 4107 y F1(1)1561 4095 y F4([T)1648 4107
y F1(2)1689 4095 y F4(])g FF(:)i F0(f)p F4(X)e F5(7)p
FV(!)h F4(T)2073 4107 y F1(2)2113 4095 y F0(g)p F4(T)2183
4107 y F1(12)3106 4034 y Gd(\()r(T)o(-)t(T)n(A)t F6(P)t(P)r
Gd(\))p 409 4164 9 36 v 418 4164 3000 6 v 3418 4164 38
6 v 3455 4164 9 36 v eop
%%Page: 244 245
244 244 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(244)450 686 y Gj(27.2)119 b(Higher)n(-Order)27
b(Existential)h(T)-11 b(ypes)450 875 y Gd(Similarly)i(,)24
b(the)f(higher)o(-or)o(der)f(variant)h(of)h(existential)f(types)h(is)f
(obtained)h(by)f(generalizing)450 975 y F4(X)d Gd(to)h
F4(X:)-25 b(:K)20 b Gd(in)h(the)g(original)g(de\002nition)h(of)f
Gb(\025)p F5(9)p Gd(.)450 1141 y Ge(Higher)o(-order)e(existential)e
(types)1596 b Gd(F)3237 1111 y F1(!)3226 1161 y Gc(<)-11
b(:)3301 1141 y
 gsave currentpoint translate 0 124518 7800 div 646180 7800 div 453834
-7800 div box .9 setgray fill grestore
 3301 1141 a 16 w Ge(+)37 b F5(9)p 409
1223 9 36 v 418 1193 3000 6 v 3418 1193 38 6 v 3455 1223
9 36 v 450 1312 a F7(New)21 b(syntactic)e(forms)592 1443
y F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 1543 y F4({)p
F5(9)p F4(X)985 1543 y
 gsave currentpoint translate 0 124518 7800 div 1084611 7800 div 525016
-7800 div box .9 setgray fill grestore
 985 1543 a 16 w F4(:)-25 b(:K)14
b(,T})1416 b F7(existential)21 b(type)450 1758 y(New)g(typing)e(rules)p
3067 1675 383 4 v 3067 1782 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 1782 V 3067 1785 383
4 v 972 1883 a Gb(\000)g F5(`)g F4(t)1157 1895 y F1(2)1221
1883 y FF(:)g F0(f)p F4(X)f F5(7)p FV(!)h F4(U)p F0(g)p
F4(T)1608 1895 y F1(2)1815 1883 y
 gsave currentpoint translate 0 222821 7800 div 6039592 7800 div 579629
-7800 div box .9 setgray fill grestore
 1815 1883 a 16 w Gb(\000)f
F5(`)h F4({)p F5(9)p F4(X)o(:)-25 b(:K)2211 1895 y F1(1)2252
1883 y F4(,T)2339 1895 y F1(2)2380 1883 y F4(})22 b FF(:)h
F4(*)p 891 1926 1771 4 v 891 2006 a Gb(\000)g F5(`)g
F4({)p F5(9)p F4(X=U)n(,t)1340 2018 y F1(2)1381 2006
y F4(})43 b(as)g({)p F5(9)p F4(X)1732 2006 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1732 2006
a 16 w F4(:)-25 b(:K)1854 2018 y F1(1)1910 2006 y F4(,T)1997
2018 y F1(2)2038 2006 y F4(})22 b FF(:)h F4({)p F5(9)p
F4(X)2312 2006 y
 gsave currentpoint translate 0 222821 7800 div 1404379 7800 div 525016
-7800 div box .9 setgray fill grestore
 2312 2006 a 16 w F4(:)-25 b(:K)2433
2018 y F1(1)2490 2006 y F4(,T)2577 2018 y F1(2)2617 2006
y F4(})3106 1945 y Gd(\()r(T)o(-)t(P)m F6(A)t(C)t(K)r
Gd(\))815 2145 y Gb(\000)23 b F5(`)g F4(t)1000 2157 y
F1(1)1064 2145 y FF(:)g F5(9)p F4(X)1228 2145 y
 gsave currentpoint translate 0 222821 7800 div 1691379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1228
2145 a 15 w F4(:)-25 b(:K)1349 2157 y F1(11)1442 2145
y F4(.T)1529 2157 y F1(12)1772 2145 y Gb(\000)6 b(;)17
b F4(X)1907 2145 y
 gsave currentpoint translate 0 222821 7800 div 1691379 7800 div 525016
-7800 div box .9 setgray fill grestore
 1907 2145 a 15 w F4(:)-25 b(:K)2028
2157 y F1(11)2121 2145 y Gb(;)23 b F4(x:T)2298 2157 y
F1(12)2398 2145 y F5(`)f F4(t)2515 2157 y F1(2)2579 2145
y FF(:)h F4(T)2696 2157 y F1(2)p 815 2188 1923 4 v 1225
2268 a Gb(\000)g F5(`)g F4(let)42 b({X)o(,x}=t)1846 2280
y F1(1)1930 2268 y F4(in)h(t)2105 2280 y F1(2)2168 2268
y FF(:)24 b F4(T)2286 2280 y F1(2)2987 2207 y Gd(\()r(T)o(-)t(U)t
F6(N)t(P)n(A)t(C)t(K)r Gd(\))p 409 2336 9 36 v 418 2336
3000 6 v 3418 2336 38 6 v 3455 2336 9 36 v 575 2502 a(For)30
b(example,)h(her)o(e)e(is)i(an)e(ADT)h(\(cf.)f(Section)h
Ge(??)p Gd(\))f(that)h(pr)o(ovides)g(the)g(type)g(operator)450
2602 y F4(Pair)19 b Gd(abstractly:)616 2760 y FT(let)40
b(pairADT)h(=)734 2851 y({)p Fv(9)p FT(Pair)f(=)f FM(\025)p
FT(X.)h FM(\025)p FT(Y.)f Fv(8)p FT(R.)g(\(X)p FO(!)q
FT(Y)p FO(!)p FT(R\))g FO(!)g FT(R,)773 2942 y({pair)h(=)g
FM(\025)p FT(X.)f FM(\025)p FT(Y.)g FM(\025)p FT(x:X.)h
FM(\025)p FT(y:Y.)1165 3034 y FM(\025)p FT(R.)g FM(\025)p
FT(p:X)p FO(!)p FT(Y)p FO(!)p FT(R.)f(p)h(x)f(y,)812
3125 y(fst)h(=)g FM(\025)p FT(X.)f FM(\025)p FT(Y.)g
FM(\025)p FT(p:)h(Pair)g(X)f(Y.)1165 3216 y(p)h([X])g(\()p
FM(\025)p FT(x:X.)g FM(\025)p FT(y:Y.)f(x\),)812 3308
y(snd)h(=)g FM(\025)p FT(X.)f FM(\025)p FT(Y.)g FM(\025)p
FT(p:)h(Pair)g(X)f(Y.)1165 3399 y(p)h([Y])g(\()p FM(\025)p
FT(x:X.)g FM(\025)p FT(y:Y.)f(y\)}})655 3490 y(as)h({)p
Fv(9)p FT(Pair:)-25 b(:*)p FO(\))q FT(*)p FO(\))p FT(*,)851
3582 y({pair:)41 b Fv(8)p FT(X.)e Fv(8)p FT(Y.)h(X)p
FO(!)p FT(Y)p FO(!)p FT(\(Pair)g(X)g(Y\),)891 3673 y(fst:)g
Fv(8)p FT(X.)f Fv(8)p FT(Y.)g(\(Pair)i(X)e(Y\))p FO(!)q
FT(X,)891 3764 y(snd:)h Fv(8)p FT(X.)f Fv(8)p FT(Y.)g(\(Pair)i(X)e(Y\))
p FO(!)q FT(Y)891 3856 y(}})616 3947 y(in)h(let)g({Pair,pair}=pairADT)
616 4038 y(in)694 4130 y(pair.fst)i([Nat])e([Bool])h(\(pair.pair)g
([Nat])f([Bool])h(5)e(true\);)450 4312 y Ge(27.2.1)18
b(Exercise)h([Recommended]:)38 b Gd(W)-6 b(rite)15 b(a)h(pr)o(ogram)f
(that)g(de\002nes)h(the)g F4(pair)e Gd(ADT)-6 b(,)15
b(opens)450 4412 y(it,)21 b(and)f(then)h(de\002nes)g(a)f
F4(List)f Gd(ADT)i(with)g(the)g(r)o(epr)o(esentation)f(type)616
4570 y FT(List)40 b(=)g FM(\025)p FT(X.)f Fv(8)p FT(R.)g(\(X)p
FO(!)q FT(R)p FO(!)p FT(R\))g FO(!)g FT(R)h FO(!)f FT(R;)450
4736 y Gd(and)20 b(with)i(operations)f F4(nil)o Gd(,)f
F4(cons)o Gd(,)g F4(car)o Gd(,)g(and)h F4(cdr)e Gd(of)i(appr)o(opriate)
e(types.)543 b FZ(2)p eop
%%Page: 245 246
245 245 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(245)450 683 y(F)507 653 y F1(!)592 683 y Ge(:)25
b(Summary)1944 b(System)20 b(F+)h FV(\))p 409 765 9 36
v 418 735 3000 6 v 3418 735 38 6 v 3455 765 9 36 v 450
854 a F7(Syntax)592 985 y F4(t)61 b Gd(::=)1821 b F7(terms)852
1085 y F4(x)1774 b F7(variable)852 1185 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)852 1284 y F4(t)43 b(t)1687 b F7(application)852
1384 y Gb(\025)p F4(X)o(:)-25 b(:K)o(.t)1536 b F7(type)20
b(abstraction)852 1483 y F4(t)43 b([T])1599 b F7(type)20
b(application)592 1683 y F4(v)61 b Gd(::=)1821 b F7(values)852
1782 y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)21
b(value)852 1882 y Gb(\025)p F4(X)h FY(::)h Gb(K)p F4(.t)1504
b F7(type)20 b(abstraction)g(value)592 2081 y F4(T)61
b Gd(::=)1821 b F7(types)852 2181 y F4(X)1774 b F7(type)20
b(variable)852 2280 y F4(T)p FV(!)o F4(T)1648 b F7(type)20
b(of)g(functions)852 2380 y F5(8)p F4(X)n(:)-25 b(:K)o(.T)1535
b F7(universal)21 b(type)852 2480 y Gb(\025)p F4(X:)-25
b(:K.T)1534 b F7(operator)20 b(abstraction)852 2579 y
F4(T)43 b(T)1687 b F7(operator)20 b(application)592 2779
y F4(K)61 b Gd(::=)1821 b F7(kinds)852 2878 y F4(*)1774
b F7(kind)20 b(of)h(pr)o(oper)f(types)852 2978 y F4(K)p
FV(\))o F4(K)1648 b F7(kind)20 b(of)h(operators)590 3177
y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 3277 y F5(;)1776
b F7(empty)19 b(context)852 3376 y Gb(\000)5 b(;)17 b
F4(x:T)1596 b F7(term)21 b(variable)g(binding)852 3476
y Gb(\000)5 b(;)17 b F4(X:)-25 b(:K)1577 b F7(type)20
b(variable)h(binding)450 3691 y(Evaluation)p 3096 3604
355 4 v 3096 3716 4 113 v 2304 w F4(t)i F5(\000)-15 b
FV(!)23 b F4(t)3398 3661 y FX(0)p 3447 3716 V 3096 3719
355 4 v 1155 3805 a F4(\()p Gb(\025)p F4(x)o(:T)1374
3817 y F1(11)1451 3805 y F4(.t)1538 3817 y F1(12)1615
3805 y F4(\))43 b(v)1746 3817 y F1(2)1810 3805 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2209 3817
y F1(2)2250 3805 y F0(g)p F4(t)2320 3817 y F1(12)3113
3806 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1602
3944 y F4(t)1645 3956 y F1(1)1709 3944 y F5(\000)-14
b FV(!)23 b F4(t)1917 3914 y FX(0)1909 3968 y F1(1)p
1474 3987 604 4 v 1474 4067 a F4(t)1518 4079 y F1(1)1602
4067 y F4(t)1645 4079 y F1(2)1709 4067 y F5(\000)-14
b FV(!)23 b F4(t)1917 4037 y FX(0)1909 4091 y F1(1)1994
4067 y F4(t)2037 4079 y F1(2)3105 4007 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1602 4206 y F4(t)1645 4218 y F1(2)1709
4206 y F5(\000)-14 b FV(!)23 b F4(t)1917 4176 y FX(0)1909
4230 y F1(2)p 1474 4249 V 1474 4329 a F4(v)1518 4341
y F1(1)1602 4329 y F4(t)1645 4341 y F1(2)1709 4329 y
F5(\000)-14 b FV(!)23 b F4(v)1909 4341 y F1(1)1994 4329
y F4(t)2045 4299 y FX(0)2037 4352 y F1(2)3105 4268 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))1102 4468 y
F4(\()p Gb(\025)p F4(X)o(:)-25 b(:K)1340 4480 y F1(11)1417
4468 y F4(.t)1504 4480 y F1(12)1581 4468 y F4(\))43 b([T)1755
4480 y F1(2)1796 4468 y F4(])22 b F5(\000)-14 b FV(!)23
b F0(f)p F4(X)g F5(7)p FV(!)g F4(T)2262 4480 y F1(2)2303
4468 y F0(g)p F4(t)2373 4480 y F1(12)3067 4469 y Gd(\()r(E)t(-)t(B)t
F6(E)t(T)o(A)t Gd(2\))1602 4607 y F4(t)1645 4619 y F1(1)1709
4607 y F5(\000)-14 b FV(!)23 b F4(t)1917 4577 y FX(0)1909
4631 y F1(1)p 1387 4650 778 4 v 1387 4730 a F4(t)1431
4742 y F1(1)1515 4730 y F4([T)1602 4742 y F1(2)1642 4730
y F4(])g F5(\000)-14 b FV(!)23 b F4(t)1917 4700 y FX(0)1909
4753 y F1(1)1994 4730 y F4([T)2081 4742 y F1(2)2121 4730
y F4(])3102 4670 y Gd(\()r(E)t(-)t(T)n(A)t F6(P)t(P)q
Gd(\))450 4885 y F7(T)-8 b(ype)20 b(equivalence)p 3036
4803 415 4 v 3036 4910 4 108 v 2050 w Gb(\000)j F5(`)f
F4(S)h FV($)g F4(T)p 3447 4910 V 3036 4913 415 4 v eop
%%Page: 246 247
246 246 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(246)1600 670 y Gb(\000)22 b F5(`)h F4(T)g FF(:)-25
b(:)24 b F4(K)p 1513 713 526 4 v 1513 792 a Gb(\000)f
F5(`)g F4(T)g FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3108
732 y Gd(\()r(Q)t(-)t(R)t F6(E)t(FL)q Gd(\))1513 932
y Gb(\000)f F5(`)g F4(T)g FV($)g F4(S)f FF(:)-25 b(:)24
b F4(K)p 1513 975 V 1513 1054 a Gb(\000)f F5(`)g F4(S)g
FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3064 994 y Gd(\()r(Q)t(-)t(S)t
F6(Y)t(M)t(M)q Gd(\))1168 1193 y Gb(\000)e F5(`)h F4(S)g
FV($)g F4(U)g FF(:)-25 b(:)23 b F4(K)166 b Gb(\000)23
b F5(`)g F4(U)f FV($)h F4(T)g FF(:)-25 b(:)24 b F4(K)p
1168 1237 1217 4 v 1513 1316 a Gb(\000)f F5(`)g F4(S)g
FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3036 1256 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))1355 1455 y Gb(\000)5 b(;)18
b F4(X)o(:)-25 b(:K)1595 1467 y F1(1)1659 1455 y F5(`)22
b F4(S)1776 1467 y F1(2)1840 1455 y FV($)h F4(T)1989
1467 y F1(2)2053 1455 y FF(:)-25 b(:)24 b F4(*)p 1193
1499 1166 4 v 1193 1578 a Gb(\000)f F5(`)g(8)p F4(X)n(:)-25
b(:K)1530 1590 y F1(1)1571 1578 y F4(.S)1658 1590 y F1(2)1722
1578 y FV($)23 b F5(8)p F4(X)n(:)-25 b(:K)2023 1590 y
F1(1)2064 1578 y F4(.T)2151 1590 y F1(2)2214 1578 y FF(:)g(:)24
b F4(*)3135 1518 y Gd(\()r(Q)t(-)t(A)t F6(L)t(L)q Gd(\))1069
1717 y Gb(\000)5 b(;)17 b F4(X:)-25 b(:K)1309 1729 y
F1(11)1409 1717 y F5(`)23 b F4(T)1526 1729 y F1(12)1626
1717 y FF(:)-25 b(:)24 b F4(K)1770 1729 y F1(12)2013
1717 y Gb(\000)f F5(`)g F4(T)2199 1729 y F1(2)2262 1717
y FF(:)-25 b(:)24 b F4(K)2406 1729 y F1(11)p 978 1761
1596 4 v 978 1840 a Gb(\000)f F5(`)g F4(\()p Gb(\025)p
F4(X:)-25 b(:K)1358 1852 y F1(11)1435 1840 y F4(.T)1522
1852 y F1(12)1599 1840 y F4(\))43 b(T)1729 1852 y F1(2)1793
1840 y FV($)23 b F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2142
1852 y F1(2)2182 1840 y F0(g)p F4(T)2253 1852 y F1(12)2353
1840 y FF(:)-25 b(:)23 b F4(K)2497 1852 y F1(12)3098
1780 y Gd(\()r(Q)t(-)t(B)t F6(E)t(T)o(A)q Gd(\))1133
1979 y Gb(\000)g F5(`)f F4(S)h FF(:)-25 b(:)24 b F4(K)1485
1991 y F1(1)1526 1979 y FV(\))p F4(K)1652 1991 y F1(2)1859
1979 y Gb(\000)f F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)2212
1991 y F1(1)2252 1979 y FV(\))p F4(K)2379 1991 y F1(2)1288
2079 y Gb(\000)5 b(;)18 b F4(X:)-25 b(:K)1528 2091 y
F1(1)1592 2079 y F5(`)23 b F4(S)43 b(X)22 b FV($)h F4(T)44
b(X)22 b FF(:)-25 b(:)24 b F4(K)2224 2091 y F1(2)p 1133
2122 1287 4 v 1423 2202 a Gb(\000)e F5(`)h F4(S)g FV($)g
F4(T)g FF(:)g F4(K)1922 2214 y F1(1)1962 2202 y FV(\))p
F4(K)2089 2214 y F1(2)3145 2141 y Gd(\()r(Q)t(-)t(E)t
F6(X)t(T)r Gd(\))1334 2341 y Gb(\000)6 b(;)17 b F4(X:)-25
b(:K)1575 2353 y F1(1)1638 2341 y F5(`)23 b F4(S)1756
2353 y F1(2)1819 2341 y FV($)g F4(T)1969 2353 y F1(2)2033
2341 y FF(:)-25 b(:)23 b F4(K)2177 2353 y F1(2)p 1090
2384 1371 4 v 1090 2464 a Gb(\000)g F5(`)g Gb(\025)p
F4(X:)-25 b(:K)1427 2476 y F1(1)1467 2464 y F4(.S)1554
2476 y F1(2)1618 2464 y FV($)23 b Gb(\025)p F4(X:)-25
b(:K)1918 2476 y F1(1)1959 2464 y F4(.T)2046 2476 y F1(2)2110
2464 y FF(:)g(:)23 b F4(K)2254 2476 y F1(1)2294 2464
y FV(\))p F4(K)2421 2476 y F1(2)3092 2403 y Gd(\()r(Q)t(-)t(T)n(A)t
F6(B)t(S)q Gd(\))908 2603 y Gb(\000)g F5(`)g F4(S)1093
2615 y F1(1)1157 2603 y FV($)g F4(T)1306 2615 y F1(1)1370
2603 y FF(:)-25 b(:)24 b F4(K)1514 2615 y F1(11)1591
2603 y FV(\))p F4(K)1718 2615 y F1(12)1961 2603 y Gb(\000)f
F5(`)f F4(S)2146 2615 y F1(2)2209 2603 y FV($)i F4(T)2359
2615 y F1(2)2423 2603 y FF(:)-25 b(:)23 b F4(K)2567 2615
y F1(11)p 908 2646 1736 4 v 1307 2726 a Gb(\000)f F5(`)h
F4(S)1492 2738 y F1(1)1576 2726 y F4(S)1620 2738 y F1(2)1683
2726 y FV($)g F4(T)1833 2738 y F1(1)1917 2726 y F4(S)1960
2738 y F1(2)2024 2726 y FF(:)-25 b(:)24 b F4(K)2168 2738
y F1(12)3136 2665 y Gd(\()r(Q)t(-)t(A)t F6(P)t(P)r Gd(\))1087
2865 y Gb(\000)e F5(`)h F4(S)1272 2877 y F1(1)1335 2865
y FV($)g F4(T)1485 2877 y F1(1)1549 2865 y FF(:)-25 b(:)23
b F4(*)166 b Gb(\000)23 b F5(`)g F4(S)2044 2877 y F1(2)2108
2865 y FV($)g F4(T)2257 2877 y F1(2)2321 2865 y FF(:)-25
b(:)24 b F4(*)p 1087 2908 1379 4 v 1306 2988 a Gb(\000)e
F5(`)h F4(S)1491 3000 y F1(1)1531 2988 y FV(!)p F4(S)1658
3000 y F1(2)1722 2988 y FV($)g F4(T)1871 3000 y F1(1)1912
2988 y FV(!)p F4(T)2038 3000 y F1(2)2102 2988 y FF(:)-25
b(:)24 b F4(*)3001 2927 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(\))450 3143 y F7(Kinding)p 3041 3060 410 4 v 3041
3168 4 108 v 2342 w Gb(\000)f F5(`)g F4(T)f FF(:)-25
b(:)24 b F4(K)p 3447 3168 V 3041 3171 410 4 v 1628 3265
a(X:)-25 b(:K)22 b F5(2)h Gb(\000)p 1600 3308 353 4 v
1600 3388 a(\000)f F5(`)h F4(X)g FF(:)-25 b(:)24 b F4(K)3083
3327 y Gd(\()r(K)t(-)t(T)t(V)l F6(A)t(R)r Gd(\))1461
3527 y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1702 3539 y
F1(1)1765 3527 y F5(`)23 b F4(T)1883 3539 y F1(2)1946
3527 y FF(:)-25 b(:)24 b F4(*)p 1440 3570 673 4 v 1440
3650 a Gb(\000)e F5(`)h(8)p F4(X:)-25 b(:K)1777 3662
y F1(1)1817 3650 y F4(.T)1904 3662 y F1(2)1968 3650 y
FF(:)g(:)24 b F4(*)3140 3589 y Gd(\()r(K)t(-)t(A)t F6(L)t(L)q
Gd(\))1441 3789 y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1681
3801 y F1(1)1745 3789 y F5(`)23 b F4(T)1862 3801 y F1(2)1926
3789 y FF(:)-25 b(:)24 b F4(K)2070 3801 y F1(2)p 1336
3832 880 4 v 1336 3911 a Gb(\000)f F5(`)g Gb(\025)p F4(X:)-25
b(:K)1672 3923 y F1(1)1713 3911 y F4(.T)1800 3923 y F1(2)1864
3911 y FF(:)g(:)23 b F4(K)2008 3923 y F1(1)2048 3911
y FV(\))p F4(K)2175 3923 y F1(2)3097 3851 y Gd(\()r(K)t(-)t(T)n(A)t
F6(B)t(S)q Gd(\))1121 4051 y Gb(\000)g F5(`)g F4(T)1306
4063 y F1(1)1370 4051 y FF(:)-25 b(:)24 b F4(K)1514 4063
y F1(11)1591 4051 y FV(\))p F4(K)1718 4063 y F1(12)1961
4051 y Gb(\000)f F5(`)f F4(T)2146 4063 y F1(2)2209 4051
y FF(:)-25 b(:)24 b F4(K)2354 4063 y F1(11)p 1121 4094
1310 4 v 1477 4173 a Gb(\000)f F5(`)g F4(T)1662 4185
y F1(1)1746 4173 y F4(T)1790 4185 y F1(2)1854 4173 y
FF(:)-25 b(:)23 b F4(K)1998 4185 y F1(12)3092 4113 y
Gd(\()r(K)t(-)t(T)n(A)t F6(P)t(P)r Gd(\))1300 4313 y
Gb(\000)g F5(`)f F4(T)1485 4325 y F1(1)1549 4313 y FF(:)-25
b(:)23 b F4(*)166 b Gb(\000)23 b F5(`)g F4(T)2044 4325
y F1(2)2108 4313 y FF(:)-25 b(:)23 b F4(*)p 1300 4356
953 4 v 1496 4435 a Gb(\000)g F5(`)f F4(T)1681 4447 y
F1(1)1722 4435 y FV(!)p F4(T)1848 4447 y F1(2)1912 4435
y FF(:)-25 b(:)23 b F4(*)3006 4375 y Gd(\()r(K)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))450 4591 y F7(T)-8 b(yping)p
3067 4508 383 4 v 3067 4616 4 108 v 2408 w Gb(\000)22
b F5(`)h F4(t)g FF(:)g F4(T)p 3447 4616 V 3067 4619 383
4 v 1637 4712 a(x:T)f F5(2)i Gb(\000)p 1613 4756 327
4 v 1613 4835 a(\000)f F5(`)f F4(x)h FF(:)g F4(T)3152
4775 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))p eop
%%Page: 247 248
247 247 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(247)1184 670 y Gb(\000)23 b F5(`)g F4(T)1369
682 y F1(1)1433 670 y FF(:)-25 b(:)24 b F4(*)165 b Gb(\000)6
b(;)17 b F4(x:T)1965 682 y F1(1)2028 670 y F5(`)23 b
F4(t)2146 682 y F1(2)2209 670 y FF(:)h F4(T)2327 682
y F1(2)p 1184 713 1184 4 v 1359 792 a Gb(\000)f F5(`)f
Gb(\025)p F4(x:T)1676 804 y F1(1)1717 792 y F4(.t)1804
804 y F1(2)1867 792 y FF(:)i F4(T)1985 804 y F1(1)2026
792 y FV(!)p F4(T)2152 804 y F1(2)3160 732 y Gd(\()r(T)o(-)t(A)t
F6(B)t(S)q Gd(\))1148 932 y Gb(\000)e F5(`)h F4(t)1333
944 y F1(1)1396 932 y FF(:)h F4(T)1514 944 y F1(11)1591
932 y FV(!)p F4(T)1718 944 y F1(12)1961 932 y Gb(\000)f
F5(`)f F4(t)2146 944 y F1(2)2209 932 y FF(:)i F4(T)2327
944 y F1(11)p 1148 975 1257 4 v 1490 1054 a Gb(\000)f
F5(`)g F4(t)1676 1066 y F1(1)1760 1054 y F4(t)1803 1066
y F1(2)1867 1054 y FF(:)g F4(T)1985 1066 y F1(12)3155
994 y Gd(\()r(T)o(-)t(A)t F6(P)t(P)r Gd(\))1454 1193
y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1695 1205 y F1(1)1758
1193 y F5(`)23 b F4(t)1876 1205 y F1(2)1939 1193 y FF(:)g
F4(T)2057 1205 y F1(2)p 1293 1237 966 4 v 1293 1316 a
Gb(\000)g F5(`)g Gb(\025)p F4(X)o(:)-25 b(:K)1629 1328
y F1(1)1670 1316 y F4(.t)1757 1328 y F1(2)1821 1316 y
FF(:)23 b F5(8)p F4(X)o(:)-25 b(:K)2090 1328 y F1(1)2131
1316 y F4(.T)2218 1328 y F1(2)3111 1256 y Gd(\()r(T)o(-)t(T)n(A)t
F6(B)t(S)q Gd(\))1078 1455 y Gb(\000)23 b F5(`)g F4(t)1263
1467 y F1(1)1327 1455 y FF(:)g F5(8)p F4(X)o(:)-25 b(:K)1597
1467 y F1(11)1674 1455 y F4(.T)1761 1467 y F1(12)2004
1455 y Gb(\000)23 b F5(`)f F4(T)2189 1467 y F1(2)2253
1455 y FF(:)-25 b(:)23 b F4(K)2397 1467 y F1(11)p 1078
1499 1396 4 v 1292 1578 a Gb(\000)g F5(`)f F4(t)1477
1590 y F1(1)1561 1578 y F4([T)1648 1590 y F1(2)1689 1578
y F4(])g FF(:)i F0(f)p F4(X)e F5(7)p FV(!)h F4(T)2073
1590 y F1(2)2113 1578 y F0(g)p F4(T)2183 1590 y F1(12)3106
1518 y Gd(\()r(T)o(-)t(T)n(A)t F6(P)t(P)r Gd(\))1267
1717 y Gb(\000)g F5(`)g F4(t)f FF(:)i F4(S)165 b Gb(\000)23
b F5(`)g F4(S)g FV($)g F4(T)f FF(:)-25 b(:)24 b F4(*)p
1267 1761 1018 4 v 1613 1840 a Gb(\000)f F5(`)f F4(t)h
FF(:)g F4(T)3201 1780 y Gd(\()r(T)o(-)t(E)t F6(Q)r Gd(\))p
409 1909 9 36 v 418 1909 3000 6 v 3418 1909 38 6 v 3455
1909 9 36 v 450 2194 a Gj(27.3)119 b(T)-11 b(ype)30 b(Equivalence)f
(and)h(Reduction)450 2383 y Ge(27.3.1)18 b(De\002nition:)40
b Gd(The)25 b(type)g(r)o(eduction)f(r)o(elation)h Gb(\000)31
b F5(`)g F4(S)g Fj(V)g F4(T)g FF(:)-25 b(:)32 b F4(K)25
b Gd(is)g(de\002ned)g(just)h(like)450 2482 y Gb(\000)d
F5(`)g F4(S)f FV($)h F4(T)g FF(:)-25 b(:)24 b F4(K)o
Gd(,)d(r)o(eplacing)f FV($)g Gd(by)h Fj(V)g Gd(and)f(dr)o(opping)h(the)
g(r)o(ule)i(Q)t(-)t(S)t F6(Y)t(M)t(M)r Gd(.)511 b FZ(2)450
2659 y Ge(27.3.2)18 b(Proposition:)40 b Gd(If)20 b Gb(\000)j
F5(`)f F4(S)h FV($)g F4(T)g FF(:)-25 b(:)24 b F4(K)o
Gd(,)c(then)g(ther)o(e)f(is)i(some)f F4(U)g Gd(such)g(that)g
Gb(\000)j F5(`)f F4(S)h Fj(V)g F4(U)g FF(:)-25 b(:)23
b F4(K)450 2759 y Gd(and)d Gb(\000)j F5(`)g F4(T)g Fj(V)g
F4(U)f FF(:)-25 b(:)24 b F4(K)p Gd(.)2236 b FZ(2)450
2936 y F7(Pr)o(oof:)66 b Gd(Standar)o(d.)2320 b FZ(2)450
3221 y Gj(27.4)119 b(Soundness)450 3410 y Ge(27.4.1)18
b(Lemma:)554 3571 y Gd(1.)41 b(If)20 b Gb(\000)6 b(;)17
b F4(x:S)o Gb(;)23 b(\001)g F5(`)g F4(T)f FF(:)-25 b(:)24
b F4(K)p Gd(,)c(then)h Gb(\000)6 b(;)17 b(\001)24 b F5(`)e
F4(T)h FF(:)-25 b(:)24 b F4(K)o Gd(.)554 3735 y(2.)41
b(If)20 b Gb(\000)6 b(;)17 b F4(x:S)o Gb(;)23 b(\001)g
F5(`)g F4(S)f FV($)i F4(T)e FF(:)-25 b(:)24 b F4(K)o
Gd(,)d(then)g Gb(\000)6 b(;)17 b(\001)23 b F5(`)g F4(S)g
FV($)g F4(T)g FF(:)-25 b(:)23 b F4(K)p Gd(.)975 b FZ(2)450
3912 y F7(Pr)o(oof:)66 b Gd(The)18 b(kinding)g(and)f(type)g
(equivalence)g(r)o(elations)g(do)g(not)h(depend)e(on)i(term)f(variable)
450 4012 y(bindings.)2601 b FZ(2)450 4189 y Ge(27.4.2)18
b(Lemma)h([Substitution]:)38 b Gd(If)21 b Gb(\000)6 b(;)19
b F4(x:S)o Gb(;)25 b(\001)h F5(`)f F4(t)f FF(:)i F4(T)21
b Gd(and)h Gb(\000)j F5(`)f F4(s)h FF(:)h F4(S)o Gd(,)c(then)g
Gb(\000)6 b(;)19 b(\001)26 b F5(`)f F0(f)p F4(x)f F5(7)p
FV(!)450 4288 y F4(s)p F0(g)p F4(t)e FF(:)h F4(T)p Gd(.)2668
b FZ(2)450 4465 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d.)24
b(\(Quick)d(check:)k(wher)o(e)c(is)g(Lemma)f(27.4.1)e(used?\))419
b FZ(2)450 4642 y Ge(27.4.3)18 b(Theorem)i([Preservation]:)39
b Gd(If)20 b Gb(\000)j F5(`)g F4(t)g FF(:)g F4(T)d Gd(and)h
F4(t)h F5(\000)-14 b FV(!)23 b F4(t)2492 4612 y FX(0)2516
4642 y Gd(,)d(then)h F5(`)i F4(t)2866 4612 y FX(0)2913
4642 y FF(:)g F4(T)p Gd(.)342 b FZ(2)450 4819 y F7(Pr)o(oof:)66
b Gd(Straightforwar)o(d)24 b(induction)j(on)f(evaluation)f
(derivations,)i(using)f(Lemma)f(27.4.2)450 4919 y(for)c(the)h(T)o(-)t
(V)l F6(A)t(R)i Gd(case.)2243 b FZ(2)p eop
%%Page: 248 249
248 248 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(248)450 683 y Ge(27.4.4)18 b(Lemma:)554 824
y Gd(1.)41 b(If)20 b F4(t)g Gd(is)h(a)g(value)f(and)g
F5(`)j F4(t)g FF(:)g F4(T)1583 836 y F1(1)1624 824 y
FV(!)p F4(T)1751 836 y F1(2)1791 824 y Gd(,)e(then)g
F4(t)f Gd(is)h(an)g(abstraction.)554 978 y(2.)41 b(If)20
b F4(t)g Gd(is)h(a)g(value)f(and)g F5(`)j F4(t)g FF(:)g
F5(8)p F4(X.T)1717 990 y F1(2)1757 978 y Gd(,)e(then)g
F4(t)f Gd(is)h(a)g(type)f(abstraction.)594 b FZ(2)450
1130 y F7(Pr)o(oof:)66 b Gd(The)25 b(ar)o(guments)f(for)g(the)g(two)h
(parts)f(ar)o(e)e(similar;)k(we)f(show)g(just)g(\(1\).)35
b(Since)24 b(ther)o(e)450 1230 y(ar)o(e)19 b(only)j(two)g(forms)f(of)f
(values,)g(if)h F4(t)f Gd(is)i(a)e(value)g(and)g(not)i(an)e
(abstraction,)h(then)g(it)g(must)g(be)450 1329 y(a)g(type)g
(abstraction.)28 b(Suppose)21 b(\(for)g(a)g(contradiction\))g(that)h
(it)f(is)h(a)f(type)g(abstraction.)28 b(Then)450 1429
y(the)h(given)g(typing)g(derivation)f(for)h Gb(\000)37
b F5(`)g F4(t)g FF(:)h F4(T)2026 1441 y F1(1)2066 1429
y FV(!)p F4(T)2193 1441 y F1(2)2262 1429 y Gd(must)29
b(end)g(with)g(a)f(use)h(of)h(T)o(-)t(T)n(A)t F6(B)t(S)450
1529 y Gd(followed)21 b(by)g(at)f(least)h(one)g(use)g(of)h(T)o(-)t(E)t
F6(Q)s Gd(.)j(That)c(is,)g(it)g(must)g(have)f(the)h(following)i(form:)
802 1672 y(.)802 1705 y(.)802 1738 y(.)p 545 1791 537
5 v 1106 1810 a FY(\()r Gd(T)o(-)t(T)o F6(A)t(B)t(S)q
FY(\))545 1881 y Gb(\000)f F5(`)h F4(t)g FF(:)g F5(8)p
F4(X.S)1004 1893 y F1(12)1566 1881 y Gb(\000)g F5(`)g(8)p
F4(X.S)1885 1893 y F1(12)1985 1881 y FV($)g F4(U)2134
1893 y F1(1)2198 1881 y FF(:)-25 b(:)24 b F4(*)p 461
1934 1882 5 v 2367 1953 a FY(\()r Gd(T)o(-)t(E)t F6(Q)s
FY(\))551 2030 y Gb(\000)f F5(`)g F4(t)g FF(:)g F4(U)878
2042 y F1(1)724 2120 y Gd(.)724 2153 y(.)724 2186 y(.)502
2286 y Gb(\000)g F5(`)g F4(t)g FF(:)g F4(U)829 2298 y
F1(n)p F2(-)p F1(1)1249 2286 y Gb(\000)g F5(`)g F4(U)1435
2298 y F1(n)p F2(-)p F1(1)1596 2286 y FV($)g F4(U)1746
2298 y F1(n)1820 2286 y FF(:)-25 b(:)24 b F4(*)p 461
2339 1504 5 v 1989 2357 a FY(\()r Gd(T)o(-)t(E)t F6(Q)s
FY(\))788 2429 y Gb(\000)f F5(`)f F4(t)h FF(:)g F4(U)1114
2441 y F1(n)2372 2429 y Gb(\000)g F5(`)g F4(U)2557 2441
y F1(n)2632 2429 y FV($)g F4(T)2781 2441 y F1(1)2822
2429 y FV(!)p F4(T)2948 2441 y F1(2)3012 2429 y FF(:)-25
b(:)24 b F4(*)p 788 2482 2369 5 v 3181 2500 a FY(\()r
Gd(T)o(-)t(E)t F6(Q)s FY(\))1705 2572 y Gb(\000)f F5(`)g
F4(t)f FF(:)i F4(T)2031 2584 y F1(1)2072 2572 y FV(!)p
F4(T)2198 2584 y F1(2)450 2705 y Gd(Since)17 b(type)g(equivalence)g(is)
g(transitive,)h(we)f(can)g(collapse)g(all)g(of)g(these)g(uses)g(of)g
(equivalence)450 2805 y(into)22 b(one)f(and)f(conclude)h(that)g
Gb(\000)i F5(`)f(8)p F4(X.S)1767 2817 y F1(12)1867 2805
y FV($)h F4(T)2017 2817 y F1(1)2057 2805 y FV(!)p F4(T)2184
2817 y F1(2)2224 2805 y Gd(.)575 2905 y(By)d(Pr)o(oposition)h(27.3.2,)d
(ther)o(e)h(must)i(be)f(some)h(type)f F4(U)g Gd(such)h(that)f
Gb(\000)j F5(`)g(8)p F4(X.S)3040 2917 y F1(12)3140 2905
y Fj(V)g F4(U)c Gd(and)450 3004 y Gb(\000)k F5(`)g F4(T)635
3016 y F1(1)676 3004 y FV(!)p F4(T)802 3016 y F1(2)866
3004 y Fj(V)g F4(U)p Gd(.)h(A)19 b(quick)g(inspection)h(of)f(the)g(r)o
(ules)g(de\002ning)h(the)f Fj(V)g Gd(r)o(elation)f(shows)i(that)450
3104 y(ther)o(e)g(can)g(be)h(no)g(such)g F4(U)p Gd(.)2113
b FZ(2)450 3256 y Ge(27.4.5)18 b(Theorem)i([Progress]:)41
b Gd(Suppose)22 b F4(t)f Gd(is)i(closed)f(and)f(stuck,)i(and)e(that)h
F5(`)j F4(t)g FF(:)h F4(T)o Gd(.)k(Then)450 3355 y F4(t)20
b Gd(is)h(a)g(value.)2513 b FZ(2)450 3507 y F7(Pr)o(oof:)66
b Gd(By)22 b(induction)g(on)g(typing)h(derivations.)k(The)d(T)o(-)t(V)l
F6(A)t(R)g Gd(case)d(cannot)h(occur)-6 b(,)21 b(because)450
3607 y F4(t)e Gd(is)g(closed.)25 b(The)c(T)o(-)t(A)t
F6(B)t(S)f Gd(and)h(T)o(-)t(T)n(A)t F6(B)t(S)f Gd(cases)f(ar)o(e)e
(immediate,)i(since)g(abstractions)g(ar)o(e)f(val-)450
3706 y(ues.)25 b(The)e(T)o(-)t(E)t F6(Q)f Gd(case)e(follows)h(dir)o
(ectly)f(fr)o(om)f(the)i(induction)g(hypothesis.)27 b(The)20
b(r)o(emaining)450 3806 y(cases,)g(for)h(application)f(and)h(type)f
(application,)h(ar)o(e)e(mor)o(e)h(inter)o(esting.)450
3924 y F7(Case)k Gd(T)o(-)t(A)t F6(P)t(P)r F7(:)134 b
F4(t)23 b FY(=)g F4(t)1218 3936 y F1(1)1303 3924 y F4(t)1346
3936 y F1(2)1553 3924 y F5(`)f F4(t)1670 3936 y F1(1)1734
3924 y FF(:)h F4(T)1852 3936 y F1(11)1928 3924 y FV(!)p
F4(T)2055 3936 y F1(12)2298 3924 y F5(`)g F4(t)2415 3936
y F1(2)2479 3924 y FF(:)g F4(T)2597 3936 y F1(11)450
4043 y Gd(This)30 b(case)e(cannot)i(occur)-6 b(.)50 b(T)-8
b(o)30 b(see)e(this,)k(we)d(r)o(eason)g(by)g(contradiction.)51
b(Looking)30 b(at)f(the)450 4142 y(evaluation)21 b(r)o(ules,)f(it)h(is)
g(clear)f(that)h(a)f(term)h(of)g(the)g(form)f F4(t)2324
4154 y F1(1)2408 4142 y F4(t)2452 4154 y F1(2)2513 4142
y Gd(can)g(be)h(stuck)g(only)h(if)554 4284 y(1.)41 b
F4(t)701 4296 y F1(1)762 4284 y Gd(is)22 b(stuck)f(\(otherwise)i(E)t(-)
t(A)t F6(P)t(P)t Gd(1)f(would)f(apply)g(to)g F4(t)o Gd(\),)g(and)554
4438 y(2.)41 b(either)20 b F4(t)934 4450 y F1(1)995 4438
y Gd(is)h(not)h(a)e(value)g(or)h(else)g F4(t)1804 4450
y F1(2)1865 4438 y Gd(is)h(stuck)f(\(otherwise)i(E)t(-)t(A)t
F6(P)t(P)t Gd(2)f(would)f(apply\).)450 4579 y(Fr)o(om)26
b(\(1\))f(and)g(the)h(induction)h(hypothesis,)i(we)d(see)f(that)h
F4(t)2420 4591 y F1(1)2486 4579 y Gd(must)h(be)f(a)f(value;)j(so)e(by)g
(\(2\))450 4679 y(and)20 b(the)h(induction)h(hypothesis,)g
F4(t)1607 4691 y F1(2)1669 4679 y Gd(must)f(also)g(be)f(a)g(value.)25
b(But)c(by)g(Lemma)f(27.4.4\(1\),)d F4(t)3409 4691 y
F1(1)450 4778 y Gd(must)26 b(be)e(an)h(abstraction,)h(which)g(means)f
(that)i(E)t(-)t(B)t F6(E)t(T)o(A)f Gd(applies)f(to)g
F4(t)p Gd(,)g(contradicting)h(our)450 4878 y(assumption)c(that)f(it)f
(is)i(stuck.)p eop
%%Page: 249 250
249 249 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)506
b Gd(2)t(7)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(S)t(M)
509 b Gd(249)450 683 y F7(Case)24 b Gd(T)o(-)t(T)n(A)t
F6(P)t(P)r F7(:)450 808 y Gd(Similar)-6 b(.)2665 b FZ(2)p
eop
%%Page: 250 251
250 250 bop 450 1306 a F3(Chapter)44 b(28)450 1721 y
Gk(Implementing)52 b(Higher)l(-Order)450 1970 y(Systems)450
2491 y Ge(Algorithmic)19 b(rules)h(for)h Gd(F)1330 2461
y F1(!)p 409 2573 9 36 v 418 2544 3000 6 v 3418 2544
38 6 v 3455 2573 9 36 v 450 2692 a F7(Algorithmic)e(r)o(eduction)p
2983 2604 468 4 v 2983 2718 4 114 v 1814 w Gb(\000)k
F5(`)3098 2672 y Fx(I)3165 2692 y F4(T)g Fj(\032)g F4(T)3398
2661 y FX(0)p 3447 2718 V 2983 2721 468 4 v 1067 2814
a Gb(\000)g F5(`)1154 2795 y Fx(I)1222 2814 y F4(\()p
Gb(\025)p F4(X:)-25 b(:K)1460 2826 y F1(11)1537 2814
y F4(.)43 b(T)1667 2826 y F1(12)1744 2814 y F4(\))g(T)1875
2826 y F1(2)1939 2814 y Fj(\032)23 b F0(f)p F4(X)f F5(7)p
FV(!)h F4(T)2297 2826 y F1(2)2337 2814 y F0(g)p F4(T)2407
2826 y F1(12)3039 2815 y Gd(\()r(R)t(A)t(-)t(B)t F6(E)t(T)o(A)q
Gd(\))1173 2953 y Gb(\000)g F5(`)1260 2934 y Fx(I)1327
2953 y F4(T)1371 2965 y F1(1)1434 2953 y Fj(\032)h F4(T)1601
2924 y FX(0)1593 2977 y F1(1)1800 2953 y Gb(\000)f F5(`)1887
2934 y Fx(I)1954 2953 y F4(T)2005 2924 y FX(0)1998 2977
y F1(1)2082 2953 y F4(T)2126 2965 y F1(2)2189 2953 y
Fj(\032)g F4(T)2356 2924 y FX(0)p 1173 2997 1206 4 v
1486 3076 a Gb(\000)g F5(`)1573 3057 y Fx(I)1641 3076
y F4(T)1684 3088 y F1(1)1768 3076 y F4(T)1812 3088 y
F1(2)1876 3076 y Fj(\032)g F4(T)2042 3046 y FX(0)3077
3016 y Gd(\()r(R)t(A)t(-)t(A)t F6(P)t(P)r Gd(\))450 3232
y F7(Algorithmic)c(type)h(equivalence)p 3023 3149 428
4 v 3023 3257 4 108 v 1624 w Gb(\000)j F5(`)3138 3212
y Fx(I)3205 3232 y F4(S)g FV($)g F4(T)p 3447 3257 V 3023
3260 428 4 v 1591 3346 a Gb(\000)f F5(`)1677 3327 y Fx(I)1745
3346 y F4(X)h FV($)g F4(X)3010 3347 y Gd(\()r(Q)t(A)t(-)t(T)t(V)l
F6(A)t(R)q Gd(\))1287 3485 y Gb(\000)g F5(`)1374 3466
y Fx(I)1441 3485 y F4(S)g Fj(\032)g F4(S)1674 3455 y
FX(0)1864 3485 y Gb(\000)f F5(`)1950 3466 y Fx(I)2018
3485 y F4(S)2069 3455 y FX(0)2115 3485 y FV($)h F4(T)p
1287 3528 979 4 v 1591 3608 a Gb(\000)f F5(`)1677 3589
y Fx(I)1745 3608 y F4(S)h FV($)g F4(T)2858 3547 y Gd(\()r(Q)t(A)t(-)t
(R)t F6(E)t(D)t(U)t(C)t(E)t Gd(L)r(\))1287 3747 y Gb(\000)g
F5(`)1374 3728 y Fx(I)1441 3747 y F4(T)g Fj(\032)g F4(T)1674
3717 y FX(0)1864 3747 y Gb(\000)f F5(`)1950 3728 y Fx(I)2018
3747 y F4(S)h FV($)g F4(T)2242 3717 y FX(0)p 1287 3790
V 1591 3870 a Gb(\000)f F5(`)1677 3851 y Fx(I)1745 3870
y F4(S)h FV($)g F4(T)2854 3809 y Gd(\()r(Q)t(A)t(-)t(R)t
F6(E)t(D)t(U)t(C)t(E)t Gd(R)r(\))1241 4009 y Gb(\000)g
F5(`)1328 3990 y Fx(I)1396 4009 y F4(S)1439 4021 y F1(1)1503
4009 y FV($)g F4(T)1652 4021 y F1(1)1859 4009 y Gb(\000)g
F5(`)1946 3990 y Fx(I)2013 4009 y F4(S)2057 4021 y F1(2)2120
4009 y FV($)h F4(T)2270 4021 y F1(2)p 1241 4052 1070
4 v 1383 4132 a Gb(\000)f F5(`)1470 4112 y Fx(I)1537
4132 y F4(S)1581 4144 y F1(1)1621 4132 y FV(!)p F4(S)1748
4144 y F1(2)1812 4132 y FV($)g F4(T)1961 4144 y F1(1)2002
4132 y FV(!)p F4(T)2128 4144 y F1(2)2932 4071 y Gd(\()r(Q)t(A)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))1432 4271 y Gb(\000)6 b(;)17
b F4(X:)-25 b(:K)1672 4283 y F1(1)1736 4271 y F5(`)1755
4252 y Fx(I)1822 4271 y F4(S)1866 4283 y F1(2)1930 4271
y FV($)23 b F4(T)2079 4283 y F1(2)p 1270 4314 1011 4
v 1270 4394 a Gb(\000)g F5(`)1357 4374 y Fx(I)1425 4394
y F5(8)p F4(X)n(:)-25 b(:K)1620 4406 y F1(1)1661 4394
y F4(.S)1748 4406 y F1(2)1812 4394 y FV($)23 b F5(8)p
F4(X)n(:)-25 b(:K)2113 4406 y F1(1)2154 4394 y F4(.T)2241
4406 y F1(2)3067 4333 y Gd(\()r(Q)t(A)t(-)t(A)t F6(L)t(L)p
Gd(\))1432 4533 y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1672
4545 y F1(1)1736 4533 y F5(`)1755 4513 y Fx(I)1822 4533
y F4(S)1866 4545 y F1(2)1930 4533 y FV($)23 b F4(T)2079
4545 y F1(2)p 1272 4576 1009 4 v 1272 4656 a Gb(\000)f
F5(`)1358 4636 y Fx(I)1426 4656 y Gb(\025)p F4(X:)-25
b(:K)1620 4668 y F1(1)1661 4656 y F4(.S)1748 4668 y F1(2)1812
4656 y FV($)23 b Gb(\025)p F4(X:)-25 b(:K)2112 4668 y
F1(1)2153 4656 y F4(.T)2240 4668 y F1(2)3023 4595 y Gd(\()r(Q)t(A)t(-)t
(T)n(A)t F6(B)t(S)q Gd(\))1241 4795 y Gb(\000)23 b F5(`)1328
4775 y Fx(I)1396 4795 y F4(S)1439 4807 y F1(1)1503 4795
y FV($)g F4(T)1652 4807 y F1(1)1859 4795 y Gb(\000)g
F5(`)1946 4775 y Fx(I)2013 4795 y F4(S)2057 4807 y F1(2)2120
4795 y FV($)h F4(T)2270 4807 y F1(2)p 1241 4838 1070
4 v 1422 4918 a Gb(\000)f F5(`)1509 4898 y Fx(I)1577
4918 y F4(S)1620 4930 y F1(1)1704 4918 y F4(S)1748 4930
y F1(2)1812 4918 y FV($)g F4(T)1961 4930 y F1(1)2045
4918 y F4(T)2089 4930 y F1(2)3019 4857 y Gd(\()r(Q)t(A)t(-)t(T)n(A)t
F6(P)t(P)q Gd(\))1888 5169 y(250)p eop
%%Page: 251 252
251 251 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)338
b Gd(2)t(8)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t F6(R)t(D)t(E)t(R)i
Gd(S)t F6(Y)t(S)t(T)t(E)t(M)t(S)339 b Gd(251)450 798
y F7(Exposur)o(e)p 3020 710 431 4 v 3020 839 4 129 v
2285 w Gb(\000)23 b F5(`)3135 778 y Fx(I)3202 798 y F4(T)g
FV(*)g F4(T)3398 767 y FX(0)p 3447 839 V 3020 842 431
4 v 1595 935 a Gd(otherwise)p 1595 979 362 4 v 1604 1058
a Gb(\000)g F5(`)1691 1039 y Fx(I)1759 1058 y F4(T)f
FV(*)i F4(T)2968 998 y Gd(\()r(X)t(A)t(-)t(O)t F6(T)t(H)t(E)t(R)r
Gd(\))1276 1197 y Gb(\000)e F5(`)1362 1178 y Fx(I)1430
1197 y F4(T)h Fj(\032)g F4(T)1663 1167 y FX(0)1852 1197
y Gb(\000)g F5(`)1939 1178 y Fx(I)2007 1197 y F4(T)2058
1167 y FX(0)2104 1197 y FV(*)h F4(T)2234 1167 y FX(00)p
1276 1241 1001 4 v 1579 1320 a Gb(\000)f F5(`)1666 1301
y Fx(I)1734 1320 y F4(T)f FV(*)i F4(T)1930 1290 y FX(00)2923
1260 y Gd(\()r(X)t(A)t(-)t(R)t F6(E)t(D)t(U)t(C)t(E)r
Gd(\))450 1476 y F7(Algorithmic)19 b(typing)p 3055 1393
396 4 v 3055 1500 4 108 v 1982 w Gb(\000)k F5(`)3170
1456 y Fx(I)3237 1476 y F4(t)g FF(:)g F4(T)p 3447 1500
V 3055 1503 396 4 v 1637 1597 a(x:T)f F5(2)i Gb(\000)p
1606 1641 339 4 v 1606 1720 a(\000)f F5(`)1693 1701 y
Fx(I)1761 1720 y F4(x)f FF(:)i F4(T)3085 1660 y Gd(\()r(T)n(A)t(-)t(V)l
F6(A)t(R)q Gd(\))1171 1859 y Gb(\000)6 b(;)17 b F4(x:T)1393
1871 y F1(1)1457 1859 y F5(`)1476 1840 y Fx(I)1543 1859
y F4(t)1587 1871 y F1(2)1650 1859 y FF(:)24 b F4(T)1768
1871 y F1(2)1975 1859 y Gb(\000)f F5(`)2062 1840 y Fx(I)2129
1859 y F4(T)2173 1871 y F1(1)2236 1859 y FF(:)-25 b(:)24
b F4(*)p 1171 1903 1210 4 v 1352 1982 a Gb(\000)f F5(`)1439
1963 y Fx(I)1507 1982 y Gb(\025)p F4(x:T)1683 1994 y
F1(1)1723 1982 y F4(.t)1810 1994 y F1(2)1874 1982 y FF(:)g
F4(T)1992 1994 y F1(1)2032 1982 y FV(!)p F4(T)2159 1994
y F1(2)3093 1922 y Gd(\()r(T)n(A)t(-)t(A)t F6(B)t(S)p
Gd(\))499 2121 y Gb(\000)g F5(`)586 2102 y Fx(I)653 2121
y F4(t)697 2133 y F1(1)760 2121 y FF(:)h F4(T)878 2133
y F1(1)1085 2121 y Gb(\000)f F5(`)1172 2102 y Fx(I)1239
2121 y F4(T)1283 2133 y F1(1)1346 2121 y FV(*)h FY(\()p
F4(T)1500 2133 y F1(11)1577 2121 y FV(!)p F4(T)1704 2133
y F1(12)1781 2121 y FY(\))166 b Gb(\000)23 b F5(`)2066
2102 y Fx(I)2133 2121 y F4(t)2177 2133 y F1(2)2241 2121
y FF(:)g F4(T)2359 2133 y F1(2)2565 2121 y Gb(\000)g
F5(`)2652 2102 y Fx(I)2719 2121 y F4(T)2763 2133 y F1(2)2827
2121 y FV($)g F4(T)2976 2133 y F1(11)p 499 2164 2555
4 v 1484 2244 a Gb(\000)g F5(`)1571 2225 y Fx(I)1638
2244 y F4(t)1682 2256 y F1(1)1766 2244 y F4(t)1810 2256
y F1(2)1873 2244 y FF(:)g F4(T)1991 2256 y F1(12)3088
2184 y Gd(\()r(T)n(A)t(-)t(A)t F6(P)t(P)q Gd(\))1448
2383 y Gb(\000)6 b(;)17 b F4(X)o(:)-25 b(:K)1688 2395
y F1(1)1752 2383 y F5(`)1771 2364 y Fx(I)1838 2383 y
F4(t)1882 2395 y F1(2)1945 2383 y FF(:)24 b F4(T)2063
2395 y F1(2)p 1287 2426 979 4 v 1287 2506 a Gb(\000)f
F5(`)1374 2487 y Fx(I)1441 2506 y Gb(\025)p F4(X:)-25
b(:K)1636 2518 y F1(1)1676 2506 y F4(.t)1763 2518 y F1(2)1827
2506 y FF(:)23 b F5(8)p F4(X)o(:)-25 b(:K)2097 2518 y
F1(1)2137 2506 y F4(.T)2224 2518 y F1(2)3044 2446 y Gd(\()r(T)n(A)t(-)t
(T)n(A)t F6(B)t(S)p Gd(\))813 2645 y Gb(\000)23 b F5(`)900
2626 y Fx(I)967 2645 y F4(t)1011 2657 y F1(1)1075 2645
y FF(:)g F4(T)1193 2657 y F1(1)1399 2645 y Gb(\000)g
F5(`)1486 2626 y Fx(I)1553 2645 y F4(T)1597 2657 y F1(1)1661
2645 y FV(*)g F5(8)p F4(X:)-25 b(:K)1935 2657 y F1(1)1975
2645 y F4(.T)2062 2657 y F1(12)2305 2645 y Gb(\000)23
b F5(`)g F4(T)2490 2657 y F1(2)2554 2645 y FF(:)-25 b(:)24
b F4(K)2698 2657 y F1(1)p 813 2688 1926 4 v 1285 2768
a Gb(\000)f F5(`)1372 2749 y Fx(I)1440 2768 y F4(t)1483
2780 y F1(1)1567 2768 y F4([T)1655 2780 y F1(2)1695 2768
y F4(])g FF(:)g F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2079
2780 y F1(2)2119 2768 y F0(g)p F4(T)2190 2780 y F1(12)3039
2707 y Gd(\()r(T)n(A)t(-)t(T)n(A)t F6(P)t(P)q Gd(\))p
409 2837 9 36 v 418 2837 3000 6 v 3418 2837 38 6 v 3455
2837 9 36 v 450 3019 a Ge(28.1)c(De\002nition:)39 b Gd(The)21
b(set)g(of)g Ge(well-formed)e(contexts)f Gd(is)j(de\002ned)g(as)f
(follows:)1662 3143 y F5(`)j(;)d Gd(ok)1401 3276 y F5(`)j
Gb(\000)e Gd(ok)166 b Gb(\000)23 b F5(`)g F4(T)f FF(:)-25
b(:)24 b F4(*)p 1401 3319 750 4 v 1572 3399 a F5(`)f
Gb(\000)5 b(;)18 b F4(x:T)h Gd(ok)1660 3531 y F5(`)k
Gb(\000)e Gd(ok)p 1563 3575 427 4 v 1563 3654 a F5(`)i
Gb(\000)5 b(;)17 b F4(X:)-25 b(:K)20 b Gd(ok)3394 3751
y FZ(2)450 3934 y Ge(28.2)f(Proposition:)40 b Gd(If)20
b Gb(\000)j F5(`)g F4(t)g FF(:)g F4(T)d Gd(and)h F5(`)i
Gb(\000)d Gd(ok)q(,)g(then)h Gb(\000)i F5(`)g F4(T)g
FF(:)-25 b(:)23 b F4(*)p Gd(.)858 b FZ(2)450 4116 y F7(Pr)o(oof:)2744
b FZ(2)450 4299 y Ge(28.3)19 b(Proposition:)40 b Gd(If)34
b Gb(\000)49 b F5(`)g F4(t)f FF(:)h F4(T)p Gd(,)38 b(then)d(every)f
(type)h(annotation)g(on)g(a)g Gb(\025)p Gd(-abstraction)450
4399 y(within)22 b F4(t)p Gd(\224)e(has)h(kind)g F4(*)f
Gd(\(in)h(the)g(evident)f(context\).)1306 b FZ(2)450
4581 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19 b(induction)j(on)f
(typing)h(derivations.)878 b FZ(2)450 4764 y Ge(28.4)19
b(Theorem)h([Equivalence)d(of)22 b(declaractive)17 b(and)j(algorithmic)
f(typing]:)40 b Gd(Suppose)15 b(we)450 4864 y(have)20
b F5(`)j Gb(\000)e Gd(ok.)26 b(Then:)p eop
%%Page: 252 253
252 252 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)338
b Gd(2)t(8)t(.)29 b(I)t F6(M)t(P)t(L)t(E)t(M)t(E)t(N)t(T)t(I)t(N)t(G)c
Gd(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t F6(R)t(D)t(E)t(R)i
Gd(S)t F6(Y)t(S)t(T)t(E)t(M)t(S)339 b Gd(252)554 683
y(1.)41 b(If)20 b Gb(\000)j F5(`)821 664 y Fx(I)888 683
y F4(t)g FF(:)g F4(T)p Gd(,)d(then)i Gb(\000)g F5(`)h
F4(t)g FF(:)g F4(T)p Gd(.)554 849 y(2.)41 b(If)20 b Gb(\000)j
F5(`)g F4(t)f FF(:)i F4(T)o Gd(,)d(then)g Gb(\000)i F5(`)1373
830 y Fx(I)1440 849 y F4(t)g FF(:)g F4(S)e Gd(with)g
Gb(\000)i F5(`)g F4(S)f FV($)h F4(T)p Gd(.)3394 1015
y FZ(2)450 1198 y F7(Pr)o(oof:)2744 b FZ(2)450 1380 y
Ge(28.5)19 b(Theorem)h([Decidability]:)554 1546 y Gd(1.)41
b(The)20 b(context)h(well-formedness)g(r)o(ules)g(ar)o(e)e(syntax-dir)o
(ected)g(and)i(total.)554 1712 y(2.)41 b(The)28 b(algorithmic)h(typing)
g(r)o(elation)e(is)i(total)f(as)g(long)h(as)f(the)g(input)h(context)f
(is)h(well)658 1812 y(formed.)3394 1978 y FZ(2)450 2161
y F7(Pr)o(oof:)2744 b FZ(2)p eop
%%Page: 253 254
253 253 bop 450 1306 a F3(Chapter)44 b(29)450 1721 y
Gk(Higher)l(-Order)53 b(Subtyping)450 2177 y F7(Just)21
b(a)f(sketch.)575 2277 y(Some)g(kinding)g(pr)o(emises)h(ar)o(e)g
(omitted)e(in)i(the)g(subtyping)f(rules)h(pr)o(esented)g(her)o(e...)450
2526 y Gd(F)507 2495 y F1(!)496 2546 y Gc(<)-11 b(:)592
2526 y Ge(:)25 b(Higher)o(-order)20 b(bounded)f(quanti\002cation)1074
b Gd(F)3172 2538 y Gc(<)-11 b(:)3226 2526 y
 gsave currentpoint translate 0 124518 7800 div 646180 7800 div 453834
-7800 div box .9 setgray fill grestore
 3226 2526
a 16 w Ge(+)37 b Gd(F)3386 2495 y F1(!)p 409 2607 9 36
v 418 2578 3000 6 v 3418 2578 38 6 v 3455 2607 9 36 v
450 2697 a F7(Syntax)592 2828 y F4(t)61 b Gd(::=)1821
b F7(terms)852 2927 y F4(x)1774 b F7(variable)852 3027
y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)852
3127 y F4(t)43 b(t)1687 b F7(application)852 3226 y Gb(\025)p
F4(X)940 3226 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 3226 a 16 w F4(<:T)14 b(.t)1480 b
F7(type)20 b(abstraction)852 3326 y F4(t)43 b([T])1599
b F7(type)20 b(application)592 3525 y F4(v)61 b Gd(::=)1821
b F7(values)852 3625 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)21 b(value)852 3724 y Gb(\025)p F4(X)940
3724 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 940 3724 a 16 w F4(<:T)14 b(.t)1480 b F7(type)20
b(abstraction)g(value)592 3924 y F4(T)61 b Gd(::=)1821
b F7(types)852 4023 y F4(X)1774 b F7(type)20 b(variable)852
4123 y F4(Top)1686 b F7(maximum)19 b(type)852 4223 y
F4(T)p FV(!)o F4(T)1648 b F7(type)20 b(of)g(functions)852
4322 y F5(8)p F4(X)941 4322 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 941 4322 a 16 w F4(<:T)15
b(.T)1478 b F7(universal)21 b(type)852 4422 y Gb(\025)p
F4(X:)-25 b(:K.T)1534 b F7(operator)20 b(abstraction)852
4521 y F4(T)43 b(T)1687 b F7(operator)20 b(application)590
4721 y Gb(\000)62 b Gd(::=)1821 b F7(contexts)852 4820
y F5(;)1776 b F7(empty)19 b(context)852 4920 y Gb(\000)5
b(;)17 b F4(x:T)1596 b F7(term)21 b(variable)g(binding)1888
5169 y Gd(253)p eop
%%Page: 254 255
254 254 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)595
b Gd(2)t(9)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)597
b Gd(254)852 683 y Gb(\000)5 b(;)17 b F4(X)986 683 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore

986 683 a 16 w F4(<:T)1536 b F7(type)20 b(variable)h(binding)592
882 y F4(K)61 b Gd(::=)1821 b F7(kinds)852 982 y F4(*)1774
b F7(kind)20 b(of)h(pr)o(oper)f(types)852 1082 y F4(K)p
FV(\))o F4(K)1648 b F7(kind)20 b(of)h(operators)450 1296
y(Evaluation)p 3096 1209 355 4 v 3096 1321 4 113 v 2304
w F4(t)i F5(\000)-15 b FV(!)23 b F4(t)3398 1266 y FX(0)p
3447 1321 V 3096 1324 355 4 v 1155 1411 a F4(\()p Gb(\025)p
F4(x)o(:T)1374 1423 y F1(11)1451 1411 y F4(.t)1538 1423
y F1(12)1615 1411 y F4(\))43 b(v)1746 1423 y F1(2)1810
1411 y F5(\000)-15 b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g
F4(v)2209 1423 y F1(2)2250 1411 y F0(g)p F4(t)2320 1423
y F1(12)3113 1412 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p
Gd(\))1602 1550 y F4(t)1645 1562 y F1(1)1709 1550 y F5(\000)-14
b FV(!)23 b F4(t)1917 1520 y FX(0)1909 1573 y F1(1)p
1474 1593 604 4 v 1474 1673 a F4(t)1518 1685 y F1(1)1602
1673 y F4(t)1645 1685 y F1(2)1709 1673 y F5(\000)-14
b FV(!)23 b F4(t)1917 1643 y FX(0)1909 1696 y F1(1)1994
1673 y F4(t)2037 1685 y F1(2)3105 1612 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1602 1812 y F4(t)1645 1824 y F1(2)1709
1812 y F5(\000)-14 b FV(!)23 b F4(t)1917 1782 y FX(0)1909
1835 y F1(2)p 1474 1855 V 1474 1934 a F4(v)1518 1946
y F1(1)1602 1934 y F4(t)1645 1946 y F1(2)1709 1934 y
F5(\000)-14 b FV(!)23 b F4(v)1909 1946 y F1(1)1994 1934
y F4(t)2045 1904 y FX(0)2037 1958 y F1(2)3105 1874 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))1074 2074 y
F4(\()p Gb(\025)p F4(X)1206 2074 y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1206 2074 a 16 w F4(<:T)1353
2086 y F1(11)1445 2074 y F4(.t)1532 2086 y F1(12)1609
2074 y F4(\))43 b([T)1784 2086 y F1(2)1824 2074 y F4(])23
b F5(\000)-15 b FV(!)24 b F0(f)p F4(X)e F5(7)p FV(!)h
F4(T)2290 2086 y F1(2)2331 2074 y F0(g)p F4(t)2401 2086
y F1(12)3067 2075 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)t
Gd(2\))1602 2213 y F4(t)1645 2225 y F1(1)1709 2213 y
F5(\000)-14 b FV(!)23 b F4(t)1917 2183 y FX(0)1909 2236
y F1(1)p 1387 2256 778 4 v 1387 2335 a F4(t)1431 2347
y F1(1)1515 2335 y F4([T)1602 2347 y F1(2)1642 2335 y
F4(])g F5(\000)-14 b FV(!)23 b F4(t)1917 2306 y FX(0)1909
2359 y F1(1)1994 2335 y F4([T)2081 2347 y F1(2)2121 2335
y F4(])3102 2275 y Gd(\()r(E)t(-)t(T)n(A)t F6(P)t(P)q
Gd(\))450 2491 y F7(T)-8 b(ype)20 b(equivalence)p 3036
2408 415 4 v 3036 2516 4 108 v 2050 w Gb(\000)j F5(`)f
F4(S)h FV($)g F4(T)p 3447 2516 V 3036 2519 415 4 v 1600
2613 a Gb(\000)f F5(`)h F4(T)g FF(:)-25 b(:)24 b F4(K)p
1513 2656 526 4 v 1513 2735 a Gb(\000)f F5(`)g F4(T)g
FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3108 2675 y Gd(\()r(Q)t(-)t(R)t
F6(E)t(FL)q Gd(\))1513 2874 y Gb(\000)f F5(`)g F4(T)g
FV($)g F4(S)f FF(:)-25 b(:)24 b F4(K)p 1513 2918 V 1513
2997 a Gb(\000)f F5(`)g F4(S)g FV($)g F4(T)f FF(:)-25
b(:)24 b F4(K)3064 2937 y Gd(\()r(Q)t(-)t(S)t F6(Y)t(M)t(M)q
Gd(\))1168 3136 y Gb(\000)e F5(`)h F4(S)g FV($)g F4(U)g
FF(:)-25 b(:)23 b F4(K)166 b Gb(\000)23 b F5(`)g F4(U)f
FV($)h F4(T)g FF(:)-25 b(:)24 b F4(K)p 1168 3180 1217
4 v 1513 3259 a Gb(\000)f F5(`)g F4(S)g FV($)g F4(T)f
FF(:)-25 b(:)24 b F4(K)3036 3199 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))1087 3398 y Gb(\000)e F5(`)h
F4(S)1272 3410 y F1(1)1335 3398 y FV($)g F4(T)1485 3410
y F1(1)1549 3398 y FF(:)-25 b(:)23 b F4(*)166 b Gb(\000)23
b F5(`)g F4(S)2044 3410 y F1(2)2108 3398 y FV($)g F4(T)2257
3410 y F1(2)2321 3398 y FF(:)-25 b(:)24 b F4(*)p 1087
3442 1379 4 v 1306 3521 a Gb(\000)e F5(`)h F4(S)1491
3533 y F1(1)1531 3521 y FV(!)p F4(S)1658 3533 y F1(2)1722
3521 y FV($)g F4(T)1871 3533 y F1(1)1912 3521 y FV(!)p
F4(T)2038 3533 y F1(2)2102 3521 y FF(:)-25 b(:)24 b F4(*)3001
3461 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(\))1343
3660 y Gb(\000)5 b(;)1433 3660 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 1433 3660 a 16 w F4(X<:U)37
b F5(`)23 b F4(S)1780 3672 y F1(2)1843 3660 y FV($)g
F4(T)1993 3672 y F1(2)2034 3660 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2034 3660 a 15 w FF(:)-25
b(:)24 b F4(*)p 1173 3704 1207 4 v 1173 3783 a Gb(\000)f
F5(`)g(8)1361 3783 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 1361 3783 a 15 w F4(X<:U)15 b(.S)1654
3795 y F1(2)1717 3783 y FV($)23 b F5(8)1870 3783 y
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 1870
3783 a 15 w F4(X<:U)14 b(.T)2163 3795 y F1(2)2203 3783
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2203 3783 a 16 w FF(:)-25 b(:)24 b F4(*)3135 3723 y
Gd(\()r(Q)t(-)t(A)t F6(L)t(L)q Gd(\))1069 3922 y Gb(\000)5
b(;)17 b F4(X:)-25 b(:K)1309 3934 y F1(11)1409 3922 y
F5(`)23 b F4(T)1526 3934 y F1(12)1626 3922 y FF(:)-25
b(:)24 b F4(K)1770 3934 y F1(12)2013 3922 y Gb(\000)f
F5(`)g F4(T)2199 3934 y F1(2)2262 3922 y FF(:)-25 b(:)24
b F4(K)2406 3934 y F1(11)p 978 3966 1596 4 v 978 4045
a Gb(\000)f F5(`)g F4(\()p Gb(\025)p F4(X:)-25 b(:K)1358
4057 y F1(11)1435 4045 y F4(.T)1522 4057 y F1(12)1599
4045 y F4(\))43 b(T)1729 4057 y F1(2)1793 4045 y FV($)23
b F0(f)p F4(X)f F5(7)p FV(!)h F4(T)2142 4057 y F1(2)2182
4045 y F0(g)p F4(T)2253 4057 y F1(12)2353 4045 y FF(:)-25
b(:)23 b F4(K)2497 4057 y F1(12)3098 3985 y Gd(\()r(Q)t(-)t(B)t
F6(E)t(T)o(A)q Gd(\))1133 4184 y Gb(\000)g F5(`)f F4(S)h
FF(:)-25 b(:)24 b F4(K)1485 4196 y F1(1)1526 4184 y FV(\))p
F4(K)1652 4196 y F1(2)1859 4184 y Gb(\000)f F5(`)g F4(T)f
FF(:)-25 b(:)24 b F4(K)2212 4196 y F1(1)2252 4184 y FV(\))p
F4(K)2379 4196 y F1(2)1288 4284 y Gb(\000)5 b(;)18 b
F4(X:)-25 b(:K)1528 4296 y F1(1)1592 4284 y F5(`)23 b
F4(S)43 b(X)22 b FV($)h F4(T)44 b(X)22 b FF(:)-25 b(:)24
b F4(K)2224 4296 y F1(2)p 1133 4327 1287 4 v 1423 4407
a Gb(\000)e F5(`)h F4(S)g FV($)g F4(T)g FF(:)g F4(K)1922
4419 y F1(1)1962 4407 y FV(\))p F4(K)2089 4419 y F1(2)3145
4346 y Gd(\()r(Q)t(-)t(E)t F6(X)t(T)r Gd(\))1334 4546
y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1575 4558 y F1(1)1638
4546 y F5(`)23 b F4(S)1756 4558 y F1(2)1819 4546 y FV($)g
F4(T)1969 4558 y F1(2)2033 4546 y FF(:)-25 b(:)23 b F4(K)2177
4558 y F1(2)p 1090 4589 1371 4 v 1090 4669 a Gb(\000)g
F5(`)g Gb(\025)p F4(X:)-25 b(:K)1427 4681 y F1(1)1467
4669 y F4(.S)1554 4681 y F1(2)1618 4669 y FV($)23 b Gb(\025)p
F4(X:)-25 b(:K)1918 4681 y F1(1)1959 4669 y F4(.T)2046
4681 y F1(2)2110 4669 y FF(:)g(:)23 b F4(K)2254 4681
y F1(1)2294 4669 y FV(\))p F4(K)2421 4681 y F1(2)3092
4608 y Gd(\()r(Q)t(-)t(T)n(A)t F6(B)t(S)q Gd(\))908 4808
y Gb(\000)g F5(`)g F4(S)1093 4820 y F1(1)1157 4808 y
FV($)g F4(T)1306 4820 y F1(1)1370 4808 y FF(:)-25 b(:)24
b F4(K)1514 4820 y F1(11)1591 4808 y FV(\))p F4(K)1718
4820 y F1(12)1961 4808 y Gb(\000)f F5(`)f F4(S)2146 4820
y F1(2)2209 4808 y FV($)i F4(T)2359 4820 y F1(2)2423
4808 y FF(:)-25 b(:)23 b F4(K)2567 4820 y F1(11)p 908
4851 1736 4 v 1307 4931 a Gb(\000)f F5(`)h F4(S)1492
4943 y F1(1)1576 4931 y F4(S)1620 4943 y F1(2)1683 4931
y FV($)g F4(T)1833 4943 y F1(1)1917 4931 y F4(S)1960
4943 y F1(2)2024 4931 y FF(:)-25 b(:)24 b F4(K)2168 4943
y F1(12)3136 4870 y Gd(\()r(Q)t(-)t(A)t F6(P)t(P)r Gd(\))p
eop
%%Page: 255 256
255 255 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)595
b Gd(2)t(9)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)597
b Gd(255)450 793 y F7(Kinding)p 3041 710 410 4 v 3041
818 4 108 v 2342 w Gb(\000)23 b F5(`)g F4(T)f FF(:)-25
b(:)24 b F4(K)p 3447 818 V 3041 821 410 4 v 1325 918
a
 gsave currentpoint translate 0 124518 7800 div 1625280 7800 div 525016
-7800 div box .9 setgray fill grestore
 1325 918 a 16 w F4(X<:T)37 b F5(2)23 b Gb(\000)1843
918 y
 gsave currentpoint translate 0 124518 7800 div 3032224 7800 div 579629
-7800 div box .9 setgray fill grestore
 1843 918 a 16 w Gb(\000)g F5(`)f F4(T)h FF(:)-25
b(:)24 b F4(K)p 1325 961 903 4 v 1600 1041 a Gb(\000)e
F5(`)h F4(X)g FF(:)-25 b(:)24 b F4(K)3083 981 y Gd(\()r(K)t(-)t(T)t(V)l
F6(A)t(R)r Gd(\))1433 1180 y Gb(\000)6 b(;)1524 1180
y
 gsave currentpoint translate 0 222821 7800 div 1945048 7800 div 525016
-7800 div box .9 setgray fill grestore
 1524 1180 a 16 w F4(X<:T)1714 1192 y F1(1)1793 1180
y F5(`)23 b F4(T)1911 1192 y F1(2)1974 1180 y FF(:)-25
b(:)24 b F4(*)p 1411 1223 730 4 v 1411 1303 a Gb(\000)f
F5(`)g(8)p F4(X)1643 1303 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1643 1303 a 15 w F4(<:T)1789
1315 y F1(1)1845 1303 y F4(.T)1933 1315 y F1(2)1996 1303
y FF(:)-25 b(:)24 b F4(*)3140 1243 y Gd(\()r(K)t(-)t(A)t
F6(L)t(L)q Gd(\))1353 1443 y Gb(\000)6 b(;)17 b F4(X)1488
1443 y
 gsave currentpoint translate 0 292647 7800 div 2538292 7800 div 525016
-7800 div box .9 setgray fill grestore
 1488 1443 a 1504 1442 a F4(<:Top)1722 1454 y Gc(K)1753
1464 y FB(1)1833 1443 y F5(`)22 b F4(T)1950 1455 y F1(2)2014
1443 y FF(:)-25 b(:)23 b F4(K)2158 1455 y F1(2)p 1336
1493 880 4 v 1336 1572 a Gb(\000)g F5(`)g Gb(\025)p F4(X:)-25
b(:K)1672 1584 y F1(1)1713 1572 y F4(.T)1800 1584 y F1(2)1864
1572 y FF(:)g(:)23 b F4(K)2008 1584 y F1(1)2048 1572
y FV(\))p F4(K)2175 1584 y F1(2)3097 1512 y Gd(\()r(K)t(-)t(T)n(A)t
F6(B)t(S)q Gd(\))1121 1711 y Gb(\000)g F5(`)g F4(T)1306
1723 y F1(1)1370 1711 y FF(:)-25 b(:)24 b F4(K)1514 1723
y F1(11)1591 1711 y FV(\))p F4(K)1718 1723 y F1(12)1961
1711 y Gb(\000)f F5(`)f F4(T)2146 1723 y F1(2)2209 1711
y FF(:)-25 b(:)24 b F4(K)2354 1723 y F1(11)p 1121 1755
1310 4 v 1477 1834 a Gb(\000)f F5(`)g F4(T)1662 1846
y F1(1)1746 1834 y F4(T)1790 1846 y F1(2)1854 1834 y
FF(:)-25 b(:)23 b F4(K)1998 1846 y F1(12)3092 1774 y
Gd(\()r(K)t(-)t(T)n(A)t F6(P)t(P)r Gd(\))1300 1973 y
Gb(\000)g F5(`)f F4(T)1485 1985 y F1(1)1549 1973 y FF(:)-25
b(:)23 b F4(*)166 b Gb(\000)23 b F5(`)g F4(T)2044 1985
y F1(2)2108 1973 y FF(:)-25 b(:)23 b F4(*)p 1300 2016
953 4 v 1496 2096 a Gb(\000)g F5(`)f F4(T)1681 2108 y
F1(1)1722 2096 y FV(!)p F4(T)1848 2108 y F1(2)1912 2096
y FF(:)-25 b(:)23 b F4(*)3006 2036 y Gd(\()r(K)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))450 2251 y F7(Subtyping)p 3033
2169 418 4 v 3033 2276 4 108 v 2258 w Gb(\000)g F5(`)g
F4(S)f FF(<)-17 b(:)24 b F4(T)p 3447 2276 V 3033 2279
418 4 v 1332 2373 a Gb(\000)f F5(`)g F4(S)f FF(<)-17
b(:)24 b F4(U)166 b Gb(\000)23 b F5(`)g F4(U)f FF(<)-17
b(:)24 b F4(T)p 1332 2416 888 4 v 1595 2496 a Gb(\000)f
F5(`)g F4(S)g FF(<)-17 b(:)24 b F4(T)3058 2435 y Gd(\()r(S)t(-)t(T)t
F6(R)t(A)t(N)t(S)q Gd(\))1505 2639 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1505 2639 a 16 w
Gb(\000)e F5(`)16 b F4(S)23 b FV($)g F4(T)1871 2639 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore

1871 2639 a 16 w FF(:)-25 b(:)24 b F4(K)p 1505 2682 543
4 v 1591 2765 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1591 2765 a 16 w Gb(\000)f F5(`)15 b
F4(S)23 b FF(<)-17 b(:)24 b F4(T)3152 2701 y Gd(\()r(S)t(-)t(E)t
F6(Q)t(V)q Gd(\))1552 2904 y Gb(\000)f F5(`)g F4(S)f
FF(<)-17 b(:)24 b F4(Top)3161 2905 y Gd(\()r(S)t(-)t(T)s
F6(O)t(P)q Gd(\))1251 3043 y Gb(\000)f F5(`)g F4(T)1436
3055 y F1(1)1500 3043 y FF(<)-17 b(:)24 b F4(S)1652 3055
y F1(1)1859 3043 y Gb(\000)f F5(`)g F4(S)2044 3055 y
F1(2)2108 3043 y FF(<)-17 b(:)24 b F4(T)2260 3055 y F1(2)p
1251 3087 1050 4 v 1388 3166 a Gb(\000)f F5(`)g F4(S)1573
3178 y F1(1)1614 3166 y FV(!)p F4(S)1740 3178 y F1(2)1804
3166 y FF(<)-17 b(:)24 b F4(T)1956 3178 y F1(1)1997 3166
y FV(!)p F4(T)2123 3178 y F1(2)3023 3106 y Gd(\()r(S)t(-)t(A)t
F6(R)t(R)t(O)t(W)r Gd(\))1616 3305 y F4(X<:T)d F5(2)i
Gb(\000)p 1595 3349 361 4 v 1595 3428 a(\000)g F5(`)g
F4(X)g FF(<)-17 b(:)24 b F4(T)3100 3368 y Gd(\()r(S)t(-)t(T)t(V)l
F6(A)t(R)q Gd(\))1424 3567 y Gb(\000)6 b(;)17 b F4(X<:)o(U)1690
3579 y F1(1)1753 3567 y F5(`)23 b F4(S)1871 3579 y F1(2)1934
3567 y FF(<)-17 b(:)24 b F4(T)2087 3579 y F1(2)p 1250
3611 1052 4 v 1250 3690 a Gb(\000)f F5(`)g(8)p F4(X<:)n(U)1613
3702 y F1(1)1653 3690 y F4(.S)1740 3702 y F1(2)1804 3690
y FF(<)-17 b(:)24 b F5(8)p F4(X<:)n(U)2133 3702 y F1(1)2174
3690 y F4(.T)2261 3702 y F1(2)3157 3630 y Gd(\()r(S)t(-)t(A)t
F6(L)t(L)p Gd(\))1283 3909 y
 gsave currentpoint translate 0 851966 7800 div 7783172 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1283 3909 a 1457 3853 a
Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)22 b F5(`)g F4(S)1838
3865 y F1(2)1902 3853 y FF(<)-17 b(:)24 b F4(T)2054 3865
y F1(2)p 1317 3890 918 4 v 1317 3963 a Gb(\000)f F5(`)g
Gb(\025)p F4(X:)-25 b(:K.S)1740 3975 y F1(2)1804 3963
y FF(<)-17 b(:)24 b Gb(\025)p F4(X:)-25 b(:K.T)2194 3975
y F1(2)3163 3909 y Gd(\()r(S)t(-)t(A)t F6(B)t(S)p Gd(\))1434
4206 y
 gsave currentpoint translate 0 851966 7800 div 5401900 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1434 4206 a 1555 4150 a Gb(\000)23 b F5(`)g F4(S)1740
4162 y F1(1)1804 4150 y FF(<)-17 b(:)24 b F4(T)1956 4162
y F1(1)p 1468 4187 617 4 v 1468 4260 a Gb(\000)f F5(`)f
F4(S)1653 4272 y F1(1)1737 4260 y F4(U)h FF(<)-17 b(:)24
b F4(T)1956 4272 y F1(1)2040 4260 y F4(U)3158 4206 y
Gd(\()r(S)t(-)t(A)t F6(P)t(P)q Gd(\))450 4439 y F7(T)-8
b(yping)p 3067 4357 383 4 v 3067 4464 4 108 v 2408 w
Gb(\000)22 b F5(`)h F4(t)g FF(:)g F4(T)p 3447 4464 V
3067 4467 383 4 v 1637 4561 a(x:T)f F5(2)i Gb(\000)p
1613 4604 327 4 v 1613 4684 a(\000)f F5(`)f F4(x)h FF(:)g
F4(T)3152 4623 y Gd(\()r(T)o(-)t(V)l F6(A)t(R)r Gd(\))p
eop
%%Page: 256 257
256 256 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)595
b Gd(2)t(9)t(.)29 b(H)t F6(I)t(G)t(H)t(E)t(R)t Gd(-)t(O)t
F6(R)t(D)t(E)t(R)e Gd(S)t F6(U)t(B)t(T)t(Y)t(P)t(I)t(N)t(G)597
b Gd(256)1184 670 y Gb(\000)23 b F5(`)g F4(T)1369 682
y F1(1)1433 670 y FF(:)-25 b(:)24 b F4(*)165 b Gb(\000)6
b(;)17 b F4(x:T)1965 682 y F1(1)2028 670 y F5(`)23 b
F4(t)2146 682 y F1(2)2209 670 y FF(:)h F4(T)2327 682
y F1(2)p 1184 713 1184 4 v 1359 792 a Gb(\000)f F5(`)f
Gb(\025)p F4(x:T)1676 804 y F1(1)1717 792 y F4(.t)1804
804 y F1(2)1867 792 y FF(:)i F4(T)1985 804 y F1(1)2026
792 y FV(!)p F4(T)2152 804 y F1(2)3160 732 y Gd(\()r(T)o(-)t(A)t
F6(B)t(S)q Gd(\))1148 932 y Gb(\000)e F5(`)h F4(t)1333
944 y F1(1)1396 932 y FF(:)h F4(T)1514 944 y F1(11)1591
932 y FV(!)p F4(T)1718 944 y F1(12)1961 932 y Gb(\000)f
F5(`)f F4(t)2146 944 y F1(2)2209 932 y FF(:)i F4(T)2327
944 y F1(11)p 1148 975 1257 4 v 1490 1054 a Gb(\000)f
F5(`)g F4(t)1676 1066 y F1(1)1760 1054 y F4(t)1803 1066
y F1(2)1867 1054 y FF(:)g F4(T)1985 1066 y F1(12)3155
994 y Gd(\()r(T)o(-)t(A)t F6(P)t(P)r Gd(\))1349 1193
y Gb(\000)g F5(`)g F4(t)g FF(:)g F4(S)166 b Gb(\000)22
b F5(`)h F4(S)g FF(<)-17 b(:)24 b F4(T)p 1349 1237 854
4 v 1613 1316 a Gb(\000)f F5(`)f F4(t)h FF(:)g F4(T)3164
1256 y Gd(\()r(T)o(-)t(S)t F6(U)t(B)q Gd(\))1446 1455
y Gb(\000)6 b(;)17 b F4(X)1581 1455 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 1581 1455 a 16
w F4(<:T)37 b F5(`)23 b F4(t)1884 1467 y F1(2)1947 1455
y FF(:)g F4(T)2065 1467 y F1(2)p 1277 1499 998 4 v 1277
1578 a Gb(\000)g F5(`)g Gb(\025)p F4(X)1507 1578 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 1507
1578 a 16 w F4(<:T)15 b(.t)1757 1590 y F1(2)1821 1578
y FF(:)23 b F5(8)p F4(X)1985 1578 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 1985 1578 a 15 w
F4(<:T)15 b(.T)2234 1590 y F1(2)3111 1518 y Gd(\()r(T)o(-)t(T)n(A)t
F6(B)t(S)q Gd(\))1030 1721 y Gb(\000)23 b F5(`)g F4(t)1215
1733 y F1(1)1279 1721 y FF(:)g F5(8)p F4(X)1443 1721
y
 gsave currentpoint translate 0 222821 7800 div 1887987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1443 1721 a 16 w F4(<:T)1589 1733 y F1(11)1682 1721
y F4(.T)1769 1733 y F1(12)2012 1721 y
 gsave currentpoint translate 0 222821 7800 div 4024298 7800 div 579629
-7800 div box .9 setgray fill grestore
 2012 1721 a 16
w Gb(\000)g F5(`)f F4(T)2213 1733 y F1(2)2277 1721 y
FF(<)-17 b(:)24 b F4(T)2429 1733 y F1(11)p 1030 1764
1492 4 v 1292 1844 a Gb(\000)f F5(`)f F4(t)1477 1856
y F1(1)1561 1844 y F4([T)1648 1856 y F1(2)1689 1844 y
F4(])g FF(:)i F0(f)p F4(X)e F5(7)p FV(!)h F4(T)2073 1856
y F1(2)2113 1844 y F0(g)p F4(T)2183 1856 y F1(12)3106
1783 y Gd(\()r(T)o(-)t(T)n(A)t F6(P)t(P)r Gd(\))450 1974
y F7(Abbr)o(eviations)1021 2100 y Gd(unannotated)e(binder)f(for)h
F4(X)2049 2053 y FK(def)2059 2101 y FY(=)2237 2100 y
F4(X)2281 2100 y
 gsave currentpoint translate 0 270154 7800 div 1969341 7800 div 525016
-7800 div box .9 setgray fill grestore
 2281 2100 a 2297 2101 a F4(<:Top)1456
2267 y
 gsave currentpoint translate 0 530384 7800 div 5048554 7800 div 858065
-7800 div box .9 setgray fill grestore
 1456 2267 a 1480 2280 a F4(Top)1611 2292 y Gc(*)1752
2233 y FK(def)1762 2281 y FY(=)1941 2280 y F4(Top)1174
2467 y
 gsave currentpoint translate 0 530384 7800 div 9503931 7800 div 858065
-7800 div box .9 setgray fill grestore
 1174 2467 a 1198 2480 a F4(Top)1329 2492 y Gc(K)1360
2502 y FB(1)1397 2492 y FC(\))p Gc(K)1493 2502 y FB(2)1640
2433 y FK(def)1650 2480 y FY(=)116 b Gb(\025)p F4(X:)-25
b(:K)2023 2492 y F1(1)2064 2480 y F4(.)43 b(Top)2282
2492 y Gc(K)2313 2502 y FB(2)p 409 2596 9 36 v 418 2596
3000 6 v 3418 2596 38 6 v 3455 2596 9 36 v eop
%%Page: 257 258
257 257 bop 450 1306 a F3(Chapter)44 b(30)450 1721 y
Gk(Polymorphic)51 b(Update)450 2177 y F7(This)20 b(chapter)g(is)h(just)
g(a)g(sketch.)575 2277 y(The)f(mechanism)g(of)g(polymorphic)f(update)g
(is)j(quite)f(a)f(bit)h(less)h(\223mainstr)o(eam\224)d(than)h(almost)g
(all)450 2376 y(of)25 b(what')-5 b(s)24 b(cover)o(ed)g(in)h(the)f(r)o
(est)h(of)g(the)f(chapters.)37 b(It')-5 b(s)24 b(not)h(completely)e
(clear)i(that)f(it)g(belongs.)38 b(On)450 2476 y(the)20
b(other)h(hand,)e(it)i(makes)f(the)g(object)h(encoding)f(examples)h(in)
g(Chapter)f(31)g(vastly)f(clear)o(er)-6 b(.)575 2575
y(In)32 b(fact,)i(I'm)e(tempted)f(to)h(go)f(even)i(further)g(and)f
(intr)o(oduce)f(an)i(ad-hoc)d(\223in)j(place)f(update\224)450
2675 y(operation)24 b(for)g(existential)g(types)g(\(following)f(a)i
(suggestion)f(in)g([HP98)n(]\).)35 b(This)24 b(makes)g(it)g(possible)
450 2775 y(to)c(do)g(the)h(whole)f(of)h(Chapter)f(31)g(in)h(a)f
(second-order)h(setting,)f(befor)o(e)i(discussing)f(type)e(operators.)
450 3040 y Ge(Polymorphic)h(update)1744 b Gd(F)3015 3052
y Gc(<)-11 b(:)3069 3040 y Ge(+)21 b FA(fg)34 b F7(update)p
409 3122 9 36 v 418 3093 3000 6 v 3418 3093 38 6 v 3455
3122 9 36 v 450 3212 a(New)21 b(syntactic)e(forms)592
3343 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 3442
y F4({)895 3442 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 895 3442 a 16 w Gb(\023)939 3454 y
F1(i)986 3442 y F4(l)1029 3454 y F1(i)1061 3442 y F4(=t)1148
3454 y F1(i)1189 3412 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)1346
3442 y F4(})1280 b F7(r)o(ecord)852 3542 y
 gsave currentpoint translate 0 124518 7800 div 2280641 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 3542 a
15 w F4(t)p FV( )p F4(l=t)1544 b F7(\002eld)20 b(update)592
3741 y F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 3841
y F4({)895 3841 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 895 3841 a 16 w Gb(\023)939 3853 y
F1(i)986 3841 y F4(l)1029 3853 y F1(i)1061 3841 y F4(:T)1148
3853 y F1(i)1189 3811 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)1346
3841 y F4(})1280 b F7(type)20 b(of)g(r)o(ecords)576 4040
y
 gsave currentpoint translate 0 124518 7800 div 468516 7800 div 425418
-7800 div box .9 setgray fill grestore
 576 4040 a 16 w Gb(\023)77 b Gd(::=)852 4040 y
 gsave currentpoint translate 0 124518 7800 div 593097 7800 div 525016
-7800 div box .9 setgray fill grestore
 852
4040 a 15 w F4(#)1759 b F7(invariant)15 b(\(updatable\))g(\002eld)852
4140 y
 gsave currentpoint translate 0 131070 7800 div 2251130 7800 div 604894
-7800 div box .9 setgray fill grestore
 852 4140 a 15 w F7(omitted)1548 b(covariant)20
b(\(\002xed\))f(\002eld)450 4355 y(New)i(evaluation)f(rules)p
3096 4267 355 4 v 3096 4379 4 113 v 1960 w F4(t)j F5(\000)-15
b FV(!)23 b F4(t)3398 4324 y FX(0)p 3447 4379 V 3096
4382 355 4 v 1005 4551 a
 gsave currentpoint translate 0 812646 7800 div 12168008 7800 div 1140326
-7800 div box .9 setgray fill grestore
 1005 4551 a 1400 4500 a F4({)p
Gb(\023)1472 4512 y F1(i)1503 4500 y F4(l)1546 4512 y
F1(i)1578 4500 y F4(=v)1665 4512 y F1(i)1707 4470 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)1863 4500 y F4(})p FV( )p
F4(l)2033 4512 y F1(i)2065 4500 y F4(=v)1029 4600 y F5(\000)c
FV(!)23 b F4({)p Gb(\023)1258 4612 y F1(i)1289 4600 y
F4(l)1332 4612 y F1(i)1364 4600 y F4(=v)1451 4612 y F1(i)1492
4570 y FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(i)p Fy(-)p FB(1)1711
4600 y F4(,l)1798 4612 y F1(i)1829 4600 y F4(=v,)o Gb(\023)1988
4612 y F1(k)2032 4600 y F4(l)2076 4612 y F1(k)2120 4600
y F4(=v)2207 4612 y F1(k)2262 4570 y FB(k)p Fz(2)o FB(i)g
Fy(+)g FB(1)g(:)g(:)g(n)2479 4600 y F4(})2804 4551 y
Gd(\()r(E)t(-)t(U)t F6(P)t(D)t(A)o(T)t(E)t Gd(B)t F6(E)t(T)o(A)p
Gd(\))1322 4763 y F4({)1366 4763 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1366 4763 a 15 w Gb(\023)1409
4775 y F1(i)1456 4763 y F4(l)1500 4775 y F1(i)1531 4763
y F4(=v)1618 4775 y F1(i)1660 4733 y FB(i)p Fz(2)p FB(1)g(:)g(:)g(n)
1816 4763 y F4(}.l)1947 4775 y F1(j)2000 4763 y F5(\000)c
FV(!)23 b F4(v)2200 4775 y F1(j)2946 4764 y Gd(\()r(E)t(-)t(R)t
F6(C)t(D)t Gd(B)t F6(E)t(T)o(A)r Gd(\))1888 5169 y(257)p
eop
%%Page: 258 259
258 258 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)681
b Gd(3)t(0)t(.)29 b(P)t F6(O)t(L)n(Y)t(M)t(O)t(R)t(P)t(H)t(I)t(C)f
Gd(U)t F6(P)t(D)t(A)o(T)t(E)682 b Gd(258)1881 670 y F4(t)1925
682 y F1(j)1977 670 y F5(\000)-14 b FV(!)23 b F4(t)2185
640 y FX(0)2178 693 y F1(j)p 460 717 3170 4 v 460 798
a F4({)504 798 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 504 798 a 519 797 a Gb(\023)547 809
y F1(i)594 798 y F4(l)638 810 y F1(i)669 798 y F4(=v)756
810 y F1(i)798 767 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(j)g
Fy(-)g FB(1)996 798 y F4(,)1040 798 y
 gsave currentpoint translate 0 309621 7800 div 701344 7800 div 425418
-7800 div box .9 setgray fill grestore
 1040 798 a 1055
797 a Gb(\023)1083 809 y F1(j)1128 798 y F4(l)1172 810
y F1(j)1202 798 y F4(=t)1289 810 y F1(j)1318 798 y F4(,)1362
798 y
 gsave currentpoint translate 0 222821 7800 div 817404 7800 div 425418
-7800 div box .9 setgray fill grestore
 1362 798 a 1378 797 a Gb(\023)1406 809 y F1(k)1465
798 y F4(l)1509 810 y F1(k)1553 798 y F4(=t)1640 810
y F1(k)1695 767 y FB(k)p Fz(2)p FB(j)g Fy(+)e FB(1)i(:)g(:)g(n)1911
798 y F4(})22 b F5(\000)-14 b FV(!)23 b F4({)2178 798
y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 2178 798 a 2194 797 a Gb(\023)2222 809 y F1(i)2268
798 y F4(l)2312 810 y F1(i)2343 798 y F4(=v)2431 810
y F1(i)2472 767 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(j)g
Fy(-)g FB(1)2670 798 y F4(,)2714 798 y
 gsave currentpoint translate 0 309621 7800 div 701344 7800 div 425418
-7800 div box .9 setgray fill grestore
 2714 798 a 2730
797 a Gb(\023)2758 809 y F1(j)2803 798 y F4(l)2846 810
y F1(j)2876 798 y F4(=t)2970 767 y FX(0)2963 820 y F1(j)2994
798 y F4(,)3037 798 y
 gsave currentpoint translate 0 222821 7800 div 817404 7800 div 425418
-7800 div box .9 setgray fill grestore
 3037 798 a 3053 797 a Gb(\023)3081
809 y F1(k)3141 798 y F4(l)3184 810 y F1(k)3229 798 y
F4(=t)3316 810 y F1(k)3370 767 y FB(k)p Fz(2)p FB(j)g
Fy(+)f FB(1)h(:)g(:)g(n)3586 798 y F4(})2992 905 y Gd(\()r(E)t(-)t(R)t
F6(E)t(C)t(O)t(R)t(D)s Gd(\))450 1048 y F7(New)21 b(subtyping)f(rules)p
3033 966 418 4 v 3033 1073 4 108 v 1909 w Gb(\000)j F5(`)g
F4(S)f FF(<)-17 b(:)24 b F4(T)p 3447 1073 V 3033 1076
418 4 v 1056 1174 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1056 1174 a 16 w Gb(\000)f F5(`)15
b F4({)1250 1174 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1250 1174 a 16 w Gb(\023)1294 1186
y F1(i)1341 1174 y F4(l)1384 1186 y F1(i)1416 1174 y
F4(:T)1503 1186 y F1(i)1544 1144 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)p Fy(+)o FB(k)1782 1174 y F4(})23 b FF(<)-17
b(:)24 b F4({)2001 1174 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 2001 1174 a 16 w Gb(\023)2045
1186 y F1(i)2092 1174 y F4(l)2136 1186 y F1(i)2167 1174
y F4(:T)2254 1186 y F1(i)2296 1144 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2452 1174 y F4(})2844 1173 y Gd(\()r(S)t(-)t(R)t
F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s Gd(\))793 1317
y(for)20 b(each)g Gb(i)1219 1317 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1219 1317 a 16 w Gb(\000)j
F5(`)15 b F4(S)1413 1329 y F1(i)1467 1317 y FF(<)-17
b(:)24 b F4(T)1620 1329 y F1(i)1817 1317 y Gd(if)d Gb(\023)1918
1329 y F1(i)1972 1317 y FY(=)i F4(#)o Gd(,)e(then)2327
1317 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 2327 1317 a 16 w Gb(\000)i F5(`)15 b F4(T)2521
1329 y F1(i)2575 1317 y FF(<)-17 b(:)24 b F4(S)2728 1329
y F1(i)p 793 1360 1967 4 v 1097 1443 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1097 1443 a 16
w Gb(\000)e F5(`)16 b F4({)1291 1443 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1291 1443 a 15
w Gb(\023)1334 1455 y F1(i)1381 1443 y F4(l)1425 1455
y F1(i)1456 1443 y F4(:S)1543 1455 y F1(i)1585 1413 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1741 1443 y F4(})23
b FF(<)-17 b(:)24 b F4({)1961 1443 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1961 1443 a 15 w
Gb(\023)2004 1455 y F1(i)2051 1443 y F4(l)2095 1455 y
F1(i)2126 1443 y F4(:T)2213 1455 y F1(i)2255 1413 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2411 1443 y F4(})2855 1379
y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s
Gd(\))1174 1607 y
 gsave currentpoint translate 0 419430 7800 div 9498407 7800 div 747110
-7800 div box .9 setgray fill grestore
 1174 1607 a 1198 1606 a Gb(\000)23
b F5(`)g F4({)p Gb(:::)p F4(#l)1540 1618 y F1(i)1571
1606 y F4(:S)1658 1618 y F1(i)1690 1606 y Gb(:::)p F4(})g
FF(<)-17 b(:)24 b F4({)o Gb(:::)p F4(l)2091 1618 y F1(i)2122
1606 y F4(:S)2209 1618 y F1(i)2241 1606 y Gb(:::)p F4(})2719
1607 y Gd(\()r(S)t(-)t(R)t F6(C)t(D)t Gd(-)t(V)l F6(A)t(R)t(I)t(A)t(N)t
(C)t(E)s Gd(\))450 1786 y F7(New)d(typing)e(rules)p 3067
1703 383 4 v 3067 1810 4 108 v 2061 w Gb(\000)j F5(`)h
F4(t)g FF(:)g F4(T)p 3447 1810 V 3067 1813 383 4 v 1368
1907 a Gd(for)e(each)f Gb(i)83 b(\000)23 b F5(`)f F4(t)1980
1919 y F1(i)2034 1907 y FF(:)i F4(T)2152 1919 y F1(i)p
1118 1951 1315 4 v 1118 2030 a Gb(\000)f F5(`)g F4({)1304
2030 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1304 2030 a 15 w Gb(\023)1347 2042 y F1(i)1394
2030 y F4(l)1438 2042 y F1(i)1469 2030 y F4(=t)1556 2042
y F1(i)1598 2000 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1754
2030 y F4(})23 b FF(:)g F4({)1939 2030 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1939 2030 a
16 w Gb(\023)1983 2042 y F1(i)2030 2030 y F4(l)2073 2042
y F1(i)2105 2030 y F4(:T)2192 2042 y F1(i)2233 2000 y
FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)2390 2030 y F4(})3146
1970 y Gd(\()r(T)o(-)t(R)t F6(C)t(D)s Gd(\))1345 2169
y Gb(\000)23 b F5(`)g F4(t)1531 2181 y F1(0)1594 2169
y FF(:)h F4({)1712 2169 y
 gsave currentpoint translate 0 222821 7800 div 715904 7800 div 425418
-7800 div box .9 setgray fill grestore
 1712 2169 a 16 w Gb(\023)1756
2181 y F1(i)1803 2169 y F4(l)1846 2181 y F1(i)1878 2169
y F4(:T)1965 2181 y F1(i)2006 2139 y FB(i)p Fz(2)q FB(1)-10
b(:)g(:)g(n)2163 2169 y F4(})p 1345 2213 862 4 v 1519
2292 a Gb(\000)23 b F5(`)g F4(t)1705 2304 y F1(0)1745
2292 y F4(.l)1832 2304 y F1(j)1885 2292 y FF(:)g F4(T)2003
2304 y F1(j)3127 2232 y Gd(\()r(T)o(-)t(P)t F6(R)t(O)t(J)s
Gd(\))916 2511 y
 gsave currentpoint translate 0 851966 7800 div 13576571 7800 div 1179646
-7800 div box .9 setgray fill grestore
 916 2511 a 950 2455 a Gb(\000)g F5(`)g
F4(r)f FF(:)i F4(R)165 b Gb(\000)23 b F5(`)g F4(R)g FF(<)-17
b(:)24 b F4({#l)1890 2467 y F1(j)1920 2455 y F4(:T)2007
2467 y F1(j)2036 2455 y F4(})166 b Gb(\000)23 b F5(`)g
F4(t)f FF(:)i F4(T)2572 2467 y F1(j)p 950 2492 1652 4
v 1491 2565 a Gb(\000)f F5(`)g F4(r)p FV( )o F4(l)1803
2577 y F1(j)1833 2565 y F4(=t)f FF(:)h F4(R)3004 2511
y Gd(\()r(T)o(-)t(U)t F6(P)t(D)t(A)o(T)t(E)q Gd(\))p
409 2657 9 36 v 418 2657 3000 6 v 3418 2657 38 6 v 3455
2657 9 36 v eop
%%Page: 259 260
259 259 bop 450 1306 a F3(Chapter)44 b(31)450 1721 y
Gk(Purely)52 b(Functional)g(Objects)f(and)450 1970 y(Classes)450
2402 y F7(T)-9 b(echnically)19 b(complete,)h(mor)o(e)g(or)h(less.)27
b(W)n(ork)21 b(needed)g(on)g(writing.)450 2687 y Gj(31.1)119
b(Simple)29 b(Objects)450 2876 y Gd(Recall)20 b(\(fr)o(om)e(Chapter)h
(20\))f(the)i(type)g(of)f(pur)o(e)g(\(or)g(\223pur)o(ely)g
(functional\224\))g F4(Counter)e Gd(objects:)616 3034
y FT(Counter)41 b(=)e({)p Fv(9)p FT(X,)h({state:X,)h(methods:{get:)h(X)
p FO(!)p FT(Nat,)f(inc:X)p FO(!)p FT(X}}};)450 3200 y
Gd(The)21 b(r)o(epr)o(esentation)e(type)i(of)g(counters:)616
3358 y FT(CounterR)41 b(=)f({x:Nat};)450 3524 y Gd(A)20
b(counter)h(object:)616 3682 y FT(c)39 b(=)h({)p Fv(9)p
FT(X)f(=)h(Nat,)812 3773 y({state)h(=)e(5,)851 3864 y(methods)i(=)f
({get)g(=)f FM(\025)p FT(x:Nat.)i(x,)1283 3956 y(inc)f(=)f
FM(\025)p FT(x:Nat.)i(succ\(x\)}}})773 4047 y(as)f(Counter;)529
4171 y FS(I)616 4181 y FT(c)f(:)h(Counter)450 4363 y
Gd(Message-sending)20 b(operations:)616 4521 y FT(sendget)41
b(=)e FM(\025)p FT(c:Counter.)1087 4612 y(let)h({X,body})h(=)e(c)h(in)
1087 4704 y(body.methods.get\(body.state\);)529 4827
y FS(I)616 4837 y FT(sendget)h(:)e(Counter)i FO(!)e FT(Nat)1888
5169 y Gd(259)p eop
%%Page: 260 261
260 260 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(260)616
683 y FT(sendinc)41 b(=)e FM(\025)p FT(c:Counter.)1087
774 y(let)h({X,body})h(=)e(c)h(in)1165 866 y({)p Fv(9)p
FT(X)g(=)f(X,)1204 957 y({state)i(=)f(body.methods.inc\(body.state\),)
1244 1048 y(methods)h(=)e(body.methods}})1165 1140 y(as)h(Counter;)529
1238 y FS(I)616 1248 y FT(sendinc)h(:)e(Counter)i FO(!)e
FT(Counter)616 1401 y(addthree)i(=)f FM(\025)p FT(c:Counter.)h(sendinc)
g(\(sendinc)g(\(sendinc)g(c\)\);)529 1500 y FS(I)616
1510 y FT(addthree)g(:)f(Counter)g FO(!)f FT(Counter)616
1663 y(c3)h(=)f(addthree)i(c;)529 1761 y FS(I)616 1771
y FT(c3)f(:)f(Counter)616 1925 y(sendget)i(c3;)529 2023
y FS(I)616 2033 y FT(8)e(:)h(Nat)450 2315 y Gj(31.2)119
b(Subtyping)450 2504 y Gd(Recall)21 b(\(fr)o(om)f(Section)g
Ge(??)p Gd(\))h(the)g(subtyping)g(r)o(ule)g(for)g(existential)f(types:)
575 2604 y(This)c(means)g(that)f(if)h(we)g(de\002ne)f(an)h(object)g
(type)g(with)g(mor)o(e)g(methods)g(than)g(our)g F4(Counter)450
2703 y Gd(type)616 2845 y FT(ResetCounter)42 b(=)694
2936 y({)p Fv(9)p FT(X,)e({state:X,)h(methods:{get:)i(X)p
FO(!)p FT(Nat,)d(inc:X)p FO(!)q FT(X,)f(reset:X)p FO(!)r
FT(X}}};)450 3085 y Gd(we)21 b(will)g(have:)658 3234
y F4(ResetCounter)d FF(<)-17 b(:)24 b F4(Counter)450
3384 y Gd(So)d(if)f(we)h(de\002ne)g(a)f(r)o(eset)g(counter)h(object)616
3525 y FT(rc)40 b(=)f({)p Fv(9)p FT(X)h(=)f(Nat,)851
3616 y({state)i(=)e(0,)891 3707 y(methods)h(=)g({get)g(=)g
FM(\025)p FT(x:Nat.)g(x,)1322 3799 y(inc)g(=)g FM(\025)p
FT(x:Nat.)g(succ\(x\),)1322 3890 y(reset)h(=)e FM(\025)p
FT(x:Nat.)h(0}}})812 3981 y(as)g(ResetCounter;)529 4067
y FS(I)616 4077 y FT(rc)g(:)f(ResetCounter)450 4239 y
Gd(we)16 b(can)f(pass)h(it)g(as)f(a)h(legal)f(ar)o(gument)g(to)i
F4(sendget)12 b Gd(and)k F4(sendinc)m Gd(,)g(and)g(hence)g(also)g
F4(addthree)l Gd(:)616 4380 y FT(rc3)40 b(=)f(addthree)i(rc;)616
4471 y(sendget)g(rc3;)529 4557 y FS(I)616 4567 y FT(rc3)f(:)f(Counter)
616 4659 y(3)g(:)h(Nat)450 4820 y Gd(Notice,)27 b(though,)g(that)f(the)
f(type)h(of)f F4(rc3)g Gd(her)o(e)f(is)i(just)g F4(Counter)d
Gd(\226)i(passing)h(it)g(thr)o(ough)g(the)450 4920 y
F4(addthree)17 b Gd(operation)k(has)g(lost)h(some)f(information)h
(about)e(its)i(type.)p eop
%%Page: 261 262
261 261 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(261)450
686 y Gj(31.3)119 b(Interface)27 b(T)-11 b(ypes)450 875
y Gd(Using)21 b(type)g(operators,)f(we)h(r)o(ewrite)f(the)h(type)f
F4(Counter)e Gd(in)j(two)h(parts,)616 1020 y FT(Counter)41
b(=)e(Object)i(CounterM;)450 1173 y Gd(wher)o(e)616 1317
y FT(CounterM)g(=)f FM(\025)p FT(R.)f({get:)h(R)p FO(!)p
FT(Nat,)g(inc:R)p FO(!)q FT(R};)529 1411 y FS(I)616 1421
y FT(CounterM)h(=)f FM(\025)p FT(R.)f({get:R)p FO(!)q
FT(Nat,)h(inc:R)p FO(!)q FT(R}:)g(*)f FO(\))h FT(*)450
1587 y Gd(is)33 b(a)g(type)f(operator)h(r)o(epr)o(esenting)f(the)h
(interface)f(of)g(counter)h(objects)h(\(the)f(part)f(that)h(is)450
1687 y(speci\002c)21 b(to)g(the)g(fact)f(that)g(these)h(ar)o(e)f
(counters)h(and)f(not)h(some)h(other)f(kind)g(of)g(objects\))g(and)616
1831 y FT(Object)41 b(=)e FM(\025)p FT(I:)-25 b(:*)p
FO(\))q FT(*.)39 b({)p Fv(9)p FT(X,)h({state:X,)h(methods:\(I)h(X\)}};)
529 1925 y FS(I)616 1935 y FT(Object)f(=)e FM(\025)p
FT(I:)-25 b(:*)p FO(\))q FT(*.)39 b({)p Fv(9)p FT(X,)h
({state:X,methods:I)j(X}}:)d(\(*)p FO(\))q FT(*\))f FO(\))g
FT(*)450 2102 y Gd(is)20 b(a)e(type)h(operator)g(\(whose)h(parameter)d
(is)j(a)f(type)g(operator!\))24 b(that)19 b(captur)o(es)f(the)i(common)
450 2201 y(str)o(uctur)o(e)g(of)h(all)g(object)g(types.)575
2301 y(If)f(we)h(similarly)g(de\002ne)616 2445 y FT(ResetCounterM)42
b(=)e FM(\025)p FT(R.)f({get:)h(R)p FO(!)p FT(Nat,)h(inc:R)p
FO(!)p FT(R,)f(reset:R)p FO(!)r FT(R};)529 2539 y FS(I)616
2549 y FT(ResetCounterM)i(=)e FM(\025)p FT(R.)f({get:R)p
FO(!)q FT(Nat,)h(inc:R)p FO(!)q FT(R,)g(reset:R)p FO(!)q
FT(R}:)g(*)g FO(\))f FT(*)616 2707 y(ResetCounter)j(=)d(Object)i
(ResetCounterM;)529 2814 y FS(I)616 2824 y FT(ResetCounter)h(=)d
(Object)i(ResetCounterM:)h(*)450 2991 y Gd(we)21 b(have)f(not)h(only)
658 3143 y F4(ResetCounter)d FF(<)-17 b(:)24 b F4(Counter)450
3296 y Gd(as)c(befor)o(e)g(but)h(also)658 3449 y F4(ResetCounterM)c
FF(<)-17 b(:)24 b F4(CounterM)450 3602 y Gd(by)d(the)g(r)o(ules)g
(above)f(for)h(subtyping)g(between)g(type)f(operators.)450
3885 y Gj(31.4)119 b(Sending)30 b(Messages)f(to)i(Objects)450
4074 y Gd(W)-8 b(e)19 b(can)g(now)h(give)f F4(sendinc)d
Gd(a)i(mor)o(e)h(r)o(e\002ned)f(typing)i(by)f(abstracting)g(over)f
(sub-operators)450 4174 y(of)j F4(CounterM)616 4318 y
FT(sendinc)41 b(=)694 4409 y FM(\025)p FT(M<:CounterM.)694
4501 y FM(\025)p FT(o:Object\(M\).)773 4592 y(let)f({X,)g(b})f(=)h(o)f
(in)851 4683 y(\({)p Fv(9)p FT(X)h(=)f(X,)891 4775 y({state)h(=)g
(b.methods.inc\(b.state\),)930 4866 y(methods)h(=)e(b.methods}})891
4957 y(as)g(Object\(M\)\);)p eop
%%Page: 262 263
262 262 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(262)529
673 y FS(I)616 683 y FT(sendinc)41 b(:)e Fv(8)p FT(M<:CounterM.)j
(Object)f(M)e FO(!)g FT(Object)i(M)450 865 y Gd(and)15
b(send)h(messages)g(to)g(counter)g(and)f(r)o(eset-counter)g(objects)i
(like)f(this)g(\(assuming)g F4(sendget)450 965 y Gd(and)k
F4(sendreset)d Gd(ar)o(e)j(de\002ned)g(analogously\):)616
1123 y FT(sendget)41 b([CounterM])g(\(sendinc)g([CounterM])h(c\);)529
1246 y FS(I)616 1256 y FT(6)d(:)h(Nat)616 1430 y(sendget)h
([ResetCounterM])1087 1521 y(\(sendreset)g([ResetCounterM])1204
1612 y(\(sendinc)h([ResetCounterM])g(rc\)\);)529 1752
y FS(I)616 1762 y FT(0)d(:)h(Nat)450 1944 y Gd(Intuitively)-9
b(,)29 b(the)d(type)h(of)g F4(sendinc)d Gd(can)i(be)g(r)o(ead)f
(\223give)i(me)f(an)h(object)g(interface)f(r)o(e\002ning)450
2044 y(the)c(interface)e(of)h(counters,)h(then)g(give)f(me)g(an)h
(object)f(with)i(that)e(interface,)f(and)h(I'll)h(r)o(eturn)450
2144 y(you)f(another)g(object)g(with)h(the)f(same)f(interface.\224)450
2326 y Ge(31.4.1)e(Exercise:)39 b Gd(Check)31 b(car)o(efully)e(that)i
F4(sendinc)d Gd(has)i(the)h(claimed)f(type)h(and)f(that)h(the)450
2426 y(expr)o(essions)21 b(involving)h(applications)f(of)f
F4(sendinc)e Gd(ar)o(e)i(well)h(typed.)686 b FZ(2)450
2608 y Ge(31.4.2)18 b(Exercise:)39 b Gd(De\002ne)22 b
F4(sendget)17 b Gd(and)k F4(sendreset)l Gd(.)1181 b FZ(2)450
2894 y Gj(31.5)119 b(Simple)29 b(Classes)450 3083 y Gd(In)h(Chapter)g
(14,)h(we)f(de\002ned)g(a)g(class)g(to)g(be)g(a)g(function)h(fr)o(om)e
(states)h(to)h(objects,)i(wher)o(e)450 3183 y(objects)g(wer)o(e)f(r)o
(ecor)o(ds)f(of)h(methods.)61 b(Her)o(e,)34 b(an)f(object)f(is)h(mor)o
(e)f(than)h(just)g(a)f(r)o(ecor)o(d)f(of)450 3282 y(methods:)j(it)24
b(includes)h(a)f(r)o(epr)o(esentation)f(type)i(and)f(a)g(state)g(as)g
(well)h(as)f(methods.)37 b(Mor)o(e-)450 3382 y(over)-6
b(,)27 b(each)f(of)g(the)h(methods)g(her)o(e)f(takes)g(the)g(state)g
(as)g(a)g(parameter)-6 b(,)26 b(so)h(it)f(doesn't)h(make)450
3482 y(sense)d(to)h(pass)e(the)h(state)g(to)g(the)g(class.)35
b(In)25 b(fact,)e(a)h(class)f(her)o(e)h(\(as)f(long)i(as)e(we)h(ar)o(e)
f(holding)450 3581 y(the)i(r)o(epr)o(esentation)f(type)h(\002xed\))f
(is)h(just)h(a)e(r)o(ecor)o(d)g(of)h(methods)g(\226)g(no)g(packaging,)h
(and)e(no)450 3681 y(abstraction)c(of)h(the)g(whole)h(thing)f(on)h(the)
f(state.)616 3838 y FT(CounterR)41 b(=)f(Nat;)616 3930
y(counterClass)i(=)734 4021 y({get)e(=)f FM(\025)p FT(x:CounterR.)j(x,)
773 4112 y(inc)e(=)f FM(\025)p FT(x:CounterR.)j(succ\(x\)})655
4204 y(as)e({get:)g(CounterR)p FO(!)r FT(Nat,)g(inc:CounterR)p
FO(!)s FT(CounterR};)529 4327 y FS(I)616 4337 y FT(counterClass)i(:)d
({get:CounterR)p FO(!)s FT(Nat,)h(inc:CounterR)p FO(!)s
FT(CounterR})450 4519 y Gd(Or)-6 b(,)20 b(using)i(the)f
F4(CounterM)c Gd(operator)k(to)g(write)g(the)f(annotation)i(mor)o(e)f
(tersely:)616 4677 y FT(counterClass)42 b(=)734 4768
y({get)e(=)f FM(\025)p FT(x:CounterR.)j(x,)773 4859 y(inc)e(=)f
FM(\025)p FT(x:CounterR.)j(succ\(x\)})655 4951 y(as)e(CounterM)h
(CounterR;)p eop
%%Page: 263 264
263 263 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(263)529
673 y FS(I)616 683 y FT(counterClass)42 b(:)d(CounterM)j(CounterR)450
866 y Gd(W)-8 b(e)21 b(then)g(build)g(an)f(instance)h(by)g(adding)g
(state)f(and)g(packaging:)616 1023 y FT(c)39 b(=)h({)p
Fv(9)p FT(X)f(=)h(CounterR,)812 1115 y({state)h(=)e(0,)851
1206 y(methods)i(=)f(counterClass}})655 1297 y(as)g(Counter;)529
1421 y FS(I)616 1431 y FT(c)f(:)h(Counter)450 1614 y
Gd(Her)o(e)20 b(is)h(a)f(simple)h(subclass...)616 1771
y FT(resetCounterClass)43 b(=)734 1863 y(let)d(super)g(=)f
(counterClass)j(in)734 1954 y({get)e(=)f(super.get,)773
2045 y(inc)h(=)f(super.inc,)773 2137 y(reset)h(=)g FM(\025)p
FT(x:CounterR.)h(0})655 2228 y(as)f(ResetCounterM)i(CounterR;)529
2351 y FS(I)616 2361 y FT(resetCounterClass)h(:)d(ResetCounterM)i
(CounterR)450 2647 y Gj(31.6)119 b(Adding)30 b(Instance)f(V)-13
b(ariables)450 2836 y Gd(A)20 b(r)o(ecor)o(d)f(r)o(epr)o(esentation)h
(for)g(counters:)616 2994 y FT(CounterR)41 b(=)f({x:Nat};)616
3085 y(counterClass)i(=)734 3177 y({get)e(=)f FM(\025)p
FT(s:CounterR.)j(s.x,)773 3268 y(inc)e(=)f FM(\025)p
FT(s:CounterR.)j({x=succ\(s.x\)}})655 3359 y(as)e(CounterM)h(CounterR;)
529 3483 y FS(I)616 3493 y FT(counterClass)h(:)d(CounterM)j(CounterR)
450 3676 y Gd(A)20 b(mor)o(e)h(inter)o(esting)g(r)o(epr)o(esentation)e
(using)j(updatable)d(r)o(ecor)o(ds)h(\(Chapter)f(30\):)616
3833 y FT(CounterR)41 b(=)f({#x:Nat};)616 3925 y(counterClass)i(=)734
4016 y({get)e(=)f FM(\025)p FT(s:CounterR.)j(s.x,)773
4107 y(inc)e(=)f FM(\025)p FT(s:CounterR.)j(s)p FO( )p
FT(x=succ\(s.x\)})655 4199 y(as)e(CounterM)h(CounterR;)529
4322 y FS(I)616 4332 y FT(counterClass)h(:)d(CounterM)j(CounterR)450
4515 y Gd(\(Note)29 b(that)g(objects)h(built)f(fr)o(om)g(these)g
(classes)g(will)h(have)f(the)g(same)g(old)g(type)g F4(Counter)m
Gd(,)450 4614 y(and)20 b(the)h(same)g(message-sending)g(code)f(as)h
(befor)o(e)e(will)j(apply)e(without)i(change.\))575 4714
y(Now)-8 b(,)25 b(because)e(we've)g(used)h(polymorphic)g(update)f
(operations)h(to)g(de\002ne)g(the)g(meth-)450 4814 y(ods)33
b(of)f(the)h(counter)g(class,)i(it)e(is)g(actually)f(not)i(necessary)e
(to)h(know)g(that)g(the)g(state)f(has)450 4913 y(exactly)19
b(type)h F4(CounterR)l Gd(:)25 b(we)20 b(can)g(also)g(work)g(with)g
(states)g(that)g(ar)o(e)e(subtypes)i(of)g(this)g(type.)p
eop
%%Page: 264 265
264 264 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(264)616
683 y FT(counterClass)42 b(=)734 774 y FM(\025)p FT(R<:CounterR.)851
866 y({get)f(=)e FM(\025)p FT(s:R.)h(s.x,)891 957 y(inc)g(=)f
FM(\025)p FT(s:R.)h(s)p FO( )p FT(x=succ\(s.x\)})734
1048 y(as)f(CounterM)i(R;)529 1133 y FS(I)616 1143 y
FT(counterClass)h(:)d Fv(8)p FT(R<:CounterR.)j(CounterM)f(R)450
1304 y Gd(T)-8 b(o)23 b(build)g(an)g(object)g(fr)o(om)f(the)h(new)h
F4(counterClass)-5 b Gd(,)23 b(we)g(simply)g(supply)g
F4(CounterR)d Gd(itself)450 1404 y(as)g(the)h(r)o(epr)o(esentation:)616
1544 y FT(c)39 b(=)h({)p Fv(9)p FT(X)f(=)h(CounterR,)812
1636 y({state)h(=)e({#x=0},)851 1727 y(methods)i(=)f(counterClass)i
([CounterR]}})773 1818 y(as)e(Counter;)529 1903 y FS(I)616
1913 y FT(c)f(:)h(Counter)575 2074 y Gd(W)-8 b(e)20 b(can)h(write)g
F4(resetCounterCla)o(ss)14 b Gd(in)22 b(the)f(same)f(style:)616
2215 y FT(resetCounterClass)43 b(=)734 2306 y FM(\025)p
FT(R<:CounterR.)812 2398 y(let)d(super)g(=)g(counterClass)i([R])e(in)
891 2489 y({get)g(=)f(super.get,)930 2580 y(inc)h(=)f(super.inc,)930
2672 y(reset)h(=)g FM(\025)p FT(s:R.)f(s)p FO( )q FT(x=0})891
2763 y(as)g(ResetCounterM)k(R;)529 2848 y FS(I)616 2858
y FT(resetCounterClass)g(:)d Fv(8)p FT(R<:CounterR.)h(ResetCounterM)h
(R)450 3019 y Gd(Finally)-9 b(,)33 b(we)d(can)f(write)h
F4(backupCounterClas)o(s)24 b Gd(in)31 b(the)f(same)g(style,)i(this)f
(time)f(abstract-)450 3118 y(ing)25 b(over)g(a)f(subtype)h(of)g
F4(BackupCounterR)-6 b Gd(:)34 b(W)-8 b(e)25 b(can)g(de\002ne)f
(another)h(subclass)g(\226)g(backup)450 3218 y(counters)c(\226)f(this)i
(time)f(using)h(a)e F7(differ)o(ent)h Gd(r)o(epr)o(esentation)e(type:)
616 3359 y FT(BackupCounterM)42 b(=)e FM(\025)p FT(R.)f({get:)i(R)p
FO(!)p FT(Nat,)f(inc:R)p FO(!)q FT(R,)f(reset:R)p FO(!)r
FT(R,)g(backup:R)p FO(!)r FT(R};)616 3450 y(BackupCounterR)j(=)e
({#x:Nat,#old:Nat};)616 3541 y(backupCounterClass)j(=)734
3633 y FM(\025)p FT(R<:BackupCounterR.)734 3724 y(let)d(super)g(=)f
(resetCounterClass)44 b([R])39 b(in)773 3815 y({get)h(=)g(super.get,)
812 3907 y(inc)g(=)g(super.inc,)812 3998 y(reset)h(=)e
FM(\025)p FT(s:R.)h(s)p FO( )p FT(x=s.old,)812 4089 y(backup)h(=)e
FM(\025)p FT(s:R.)h(s)p FO( )p FT(old=s.x})773 4181 y(as)g
(BackupCounterM)i(R;)529 4265 y FS(I)616 4275 y FT(backupCounterClass)h
(:)d Fv(8)p FT(R<:BackupCounterR.)j(BackupCounterM)f(R)450
4437 y Ge(31.6.1)18 b(Exercise)h([Moderate]:)39 b Gd(W)-8
b(e)28 b(have)f(used)g(polymorphic)i(update)e(in)h(this)g(section)h(to)
450 4536 y(allow)24 b(methods)g(in)g(classes)f(to)h(update)f(\223their)
6 b(\224)22 b(instance)i(variables)e(while)i(leaving)g(r)o(oom)450
4636 y(for)g(subclasses)h(to)g(extend)f(the)g(state)h(with)g
(additional)f(instance)h(variables.)35 b(Show)25 b(that)g(it)450
4735 y(is)h(possible)h(to)f(achieve)f(the)i(same)e(ef)o(fect)f(even)i
(in)h(a)e(type)h(system)h(lacking)f(polymorphic)450 4835
y(r)o(ecor)o(d)19 b(update.)2407 b FZ(2)p eop
%%Page: 265 266
265 265 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(265)450
686 y Gj(31.7)119 b(Classes)30 b(with)f(\223Self)t(\224)450
875 y Gd(In)19 b(Section)g(14.7,)e(we)i(saw)f(how)i(to)f(extend)f
(imperative)g(classes)h(with)g(a)g(mechanism)g(allow-)450
975 y(ing)28 b(the)g(methods)h(of)f(a)f(class)h(to)g(r)o(efer)e(to)j
(each)e(other)h(r)o(ecursively)-9 b(.)46 b(This)28 b(extension)h(also)
450 1074 y(makes)21 b(sense)g(in)g(the)g(pur)o(e)f(setting.)575
1174 y(W)-8 b(e)19 b(begin)h(by)f(abstracting)g F4(counterClass)c
Gd(on)20 b(a)e(collection)j(of)e(methods)h(\(appr)o(opriate)450
1274 y(for)h(the)f(same)h(r)o(epr)o(esentation)e(type)i
F4(R)p Gd(\):)616 1431 y FT(counterClass)42 b(=)734 1523
y FM(\025)p FT(R<:CounterR.)734 1614 y FM(\025)p FT(self:)e(CounterM)h
(R.)851 1705 y({get)g(=)e FM(\025)p FT(s:R.)h(s.x,)891
1797 y(inc)g(=)f FM(\025)p FT(s:R.)h(s)p FO( )p FT(x=succ\(s.x\)})734
1888 y(as)f(CounterM)i(R;)450 2054 y Gd(T)-8 b(o)23 b(build)g(an)g
(object)g(fr)o(om)f(this)h(class,)g(we)g(have)f(to)h(build)g(the)g
(\002xed)f(point)i(of)e(the)h(function)450 2154 y F4(counterClass)-5
b Gd(:)616 2311 y FT(c)39 b(=)h({)p Fv(9)p FT(X)f(=)h(CounterR,)812
2403 y({state)h(=)e({#x=0},)851 2494 y(methods)i(=)f(fix)g
(\(counterClass)i([CounterR]\)}})773 2585 y(as)e(Counter;)529
2709 y FS(I)616 2719 y FT(c)f(:)h(Counter)450 2902 y
Gd(T)-8 b(o)23 b(use)e(this)i(new)f(mechanism,)h(we)f(de\002ne)g(a)f
(new)h(form)g(of)g(\223counters)g(with)h(a)e F4(set)g
Gd(opera-)450 3001 y(tion\224:)616 3159 y FT(SetCounterM)42
b(=)d FM(\025)p FT(R.)h({get:)g(R)p FO(!)p FT(Nat,)g(set:R)p
FO(!)q FT(Nat)p FO(!)q FT(R,)f(inc:R)p FO(!)q FT(R};)450
3325 y Gd(The)27 b(implementation)h(of)f(the)g F4(setCounterClass)21
b Gd(de\002nes)27 b(a)f F4(set)g Gd(method)h(and)g(uses)g(the)450
3425 y F4(set)20 b Gd(and)g F4(get)f Gd(methods)j(of)f
F4(self)e Gd(to)i(implement)g(the)g F4(inc)f Gd(method:)616
3582 y FT(setCounterClass)43 b(=)734 3674 y FM(\025)p
FT(R<:CounterR.)734 3765 y FM(\025)p FT(self:)d(SetCounterM)h(R.)851
3856 y(let)f(super)h(=)e(counterClass)j([R])e(self)g(in)851
3948 y({get)h(=)e(super.get,)891 4039 y(set)h(=)f FM(\025)p
FT(s:R.)h FM(\025)p FT(n:Nat.)g(s)p FO( )p FT(x=n,)891
4130 y(inc)g(=)f FM(\025)p FT(s:R.)h(self.set)h(s)e(\(succ\(self.get)k
(s\)\)})734 4222 y(as)c(SetCounterM)j(R;)450 4388 y Gd(Finally)-9
b(,)29 b(we)f(can)f(further)f(extend)h F4(setCounterClass)21
b Gd(to)28 b(form)g(a)e(class)i(of)f(instr)o(umented)450
4487 y(counters,)21 b(whose)h F4(set)d Gd(operation)i(counts)h(the)e
(number)h(of)g(times)g(that)g(it)g(has)g(been)f(called:)616
4645 y FT(InstrumentedCounterM)44 b(=)694 4736 y FM(\025)p
FT(R.)c({get:)g(R)p FO(!)p FT(Nat,)g(set:R)p FO(!)q FT(Nat)p
FO(!)q FT(R,)f(inc:R)p FO(!)q FT(R,)h(accesses:R)p FO(!)r
FT(Nat};)616 4828 y(InstrumentedCounterR)k(=)39 b({#x:Nat,#count:Nat};)
616 4919 y(instrumentedCounterClass)45 b(=)p eop
%%Page: 266 267
266 266 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(266)734
683 y FM(\025)p FT(R<:InstrumentedCounterR.)734 774 y
FM(\025)p FT(self:)40 b(InstrumentedCounterM)k(R.)851
866 y(let)c(super)h(=)e(setCounterClass)k([R])d(self)g(in)851
957 y({get)h(=)e(super.get,)891 1048 y(set)h(=)f FM(\025)p
FT(s:R.)h FM(\025)p FT(n:Nat.)1204 1140 y(let)g(r)g(=)f(super.set)j(s)d
(n)g(in)1204 1231 y(r)p FO( )p FT(count=succ\(r.count\),)891
1322 y(inc)h(=)f(super.inc,)891 1414 y(accesses)i(=)e
FM(\025)p FT(s:R.)h(s.count})734 1505 y(as)f(InstrumentedCounterM)44
b(R;)450 1670 y Gd(Note)20 b(that)f(calls)h(to)g F4(inc)e
Gd(ar)o(e)g(included)i(in)g(the)f(access)g(count,)i(since)e
F4(inc)g Gd(is)h(implemented)g(in)450 1770 y(terms)h(of)g
F4(self.set)l Gd(.)450 2055 y Gj(31.8)119 b(Class)30
b(T)-11 b(ypes)450 2244 y Gd(W)j(e)21 b(can)f(write)h(the)g(type)g(of)f
F4(counterClass)c Gd(as)616 2401 y FT(CounterClass)42
b(=)d(Class)i(CounterM)g(CounterR;)450 2566 y Gd(wher)o(e:)616
2723 y FT(Class)f(=)g FM(\025)p FT(M:)-25 b(:*)p FO(\))p
FT(*.)40 b FM(\025)p FT(R.)f Fv(8)p FT(R<:R.)h(M)g(R)f
FO(!)g FT(M)h(R;)529 2844 y FS(I)616 2854 y FT(Class)g(=)g
FM(\025)p FT(M:)-25 b(:*)p FO(\))p FT(*.)40 b FM(\025)p
FT(R.)f Fv(8)p FT(R'<:R.)i(M)e(R')h FO(!)f FT(M)g(R':)h(\(*)p
FO(\))p FT(*\))g FO(\))2930 2945 y FT(*)g FO(\))f FT(*)450
3126 y Gd(In)30 b(other)f(wor)o(ds,)i F4(Class)42 b(M)h(R)29
b Gd(is)g(the)h(type)f(of)g(classes)g(with)h(r)o(epr)o(esentation)e
(type)i F4(R)e Gd(and)450 3226 y(methods)21 b F4(M)p
Gd(.)26 b(Class)20 b(itself)h(is)g(a)f(higher)o(-or)o(der)g(operator)-6
b(,)20 b(like)h F4(Object)m Gd(.)450 3511 y Gj(31.9)119
b(Generic)28 b(Inheritance)450 3701 y Gd(Going)33 b(further)e(along)i
(the)f(same)f(lines,)k(we)d(can)f(actually)h(use)f(type)h(operators)g
(to)g(con-)450 3800 y(str)o(uct)27 b(well-typed)g F7(terms)g
Gd(that)g(perform)g(instantiation)h(of)f(classes)g(\(object)g(cr)o
(eation\))f(and)450 3900 y(subclassing.)575 4000 y(The)k(code)f(that)h
(performs)g(the)g(instantiation)i(of)e F4(counterClass)25
b Gd(to)30 b(yield)g(a)g(counter)450 4099 y(does)21 b(not)g(depend)e
(in)i(any)g(way)f(on)h(the)g(fact)f(that)g(we)h(ar)o(e)e(building)i(a)f
(counter)h(as)f(opposed)450 4199 y(to)31 b(some)g(other)g(kind)h(of)e
(object.)56 b(W)-8 b(e)31 b(can)f(avoid)h(writing)g(this)h(boilerplate)
e(it)h(over)f(and)450 4298 y(over)25 b(by)h(abstracting)f(out)h
F4(counterClass)-5 b Gd(,)27 b F4(CounterM)m Gd(,)f F4(CounterR)m
Gd(,)h(and)e(the)g(initial)i(value)450 4398 y F4({#x=0})18
b Gd(as)j(follows:)616 4555 y FT(new)40 b(=)694 4646
y FM(\025)p FT(M<:TopM.)694 4737 y FM(\025)p FT(R<:Top.)694
4829 y FM(\025)p FT(c:)g(Class)g(M)g(R.)694 4920 y FM(\025)p
FT(r:R.)p eop
%%Page: 267 268
267 267 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(267)734
683 y FT({)p Fv(9)p FT(X)39 b(=)h(R,)812 774 y({state)h(=)e(r,)851
866 y(methods)i(=)f(fix)g(\(c)f([R]\)}})773 957 y(as)h(Object)g(M;)529
1028 y FS(I)616 1038 y FT(new)g(:)f Fv(8)p FT(M<:TopM.)i
Fv(8)p FT(R.)e(Class)i(M)e(R)h FO(!)f FT(R)g FO(!)g FT(Object)i(M)450
1191 y Gd(wher)o(e)20 b(we)h(write)g F4(TopM)e Gd(for)h(the)h
(\223maximal)f(interface\224)f Gb(\025)p F4(X.Top)n Gd(:)616
1326 y FT(TopM)40 b(=)g FM(\025)p FT(X.Top;)575 1468
y Gd(W)-8 b(e)19 b(can)g(now)g(build)h(counter)f(objects)g(by)h
(applying)f F4(new)f Gd(to)h F4(counterClass)14 b Gd(as)19
b(follows:)616 1603 y FT(c)39 b(=)h(new)g([CounterM])h([CounterR])h
(counterClass)g({#x=0};)529 1674 y FS(I)616 1684 y FT(c)d(:)h(Object)h
(CounterM)575 1837 y Gd(Similarly)-9 b(,)27 b(we)f(can)g(write)h(a)f
(generic)g(function)h(that)f(builds)h(a)f(subclass)g(given)h(a)f(class)
450 1937 y(and)i(a)f(\223delta\224)g(that)h(shows)h(how)g(the)g
(methods)g(of)f(the)g(subclass)g(ar)o(e)f(derived)g(fr)o(om)h(the)450
2037 y(methods)23 b(of)e(the)h(super)o(class.)28 b(W)-8
b(e)22 b(begin)g(with)h(the)f(concr)o(ete)f(subclass)h
F4(setCounterClass)450 2136 y Gd(fr)o(om)e(Section)h(31.6:)616
2271 y FT(setCounterClass)43 b(=)734 2362 y FM(\025)p
FT(R<:CounterR.)734 2453 y FM(\025)p FT(self:)d(SetCounterM)h(R.)851
2545 y(let)f(super)h(=)e(counterClass)j([R])e(self)g(in)851
2636 y({get)h(=)e(super.get,)891 2727 y(set)h(=)f FM(\025)p
FT(s:R.)h FM(\025)p FT(n:Nat.)g(s)p FO( )p FT(x=n,)891
2818 y(inc)g(=)f FM(\025)p FT(s:R.)h(self.set)h(s)e(\(succ\(self.get)k
(s\)\)})734 2910 y(as)c(SetCounterM)j(R;)450 3053 y Gd(Abstracting)22
b(out)g(the)h(parts)e(that)h(ar)o(e)f(speci\002c)h(to)h(counters)f
(leaves)f(the)i(following)g(param-)450 3152 y(eterized)c(skeleton:)616
3287 y FT(extend)41 b(=)734 3378 y FM(\025)p FT(SuperM)f(<:)g(TopM.)734
3469 y FM(\025)p FT(SuperR.)734 3560 y FM(\025)p FT(superClass:)h
(Class)f(SuperM)h(SuperR.)734 3652 y FM(\025)p FT(SelfM)f(<:)f(SuperM.)
734 3743 y FM(\025)p FT(SelfR)h(<:)f(SuperR.)734 3834
y FM(\025)p FT(delta:)h(\()p Fv(8)p FT(R<:SelfR.)h(SuperM)g(R)e
FO(!)g FT(SelfM)i(R)e FO(!)g FT(SelfM)h(R\).)773 3926
y(\()p FM(\025)p FT(R<:SelfR.)812 4017 y FM(\025)p FT(self:)g(SelfM)h
(R.)891 4108 y(let)f(super)g(=)f(superClass)j([R])e(self)g(in)969
4200 y(delta)g([R])g(super)h(self\))773 4291 y(as)f(Class)g(SelfM)g
(SelfR;)529 4362 y FS(I)616 4372 y FT(extend)h(:)e Fv(8)p
FT(SuperM<:TopM.)1048 4463 y Fv(8)p FT(SuperR.)1126 4555
y(Class)h(SuperM)h(SuperR)g FO(!)1126 4646 y FT(\()p
Fv(8)p FT(SelfM<:SuperM.)1244 4737 y Fv(8)p FT(SelfR<:SuperR.)1322
4829 y(\()p Fv(8)p FT(R<:SelfR.)g(SuperM)g(R)p FO(!)p
FT(SelfM)f(R)p FO(!)p FT(SelfM)h(R\))e FO(!)1322 4920
y FT(Class)i(SelfM)f(SelfR\))p eop
%%Page: 268 269
268 268 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)275
b Gd(3)t(1)t(.)29 b(P)t F6(U)t(R)t(E)t(L)n(Y)c Gd(F)t
F6(U)t(N)t(C)t(T)t(I)t(O)t(N)t(A)t(L)g Gd(O)t F6(B)t(J)t(E)t(C)t(T)t(S)
g(A)t(N)t(D)h Gd(C)t F6(L)t(A)t(S)t(S)t(E)t(S)275 b Gd(268)450
683 y(In)25 b(other)g(wor)o(ds,)h F4(extend)c Gd(takes)j(several)f
(parameters)f(\()p F4(SuperM)f Gd(to)j F4(delta)n Gd(\))g(and)f(r)o
(eturns)g(a)450 783 y(class\227i.e.,)h(a)f(function)h(that)f(takes)h(a)
f(r)o(epr)o(esentation)f(type)h F4(R)g Gd(\(the)h(\223\002nal)f
(type\224)g(that)g(will)450 882 y(eventually)17 b(be)g(pr)o(ovided)f
(by)h(the)g F4(new)f Gd(function\))h(and)g(a)f(vector)h(of)g(\223self)g
(methods\224)g(special-)450 982 y(ized)24 b(to)h(the)h(type)e
F4(R)h Gd(and)f(r)o(eturns)h(a)f(new)i(vector)e(of)h(self)g(methods.)39
b(The)25 b(most)h(important)450 1082 y(bit)j(of)g(this)h
(de\002nition\227the)g(bit)f(that)g(does)g(all)g(the)g(work\227is)h
(the)f(parameter)f F4(delta)n Gd(.)50 b(It)450 1181 y(takes)28
b(the)h(\002nal)f(type)h F4(R)f Gd(and)g(two)h(method)g(vectors\227the)
f(\223super)g(methods\224)g(calculated)450 1281 y(by)c(instantiating)g
(the)g(super)o(class)f(at)g F4(R)g Gd(and)h F4(self)e
Gd(and)h(the)h(\223self)f(methods\224)g(pr)o(ovided)g(by)450
1380 y F4(new)o Gd(\227and)d(r)o(eturns)g(the)h(self)g(methods.)575
1480 y(Now)g(we)g(can)f(r)o(ecover)g F4(setCounterClass)14
b Gd(by)21 b(extending)g F4(counterClass)16 b Gd(like)21
b(this:)616 1638 y FT(setCounterClass)43 b(=)734 1729
y(extend)d([CounterM])i([CounterR])f(counterClass)1008
1820 y([SetCounterM])i([CounterR])851 1912 y(\()p FM(\025)p
FT(R<:CounterR.)891 2003 y FM(\025)p FT(super:)d(CounterM)h(R.)891
2094 y FM(\025)p FT(self:)f(SetCounterM)h(R.)969 2186
y({get)f(=)g(super.get,)1008 2277 y(set)g(=)g FM(\025)p
FT(s:R.)f FM(\025)p FT(n:Nat.)i(s)p FO( )p FT(x=n,)1008
2368 y(inc)f(=)g FM(\025)p FT(s:R.)f(self.set)j(s)d(\(succ\(self.get)j
(s\)\)}\);)529 2492 y FS(I)616 2502 y FT(setCounterClass)h(:)c(Class)i
(SetCounterM)g(CounterR)450 2685 y Ge(31.9.1)18 b(Exercise)h
([Recommended]:)38 b Gd(Use)21 b(the)h F4(fullupdate)17
b Gd(checker)k(fr)o(om)g(the)h(course)f(di-)450 2784
y(r)o(ectory)f(to)h(implement)h(the)f(following)h(extensions)g(to)f
(the)g(classes)f(above:)554 2950 y(1.)41 b(Reimplement)28
b F4(setCounterClass)22 b Gd(and)27 b F4(instrumentedCou)o(nte)o(rC)o
(las)o(s)21 b Gd(using)29 b(the)658 3050 y(generic)20
b(inheritance)h(operations)g(explor)o(ed)f(in)h(this)g(section.)554
3216 y(2.)41 b(Extend)17 b(your)h(modi\002ed)g F4(instrumentedCoun)o
(te)o(rC)o(las)o(s)12 b Gd(with)18 b(a)f(subclass)h(that)g(adds)658
3316 y(a)i F4(reset)f Gd(method.)2130 b FZ(2)p eop
%%Page: 269 270
269 269 bop 450 1306 a F3(Chapter)44 b(32)450 1721 y
Gk(Structures)52 b(and)h(Modules)1328 1913 y Gj(By)30
b(Robert)g(Harper)e(and)i(Benjamin)f(Pierce)575 2175
y F7(It')-5 b(s)18 b(not)f(clear)h(yet)g(whether)f(this)h(sketch)f
(will)h(eventually)g(be)g(just)g(a)g(chapter)f(of)h(the)f(pr)o(esent)h
(book)450 2275 y(or)j(a)g(whole)f(book)h(in)g(its)g(own)f(right.)25
b(The)20 b(latter)h(seems)g(mor)o(e)f(likely)h(at)f(the)h(moment.)450
2559 y Gj(32.1)119 b(Basic)29 b(Structures)450 2806 y
Ge(Structures)2313 b FV(!)35 b F4(X)3348 2806 y
 gsave currentpoint translate 0 124518 7800 div 804266 7800 div 572346
-7800 div box .9 setgray fill grestore
 3348
2806 a 16 w F5(S)p 409 2887 9 36 v 418 2858 3000 6 v
3418 2858 38 6 v 3455 2887 9 36 v 450 2977 a F7(Syntax)592
3108 y F4(t)61 b Gd(::=)1821 b F7(terms)852 3208 y F4(t)43
b(as)g(T)1556 b F7(coer)o(cion)852 3307 y F4(x)1774 b
F7(variable)852 3407 y Gb(\025)p F4(x)o(:T)o(.t)1555
b F7(abstraction)852 3506 y F4(t)43 b(t)1687 b F7(application)852
3606 y
 gsave currentpoint translate 0 215539 7800 div 4053734 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 3606 a 15 w F4({)p F5(S)21 b F4(X=T:)-25 b(:K,t})1317
b F7(structur)o(e)21 b(cr)o(eation)852 3715 y
 gsave currentpoint translate 0 270154 7800 div 3345585 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 3715
a 15 w F4(bodyof\(t\))1407 b F7(term)16 b(component)e(of)i(a)g
(structur)o(e)592 3914 y F4(v)61 b Gd(::=)1821 b F7(values)852
4014 y Gb(\025)p F4(x)o(:T)o(.t)1555 b F7(abstraction)21
b(value)852 4114 y
 gsave currentpoint translate 0 215539 7800 div 4053734 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4114 a 15 w F4({)p F5(S)g F4(X=T:)-25
b(:K,v})1317 b F7(structur)o(e)21 b(value)592 4313 y
F4(T)61 b Gd(::=)1821 b F7(types)852 4412 y F4(X)1774
b F7(type)20 b(variable)852 4512 y F4(T)p FV(!)o F4(T)1648
b F7(type)20 b(of)g(functions)852 4612 y
 gsave currentpoint translate 0 215539 7800 div 3365612 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4612 a 15
w F4({)p F5(S)h F4(X:)-25 b(:K,T})1405 b F7(structur)o(e)21
b(type)852 4721 y
 gsave currentpoint translate 0 270154 7800 div 3345585 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 4721 a 15 w F4(typeof\(t\))1407
b F7(type)15 b(component)f(of)i(a)g(structur)o(e)590
4920 y Gb(\000)62 b Gd(::=)1821 b F7(contexts)1888 5169
y Gd(269)p eop
%%Page: 270 271
270 270 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(270)852
683 y F5(;)1776 b F7(empty)19 b(context)852 783 y Gb(\000)5
b(;)17 b F4(x:T)1596 b F7(term)21 b(variable)g(binding)852
882 y Gb(\000)5 b(;)17 b F4(X:)-25 b(:K)1577 b F7(type)20
b(variable)h(binding)592 1082 y F4(K)61 b Gd(::=)1821
b F7(kinds)852 1181 y F4(*)1774 b F7(kind)20 b(of)h(pr)o(oper)f(types)
450 1396 y(Evaluation)p 3096 1309 355 4 v 3096 1421 4
113 v 2304 w F4(t)j F5(\000)-15 b FV(!)23 b F4(t)3398
1366 y FX(0)p 3447 1421 V 3096 1424 355 4 v 1391 1510
a F4(t)1434 1522 y F1(1)1518 1510 y F4(as)43 b(T)1693
1522 y F1(2)1756 1510 y F5(\000)-14 b FV(!)23 b F4(t)1957
1522 y F1(1)2954 1511 y Gd(\()r(E)t(-)t(C)t F6(O)t(E)t(R)t(C)t(E)t
Gd(1)q(\))1073 1641 y F4(\()p Gb(\025)p F4(x)o(:T)1292
1653 y F1(11)1369 1641 y F4(.t)1456 1653 y F1(12)1533
1641 y F4(\))44 b(v)1664 1653 y F1(2)1728 1641 y F5(\000)-15
b FV(!)23 b F0(f)p F4(x)g F5(7)p FV(!)g F4(v)2127 1653
y F1(2)2168 1641 y F0(g)p F4(t)2238 1653 y F1(12)3113
1642 y Gd(\()r(E)t(-)t(B)t F6(E)t(T)o(A)p Gd(\))1520
1780 y F4(t)1564 1792 y F1(1)1627 1780 y F5(\000)-14
b FV(!)23 b F4(t)1835 1750 y FX(0)1828 1804 y F1(1)p
1392 1823 604 4 v 1392 1903 a F4(t)1436 1915 y F1(1)1520
1903 y F4(t)1564 1915 y F1(2)1627 1903 y F5(\000)-14
b FV(!)23 b F4(t)1835 1873 y FX(0)1828 1926 y F1(1)1912
1903 y F4(t)1955 1915 y F1(2)3105 1842 y Gd(\()r(E)t(-)t(A)t
F6(P)t(P)t Gd(1)q(\))1520 2042 y F4(t)1564 2054 y F1(2)1627
2042 y F5(\000)-14 b FV(!)23 b F4(t)1835 2012 y FX(0)1828
2066 y F1(2)p 1392 2085 V 1392 2165 a F4(v)1436 2177
y F1(1)1520 2165 y F4(t)1564 2177 y F1(2)1627 2165 y
F5(\000)-14 b FV(!)23 b F4(v)1828 2177 y F1(1)1912 2165
y F4(t)1963 2135 y FX(0)1955 2188 y F1(2)3105 2104 y
Gd(\()r(E)t(-)t(A)t F6(P)t(P)t Gd(2)q(\))1137 2384 y
 gsave currentpoint translate 0 851966 7800 div 8789971 7800 div 1179646
-7800 div box .9 setgray fill grestore

1137 2384 a 1520 2328 a F4(t)1564 2340 y F1(1)1627 2328
y F5(\000)-14 b FV(!)23 b F4(t)1835 2298 y FX(0)1828
2352 y F1(1)p 1171 2365 1046 4 v 1171 2437 a F4(bodyof\(t)1520
2449 y F1(1)1560 2437 y F4(\))g F5(\000)-14 b FV(!)23
b F4(bodyof\(t)2140 2408 y FX(0)2133 2461 y F1(1)2173
2437 y F4(\))2996 2384 y Gd(\()r(E)t(-)t(B)t F6(O)t(D)t(Y)t(O)t(F)r
Gd(\))1125 2681 y
 gsave currentpoint translate 0 851966 7800 div 8982313 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1125 2681 a 1494 2625 a F4(X)32 b Gb(=)-51
b F5(2)23 b F7(FV)p FY(\()p F4(v)1821 2637 y F1(2)1862
2625 y FY(\))p 1159 2662 1070 4 v 1159 2734 a F4(bodyof\({)p
F5(S)18 b F4(X=T)1710 2746 y F1(1)1750 2734 y F4(,v)1837
2746 y F1(2)1878 2734 y F4(}\))k F5(\000)-14 b FV(!)23
b F4(v)2188 2746 y F1(2)2820 2681 y Gd(\()r(E)t(-)t(S)t
F6(T)t(R)t(U)t(C)t(T)t Gd(B)t F6(E)t(T)o(A)p Gd(\))958
2977 y
 gsave currentpoint translate 0 851966 7800 div 11621476 7800 div 1179646
-7800 div box .9 setgray fill grestore
 958 2977 a 1494 2921 a F4(X)g F5(2)g F7(FV)p FY(\()p
F4(t)1821 2933 y F1(2)1862 2921 y FY(\))p 992 2958 1405
4 v 992 3031 a F4({)p F5(S)e F4(X=T)1237 3043 y F1(1)1278
3031 y F4(,t)1365 3043 y F1(2)1405 3031 y F4(})i F5(\000)-14
b FV(!)23 b F4({)p F5(S)e F4(X=T)1874 3043 y F1(1)1915
3031 y F4(,)o F0(f)p F4(X)i F5(7)p FV(!)g F4(T)2201 3043
y F1(1)2242 3031 y F0(g)p F4(t)2312 3043 y F1(2)2352
3031 y F4(})2783 2977 y Gd(\()r(E)t(-)t(S)t F6(T)t(R)t(U)t(C)t(T)t
Gd(S)t F6(U)t(B)t(S)t(T)p Gd(\))1113 3274 y
 gsave currentpoint translate 0 851966 7800 div 9174655 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1113 3274
a 1237 3218 a F4(X)32 b Gb(=)-51 b F5(2)23 b F7(FV)p
FY(\()p F4(t)1564 3230 y F1(2)1605 3218 y FY(\))166 b
F4(t)1846 3230 y F1(2)1910 3218 y F5(\000)-14 b FV(!)23
b F4(t)2118 3189 y FX(0)2110 3242 y F1(2)p 1147 3255
1095 4 v 1147 3328 a F4({)p F5(S)e F4(X=T)1392 3340 y
F1(1)1433 3328 y F4(,t)1520 3340 y F1(2)1560 3328 y F4(})i
F5(\000)-14 b FV(!)23 b F4({)p F5(S)e F4(X=T)2029 3340
y F1(1)2070 3328 y F4(,t)2165 3298 y FX(0)2157 3352 y
F1(2)2198 3328 y F4(})3015 3274 y Gd(\()r(E)t(-)t(S)t
F6(T)t(R)t(U)t(C)t(T)q Gd(\))450 3508 y F7(T)-8 b(ype)20
b(equivalence)p 3036 3425 415 4 v 3036 3532 4 108 v 2050
w Gb(\000)j F5(`)f F4(S)h FV($)g F4(T)p 3447 3532 V 3036
3535 415 4 v 1518 3629 a Gb(\000)g F5(`)f F4(T)h FF(:)-25
b(:)24 b F4(K)p 1431 3673 526 4 v 1431 3752 a Gb(\000)f
F5(`)g F4(T)g FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3108
3692 y Gd(\()r(Q)t(-)t(R)t F6(E)t(FL)q Gd(\))1431 3891
y Gb(\000)f F5(`)g F4(T)g FV($)g F4(S)f FF(:)-25 b(:)24
b F4(K)p 1431 3934 V 1431 4014 a Gb(\000)f F5(`)g F4(S)g
FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3064 3954 y Gd(\()r(Q)t(-)t(S)t
F6(Y)t(M)t(M)q Gd(\))1086 4153 y Gb(\000)f F5(`)f F4(S)h
FV($)g F4(U)g FF(:)-25 b(:)23 b F4(K)166 b Gb(\000)23
b F5(`)g F4(U)f FV($)h F4(T)g FF(:)-25 b(:)24 b F4(K)p
1086 4196 1217 4 v 1431 4276 a Gb(\000)f F5(`)g F4(S)g
FV($)g F4(T)f FF(:)-25 b(:)24 b F4(K)3036 4216 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))1005 4415 y Gb(\000)f F5(`)f
F4(S)1190 4427 y F1(1)1253 4415 y FV($)i F4(T)1403 4427
y F1(1)1467 4415 y FF(:)-25 b(:)23 b F4(*)166 b Gb(\000)23
b F5(`)g F4(S)1962 4427 y F1(2)2026 4415 y FV($)g F4(T)2176
4427 y F1(2)2239 4415 y FF(:)-25 b(:)24 b F4(*)p 1005
4458 1379 4 v 1224 4538 a Gb(\000)f F5(`)f F4(S)1409
4550 y F1(1)1449 4538 y FV(!)q F4(S)1576 4550 y F1(2)1640
4538 y FV($)h F4(T)1789 4550 y F1(1)1830 4538 y FV(!)p
F4(T)1956 4550 y F1(2)2020 4538 y FF(:)-25 b(:)24 b F4(*)3001
4477 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(\))976
4757 y
 gsave currentpoint translate 0 851966 7800 div 11340706 7800 div 1179646
-7800 div box .9 setgray fill grestore
 976 4757 a 1036 4701 a Gb(\000)e F5(`)h F4(T)1221
4713 y F1(1)1284 4701 y FF(:)-25 b(:)24 b F4(K)1429 4713
y F1(1)1635 4701 y Gb(\000)f F5(`)g F0(f)p F4(X)f F5(7)p
FV(!)h F4(T)2020 4713 y F1(1)2060 4701 y F0(g)p F4(t)2130
4713 y F1(2)2194 4701 y FF(:)g F4(T)2312 4713 y F1(2)p
1010 4738 1369 4 v 1010 4810 a Gb(\000)g F5(`)f F4(typeof\({)p
F5(S)c F4(X=T)1702 4822 y F1(1)1742 4810 y F4(,t)1830
4822 y F1(2)1870 4810 y F4(}\))k FV($)h F4(T)2130 4822
y F1(1)2194 4810 y FF(:)-25 b(:)23 b F4(K)2338 4822 y
F1(1)2805 4757 y Gd(\()r(Q)t(-)t(S)t F6(T)t(R)t(U)t(C)t(T)t
Gd(B)t F6(E)t(T)o(A)q Gd(\))p eop
%%Page: 271 272
271 271 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(271)450
793 y F7(Kinding)p 3041 710 410 4 v 3041 818 4 108 v
2342 w Gb(\000)23 b F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)p
3447 818 V 3041 821 410 4 v 1218 914 a Gb(\000)f F5(`)g
F4(T)1403 926 y F1(1)1467 914 y FF(:)-25 b(:)23 b F4(*)166
b Gb(\000)23 b F5(`)g F4(T)1962 926 y F1(2)2026 914 y
FF(:)-25 b(:)24 b F4(*)p 1218 958 953 4 v 1414 1037 a
Gb(\000)f F5(`)g F4(T)1599 1049 y F1(1)1640 1037 y FV(!)p
F4(T)1766 1049 y F1(2)1830 1037 y FF(:)-25 b(:)24 b F4(*)3006
977 y Gd(\()r(K)t(-)t(A)t F6(R)t(R)t(O)t(W)s Gd(\))1546
1176 y F4(X:)-25 b(:K)22 b F5(2)h Gb(\000)p 1518 1220
353 4 v 1518 1299 a(\000)g F5(`)f F4(X)h FF(:)-25 b(:)24
b F4(K)3083 1239 y Gd(\()r(K)t(-)t(T)t(V)l F6(A)t(R)r
Gd(\))1288 1518 y
 gsave currentpoint translate 0 851966 7800 div 6412865 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1288 1518 a 1400 1462 a Gb(\000)5 b(;)18
b F4(X:)-25 b(:K)21 b F5(`)i F4(T)1780 1474 y F1(1)1844
1462 y FF(:)-25 b(:)24 b F4(*)p 1322 1499 745 4 v 1322
1572 a Gb(\000)f F5(`)g F4({)p F5(S)d F4(X:)-25 b(:K,T)1815
1584 y F1(1)1855 1572 y F4(})23 b FF(:)-25 b(:)24 b F4(*)3006
1518 y Gd(\()r(K)t(-)t(S)t F6(T)t(R)t(U)t(C)t(T)q Gd(\))1281
1815 y
 gsave currentpoint translate 0 851966 7800 div 6524556 7800 div 1179646
-7800 div box .9 setgray fill grestore
 1281 1815 a 1315 1759 a Gb(\000)f F5(`)f F4(v)1500
1771 y F1(1)1564 1759 y FF(:)h F4({)p F5(S)e F4(X:)-25
b(:K,T)1989 1771 y F1(1)2030 1759 y F4(})p 1315 1796
759 4 v 1323 1869 a Gb(\000)23 b F5(`)g F4(typeof\(v)1813
1881 y F1(1)1854 1869 y F4(\))g FF(:)-25 b(:)23 b F4(K)3009
1815 y Gd(\()r(K)t(-)t(T)t F6(Y)t(P)t(E)t(O)t(F)r Gd(\))450
2048 y F7(T)-8 b(yping)p 3067 1966 383 4 v 3067 2073
4 108 v 2408 w Gb(\000)22 b F5(`)h F4(t)g FF(:)g F4(T)p
3447 2073 V 3067 2076 383 4 v 1224 2170 a Gb(\000)g F5(`)g
F4(T)1409 2182 y F1(1)1473 2170 y FF(:)g F4(*)166 b Gb(\000)23
b F5(`)f F4(t)1942 2182 y F1(1)2006 2170 y FF(:)h F4(T)2124
2182 y F1(1)p 1224 2213 941 4 v 1361 2293 a Gb(\000)g
F5(`)g F4(t)1546 2305 y F1(1)1631 2293 y F4(as)42 b(T)1805
2305 y F1(1)1868 2293 y FF(:)24 b F4(T)1986 2305 y F1(1)3004
2232 y Gd(\()r(T)o(-)t(C)t F6(O)t(E)t(R)t(C)t(E)r Gd(\))1555
2432 y F4(x:T)e F5(2)i Gb(\000)p 1531 2475 327 4 v 1531
2555 a(\000)f F5(`)g F4(x)f FF(:)i F4(T)3152 2494 y Gd(\()r(T)o(-)t(V)l
F6(A)t(R)r Gd(\))1102 2694 y Gb(\000)f F5(`)g F4(T)1287
2706 y F1(1)1351 2694 y FF(:)-25 b(:)24 b F4(*)165 b
Gb(\000)6 b(;)17 b F4(x:T)1883 2706 y F1(1)1947 2694
y F5(`)22 b F4(t)2064 2706 y F1(2)2127 2694 y FF(:)i
F4(T)2245 2706 y F1(2)p 1102 2737 1184 4 v 1277 2817
a Gb(\000)f F5(`)g Gb(\025)p F4(x:T)1594 2829 y F1(1)1635
2817 y F4(.t)1722 2829 y F1(2)1786 2817 y FF(:)g F4(T)1903
2829 y F1(1)1944 2817 y FV(!)p F4(T)2071 2829 y F1(2)3160
2756 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))1066 2956
y Gb(\000)g F5(`)f F4(t)1251 2968 y F1(1)1314 2956 y
FF(:)i F4(T)1432 2968 y F1(11)1509 2956 y FV(!)p F4(T)1636
2968 y F1(12)1879 2956 y Gb(\000)f F5(`)f F4(t)2064 2968
y F1(2)2128 2956 y FF(:)h F4(T)2245 2968 y F1(11)p 1066
2999 1257 4 v 1408 3079 a Gb(\000)g F5(`)g F4(t)1594
3091 y F1(1)1678 3079 y F4(t)1721 3091 y F1(2)1785 3079
y FF(:)g F4(T)1903 3091 y F1(12)3155 3018 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1185 3218 y Gb(\000)g F5(`)g F4(t)g
FF(:)g F4(S)165 b Gb(\000)23 b F5(`)g F4(S)g FV($)g F4(T)g
FF(:)-25 b(:)23 b F4(*)p 1185 3261 1018 4 v 1531 3341
a Gb(\000)g F5(`)g F4(t)f FF(:)i F4(T)3201 3280 y Gd(\()r(T)o(-)t(E)t
F6(Q)r Gd(\))450 3560 y
 gsave currentpoint translate 0 851966 7800 div 19656203 7800 div 1179646
-7800 div box .9 setgray fill grestore
 450 3560 a 484 3504 a Gb(\000)f
F5(`)g F4(T)669 3516 y F1(1)733 3504 y FF(:)-25 b(:)24
b F4(K)877 3516 y F1(1)1084 3504 y Gb(\000)f F5(`)f F0(f)p
F4(X)h F5(7)p FV(!)g F4(T)1468 3516 y F1(1)1509 3504
y F0(g)p F4(t)1579 3516 y F1(2)1642 3504 y FF(:)h F0(f)p
F4(X)e F5(7)p FV(!)h F4(T)1960 3516 y F1(1)2000 3504
y F0(g)p F4(T)2070 3516 y F1(2)2277 3504 y Gb(\000)5
b(;)18 b F4(X:)-25 b(:K)2517 3516 y F1(1)2581 3504 y
F5(`)23 b F4(T)2698 3516 y F1(2)2762 3504 y FF(:)-25
b(:)23 b F4(*)p 484 3540 2422 4 v 1109 3613 a Gb(\000)g
F5(`)g F4({)p F5(S)d F4(X=T)1496 3625 y F1(1)1537 3613
y F4(,t)1624 3625 y F1(2)1664 3613 y F4(})j FF(:)g F4({)p
F5(S)e F4(X:)-25 b(:K)2069 3625 y F1(1)2110 3613 y F4(,T)2197
3625 y F1(2)2237 3613 y F4(})3020 3560 y Gd(\()r(T)o(-)t(S)t
F6(T)t(R)t(U)t(C)t(T)q Gd(\))953 3856 y
 gsave currentpoint translate 0 851966 7800 div 11703838 7800 div 1179646
-7800 div box .9 setgray fill grestore
 953 3856 a 1295
3800 a Gb(\000)22 b F5(`)h F4(v)1480 3812 y F1(0)1543
3800 y FF(:)h F4({)p F5(S)c F4(X:)-25 b(:K)1882 3812
y F1(1)1922 3800 y F4(.T)2009 3812 y F1(2)2050 3800 y
F4(})p 987 3837 1415 4 v 987 3910 a Gb(\000)23 b F5(`)f
F4(bodyof\(v)1477 3922 y F1(0)1518 3910 y F4(\))g FF(:)i
F0(f)p F4(X)e F5(7)p FV(!)h F4(typeof\(v)2207 3922 y
F1(0)2247 3910 y F4(\))p F0(g)p F4(T)2361 3922 y F1(2)3000
3856 y Gd(\()r(T)o(-)t(B)t F6(O)t(D)t(Y)t(O)t(F)s Gd(\))450
4065 y F7(Abbr)o(eviations)1011 4193 y Gd(unannotated)e(binder)f(for)h
F4(X)2039 4146 y FK(def)2049 4193 y FY(=)115 b F4(X:)-25
b(:*)p 409 4309 9 36 v 418 4309 3000 6 v 3418 4309 38
6 v 3455 4309 9 36 v 575 4475 a Gd(Important)21 b(points:)575
4641 y F5(\017)41 b Gd(The)30 b(calculus)g(r)o(elies)f(on)i(an)e
(evaluation)h(r)o(elation)g(to)g(determine)g(under)g(what)g(cir)o(-)658
4741 y(cumstances)e F4(typeof\(t\))c Gd(makes)29 b(sense.)48
b(In)28 b(the)h(pr)o(esence)e(of)h(ef)o(fects,)g(it)h(need)e(not)658
4840 y(make)20 b(sense.)p eop
%%Page: 272 273
272 272 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(272)575
683 y F5(\017)41 b Gd(W)-8 b(e)19 b(omit)i(a)e(general)h
(\223valuability\224)e(judgement)j(at)e(this)h(point,)h(in)f(favor)f
(of)h(a)f(syntac-)658 783 y(tic)h(de\002nition)i(of)f(\223open)g
(values\224)575 949 y F5(\017)41 b F4(typeof)26 b Gd(always)j(makes)g
(sense)g(on)g(values)g(\(or)g(mor)o(e)f(generally)-9
b(,)31 b(later)-6 b(,)30 b(a)e(valuable)658 1048 y(expr)o(ession\))575
1214 y F5(\017)41 b F4(bodyof)31 b Gd(is)j(r)o(estricted)e(to)i(values)
g(because)f(of)g(the)h(substitution)i(of)d F4(typeof)n
Gd(.)64 b(\(W)-8 b(e)658 1314 y(could)33 b(go)g(a)f(little)i(further)e
(and)g(allow)i(it)f(for)f(nonvalues)i(in)f(the)g(non-dependent)658
1414 y(case,)19 b(wher)o(e)i(the)f(substitution)j(doesn't)e(do)g
(anything.\))575 1580 y F5(\017)41 b Gd(W)-5 b(ith)19
b(these)g(r)o(estrictions,)g(all)f(of)h(this)g(should)h(be)e(encodable)
g(using)h(existentials)g(with)658 1679 y(the)h F4(open)g
Gd(elimination)i(form.)575 1845 y F5(\017)41 b Gd(W)-8
b(e)23 b(don't)h(evaluate)e(type)h(expr)o(essions,)h(since)g(they)f
(play)h(no)g(r)o(ole)e(in)i(computation.)658 1945 y(This)18
b(would)g(need)f(to)h(be)f(r)o(evisited)g(if)g(we)h(had)f(any)h(kind)g
(of)f(type)h(analysis)f(\()p F4(Dynamic)m Gd(,)658 2045
y(etc.\).)575 2211 y F5(\017)41 b Gd(Str)o(uctur)o(e)18
b(values)i(ar)o(e)e(binders.)25 b(Dependencies)20 b(ar)o(e)f
(eliminated)g(during)i(pr)o(ojection)658 2310 y(\(this)g(is)g(easy)f
(in)h(the)g(binary)g(case\).)575 2476 y F5(\017)41 b
Gd(On)26 b(the)g(face)f(of)h(it,)h(ther)o(e)e(ar)o(e)g(two)h(choices)h
(for)f(type)f(equivalence)h(for)g F4(typeof)m Gd(:)36
b(\(1\))658 2576 y(we)31 b(can)g(include)g(the)g(computation)h(r)o(ule)
f(above)g(for)g(r)o(educing)f(a)h(typeof)g(applied)658
2676 y(to)g(a)g(str)o(uctur)o(e,)i(or)f(\(2\))e(we)h(can)g(eliminate)g
(this)i(r)o(ule)e(and)g(r)o(ely)f(on)i(r)o(e\003exivity)f(for)658
2775 y(comparing)19 b(typeof\(str)o(uctur)o(e\))f(expr)o(essions.)25
b(W)-8 b(e)20 b(have)e(chosen)i(the)g(\002rst)f(because)g(it)658
2875 y(supports)f(a)g(\223phase)g(distinction,\224)h(in)g(the)f(sense)h
(that)f(type)g(equality)h(never)f(depends)658 2974 y(on)26
b(any)f(notion)i(of)f(equality)g(for)f(or)o(dinary)g(expr)o(essions)h
(\227)f(i.e.)40 b(type)25 b(equality)h(can)658 3074 y(be)20
b(computed)g(by)g(looking)i(only)g(at)e(the)g(types.)26
b(T)-8 b(aking)21 b(the)f(second)h(choice)f(is)h(a)f(step)658
3174 y(on)h(the)g(r)o(oad)e(to)j(str)o(uctur)o(e)e(sharing.)575
3340 y F5(\017)41 b Gd(W)-8 b(e)30 b(have)g(omitted)g(the)g(congr)o
(uence)h(r)o(ule)f(for)g(type)g(r)o(eduction)g(for)g
F4(typeof)m Gd(,)j(since)658 3439 y(the)24 b(only)i(possible)f(ar)o
(guments)g(to)g F4(typeof)d Gd(ar)o(e)h(alr)o(eady)g(values)h(\(when)h
(we)g(extend)658 3539 y(to)d(paths)g(later)-6 b(,)22
b(this)h(needs)f(to)h(be)f(r)o(evisited)f(\227)h(note)h(that)f(this)h
(may)f(be)g(tricky)-9 b(,)23 b(since)658 3639 y(we)30
b(do)g(not)h(have)f(a)g(\223full)f(beta-equivalence\224)g(notion)j(of)e
(equality)g(on)h(terms:)45 b(we)658 3738 y(may)20 b(need)h(to)g
(de\002ne)f(a)h(simpli\002cation)h(r)o(elation)e(separate)f(fr)o(om)i
(evaluation\))575 3904 y F5(\017)41 b Gd(Str)o(uctur)o(e)29
b(values)i(do)g(not)h(have)e(principal)h(types,)j(for)c(the)h(same)g(r)
o(eason)g(as)f(exis-)658 4004 y(tential)e(values)h(did)f(not.)51
b(The)28 b(\002x)h(is)g(the)g(same:)42 b(if)28 b(every)g(str)o(uctur)o
(e)h(intr)o(o)g(form)g(is)658 4104 y(immediately)20 b(ascribed,)g(then)
h(the)g(term)g(will)g(have)f(a)h(principal)f(type.)p
eop
%%Page: 273 274
273 273 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(273)450
686 y Gj(32.2)119 b(Record)30 b(Kinds)g(and)f(Subkinding)450
945 y Ge(Records)20 b(of)h(types)1951 b FV(!)34 b(\))3264
945 y
 gsave currentpoint translate 0 131070 7800 div 1304812 7800 div 604894
-7800 div box .9 setgray fill grestore
 3264 945 a 16 w F7(tr)o(cd)p 409 1027 9 36 v 418
997 3000 6 v 3418 997 38 6 v 3455 1027 9 36 v 450 1117
a(New)21 b(syntactic)e(forms)592 1247 y F4(T)61 b Gd(::=)i(...)1695
b F7(types)852 1347 y
 gsave currentpoint translate 0 222821 7800 div 3779653 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 1347 a 15 w F4({l)955 1359
y F1(i)986 1347 y F4(=T)1073 1359 y F1(i)1115 1317 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1271 1347 y F4(})1355
b F7(r)o(ecord)20 b(of)h(types)852 1447 y
 gsave currentpoint translate 0 124518 7800 div 1281219 7800 div 525016
-7800 div box .9 setgray fill grestore
 852 1447 a
15 w F4(T.l)1671 b F7(pr)o(ojection)592 1646 y F4(K)61
b Gd(::=)i(...)1695 b F7(kinds)852 1746 y
 gsave currentpoint translate 0 222821 7800 div 3927106 7800 div 590183
-7800 div box .9 setgray fill grestore
 852 1746 a
15 w F4({l)955 1758 y F1(i)986 1746 y F4(:)-25 b(:K)1092
1758 y F1(i)1133 1715 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1290
1746 y F4(})1336 b F7(kind)20 b(of)h(r)o(ecords)g(of)f(types)450
1960 y(New)h(type)e(equivalence)j(rules)p 3036 1878 415
4 v 3036 1985 4 108 v 1701 w Gb(\000)h F5(`)f F4(S)h
FV($)g F4(T)p 3447 1985 V 3036 1988 415 4 v 1065 2166
a
 gsave currentpoint translate 0 881095 7800 div 9936826 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1065 2166 a 1099 2110 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1099 2110 a 15 w Gb(\000)g
F5(`)16 b F4(S)22 b FV($)i F4(T)e FF(:)-25 b(:)24 b F4(K)1632
2122 y F1(1)1839 2110 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1839 2110 a 16 w Gb(\000)f F5(`)15
b F4(K)2033 2122 y F1(1)2096 2110 y FF(<)-17 b(:)24 b
F4(K)2249 2122 y F1(2)p 1099 2146 1191 4 v 1407 2223
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1407 2223 a 16 w Gb(\000)e F5(`)16 b F4(S)23 b FV($)g
F4(T)f FF(:)-25 b(:)24 b F4(K)1941 2235 y F1(2)3145 2166
y Gd(\()r(Q)t(-)t(S)t F6(U)t(B)q Gd(\))1101 2478 y
 gsave currentpoint translate 0 881095 7800 div 9367922 7800 div 1274597
-7800 div box .9 setgray fill grestore
 1101
2478 a 1399 2422 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1399 2422 a 16 w Gb(\000)e F5(`)1559
2370 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1716 2422 y
F4(T)1759 2434 y F1(i)1814 2422 y FF(:)-25 b(:)23 b F4(K)1958
2434 y F1(i)p 1135 2459 1119 4 v 1135 2536 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1135 2536
a 15 w Gb(\000)g F5(`)16 b F4({l)1372 2548 y F1(i)1403
2536 y F4(=T)1491 2548 y F1(i)1532 2506 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1688 2536 y F4(}.l)1819 2548 y F1(i)1874
2536 y FV($)23 b F4(T)2023 2548 y F1(i)2078 2536 y FF(:)-25
b(:)23 b F4(K)2222 2548 y F1(i)2877 2478 y Gd(\()r(Q)t(-)t(T)t(R)t
F6(C)t(D)t Gd(B)t F6(E)t(T)o(A)r Gd(\))1141 2782 y
 gsave currentpoint translate 0 881095 7800 div 8724625 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1141
2782 a 1175 2726 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1175 2726 a 16 w Gb(\000)g F5(`)16
b F4(T)1369 2738 y F1(1)1433 2726 y FV($)23 b F4(T)1590
2697 y FX(0)1582 2750 y F1(1)1646 2726 y FF(:)-25 b(:)24
b F4({l)1834 2738 y F1(i)1865 2726 y F4(:)-25 b(:K)1971
2738 y F1(i)2013 2697 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2169
2726 y F4(})p 1175 2763 1038 4 v 1252 2840 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1252 2840
a 16 w Gb(\000)23 b F5(`)16 b F4(T)1446 2852 y F1(1)1487
2840 y F4(.l)1574 2852 y F1(i)1628 2840 y FV($)23 b F4(T)1785
2810 y FX(0)1778 2863 y F1(1)1818 2840 y F4(.l)1906 2852
y F1(i)1960 2840 y FF(:)-25 b(:)24 b F4(K)2104 2852 y
F1(i)3005 2782 y Gd(\()r(Q)t(-)t(T)t F6(Y)t Gd(P)t F6(R)t(O)t(J)s
Gd(\))778 3095 y
 gsave currentpoint translate 0 881095 7800 div 14458201 7800 div 1274597
-7800 div box .9 setgray fill grestore
 778 3095 a 1297 3039 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1297 3039 a 16
w Gb(\000)e F5(`)1457 2986 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1614
3039 y F4(T)1657 3051 y F1(i)1712 3039 y FV($)23 b F4(T)1869
3009 y FX(0)1861 3063 y F1(i)1916 3039 y FF(:)-25 b(:)23
b F4(K)2060 3051 y F1(i)p 812 3076 1764 4 v 812 3152
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 812 3152 a 16 w Gb(\000)g F5(`)15 b F4({l)1050 3164
y F1(i)1081 3152 y F4(=T)1168 3164 y F1(i)1210 3122 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1366 3152 y F4(})23
b FV($)g F4({l)1626 3164 y F1(i)1657 3152 y F4(=T)1752
3122 y FX(0)1744 3176 y F1(i)1786 3122 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1942 3152 y F4(})23 b FF(:)-25 b(:)24
b F4({l)2197 3164 y F1(i)2228 3152 y F4(:)-25 b(:K)2334
3164 y F1(i)2376 3122 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2532
3152 y F4(})3072 3095 y Gd(\()r(Q)t(-)t(T)t(R)t F6(C)t(D)s
Gd(\))778 3511 y
 gsave currentpoint translate 0 881095 7800 div 14460035 7800 div 2090158
-7800 div box .9 setgray fill grestore
 778 3511 a 812 3343 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 812 3343 a 16
w Gb(\000)23 b F5(`)15 b F4(T)23 b FF(:)-25 b(:)24 b
F4({l)1217 3355 y F1(i)1248 3343 y F4(:)-25 b(:K)1354
3355 y F1(i)1396 3313 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1552
3343 y F4(})1762 3343 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1762 3343 a 15 w Gb(\000)23 b
F5(`)16 b F4(T)1963 3313 y FX(0)2009 3343 y FF(:)-25
b(:)24 b F4({l)2197 3355 y F1(i)2228 3343 y F4(:)-25
b(:K)2334 3355 y F1(i)2376 3313 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2532 3343 y F4(})1194 3455 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1194 3455 a
16 w Gb(\000)23 b F5(`)1355 3402 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1511 3455 y F4(T.l)1642 3467 y F1(i)1696
3455 y FV($)23 b F4(T)1853 3425 y FX(0)1877 3455 y F4(.l)1964
3467 y F1(i)2018 3455 y FF(:)-25 b(:)24 b F4(K)2162 3467
y F1(i)p 812 3492 1764 4 v 1201 3568 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1201 3568 a 15
w Gb(\000)f F5(`)16 b F4(T)22 b FV($)h F4(T)1575 3538
y FX(0)1621 3568 y FF(:)-25 b(:)24 b F4({l)1809 3580
y F1(i)1840 3568 y F4(:)-25 b(:K)1946 3580 y F1(i)1987
3538 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)2144 3568 y
F4(})2924 3511 y Gd(\()r(Q)t(-)t(T)t(R)t F6(C)t(D)t Gd(E)t
F6(X)t(T)s Gd(\))983 4018 y
 gsave currentpoint translate 0 881095 7800 div 11220504 7800 div 2810768
-7800 div box .9 setgray fill grestore
 983 4018 a 1312 3759 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1312
3759 a 15 w Gb(\000)23 b F5(`)16 b F4({l)1549 3771 y
F1(i)1580 3759 y F4(=T)1667 3771 y F1(i)1709 3729 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)1865 3759 y F4(})23 b FF(:)-25
b(:)24 b F4(K)1306 3863 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1306 3863 a 15 w Gb(\000)f
F5(`)16 b F4({l)1543 3875 y F1(\031i)1618 3863 y F4(=T)1715
3830 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1705 3888 y
F1(\031i)1872 3863 y F4(})22 b FF(:)-25 b(:)24 b F4(K)1202
3962 y Gb(\031)d Gd(is)g(a)f(permutation)h(of)g F0(f)p
Gb(1::n)p F0(g)p 1017 3999 1354 4 v 1017 4075 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1017
4075 a 16 w Gb(\000)i F5(`)15 b F4({l)1255 4087 y F1(i)1286
4075 y F4(=T)1373 4087 y F1(i)1415 4045 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1571 4075 y F4(})23 b FV($)g F4({l)1831
4087 y F1(\031i)1906 4075 y F4(=T)2003 4043 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)1993 4100 y F1(\031i)2160
4075 y F4(})22 b FF(:)-25 b(:)24 b F4(K)2826 4018 y Gd(\()r(Q)t(-)t(T)t
(R)t F6(C)t(D)t Gd(-)t(P)t F6(E)t(R)t(M)s Gd(\))450 4230
y F7(New)d(kind)f(formation)g(rules)1296 4438 y
 gsave currentpoint translate 0 881095 7800 div 6286723 7800 div 1274597
-7800 div box .9 setgray fill grestore
 1296
4438 a 1442 4382 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1442 4382 a 16 w Gb(\000)j F5(`)1602
4330 y FB(i)p Fz(2)q FB(1)-10 b(:)g(:)g(n)1759 4382 y
F4(K)1802 4394 y F1(i)1855 4382 y Gd(ok)p 1330 4419 729
4 v 1330 4495 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1330 4495 a 16 w Gb(\000)22 b F5(`)16
b F4({l)1567 4507 y F1(i)1598 4495 y F4(:)-25 b(:K)1704
4507 y F1(i)1746 4466 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1902
4495 y F4(})21 b Gd(ok)3027 4438 y(\()r(K)t(F)t(-)t(T)t(R)t
F6(C)t(D)s Gd(\))450 4650 y F7(New)g(subkinding)g(rules)1435
4850 y
 gsave currentpoint translate 0 881095 7800 div 4092652 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1435 4850 a 1470 4794 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1470 4794 a 16 w Gb(\000)i
F5(`)15 b F4(K)1664 4806 y F1(1)1728 4794 y FV($)23 b
F4(K)1877 4806 y F1(2)p 1469 4831 451 4 v 1469 4907 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore

1469 4907 a 16 w Gb(\000)f F5(`)16 b F4(K)1663 4919 y
F1(1)1726 4907 y FF(<)-17 b(:)24 b F4(K)1879 4919 y F1(2)3088
4850 y Gd(\()r(S)t(K)t(-)t(E)t F6(Q)t(V)q Gd(\))p eop
%%Page: 274 275
274 274 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(274)1127
753 y
 gsave currentpoint translate 0 881095 7800 div 8958630 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1127 753 a 1161 697 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1161 697 a 15 w Gb(\000)23
b F5(`)16 b F4(K)1354 709 y F1(1)1418 697 y FF(<)-17
b(:)24 b F4(K)1570 709 y F1(2)1777 697 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 697 a 16
w Gb(\000)f F5(`)15 b F4(K)1971 709 y F1(2)2034 697 y
FF(<)-17 b(:)24 b F4(K)2187 709 y F1(3)p 1161 734 1067
4 v 1469 811 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1469 811 a 16 w Gb(\000)e F5(`)16 b F4(K)1663
823 y F1(1)1726 811 y FF(<)-17 b(:)24 b F4(K)1879 823
y F1(3)2993 753 y Gd(\()r(S)t(K)t(-)t(T)t F6(R)t(A)t(N)t(S)r
Gd(\))1012 1057 y
 gsave currentpoint translate 0 881095 7800 div 10763282 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1012 1057 a 1289 1001 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1289 1001 a
16 w Gb(\000)f F5(`)15 b F4({l)1526 1013 y F1(i)1558
1001 y F4(:)-25 b(:K)1664 1013 y F1(i)1705 972 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1943 1001 y
F4(})20 b Gd(ok)p 1046 1038 1296 4 v 1046 1115 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1046
1115 a 16 w Gb(\000)j F5(`)15 b F4({l)1284 1127 y F1(i)1315
1115 y F4(:)-25 b(:K)1421 1127 y F1(i)1462 1085 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1700 1115 y
F4(})23 b FF(<)-17 b(:)24 b F4({l)1963 1127 y F1(i)1994
1115 y F4(:)-25 b(:K)2100 1127 y F1(i)2142 1085 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2298 1115 y F4(})2789 1057
y Gd(\()r(S)t(-)t(T)t(R)t F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s
Gd(\))849 1473 y
 gsave currentpoint translate 0 881095 7800 div 13346772 7800 div 2090158
-7800 div box .9 setgray fill grestore
 849 1473 a 883 1306 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 883 1306 a 15
w Gb(\000)23 b F5(`)16 b F4({l)1120 1318 y F1(i)1151
1306 y F4(:)-25 b(:J)1257 1318 y F1(i)1299 1276 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)1455 1306 y F4(})20 b Gd(ok)1777
1306 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 1306 a 16 w Gb(\000)j F5(`)15 b F4({l)2014
1318 y F1(i)2046 1306 y F4(:)-25 b(:K)2152 1318 y F1(i)2193
1276 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2350 1306 y
F4(})20 b Gd(ok)1395 1418 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1395 1418 a 15 w Gb(\000)j
F5(`)1555 1365 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1711
1418 y F4(J)1755 1430 y F1(i)1809 1418 y FF(<)-17 b(:)24
b F4(K)1962 1430 y F1(i)p 883 1454 1623 4 v 1087 1531
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1087 1531 a 16 w Gb(\000)f F5(`)15 b F4({l)1324 1543
y F1(i)1356 1531 y F4(:)-25 b(:J)1461 1543 y F1(i)1503
1501 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1659 1531 y
F4(})23 b FF(<)-17 b(:)24 b F4({l)1922 1543 y F1(i)1954
1531 y F4(:)-25 b(:K)2059 1543 y F1(i)2101 1501 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2257 1531 y F4(})2736 1473
y Gd(\()r(S)t(K)t(-)t(T)t(R)t F6(C)t(D)t Gd(-)t(D)t F6(E)t(P)t(T)t(H)s
Gd(\))450 1685 y F7(New)21 b(kind)f(equivalence)i(rules)1048
2088 y
 gsave currentpoint translate 0 881095 7800 div 10194507 7800 div 2810768
-7800 div box .9 setgray fill grestore
 1048 2088 a 1202 1826 a Gb(\031)f Gd(is)g(a)f(permutation)h(of)g
F0(f)p Gb(1::n)p F0(g)1330 1929 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1330 1929 a 16 w Gb(\000)h
F5(`)16 b F4({l)1567 1941 y F1(i)1598 1929 y F4(:)-25
b(:K)1704 1941 y F1(i)1746 1899 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1902 1929 y F4(})21 b Gd(ok)1324 2032 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1324
2032 a 16 w Gb(\000)h F5(`)16 b F4({l)1561 2044 y F1(\031i)1636
2032 y F4(:)-25 b(:K)1752 2000 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1742 2057 y F1(\031i)1908 2032 y F4(})21
b Gd(ok)p 1082 2069 1224 4 v 1082 2145 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1082 2145 a
16 w Gb(\000)i F5(`)15 b F4({l)1320 2157 y F1(i)1351
2145 y F4(:)-25 b(:K)1457 2157 y F1(i)1498 2115 y FB(i)p
Fz(2)q FB(1)-10 b(:)g(:)g(n)1655 2145 y F4(})22 b FV($)i
F4({l)1915 2157 y F1(\031i)1990 2145 y F4(:)-25 b(:K)2106
2113 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2095 2171 y
F1(\031i)2262 2145 y F4(})2673 2088 y Gd(\()r(K)t(E)t
F6(Q)t(V)o Gd(-)t(T)t(R)t F6(C)t(D)t Gd(-)t(P)t F6(E)t(R)t(M)s
Gd(\))450 2325 y F7(New)21 b(kinding)f(rules)p 3041 2242
410 4 v 3041 2350 4 108 v 1997 w Gb(\000)j F5(`)g F4(T)f
FF(:)-25 b(:)24 b F4(K)p 3447 2350 V 3041 2353 410 4
v 1066 2538 a
 gsave currentpoint translate 0 881095 7800 div 9908143 7800 div 1274597
-7800 div box .9 setgray fill grestore
 1066 2538 a 1399 2482 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1399 2482 a 16
w Gb(\000)e F5(`)1559 2430 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1716
2482 y F4(T)1759 2494 y F1(i)1814 2482 y FF(:)-25 b(:)23
b F4(K)1958 2494 y F1(i)p 1100 2519 1188 4 v 1100 2596
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1100 2596 a 16 w Gb(\000)g F5(`)16 b F4({l)1338 2608
y F1(i)1369 2596 y F4(=T)1456 2608 y F1(i)1498 2566 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1654 2596 y F4(})23
b FF(:)-25 b(:)24 b F4({l)1909 2608 y F1(i)1940 2596
y F4(:)-25 b(:K)2046 2608 y F1(i)2088 2566 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)2244 2596 y F4(})3077 2538 y Gd(\()r(K)t(-)t(T)t
(R)t F6(C)t(D)s Gd(\))1248 2843 y
 gsave currentpoint translate 0 881095 7800 div 7041355 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1248 2843 a 1282 2787
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1282 2787 a 16 w Gb(\000)23 b F5(`)15 b F4(T)1476 2799
y F1(0)1539 2787 y FF(:)-25 b(:)24 b F4({l)1727 2799
y F1(i)1759 2787 y F4(:)-25 b(:K)1864 2799 y F1(i)1906
2757 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2062 2787 y
F4(})p 1282 2824 824 4 v 1420 2900 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1420 2900 a 16 w
Gb(\000)23 b F5(`)15 b F4(T)1614 2912 y F1(0)1654 2900
y F4(.l)1742 2912 y F1(j)1794 2900 y FF(:)-25 b(:)24
b F4(K)1938 2912 y F1(j)3010 2843 y Gd(\()r(K)t(-)t(T)t
F6(Y)t Gd(P)t F6(R)t(O)t(J)s Gd(\))450 3055 y F7(New)d(abbr)o
(eviations)1046 3188 y
 gsave currentpoint translate 0 530384 7800 div 10231154 7800 div 858065
-7800 div box .9 setgray fill grestore
 1046 3188 a 1070 3201 a F4({...K)1288
3213 y F1(i)1319 3201 y F4(...})1600 3154 y FK(def)1610
3201 y FY(=)116 b F4({...i:)-25 b(:K)2112 3213 y F1(i)2144
3201 y F4(...})p 409 3317 9 36 v 418 3317 3000 6 v 3418
3317 38 6 v 3455 3317 9 36 v 450 3483 a Gd(Notes:)575
3649 y F5(\017)41 b Gd(W)-8 b(e)20 b(include)h(an)g(extensionality)g(r)
o(ule)g(for)g(several)f(r)o(easons:)757 3815 y Ge(\226)41
b Gd(It's)21 b(natural.)k(\(Pr)o(ogrammers)20 b(would)h(expect)f(it.\))
757 3948 y Ge(\226)41 b Gd(It's)21 b(needed)f(for)h(sel\002\002cation)g
(to)g(work.)757 4081 y Ge(\226)41 b Gd(The)21 b(pr)o(esent)f(algorithm)
i(r)o(elies)e(on)h(it)g(\(weak)f(ar)o(gument,)g(but)h(ther)o(e)f(it)h
(is\))p eop
%%Page: 275 276
275 275 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(275)450
686 y Gj(32.3)119 b(Singleton)30 b(Kinds)450 941 y Ge(Singleton)19
b(kinds)2187 b FV(!)35 b F4(Eq)p 409 1023 9 36 v 418
994 3000 6 v 3418 994 38 6 v 3455 1023 9 36 v 450 1113
a F7(New)21 b(syntactic)e(forms)592 1244 y F4(K)61 b
Gd(::=)i(...)1695 b F7(kinds)852 1343 y
 gsave currentpoint translate 0 270154 7800 div 1969341 7800 div 579629
-7800 div box .9 setgray fill grestore
 852 1343 a 15
w F4(Eq\(T\))1583 b F7(singleton)21 b(kind)450 1558 y(New)g(type)e
(equivalence)j(rules)p 3036 1476 415 4 v 3036 1583 4
108 v 1701 w Gb(\000)h F5(`)f F4(S)h FV($)g F4(T)p 3447
1583 V 3036 1586 415 4 v 1065 1764 a
 gsave currentpoint translate 0 881095 7800 div 9936826 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1065 1764 a 1099
1708 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1099 1708 a 15 w Gb(\000)g F5(`)16 b F4(S)22 b
FV($)i F4(T)e FF(:)-25 b(:)24 b F4(K)1632 1720 y F1(1)1839
1708 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1839 1708 a 16 w Gb(\000)f F5(`)15 b F4(K)2033
1720 y F1(1)2096 1708 y FF(<)-17 b(:)24 b F4(K)2249 1720
y F1(2)p 1099 1744 1191 4 v 1407 1821 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1407 1821 a 16
w Gb(\000)e F5(`)16 b F4(S)23 b FV($)g F4(T)f FF(:)-25
b(:)24 b F4(K)1941 1833 y F1(2)3145 1764 y Gd(\()r(Q)t(-)t(S)t
F6(U)t(B)q Gd(\))1392 2068 y
 gsave currentpoint translate 0 881095 7800 div 4763822 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1392 2068 a 1426 2012 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore

1426 2012 a 16 w Gb(\000)f F5(`)15 b F4(S)23 b FF(:)-25
b(:)24 b F4(Eq\(T\))p 1426 2049 536 4 v 1427 2125 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1427
2125 a 16 w Gb(\000)f F5(`)15 b F4(S)23 b FV($)g F4(T)g
FF(:)-25 b(:)23 b F4(*)2811 2068 y Gd(\()r(Q)t(-)t(S)t
F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)t Gd(1)q(\))1306 2372
y
 gsave currentpoint translate 0 881095 7800 div 6127324 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1306 2372 a 1427 2316 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1427 2316 a 16 w Gb(\000)g
F5(`)15 b F4(S)23 b FV($)g F4(T)g FF(:)-25 b(:)23 b F4(*)p
1340 2353 709 4 v 1340 2429 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1340 2429 a 16 w Gb(\000)g
F5(`)15 b F4(S)23 b FV($)g F4(T)f FF(:)-25 b(:)24 b F4(Eq\(S\))2811
2372 y Gd(\()r(Q)t(-)t(S)t F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)t
Gd(2)q(\))450 2584 y F7(New)d(kind)f(formation)g(rules)1420
2784 y
 gsave currentpoint translate 0 881095 7800 div 4328958 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1420 2784 a 1513 2728 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 2728 a 16 w Gb(\000)j
F5(`)16 b F4(S)22 b FF(:)-25 b(:)24 b F4(*)p 1454 2765
481 4 v 1454 2841 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1454 2841 a 16 w Gb(\000)e F5(`)16
b F4(Eq\(S\))j Gd(ok)2811 2784 y(\()r(K)t(F)t(-)t(S)t
F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)r Gd(\))450 2996 y F7(New)i(kind)f
(equivalence)i(rules)1302 3196 y
 gsave currentpoint translate 0 881095 7800 div 6182665 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1302 3196 a 1427 3140
a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1427 3140 a 16 w Gb(\000)h F5(`)15 b F4(S)23 b FV($)g
F4(T)g FF(:)-25 b(:)23 b F4(*)p 1336 3176 716 4 v 1336
3253 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1336 3253 a 16 w Gb(\000)g F5(`)16 b F4(Eq\(S\))21
b FV($)i F4(Eq\(T\))2704 3196 y Gd(\()r(K)t(E)t F6(Q)t(V)o
Gd(-)t(S)t F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)q Gd(\))450
3408 y F7(New)e(subkinding)g(rules)1435 3607 y
 gsave currentpoint translate 0 881095 7800 div 4092652 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1435 3607
a 1470 3552 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1470 3552 a 16 w Gb(\000)i F5(`)15 b F4(K)1664
3564 y F1(1)1728 3552 y FV($)23 b F4(K)1877 3564 y F1(2)p
1469 3588 451 4 v 1469 3665 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1469 3665 a 16 w Gb(\000)f
F5(`)16 b F4(K)1663 3677 y F1(1)1726 3665 y FF(<)-17
b(:)24 b F4(K)1879 3677 y F1(2)3088 3607 y Gd(\()r(S)t(K)t(-)t(E)t
F6(Q)t(V)q Gd(\))1127 3912 y
 gsave currentpoint translate 0 881095 7800 div 8958630 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1127 3912 a 1161 3856 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore

1161 3856 a 15 w Gb(\000)f F5(`)16 b F4(K)1354 3868 y
F1(1)1418 3856 y FF(<)-17 b(:)24 b F4(K)1570 3868 y F1(2)1777
3856 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 3856 a 16 w Gb(\000)f F5(`)15 b F4(K)1971
3868 y F1(2)2034 3856 y FF(<)-17 b(:)24 b F4(K)2187 3868
y F1(3)p 1161 3893 1067 4 v 1469 3969 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1469 3969 a 16
w Gb(\000)e F5(`)16 b F4(K)1663 3981 y F1(1)1726 3969
y FF(<)-17 b(:)24 b F4(K)1879 3981 y F1(3)2993 3912 y
Gd(\()r(S)t(K)t(-)t(T)t F6(R)t(A)t(N)t(S)r Gd(\))1388
4216 y
 gsave currentpoint translate 0 881095 7800 div 4829360 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1388 4216 a 1513 4160 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 4160 a 16 w Gb(\000)f
F5(`)16 b F4(S)22 b FF(:)-25 b(:)24 b F4(*)p 1422 4197
544 4 v 1422 4273 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1422 4273 a 16 w Gb(\000)f F5(`)15
b F4(Eq\(S\))21 b FF(<)-17 b(:)24 b F4(*)2814 4216 y
Gd(\()r(S)t(K)t(-)t(S)t F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)q
Gd(\))450 4453 y F7(New)d(kinding)f(rules)p 3041 4370
410 4 v 3041 4478 4 108 v 1997 w Gb(\000)j F5(`)g F4(T)f
FF(:)-25 b(:)24 b F4(K)p 3447 4478 V 3041 4481 410 4
v 1392 4658 a
 gsave currentpoint translate 0 881095 7800 div 4763822 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1392 4658 a 1513 4602 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 4602 a 16
w Gb(\000)f F5(`)16 b F4(S)22 b FF(:)-25 b(:)24 b F4(*)p
1426 4639 536 4 v 1426 4715 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1426 4715 a 16 w Gb(\000)f
F5(`)15 b F4(S)23 b FF(:)-25 b(:)24 b F4(Eq\(S\))2862
4658 y Gd(\()r(K)t(-)t(S)t F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)q
Gd(\))p 409 4807 9 36 v 418 4807 3000 6 v 3418 4807 38
6 v 3455 4807 9 36 v eop
%%Page: 276 277
276 276 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(276)450
686 y Gj(32.4)119 b(Dependent)29 b(Function)h(and)g(Record)g(Kinds)450
958 y Ge(Dependent)18 b(records)i(of)i(types)1235 b FV(!)35
b(\))f F7(tr)o(cd)3135 958 y
 gsave currentpoint translate 0 305389 7800 div 2324539 7800 div 604894
-7800 div box .9 setgray fill grestore
 3135 958 a 16 w F7(depkind)p
409 1040 9 36 v 418 1010 3000 6 v 3418 1010 38 6 v 3455
1040 9 36 v 450 1129 a(New)21 b(syntactic)e(forms)592
1260 y F4(K)61 b Gd(::=)i(...)1695 b F7(kinds)852 1360
y
 gsave currentpoint translate 0 124518 7800 div 2590445 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 1360 a 15 w Gb(\005)p F4(X:)-25 b(:K.K)2670 1360
y
 gsave currentpoint translate 0 305389 7800 div 3107684 7800 div 604894
-7800 div box .9 setgray fill grestore
 2670 1360 a 37 w F7(dependent)30 b(kind)16 b(of)g(operators)852
1483 y F4({l)939 1495 y F1(i)970 1483 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 970 1483 a 16
w Fi(.)e F4(X)1085 1495 y F1(i)1133 1483 y F4(:)-25 b(:K)1238
1495 y F1(i)1280 1453 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1436
1483 y F4(})2670 1483 y
 gsave currentpoint translate 0 305389 7800 div 2943844 7800 div 604894
-7800 div box .9 setgray fill grestore
 2670 1483 a 16 w F7(dependent)31
b(kind)15 b(of)h(r)o(ecords)f(of)h(types)450 1698 y(New)21
b(kind)f(formation)g(rules)1139 1814 y Gb(\000)j F5(`)g
F4(K)1324 1826 y F1(1)1386 1814 y Gd(ok)166 b Gb(\000)1694
1814 y
 gsave currentpoint translate 0 222821 7800 div 2112436 7800 div 525016
-7800 div box .9 setgray fill grestore
 1694 1814 a 1704 1815 a Gb(;)23 b F4(X:)-25 b(:K)1899
1827 y F1(1)1979 1814 y F5(`)22 b F4(K)2096 1826 y F1(2)2157
1814 y Gd(ok)p 1139 1858 1110 4 v 1362 1941 a Gb(\000)h
F5(`)1504 1941 y
 gsave currentpoint translate 0 222821 7800 div 3229981 7800 div 577638
-7800 div box .9 setgray fill grestore
 1504 1941 a 16 w Gb(\005)p F4(X:)-25
b(:K)1729 1953 y F1(1)1770 1941 y F4(.K)1857 1953 y F1(2)1934
1941 y Gd(ok)3034 1877 y(\()r(K)t(F)t(-)t(T)n(A)t F6(R)t(R)r
Gd(\))1037 2080 y Gb(\000)1087 2080 y
 gsave currentpoint translate 0 261013 7800 div 6467645 7800 div 525016
-7800 div box .9 setgray fill grestore
 1087 2080 a 10
w Gb(;)23 b F4(X)1187 2092 y F1(1)1227 2080 y F4(:)-25
b(:K)1333 2092 y F1(1)1388 2080 y F5(\001)14 b(\001)g(\001)f
F4(X)1542 2092 y F1(i)p F2(-)p F1(1)1660 2080 y F4(:)-25
b(:K)1766 2092 y F1(i)p F2(-)p F1(1)1924 2080 y F5(`)1985
2050 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2164 2080 y
F4(K)2208 2092 y F1(i)2260 2080 y Gd(ok)p 1037 2126 1315
4 v 1249 2210 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1249 2210 a 15 w Gb(\000)23 b F5(`)16
b F4({l)1486 2222 y F1(i)1517 2210 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1517 2210 a 16 w
Fi(.)e F4(X)1633 2222 y F1(i)1680 2210 y F4(:)-25 b(:K)1786
2222 y F1(i)1827 2180 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1984
2210 y F4(})20 b Gd(ok)3027 2145 y(\()r(K)t(F)t(-)t(T)t(R)t
F6(C)t(D)s Gd(\))450 2340 y F7(New)h(kind)f(equivalence)i(rules)1038
2456 y Gb(\000)h F5(`)g F4(K)1223 2468 y F1(1)1287 2456
y FV($)g F4(K)1444 2426 y FX(0)1437 2480 y F1(1)1643
2456 y Gb(\000)1694 2456 y
 gsave currentpoint translate 0 222821 7800 div 2112436 7800 div 525016
-7800 div box .9 setgray fill grestore
 1694 2456 a 10 w Gb(;)g F4(X:)-25
b(:K)1899 2468 y F1(1)1979 2456 y F5(`)22 b F4(K)2096
2468 y F1(2)2160 2456 y FV($)h F4(K)2317 2426 y FX(0)2309
2480 y F1(2)p 1038 2500 1312 4 v 1149 2588 a Gb(\000)g
F5(`)1291 2588 y
 gsave currentpoint translate 0 222821 7800 div 3229981 7800 div 577638
-7800 div box .9 setgray fill grestore
 1291 2588 a 16 w Gb(\005)p F4(X:)-25
b(:K)1516 2600 y F1(1)1557 2588 y F4(.K)1644 2600 y F1(2)1723
2588 y FV($)1829 2588 y
 gsave currentpoint translate 0 308984 7800 div 3229981 7800 div 617206
-7800 div box .9 setgray fill grestore
 1829 2588 a 16 w Gb(\005)p F4(X:)g(:K)2062
2558 y FX(0)2055 2611 y F1(1)2095 2588 y F4(.K)2190 2558
y FX(0)2182 2611 y F1(2)2926 2519 y Gd(\()r(K)t(E)t F6(Q)t(V)o
Gd(-)t(T)n(A)t F6(R)t(R)r Gd(\))1202 2736 y Gb(\031)21
b Gd(is)g(a)f(permutation)h(of)g F0(f)p Gb(1::n)p F0(g)1249
2839 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1249 2839 a 15 w Gb(\000)i F5(`)16 b F4({l)1486
2851 y F1(i)1517 2839 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1517 2839 a 16 w Fi(.)e F4(X)1633
2851 y F1(i)1680 2839 y F4(:)-25 b(:K)1786 2851 y F1(i)1827
2809 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1984 2839 y
F4(})20 b Gd(ok)1221 2943 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1221 2943 a 15 w Gb(\000)j
F5(`)16 b F4({l)1458 2955 y F1(\031i)1533 2943 y
 gsave currentpoint translate 0 222821 7800 div 1626556 7800 div 525016
-7800 div box .9 setgray fill grestore
 1533
2943 a 16 w Fi(.)e F4(X)1648 2955 y F1(\031i)1739 2943
y F4(:)-25 b(:K)1855 2910 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1845
2968 y F1(\031i)2011 2943 y F4(})21 b Gd(ok)p 898 2986
1592 4 v 898 3069 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 898 3069 a 16 w Gb(\000)i F5(`)15
b F4({l)1135 3081 y F1(i)1167 3069 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1167 3069 a 15 w
Fi(.)g F4(X)1282 3081 y F1(i)1329 3069 y F4(:)-25 b(:K)1435
3081 y F1(i)1477 3039 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1633
3069 y F4(})23 b FV($)g F4({l)1893 3081 y F1(\031i)1968
3069 y
 gsave currentpoint translate 0 222821 7800 div 1626556 7800 div 525016
-7800 div box .9 setgray fill grestore
 1968 3069 a 16 w Fi(.)14 b F4(X)2083 3081 y F1(\031i)2174
3069 y F4(:)-25 b(:K)2290 3036 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2280 3094 y F1(\031i)2446 3069 y F4(})2673
3005 y Gd(\()r(K)t(E)t F6(Q)t(V)o Gd(-)t(T)t(R)t F6(C)t(D)t
Gd(-)t(P)t F6(E)t(R)t(M)s Gd(\))450 3224 y F7(New)21
b(kinding)f(rules)p 3041 3142 410 4 v 3041 3249 4 108
v 1997 w Gb(\000)j F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)p
3447 3249 V 3041 3252 410 4 v 1359 3346 a Gb(\000)6 b(;)17
b F4(X:)-25 b(:K)1600 3358 y F1(1)1663 3346 y F5(`)23
b F4(T)1780 3358 y F1(2)1844 3346 y FF(:)-25 b(:)24 b
F4(K)1988 3358 y F1(2)p 1175 3389 1038 4 v 1175 3473
a Gb(\000)f F5(`)g Gb(\025)p F4(X:)-25 b(:K)1511 3485
y F1(1)1552 3473 y F4(.T)1639 3485 y F1(2)1703 3473 y
FF(:)g(:)1803 3473 y
 gsave currentpoint translate 0 222821 7800 div 3229981 7800 div 577638
-7800 div box .9 setgray fill grestore
 1803 3473 a 16 w Gb(\005)p F4(X:)g(:K)2029
3485 y F1(1)2069 3473 y F4(.K)2156 3485 y F1(2)3097 3409
y Gd(\()r(K)t(-)t(T)n(A)t F6(B)t(S)q Gd(\))960 3615 y
Gb(\000)23 b F5(`)g F4(T)1146 3627 y F1(1)1209 3615 y
FF(:)-25 b(:)1310 3615 y
 gsave currentpoint translate 0 222821 7800 div 3803981 7800 div 577638
-7800 div box .9 setgray fill grestore
 1310 3615 a 16 w Gb(\005)p F4(X:)g(:K)1535
3627 y F1(11)1612 3615 y F4(.K)1699 3627 y F1(12)1958
3615 y Gb(\000)23 b F5(`)f F4(T)2143 3627 y F1(2)2207
3615 y FF(:)-25 b(:)23 b F4(K)2351 3627 y F1(11)p 960
3658 1468 4 v 1224 3746 a Gb(\000)g F5(`)g F4(T)1410
3758 y F1(1)1494 3746 y F4(T)1537 3758 y F1(2)1601 3746
y FF(:)-25 b(:)1702 3746 y
 gsave currentpoint translate 0 288243 7800 div 2695857 7800 div 615693
-7800 div box .9 setgray fill grestore
 1702 3746 a 16 w F0(f)p F4(X)22
b F5(7)p FV(!)h F4(T)1960 3758 y F1(2)2001 3746 y F0(g)15
b F4(K)2087 3758 y F1(12)3092 3677 y Gd(\()r(K)t(-)t(T)n(A)t
F6(P)t(P)r Gd(\))993 3895 y
 gsave currentpoint translate 0 261013 7800 div 6821291 7800 div 577638
-7800 div box .9 setgray fill grestore
 993 3895 a 16 w Gb(\000)6
b(;)17 b F4(X)1144 3907 y F1(1)1184 3895 y F4(:)-25 b(:K)1290
3907 y F1(1)1344 3895 y F5(\001)14 b(\001)g(\001)g F4(X)1499
3907 y F1(i)p F2(-)p F1(1)1617 3895 y F4(:)-25 b(:K)1723
3907 y F1(i)p F2(-)p F1(1)1881 3895 y F5(`)1942 3865
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2121 3895 y F4(T)2165
3907 y F1(i)2219 3895 y FF(:)-25 b(:)24 b F4(K)2363 3907
y F1(i)p 938 3942 1513 4 v 938 4025 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 938 4025 a 16 w
Gb(\000)f F5(`)15 b F4({l)1175 4037 y F1(i)1207 4025
y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1207 4025 a 15 w Fi(.)f F4(X)1322 4037 y F1(i)1369
4025 y F4(=T)1456 4037 y F1(i)1498 3995 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1654 4025 y F4(})23 b FF(:)-25 b(:)24
b F4({l)1909 4037 y F1(i)1940 4025 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1940 4025 a 16 w
Fi(.)14 b F4(X)2056 4037 y F1(i)2103 4025 y F4(:)-25
b(:K)2208 4037 y F1(i)2250 3995 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2406 4025 y F4(})3077 3961 y Gd(\()r(K)t(-)t(T)t(R)t
F6(C)t(D)s Gd(\))1201 4168 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1201 4168 a 16 w Gb(\000)22
b F5(`)16 b F4(T)1395 4180 y F1(0)1458 4168 y FF(:)-25
b(:)24 b F4({l)1646 4180 y F1(i)1677 4168 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1677 4168
a 16 w Fi(.)14 b F4(X)1793 4180 y F1(i)1840 4168 y F4(:)-25
b(:K)1946 4180 y F1(i)1987 4138 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2144 4168 y F4(})p 788 4211 1813 4 v 788
4299 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 788 4299 a 15 w Gb(\000)23 b F5(`)16 b F4(T)981
4311 y F1(0)1022 4299 y F4(.l)1109 4311 y F1(j)1162 4299
y FF(:)-25 b(:)1262 4299 y
 gsave currentpoint translate 0 309621 7800 div 10562032 7800 div 615693
-7800 div box .9 setgray fill grestore
 1262 4299 a 16 w F0(f)p F4(X)1348
4311 y F1(1)1412 4299 y F5(7)p FV(!)23 b F4(T)1561 4311
y F1(0)1602 4299 y F4(.l)1689 4311 y F1(1)1730 4299 y
F0(g)14 b F5(\001)g(\001)g(\001)f F0(f)p F4(X)1951 4311
y F1(j)p F2(-)p F1(1)2091 4299 y F5(7)p FV(!)23 b F4(T)2240
4311 y F1(0)2281 4299 y F4(.l)2368 4311 y F1(j)p F2(-)p
F1(1)2485 4299 y F0(g)p F4(K)2555 4311 y F1(j)3010 4230
y Gd(\()r(K)t(-)t(T)t F6(Y)t Gd(P)t F6(R)t(O)t(J)s Gd(\))450
4439 y F7(New)e(subkinding)g(rules)1208 4559 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1208 4559
a 16 w Gb(\000)i F5(`)15 b F4({l)1445 4571 y F1(i)1477
4559 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1477 4559 a 15 w Fi(.)f F4(X)1592 4571 y F1(i)1639
4559 y F4(:)-25 b(:K)1745 4571 y F1(i)1786 4529 y FB(i)p
Fz(2)q FB(1)-10 b(:)g(:)g(n)p Fy(+)n FB(k)2024 4559 y
F4(})21 b Gd(ok)p 884 4602 1621 4 v 884 4685 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 884 4685
a 16 w Gb(\000)h F5(`)16 b F4({l)1121 4697 y F1(i)1152
4685 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1152 4685 a 16 w Fi(.)e F4(X)1268 4697 y F1(i)1315
4685 y F4(:)-25 b(:K)1421 4697 y F1(i)1462 4655 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)p Fy(+)o FB(k)1700 4685 y
F4(})23 b FF(<)-17 b(:)24 b F4({l)1963 4697 y F1(i)1994
4685 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1994 4685 a 16 w Fi(.)14 b F4(X)2110 4697 y F1(i)2157
4685 y F4(:)-25 b(:K)2263 4697 y F1(i)2304 4655 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2461 4685 y F4(})2789 4621
y Gd(\()r(S)t(-)t(T)t(R)t F6(C)t(D)t Gd(-)t(W)t F6(I)t(D)t(T)t(H)s
Gd(\))p eop
%%Page: 277 278
277 277 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(277)1249
673 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1249 673 a 15 w Gb(\000)23 b F5(`)16 b F4({l)1486
685 y F1(i)1517 673 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1517 673 a 16 w Fi(.)e F4(X)1633
685 y F1(i)1680 673 y F4(:)-25 b(:J)1786 685 y F1(i)1827
643 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1984 673 y F4(})20
b Gd(ok)1249 777 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1249 777 a 15 w Gb(\000)j F5(`)16
b F4({l)1486 789 y F1(i)1517 777 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1517 777 a 16 w Fi(.)e
F4(X)1633 789 y F1(i)1680 777 y F4(:)-25 b(:K)1786 789
y F1(i)1827 747 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1984
777 y F4(})20 b Gd(ok)1001 888 y
 gsave currentpoint translate 0 261013 7800 div 7403829 7800 div 579629
-7800 div box .9 setgray fill grestore
 1001 888 a 16 w Gb(\000)5
b(;)17 b F4(X)1151 900 y F1(1)1192 888 y F4(:)-25 b(:J)1297
900 y F1(1)1352 888 y F5(\001)14 b(\001)g(\001)f F4(X)1506
900 y F1(i)p F2(-)p F1(1)1625 888 y F4(:)-25 b(:J)1730
900 y F1(i)p F2(-)p F1(1)1872 888 y F5(`)1949 835 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2105 888 y F4(J)2149 900
y F1(i)2203 888 y FF(<)-17 b(:)24 b F4(K)2356 900 y F1(i)p
924 935 1540 4 v 924 1018 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 924 1018 a 16 w Gb(\000)f
F5(`)16 b F4({l)1162 1030 y F1(i)1193 1018 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1193 1018
a 16 w Fi(.)e F4(X)1309 1030 y F1(i)1356 1018 y F4(:)-25
b(:J)1461 1030 y F1(i)1503 988 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)1659 1018 y F4(})23 b FF(<)-17 b(:)24 b F4({l)1922
1030 y F1(i)1954 1018 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 525016
-7800 div box .9 setgray fill grestore
 1954 1018 a 15 w Fi(.)14 b F4(X)2069
1030 y F1(i)2116 1018 y F4(:)-25 b(:K)2222 1030 y F1(i)2264
988 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2420 1018 y
F4(})2736 954 y Gd(\()r(S)t(K)t(-)t(T)t(R)t F6(C)t(D)t
Gd(-)t(D)t F6(E)t(P)t(T)t(H)s Gd(\))p 409 1083 9 36 v
418 1083 3000 6 v 3418 1083 38 6 v 3455 1083 9 36 v 450
1249 a(Notes:)575 1415 y F5(\017)41 b Gd(W)-8 b(e)30
b(intr)o(oduced)g(primitive)g(labeled)g(r)o(ecor)o(d)f(kinds)i(because)
e(Car)o(delli's)g(encoding)658 1514 y(doesn't)16 b(work)h(in)g(the)g
(pr)o(esence)e(of)h(dependencies,)g(because)g(it)h(pr)o(esumes)e(the)i
(ability)658 1614 y(to)33 b(r)o(eor)o(der)e(labels)h(arbitrarily)g(to)h
(match)g(the)g(\002xed)g(global)g(or)o(der;)k(but)c(this)h(may)658
1713 y(br)o(eak)19 b(dependencies)h(between)h(\002elds.)575
1879 y F5(\017)41 b Gd(In)23 b(K)t(-)t(T)t(R)t F6(C)t(D)s
Gd(,)e(note)g(the)g(nondeterminism)h(in)f(the)g(choice)g(of)g
F4(K)p Gd('s.)450 2165 y Gj(32.5)119 b(Dependent)21 b(Record)i
(Expressions)g(and)f(Records)h(of)g(T)-11 b(ypes)450
2420 y Ge(Dependent)18 b(record)j(terms)e(\(??\))1821
b(???)p 409 2502 V 418 2473 3000 6 v 3418 2473 38 6 v
3455 2502 9 36 v 450 2592 a F7(New)21 b(syntactic)e(forms)592
2723 y F4(t)61 b Gd(::=)i(...)1695 b F7(terms)852 2822
y F4({l)939 2834 y F1(i)970 2822 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 970 2822 a 16 w Fi(.)14
b F4(x)1085 2834 y F1(i)1133 2822 y F4(=t)1220 2834 y
F1(i)1261 2792 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1418
2822 y F4(})2670 2822 y
 gsave currentpoint translate 0 305389 7800 div 2943844 7800 div 604894
-7800 div box .9 setgray fill grestore
 2670 2822 a 16 w F7(dependent)36
b(r)o(ecord)592 3021 y F4(v)61 b Gd(::=)i(...)1695 b
F7(values)852 3121 y F4({l)939 3133 y F1(i)970 3121 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore

970 3121 a 16 w Fi(.)14 b F4(x)1085 3133 y F1(i)1133
3121 y F4(=v)1220 3133 y F1(i)1261 3091 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1418 3121 y F4(})2670 3121 y
 gsave currentpoint translate 0 305389 7800 div 2943844 7800 div 604894
-7800 div box .9 setgray fill grestore
 2670
3121 a 16 w F7(dependent)31 b(r)o(ecord)15 b(value)450
3336 y(New)21 b(evaluation)f(rules)p 3096 3249 355 4
v 3096 3361 4 113 v 1960 w F4(t)j F5(\000)-15 b FV(!)23
b F4(t)3398 3306 y FX(0)p 3447 3361 V 3096 3364 355 4
v 1052 3458 a Gd(for)e(each)f Gb(i)83 b F0(f)p F4(x)1549
3470 y F1(1)1590 3458 y Gb(:::)p F4(x)1702 3470 y F1(i)p
F2(-)p F1(1)1821 3458 y F0(g)18 b F5(\\)h F7(FV)p FY(\()p
F4(v)2122 3470 y F1(i)2153 3458 y FY(\))k(=)g F5(;)p
1052 3501 1284 4 v 1204 3580 a F4({l)1291 3592 y F1(i)1323
3580 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1323 3580 a 1339 3581 a Fi(.)14 b F4(x)1438 3593
y F1(i)1485 3580 y F4(=v)1572 3592 y F1(i)1614 3551 y
FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1770 3580 y F4(}.l)1901
3592 y F1(j)1954 3580 y F5(\000)c FV(!)23 b F4(v)2154
3592 y F1(j)2946 3520 y Gd(\()r(E)t(-)t(R)t F6(C)t(D)t
Gd(B)t F6(E)t(T)o(A)r Gd(\))732 3999 y
 gsave currentpoint translate 0 1785776 7800 div 15194798 7800 div
2752510 -7800 div box .9 setgray fill grestore
 732 3999 a 1007
3744 a Gd(for)d(each)g Gb(j)j(<)g(i)p Gd(,)d F0(f)p F4(x)1598
3756 y F1(1)1639 3744 y Gb(:::)p F4(x)1752 3756 y F1(j)p
F2(-)p F1(1)1868 3744 y F0(g)e F5(\\)h F7(FV)p FY(\()p
F4(v)2169 3756 y F1(j)2199 3744 y FY(\))k(=)g F5(;)1210
3843 y Gd(for)d(some)h Gb(j)i(<)g(i)p Gd(,)d F4(x)1802
3855 y F1(j)1854 3843 y F5(2)k F7(FV)p FY(\()p F4(t)2115
3855 y F1(i)2146 3843 y FY(\))1058 3943 y F4(t)1109 3913
y FX(0)1133 3955 y F1(i)1187 3943 y FY(=)f F0(f)p F4(x)1343
3955 y F1(1)1407 3943 y F5(7)p FV(!)g F4(v)1556 3955
y F1(1)1597 3943 y F0(g)14 b F5(\001)g(\001)g(\001)f
F0(f)p F4(x)1818 3955 y F1(i)p F2(-)p F1(1)1960 3943
y F5(7)p FV(!)23 b F4(v)2110 3955 y F1(i)p F2(-)p F1(1)2228
3943 y F0(g)p F4(t)2298 3955 y F1(i)p 766 3980 1857 4
v 766 4053 a F4({l)853 4065 y F1(j)882 4053 y
 gsave currentpoint translate 0 309621 7800 div 1268296 7800 div 429443
-7800 div box .9 setgray fill grestore
 882 4053
a 16 w Fi(.)14 b F4(x)998 4065 y F1(j)1043 4053 y F4(=v)1130
4065 y F1(j)1170 4022 y FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(i)p
Fy(-)p FB(1)1388 4053 y F4(,l)1475 4065 y F1(i)1507 4053
y Fi(.)14 b F4(x)1606 4065 y F1(i)1638 4053 y F4(=t)1725
4065 y F1(i)1756 4053 y F4(,l)1843 4065 y F1(k)1888 4053
y
 gsave currentpoint translate 0 222821 7800 div 1384356 7800 div 429443
-7800 div box .9 setgray fill grestore
 1888 4053 a 15 w Fi(.)g F4(x)2003 4065 y F1(k)2063
4053 y F4(=t)2150 4065 y F1(k)2205 4022 y FB(k)p Fz(2)o
FB(i)-10 b Fy(+)g FB(1)g(:)g(:)g(n)2422 4053 y F4(})23
b F5(\000)-15 b FV(!)829 4162 y F4({l)916 4174 y F1(j)945
4162 y
 gsave currentpoint translate 0 309621 7800 div 1268296 7800 div 429443
-7800 div box .9 setgray fill grestore
 945 4162 a 16 w Fi(.)14 b F4(x)1061 4174 y F1(j)1106
4162 y F4(=v)1193 4174 y F1(j)1233 4131 y FB(j)p Fz(2)p
FB(1)-10 b(:)g(:)g(i)p Fy(-)p FB(1)1451 4162 y F4(,l)1538
4174 y F1(i)1570 4162 y Fi(.)14 b F4(x)1669 4174 y F1(i)1701
4162 y F4(=t)1795 4131 y FX(0)1819 4174 y F1(i)1850 4162
y F4(,l)1937 4174 y F1(k)1981 4162 y
 gsave currentpoint translate 0 222821 7800 div 1384356 7800 div 429443
-7800 div box .9 setgray fill grestore
 1981 4162 a 16 w
Fi(.)g F4(x)2097 4174 y F1(k)2157 4162 y F4(=t)2244 4174
y F1(k)2298 4131 y FB(k)p Fz(2)p FB(i)-10 b Fy(+)g FB(1)g(:)g(:)g(n)
2516 4162 y F4(})2760 3999 y Gd(\()r(E)t(-)t(R)t F6(E)t(C)t(O)t(R)t(D)t
Gd(S)t F6(U)t(B)t(S)t(T)r Gd(\))1005 4334 y(for)20 b(each)h
Gb(i)h(<)h(j)p Gd(,)d F0(f)p F4(x)1597 4346 y F1(1)1637
4334 y Gb(:::)p F4(x)1750 4346 y F1(i)p F2(-)p F1(1)1868
4334 y F0(g)e F5(\\)h F7(FV)p FY(\()p F4(v)2169 4346
y F1(i)2201 4334 y FY(\))k(=)g F5(;)1267 4434 y F0(f)p
F4(x)1338 4446 y F1(1)1378 4434 y Gb(:::)p F4(x)1491
4446 y F1(j)p F2(-)p F1(1)1608 4434 y F0(g)18 b F5(\\)g
F7(FV)q FY(\()p F4(t)1908 4446 y F1(j)1938 4434 y FY(\))23
b(=)g F5(;)1530 4533 y F4(t)1574 4545 y F1(j)1626 4533
y F5(\000)-14 b FV(!)23 b F4(t)1834 4503 y FX(0)1827
4557 y F1(j)p 776 4581 1836 4 v 776 4661 a F4({l)864
4673 y F1(i)895 4661 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 895 4661 a 16 w Fi(.)14 b F4(x)1010
4673 y F1(i)1058 4661 y F4(=v)1145 4673 y F1(i)1186 4631
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(j)g Fy(-)g FB(1)1384
4661 y F4(,l)1471 4673 y F1(j)1501 4661 y Fi(.)14 b F4(x)1601
4673 y F1(j)1630 4661 y F4(=t)1717 4673 y F1(j)1747 4661
y F4(,l)1834 4673 y F1(k)1878 4661 y
 gsave currentpoint translate 0 222821 7800 div 1384356 7800 div 429443
-7800 div box .9 setgray fill grestore
 1878 4661 a 16 w
Fi(.)g F4(x)1994 4673 y F1(k)2054 4661 y F4(=t)2141 4673
y F1(k)2195 4631 y FB(k)p Fz(2)p FB(j)-10 b Fy(+)f FB(1)h(:)g(:)g(n)
2411 4661 y F4(})23 b F5(\000)-14 b FV(!)854 4760 y F4({l)941
4772 y F1(i)973 4760 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 973 4760 a 15 w Fi(.)15 b F4(x)1088
4772 y F1(i)1135 4760 y F4(=v)1222 4772 y F1(i)1264 4730
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(j)g Fy(-)g FB(1)1462
4760 y F4(,l)1549 4772 y F1(j)1579 4760 y Fi(.)14 b F4(x)1678
4772 y F1(j)1708 4760 y F4(=t)1803 4730 y FX(0)1795 4784
y F1(j)1826 4760 y F4(,l)1913 4772 y F1(k)1957 4760 y
 gsave currentpoint translate 0 222821 7800 div 1384356 7800 div 429443
-7800 div box .9 setgray fill grestore

1957 4760 a 16 w Fi(.)g F4(x)2073 4772 y F1(k)2133 4760
y F4(=t)2220 4772 y F1(k)2274 4730 y FB(k)p Fz(2)p FB(j)-10
b Fy(+)f FB(1)h(:)g(:)g(n)2490 4760 y F4(})2992 4600
y Gd(\()r(E)t(-)t(R)t F6(E)t(C)t(O)t(R)t(D)s Gd(\))450
4920 y F7(New)21 b(typing)e(rules)p 3067 4837 383 4 v
3067 4945 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g
F4(T)p 3447 4945 V 3067 4948 383 4 v eop
%%Page: 278 279
278 278 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(278)842
670 y(for)21 b(each)f Gb(i)83 b(\000)1319 670 y
 gsave currentpoint translate 0 261013 7800 div 7009688 7800 div 525016
-7800 div box .9 setgray fill grestore
 1319
670 a 10 w Gb(;)24 b F4(x)1419 682 y F1(1)1460 670 y
F4(:T)1547 682 y F1(1)1587 670 y Gb(;)37 b(:)14 b(:)g(:)g(;)37
b F4(x)1861 682 y F1(i)p F2(-)p F1(1)1980 670 y F4(:T)2067
682 y F1(i)p F2(-)p F1(1)2225 670 y F5(`)23 b F4(t)2342
682 y F1(i)2397 670 y FF(:)g F4(T)2514 682 y F1(i)p 842
716 1704 4 v 965 796 a Gb(\000)g F5(`)f F4({l)1194 808
y F1(i)1225 796 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1225 796 a 16 w Fi(.)14 b F4(x)1340
808 y F1(i)1387 796 y F4(=t)1475 808 y F1(i)1516 766
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1673 796 y F4(})22
b FF(:)i F4({l)1901 808 y F1(i)1932 796 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1932 796 a
16 w Fi(.)14 b F4(x)2047 808 y F1(i)2095 796 y F4(:T)2182
808 y F1(i)2223 766 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2380
796 y F4(})3146 735 y Gd(\()r(T)o(-)t(R)t F6(C)t(D)s
Gd(\))450 926 y F7(New)21 b(abbr)o(eviations)668 1054
y F4({...t)886 1066 y F1(i)918 1054 y F4(...})1198 1007
y FK(def)1208 1054 y FY(=)116 b F4({...i)1605 1054 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore

1605 1054 a 16 w Fi(.)14 b F4(x)1720 1066 y F1(i)1767
1054 y F4(=t)1854 1066 y F1(i)1886 1054 y F4(...})2060
1054 y
 gsave currentpoint translate 0 222821 7800 div 5205800 7800 div 601942
-7800 div box .9 setgray fill grestore
 2060 1054 a 37 w Gd(wher)o(e)20 b F4(x)2389 1066
y F1(i)2442 1054 y Gd(is)h(fr)o(esh)p 409 1170 9 36 v
418 1170 3000 6 v 3418 1170 38 6 v 3455 1170 9 36 v 450
1456 a Gj(32.6)119 b(Higher)n(-Kind)28 b(Singletons)450
1712 y Ge(Higher)o(-order)19 b(singletons)1942 b(????)p
409 1794 V 418 1764 3000 6 v 3418 1764 38 6 v 3455 1794
9 36 v 450 1883 a F7(New)21 b(syntactic)e(forms)592 2014
y F4(K)61 b Gd(::=)i(...)1695 b F7(kinds)852 2114 y
 gsave currentpoint translate 0 215539 7800 div 2804916 7800 div 579629
-7800 div box .9 setgray fill grestore
 852
2114 a 15 w F4(EQ\(T:)-25 b(:K\))1476 b F7(higher)20
b(singleton)h(kind)450 2328 y(New)g(kind)f(formation)g(rules)1367
2528 y
 gsave currentpoint translate 0 881095 7800 div 5164533 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1367 2528 a 1513 2472 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 2472 a 16 w Gb(\000)j
F5(`)16 b F4(T)22 b FF(:)-25 b(:)24 b F4(K)p 1401 2509
587 4 v 1401 2586 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1401 2586 a 16 w Gb(\000)f F5(`)15
b F4(EQ\(T:)-25 b(:K\))18 b Gd(ok)3058 2528 y(\()r(K)t(F)t(-)t(H)t(O)t
(S)r(\))450 2740 y F7(New)j(kind)f(equivalence)i(rules)1096
2940 y
 gsave currentpoint translate 0 881095 7800 div 9441653 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1096 2940 a 1130 2884 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1130 2884 a 16 w Gb(\000)h
F5(`)15 b F4(T)23 b FV($)g F4(T)1504 2854 y FX(0)1550
2884 y FF(:)-25 b(:)24 b F4(K)1861 2884 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1861 2884 a
15 w Gb(\000)f F5(`)16 b F4(K)22 b FV($)i F4(K)2235 2854
y FX(0)p 1130 2921 1129 4 v 1200 2998 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1200 2998 a 15
w Gb(\000)f F5(`)16 b F4(EQ\(T:)-25 b(:K\))20 b FV($)j
F4(EQ\(T)1985 2968 y FX(0)2008 2998 y F4(:)-25 b(:K)2121
2968 y FX(0)2145 2998 y F4(\))2950 2940 y Gd(\()r(K)t(E)t
F6(Q)t(V)o Gd(-)t(H)t(O)t(S)r(\))1249 3244 y
 gsave currentpoint translate 0 881095 7800 div 7018240 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1249 3244
a 1513 3189 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 3189 a 16 w Gb(\000)23 b F5(`)16 b
F4(T)22 b FF(:)-25 b(:)24 b F4(*)p 1284 3225 822 4 v
1284 3302 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1284 3302 a 15 w Gb(\000)f F5(`)16 b F4(EQ\(T:)-25
b(:*\))19 b FV($)24 b F4(Eq\(T\))2726 3244 y Gd(\()r(K)t(E)t
F6(Q)t(V)o Gd(-)t(H)t(O)t(S)t(-)t(T)t F6(Y)t(P)t(E)r
Gd(\))1162 3549 y
 gsave currentpoint translate 0 881095 7800 div 8394484 7800 div 1208775
-7800 div box .9 setgray fill grestore
 1162 3549 a 1426 3493 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1426 3493 a
16 w Gb(\000)f F5(`)15 b F4(T)23 b FF(:)-25 b(:)24 b
F4(Eq\(U\))p 1196 3530 996 4 v 1196 3606 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1196 3606
a 16 w Gb(\000)f F5(`)15 b F4(EQ\(T:)-25 b(:Eq\(U\)\))19
b FV($)k F4(Eq\(T\))2482 3549 y Gd(\()r(K)t(E)t F6(Q)t(V)o
Gd(-)t(H)t(O)t(S)t(-)t(S)t F6(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)q
Gd(\))780 3849 y
 gsave currentpoint translate 0 851966 7800 div 14436831 7800 div 1179646
-7800 div box .9 setgray fill grestore
 780 3849 a 1351 3793 a Gb(\000)g F5(`)f
F4(T)h FF(:)-25 b(:)24 b Gb(\005)p F4(X:)-25 b(:K)1869
3805 y F1(1)1910 3793 y F4(.K)1997 3805 y F1(2)p 814
3830 1761 4 v 814 3903 a Gb(\000)22 b F5(`)h F4(EQ\(T:)-25
b(:)p Gb(\005)p F4(X:)g(:K)1401 3915 y F1(1)1442 3903
y F4(.K)1529 3915 y F1(2)1570 3903 y F4(\))22 b FV($)h
Gb(\005)p F4(X:)-25 b(:K)1952 3915 y F1(1)1992 3903 y
F4(.EQ\(T)42 b(X)h(:)-25 b(:)43 b(K)2490 3915 y F1(2)2531
3903 y F4(\))2704 3849 y Gd(\()r(K)t(E)t F6(Q)t(V)o Gd(-)t(H)t(O)t(S)t
(-)t(T)n(A)t F6(R)t(R)r Gd(\))584 4150 y
 gsave currentpoint translate 0 881095 7800 div 17524983 7800 div 1208775
-7800 div box .9 setgray fill grestore
 584 4150 a 1237
4094 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1237 4094 a 16 w Gb(\000)22 b F5(`)16 b F4(T)23
b FF(:)-25 b(:)23 b F4({l)1641 4106 y F1(i)1673 4094
y Fi(.)14 b F4(X)1772 4106 y F1(i)1804 4094 y F4(:)-25
b(:K)1910 4106 y F1(i)1951 4064 y FB(i)p Fz(2)p FB(1)-10
b(:)g(:)g(n)2108 4094 y F4(})p 618 4131 2153 4 v 618
4207 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 618 4207 a 16 w Gb(\000)23 b F5(`)15 b F4(EQ\(T:)-25
b(:{l)1092 4219 y F1(i)1123 4207 y Fi(.)14 b F4(X)1223
4219 y F1(i)1254 4207 y F4(:)-25 b(:K)1360 4219 y F1(i)1402
4177 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1558 4207 y
F4(}\))22 b FV($)h F4({l)1862 4219 y F1(i)1893 4207 y
Fi(.)14 b F4(X)1993 4219 y F1(i)2024 4207 y F4(:)-25
b(:EQ\(T.l)2348 4219 y F1(i)2379 4207 y F4(:)g(:K)2485
4219 y F1(i)2516 4207 y F4(\))2570 4177 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)2726 4207 y F4(})2697 4330 y Gd(\()r(K)t(E)t
F6(Q)t(V)o Gd(-)t(H)t(O)t(S)t(-)t(T)t(R)t F6(C)t(D)s
Gd(\))450 4473 y F7(New)21 b(kinding)f(rules)p 3041 4391
410 4 v 3041 4498 4 108 v 1997 w Gb(\000)j F5(`)g F4(T)f
FF(:)-25 b(:)24 b F4(K)p 3447 4498 V 3041 4501 410 4
v 1286 4774 a
 gsave currentpoint translate 0 851966 7800 div 6435407 7800 div 1966078
-7800 div box .9 setgray fill grestore
 1286 4774 a 1351 4619 a Gb(\000)f F5(`)f
F4(T)h FF(:)-25 b(:)24 b Gb(\005)p F4(X:)-25 b(:K)1869
4631 y F1(1)1910 4619 y F4(.K)1997 4631 y F1(2)1320 4719
y Gb(\000)6 b(;)17 b F4(X:)-25 b(:K)1561 4731 y F1(1)1624
4719 y F5(`)23 b F4(T)43 b(X)23 b FF(:)-25 b(:)24 b F4(K)2004
4689 y FX(0)2027 4731 y F1(2)p 1320 4755 748 4 v 1335
4828 a Gb(\000)f F5(`)g F4(T)g FF(:)-25 b(:)23 b Gb(\005)p
F4(X:)-25 b(:K)1854 4840 y F1(1)1894 4828 y F4(.K)1989
4798 y FX(0)2012 4840 y F1(2)2874 4774 y Gd(\()r(K)t(-)t(T)n(A)t
F6(R)t(R)t Gd(-)t(S)t F6(E)t(L)t(F)q Gd(\))p eop
%%Page: 279 280
279 279 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(279)916
853 y
 gsave currentpoint translate 0 881095 7800 div 12281160 7800 div 1995207
-7800 div box .9 setgray fill grestore
 916 853 a 1237 698 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1237 698 a 16 w Gb(\000)22
b F5(`)16 b F4(T)23 b FF(:)-25 b(:)23 b F4({l)1641 710
y F1(i)1673 698 y Fi(.)14 b F4(X)1772 710 y F1(i)1804
698 y F4(:)-25 b(:K)1910 710 y F1(i)1951 667 y FB(i)p
Fz(2)p FB(1)-10 b(:)g(:)g(n)2108 698 y F4(})950 797 y
Gb(\000)6 b(;)17 b F4(X)1085 809 y F1(1)1125 797 y F4(:)-25
b(:K)1231 809 y F1(1)1285 797 y F5(\001)14 b(\001)g(\001)g
F4(X)1440 809 y F1(i)p F2(-)p F1(1)1558 797 y F4(:)-25
b(:K)1664 809 y F1(i)p F2(-)p F1(1)1806 797 y F5(`)1867
767 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2046 797 y F4(T.l)2177
809 y F1(i)2231 797 y FF(:)-25 b(:)24 b F4(K)2383 767
y FX(0)2407 809 y F1(i)p 950 834 1488 4 v 1237 910 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore

1237 910 a 16 w Gb(\000)e F5(`)16 b F4(T)23 b FF(:)-25
b(:)23 b F4({l)1641 922 y F1(i)1673 910 y Fi(.)14 b F4(X)1772
922 y F1(i)1804 910 y F4(:)-25 b(:K)1917 880 y FX(0)1910
934 y F1(i)1951 880 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2108
910 y F4(})2867 853 y Gd(\()r(K)t(-)t(T)t(R)t F6(C)t(D)t
Gd(-)t(S)t F6(E)t(L)t(F)r Gd(\))p 409 1002 9 36 v 418
1002 3000 6 v 3418 1002 38 6 v 3455 1002 9 36 v 450 1284
a Gj(32.7)119 b(First-class)29 b(Substructures)g(and)g(Functors)450
1521 y Ge(Dependent)18 b(functions)2083 b(???)p 409 1603
V 418 1574 3000 6 v 3418 1574 38 6 v 3455 1603 9 36 v
450 1693 a F7(New)21 b(syntactic)e(forms)592 1824 y F4(T)61
b Gd(::=)i(...)1695 b F7(types)852 1923 y
 gsave currentpoint translate 0 124518 7800 div 2442992 7800 div 577638
-7800 div box .9 setgray fill grestore
 852 1923 a
15 w Gb(\005)p F4(x:T.T)1523 b F7(type)15 b(of)2904 1923
y
 gsave currentpoint translate 0 305389 7800 div 2943844 7800 div 604894
-7800 div box .9 setgray fill grestore
 2904 1923 a 16 w F7(dependent)31 b(functions)450 2149
y(New)21 b(type)e(equivalence)j(rules)p 3027 2050 423
4 v 3027 2189 4 140 v 3055 2149 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 3055 2149 a 16 w Gb(\000)h
F5(`)15 b F4(S)23 b FV($)g F4(T)p 3447 2189 4 140 v 3027
2192 423 4 v 1513 2290 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513 2290 a 16 w Gb(\000)g F5(`)16
b F4(T)22 b FF(:)-25 b(:)24 b F4(K)p 1423 2333 543 4
v 1423 2416 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2416 a 16 w Gb(\000)e F5(`)16 b F4(T)23
b FV($)g F4(T)1789 2416 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2416 a 16 w FF(:)-25 b(:)24
b F4(K)3108 2352 y Gd(\()r(Q)t(-)t(R)t F6(E)t(FL)q Gd(\))1423
2559 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2559 a 16 w Gb(\000)e F5(`)16 b F4(T)23 b
FV($)g F4(S)1789 2559 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2559 a 16 w FF(:)-25 b(:)24
b F4(K)p 1423 2602 543 4 v 1423 2686 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2686 a 16
w Gb(\000)e F5(`)16 b F4(S)23 b FV($)g F4(T)1789 2686
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2686 a 16 w FF(:)-25 b(:)24 b F4(K)3064 2621 y
Gd(\()r(Q)t(-)t(S)t F6(Y)t(M)t(M)q Gd(\))1069 2829 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore

1069 2829 a 15 w Gb(\000)f F5(`)16 b F4(S)22 b FV($)i
F4(U)1435 2829 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1435 2829 a 16 w FF(:)-25 b(:)24 b F4(K)1777
2829 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 2829 a 16 w Gb(\000)f F5(`)15 b F4(U)23 b
FV($)g F4(T)2143 2829 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 2143 2829 a 16 w FF(:)-25 b(:)24
b F4(K)p 1069 2872 1251 4 v 1423 2955 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2955 a 16
w Gb(\000)e F5(`)16 b F4(S)23 b FV($)g F4(T)1789 2955
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2955 a 16 w FF(:)-25 b(:)24 b F4(K)3036 2891 y
Gd(\()r(Q)t(-)t(T)t F6(R)t(A)t(N)t(S)r Gd(\))879 3098
y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 879 3098 a 16 w Gb(\000)f F5(`)15 b F4(S)1073 3110
y F1(1)1136 3098 y FV($)23 b F4(T)1286 3110 y F1(1)1326
3098 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 1326 3098 a 16 w FF(:)-25 b(:)24 b F4(*)1668 3098
y
 gsave currentpoint translate 0 222821 7800 div 2901167 7800 div 579629
-7800 div box .9 setgray fill grestore
 1668 3098 a 16 w Gb(\000)6 b(;)17 b F4(x:S)1906 3110
y F1(1)1969 3098 y F5(`)f F4(S)2079 3110 y F1(2)2143
3098 y FV($)23 b F4(T)2293 3110 y F1(2)2333 3098 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2333
3098 a 16 w FF(:)-25 b(:)24 b F4(*)p 879 3141 1631 4
v 1076 3224 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1076 3224 a 16 w Gb(\000)f F5(`)1226 3224
y
 gsave currentpoint translate 0 222821 7800 div 3082528 7800 div 577638
-7800 div box .9 setgray fill grestore
 1226 3224 a 16 w Gb(\005)p F4(x:S)1433 3236 y F1(1)1473
3224 y F4(.S)1560 3236 y F1(2)1640 3224 y FV($)1746 3224
y
 gsave currentpoint translate 0 222821 7800 div 3082528 7800 div 577638
-7800 div box .9 setgray fill grestore
 1746 3224 a 16 w Gb(\005)p F4(x:T)1952 3236 y F1(1)1993
3224 y F4(.T)2080 3236 y F1(2)2136 3224 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2136 3224 a
16 w FF(:)-25 b(:)24 b F4(*)3001 3160 y Gd(\()r(Q)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))450 3380 y F7(New)d(kinding)f(rules)p
3041 3297 410 4 v 3041 3405 4 108 v 1997 w Gb(\000)j
F5(`)g F4(T)f FF(:)-25 b(:)24 b F4(K)p 3447 3405 V 3041
3408 410 4 v 1093 3501 a Gb(\000)f F5(`)g F4(T)1279 3513
y F1(1)1342 3501 y FF(:)-25 b(:)24 b F4(*)166 b Gb(\000)5
b(;)1743 3501 y
 gsave currentpoint translate 0 222821 7800 div 1600987 7800 div 525016
-7800 div box .9 setgray fill grestore
 1743 3501 a 16 w F4(x:T)1890 3513 y F1(1)1969
3501 y F5(`)23 b F4(T)2087 3513 y F1(2)2150 3501 y FF(:)-25
b(:)24 b F4(*)p 1093 3545 1202 4 v 1344 3628 a Gb(\000)f
F5(`)1486 3628 y
 gsave currentpoint translate 0 222821 7800 div 3082528 7800 div 577638
-7800 div box .9 setgray fill grestore
 1486 3628 a 16 w Gb(\005)p F4(x:T)1692
3640 y F1(1)1733 3628 y F4(.T)1820 3640 y F1(2)1899 3628
y FF(:)-25 b(:)24 b F4(*)3006 3564 y Gd(\()r(K)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(\))450 3783 y F7(New)d(typing)e(rules)p
3067 3700 383 4 v 3067 3808 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 3808 V 3067 3811 383
4 v 1102 3905 a Gb(\000)g F5(`)g F4(T)1287 3917 y F1(1)1351
3905 y FF(:)-25 b(:)24 b F4(*)165 b Gb(\000)6 b(;)17
b F4(x:T)1883 3917 y F1(1)1947 3905 y F5(`)22 b F4(t)2064
3917 y F1(2)2127 3905 y FF(:)i F4(T)2245 3917 y F1(2)p
1102 3948 1184 4 v 1207 4031 a Gb(\000)f F5(`)g Gb(\025)p
F4(x:T)1525 4043 y F1(1)1565 4031 y F4(.t)1652 4043 y
F1(2)1716 4031 y FF(:)1790 4031 y
 gsave currentpoint translate 0 222821 7800 div 3082528 7800 div 577638
-7800 div box .9 setgray fill grestore
 1790 4031 a 16 w Gb(\005)p
F4(x:T)1997 4043 y F1(1)2037 4031 y F4(.T)2124 4043 y
F1(2)3160 3967 y Gd(\()r(T)o(-)t(A)t F6(B)t(S)q Gd(\))679
4179 y Gb(\000)g F5(`)g F4(t)864 4191 y F1(1)928 4179
y FF(:)1002 4179 y
 gsave currentpoint translate 0 222821 7800 div 3656528 7800 div 577638
-7800 div box .9 setgray fill grestore
 1002 4179 a 1018 4178 a Gb(\005)p
F4(x:T)1209 4190 y F1(11)1286 4178 y F4(.T)1373 4190
y F1(12)1632 4179 y
 gsave currentpoint translate 0 288243 7800 div 3691864 7800 div 615693
-7800 div box .9 setgray fill grestore
 1632 4179 a 1647 4178 a F4(x)32 b
Gb(=)-51 b F5(2)23 b F7(FV)p FY(\()p F4(T)1974 4190 y
F1(12)2051 4178 y FY(\))2265 4179 y Gb(\000)g F5(`)g
F4(t)2451 4191 y F1(2)2514 4179 y FF(:)g F4(T)2632 4191
y F1(11)p 679 4228 2030 4 v 1408 4308 a Gb(\000)g F5(`)g
F4(t)1594 4320 y F1(1)1678 4308 y F4(t)1721 4320 y F1(2)1785
4308 y FF(:)g F4(T)1903 4320 y F1(12)3155 4247 y Gd(\()r(T)o(-)t(A)t
F6(P)t(P)r Gd(\))1177 4451 y Gb(\000)g F5(`)f F4(t)h
FF(:)g F4(S)1669 4451 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1669 4451 a 16 w Gb(\000)g F5(`)15
b F4(S)23 b FV($)g F4(T)2035 4451 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2035 4451 a 16 w
FF(:)-25 b(:)24 b F4(*)p 1177 4494 1035 4 v 1531 4573
a Gb(\000)f F5(`)g F4(t)f FF(:)i F4(T)3201 4513 y Gd(\()r(T)o(-)t(E)t
F6(Q)r Gd(\))450 4704 y F7(New)d(abbr)o(eviations)883
4837 y
 gsave currentpoint translate 0 530384 7800 div 12810603 7800 div 858065
-7800 div box .9 setgray fill grestore
 883 4837 a 907 4850 a F4(T)950 4862 y F1(1)991
4850 y FV(!)p F4(T)1117 4862 y F1(2)1264 4803 y FK(def)1274
4850 y FY(=)116 b Gb(\005)p F4(x:T)1643 4862 y F1(1)1684
4850 y F4(.T)1771 4862 y F1(2)1832 4850 y Gd(wher)o(e)21
b F4(x)31 b Gb(=)-51 b F5(2)24 b F7(FV)p FY(\()p F4(T)2409
4862 y F1(2)2449 4850 y FY(\))p eop
%%Page: 280 281
280 280 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(280)p 409
755 9 36 v 418 755 3000 6 v 3418 755 38 6 v 3455 755
9 36 v 450 934 a Ge(Dependent)18 b(records)2131 b(????)p
409 1016 V 418 986 3000 6 v 3418 986 38 6 v 3455 1016
9 36 v 450 1105 a F7(New)21 b(syntactic)e(forms)592 1236
y F4(T)61 b Gd(::=)i(...)1695 b F7(types)852 1336 y F4({l)939
1348 y F1(i)970 1336 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 970 1336 a 16 w Fi(.)14 b F4(x)1085
1348 y F1(i)1133 1336 y F4(:T)1220 1348 y F1(i)1261 1305
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1418 1336 y F4(})1208
b F7(type)15 b(of)2904 1336 y
 gsave currentpoint translate 0 305389 7800 div 2943844 7800 div 604894
-7800 div box .9 setgray fill grestore
 2904 1336 a 16 w F7(dependent)31
b(r)o(ecords)450 1561 y(New)21 b(type)e(equivalence)j(rules)p
3027 1462 423 4 v 3027 1601 4 140 v 3055 1561 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 3055
1561 a 16 w Gb(\000)h F5(`)15 b F4(S)23 b FV($)g F4(T)p
3447 1601 4 140 v 3027 1604 423 4 v 1513 1702 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1513
1702 a 16 w Gb(\000)g F5(`)16 b F4(T)22 b FF(:)-25 b(:)24
b F4(K)p 1423 1745 543 4 v 1423 1829 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 1829 a 16
w Gb(\000)e F5(`)16 b F4(T)23 b FV($)g F4(T)1789 1829
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 1829 a 16 w FF(:)-25 b(:)24 b F4(K)3108 1764 y
Gd(\()r(Q)t(-)t(R)t F6(E)t(FL)q Gd(\))1423 1971 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423
1971 a 16 w Gb(\000)e F5(`)16 b F4(T)23 b FV($)g F4(S)1789
1971 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 1971 a 16 w FF(:)-25 b(:)24 b F4(K)p 1423
2015 543 4 v 1423 2098 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2098 a 16 w Gb(\000)e F5(`)16
b F4(S)23 b FV($)g F4(T)1789 2098 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2098 a 16 w
FF(:)-25 b(:)24 b F4(K)3064 2034 y Gd(\()r(Q)t(-)t(S)t
F6(Y)t(M)t(M)q Gd(\))1069 2241 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1069 2241 a 15 w Gb(\000)f
F5(`)16 b F4(S)22 b FV($)i F4(U)1435 2241 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1435 2241
a 16 w FF(:)-25 b(:)24 b F4(K)1777 2241 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 2241 a
16 w Gb(\000)f F5(`)15 b F4(U)23 b FV($)g F4(T)2143 2241
y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 2143 2241 a 16 w FF(:)-25 b(:)24 b F4(K)p 1069 2284
1251 4 v 1423 2367 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1423 2367 a 16 w Gb(\000)e F5(`)16
b F4(S)23 b FV($)g F4(T)1789 2367 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 525016
-7800 div box .9 setgray fill grestore
 1789 2367 a 16 w
FF(:)-25 b(:)24 b F4(K)3036 2303 y Gd(\()r(Q)t(-)t(T)t
F6(R)t(A)t(N)t(S)r Gd(\))988 2510 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 988 2510 a 15 w Gb(\000)f
F5(`)16 b F4(S)1181 2522 y F1(1)1245 2510 y FV($)23 b
F4(T)1395 2522 y F1(1)1435 2510 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 1435 2510 a 16 w FF(:)-25
b(:)24 b F4(*)1777 2510 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1777 2510 a 16 w Gb(\000)f
F5(`)15 b F4(S)1971 2522 y F1(2)2034 2510 y FV($)23 b
F4(T)2184 2522 y F1(2)2225 2510 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2225 2510 a 15 w FF(:)-25
b(:)24 b F4(*)p 988 2553 1413 4 v 1215 2637 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1215 2637
a 16 w Gb(\000)f F5(`)15 b F4(S)1409 2649 y F1(1)1449
2637 y FV(!)q F4(S)1576 2649 y F1(2)1640 2637 y FV($)23
b F4(T)1789 2649 y F1(1)1830 2637 y FV(!)p F4(T)1956
2649 y F1(2)1997 2637 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 1997 2637 a 16 w FF(:)-25 b(:)23
b F4(*)3001 2572 y Gd(\()r(Q)t(-)t(A)t F6(R)t(R)t(O)t(W)s
Gd(\))1235 2776 y Gb(\000)f F5(`)h F4({l)1463 2788 y
F1(i)1495 2776 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1495 2776 a 16 w Fi(.)14 b F4(x)1610
2788 y F1(i)1657 2776 y F4(:T)1744 2788 y F1(i)1786 2746
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1942 2776 y F4(})23
b FF(:)-25 b(:)24 b F4(*)1207 2883 y
 gsave currentpoint translate 0 321075 7800 div 7692612 7800 div 611160
-7800 div box .9 setgray fill grestore
 1207 2883 a 16 w
Gb(\000)e F5(`)h F4({l)1451 2895 y F1(\031i)1526 2883
y Fi(.)14 b F4(x)1626 2895 y F1(\031i)1701 2883 y F4(:T)1798
2850 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1788 2908 y
F1(\031i)1955 2883 y F4(})22 b FF(:)-25 b(:)24 b F4(*)1202
2993 y Gb(\031)d Gd(is)g(a)f(permutation)h(of)g F0(f)p
Gb(1::n)p F0(g)p 829 3037 1731 4 v 829 3120 a
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 829 3120
a 16 w Gb(\000)h F5(`)16 b F4({l)1066 3132 y F1(i)1097
3120 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1097 3120 a 16 w Fi(.)e F4(x)1213 3132 y F1(i)1260
3120 y F4(:T)1347 3132 y F1(i)1389 3090 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1545 3120 y F4(})23 b FV($)g F4({l)1805
3132 y F1(\031i)1880 3120 y
 gsave currentpoint translate 0 222821 7800 div 1626556 7800 div 429443
-7800 div box .9 setgray fill grestore
 1880 3120 a 16 w Fi(.)14
b F4(x)1995 3132 y F1(\031i)2086 3120 y F4(:T)2183 3087
y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)2173 3145 y F1(\031i)2340
3120 y F4(})2383 3120 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2383 3120 a 16 w FF(:)-25 b(:)24
b F4(*)2881 3056 y Gd(\()r(Q)t(-)t(R)t F6(C)t(D)t Gd(-)t(P)t
F6(E)t(R)t(M)s Gd(\))450 3275 y F7(New)d(typing)e(rules)p
3067 3193 383 4 v 3067 3300 4 108 v 2061 w Gb(\000)j
F5(`)h F4(t)g FF(:)g F4(T)p 3447 3300 V 3067 3303 383
4 v 1177 3401 a Gb(\000)g F5(`)f F4(t)h FF(:)g F4(S)1669
3401 y
 gsave currentpoint translate 0 124518 7800 div 1185220 7800 div 579629
-7800 div box .9 setgray fill grestore
 1669 3401 a 16 w Gb(\000)g F5(`)15 b F4(S)23 b
FV($)g F4(T)2035 3401 y
 gsave currentpoint translate 0 124518 7800 div 1387899 7800 div 465851
-7800 div box .9 setgray fill grestore
 2035 3401 a 16 w FF(:)-25 b(:)24
b F4(*)p 1177 3444 1035 4 v 1531 3523 a Gb(\000)f F5(`)g
F4(t)f FF(:)i F4(T)3201 3463 y Gd(\()r(T)o(-)t(E)t F6(Q)r
Gd(\))895 3663 y(for)d(each)f Gb(i)83 b(\000)1372 3663
y
 gsave currentpoint translate 0 261013 7800 div 6172739 7800 div 525016
-7800 div box .9 setgray fill grestore
 1372 3663 a 10 w Gb(;)24 b F4(x)1472 3675 y F1(1)1513
3663 y F4(:T)1600 3675 y F1(1)1654 3663 y F5(\001)14
b(\001)g(\001)g F4(x)1808 3675 y F1(i)p F2(-)p F1(1)1927
3663 y F4(:T)2014 3675 y F1(i)p F2(-)p F1(1)2172 3663
y F5(`)23 b F4(t)2289 3675 y F1(i)2344 3663 y FF(:)g
F4(T)2461 3675 y F1(i)p 895 3709 1598 4 v 1046 3789 a
Gb(\000)g F5(`)g F4({l)1275 3801 y F1(i)1306 3789 y F4(=t)1393
3801 y F1(i)1435 3759 y FB(i)p Fz(2)p FB(1)-10 b(:)g(:)g(n)1591
3789 y F4(})23 b FF(:)g F4({l)1819 3801 y F1(i)1851 3789
y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1851 3789 a 16 w Fi(.)14 b F4(x)1966 3801 y F1(i)2013
3789 y F4(:T)2100 3801 y F1(i)2142 3759 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)2298 3789 y F4(})3146 3728 y Gd(\()r(T)o(-)t(R)t
F6(C)t(D)s Gd(\))676 3936 y Gb(\000)23 b F5(`)g F4(t)861
3948 y F1(0)925 3936 y FF(:)g F4({l)1086 3948 y F1(i)1117
3936 y
 gsave currentpoint translate 0 222821 7800 div 1282856 7800 div 429443
-7800 div box .9 setgray fill grestore
 1117 3936 a 16 w Fi(.)14 b F4(x)1233 3948 y F1(i)1280
3936 y F4(:T)1367 3948 y F1(i)1409 3906 y FB(i)p Fz(2)p
FB(1)-10 b(:)g(:)g(n)1565 3936 y F4(})1775 3936 y
 gsave currentpoint translate 0 309621 7800 div 7399321 7800 div 616038
-7800 div box .9 setgray fill grestore
 1775
3936 a 16 w F0(f)p F4(x)1861 3948 y F1(1)1915 3936 y
Gb(:)14 b(:)g(:)g F4(x)2069 3948 y F1(j)p F2(-)p F1(1)2186
3936 y F0(g)k F5(\\)h F7(FV)p FY(\()p Gb(T)2490 3948
y F1(j)2514 3936 y FY(\))k(=)g F5(;)p 676 3989 2037 4
v 1438 4068 a Gb(\000)f F5(`)h F4(t)1623 4080 y F1(0)1663
4068 y F4(.l)1750 4080 y F1(j)1803 4068 y FF(:)g F4(T)1921
4080 y F1(j)3127 4008 y Gd(\()r(T)o(-)t(P)t F6(R)t(O)t(J)s
Gd(\))450 4198 y F7(New)e(abbr)o(eviations)700 4327 y
F4({...T)918 4339 y F1(i)949 4327 y F4(...})1229 4280
y FK(def)1239 4327 y FY(=)116 b F4({...i)1636 4327 y
 gsave currentpoint translate 0 124518 7800 div 1035468 7800 div 429443
-7800 div box .9 setgray fill grestore

1636 4327 a 16 w Fi(.)14 b F4(x)h(:T)1854 4339 y F1(i)1886
4327 y F4(...})2060 4327 y
 gsave currentpoint translate 0 135002 7800 div 4958412 7800 div 601942
-7800 div box .9 setgray fill grestore
 2060 4327 a 37 w Gd(wher)o(e)20
b F4(x)g Gd(is)h(fr)o(esh)p 409 4443 9 36 v 418 4443
3000 6 v 3418 4443 38 6 v 3455 4443 9 36 v 450 4582 a(Notes:)575
4721 y F5(\017)41 b Gd(These)30 b(types)h(ar)o(e)e(only)i(appar)o
(ently)e(dependent:)45 b(the)30 b(elim)h(forms)g(apply)f(only)i(in)658
4820 y(the)e(non-dependent)h(case,)h(in)f(the)g(expectation)f(that)h
(dependencies)f(will)h(\002rst)g(be)658 4920 y(eliminated)20
b(by)h(pr)o(opagation)f(of)h(sharing)p eop
%%Page: 281 282
281 281 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)586
b Gd(3)t(2)t(.)28 b(S)t F6(T)t(R)t(U)t(C)t(T)t(U)t(R)t(E)t(S)d(A)t(N)t
(D)g Gd(M)t F6(O)t(D)t(U)t(L)t(E)t(S)587 b Gd(281)575
683 y F5(\017)41 b Gd(This)31 b(appr)o(oach)e(depends)h(cr)o(ucially)g
(on)i(the)e(pr)o(esence)g(of)g(singleton)i(kinds,)i(since)658
783 y(these)20 b(pr)o(ovide)g(the)h(mechanism)h(for)e(pr)o(opagating)g
(sharing)575 942 y F5(\017)41 b Gd(W)-8 b(e)30 b(hold)h(the)f(type)h
(of)f(earlier)f(substr)o(uctur)o(es)h(abstract)g(while)h(checking)g
(the)f(next)658 1042 y(one)21 b(\227)g(i.e.,)e(we)i(pr)o(opagate)e
(forwar)o(d)h(only)h(type)g(information,)h(not)f(\223identity\224)575
1201 y F5(\017)41 b Gd(The)22 b(\223sel\002\002cation\224)g(r)o(ules)h
(allow)g(us)f(to)h(specialize)e(signatur)o(es)h(\(types)g(of)h
(modules\))658 1301 y(to)e(pr)o(opagate)e(sharing.)26
b(They)21 b(ar)o(e)e(critical.)575 1461 y F5(\017)41
b Gd(Note)23 b(that)h(the)h(T)o(-)t(R)t F6(C)t(D)j Gd(r)o(ule)23
b(her)o(e)g(does)h(not)g(do)f(any)h(substitution)h(of)f(earlier)e
(\002elds.)658 1560 y(It)h(could,)g(but)g(this)h(would)f(constitute)h
(a)f(violation)h(of)f(abstraction)f(\(besides)h(raising)658
1660 y(the)16 b(usual)g(issues)h(in)f(combination)i(with)e(ef)o
(fects\).)22 b(This)17 b(version)g(of)f(the)g(r)o(ule,)h(though,)658
1759 y(r)o(elies)22 b(on)i(the)g(pr)o(esence)e(of)i(singleton)h(kinds)f
(to)g(be)f(very)g(useful.)33 b(For)24 b(example,)f(we)658
1859 y(want)d(the)h(expr)o(ession)824 2004 y FT({l={)p
Fv(S)e FT(Int,...},)41 b(l'=3})658 2187 y Gd(will)21
b(not)g(have)g(the)g(intended)f(type)824 2332 y FT({l)p
Fh(.)14 b FT(x:{)p Fv(S)k FT(*,...},)41 b(l')p Fh(.)14
b FT(x':typeof\(x\)})658 2515 y Gd(by)19 b(a)h(dir)o(ect)e(application)
i(of)g(this)g(r)o(ule.)25 b(Instead,)20 b(we)f(need)h(to)g(use)f
(singletons)j(to)e(give)658 2614 y(the)g(term)h(the)g(type)824
2759 y FT({l)p Fh(.)14 b FT(x:{)p Fv(S)k FT(Eq\(Int\),...},)43
b(l')p Fh(.)13 b FT(x':typeof\(x\)})658 2942 y Gd(\(a)j(subtype)h(of)g
(the)g(pr)o(evious)g(type\),)g(fr)o(om)f(which)k(T)o(-)t(R)t
F6(C)t(D)h Gd(does)c(derive)f(the)h(intended)658 3042
y(type.)450 3325 y Gj(32.8)119 b(Second-Class)30 b(Modules)450
3514 y Gd(phase-separation)20 b(equations)450 3797 y
Gj(32.9)119 b(Other)28 b(points)j(to)f(make)575 3986
y F5(\017)41 b Gd(The)20 b(old)h(ar)o(gument)g(about)f(whether)h
(modules)g(ar)o(e)f(str)o(ong)h(sums.)757 4145 y Ge(\226)41
b Gd(The)28 b(ar)o(gument)f(that)g(str)o(ong)h(sums)g(ar)o(e)e(\223not)
i(abstract\224)e(doesn't)i(hold)g(water)-6 b(.)840 4245
y(Our)22 b(str)o(uctur)o(es)f(her)o(e)g(ar)o(e)g(not)h(either:)27
b(the)22 b(abstraction)g(comes)g(fr)o(om)f(the)h(com-)840
4345 y(bination)g(of)e(str)o(uctur)o(es)h(with)g(ascription)h(\(or)e
(let-binding,)h(etc.\))757 4471 y Ge(\226)41 b Gd(A)28
b(better)g(r)o(eason)f(is)i(that)f(str)o(ong)h(sums)f(pr)o(opagate)f
(sharing)i(information)g(by)840 4571 y(substitution,)18
b(which)f(doesn't)f(scale)g(to)g(systems)g(with)h(ef)o(fects)d(\(the)i
(Harper/Lillibridge)840 4670 y(calculus)g(can)f(be)h(described)f(as)g
(a)h(variant)f(of)h(str)o(ong)g(sums)h(that)e(does)h(this)h(right\))575
4830 y F5(\017)41 b Gd(Applicative)19 b(vs.)26 b(generative)20
b(functors)p eop
%%Page: 282 283
282 282 bop 450 1306 a F3(Chapter)44 b(33)450 1721 y
Gk(Planned)53 b(Chapters)450 2175 y F7(I'm)22 b(not)h(sur)o(e)g(yet)g
(how)f(much)g(material)g(will)h(get)g(added)e(after)i(this)g
(point\227it)f(depends)g(mostly)g(on)450 2275 y(how)e(much)g(time)g(it)
h(takes)f(to)g(get)h(the)f(r)o(est)g(into)h(a)f(polished)g
(state\227but)h(her)o(e)g(ar)o(e)f(my)g(top)g(priorities:)575
2441 y F5(\017)41 b F7(Basic)32 b(material)g(on)g(modularity)m(.)59
b(\(Bob)32 b(Harper)g(and)g(I)g(ar)o(e)g(working)h(together)e(on)h(a)h
(de-)658 2541 y(velopment)22 b(that)h(includes)h(enough)f
(technicalities)g(to)g(understand)h(module)f(systems)h(of)g(the)658
2640 y(complexity)j(of)i(SML97')-5 b(s)29 b(\(or)g(OCaml')-5
b(s\),)32 b(including)c(both)h(\002rst-)g(and)g(second-class)g(vari-)
658 2740 y(ants.)35 b(It')-5 b(s)24 b(a)g(huge)f(task,)i(and)e(it')-5
b(s)25 b(not)f(clear)g(yet)f(whether)h(we'r)o(e)g(going)g(to)f(be)i
(able)g(to)e(\002nish)658 2840 y(something,)18 b(or)h(whether)-6
b(,)19 b(if)g(we)g(do,)g(it)g(will)g(turn)h(out)e(to)h(be)h(just)f(a)g
(long)g(co-author)o(ed)e(chapter)658 2939 y(her)o(e)j(or)h(a)g(short)f
(book)h(in)g(its)g(own)f(right.\))575 3105 y F5(\017)41
b F7(Basics)20 b(of)h(dependent)f(types.)25 b(\(General)c(sums)g(ar)o
(e)g(the)f(point)g(wher)o(e)h(this)f(gets)h(hard.\))575
3271 y F5(\017)41 b F7(Maybe)26 b(some)f(elementary)h(material)g(on)f
(intersection)h(types,)g(linear)h(types,)f(or)g(the)f(Curry-)658
3371 y(Howard)19 b(isomorphism.)575 3537 y F5(\017)41
b F7(A)20 b(chapter)g(on)h(parametricity)e(and)h(r)o(epr)o(esentation)h
(independence.)575 3703 y F5(\017)41 b F7(Some)18 b(material)h(on)g
(contextual)f(equivalence.)26 b(Maybe)19 b(not)g(a)g(full)g
(development,)f(but)h(at)g(least)658 3803 y(the)24 b(basic)h
(de\002nitions)f(and)g(some)h(examples)f(of)h(wher)o(e)f(types)g(make)g
(a)h(differ)o(ence.)37 b(\(Some)24 b(of)658 3902 y(this)c(is)h(cover)o
(ed)f(in)h(the)f(denotational)g(semantics)h(chapter)-6
b(,)19 b(to)h(a)h(small)f(extent.\))575 4068 y F5(\017)41
b F7(Some)28 b(material)f(on)h(translations)h(between)g(calculi,)g
(showing)f(how)f(they)g(pr)o(eserve)i(typing)658 4168
y(and)20 b(semantics)575 4334 y F5(\017)41 b F7(A)20
b(chapter)g(on)h(Moggi')-5 b(s)21 b(computational)d(lambda-calculus)575
4500 y F5(\017)41 b F7(Something)22 b(on)i(curry-howard.)33
b(\(In)23 b(any)g(case,)i(make)e(sur)o(e)h(these)g(ar)o(e)g(in)g(the)f
(bibliography:)658 4600 y(gallier)e(notes)g(on)f(constructive)h
(logic\))1888 5169 y Gd(282)p eop
%%Page: 283 284
283 283 bop 1388 2244 a Gk(Appendices)1888 5169 y Gd(283)p
eop
%%Page: 284 285
284 284 bop 450 1306 a F3(Appendix)44 b(A)450 1721 y
Gk(Solutions)51 b(to)g(Selected)h(Exercises)450 2153
y Ge(Solution)19 b(to)i(3.2.15:)1545 2256 y F4(t)i F5(\000)-15
b FV(!)24 b F4(t)1820 2226 y FX(0)p 1526 2299 337 4 v
1526 2379 a F4(t)f F5(\000)-15 b FV(!)1726 2349 y FX(\003)1788
2379 y F4(t)1839 2349 y FX(0)1541 2511 y F4(t)23 b F5(\000)-14
b FV(!)1742 2481 y FX(\003)1803 2511 y F4(t)1250 2643
y(t)23 b F5(\000)-15 b FV(!)1450 2613 y FX(\003)1512
2643 y F4(t)1563 2613 y FX(0)1752 2643 y F4(t)1803 2613
y FX(0)1850 2643 y F5(\000)g FV(!)1983 2613 y FX(\003)2045
2643 y F4(t)2096 2613 y FX(00)p 1250 2687 889 4 v 1516
2766 a F4(t)23 b F5(\000)-14 b FV(!)1717 2736 y FX(\003)1778
2766 y F4(t)1829 2736 y FX(00)450 2944 y Ge(Solution)19
b(to)i(3.2.19:)i Gd(By)d(induction)i(on)g(the)f(str)o(uctur)o(e)f(of)g
F4(t)p Gd(.)450 3068 y F7(Case:)52 b F4(t)20 b Gd(is)i(a)e(value)450
3192 y(By)h(Pr)o(oposition)h(3.2.18,)c(this)j(case)f(cannot)h(occur)-6
b(.)450 3316 y F7(Case:)135 b F4(t)23 b FY(=)g F4(succ)41
b(t)1176 3328 y F1(1)450 3440 y Gd(Looking)23 b(at)f(the)g(evaluation)g
(r)o(ules,)g(we)g(\002nd)g(that)g(only)h(the)f(r)o(ule)i(E)t(-)t(S)t
F6(U)t(C)t(C)g Gd(could)e(possibly)450 3539 y(be)j(used)h(to)g(derive)f
F4(t)32 b F5(\000)-14 b FV(!)32 b F4(t)1414 3509 y FX(0)1463
3539 y Gd(and)26 b F4(t)32 b F5(\000)-14 b FV(!)32 b
F4(t)1923 3509 y FX(00)1991 3539 y Gd(\(all)26 b(the)g(other)g(r)o
(ules)g(have)f(left-hand)g(sides)450 3639 y(whose)34
b(outermost)g(constr)o(uctor)g(is)g(something)h(other)e(than)g
F4(succ)o Gd(\).)62 b(So)33 b(ther)o(e)g(must)g(be)450
3739 y(two)d(subderivations)g(with)g(conclusions)h(of)f(the)f(form)h
F4(t)2354 3751 y F1(1)2434 3739 y F5(\000)-14 b FV(!)39
b F4(t)2658 3709 y FX(0)2651 3762 y F1(1)2721 3739 y
Gd(and)29 b F4(t)2934 3751 y F1(1)3014 3739 y F5(\000)-14
b FV(!)39 b F4(t)3238 3709 y FX(00)3230 3762 y F1(1)3280
3739 y Gd(.)52 b(By)450 3838 y(the)25 b(induction)h(hypothesis)h
(\(which)e(applies)g(because)f F4(t)2322 3850 y F1(1)2387
3838 y Gd(is)i(a)e(subterm)h(of)h F4(t)o Gd(\),)g(we)f(obtain)450
3938 y F4(t)501 3908 y FX(0)494 3961 y F1(1)557 3938
y FY(=)e F4(t)694 3908 y FX(00)687 3961 y F1(1)737 3938
y Gd(.)i(But)c(then)g F4(succ)42 b(t)1385 3908 y FX(0)1377
3961 y F1(1)1441 3938 y FY(=)23 b F4(succ)42 b(t)1796
3908 y FX(00)1788 3961 y F1(1)1838 3938 y Gd(,)21 b(as)f(r)o(equir)o
(ed.)450 4062 y F7(Case:)135 b F4(t)23 b FY(=)g F4(pred)41
b(t)1176 4074 y F1(1)450 4186 y Gd(Her)o(e)15 b(ther)o(e)g(ar)o(e)f
(thr)o(ee)h(evaluation)h(r)o(ules)g(\()r(E)t(-)t(P)t
F6(R)t(E)t(D)r Gd(,)i(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t
F6(A)o(T)t Gd(P)t(Z)r(,)f(and)g(E)t(-)t(B)t F6(E)t(T)o(A)t
Gd(N)t F6(A)o(T)t Gd(P)t(S)q(\))450 4285 y(that)27 b(might)h(have)e
(been)h(used)f(to)i(r)o(educt)d F4(t)i Gd(to)g F4(t)2056
4255 y FX(0)2107 4285 y Gd(and)f F4(t)2325 4255 y FX(00)2368
4285 y Gd(.)44 b(Notice,)28 b(however)-6 b(,)28 b(that)f(these)450
4385 y(r)o(ules)d(do)g(not)g(overlap:)31 b(if)24 b F4(t)f
Gd(matches)h(the)g(left-hand)f(side)g(of)h(one)g(r)o(ule,)g(then)h(it)f
(de\002nitely)450 4484 y(does)18 b F7(not)g Gd(match)g(the)h(left-hand)
e(side)h(of)g(the)h(others.)25 b(\(For)18 b(example,)g(if)g
F4(t)f Gd(matches)k(E)t(-)t(P)t F6(R)t(E)t(D)r Gd(,)450
4584 y(then)27 b F4(t)683 4596 y F1(1)750 4584 y Gd(is)f(de\002nitely)g
(not)h(a)f(value,)g(in)h(particular)e(not)h F4(0)g Gd(or)g
F4(succ)42 b(v)p Gd(.\))f(This)26 b(tells)h(us)f(that)450
4684 y(the)19 b F7(same)g Gd(r)o(ule)f(must)i(have)e(been)g(used)h(to)g
(derive)f F4(t)k F5(\000)-14 b FV(!)23 b F4(t)2338 4654
y FX(0)2380 4684 y Gd(and)18 b F4(t)23 b F5(\000)-14
b FV(!)23 b F4(t)2814 4654 y FX(00)2856 4684 y Gd(.)i(If)19
b(that)f(r)o(ule)h(was)452 4783 y(E)t(-)t(P)t F6(R)t(E)t(D)s
Gd(,)29 b(then)f(we)g(use)g(the)f(induction)i(hypothesis)g(as)f(in)g
(the)g(pr)o(evious)f(case.)46 b(If)27 b(it)h(was)452
4883 y(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t Gd(P)t(Z)22
b(or)h(E)t(-)t(B)t F6(E)t(T)o(A)t Gd(N)t F6(A)o(T)t Gd(P)t(S)q(,)e
(then)g(the)g(r)o(esult)f(is)h(immediate.)1888 5169 y(284)p
eop
%%Page: 285 286
285 285 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(285)450 683 y F7(Case:)52 b Gd(Other)21
b(cases)450 806 y(Similar)-6 b(.)450 982 y Ge(Solution)31
b(to)i(3.2.24:)48 b Gd(Let)32 b(us)i(use)f(the)g(metavariable)e
F4(t)i Gd(to)g(range)g(over)g(the)g(new)g(set)g(of)450
1082 y(terms)26 b(extended)f(with)i F4(wrong)d Gd(\(including)j(all)f
(terms)g(with)h F4(wrong)d Gd(as)i(a)g(subphrase\),)g(and)450
1181 y F4(g)d Gd(to)g(range)g(over)g(the)g(original)h(set)f(of)g
(\223good\224)g(terms)g(that)g(do)h(not)g(involve)f(wr)o(ong.)33
b(W)-6 b(rite)450 1295 y F4(t)567 1248 y F1(w)529 1295
y F5(\000)-14 b FV(!)35 b F4(t)749 1265 y FX(0)800 1295
y Gd(for)27 b(the)g(new)h(evaluation)f(r)o(elation)g(augmented)g(with)h
F4(wrong)e Gd(transitions,)j(and)450 1409 y F4(g)563
1362 y F1(o)517 1409 y F5(\000)-15 b FV(!)23 b F4(g)725
1379 y FX(0)765 1409 y Gd(for)17 b(the)g(original)h(form)f(of)g
(evaluation.)24 b(Now)-8 b(,)18 b(the)g(claim)f(that)g(the)g(two)h(tr)o
(eatments)450 1508 y(agr)o(ee)e(can)i(be)g(formulated)f(pr)o(ecisely)g
(as)h(follows:)25 b(any)18 b(\(original\))g(term)f(whose)i(evaluation)
450 1608 y(gets)27 b(stuck)h(in)f(the)g(original)h(semantics)f(will)h
(evaluate)e(to)h F4(wrong)e Gd(in)i(the)h(new)f(semantics,)450
1708 y(and)20 b(vice)h(versa.)j(Formally:)450 1883 y
Ge(A.1)c(Proposition:)40 b Gd(For)21 b(all)f(original)i(terms)e
F4(g)p Gd(,)967 2060 y FY(\()p F4(g)1113 2012 y F1(o)1066
2060 y F5(\000)-14 b FV(!)1200 2015 y F5(\003)1269 2060
y F4(g)1320 2025 y FX(0)1343 2060 y Gd(,)21 b(wher)o(e)f
F4(g)1685 2029 y FX(0)1729 2060 y Gd(is)h(stuck)q FY(\))83
b Gd(if)o(f)f FY(\()p F4(g)2418 2012 y F1(w)2380 2060
y F5(\000)-14 b FV(!)2514 2015 y F5(\003)2582 2060 y
F4(wrong)n FY(\))p Gb(:)539 b FZ(2)575 2235 y Gd(T)-8
b(o)22 b(pr)o(ove)g(this,)h(we)f(pr)o(oceed)f(in)i(several)f(steps.)30
b(First,)23 b(we)f(r)o(emark)f(that)i(the)f(new)h(tran-)450
2335 y(sitions)f(we)f(have)f(added)f(do)i(not)h(br)o(eak)d(Theor)o(em)i
(3.2.19)450 2511 y Ge(A.2)f(Lemma:)39 b Gd(The)21 b(augmented)f
(evaluation)h(r)o(elation)f(is)h(deterministic.)560 b
FZ(2)575 2686 y Gd(This)23 b(means)g(that)h(whenever)f
F4(g)f Gd(can)h(take)g(a)f(single)i(step)f(to)h F4(g)2594
2656 y FX(0)2641 2686 y Gd(in)f(the)h(original)f(seman-)450
2786 y(tics,)j(it)g(can)f(also)g(step)g(to)h F4(g)1346
2756 y FX(0)1394 2786 y Gd(in)g(the)f(augmented)g(semantics,)i(and)e
(furthermor)o(e)f(that)h F4(g)3342 2756 y FX(0)3391 2786
y Gd(is)450 2886 y(the)c F7(only)f Gd(term)h F4(g)f Gd(can)h(step)f(to)
i(in)f(the)g(new)g(semantics.)575 2985 y(Next,)g(we)h(show)g(that)g(a)f
(term)h(that)g(is)g(\(alr)o(eady\))d(stuck)j(in)g(the)g(original)g
(semantics)g(will)450 3085 y(always)f(evaluate)e(to)i
F4(wrong)e Gd(in)i(the)g(augmented)f(semantics.)450 3276
y Ge(A.3)g(Lemma:)39 b Gd(If)21 b F4(g)f Gd(is)h(stuck)g(then)g
F4(g)1667 3229 y F1(w)1629 3276 y F5(\000)-14 b FV(!)1763
3231 y F5(\003)1832 3276 y F4(wrong)m Gd(.)1324 b FZ(2)450
3452 y F7(Pr)o(oof:)66 b Gd(By)21 b(induction)h(on)f(the)g(str)o(uctur)
o(e)f(of)h F4(g)p Gd(.)450 3575 y F7(Case:)135 b F4(g)23
b FY(=)g F4(true)n Gd(,)d F4(false)n Gd(,)h(or)g F4(0)450
3698 y Gd(Can't)g(happen)f(\(we)g(assumed)h(that)g F4(g)f
Gd(is)h(stuck\).)450 3822 y F7(Case:)135 b F4(g)23 b
FY(=)g F4(if)42 b(g)1089 3834 y F1(1)1173 3822 y F4(then)g(g)1435
3834 y F1(2)1519 3822 y F4(else)g(g)1780 3834 y F1(3)450
3945 y Gd(Since)30 b F4(g)f Gd(is)h(stuck,)j F4(g)1127
3957 y F1(1)1198 3945 y Gd(must)d(be)g(in)g(normal)h(form)f
(\(otherwise)g(r)o(ule)i(E)t(-)t(I)t F6(F)g Gd(would)e(apply\).)450
4044 y(Clearly)-9 b(,)24 b F4(g)798 4056 y F1(1)863 4044
y Gd(cannot)h(be)f F4(true)f Gd(or)i F4(false)d Gd(\(otherwise)j(one)g
(of)f(the)h(r)o(ules)i(E)t(-)t(B)t F6(O)t(O)t(L)t Gd(B)t
F6(E)t(T)o(A)o Gd(T)e(or)452 4144 y(E)t(-)t(B)t F6(O)t(O)t(L)t
Gd(B)t F6(E)t(T)o(A)t Gd(F)j(would)e(apply)g(and)g F4(g)f
Gd(would)i(not)g(be)f(stuck\).)41 b(Consider)27 b(the)f(r)o(emaining)
450 4244 y(cases:)568 4404 y F7(Subcase:)135 b F4(g)1033
4416 y F1(1)1097 4404 y FY(=)22 b F4(if)43 b(g)1357 4416
y F1(11)1477 4404 y F4(then)f(g)1739 4416 y F1(12)1859
4404 y F4(else)g(g)2121 4416 y F1(13)568 4527 y Gd(Since)21
b F4(g)825 4539 y F1(1)887 4527 y Gd(is)g(in)g(normal)h(form)f(and)f
(obviously)i(not)g(a)e(value,)g(it)i(is)f(stuck.)26 b(The)21
b(induction)568 4642 y(hypothesis)28 b(tells)e(us)g(that)g
F4(g)1495 4654 y F1(1)1607 4595 y(w)1568 4642 y F5(\000)-14
b FV(!)1702 4598 y F5(\003)1781 4642 y F4(wrong)n Gd(.)41
b(Fr)o(om)26 b(this,)i(we)e(can)g(constr)o(uct)h(a)e(deriva-)568
4758 y(tion)33 b(of)f F4(g)975 4711 y F1(w)937 4758 y
F5(\000)-14 b FV(!)1071 4713 y F5(\003)1160 4758 y F4(if)43
b(wrong)e(then)h(g)1814 4770 y F1(2)1898 4758 y F4(else)g(g)2159
4770 y F1(3)2200 4758 y Gd(.)59 b(Adding)31 b(a)h(\002nal)g(instance)g
(of)g(r)o(ule)570 4873 y(E)t(-)t(I)t F6(F)t Gd(-)t(W)t
F6(R)t(O)t(N)t(G)23 b Gd(yields)e F4(g)1433 4826 y F1(w)1394
4873 y F5(\000)-14 b FV(!)1528 4828 y F5(\003)1597 4873
y F4(wrong)m Gd(,)21 b(as)f(r)o(equir)o(ed.)p eop
%%Page: 286 287
286 286 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(286)568 683 y F7(Subcase:)135 b F4(g)1033
695 y F1(1)1097 683 y FY(=)22 b F4(succ)42 b(g)1444 695
y F1(11)568 808 y Gd(If)36 b F4(g)704 820 y F1(11)817
808 y Gd(is)h(a)f(numeric)g(value,)k(then)d F4(g)1839
820 y F1(1)1916 808 y Gd(is)g(a)f F4(badbool)d Gd(and)j(r)o(ule)j(E)t
(-)t(I)t F6(F)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)g Gd(im-)568
916 y(mediately)30 b(yields)g F4(g)1338 869 y F1(w)1299
916 y F5(\000)-14 b FV(!)41 b F4(wrong)n Gd(.)53 b(Otherwise,)33
b(by)d(de\002nition)i F4(g)2755 928 y F1(1)2826 916 y
Gd(is)e(stuck,)j(and)d(the)568 1032 y(induction)j(hypothesis)g(tells)g
(us)f(that)g F4(g)1905 1044 y F1(1)2028 985 y(w)1989
1032 y F5(\000)-14 b FV(!)2123 987 y F5(\003)2212 1032
y F4(wrong)n Gd(.)59 b(Fr)o(om)32 b(this)h(derivation,)h(we)568
1147 y(constr)o(uct)28 b(a)f(derivation)f(of)h F4(g)1627
1100 y F1(w)1589 1147 y F5(\000)-15 b FV(!)1722 1102
y F5(\003)1803 1147 y F4(succ)42 b(wrong)n Gd(.)i(Adding)27
b(a)f(\002nal)i(instance)f(of)g(r)o(ule)570 1262 y(E)t(-)t(S)t
F6(U)t(C)t(C)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)c Gd(yields)e
F4(g)1565 1215 y F1(w)1527 1262 y F5(\000)-14 b FV(!)1661
1217 y F5(\003)1729 1262 y F4(wrong)n Gd(.)568 1420 y
F7(Other)20 b(subcases:)568 1544 y Gd(Similar)-6 b(.)450
1711 y F7(Case:)135 b F4(g)23 b FY(=)g F4(succ)41 b(g)1176
1723 y F1(1)450 1835 y Gd(Since)26 b F4(g)h Gd(is)g(stuck,)h(we)f(know)
h(\(fr)o(om)e(the)g(de\002nition)i(of)f(values\))f(that)h
F4(g)2806 1847 y F1(1)2873 1835 y Gd(must)h(be)e(in)h(nor)o(-)450
1935 y(mal)21 b(form)g(and)f(not)i(a)e(numeric)h(value.)26
b(Ther)o(e)20 b(ar)o(e)f(two)j(possibilities:)27 b(either)20
b F4(g)3035 1947 y F1(1)3096 1935 y Gd(is)i F4(true)d
Gd(or)450 2034 y F4(false)n Gd(,)d(or)g(else)g F4(g)998
2046 y F1(1)1054 2034 y Gd(itself)g(is)g(not)g(a)g(value,)f(hence)h
(stuck.)24 b(In)17 b(the)e(\002rst)i(case,)e(r)o(ule)j(E)t(-)t(S)t
F6(U)t(C)t(C)t Gd(-)t(W)t F6(R)t(O)t(N)t(G)450 2143 y
Gd(immediately)f(yields)h F4(g)1274 2096 y F1(w)1235
2143 y F5(\000)-14 b FV(!)23 b F4(wrong)n Gd(;)18 b(in)g(the)f(second)h
(case,)f(the)g(induction)h(hypothesis)h(gives)450 2258
y(us)i F4(g)600 2270 y F1(1)702 2211 y(w)663 2258 y F5(\000)-14
b FV(!)797 2213 y F5(\003)866 2258 y F4(wrong)18 b Gd(and)j(we)f(pr)o
(oceed)g(as)g(befor)o(e.)450 2383 y F7(Other)g(cases:)450
2507 y Gd(Similar)-6 b(.)2665 b FZ(2)575 2690 y Gd(Lemmas)15
b(A.2)g(and)h(A.3)e(together)i(give)g(us)h(the)f(\223only)g(if)5
b(\224)15 b(\()p FW(=)-14 b FV(\))p Gd(\))15 b(half)g(of)h(Pr)o
(oposition)h(A.1.)450 2790 y(For)23 b(the)f(other)g(half,)g(we)h(need)e
(to)i(show)g(that)f(a)g(term)g(that)h(is)f(\223about)g(to)g(go)h(wr)o
(ong\224)f(in)h(the)450 2889 y(augmented)d(semantics)i(is)f(stuck)g(in)
g(the)g(original)g(semantics.)450 3086 y Ge(A.4)f(Lemma:)39
b Gd(If)32 b F4(g)1155 3039 y F1(w)1116 3086 y F5(\000)-14
b FV(!)44 b F4(t)31 b Gd(in)i(the)f(augmented)g(semantics)g(and)g
F4(t)f Gd(contains)i F4(wrong)d Gd(as)h(a)450 3186 y(subterm,)21
b(then)g F4(g)f Gd(is)h(stuck)g(in)h(the)f(original)g(semantics.)1135
b FZ(2)450 3368 y F7(Pr)o(oof:)66 b Gd(Straightforwar)o(d)19
b(induction)j(on)f(\(augmented\))f(evaluation)h(derivations.)238
b FZ(2)575 3551 y Gd(Combining)26 b(this)g(with)g(Lemma)e(A.2)g(yields)
h(the)g(\223if)5 b(\224)24 b(\()p FV(\()-14 b FW(=)p
Gd(\))24 b(half)g(of)h(Pr)o(oposition)h(A.1,)450 3651
y(and)20 b(we)h(ar)o(e)e(\002nished.)450 3833 y Ge(Solution)g(to)i
(4.2.2:)i Gd(Ther)o(e)d(ar)o(e)f(several)h(possibilities:)616
3991 y FT(succ1)40 b(=)g FM(\025)p FT(n.)f FM(\025)p
FT(s.)h FM(\025)p FT(z.)f(s)g(\(n)h(s)g(z\);)616 4082
y(succ2)g(=)g FM(\025)p FT(n.)f FM(\025)p FT(s.)h FM(\025)p
FT(z.)f(n)g(s)h(\(s)g(z\);)616 4174 y(succ3)g(=)g FM(\025)p
FT(n.)f(plus)h(c)1324 4183 y FL(1)1401 4174 y FT(n;)p
eop
%%Page: 287 288
287 287 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(287)450 683 y Ge(Solution)19 b(to)i(4.2.5:)i
Gd(Her)o(e's)d(a)g(simple)i(one:)616 840 y FT(equal)40
b(=)g FM(\025)p FT(m.)f FM(\025)p FT(n.)1008 932 y(and)h(\(iszro)h(\(m)
f(prd)f(n\)\))1165 1023 y(\(iszro)i(\(n)f(prd)f(m\)\);)450
1205 y Ge(Solution)19 b(to)i(4.2.6:)i Gd(This)f(is)f(the)g(solution)h
(I)f(had)f(in)h(mind:)616 1363 y FT(nil)40 b(=)f FM(\025)p
FT(hh.)h FM(\025)p FT(tt.)g(tt;)616 1454 y(cons)g(=)g
FM(\025)p FT(h.)f FM(\025)p FT(t.)g FM(\025)p FT(hh.)h
FM(\025)p FT(tt.)g(hh)f(h)h(\(t)f(hh)h(tt\);)616 1545
y(head)g(=)g FM(\025)p FT(l.)f(l)g(\()p FM(\025)p FT(h.)p
FM(\025)p FT(t.h\))i(fls;)616 1637 y(tail)f(=)g FM(\025)p
FT(l.)969 1728 y(fst)g(\(l)g(\()p FM(\025)p FT(x.)f FM(\025)p
FT(p.)h(pair)g(\(snd)g(p\))g(\(cons)g(x)f(\(snd)i(p\)\)\))1244
1819 y(\(pair)f(nil)g(nil\)\);)616 1911 y(isnull)h(=)e
FM(\025)p FT(l.)g(l)h(\()p FM(\025)p FT(h.)p FM(\025)p
FT(t.fls\))h(tru;)450 2076 y Gd(Her)o(e)20 b(is)h(a)f(rather)g(dif)o
(fer)o(ent)f(appr)o(oach:)616 2234 y FT(nil)40 b(=)f(pair)i(tru)e(tru;)
616 2325 y(cons)h(=)g FM(\025)p FT(h.)f FM(\025)p FT(t.)g(pair)h(fls)g
(\(pair)h(h)e(t\);)616 2416 y(head)h(=)g FM(\025)p FT(z.)f(fst)h(\(snd)
g(z\);)616 2508 y(tail)g(=)g FM(\025)p FT(z.)f(snd)h(\(snd)g(z\);)616
2599 y(isnull)h(=)e(fst;)450 2781 y Ge(Solution)19 b(to)i(4.2.7:)j
Gd(Since)d(call-by-value)e(evaluation)i(stops)g(at)g(abstractions,)f
(the)i(r)o(esult)e(of)450 2881 y F4(factorial)40 b(c)929
2893 y F1(3)993 2881 y Gd(is)24 b(actually)f(a)g(lar)o(ge)g(term)g
(containing)i(a)e(good)h(deal)f(of)g(\223latent)g(computa-)450
2980 y(tion\224)g(that)g(will)h(only)g(be)f(performed)f(later)g(when)i
(the)f(ar)o(guments)g F4(s)g Gd(and)f F4(z)h Gd(ar)o(e)e(supplied.)450
3080 y(Her)o(e)f(is)h F4(factorial)40 b(c)1210 3092 y
F1(2)1271 3080 y Gd(\(which)22 b(is)f(quite)g(a)f(bit)h(smaller!\):)616
3237 y FT(factorial)41 b(c)1047 3246 y FL(2)1085 3237
y FT(;)529 3360 y FS(I)616 3370 y FT(\()p FM(\025)p FT(s.)734
3461 y FM(\025)p FT(z.)812 3553 y(\()p FM(\025)p FT(s'.)930
3644 y FM(\025)p FT(z'.)1008 3735 y(\()p FM(\025)p FT(s''.)f
FM(\025)p FT(z''.)g(s'')g(z''\))g(s')1008 3827 y(\(\()p
FM(\025)p FT(s''.)h FM(\025)p FT(z''.z''\))f(s')g(z'\)\))812
3918 y(s)812 4009 y(\(\()p FM(\025)p FT(s'.)969 4101
y FM(\025)p FT(z'.)1048 4192 y(\()p FM(\025)p FT(s''.)1165
4283 y FM(\025)p FT(z''.)1244 4375 y(\()p FM(\025)p FT(s'''.)g
FM(\025)p FT(z'''.)g(s''')g(z'''\))g(s'')1244 4466 y(\(\()p
FM(\025)p FT(s'''.)g FM(\025)p FT(z'''.z'''\))h(s'')f(z''\)\))1048
4557 y(s')1048 4649 y(\(\()p FM(\025)p FT(s''.)g FM(\025)p
FT(z''.z''\))h(s')e(z'\)\))851 4740 y(s)851 4831 y(z\)\))p
eop
%%Page: 288 289
288 288 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(288)450 683 y Ge(Solution)19 b(to)i(4.2.8:)616
841 y FT(ff)40 b(=)f FM(\025)p FT(f.)h FM(\025)p FT(l.)891
932 y(test)g(\(isnull)h(l\))1008 1023 y(\()p FM(\025)p
FT(x.)f(c)1246 1032 y FL(0)1284 1023 y FT(\))f(\()p FM(\025)p
FT(x.)h(\(plus)g(\(head)h(l\))e(\(f)h(\(tail)g(l\)\)\)\))h(c)2777
1032 y FL(0)2815 1023 y FT(;)616 1115 y(sumlist)g(=)e(fixedpoint)j(ff;)
616 1297 y(l)d(=)h(cons)g(c)1008 1306 y FL(2)1085 1297
y FT(\(cons)h(c)1360 1306 y FL(3)1437 1297 y FT(\(cons)f(c)1711
1306 y FL(4)1788 1297 y FT(nil\)\);)616 1389 y(equal)g(\(sumlist)h(l\))
f(c)1361 1398 y FL(9)1399 1389 y FT(;)529 1512 y FS(I)616
1522 y FT(\()p FM(\025)p FT(x.)g FM(\025)p FT(y.)f(x\))450
1705 y Ge(Solution)28 b(to)i(4.3.3:)42 b Gd(By)29 b(induction)i(on)g
(the)f(size)f(of)h F4(t)o Gd(.)53 b(\(That)29 b(is,)k(assuming)d(the)g
(desir)o(ed)450 1805 y(pr)o(operty)d(for)h(all)g(terms)g(smaller)g
(than)h F4(t)o Gd(,)h(we)e(must)h(pr)o(ove)e(it)h(for)g
F4(t)g Gd(itself;)j(if)d(we)g(can)g(do)450 1904 y(this,)f(we)f(may)g
(conclude)f(that)h(the)g(pr)o(operty)e(holds)j(for)e(all)h
F4(t)o Gd(.\))40 b(Ther)o(e)24 b(ar)o(e)h(thr)o(ee)f(cases)i(to)450
2004 y(consider:)450 2128 y F7(Case:)135 b F4(t)23 b
FY(=)g F4(x)450 2253 y Gd(Immediate:)i F0(j)p F7(FV)p
FY(\()p F4(t)p FY(\))p F0(j)e FY(=)g F0(jf)p F4(x)o F0(gj)f
FY(=)h Gb(1)g FY(=)g F7(size)q FY(\()p F4(t)o FY(\))p
Gd(.)450 2377 y F7(Case:)135 b F4(t)23 b FY(=)g Gb(\025)p
F4(x.t)1090 2389 y F1(1)450 2502 y Gd(By)31 b(the)h(induction)g
(hypothesis,)j F0(j)p F7(FV)p FY(\()p F4(t)1765 2514
y F1(1)1805 2502 y FY(\))p F0(j)43 b F5(\024)f F7(size)p
FY(\()p F4(t)2205 2514 y F1(1)2246 2502 y FY(\))p Gd(.)57
b(W)-8 b(e)32 b(now)g(calculate)e(as)h(follows:)450 2602
y F0(j)p F7(FV)p FY(\()p F4(t)p FY(\))p F0(j)23 b FY(=)g
F0(j)p F7(FV)o FY(\()p F4(t)1008 2614 y F1(1)1049 2602
y FY(\))18 b F0(n)h(f)p F4(x)o F0(gj)j F5(\024)h F0(j)p
F7(FV)p FY(\()p F4(t)1584 2614 y F1(1)1625 2602 y FY(\))p
F0(j)g F5(\024)g F7(size)p FY(\()p F4(t)1986 2614 y F1(1)2026
2602 y FY(\))h Gb(<)f F7(size)p FY(\()p F4(t)p FY(\))p
Gd(.)450 2726 y F7(Case:)135 b F4(t)23 b FY(=)g F4(t)958
2738 y F1(1)1042 2726 y F4(t)1086 2738 y F1(2)450 2851
y Gd(By)h(the)g(induction)h(hypothesis,)g F0(j)p F7(FV)p
FY(\()p F4(t)1733 2863 y F1(1)1773 2851 y FY(\))p F0(j)k
F5(\024)g F7(size)p FY(\()p F4(t)2146 2863 y F1(1)2186
2851 y FY(\))c Gd(and)e F0(j)p F7(FV)p FY(\()p F4(t)2607
2863 y F1(2)2647 2851 y FY(\))p F0(j)29 b F5(\024)f F7(size)q
FY(\()p F4(t)3020 2863 y F1(2)3060 2851 y FY(\))p Gd(.)35
b(W)-8 b(e)24 b(now)450 2950 y(calculate)19 b(as)h(follows:)27
b F0(j)p F7(FV)o FY(\()p F4(t)p FY(\))p F0(j)c FY(=)g
F0(j)p F7(FV)p FY(\()p F4(t)1765 2962 y F1(1)1805 2950
y FY(\))17 b F5([)h F7(FV)p FY(\()p F4(t)2109 2962 y
F1(2)2149 2950 y FY(\))p F0(j)23 b F5(\024)g F0(j)p F7(FV)p
FY(\()p F4(t)2509 2962 y F1(1)2550 2950 y FY(\))p F0(j)17
b FY(+)f F0(j)p F7(FV)p FY(\()p F4(t)2896 2962 y F1(2)2937
2950 y FY(\))p F0(j)23 b F5(\024)f F7(size)q FY(\()p
F4(t)3298 2962 y F1(1)3338 2950 y FY(\))17 b(+)450 3050
y F7(size)q FY(\()p F4(t)650 3062 y F1(2)691 3050 y FY(\))23
b Gb(<)g F7(size)q FY(\()p F4(t)o FY(\))p Gd(.)450 3232
y Ge(Solution)31 b(to)h(5.1.13:)47 b Gd(If)32 b Gb(\000)g
Gd(is)h(a)f(naming)h(context,)j(write)c Gb(\000)6 b FY(\()p
F4(x)-6 b FY(\))33 b Gd(for)f(the)h(index)f(of)g F4(x)g
Gd(in)h Gb(\000)6 b Gd(,)450 3332 y(counting)22 b(fr)o(om)e(the)h
(right.)26 b(Now)-8 b(,)22 b(the)f(pr)o(operty)f(that)g(we)h(want)g(is)
g(that)605 3515 y F7(r)o(emovenames)1056 3527 y F1(\000)1099
3515 y FY(\()p F0(f)p F4(x)h F5(7)p FV(!)h F4(s)p F0(g)p
F4(t)o FY(\))65 b(=)f F0(f)p Gb(\000)6 b FY(\()p F4(x)-6
b FY(\))23 b F5(7)p FV(!)g F7(r)o(emovenames)2428 3527
y F1(\000)2471 3515 y FY(\()p F4(s)p FY(\))p F0(g)p FY(\()p
F7(r)o(emovenames)3088 3527 y F1(\000)3131 3515 y FY(\()p
F4(t)p FY(\)\))q Gb(:)450 3697 y Gd(The)e(pr)o(oof)f(pr)o(oceeds)g(by)g
(induction)i(on)f F4(t)p Gd(,)g(using)g(De\002nitions)i(4.3.5)c(and)h
(5.1.9,)e(some)k(sim-)450 3797 y(ple)32 b(calculations,)i(and)e(some)g
(easy)g(lemmas)g(about)f F7(r)o(emovenames)h Gd(and)f(the)h(other)g
(basic)450 3897 y(operations)21 b(on)h(terms.)j(Convention)d(4.3.4)d
(plays)i(a)f(cr)o(ucial)h(r)o(ole)f(in)h(the)g(abstraction)f(case.)450
4079 y Ge(Solution)14 b(to)i(6.3.8:)21 b Gd(Her)o(e's)15
b(a)g(counter)o(example:)22 b(the)16 b(term)g F4(\(if)42
b(false)g(then)f(true)h(else)g(0\))450 4179 y Gd(is)21
b(ill-typed,)f(but)h(evaluates)f(to)h(the)g(well-typed)f(term)h
F4(0)p Gd(.)p eop
%%Page: 289 290
289 289 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(289)450 683 y Ge(Solution)21 b(to)i(7.2.3:)30
b Gd(T)o(-)t(T)t F6(R)t(U)t(E)c Gd(and)e(T)o(-)t(F)o
F6(A)t(L)t(S)t(E)g Gd(ar)o(e)e(intr)o(oduction)i(r)o(ules.)34
b(T)o(-)t(I)t F6(F)26 b Gd(is)d(an)g(elimina-)450 783
y(tion)f(r)o(ule.)450 934 y Ge(Solution)27 b(to)h(7.3.1:)40
b Gd(Because)27 b(the)i(set)g(of)f(type)h(expr)o(essions)f(is)h(empty)g
(\(ther)o(e)e(is)i(no)h(base)450 1034 y(case)20 b(in)h(the)g(syntax)g
(of)g(types\).)450 1186 y Ge(Solution)c(to)i(27.4.2:)j
Gd(The)c(pr)o(oof)h(pr)o(oceeds)e(by)i(induction)h(on)f(a)f(derivation)
h(of)g Gb(\000)5 b(;)17 b F4(x:S)22 b F5(`)h F4(t)g FF(:)450
1285 y F4(T)p Gd(.)i(Ther)o(e)18 b(ar)o(e)g(cases)h(for)g(each)g(of)g
(the)g(typing)h(r)o(ules)g(\(or)-6 b(,)19 b(equivalently)-9
b(,)20 b(each)f(of)g(the)g(possible)450 1385 y(forms)i(of)g
F4(t)o Gd(\).)450 1503 y F7(Case)j Gd(T)o(-)t(V)l F6(A)t(R)r
F7(:)134 b F4(t)23 b FY(=)g F4(z)1025 1603 y Gd(with)f
Gb(\000)5 b FY(\()p F4(z)-6 b FY(\))24 b(=)f F4(T)450
1721 y Gd(Ther)o(e)i(ar)o(e)f(two)i(sub-cases)f(to)h(consider)-6
b(,)27 b(depending)e(on)h(whether)g F4(z)f Gd(is)h(the)g(same)f(as)h
F4(x)f Gd(or)450 1820 y(dif)o(fer)o(ent.)j(If)21 b F4(z)26
b FY(=)f F4(x)p Gd(,)d(then)g F0(f)p F4(x)j F5(7)p FV(!)h
F4(s)o F0(g)p F4(z)f FY(=)h F4(s)o Gd(.)k(The)22 b(r)o(equir)o(ed)f(r)o
(esult)g(is)i(then)f Gb(\000)k F5(`)f F4(s)g FF(:)h F4(S)p
Gd(,)c(which)450 1920 y(is)f(among)g(the)f(assumptions)i(of)e(the)g
(lemma.)26 b(Otherwise,)20 b F0(f)p F4(x)j F5(7)p FV(!)g
F4(s)o F0(g)p F4(z)f FY(=)h F4(z)p Gd(,)d(and)g(the)g(desir)o(ed)450
2019 y(r)o(esult)g(is)h(immediate.)450 2138 y F7(Case)j
Gd(T)o(-)t(A)t F6(B)t(S)q F7(:)135 b F4(t)22 b FY(=)h
Gb(\025)p F4(y:T)1346 2150 y F1(2)1386 2138 y F4(.t)1473
2150 y F1(1)1018 2237 y F4(T)f FY(=)h F4(T)1214 2249
y F1(2)1254 2237 y FV(!)p F4(T)1381 2249 y F1(1)1018
2337 y Gb(\000)5 b(;)17 b F4(x:S)o Gb(;)23 b F4(y:T)1416
2349 y F1(2)1480 2337 y F5(`)f F4(t)1597 2349 y F1(1)1661
2337 y FF(:)h F4(T)1779 2349 y F1(1)450 2456 y Gd(First)i(note)g(that,)
h(by)e(convention)i(4.3.4,)e(we)h(may)f(assume)h F4(x)30
b F5(6)p FY(=)g F4(y)24 b Gd(and)g F4(y)40 b Gb(=)-52
b F5(2)31 b F7(FV)p FY(\()p F4(s)p FY(\))p Gd(.)38 b(Using)450
2556 y(weakening)22 b(and)f(permutation)g(on)h(the)g(given)g
(subderivation,)f(we)g(obtain)h Gb(\000)5 b(;)19 b F4(y:T)3157
2568 y F1(2)3197 2556 y Gb(;)24 b F4(x:S)f F5(`)450 2655
y F4(t)494 2667 y F1(1)567 2655 y FF(:)33 b F4(T)695
2667 y F1(1)735 2655 y Gd(.)42 b(By)26 b(the)g(induction)h(hypothesis,)
h Gb(\000)6 b(;)27 b F4(y:T)2122 2667 y F1(2)2195 2655
y F5(`)33 b F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p
F4(t)2612 2667 y F1(1)2685 2655 y FF(:)g F4(T)2813 2667
y F1(1)2853 2655 y Gd(.)42 b(By)28 b(T)o(-)t(A)t F6(B)t(S)q
Gd(,)g Gb(\000)k F5(`)450 2755 y Gb(\025)p F4(y:T)626
2767 y F1(2)666 2755 y F4(.)43 b F0(f)p F4(x)28 b F5(7)p
FV(!)g F4(s)p F0(g)p F4(t)1077 2767 y F1(1)1146 2755
y FF(:)g F4(T)1269 2767 y F1(2)1309 2755 y FV(!)p F4(T)1436
2767 y F1(1)1477 2755 y Gd(.)33 b(But)24 b(this)g(is)g(the)g(needed)f
(r)o(esult,)g(since,)i(by)e(the)h(de\002nition)450 2855
y(of)d(substitution,)h F0(f)p F4(x)g F5(7)p FV(!)h F4(s)p
F0(g)p F4(t)f FY(=)h Gb(\025)p F4(y:T)1623 2867 y F1(1)1663
2855 y F4(.)43 b F0(f)p F4(x)22 b F5(7)p FV(!)i F4(s)o
F0(g)p F4(t)2063 2867 y F1(1)2104 2855 y Gd(.)450 2973
y F7(Case)g Gd(T)o(-)t(A)t F6(P)t(P)r F7(:)134 b F4(t)23
b FY(=)g F4(t)1218 2985 y F1(1)1303 2973 y F4(t)1346
2985 y F1(2)1022 3073 y Gb(\000)6 b(;)17 b F4(x:S)22
b F5(`)h F4(t)1384 3085 y F1(1)1448 3073 y FF(:)g F4(T)1566
3085 y F1(2)1606 3073 y FV(!)p F4(T)1733 3085 y F1(1)1022
3172 y Gb(\000)6 b(;)17 b F4(x:S)22 b F5(`)h F4(t)1384
3184 y F1(2)1448 3172 y FF(:)g F4(T)1566 3184 y F1(2)1022
3272 y F4(T)g FY(=)g F4(T)1218 3284 y F1(2)450 3391 y
Gd(By)g(the)h(induction)g(hypothesis,)i Gb(\000)h F5(`)h
F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p F4(t)2006 3403
y F1(1)2074 3391 y FF(:)h F4(T)2197 3403 y F1(2)2238
3391 y FV(!)p F4(T)2364 3403 y F1(1)2428 3391 y Gd(and)23
b Gb(\000)28 b F5(`)g F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p
F0(g)p F4(t)3067 3403 y F1(2)3135 3391 y FF(:)h F4(T)3258
3403 y F1(2)3299 3391 y Gd(.)k(By)452 3491 y(T)o(-)t(A)t
F6(P)t(P)s Gd(,)20 b Gb(\000)j F5(`)g F0(f)p F4(x)f F5(7)p
FV(!)h F4(s)p F0(g)p F4(t)1186 3503 y F1(1)1270 3491
y F0(f)p F4(x)f F5(7)p FV(!)h F4(s)p F0(g)p F4(t)1583
3503 y F1(2)1646 3491 y FF(:)h F4(T)o Gd(,)d(i.e.,)f
Gb(\000)j F5(`)f F0(f)p F4(x)h F5(7)p FV(!)g F4(s)o F0(g)p
FY(\()p F4(t)2440 3503 y F1(1)2524 3491 y F4(t)2567 3503
y F1(2)2608 3491 y FY(\))g FF(:)h F4(T)o Gd(.)450 3609
y F7(Case)g Gd(T)o(-)t(T)t F6(R)t(U)t(E)t Gd(,)g(T)o(-)t(F)o
F6(A)t(L)t(S)t(E)r F7(:)134 b F4(t)23 b FY(=)f F4(0)1426
3709 y(T)h FY(=)f F4(Bool)450 3828 y Gd(Then)f F0(f)p
F4(x)h F5(7)p FV(!)h F4(s)p F0(g)p F4(t)f FY(=)h F4(0)p
Gd(,)d(and)g(the)h(desir)o(ed)f(r)o(esult,)g Gb(\000)j
F5(`)f F0(f)p F4(x)h F5(7)p FV(!)g F4(s)o F0(g)p F4(t)g
FF(:)g F4(T)o Gd(,)e(is)g(immediate.)450 3946 y F7(Case)j
Gd(T)o(-)t(I)t F6(F)r F7(:)134 b F4(t)23 b FY(=)g F4(if)42
b(t)1265 3958 y F1(1)1349 3946 y F4(then)g(t)1611 3958
y F1(2)1695 3946 y F4(else)g(t)1956 3958 y F1(3)938 4046
y Gb(\000)6 b(;)17 b F4(x:S)22 b F5(`)h F4(t)1300 4058
y F1(1)1364 4046 y FF(:)g F4(Bool)938 4145 y Gb(\000)6
b(;)17 b F4(x:S)22 b F5(`)h F4(t)1300 4157 y F1(2)1364
4145 y FF(:)g F4(T)938 4245 y Gb(\000)6 b(;)17 b F4(x:S)22
b F5(`)h F4(t)1300 4257 y F1(3)1364 4245 y FF(:)g F4(T)450
4362 y Gd(The)e(induction)g(hypothesis)i(yields)658 4504
y Gb(\000)f F5(`)h F0(f)p F4(x)f F5(7)p FV(!)i F4(s)o
F0(g)p F4(t)1112 4516 y F1(1)1176 4504 y FF(:)f F4(Bool)658
4603 y Gb(\000)f F5(`)h F0(f)p F4(x)f F5(7)p FV(!)i F4(s)o
F0(g)p F4(t)1112 4615 y F1(2)1176 4603 y FF(:)f F4(T)658
4703 y Gb(\000)f F5(`)h F0(f)p F4(x)f F5(7)p FV(!)i F4(s)o
F0(g)p F4(t)1112 4715 y F1(3)1176 4703 y FF(:)f F4(T)p
Gd(,)450 4844 y(fr)o(om)d(which)i(the)f(r)o(esult)f(follows)i(by)h(T)o
(-)t(I)t F6(F)r Gd(.)1553 b FZ(2)p eop
%%Page: 290 291
290 290 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(290)450 683 y Ge(Solution)28 b(to)i(7.4.1)m(1:)42
b Gd(The)30 b(term)g F4(\()p Gb(\025)p F4(x:Bool.)40
b Gb(\025)p F4(y:Bool.)h(y\))h(\(true)g(true\))28 b Gd(is)i(ill)h
(typed,)450 783 y(but)21 b(r)o(educes)e(to)i F4(\()p
Gb(\025)p F4(y:Bool.y\))l Gd(,)g(which)g(is)g(well)h(typed.)450
965 y Ge(Solution)d(to)i(9.4.1:)i Gd(Her)o(e)d(ar)o(e)f(the)i(most)h
(important)f(additions:)616 1123 y FT(type)40 b(term)g(=)773
1214 y(...)694 1306 y(|)g(TmLet)g(of)g(info)g(*)g(string)g(*)g(term)g
(*)f(term)616 1488 y(let)h(tmmap)g(onvar)h(=)694 1580
y(let)f(rec)g(walk)g(c)g(=)f(function)773 1671 y(...)694
1762 y(|)h(TmLet\(fi,x,t1,t2\))j FO(!)c FT(TmLet\(fi,x,walk)k(c)c
(t1,walk)i(\(c+1\))f(t2\))773 1854 y(...)616 2036 y(let)g(rec)g(eval1)g
(ctx)g(=)g(function)773 2128 y(...)694 2219 y(|)g(TmLet\(fi,x,v1,t2\))j
(when)d(\(isval)h(ctx)f(v1\))g FO(!)851 2310 y FT(tmsubstsnip)i(v1)e
(t2)694 2402 y(|)g(TmLet\(fi,x,t1,t2\))j FO(!)851 2493
y FT(let)d(t1')g(=)g(eval1)g(ctx)g(t1)g(in)851 2584 y(TmLet\(fi,)i(x,)d
(t1',)i(t2\))773 2676 y(...)616 2858 y(let)f(rec)g(typeof)g(ctx)g(t)g
(=)694 2950 y(match)h(t)e(with)773 3041 y(...)694 3132
y(|)h(TmLet\(fi,x,t1,t2\))j FO(!)812 3223 y FT(let)d(tyT1)g(=)g(typeof)
g(ctx)g(t1)g(in)812 3315 y(let)g(ctx')g(=)g(addbinding)h(ctx)f(x)g
(\(VarBind\(tyT1\)\))i(in)812 3406 y(\(typeof)f(ctx')f(t2\))575
3572 y Gd(For)21 b(the)h(sake)f(of)g(completeness,)h(her)o(e)e(ar)o(e)g
(the)i(additions)f(to)h(the)g(lexing,)f(parsing,)g(and)450
3672 y(printing)h(code.)j(In)c(the)g(parser)-6 b(,)19
b(we)i(add)f(two)h(tokens)616 3830 y FT(\045token)41
b(<Support.Error.info>)i(LET)616 3921 y(\045token)e
(<Support.Error.info>)i(IN)450 4087 y Gd(and)20 b(one)h(new)h(pr)o
(oduction)e(in)i(the)e F4(Term)g Gd(class:)616 4245 y
FT(Term)40 b(:)773 4336 y(...)694 4427 y(|)g(LET)g(LCID)g(EQ)g(Term)g
(IN)g(Term)891 4519 y(fun)g(ctx)f FO(!)g FT(TmLet\($1,)j($2.v,)e($4)g
(ctx,)g($6)g(\(addname)h(ctx)f($2.v\)\))694 4610 y(|)g(LET)g(USCORE)g
(EQ)g(Term)g(IN)g(Term)891 4701 y(fun)g(ctx)f FO(!)g
FT(TmLet\($1,)j("_",)e($4)g(ctx,)g($6)f(\(addname)i(ctx)f("_"\)\))450
4867 y Gd(In)21 b(the)g(lexer)-6 b(,)20 b(we)g(add)g(two)i(corr)o
(esponding)e(keywor)o(d)h(de\002nitions:)p eop
%%Page: 291 292
291 291 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(291)616 683 y FT(\("let",)41 b(fun)f(i)f
FO(!)g FT(Parser.LET)j(i\);)616 774 y(\("in",)f(fun)f(i)f
FO(!)g FT(Parser.IN)i(i\);)450 940 y Gd(In)21 b(the)g(printing)h(r)o
(outines,)e(we)h(add)f(one)h(new)g(clause:)616 1098 y
FT(let)40 b(rec)g(prtm_Term)h(outer)g(ctx)e(=)h(function)773
1189 y(...)694 1281 y(|)g(TmLet\(fi,)h(x,)f(t1,)g(t2\))g
FO(!)891 1372 y FT(obox0\(\);)891 1463 y(pr)f("let)h(";)g(pr)g(x;)g(pr)
f(")h(=)f(";)891 1555 y(prtm_Term)i(false)f(ctx)g(t1;)891
1646 y(print_space\(\);)891 1737 y(pr)f("in)h(";)891
1829 y(prtm_Term)h(false)f(\(addname)h(ctx)f(x\))g(t2;)891
1920 y(cbox\(\))450 2103 y Ge(Solution)19 b(to)i(9.6.1:)450
2269 y(T)-7 b(yped)20 b(record)g(patterns)1395 b FV(!)34
b FA(fg)g F4(let)f F7(pat)3146 2269 y
 gsave currentpoint translate 0 298838 7800 div 2396636 7800 div 595390
-7800 div box .9 setgray fill grestore
 3146 2269 a 16
w Ge(\(typed\))p 409 2351 9 36 v 418 2321 3000 6 v 3418
2321 38 6 v 3455 2351 9 36 v 450 2440 a F7(Pattern)20
b(typing)g(rules)1411 2582 y
 gsave currentpoint translate 0 419430 7800 div 4471157 7800 div 747110
-7800 div box .9 setgray fill grestore
 1411 2582 a 1435 2581 a
F5(`)j F4(x)f FF(:)i F4(T)e FV(\))h F4(x:T)3148 2582
y Gd(\()r(P)t(-)t(V)l F6(A)t(R)r Gd(\))845 2824 y
 gsave currentpoint translate 0 851966 7800 div 13398517 7800 div 1179646
-7800 div box .9 setgray fill grestore
 845
2824 a 1199 2768 a Gd(for)d(each)h Gb(i)105 b F5(`)23
b F4(p)1766 2780 y F1(i)1820 2768 y FF(:)h F4(T)1938
2780 y F1(i)1993 2768 y FV(\))f Gb(\001)2158 2780 y F1(i)p
879 2805 1630 4 v 879 2877 a F5(`)g F4({l)1040 2889 y
F1(i)1072 2877 y F4(=p)1159 2889 y F1(i)1200 2848 y FB(i)p
Fz(2)q FB(1)-10 b(:)g(:)g(n)1357 2877 y F4(})22 b FF(:)i
F4({k)1585 2889 y F1(j)1614 2877 y F4(:T)1702 2889 y
F1(j)1741 2848 y FB(j)p Fz(2)p FB(1)-10 b(:)g(:)g(m)1909
2877 y F4(})23 b FV(\))g Gb(\001)2141 2889 y F1(1)2181
2877 y Gb(;)37 b(:)14 b(:)g(:)g(;)23 b(\001)2457 2889
y F1(n)3142 2824 y Gd(\()r(P)t(-)t(R)t F6(C)t(D)s Gd(\))450
3057 y F7(New)e(typing)e(rules)p 3067 2974 383 4 v 3067
3082 4 108 v 2061 w Gb(\000)j F5(`)h F4(t)g FF(:)g F4(T)p
3447 3082 V 3067 3085 383 4 v 793 3183 a Gb(\000)g F5(`)g
F4(t)978 3195 y F1(1)1042 3183 y FF(:)g F4(T)1160 3195
y F1(1)1366 3183 y
 gsave currentpoint translate 0 270154 7800 div 5405846 7800 div 579629
-7800 div box .9 setgray fill grestore
 1366 3183 a 1382 3182 a F5(`)g F4(p)f
FF(:)i F4(T)1640 3194 y F1(1)1704 3182 y FV(\))f Gb(\001)2051
3183 y(\000)6 b(;)2142 3183 y
 gsave currentpoint translate 0 124518 7800 div 716492 7800 div 577638
-7800 div box .9 setgray fill grestore
 2142 3183 a 16 w Gb(\001)39
b F5(`)23 b F4(t)2373 3195 y F1(2)2437 3183 y FF(:)g
F4(T)2555 3195 y F1(2)p 793 3230 1803 4 v 1215 3310 a
Gb(\000)f F5(`)h F4(let)1531 3310 y
 gsave currentpoint translate 0 270154 7800 div 593097 7800 div 406686
-7800 div box .9 setgray fill grestore
 1531 3310 a 15 w
F4(p)16 b(=t)1693 3322 y F1(1)1777 3310 y F4(in)43 b(t)1951
3322 y F1(2)2015 3310 y FF(:)23 b F4(T)2133 3322 y F1(2)3168
3249 y Gd(\()r(T)o(-)t(L)t F6(E)t(T)q Gd(\))p 409 3378
9 36 v 418 3378 3000 6 v 3418 3378 38 6 v 3455 3378 9
36 v 450 3561 a Ge(Solution)c(to)i(1)m(1.2:)i Gd(Let)e
Gb(\026)g Gd(be)f(a)h(stor)o(e)f(with)h(a)g(single)g(location)h
F4(l)658 3727 y Gb(\026)106 b FY(=)g F4(l)22 b FY(=)h
Gb(\025)p F4(x:Unit.)41 b(\(!l\)\(x\))m Gb(;)450 3893
y Gd(and)18 b Gb(\000)g Gd(the)g(empty)g(context.)25
b(Then)18 b Gb(\026)h Gd(is)f(well)h(typed)e(with)i(r)o(espect)e(to)h
(both)h(of)f(the)h(following)450 3993 y(stor)o(e)h(typings:)1324
4159 y Gb(\006)1378 4171 y F1(1)1502 4159 y FY(=)83 b
F4(l)o(:Unit)p FV(!)n F4(Unit)1324 4258 y Gb(\006)1378
4270 y F1(2)1502 4258 y FY(=)g F4(l)o(:Unit)p FV(!)n
F4(\(Unit)p FV(!)n F4(Unit\))n Gb(:)p eop
%%Page: 292 293
292 292 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(292)450 683 y Ge(Solution)25 b(to)i(1)m(1.6:)36
b Gd(Ther)o(e)26 b(ar)o(e)g(well-typed)g(terms)h(in)h(this)g(system)f
(that)g(ar)o(e)f(not)h(str)o(ongly)450 783 y(normalizing.)f(For)21
b(example,)f(consider)h(the)g(following:)616 940 y FT(t1)40
b(=)f FM(\025)p FT(r:Ref)h(\(Unit)p FO(!)q FT(Unit\).)891
1032 y(\(r:=\()p FM(\025)p FT(x:Unit.)h(\(!r\)x\);)930
1123 y(\(!r\))f(unit\);)616 1214 y(t2)g(=)f(ref)h(\()p
FM(\025)p FT(x:Unit.)h(x\);)450 1380 y Gd(Applying)21
b F4(t1)f Gd(to)h F4(t2)f Gd(yields)h(a)f(\(well-typed\))g(diver)o
(gent)g(term.)450 1563 y Ge(Solution)29 b(to)i(12.1.2:)43
b F4(Top)30 b Gd(and)h F4({})f Gd(ar)o(e)f(similar)i(in)h(that)f(they)g
(ar)o(e)e(both,)34 b(in)d(some)h(sense,)450 1663 y(maximal)27
b(elements.)44 b(The)27 b(dif)o(fer)o(ence)e(is)i(that)g
F4({})f Gd(is)i(a)e(supertype)h(of)g(every)f(r)o(ecor)o(d)f(type,)450
1762 y(but)c(only)h(r)o(ecor)o(d)d(types,)h(while)i F4(Top)d
Gd(is)i(above)f(every)h(type,)f(including)i F4({})o Gd(.)450
1945 y Ge(Solution)d(to)i(12.1.3:)554 2111 y Gd(1.)41
b(I)20 b(count)i(six:)865 2310 y F4({a:Top,b:Top})865
2410 y({b:Top,a:Top})865 2510 y({a:Top})865 2609 y({b:Top})865
2709 y({})865 2808 y(Top)o Gb(:)554 3007 y Gd(2.)41 b(For)21
b(example,)e(let)865 3206 y F4(S)909 3218 y F1(0)1171
3206 y FY(=)83 b F4({})865 3306 y(S)909 3318 y F1(1)1088
3306 y FY(=)166 b F4({a:Top})865 3405 y(S)909 3417 y
F1(2)1088 3405 y FY(=)g F4({a:Top,b:Top})865 3505 y(S)909
3517 y F1(2)1088 3505 y FY(=)g F4({a:Top,b:Top,c:)o(To)o(p})865
3604 y Gb(etc:)554 3803 y Gd(3.)41 b(For)21 b(example,)e(let)865
4002 y F4(T)909 4014 y F1(0)1171 4002 y FY(=)83 b F4(S)1360
4014 y F1(0)1401 4002 y FV(!)p F4(Top)865 4102 y(T)909
4114 y F1(1)1088 4102 y FY(=)166 b F4(S)1360 4114 y F1(1)1401
4102 y FV(!)p F4(Top)865 4201 y(T)909 4213 y F1(2)1088
4201 y FY(=)g F4(S)1360 4213 y F1(2)1401 4201 y FV(!)p
F4(Top)865 4301 y Gb(etc:)p eop
%%Page: 293 294
293 293 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(293)450 683 y Ge(Solution)19 b(to)i(12.1.4:)554
837 y Gd(1.)41 b(No.)24 b(If)16 b(ther)o(e)f(wer)o(e,)i(it)f(would)h
(have)f(to)h(be)f(either)g(an)g(arr)o(ow)g(or)g(a)g(r)o(ecor)o(d)f
(\(it)h(obviously)658 937 y(can't)23 b(be)g F4(Top)o
Gd(\).)33 b(But)23 b(a)g(r)o(ecor)o(d)e(type)j(would)g(not)g(be)f(a)g
(subtype)g(of)h(any)f(of)g(the)h(arr)o(ow)658 1036 y(types,)c(and)g
(vice)h(versa.)554 1196 y(2.)41 b(No.)28 b(If)22 b(ther)o(e)f
F7(wer)o(e)h Gd(such)g(an)g(arr)o(ow)f(type)g F4(T)2058
1208 y F1(1)2098 1196 y FV(!)p F4(T)2225 1208 y F1(2)2266
1196 y Gd(,)g(its)i(domain)f(type)f F4(T)2950 1208 y
F1(1)3012 1196 y Gd(would)h(have)658 1296 y(to)h(be)g(a)g(subtype)g(of)
h(every)e(other)i(type)f F4(S)2016 1308 y F1(1)2056 1296
y Gd(;)i(but)e(we)g(have)g(just)h(seen)f(that)h(this)g(is)f(not)658
1396 y(possible.)450 1563 y Ge(Solution)f(to)h(12.1.5:)28
b Gd(Adding)23 b(this)g(r)o(ule)h(would)g(not)f(be)g(a)g(good)h(idea)e
(if)h(we)g(want)h(to)f(keep)450 1663 y(the)28 b(existing)g(untyped)g
(evaluation)g(semantics.)47 b(The)27 b(new)h(r)o(ule)g(would)h(allow)f
(us)g(to)g(de-)450 1763 y(rive,)e(for)g(example,)g(that)f
F4(Nat)p F5(\002)n F4(Bool)31 b FF(<)-17 b(:)33 b F4(Nat)o
Gd(,)26 b(which)h(would)f(mean)g(that)f(the)h(stuck)g(term)450
1862 y F4(\(succ)42 b(\(5,true\)\))21 b Gd(would)k(be)f(well)h(typed,)g
(violating)h(the)f(pr)o(ogr)o(ess)f(theor)o(em.)37 b(The)25
b(r)o(ule)450 1962 y(does)i(make)g(sense)h(in)g(a)f(\223coer)o(cion)f
(semantics\224)h(\(see)g(Section)h Ge(??)o Gd(\),)h(though)f(even)f
(ther)o(e)g(it)450 2061 y(raises)20 b(some)i(algorithmic)f(dif)o
(\002culties)g(for)f(subtype)h(checking.)450 2229 y Ge(Solution)e(to)i
(15.3.1:)450 2329 y(Lists:)616 2475 y FT(NatList)41 b(=)e
FM(\026)p FT(X.)h(<nil:Unit,)h(cons:{Nat,X}>;)616 2566
y(NatListBody)h(=)d(<nil:Unit,)j(cons:{Nat,NatList}>;)616
2748 y(nil)e(=)f(fold)i([NatList])g(\(<nil=unit>)h(as)d(NatListBody\);)
616 2931 y(cons)h(=)g FM(\025)p FT(n:Nat.)g FM(\025)p
FT(l:NatList.)h(fold)f([NatList])h(<cons={n,l}>)h(as)e(NatListBody;)616
3114 y(null)g(=)g FM(\025)p FT(l:NatList.)969 3205 y(case)g(unfold)h
([NatList])g(l)f(of)1048 3296 y(nil=u)g FO(\))f FT(true)969
3388 y(|)h(cons=p)g FO(\))f FT(false;)616 3570 y(hd)h(=)f
FM(\025)p FT(l:NatList.)891 3662 y(case)h(unfold)g([NatList])i(l)d(of)
969 3753 y(nil=u)h FO(\))f FT(0)891 3844 y(|)g(cons=p)i
FO(\))e FT(p.1;)616 4027 y(tl)h(=)f FM(\025)p FT(l:NatList.)891
4118 y(case)h(unfold)g([NatList])i(l)d(of)969 4210 y(nil=u)h
FO(\))f FT(l)891 4301 y(|)g(cons=p)i FO(\))e FT(p.2;)616
4484 y(plus)h(=)g(fix)g(\()p FM(\025)p FT(p:Nat)p FO(!)p
FT(Nat)p FO(!)q FT(Nat.)1165 4575 y FM(\025)p FT(m:Nat.)g
FM(\025)p FT(n:Nat.)1244 4666 y(if)f(iszero)i(m)e(then)i(n)e(else)h
(succ)g(\(p)g(\(pred)g(m\))g(n\)\);)450 4820 y Gd(\()p
F4(sumlist)18 b Gd(and)j F4(mylist)e Gd(look)k(exactly)e(the)g(same)h
(as)f(befor)o(e,)f(since)i(they)g(just)g(call)f(the)h(other)450
4920 y(functions)g(to)f(do)g(their)g(work.\))p eop
%%Page: 294 295
294 294 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(294)450 683 y Ge(Hungry)21 b(functions:)616
841 y FT(f)39 b(=)694 932 y(fix)773 1023 y(\()p FM(\025)p
FT(f:)h(Nat)p FO(!)p FT(Hungry.)812 1115 y FM(\025)p
FT(n:Nat.)891 1206 y(fold)g([Hungry])h(f\);)616 1297
y(ff)f(=)f(fold)h([Hungry])h(f;)616 1389 y(ff1)f(=)f(\(unfold)i
([Hungry])g(ff\))f(0;)616 1480 y(ff2)g(=)f(\(unfold)i([Hungry])g(ff1\))
f(2;)450 1646 y Ge(Fixed)19 b(points:)616 1804 y FT(fixedpoint)1006
1813 y FL(T)1091 1804 y FT(=)694 1895 y FM(\025)p FT(f:T)p
FO(!)q FT(T.)773 1986 y(\()p FM(\025)p FT(x:\()p FM(\026)p
FT(A.A)p FO(!)q FT(T\).)39 b(f)h(\(\(unfold)h([)p FM(\026)p
FT(A.A)p FO(!)p FT(T])f(x\))g(x\)\))773 2078 y(\(fold)g([)p
FM(\026)p FT(A.A)p FO(!)q FT(T])f(\()p FM(\025)p FT(x:\()p
FM(\026)p FT(A.A)p FO(!)q FT(T\).)h(f)f(\(\(unfold)i([)p
FM(\026)p FT(A.A)p FO(!)p FT(T])f(x\))g(x\)\)\);)616
2169 y(diverge)889 2178 y FL(T)974 2169 y FT(=)f FM(\025)p
FT(X.)g(fixedpoint)1601 2178 y FL(T)1687 2169 y FT(\()p
FM(\025)p FT(x:T.)h(x\);)450 2335 y Ge(Untyped)19 b(lambda-calculus:)
616 2493 y FT(D)39 b(=)h FM(\026)p FT(X.)f(X)p FO(!)p
FT(X;)616 2584 y(lam)h(=)f FM(\025)p FT(f:D)p FO(!)q
FT(D.)g(fold)h([D])g(f;)529 2708 y FS(I)616 2718 y FT(lam)g(:)f(\(D)p
FO(!)q FT(D\))g FO(!)g FT(D)616 2892 y(ap)h(=)f FM(\025)p
FT(f:D.)h FM(\025)p FT(a:D.)g(\(unfold)h([D])f(f\))f(a;)529
3032 y FS(I)616 3042 y FT(ap)h(:)f(D)h FO(!)f FT(D)g
FO(!)g FT(D)450 3225 y Ge(Objects:)616 3383 y FT(p)g(=)694
3474 y(let)h(create)h(=)773 3565 y(fix)851 3657 y(\()p
FM(\025)p FT(cr:)f({x:Nat})p FO(!)r FT(Counter.)930 3748
y FM(\025)p FT(s:)f({x:Nat}.)1008 3839 y(fold)h([Counter])1087
3931 y({get)g(=)f(s.x,)1126 4022 y(inc)h(=)f FM(\025)p
FT(_:Unit.)i(cr)f({x=succ\(s.x\)}}\))694 4113 y(in)773
4205 y(create)h({x=0};)616 4296 y(p1)f(=)f(\(unfold)i([Counter])g
(p\).inc)g(unit;)616 4387 y(\(unfold)g([Counter])g(p1\).get;)529
4511 y FS(I)616 4521 y FT(p)e(:)h(Counter)616 4612 y(\(\(unfold)h
([Counter])g(p1\).get\))g(:)f(Nat)p eop
%%Page: 295 296
295 295 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(295)450 683 y Ge(Solution)19 b(to)i(18.3.9:)i
Gd(Her)o(e)c(ar)o(e)h(the)h(algorithmic)g(constraint)h(generation)f(r)o
(ules:)1541 809 y Gb(\000)6 b FY(\()p F4(x)-6 b FY(\))23
b(=)g F4(T)p 1432 853 525 4 v 1432 932 a Gb(\000)g F5(`)1551
944 y F1(F)1614 932 y F4(x)g FF(:)g F4(T)g F0(j)1840
944 y F1(F)1903 932 y F0(fg)3089 872 y Gd(\()r(C)t(T)o(-)t(V)l
F6(A)t(R)r Gd(\))1024 1090 y Gb(\000)5 b(;)18 b F4(x)o(:S)23
b F5(`)1320 1102 y F1(F)1383 1090 y F4(t)1426 1102 y
F1(1)1490 1090 y FF(:)g F4(T)g F0(j)1649 1102 y F1(F)1692
1086 y Fz(0)1741 1090 y Gb(C)167 b F4(x)22 b F5(62)i
F7(dom)o FY(\()p Gb(\000)6 b FY(\))p 1024 1133 1341 4
v 1221 1213 a Gb(\000)23 b F5(`)1340 1225 y F1(F)1403
1213 y Gb(\025)p F4(x:S.t)1666 1225 y F1(1)1730 1213
y FF(:)g F4(S)p FV(!)p F4(T)f F0(j)2015 1225 y F1(F)2058
1209 y Fz(0)2108 1213 y Gb(C)3097 1152 y Gd(\()r(C)t(T)o(-)t(A)t
F6(B)t(S)q Gd(\))623 1370 y Gb(\000)h F5(`)742 1382 y
F1(F)805 1370 y F4(t)848 1382 y F1(1)912 1370 y FF(:)g
F4(T)1030 1382 y F1(1)1094 1370 y F0(j)1112 1382 y F1(F)1155
1366 y Fz(0)1204 1370 y Gb(C)1263 1382 y F1(1)1470 1370
y Gb(\000)g F5(`)1589 1382 y F1(F)1632 1366 y Fz(0)1681
1370 y F4(t)1725 1382 y F1(2)1788 1370 y FF(:)h F4(T)1906
1382 y F1(2)1970 1370 y F0(j)1988 1382 y F1(F)2031 1366
y Fz(00)2099 1370 y Gb(C)2158 1382 y F1(2)2365 1370 y
Gb(F)2414 1340 y FX(00)2479 1370 y FY(=)f F4(X)p Gb(;)g(F)2704
1340 y FX(000)p 623 1414 2143 4 v 921 1493 a Gb(\000)g
F5(`)1040 1505 y F1(F)1103 1493 y F4(t)1147 1505 y F1(1)1231
1493 y F4(t)1274 1505 y F1(2)1338 1493 y FF(:)g F4(X)g
F0(j)1497 1505 y F1(F)1540 1489 y Fz(000)1626 1493 y
Gb(C)1685 1505 y F1(1)1744 1493 y F5([)c Gb(C)1877 1505
y F1(2)1936 1493 y F5([)g F0(f)p F4(T)2080 1505 y F1(1)2144
1493 y FY(=)k F4(T)2273 1505 y F1(2)2314 1493 y FV(!)p
F4(X)o F0(g)3092 1433 y Gd(\()r(C)t(T)o(-)t(A)t F6(P)t(P)r
Gd(\))1388 1651 y Gb(\000)g F5(`)1507 1663 y F1(F)1570
1651 y F4(0)g FF(:)g F4(Nat)f F0(j)1883 1663 y F1(F)1947
1651 y F0(fg)3040 1652 y Gd(\()r(C)t(T)o(-)t(Z)t F6(E)t(R)t(O)s
Gd(\))1394 1809 y Gb(\000)h F5(`)1513 1821 y F1(F)1576
1809 y F4(t)1620 1821 y F1(1)1683 1809 y FF(:)h F4(T)e
F0(j)1842 1821 y F1(F)1885 1805 y Fz(0)1935 1809 y Gb(C)p
1027 1852 1334 4 v 1027 1932 a(\000)h F5(`)1146 1944
y F1(F)1209 1932 y F4(succ)42 b(t)1471 1944 y F1(1)1534
1932 y FF(:)24 b F4(Nat)d F0(j)1780 1944 y F1(F)1823
1928 y Fz(0)1873 1932 y Gb(C)e F5([)g F0(f)p F4(T)j FY(=)h
F4(Nat)n F0(g)3043 1871 y Gd(\()r(C)t(T)o(-)t(S)t F6(U)t(C)t(C)r
Gd(\))460 2090 y Gb(\000)g F5(`)579 2102 y F1(F)642 2090
y F4(t)686 2102 y F1(1)749 2090 y FF(:)h F4(T)867 2102
y F1(1)931 2090 y F0(j)949 2102 y F1(F)992 2085 y Fz(0)1041
2090 y Gb(C)1100 2102 y F1(1)1307 2090 y Gb(\000)f F5(`)1426
2102 y F1(F)1469 2085 y Fz(0)1519 2090 y F4(t)1562 2102
y F1(2)1626 2090 y FF(:)g F4(T)1744 2102 y F1(2)1807
2090 y F0(j)1825 2102 y F1(F)1868 2085 y Fz(00)1936 2090
y Gb(C)1995 2102 y F1(2)2202 2090 y Gb(\000)g F5(`)2321
2102 y F1(F)2364 2085 y Fz(00)2432 2090 y F4(t)2475 2102
y F1(3)2539 2090 y FF(:)g F4(T)2657 2102 y F1(3)2720
2090 y F0(j)2738 2102 y F1(F)2781 2085 y Fz(000)2867
2090 y Gb(C)2926 2102 y F1(3)892 2189 y Gb(C)959 2159
y FX(0)1006 2189 y FY(=)f Gb(C)1150 2201 y F1(1)1210
2189 y F5([)c Gb(C)1342 2201 y F1(2)1402 2189 y F5([)h
Gb(C)1535 2201 y F1(3)1594 2189 y F5([)g F0(f)p F4(T)1738
2201 y F1(1)1801 2189 y FY(=)k F4(Nat)o Gb(;)g F4(T)2108
2201 y F1(2)2171 2189 y FY(=)g F4(T)2301 2201 y F1(3)2341
2189 y FV(!)p F4(T)2468 2201 y F1(3)2508 2189 y F0(g)p
460 2232 2508 4 v 1069 2312 a Gb(\000)g F5(`)1188 2324
y F1(F)1251 2312 y F4(iter)42 b(T)h(t)1600 2324 y F1(1)1684
2312 y F4(t)1727 2324 y F1(2)1812 2312 y F4(t)1855 2324
y F1(3)1919 2312 y FF(:)23 b F4(T)2037 2324 y F1(3)2121
2312 y F0(j)2139 2324 y F1(F)2182 2308 y Fz(000)2268
2312 y Gb(C)2335 2282 y FX(0)3079 2251 y Gd(\()r(C)t(T)o(-)t(I)t
F6(T)t(E)t(R)r Gd(\))450 2436 y(The)16 b(equivalence)g(of)h(the)f
(original)h(r)o(ules)g(and)f(the)g(algorithmic)i(pr)o(esentation)e(can)
g(be)g(stated)450 2535 y(as)k(follows:)554 2701 y(1.)41
b(\(Soundness\))25 b(If)h Gb(\000)32 b F5(`)1345 2713
y F1(F)1418 2701 y F4(t)h FF(:)g F4(T)f F0(j)1673 2713
y F1(F)1716 2697 y Fz(0)1775 2701 y Gb(C)26 b Gd(and)g(the)g(variables)
f(mentioned)i(in)f Gb(\000)g Gd(and)f F4(t)h Gd(do)658
2801 y(not)21 b(appear)e(in)i Gb(F)p Gd(,)g(then)h Gb(\000)g
F5(`)h F4(t)g FF(:)g F4(T)g F0(j)1803 2816 y F1(F)1846
2799 y Fz(0)1868 2816 y FA(n)p F1(F)1968 2801 y Gb(C)p
Gd(.)554 2967 y(2.)41 b(\(Completeness\))27 b(If)f Gb(\000)35
b F5(`)f F4(t)h FF(:)g F4(T)f F0(j)1765 2979 y FX(X)1860
2967 y Gb(C)p Gd(,)29 b(then)e(ther)o(e)g(is)g(some)h(permutation)f
Gb(F)h Gd(of)f(the)658 3067 y(names)20 b(in)i F5(X)33
b Gd(such)21 b(that)g Gb(\000)i F5(`)1577 3079 y F1(F)1640
3067 y F4(t)f FF(:)i F4(T)e F0(j)1865 3082 y FX(;)1926
3067 y Gb(C)p Gd(.)450 3233 y(Both)h(parts)e(ar)o(e)g(pr)o(oved)g(by)h
(straightforwar)o(d)f(induction)i(on)g(derivations.)29
b(For)22 b(the)h(appli-)450 3332 y(cation)e(case)f(in)h(part)f(1,)g
(the)h(following)i(lemma)d(is)h(useful:)658 3498 y(If)29
b(the)g(type)h(variables)e(mentioned)i(in)g Gb(\000)g
Gd(and)f F4(t)g Gd(do)g(not)i(appear)d(in)i Gb(F)g Gd(and)f(if)658
3598 y Gb(\000)f F5(`)782 3610 y F1(F)852 3598 y F4(t)h
FF(:)g F4(T)g F0(j)1096 3610 y F1(F)1139 3594 y Fz(0)1194
3598 y Gb(C)p Gd(,)c(then)g(the)f(type)g(variables)f(mentioned)i(in)f
F4(T)g Gd(and)f Gb(C)i Gd(do)f(not)658 3698 y(appear)19
b(in)i Gb(F)1076 3667 y FX(0)1118 3698 y F0(n)d Gb(F)p
Gd(.)450 3864 y(For)j(the)g(same)f(case)h(in)g(part)f(2,)g(the)h
(following)h(lemma)f(is)g(used:)658 4030 y(If)h Gb(\000)27
b F5(`)859 4042 y F1(F)927 4030 y F4(t)g FF(:)g F4(T)g
F0(j)1165 4042 y F1(F)1208 4026 y Fz(0)1262 4030 y Gb(C)p
Gd(,)c(then)h Gb(\000)j F5(`)1675 4042 y F1(F)-5 b(;G)1813
4030 y F4(t)26 b FF(:)i F4(T)f F0(j)2051 4042 y F1(F)2094
4026 y Fz(0)2116 4042 y F1(;G)2223 4030 y Gb(C)p Gd(,)d(wher)o(e)e
Gb(G)h Gd(is)g(any)g(sequence)658 4129 y(of)d(fr)o(esh)g(variable)g
(names.)p eop
%%Page: 296 297
296 296 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(296)450 683 y Ge(Solution)21 b(to)h(18.3.10:)j
Gd(Repr)o(esenting)e(constraint)f(sets)h(as)f(lists)h(of)f(pairs)g(of)g
(types,)g(the)h(con-)450 783 y(straint)29 b(generation)f(algorithm)h
(is)g(a)f(dir)o(ect)g(transcription)h(of)f(the)h(infer)o(ence)e(r)o
(ules)i(given)450 882 y(above.)616 1040 y FT(let)40 b(rec)g(recon)g
(ctx)g(nextuvar)h(t)f(=)694 1131 y(match)h(t)e(with)851
1223 y(TmVar\(fi,i,_\))k FO(!)930 1314 y FT(let)d(tyS)g(=)f(gettype)i
(fi)f(ctx)g(i)f(in)930 1405 y(\(tyS,)h(nextuvar,)i([]\))773
1497 y(|)d(TmAbs\(fi,)j(x,)d(tyS,)i(t1\))e FO(!)930 1588
y FT(let)h(ctx')g(=)f(addbinding)j(ctx)e(x)f(\(VarBind\(tyS\)\))k(in)
930 1679 y(let)d(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx')g
(nextuvar)h(t1)f(in)930 1771 y(\(TyArr\(tyS,)i(tyT1\),)e(nextuvar1,)i
(constr1\))773 1862 y(|)d(TmApp\(fi,t1,t2\))k FO(!)930
1953 y FT(let)d(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx)g
(nextuvar)h(t1)f(in)930 2045 y(let)g(\(tyT2,nextuvar2,constr2\))k(=)c
(recon)g(ctx)g(nextuvar1)h(t2)f(in)930 2136 y(let)g
(NextUVar\(tyX,nextuvar'\))k(=)c(nextuvar2\(\))h(in)930
2227 y(let)f(newconstr)h(=)f([\(tyT1,TyArr\(tyT2,TyId\(tyX\)\)\)])46
b(in)930 2319 y(\(\(TyId\(tyX\)\),)c(nextuvar',)g(\(newconstr)80
b(constr1)g(constr2\)\))773 2410 y(|)39 b(TmZero\(fi\))j
FO(!)d FT(\(TyNat,)i(nextuvar,)g([]\))773 2501 y(|)e(TmSucc\(fi,t1\))k
FO(!)930 2593 y FT(let)d(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx)g
(nextuvar)h(t1)f(in)930 2684 y(\(TyNat,)h(nextuvar1,)g
([\(tyT1,TyNat\)]\))773 2775 y(|)e(TmPred\(fi,t1\))k
FO(!)930 2867 y FT(let)d(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx)g
(nextuvar)h(t1)f(in)930 2958 y(\(TyNat,)h(nextuvar1,)g
([\(tyT1,TyNat\)]\))773 3049 y(|)e(TmIsZero\(fi,t1\))k
FO(!)930 3140 y FT(let)d(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx)g
(nextuvar)h(t1)f(in)930 3232 y(\(TyBool,)h(nextuvar1,)g
([\(tyT1,TyNat\)]\))773 3323 y(|)e(TmTrue\(fi\))j FO(!)d
FT(\(TyBool,)i(nextuvar,)g([]\))773 3414 y(|)e(TmFalse\(fi\))j
FO(!)d FT(\(TyBool,)i(nextuvar,)g([]\))773 3506 y(|)e
(TmIf\(fi,t1,t2,t3\))44 b FO(!)930 3597 y FT(let)c
(\(tyT1,nextuvar1,constr1\))k(=)c(recon)g(ctx)g(nextuvar)h(t1)f(in)930
3688 y(let)g(\(tyT2,nextuvar2,constr2\))k(=)c(recon)g(ctx)g(nextuvar1)h
(t2)f(in)930 3780 y(let)g(\(tyT3,nextuvar3,constr3\))k(=)c(recon)g(ctx)
g(nextuvar2)h(t3)f(in)930 3871 y(let)g(newconstr)h(=)f
([\(tyT1,TyBool\);)i(\(tyT2,tyT3\)])g(in)930 3962 y(\(tyT3,)e
(nextuvar3,)i(List.concat)g([newconstr;)f(constr1;)g(constr2;)h
(constr3]\))p eop
%%Page: 297 298
297 297 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(297)450 683 y Ge(Solution)19 b(to)i(18.4.4:)699
829 y F0(f)p F4(X)h FY(=)h F4(Nat)o Gb(;)g F4(Y)g FY(=)f
F4(X)p FV(!)p F4(X)p F0(g)248 b(f)p F4(X)23 b F5(7)p
FV(!)g F4(Nat)n Gb(;)g F4(Y)g F5(7)p FV(!)g F4(Nat)p
FV(!)o F4(Nat)o F0(g)699 929 y(f)p F4(Nat)p FV(!)n F4(Nat)f
FY(=)h F4(X)p FV(!)p F4(Y)o F0(g)277 b(f)p F4(X)23 b
F5(7)p FV(!)g F4(Nat)n Gb(;)g F4(Y)g F5(7)p FV(!)g F4(Nat)o
F0(g)699 1028 y(f)p F4(X)p FV(!)o F4(Y)g FY(=)g F4(Y)p
FV(!)o F4(Z)p Gb(;)g F4(Z)g FY(=)g F4(U)p FV(!)o F4(W)p
F0(g)82 b(f)p F4(X)23 b F5(7)p FV(!)g F4(U)p FV(!)o F4(W)p
Gb(;)g F4(Y)g F5(7)p FV(!)g F4(U)p FV(!)o F4(W)p Gb(;)g
F4(Z)g F5(7)p FV(!)g F4(U)p FV(!)o F4(W)p F0(g)699 1128
y(f)p F4(Nat)e FY(=)i F4(Nat)p FV(!)o F4(Y)p F0(g)403
b Gd(Not)21 b(uni\002able)699 1227 y F0(f)p F4(Y)h FY(=)h
F4(Nat)p FV(!)o F4(Y)o F0(g)491 b Gd(Not)21 b(uni\002able)450
1410 y Ge(Solution)26 b(to)h(18.4.7:)36 b Gd(One)28 b(mor)o(e)f
(variant)g(of)g(substitution)i(is)f(needed)f(in)g(the)h(uni\002cation)
450 1510 y(function\227the)22 b(application)e(of)h(a)f(substitution)j
(to)e(all)f(the)h(types)g(in)g(some)h(constraint)f(set:)616
1667 y FT(let)40 b(substinconstr)i(tyX)e(tyT)g(constr)h(=)694
1759 y(List.map)773 1850 y(\(fun)f(\(tyS1,tyS2\))i FO(!)891
1941 y FT(\(substinty)f(tyX)f(tyT)g(tyS1,)g(substinty)i(tyX)e(tyT)f
(tyS2\)\))773 2033 y(constr)450 2199 y Gd(Also)21 b(cr)o(ucial)g(is)g
(the)g(\223occur)o(-check\224)d(that)j(detects)f(cir)o(cular)g
(dependencies:)616 2357 y FT(let)40 b(occursin)h(tyX)f(tyT)g(=)694
2448 y(let)g(rec)g(o)g(=)f(function)851 2539 y(TyArr\(tyT1,tyT2\))k
FO(!)c FT(o)h(tyT1)g(||)g(o)f(tyT2)773 2631 y(|)g(TyNat)i
FO(!)e FT(false)773 2722 y(|)g(TyBool)i FO(!)e FT(false)773
2813 y(|)g(TyId\(s\))i FO(!)e FT(\(s=tyX\))694 2905 y(in)h(o)g(tyT)450
3071 y Gd(The)16 b(uni\002cation)h(function)f(is)g(now)h(a)e(dir)o(ect)
g(transcription)h(of)g(the)g(r)o(ules)g(given)g(on)g(page)f(152.)450
3170 y(As)22 b(usual,)h(it)f(takes)g(a)g(\002le)h(position)h(and)e
(string)h(as)f(extra)f(ar)o(guments)h(to)h(be)f(used)g(in)h(print-)450
3270 y(ing)f(err)o(or)e(messages)i(when)f(uni\002cation)i(fails.)j
(\(This)c(pedagogical)e(version)i(of)f(the)h(uni\002er)450
3369 y(does)h(not)h(work)g(very)f(har)o(d)f(to)h(print)h(useful)f(err)o
(or)f(messages.)33 b(In)23 b(practice,)g(\223explaining\224)450
3469 y(type)j(err)o(ors)f(can)h(be)f(one)i(of)f(the)g(har)o(dest)f
(parts)g(of)h(engineering)h(a)f(pr)o(oduction)g(compiler)450
3569 y(for)21 b(a)f(language)g(with)i(type)e(r)o(econstr)o(uction.\))
616 3726 y FT(let)40 b(unify)g(fi)g(ctx)g(msg)g(constr)g(=)694
3818 y(let)g(rec)g(u)g(constr)g(=)773 3909 y(match)g(constr)h(with)851
4000 y([])f FO(!)930 4092 y FT([])773 4183 y(|)f(\(tyS,TyId\(tyX\)\))k
(::)d(rest)g FO(!)930 4274 y FT(if)g(tyS)f(=)h(TyId\(tyX\))h(then)1008
4366 y(u)f(rest)930 4457 y(else)g(if)g(occursin)h(tyX)f(tyS)g(then)1008
4548 y(error)h(fi)e(\(msg)i(^)e(":)h(circular)h(constraints"\))930
4640 y(else)1008 4731 y(List.append)h(\(u)e(\(substinconstr)i(tyX)e
(tyS)g(rest\)\))h([\(TyId\(tyX\),tyS\)])773 4822 y(|)e
(\(TyId\(tyX\),tyT\))k(::)d(rest)g FO(!)930 4914 y FT(if)g(tyT)f(=)h
(TyId\(tyX\))h(then)p eop
%%Page: 298 299
298 298 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(298)1008 683 y FT(u)40 b(rest)930 774
y(else)g(if)g(occursin)h(tyX)f(tyT)g(then)1008 866 y(error)h(fi)e
(\(msg)i(^)e(":)h(circular)h(constraints"\))930 957 y(else)1008
1048 y(List.append)h(\(u)e(\(substinconstr)i(tyX)e(tyT)g(rest\)\))h
([\(TyId\(tyX\),tyT\)])773 1140 y(|)e(\(TyNat,TyNat\))k(::)c(rest)h
FO(!)930 1231 y FT(u)f(rest)773 1322 y(|)g(\(TyBool,TyBool\))k(::)d
(rest)g FO(!)930 1414 y FT(u)f(rest)773 1505 y(|)g
(\(TyArr\(tyS1,tyS2\),TyArr\(tyT)q(1,tyT)q(2\)\))46 b(::)39
b(rest)h FO(!)930 1596 y FT(u)f(\(\(tyS1,tyT1\))j(::)e(\(tyS2,tyT2\))i
(::)d(rest\))773 1688 y(|)g(\(tyS,tyT\)::rest)k FO(!)930
1779 y FT(error)d(fi)g("Unsolvable)i(constraints")694
1870 y(in)773 1962 y(u)d(constr)450 2144 y Ge(Solution)21
b(to)h(18.5.6:)j Gd(Extending)e(the)f(type)g(r)o(econstr)o(uction)h
(algorithm)g(to)g(handle)f(r)o(ecor)o(ds)450 2244 y(is)j(not)h
(straightforwar)o(d,)e(though)j(it)e(can)f(be)h(done.)38
b(The)25 b(main)g(dif)o(\002culty)g(is)g(that)g(it)g(is)g(not)450
2343 y(clear)i(what)g(constraints)i(should)f(be)g(generated)e(for)i(a)f
(r)o(ecor)o(d)f(pr)o(ojection.)46 b(A)27 b(naive)h(\002rst)450
2443 y(attempt)20 b(would)i(be)1439 2569 y Gb(\000)h
F5(`)g F4(t)f FF(:)i F4(T)e F0(j)1806 2581 y FX(X)1889
2569 y Gb(C)p 1040 2613 1309 4 v 1040 2692 a(\000)h F5(`)g
F4(t.l)1312 2704 y F1(i)1367 2692 y FF(:)g F4(X)g F0(j)1526
2707 y FX(X)9 b([)p FA(f)p Gc(X)n FA(g)1734 2692 y Gb(C)18
b F5([)h F0(f)p F4(T)j FY(=)h F4({)p 2094 2687 5 41 v
4 w(l)2155 2704 y F1(i)2187 2692 y F4(:X)p 2289 2687
V 4 w(})n F0(g)450 2816 y Gd(but)i(this)h(is)g(not)g(satisfactory)-9
b(,)25 b(since)g(this)h(r)o(ule)g(says,)g(in)f(ef)o(fect,)g(that)g(the)
g(\002eld)g F4(l)3078 2828 y F1(i)3134 2816 y Gd(can)g(only)450
2916 y(be)20 b(pr)o(ojected)g(fr)o(om)h(a)f(r)o(ecor)o(d)f(containing)j
F7(just)f Gd(the)g(\002eld)f F4(l)2360 2928 y F1(i)2412
2916 y Gd(and)g(no)i(others.)575 3015 y(An)d(elegant)g(solution)i(was)e
(pr)o(oposed)g(by)h(W)-8 b(and)19 b([W)-8 b(an87)o(])19
b(and)g(further)g(developed)f(by)450 3115 y(W)-8 b(and)27
b([W)-8 b(an88)o(,)27 b(W)-8 b(an89)o(],)28 b(Remy)g([R)6
b(\264)-34 b(em89)o(,)27 b(R)6 b(\264)-34 b(em90)o(],)29
b(and)d(others.)45 b(W)-8 b(e)27 b(intr)o(oduce)g(a)g(new)450
3214 y(kind)19 b(of)h(uni\002cation)g(variable,)e(called)g(a)h
Ge(row)g(variable)p Gd(,)f(ranging)h(not)h(over)f(types)g(but)g(over)
450 3314 y(\223r)o(ows\224)29 b(of)g(\002eld)h(labels)f(and)h
(associated)f(types.)52 b(Using)30 b(r)o(ow)g(variables,)h(the)e
(constraint)450 3414 y(generation)21 b(r)o(ule)g(for)f(\002eld)h(pr)o
(ojection)g(can)g(be)f(written)1419 3540 y Gb(\000)j
F5(`)g F4(t)1604 3552 y F1(0)1668 3540 y FF(:)g F4(T)g
F0(j)1827 3552 y FX(X)1910 3540 y Gb(C)p 758 3583 1873
4 v 758 3663 a(\000)g F5(`)f F4(t)943 3675 y F1(0)983
3663 y F4(.l)1071 3675 y F1(i)1125 3663 y FF(:)h F4(X)g
F0(j)1284 3678 y FX(X)9 b([)p FA(f)p Gc(X)n F1(;\033;\032)p
FA(g)1618 3663 y Gb(C)19 b F5([)g F0(f)p F4(T)j FY(=)h
F4({)p 1978 3658 5 41 v 3 w Gb(\032)p 2055 3658 V 4 w
F4(})p Gb(;)h(\032)f FY(=)g F4(l)2334 3675 y F1(i)2365
3663 y F4(:X)18 b F5(\010)g Gb(\033)p F0(g)3064 3602
y Gd(\()r(C)t(T)o(-)t(P)t F6(R)t(O)t(J)s Gd(\))450 3786
y(wher)o(e)g Gb(\033)g Gd(and)g Gb(\032)h Gd(ar)o(e)e(r)o(ow)h
(variables)g(and)g(the)g(operator)g F5(\010)g Gd(combines)h(two)g(r)o
(ows)f(\(assuming)450 3886 y(that)i(their)f(\002elds)h(ar)o(e)e
(disjoint\).)26 b(That)20 b(is,)g(the)f(term)h F4(t.l)2251
3898 y F1(i)2302 3886 y Gd(has)f(type)h F4(X)f Gd(if)g
F4(t)g Gd(has)h(a)f(r)o(ecor)o(d)f(type)450 3986 y(with)k(\002elds)e
Gb(\032)p Gd(,)h(wher)o(e)g Gb(\032)g Gd(contains)g(the)g(\002eld)g
F4(l)1955 3998 y F1(i)1987 3986 y F4(:X)f Gd(and)g(some)h(other)g
(\002elds)g Gb(\033)p Gd(.)575 4085 y(The)f(constraints)h(generated)e
(by)h(this)h(r)o(e\002ned)e(algorithm)i(ar)o(e)e(mor)o(e)h(complicated)
g(than)450 4185 y(the)c(simple)g(sets)h(of)e(equations)i(between)f
(types)g(with)h(uni\002cation)g(variables)d(of)i(the)g(original)450
4285 y(r)o(econstr)o(uction)k(algorithm,)g(since)g(the)f(new)h
(constraint)g(sets)f(also)h(involve)g(the)f(associative)450
4384 y(and)k(commutative)h(operator)e F5(\010)p Gd(.)33
b(A)23 b(simple)h(form)f(of)g Ge(equational)e(uni\002cation)f
Gd(is)k(needed)450 4484 y(to)d(\002nd)g(solutions)i(to)e(such)g
(constraint)g(sets.)p eop
%%Page: 299 300
299 299 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(299)450 683 y Ge(Solution)19 b(to)i(22.2.3:)i
Gd(Just)e(one)g(additional)f(r)o(ule)h(is)g(needed:)1211
802 y Gb(\000)i F5(`)1298 783 y Fx(I)1365 802 y F4(b)g
FF(:)g F4(B)166 b Gb(\000)23 b F5(`)g F4(B)f FV(*)i F4(Bool)826
902 y Gb(\000)f F5(`)913 882 y Fx(I)981 902 y F4(t)1024
914 y F1(1)1088 902 y FF(:)g F4(T)1206 914 y F1(1)1412
902 y Gb(\000)g F5(`)1499 882 y Fx(I)1567 902 y F4(t)1610
914 y F1(2)1674 902 y FF(:)g F4(T)1792 914 y F1(2)1998
902 y Gb(\000)g F5(`)g F4(T)2183 914 y F1(1)2242 902
y F0(_)c F4(T)2369 914 y F1(2)2432 902 y FY(=)k F4(J)p
826 945 1736 4 v 1114 1024 a Gb(\000)f F5(`)1200 1005
y Fx(I)1268 1024 y F4(if)43 b(b)g(then)f(t)1747 1036
y F1(1)1831 1024 y F4(else)g(t)2093 1036 y F1(2)2157
1024 y FF(:)23 b F4(J)3011 964 y Gd(\()r(T)n(A)t(-)t(C)t
F6(O)t(N)t(D)r Gd(\))450 1148 y(wher)o(e)d(the)h(\002nal)g(pr)o(emise)f
(says)h(that)g F4(J)f Gd(is)h(a)f(join)i(of)f F4(T)2180
1160 y F1(1)2241 1148 y Gd(and)f F4(T)2446 1160 y F1(2)2507
1148 y Gd(in)h Gb(\000)6 b Gd(.)450 1331 y Ge(Solution)23
b(to)i(22.4.2:)30 b Gd(W)-8 b(e)25 b(begin)g(by)g(giving)g(a)f(pair)g
(of)h(algorithms)h(that,)f(when)g(pr)o(esented)450 1430
y(with)i Gb(\000)5 b Gd(,)21 b F4(S)p Gd(,)27 b(and)e
F4(T)p Gd(,)i(calculate)d(a)i(pair)f(of)h(types)g F4(J)f
Gd(and)h F4(M)o Gd(,)h(which)g(we)f(will)g(claim)g(ar)o(e)e(a)i(join)
450 1530 y(and)e(meet,)h(r)o(espectively)-9 b(,)23 b(of)i
F4(S)e Gd(and)h F4(T)p Gd(.)36 b(\(The)24 b(second)g(algorithm)h(may)g
(also)f(fail,)g(in)h(which)450 1630 y(case)20 b(we)h(claim)g(that)f
F4(S)h Gd(and)f F4(T)g Gd(have)h(no)g(meet)g(in)g Gb(\000)5
b Gd(.\))575 1729 y(W)-8 b(e)34 b(write)g Gb(\000)48
b F5(`)g F4(S)f F0(^)i F4(T)e FY(=)h F4(M)34 b Gd(for)g(\223)p
F4(M)f Gd(is)i(the)f(meet)g(of)g F4(S)g Gd(and)g F4(T)g
Gd(in)g(context)h Gb(\000)5 b Gd(\224)28 b(and)450 1829
y Gb(\000)41 b F5(`)h F4(S)f F0(_)g F4(T)h FY(=)f F4(J)30
b Gd(for)h(\223)p F4(J)e Gd(is)j(the)e(join)i(of)f F4(S)f
Gd(and)h F4(T)f Gd(in)h Gb(\000)6 b Gd(.\224)49 b(The)30
b(algorithms)i(ar)o(e)d(de\002ned)450 1929 y(simultaneously)c(as)f
(follows.)35 b(\(Note)24 b(that)g(some)g(of)g(the)g(cases)f(of)h(the)g
(de\002nition)h(overlap.)450 2028 y(Since)30 b(it)g(is)g(technically)h
(convenient)g(to)f(tr)o(eat)f(meet)h(and)f(join)j(as)d(functions)i
(rather)f(than)450 2128 y(r)o(elations,)20 b(we)h(stipulate)g(that)f
(the)h(\002rst)g(clause)g(that)f(applies)h(must)g(be)g(chosen.\))699
2745 y Gb(\000)i F5(`)g F4(S)f F0(^)i F4(T)82 b FY(=)1267
2226 y FV(8)1267 2301 y(>)1267 2326 y(>)1267 2350 y(>)1267
2375 y(>)1267 2400 y(>)1267 2425 y(>)1267 2450 y(>)1267
2475 y(>)1267 2500 y(>)1267 2525 y(>)1267 2550 y(>)1267
2575 y(>)1267 2600 y(>)1267 2624 y(>)1267 2649 y(<)1267
2799 y(>)1267 2824 y(>)1267 2849 y(>)1267 2874 y(>)1267
2898 y(>)1267 2923 y(>)1267 2948 y(>)1267 2973 y(>)1267
2998 y(>)1267 3023 y(>)1267 3048 y(>)1267 3073 y(>)1267
3098 y(>)1267 3123 y(>)1267 3147 y(:)1383 2296 y F4(S)346
b Gd(if)21 b Gb(\000)i F5(`)f F4(S)h FF(<)-17 b(:)24
b F4(T)1383 2395 y(T)346 b Gd(if)21 b Gb(\000)i F5(`)f
F4(T)h FF(<)-17 b(:)24 b F4(S)1383 2495 y(J)p FV(!)o
F4(M)220 b Gd(if)21 b F4(S)h FY(=)h F4(S)2042 2507 y
F1(1)2082 2495 y FV(!)p F4(S)2209 2507 y F1(2)1846 2595
y F4(T)f FY(=)h F4(T)2042 2607 y F1(1)2082 2595 y FV(!)p
F4(T)2209 2607 y F1(2)1846 2694 y Gb(\000)g F5(`)f F4(S)2031
2706 y F1(1)2095 2694 y F0(_)h F4(T)2226 2706 y F1(1)2289
2694 y FY(=)g F4(J)1846 2794 y Gb(\000)g F5(`)f F4(S)2031
2806 y F1(2)2095 2794 y F0(^)h F4(T)2226 2806 y F1(2)2289
2794 y FY(=)g F4(M)1383 2893 y F5(8)p F4(X<:U.M)79 b
Gd(if)21 b F4(S)h FY(=)h F5(8)p F4(X<:U.S)2306 2905 y
F1(2)1846 2993 y F4(T)f FY(=)h F5(8)p F4(X<:U.T)2306
3005 y F1(2)1846 3093 y Gb(\000)5 b(;)18 b F4(X<:U)j
F5(`)i F4(S)2251 3105 y F1(2)2315 3093 y F0(^)g F4(T)2446
3105 y F1(2)2510 3093 y FY(=)f F4(M)1383 3192 y F7(fail)284
b Gd(otherwise)699 3940 y Gb(\000)23 b F5(`)g F4(S)f
F0(_)i F4(T)82 b FY(=)1267 3322 y FV(8)1267 3397 y(>)1267
3421 y(>)1267 3446 y(>)1267 3471 y(>)1267 3496 y(>)1267
3521 y(>)1267 3546 y(>)1267 3571 y(>)1267 3596 y(>)1267
3621 y(>)1267 3646 y(>)1267 3671 y(>)1267 3695 y(>)1267
3720 y(>)1267 3745 y(>)1267 3770 y(>)1267 3795 y(>)1267
3820 y(>)1267 3845 y(<)1267 3994 y(>)1267 4019 y(>)1267
4044 y(>)1267 4069 y(>)1267 4094 y(>)1267 4119 y(>)1267
4144 y(>)1267 4169 y(>)1267 4194 y(>)1267 4218 y(>)1267
4243 y(>)1267 4268 y(>)1267 4293 y(>)1267 4318 y(>)1267
4343 y(>)1267 4368 y(>)1267 4393 y(>)1267 4418 y(>)1267
4443 y(:)1383 3392 y F4(T)346 b Gd(if)21 b Gb(\000)i
F5(`)f F4(S)h FF(<)-17 b(:)24 b F4(T)1383 3491 y(S)346
b Gd(if)21 b Gb(\000)i F5(`)f F4(T)h FF(<)-17 b(:)24
b F4(S)1383 3591 y(J)346 b Gd(if)21 b F4(S)h FY(=)h F4(X)e
Gd(with)g F4(X<:U)h F5(2)h Gb(\000)d Gd(and)h Gb(\000)i
F5(`)f F4(U)h F0(_)h F4(T)e FY(=)h F4(J)1383 3690 y(J)346
b Gd(if)21 b F4(T)h FY(=)h F4(X)e Gd(with)g F4(X<:U)h
F5(2)h Gb(\000)d Gd(and)h Gb(\000)i F5(`)f F4(S)h F0(_)h
F4(U)e FY(=)h F4(J)1383 3790 y(M)p FV(!)o F4(J)220 b
Gd(if)21 b F4(S)h FY(=)h F4(S)2042 3802 y F1(1)2082 3790
y FV(!)p F4(S)2209 3802 y F1(2)1846 3890 y F4(T)f FY(=)h
F4(T)2042 3902 y F1(1)2082 3890 y FV(!)p F4(T)2209 3902
y F1(2)1846 3989 y Gb(\000)g F5(`)f F4(S)2031 4001 y
F1(1)2095 3989 y F0(^)h F4(T)2226 4001 y F1(1)2289 3989
y FY(=)g F4(M)1846 4089 y Gb(\000)g F5(`)f F4(S)2031
4101 y F1(2)2095 4089 y F0(_)h F4(T)2226 4101 y F1(2)2289
4089 y FY(=)g F4(J)1383 4189 y F5(8)p F4(X<:U.J)79 b
Gd(if)21 b F4(S)h FY(=)h F5(8)p F4(X<:U.S)2306 4201 y
F1(2)1846 4288 y F4(T)f FY(=)h F5(8)p F4(X<:U.T)2306
4300 y F1(2)1846 4388 y Gb(\000)5 b(;)18 b F4(X<:U)j
F5(`)i F4(S)2251 4400 y F1(2)2315 4388 y F0(_)g F4(T)2446
4400 y F1(2)2510 4388 y FY(=)f F4(J)1383 4487 y(Top)258
b Gd(otherwise)450 4653 y(It)23 b(is)g(easy)g(to)g(check)g(that)g
F0(^)g Gd(and)f F0(_)h Gd(ar)o(e)f(total)h(functions:)31
b(for)22 b(every)g Gb(\000)6 b Gd(,)17 b F4(S)p Gd(,)23
b(and)g F4(T)o Gd(,)g(ther)o(e)f(ar)o(e)450 4752 y(unique)g(types)g
F4(M)f Gd(and)g F4(J)h Gd(such)g(that)f Gb(\000)k F5(`)f
F4(S)g F0(^)h F4(T)f FY(=)h F4(M)c Gd(and)g Gb(\000)j
F5(`)h F4(S)f F0(_)h F4(T)f FY(=)g F4(J)p Gd(:)j(just)22
b(note)g(that)g(the)450 4852 y(total)f(weight)g(of)g
F4(S)f Gd(and)h F4(T)f Gd(with)i(r)o(espect)d(to)i Gb(\000)g
Gd(is)g(always)g(r)o(educed)e(in)i(r)o(ecursive)e(calls.)p
eop
%%Page: 300 301
300 300 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(300)575 683 y(Now)23 b(let)g(us)g(verify)g(that)g
(these)g(de\002nitions)h(do)f(indeed)g(calculate)e(meets)j(and)e(joins)
j(in)450 783 y(the)30 b(subtype)g(r)o(elation.)53 b(The)30
b(ar)o(gument)g(into)g(two)h(parts:)44 b(Pr)o(oposition)31
b(A.5)e(shows)i(that)450 882 y(the)c(calculated)e(meet)i(is)g(a)f
(lower)h(bound)g(of)g F4(S)f Gd(and)g F4(T)g Gd(and)h(the)f(join)i(is)f
(an)g(upper)f(bound;)450 982 y(Pr)o(oposition)20 b(A.6)e(then)h(shows)i
(that)e(the)g(calculated)e(meet)i(is)h(gr)o(eater)d(than)i(every)g
(common)450 1082 y(lower)i(bound)g(of)g F4(S)f Gd(and)h
F4(T)f Gd(and)g(the)h(join)h(is)f(less)g(than)g(every)f(common)j(upper)
d(bound.)450 1264 y Ge(A.5)g(Proposition:)554 1430 y
Gd(1.)41 b(If)20 b Gb(\000)j F5(`)g F4(S)f F0(^)i F4(T)e
FY(=)h F4(M)p Gd(,)d(then)h Gb(\000)i F5(`)g F4(M)g FF(<)-17
b(:)24 b F4(S)c Gd(and)g Gb(\000)j F5(`)g F4(M)g FF(<)-17
b(:)24 b F4(T)o Gd(.)554 1596 y(2.)41 b(If)20 b Gb(\000)j
F5(`)g F4(S)f F0(_)i F4(T)e FY(=)h F4(J)p Gd(,)d(then)h
Gb(\000)i F5(`)g F4(S)g FF(<)-17 b(:)24 b F4(J)c Gd(and)g
Gb(\000)j F5(`)g F4(T)g FF(<)-17 b(:)24 b F4(J)o Gd(.)1018
b FZ(2)450 1779 y F7(Pr)o(oof:)66 b Gd(By)21 b(a)g(straightforwar)o(d)f
(induction)i(on)f(the)g(size)g(of)g(a)g(\223derivation\224)e(of)i
Gb(\000)j F5(`)f F4(S)g F0(^)h F4(T)f FY(=)450 1879 y
F4(M)e Gd(or)h Gb(\000)i F5(`)g F4(S)h F0(_)g F4(T)f
FY(=)g F4(J)d Gd(\(i.e.,)g(the)g(number)h(of)g(r)o(ecursive)e(calls)i
(to)g(the)f(de\002nitions)i(of)f F0(^)g Gd(and)f F0(_)450
1978 y Gd(needed)f(to)h(calculate)f F4(M)g Gd(or)h F4(J)o
Gd(\).)1963 b FZ(2)450 2161 y Ge(A.6)20 b(Proposition:)554
2327 y Gd(1.)41 b(Suppose)22 b(that)h Gb(\000)k F5(`)g
F4(S)g F0(^)h F4(T)f FY(=)g F4(M)c Gd(and,)g(for)f(some)i
F4(L)p Gd(,)f(that)g Gb(\000)k F5(`)g F4(L)g FF(<)-17
b(:)28 b F4(S)23 b Gd(and)f Gb(\000)28 b F5(`)f F4(L)f
FF(<)-17 b(:)29 b F4(T)o Gd(.)658 2426 y(Then)21 b Gb(\000)h
F5(`)h F4(L)g FF(<)-17 b(:)24 b F4(M)o Gd(.)554 2593
y(2.)41 b(Suppose)22 b(that)h Gb(\000)k F5(`)g F4(S)g
F0(_)h F4(T)f FY(=)g F4(J)c Gd(and,)g(for)f(some)i F4(U)p
Gd(,)f(that)g Gb(\000)k F5(`)g F4(S)g FF(<)-17 b(:)28
b F4(U)23 b Gd(and)f Gb(\000)28 b F5(`)f F4(T)f FF(<)-17
b(:)29 b F4(U)o Gd(.)658 2692 y(Then)21 b Gb(\000)h F5(`)h
F4(J)g FF(<)-17 b(:)24 b F4(U)o Gd(.)2147 b FZ(2)450
2875 y F7(Pr)o(oof:)66 b Gd(Simultaneously)-9 b(,)26
b(by)e(induction)h(on)f(the)g(total)h(size)e(of)h(derivations)g(of)g
Gb(\000)29 b F5(`)g F4(L)f FF(<)-17 b(:)30 b F4(S)450
2974 y Gd(and)20 b Gb(\000)j F5(`)g F4(L)g FF(<)-17 b(:)24
b F4(T)c Gd(\(for)g(part)g(1\))g(or)h Gb(\000)i F5(`)g
F4(S)f FF(<)-17 b(:)24 b F4(U)d Gd(and)f Gb(\000)j F5(`)g
F4(T)f FF(<)-17 b(:)24 b F4(U)d Gd(\(for)f(part)g(2\).)575
3074 y(In)27 b(both)i(parts,)f(let)g(us)g(deal)e(\002rst)i(with)g(the)g
(case)f(wher)o(e)g Gb(\000)36 b F5(`)f F4(S)g FF(<)-17
b(:)37 b F4(T)27 b Gd(or)h Gb(\000)35 b F5(`)h F4(T)f
FF(<)-17 b(:)37 b F4(S)o Gd(.)450 3174 y(If)26 b Gb(\000)33
b F5(`)g F4(S)g FF(<)-17 b(:)35 b F4(T)o Gd(,)28 b(then)f
Gb(\000)33 b F5(`)g F4(S)g F0(^)h F4(T)f FY(=)g F4(S)26
b Gd(and)g Gb(\000)33 b F5(`)g F4(S)g F0(_)h F4(T)f FY(=)g
F4(T)p Gd(.)42 b(But)26 b(then)h Gb(\000)33 b F5(`)g
F4(L)g FF(<)-17 b(:)35 b F4(M)25 b Gd(and)450 3273 y
Gb(\000)e F5(`)g F4(J)f FF(<)-17 b(:)24 b F4(U)d Gd(by)f(assumption.)27
b(Similarly)21 b(when)g Gb(\000)i F5(`)g F4(T)f FF(<)-17
b(:)24 b F4(S)p Gd(.)575 3373 y(T)-8 b(o)21 b(complete)g(the)h(pr)o
(oofs,)e(assume)h(that)g Gb(\000)j F5(`)f F4(S)h F5(6)9
b F4(<)-14 b(:)23 b(T)d Gd(and)h Gb(\000)i F5(`)h F4(T)f
F5(6)9 b F4(<)-14 b(:)23 b(S)e Gd(and)g(consider)g(the)450
3473 y(two)g(parts)g(of)f(the)h(pr)o(oposition)h(in)f(turn.)554
3639 y(1.)41 b(Consider)20 b(the)h(form)g(of)g F4(L)p
Gd(.)658 3796 y F7(Case:)135 b F4(L)22 b FY(=)h F4(Top)658
3921 y Gd(Then)e F4(S)h FY(=)h F4(Top)d Gd(and)g F4(T)j
FY(=)g F4(Top)o Gd(,)d(so)h Gb(\000)i F5(`)g F4(S)g FF(<)-17
b(:)24 b F4(T)c Gd(and)h(this)g(case)f(has)h(alr)o(eady)e(been)i(dealt)
658 4021 y(with.)658 4178 y F7(Case:)135 b F4(L)22 b
FY(=)h F4(X)658 4303 y Gd(If)e(either)h F4(S)f Gd(or)h
F4(T)f Gd(is)h(the)g(variable)f F4(X)p Gd(,)g(then)i(we)e(have)h
(either)f Gb(\000)k F5(`)g F4(S)f FF(<)-17 b(:)26 b F4(T)c
Gd(or)g Gb(\000)i F5(`)h F4(T)g FF(<)-17 b(:)26 b F4(S)o
Gd(;)658 4402 y(these)20 b(cases)h(have)f(alr)o(eady)f(been)h(dealt)g
(with.)658 4535 y(Otherwise,)31 b(by)f(the)f(inversion)i(lemma,)g(we)e
(have)g Gb(\000)39 b F5(`)g F4(U)g FF(<)-17 b(:)40 b
F4(S)29 b Gd(and)f Gb(\000)39 b F5(`)g F4(U)g FF(<)-17
b(:)40 b F4(T)o Gd(,)658 4635 y(wher)o(e)27 b F4(X<:U)34
b F5(2)j Gb(\000)6 b Gd(.)41 b(The)27 b(induction)i(hypothesis)h
(yields)e Gb(\000)36 b F5(`)g F4(U)f FF(<)-17 b(:)38
b F4(M)o Gd(,)30 b(fr)o(om)d(which)658 4734 y Gb(\000)22
b F5(`)h F4(X)g FF(<)-17 b(:)24 b F4(M)c Gd(follows)i(by)h(S)t(-)t(T)t
(V)l F6(A)t(R)f Gd(and)h(S)t(-)t(T)t F6(R)t(A)t(N)t(S)r
Gd(.)p eop
%%Page: 301 302
301 301 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(301)658 683 y F7(Case:)135 b F4(L)22
b FY(=)h F4(A)p FV(!)p F4(B)658 804 y Gd(First)f(note)g(that,)g(since)g
Gb(\000)j F5(`)g F4(S)g F5(6)9 b F4(<)-14 b(:)24 b(T)e
Gd(and)f Gb(\000)k F5(`)g F4(T)f F5(6)9 b F4(<)-14 b(:)25
b(S)p Gd(,)d(neither)g F4(S)f Gd(nor)h F4(T)g Gd(can)f(be)h
F4(Top)o Gd(,)f(so)658 904 y(the)f(only)i(r)o(emaining)f(case)f(is)h
(wher)o(e)865 1085 y F4(S)i FY(=)g F4(V)p FV(!)o F4(P)865
1184 y(T)g FY(=)g F4(W)p FV(!)o F4(Q)658 1364 y Gd(with)865
1546 y Gb(\000)g F5(`)g F4(V)f FF(<)-17 b(:)24 b F4(A)865
1645 y Gb(\000)f F5(`)g F4(B)f FF(<)-17 b(:)24 b F4(P)865
1745 y Gb(\000)f F5(`)g F4(W)f FF(<)-17 b(:)24 b F4(A)865
1844 y Gb(\000)f F5(`)g F4(B)f FF(<)-17 b(:)24 b F4(Q)p
Gb(:)658 2025 y Gd(Also,)c(by)h(the)g(de\002nition)h(of)f(meets,)f
F4(M)j FY(=)g F4(J)p FV(!)o F4(N)e Gd(with)865 2206 y
Gb(\000)i F5(`)g F4(V)f F0(_)i F4(W)e FY(=)h F4(J)865
2305 y Gb(\000)g F5(`)g F4(P)f F0(^)i F4(Q)e FY(=)h F4(N)p
Gb(:)658 2486 y Gd(Applying)e(the)g(induction)g(hypothesis,)h(we)f
(obtain)865 2667 y Gb(\000)i F5(`)g F4(J)f FF(<)-17 b(:)24
b F4(A)865 2766 y Gb(\000)f F5(`)g F4(B)f FF(<)-17 b(:)24
b F4(N)p Gb(;)658 2947 y Gd(fr)o(om)c(which)i Gb(\000)g
F5(`)h F4(L)g FF(<)-17 b(:)24 b F4(M)c Gd(follows)i(by)h(S)t(-)t(A)t
F6(R)t(R)t(O)t(W)s Gd(.)658 3097 y F7(Case:)135 b F4(L)22
b FY(=)h F5(8)p F4(X<:U.B)658 3218 y Gd(Similar)-6 b(.)554
3377 y(2.)41 b(First,)19 b(observe)f(that,)h(by)f(the)h(inversion)g
(lemma,)g(ther)o(e)f(ar)o(e)f(two)i(possibilities)h(for)e
F4(S)p Gd(\227)658 3476 y(either)25 b(it)i(is)f(a)f(variable)g(whose)i
(upper)e(bound)h(is)h(a)e(subtype)h(of)g F4(U)p Gd(,)h(or)f(else)g(its)
g(form)658 3576 y(depends)20 b(on)i(the)f(form)g(of)g
F4(U)o Gd(\227and)g(similarly)h(for)f F4(T)o Gd(.)26
b(Let)21 b(us)g(deal)f(\002rst)i(with)g(the)f(\002rst)658
3676 y(possibility)26 b(for)f(both)g F4(S)g Gd(and)f
F4(T)p Gd(,)i(leaving)f(the)g(str)o(uctural)g(cases)f(to)i(be)e
(consider)o(ed)h(in)658 3775 y(detail.)658 3904 y(If)e
F4(S)28 b FY(=)g F4(Y)23 b Gd(with)h Gb(\000)6 b FY(\()p
F4(Y)-6 b FY(\))29 b(=)f F4(R)23 b Gd(and)g Gb(\000)28
b F5(`)g F4(R)g FF(<)-17 b(:)30 b F4(U)o Gd(,)24 b(then,)h(by)e(the)h
(de\002nition)h(of)e F0(_)q Gd(,)h(we)f(have)658 4004
y Gb(\000)k F5(`)g F4(R)g F0(_)g F4(T)g FY(=)g F4(J)p
Gd(.)32 b(The)23 b(induction)h(hypothesis)h(now)e(yields)h
Gb(\000)j F5(`)g F4(J)g FF(<)-17 b(:)28 b F4(U)o Gd(,)c(and)e(we)h(ar)o
(e)658 4104 y(\002nished.)j(Similarly)21 b(if)f F4(T)g
Gd(is)i(a)e(variable)f(bounded)i(by)g F4(U)o Gd(.)658
4233 y(Now)g(suppose)g(that)g(the)g(forms)g(of)f F4(S)h
Gd(and)f F4(T)g Gd(depend)g(on)i(the)f(form)f(of)h F4(U)p
Gd(.)658 4383 y F7(Case:)135 b F4(U)22 b FY(=)h F4(Top)658
4504 y Gd(Immediate.)658 4655 y F7(Case:)135 b F4(U)22
b FY(=)h F4(X)658 4776 y Gd(By)h(the)h(inversion)g(lemma,)h(we)e(have)g
F4(S)30 b FY(=)g F4(X)24 b Gd(and)h F4(T)k FY(=)h F4(X)p
Gd(;)c(we)f(have)f(dealt)g(with)h(this)658 4875 y(case)20
b(alr)o(eady)-9 b(.)p eop
%%Page: 302 303
302 302 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(302)658 683 y F7(Case:)135 b F4(U)22
b FY(=)h F4(A)p FV(!)p F4(B)658 806 y Gd(Then)e(by)f(the)h(inversion)h
(lemma)f(we)g(have)865 1000 y F4(S)i FY(=)g F4(V)p FV(!)o
F4(P)865 1100 y(T)g FY(=)g F4(W)p FV(!)o F4(Q)658 1293
y Gd(with)865 1487 y Gb(\000)g F5(`)g F4(A)f FF(<)-17
b(:)24 b F4(V)865 1586 y Gb(\000)f F5(`)g F4(P)f FF(<)-17
b(:)24 b F4(B)865 1686 y Gb(\000)f F5(`)g F4(A)f FF(<)-17
b(:)24 b F4(W)865 1786 y Gb(\000)f F5(`)g F4(Q)f FF(<)-17
b(:)24 b F4(B)p Gb(:)658 1978 y Gd(The)c(r)o(est)g(of)h(the)g(ar)o
(gument)f(pr)o(oceeds)g(as)g(in)i(the)e(corr)o(esponding)h(case)f(in)i
(part)e(1.)658 2134 y F7(Case:)135 b F4(U)22 b FY(=)h
F5(8)p F4(X<:A.B)658 2257 y Gd(Similar)-6 b(.)2457 b
FZ(2)450 2435 y Ge(Solution)19 b(to)i(22.4.3:)554 2596
y Gd(1.)41 b(Using)21 b(the)g(inversion)g(lemma,)g(I)g(count)g(9)f
(common)j(subtypes)e(of)f F4(S)h Gd(and)f F4(T)p Gd(:)865
2790 y F5(8)p F4(X<:A)1093 2760 y FX(0)1116 2790 y FV(!)p
F4(B.)43 b(A)p FV(!)p F4(B)1508 2760 y FX(0)865 2890
y F5(8)p F4(X<:A)1093 2860 y FX(0)1116 2890 y FV(!)p
F4(B.)g(Top)p FV(!)o F4(B)1595 2860 y FX(0)865 2989 y
F5(8)p F4(X<:A)1093 2959 y FX(0)1116 2989 y FV(!)p F4(B.)g(X)865
3089 y F5(8)p F4(X<:A)1093 3059 y FX(0)1116 3089 y FV(!)p
F4(Top.)f(A)p FV(!)p F4(B)1595 3059 y FX(0)865 3189 y
F5(8)p F4(X<:A)1093 3159 y FX(0)1116 3189 y FV(!)p F4(Top.)g(Top)p
FV(!)o F4(B)1682 3159 y FX(0)865 3288 y F5(8)p F4(X<:A)1093
3258 y FX(0)1116 3288 y FV(!)p F4(Top.)g(X)865 3388 y
F5(8)p F4(X<:Top.)e(A)p FV(!)p F4(B)1438 3358 y FX(0)865
3488 y F5(8)p F4(X<:Top.)g(Top)p FV(!)o F4(B)1525 3457
y FX(0)865 3587 y F5(8)p F4(X<:Top.)g(X)p Gb(:)554 3780
y Gd(2.)h(Both)865 3974 y F5(8)p F4(X<:A)1093 3940 y
FX(0)1116 3974 y FV(!)p F4(B.)i(A)p FV(!)p F4(B)1508
3940 y FX(0)658 4168 y Gd(and)865 4362 y F5(8)p F4(X<:A)1093
4327 y FX(0)1116 4362 y FV(!)p F4(B.)g(X)658 4555 y Gd(ar)o(e)14
b(lower)i(bounds)g(for)g F4(S)g Gd(and)f F4(T)o Gd(,)i(but)f(these)g
(two)g(types)g(have)g(no)g(common)h(supertype)658 4655
y(that)j(is)h(also)g(a)g(subtype)f(of)h F4(S)f Gd(and)h
F4(T)o Gd(.)554 4819 y(3.)41 b(Consider)15 b F4(S)p FV(!)p
F4(Top)g Gd(and)g F4(T)p FV(!)p F4(Top)n Gd(.)24 b(\(Or)-6
b(,)16 b(if)g(you)g(like,)h F5(8)p F4(X<:A)2522 4789
y FX(0)2545 4819 y FV(!)p F4(B.)43 b(A)p FV(!)p F4(B)2937
4789 y FX(0)2976 4819 y Gd(and)15 b F5(8)p F4(X<:A)3360
4789 y FX(0)3383 4819 y FV(!)p F4(B.)43 b(X)p Gd(.\))p
eop
%%Page: 303 304
303 303 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)451
b Gd(A)t(.)25 b(S)t F6(O)t(L)t(U)t(T)t(I)t(O)t(N)t(S)g(T)s(O)g
Gd(S)t F6(E)t(L)t(E)t(C)t(T)t(E)t(D)e Gd(E)t F6(X)t(E)t(R)t(C)t(I)t(S)t
(E)t(S)454 b Gd(303)450 683 y Ge(Solution)15 b(to)h(??:)h
Gd(Note)f(that)h(the)g(two)g(kinds)g(of)g(quanti\002ers\227bounded)g
(and)f(unbounded\227)450 783 y(should)k(not)h(be)e(allowed)g(to)h(mix:)
25 b(ther)o(e)19 b(should)i(be)e(a)g(subtyping)h(r)o(ule)g(for)f
(comparing)h(two)450 882 y(bounded)26 b(quanti\002ers)h(and)e(another)h
(for)g(two)h(unbounded)f(quanti\002ers,)i(but)e(no)h(r)o(ule)f(for)450
982 y(comparing)d(a)g(bounded)g(to)h(an)e(unbounded)i(quanti\002er)-6
b(.)33 b(Otherwise)23 b(we'd)g(be)g(right)h(back)450
1082 y(wher)o(e)c(we)h(started!)554 1248 y(1.)41 b(See)19
b([KS92)o(])h(for)h(details.)554 1414 y(2.)41 b(No.)34
b(In)24 b(any)g(practical)f(language)g(with)i(subtyping,)g(we)f(will)g
(want)g(to)g(allow)g(width)658 1513 y(subtyping)h(on)g(r)o(ecor)o(d)e
(types.)36 b(But)25 b(the)f(empty)h(r)o(ecor)o(d)e(type)h(is)h(a)f
(kind)h(of)f(maximal)658 1613 y(type)31 b(\(among)i(r)o(ecor)o(d)d
(types\),)k(and)e(it)g(can)g(be)f(used)h(to)g(cause)g(diver)o(gence)e
(in)j(the)658 1712 y(subtype)20 b(checker)h(using)g(a)g(modi\002ed)g
(version)g(of)g(Ghelli's)g(example.)k(If)865 1912 y F4(T)e
FY(=)g F5(8)p F4([X<:{)p 1268 1907 5 41 v 1300 1907 V
5 w(})o(|])43 b F0(:)p F4({)p 1551 1907 V 3 w(a:)g F5(8)p
F4([Y<:X|])l F0(:)p F4(Y)p 2165 1907 V 4 w(})658 2111
y Gd(then)21 b(the)g(input)865 2310 y F4(X)909 2322 y
F1(0)949 2310 y F4(<:{)p 1066 2305 V 3 w(a:T)p 1230 2305
V 4 w(})g F5(`)i F4(X)1403 2322 y F1(0)1466 2310 y FF(<)-17
b(:)24 b F4({)p 1605 2305 V 4 w(a:)43 b F5(8)p F4([X)1887
2322 y F1(1)1928 2310 y F4(<:X)2058 2322 y F1(0)2099
2310 y F4(|])o F0(:)p F4(X)2286 2322 y F1(1)p 2341 2305
V 2331 2310 a F4(})658 2510 y Gd(will)29 b(cause)f(the)g(subtype)h
(checker)f(to)h(diver)o(ge.)48 b([Martin)27 b(Hofmann)i(helped)f(work)
658 2609 y(out)21 b(this)g(example.])p eop
%%Page: 304 305
304 304 bop 450 1306 a F3(Appendix)44 b(B)450 1721 y
Gk(Summary)52 b(of)g(Notation)450 2202 y Gj(B.1)119 b(Metavariable)28
b(Conventions)p 450 2306 3000 4 v 450 2405 4 100 v 505
2375 a Gd(I)t F6(N)d(T)t(E)t(X)t(T)448 b Gd(I)t F6(N)25
b Gd(M)t(L)g F6(C)t(O)t(D)t(E)679 b Gd(U)t F6(S)t(A)t(G)t(E)p
3447 2405 V 450 2409 3000 4 v 450 2429 V 450 2528 4 100
v 503 2498 a F4(p)p Gd(,)20 b F4(q)p Gd(,)g F4(r)p Gd(,)g
F4(s)p Gd(,)h F4(t)o Gd(,)g F4(u)269 b(s)p Gd(,)20 b
F4(t)1024 b Gd(terms)p 3447 2528 V 450 2628 V 503 2598
a F4(x)p Gd(,)20 b F4(y)p Gd(,)g F4(z)525 b(x)p Gd(,)20
b F4(y)1024 b Gd(term)20 b(variables)p 3447 2628 V 450
2727 V 503 2698 a F4(v)p Gd(,)g F4(w)610 b(v)p Gd(,)20
b F4(w)1024 b Gd(values)p 3447 2727 V 450 2827 V 503
2797 a F4(nv)651 b(nv)1065 b Gd(numeric)21 b(values)p
3447 2827 V 450 2927 V 503 2897 a F4(M)p Gd(,)f F4(N)p
Gd(,)g F4(P)p Gd(,)g F4(Q)p Gd(,)h F4(S)o Gd(,)g F4(T)o
Gd(,)g F4(U)o Gd(,)g F4(V)99 b(tyS)o Gd(,)20 b F4(tyT)849
b Gd(types)p 3447 2927 V 450 3026 V 503 2996 a F4(A)p
Gd(,)20 b F4(B)p Gd(,)g F4(C)525 b(tyA)o Gd(,)20 b F4(tyB)849
b Gd(base)20 b(types)p 3447 3026 V 450 3126 V 503 3096
a Gb(\013)p Gd(,)g Gb(\014)p Gd(,)h Gb(\015)p Gd(,)f
Gb(\016)412 b F4(alpha)n Gd(,)20 b F4(beta)718 b Gd(uni\002cation)21
b(variables)p 3447 3126 V 450 3226 V 503 3196 a F4(X)p
Gd(,)f F4(Y)p Gd(,)g F4(Z)525 b(tyX)o Gd(,)20 b F4(tyY)849
b Gd(type)20 b(variables)p 3447 3226 V 450 3325 V 503
3295 a F4(K)p Gd(,)g F4(L)610 b(kK)o Gd(,)21 b F4(kL)936
b Gd(kinds)p 3447 3325 V 450 3425 V 503 3395 a Gb(\000)6
b Gd(,)14 b Gb(\001)594 b F4(ctx)1021 b Gd(contexts)p
3447 3425 V 450 3524 V 1242 3495 a F4(fi)1065 b Gd(\002le)21
b(position)h(information)p 3447 3524 V 450 3624 V 503
3594 a F5(J)1836 b Gd(arbitrary)19 b(typing)j(statements)p
3447 3624 V 450 3627 3000 4 v 450 3858 a Gj(B.2)119 b(Rule)30
b(Naming)g(Conventions)p 450 3991 V 450 4090 4 100 v
505 4061 a Gd(P)t F6(R)t(E)t(FI)t(X)1574 b Gd(U)t F6(S)t(A)t(G)t(E)p
3447 4090 V 450 4094 3000 4 v 450 4114 V 450 4213 4 100
v 505 4183 a Gd(E)t(-)1743 b(evaluation)p 3447 4213 V
450 4313 V 505 4283 a(X)t(A)t(-)1670 b(exposur)o(e)p
3447 4313 V 450 4413 V 505 4383 a(K)t(-)1734 b(kinding)p
3447 4413 V 450 4512 V 505 4482 a(M)t(-)1715 b(matching)p
3447 4512 V 450 4612 V 505 4582 a(P)t(-)1744 b(pattern)20
b(typing)p 3447 4612 V 450 4711 V 505 4682 a(Q)t(-)1729
b(type)21 b(equivalence)p 3447 4711 V 450 4811 V 505
4781 a(Q)t(A)t(-)1660 b(algorithmic)21 b(type)g(equivalence)p
3447 4811 V 450 4814 3000 4 v 1888 5169 a(304)p eop
%%Page: 305 306
305 305 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)675
b Gd(B)t(.)25 b(S)t F6(U)t(M)t(M)t(A)t(R)r(Y)f(O)t(F)h
Gd(N)t F6(O)t(T)o(A)o(T)t(I)t(O)t(N)678 b Gd(305)p 450
603 3000 4 v 450 703 4 100 v 505 673 a(P)t F6(R)t(E)t(FI)t(X)1658
b Gd(U)t F6(S)t(A)t(G)t(E)p 3447 703 V 450 706 3000 4
v 450 806 4 100 v 505 776 a Gd(R)t(A)t(-)1754 b(algorithmic)22
b(type)e(r)o(eduction)p 3447 806 V 450 906 V 505 876
a(S)t(-)1834 b(subtyping)p 3447 906 V 450 1005 V 505
975 a(S)t(A)t(-)1765 b(algorithmic)22 b(subtyping)p 3447
1005 V 450 1105 V 505 1075 a(T)o(-)1832 b(typing)p 3447
1105 V 450 1204 V 505 1175 a(T)n(A)t(-)1764 b(algorithmic)22
b(typing)p 3447 1204 V 450 1208 3000 4 v eop
%%Page: 306 307
306 306 bop 450 1306 a F3(Appendix)44 b(C)450 1721 y
Gk(Suggestions)51 b(for)h(Larger)h(Projects)450 2177
y F7(These)21 b(need)g(to)f(be)i(cleaned)e(up,)h(and)f(I'd)g(like)h(to)
f(add)g(several)h(mor)o(e.)575 2277 y Gd(This)k(appendix)g(collects)h
(some)g(ideas)f(for)g(lar)o(ger)f(course)h(pr)o(ojects)g(based)g(on)h
(the)g(ma-)450 2376 y(terial)i(in)h(these)f(notes)h(and)f(on)h(the)g(r)
o(esear)o(ch)d(literatur)o(e)h(on)i(type)g(systems.)49
b(Most)28 b(of)h(the)450 2476 y(pr)o(ojects)21 b(involve)g(some)g
(additional)g(r)o(eading)e(and)i(some)g(implementation)h(work.)575
2575 y(The)i(suggestions)i(ar)o(e)d(r)o(oughly)j(categorized)d(into)i
(\223T\224)f([theor)o(etical])f(pr)o(ojects,)i(which)450
2675 y(ar)o(e)c(mor)o(e)i(open-ended)f(and)h(may)f(r)o(equir)o(e)g(mor)
o(e)h(r)o(eading,)f(thinking,)j(and)d(design)h(befor)o(e)450
2775 y(getting)e(started,)f(and)g(\223I\224)g([implementation])h(pr)o
(ojects,)f(which)i(ar)o(e)d(somewhat)i(mor)o(e)f(spe-)450
2874 y(ci\002c)h(and)g(involve)h(getting)f(down)h(to)g(implementation)g
(fairly)f(early)-9 b(.)25 b(This)d(does)f(not)h(mean)450
2974 y(that)f(the)h(\223T\224)e(pr)o(ojects)h(ar)o(e)f(better)h(\226)g
(or)g(even)g(har)o(der)-6 b(,)20 b(ultimately)h(\226)g(than)h
(\223I\224)e(pr)o(ojects,)h(but)450 3074 y(the)g(\223I\224)f(pr)o
(ojects)g(may)h(be)f(easier)g(to)i(get)e(started)g(on.)575
3173 y(One)j(note)g(on)h(the)f(implementation-oriented)g(pr)o(ojects.)
32 b(Y)-8 b(ou)24 b(should)g(feel)e(fr)o(ee)g(to)h(use)450
3273 y(any)d(pr)o(ogramming)h(language)f(you'r)o(e)g(comfortable)g
(with)h(for)f(building)h(pr)o(ojects)f(in...)25 b(but)450
3373 y(if)f(your)g(favorite)f(language)g(happens)h(to)g(be)f(C)h(or)g
(Pascal,)f(I)h(ur)o(ge)f(you)h(to)g(think)h(seriously)450
3472 y(about)20 b(learning)g(and)g(using)g(some)h(higher)o(-level)f
(language)f(with)i(built-in)f(garbage)f(collec-)450 3572
y(tion)k(and)e(facilities)g(for)h(high-level)g(symbol)g
(manipulation\227for)h(example,)e(ML,)f(Haskell,)450
3671 y(Scheme,)h(Modula)g(3,)g(or)h(even)f(Java.)1646
3641 y FK(1)1706 3671 y Gd(All)h(of)f(these)h(pr)o(ojects)f
F7(can)h Gd(be)f(done)h(in)g(Pascal,)f(C,)g(or)450 3771
y(C++,)g(but)g(you'll)g(spend)g(mor)o(e)g(time)g(than)g(you)g(can)f
(imagine)i(chasing)f(pointer)g(bugs.)450 4057 y Gj(C.1)120
b(Objects)554 4246 y Gd(1.)41 b([I])28 b(In)h(their)g(book,)j
F7(A)d(Theory)f(of)h(Objects)h Gd([AC96)n(])e(\(and)h(in)g(a)g(series)g
(of)g(earlier)f(arti-)658 4346 y(cles)16 b([AC94b)n(,)h(AC94a)n(,)g
(etc.]\),)f(Abadi)g(and)g(Car)o(delli)g(have)g(pr)o(oposed)g(a)h
(primitive)g(cal-)658 4445 y(culus)26 b(analogous)g(to)g(the)g
(lambda-calculus,)g(but)g(with)g(objects)h(\(rather)d(than)i(func-)658
4545 y(tions\))19 b(as)f(the)h(basic)f(terms)g(and)g(message)h(passing)
g(\(rather)e(than)i(application\))f(as)g(the)p 450 4598
1200 4 v 540 4654 a FJ(1)570 4678 y F6(An)f(object-oriented)f(language)
i(like)g(Java)g(will)h(pr)o(obably)f(be)f(somewhat)g(less)i(convenient)
d(than)h(a)h(language)450 4757 y(with)g(support)f(for)h(datatypes)f
(and)g(pattern)g(matching;)g(if)h(you)f(do)h(choose)g(an)f(OO)h
(language,)g(you)f(may)h(want)f(to)450 4835 y(str)o(uctur)o(e)g(your)g
(code)g(accor)o(ding)h(to)e(the)g(\223visitor)h(pattern\224)f([GHJV94)q
(,)g(FF98,)g(etc.].)1888 5169 y Gd(306)p eop
%%Page: 307 308
307 307 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)437
b Gd(C)t(.)24 b(S)t F6(U)t(G)t(G)t(E)t(S)t(T)t(I)t(O)t(N)t(S)h(F)t(O)t
(R)g Gd(L)t F6(A)t(R)t(G)t(E)t(R)g Gd(P)t F6(R)t(O)t(J)t(E)t(C)t(T)t(S)
439 b Gd(307)658 683 y(basic)29 b(mechanism)h(for)g(computation.)53
b(They)30 b(develop)f(several)g(type)h(systems)g(for)658
783 y(their)20 b(object-calculus)h(\(OC\).)f(Implement)h(one)g(or)g
(mor)o(e)g(of)g(these.)554 949 y(2.)41 b([T])28 b(Br)o(uce,)j(Car)o
(delli,)f(and)f(Pier)o(ce)f(wr)o(ote)h(a)g(paper)f([BCP99)o(])h
(comparing)h(four)f(dif-)658 1048 y(fer)o(ent)18 b(lambda-calculus)f
(encodings)j(of)g(objects\227the)f(\223existential)g(encoding\224)g(pr)
o(e-)658 1148 y(sented)j(in)h(Chapters)f(31)g(and)g Ge(??)o
Gd(,)h(the)g(\223r)o(ecursive)e(r)o(ecor)o(d\224)f(encoding)j
(mentioned)h(in)658 1248 y(Chapter)f(15,)h(and)g(two)h(other)-6
b(,)26 b(hybrid,)f(models)g(with)g(mor)o(e)f(r)o(e\002ned)g(pr)o
(operties.)35 b(A)658 1347 y(number)c(of)h(dif)o(fer)o(ent)e(points)j
(of)e(comparison)i(ar)o(e)d(addr)o(essed)g(in)i(the)g(paper)-6
b(,)33 b(but)658 1447 y(dif)o(fer)o(ent)18 b(encodings)k(of)f
F7(classes)g Gd(in)g(the)g(four)g(object)g(models)g(ar)o(e)f(not)h
(consider)o(ed.)702 1613 y(\(a\))40 b(Using)26 b(the)f(typechecker)g
(that)g(we've)g(used)g(for)g(exer)o(cises)f(and)h(for)g(the)g(exam-)840
1712 y(ples)c(in)g(the)g(notes,)g(implement)h(the)f(examples)f(in)h
([BCP99)o(].)697 1845 y(\(b\))41 b(Extend)22 b(these)g(examples)g(to)g
(include)g(encodings)h(of)f(classes)h(and)e(inheritance,)840
1945 y(following)29 b(Chapter)d(31)g(in)i(the)f(case)f(of)h(the)g
(existential)g(encoding)h(and)f(other)840 2045 y(papers)20
b(\(see)g(the)h(bibliography)g(of)g([BCP99)n(]\))f(for)h(the)g(other)g
(encodings.)707 2177 y(\(c\))40 b(Compar)o(e)20 b(and)g(contrast.)693
2310 y(\(d\))40 b(If)22 b(time)g(r)o(emains,)g(it)h(is)f(also)g(inter)o
(esting)h(to)f(compar)o(e)f(and)h(contrast)g(the)h F7(imper-)840
2410 y(ative)30 b Gd(variants)g(of)h(these)f(four)h(encodings\227i.e.,)
i(versions)e(of)f(the)h(encodings)840 2510 y(wher)o(e)20
b(the)h(instance)g(variables)f(of)h(objects)g(can)f(be)h(mutable)f
F4(Ref)g Gd(cells.)554 2676 y(3.)41 b([I])32 b(Chapter)g
Ge(??)h Gd(shows)h(how)g(to)f(do)g(some)h(simple)g(examples)e(of)h
(object-oriented)658 2775 y(pr)o(ogramming)18 b(in)g(F)1324
2787 y Gc(<)-11 b(:)1379 2775 y Gd(.)24 b(Using)19 b(the)f
F4(everything)13 b Gd(typechecker)18 b(fr)o(om)f(the)h(course)g(web)658
2875 y(dir)o(ectory)-9 b(,)24 b(develop)g(a)g(mor)o(e)g(signi\002cant)i
(object-oriented)e(pr)o(ogram)g(following)i(the)658 2974
y(same)20 b(lines.)702 3140 y(\(a\))40 b(T)-8 b(o)18
b(get)f(started,)f(implement)i(a)e(gr)o(oup)h(of)g F7(collection)f
(classes)i Gd(\(for)e(example,)h(using)840 3240 y(the)28
b(collection)h(classes)f(of)g(Smalltalk)g([GR83])f(as)h(a)g(model\).)47
b(Some)28 b(hints)h(for)840 3340 y(how)22 b(to)f(do)g(this)g(can)g(be)f
(found)h(in)g([PT94)o(].)697 3473 y(\(b\))41 b(Use)21
b(these)g(classes)g(as)g(a)g(library)g(to)g(implement)h(a)f(lar)o(ger)f
(object-oriented)h(pr)o(o-)840 3572 y(gram)g(of)f(your)i(choice.)450
3858 y Gj(C.2)120 b(Encodings)31 b(of)e(Logics)554 4047
y Gd(1.)41 b([I])19 b(The)h F7(Logical)g(Framework)g
Gd(of)h(Harper)-6 b(,)18 b(Honsell,)k(and)d(Plotkin)j([HHP92)o(])e(is)h
(a)e(typed)658 4147 y(lambda-calculus)24 b(intended)h(as)g(a)g
(meta-language)f(for)h(de\002ning)h(logics)g(and)f(pr)o(ov-)658
4246 y(ing)c(theor)o(ems)g(in)g(them.)702 4412 y(\(a\))40
b(Implement)22 b(LF)697 4545 y(\(b\))41 b(Use)31 b(your)g
(implementation)h(to)g(encode)f(a)f(simple)i(pr)o(opositional)g(logic)f
(and)840 4645 y(pr)o(ove)20 b(some)i(small)f(theor)o(ems.)554
4811 y(2.)41 b([T])21 b(A)h(generalization)g(of)g(the)g(LF)h(logic)g
(has)f(been)g(used)g(as)g(the)g(cor)o(e)g(of)g(Frank)g(Pfen-)658
4911 y(ning's)g(logic)f(pr)o(ogramming)g(language)f(ELF)h([Pfe89)n(,)f
(Pfe91)o(,)h(Pfe94)n(,)g(Pfe96)n(].)p eop
%%Page: 308 309
308 308 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)437
b Gd(C)t(.)24 b(S)t F6(U)t(G)t(G)t(E)t(S)t(T)t(I)t(O)t(N)t(S)h(F)t(O)t
(R)g Gd(L)t F6(A)t(R)t(G)t(E)t(R)g Gd(P)t F6(R)t(O)t(J)t(E)t(C)t(T)t(S)
439 b Gd(308)702 683 y(\(a\))40 b(Download)22 b(and)e(install)h(the)g
(ELF)g(system.)697 812 y(\(b\))41 b(Use)16 b(it)g(to)g(encode)g(the)g
(syntax)g(and)f(typing)i(r)o(ules)f(of)g(the)g(simply)h(typed)e
(lambda-)840 911 y(calculus)i(with)g(subtyping)h(and)e(pr)o(ove)g(some)
h(simple)g(theor)o(ems)g(about)f(the)h(sys-)840 1011
y(tem,)k(along)g(the)g(lines)g(of)g([MP91)n(].)450 1295
y Gj(C.3)120 b(T)-11 b(ype)30 b(Inference)554 1484 y
Gd(1.)41 b([T])18 b(Implement)i(a)f(type)h(infer)o(ence)e(system)i(for)
f(the)h(simply)g(typed)f(lambda-calculus)658 1583 y(\(or)31
b(ML\))f(with)j(subtyping.)58 b(\(The)32 b(literatur)o(e)e(on)i(appr)o
(oaches)e(to)i(this)g(pr)o(oblem)g(is)658 1683 y(huge.)25
b(See)20 b([Pot97)o(,)h(Pot98],)f(for)g(example.\))554
1845 y(2.)41 b([I])20 b F7(Row)h(variables)p Gd(,)g(pr)o(oposed)f(by)h
(Mitch)f(W)-8 b(and)21 b([W)-8 b(an87)o(,)21 b(W)-8 b(an88)o(,)20
b(W)-8 b(an89)o(])21 b(and)f(sub-)658 1944 y(sequently)25
b(r)o(e\002ned)f(by)h(Didier)g(Remy)g([R)6 b(\264)-34
b(em89)o(,)25 b(R)6 b(\264)-34 b(em90)o(,)25 b(R)-5 b(V97],)25
b(pr)o(ovide)f(an)h(alter)o(-)658 2044 y(native)31 b(to)h(subtyping)g
(as)f(a)g(foundation)h(for)f(object-oriented)h(pr)o(ogramming)f(lan-)
658 2144 y(guages,)24 b(and)g(can)f(coexist)h(smoothly)i(with)f
(ML-style)e(type)h(infer)o(ence.)34 b(Implement)658 2243
y(a)20 b(type)g(system)i(with)f(type)g(infer)o(ence)f(and)g(r)o(ow)h
(variables.)450 2527 y Gj(C.4)120 b(Other)28 b(T)-11
b(ype)30 b(Systems)554 2716 y Gd(1.)41 b([T])24 b(Implement)h(a)f
(lambda-calculus)g(with)i(intersection)f(types)g([Rey88)o(,)g(Pie97)o
(])g(\(or)-6 b(,)658 2816 y(for)33 b(a)h(bit)g(mor)o(e)g(challenge,)j
(with)e(both)g(intersection)g(and)e(union)i(types)g([Pie91b)n(,)658
2915 y(Pie90)o(,)20 b(BDCd95)o(,)g(Hay91)o(]\).)554 3077
y(2.)41 b([T])22 b(Implement)i(a)f F7(linear)h Gd(type)f(system)h(for)f
(the)g(lambda-calculus)f([W)-8 b(ad91)o(,)23 b(W)-8 b(ad90)n(,)658
3177 y(TWM95)n(].)554 3339 y(3.)41 b([I])15 b(Implement)h(a)f
F7(typed)f(assembly)j(language)e Gd(in)h(the)g(style)g(of)g(Morrisett)f
(and)h(co-workers)g([MWCG98)n(,)658 3438 y(MCGW98)n(,)21
b(MCG)1267 3408 y F2(+)1322 3438 y Gd(99)o(].)554 3600
y(4.)41 b([T])15 b(A)h(gr)o(eat)g(variety)g(of)g(type)h(systems)g(for)f
F7(extensible)i(r)o(ecords)p Gd(,)f(developed)e(by)i(various)658
3700 y(r)o(esear)o(chers,)k(ar)o(e)g(summarized)h(and)h(uni\002ed)g(in)
h(Car)o(delli)d(and)i(Mitchell's)g(encyclo-)658 3799
y(pedic)k(article,)i F7(Operations)e(on)h(Records)g Gd([CM91)n(].)47
b(Implement)28 b(a)g(simple)g(variant)f(of)658 3899 y(their)20
b(system.)554 4061 y(5.)41 b([I])27 b F7(Effect)h(type)f(systems)i
Gd([JG91)n(,)g(TJ92)n(],)h(which)f(track)f(the)g(computational)h(ef)o
(fects)e(of)658 4160 y(functions)33 b(\(memory)g(r)o(eads)f(and)g
(writes,)k(allocation,)g(etc.\))61 b(in)33 b(addition)g(to)g(their)658
4260 y(input-output)c(behavior)-6 b(,)31 b(have)e(been)g(used)g(for)g
(a)g(variety)f(of)i(purposes.)51 b(Per)o(haps)658 4360
y(most)34 b(surprisingly)-9 b(,)37 b(T)-8 b(ofte)33 b(and)g(his)h
(co-workers)f(have)g(used)g(\223r)o(egion)g(infer)o(ence\224)658
4459 y(techniques)16 b(to)h(build)e(an)h(ML)f(compiler)h(that)g(r)o
(uns)g(without)h(a)e(garbage)g(collector)h([TT97)o(,)658
4559 y(TB98)n(].)25 b(Implement)d(a)e(simple)h(ef)o(fect)e(infer)o
(ence)h(algorithm.)554 4721 y(6.)41 b([T])33 b(Harper)g(and)g
(Lillibridge)h([HL94)n(])g(and)g(Ler)o(oy)f([Ler96)n(])g(have)h
(independently)658 4820 y(pr)o(oposed)e(similar)h(accounts)f(of)h
F7(modules)f Gd(\(in)h(the)g(style)g(of)g(ML\))e(using)j(the)e(type-)
658 4920 y(theor)o(etic)25 b(tools)i(of)f(existential)g(types)g(and)f
(\(a)g(limited)h(form)g(of\))g(dependent)f(types.)p eop
%%Page: 309 310
309 309 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)437
b Gd(C)t(.)24 b(S)t F6(U)t(G)t(G)t(E)t(S)t(T)t(I)t(O)t(N)t(S)h(F)t(O)t
(R)g Gd(L)t F6(A)t(R)t(G)t(E)t(R)g Gd(P)t F6(R)t(O)t(J)t(E)t(C)t(T)t(S)
439 b Gd(309)658 683 y(These)15 b(accounts)h(place)f(powerful)h(module)
g(systems)h(like)f(those)g(of)g(Standar)o(d)d(ML)i([MTH90)o(])658
783 y(and)28 b(Objective)h(Caml)g([Ler95)m(])g(on)g(a)g
(well-understood)g(and)f(tractable)g(theor)o(etical)658
882 y(foundation.)e(Read)20 b(and)g(implement)i(one)f(of)f(these)h
(papers.)554 1048 y(7.)41 b([I])15 b(A)h(series)h(of)f(papers)g
([ACPP91)n(,)g(LM91)o(,)g(ACPR95)o(])g(have)g(pr)o(oposed)g(adding)g(a)
g(type)658 1148 y F4(Dynamic)g Gd(to)k(statically)f(typed)g(languages,)
g(in)h(or)o(der)e(to)i(pr)o(ovide)e(a)h(smooth)i(interface)658
1248 y(between)f(statically)h(typed)f(and)g(dynamically)h(typed)g
(data.)702 1414 y(\(a\))40 b(Add)15 b F4(Dynamic)e Gd(to)j(the)g
(implementation)h(of)f(the)g(simply)g(typed)g(lambda-calculus,)840
1513 y(following)22 b([ACPP91)o(].)697 1646 y(\(b\))41
b(Extend)23 b(this)g(implementation)h(to)f(System)g(F)g(\(or)g(even)g
(Fomega\),)g(using)h(ideas)840 1746 y(in)d([ACPR95)o(])g(and)f(your)h
(own)h(cr)o(eativity)-9 b(.)450 2031 y Gj(C.5)120 b(Sources)29
b(for)h(Additional)f(Ideas)450 2221 y Gd(The)f(r)o(esear)o(ch)d
(literatur)o(e)i(is)h(full)g(of)f(descriptions)i(of)e(inter)o(esting)h
(type)g(systems)h(and)e(ap-)450 2320 y(plications)37
b(of)f(type)g(systems.)73 b(The)37 b(pr)o(emier)e(confer)o(ence)g(in)i
(the)f(ar)o(ea)f(is)h F7(Principles)h(of)450 2420 y(Pr)o(ogramming)25
b(Languages)i(\(POPL\))p Gd(.)e(Other)i(confer)o(ences)f(with)i(a)f
(high)h(density)f(of)g(papers)450 2519 y(on)22 b(type)f(systems)h
(include)g F7(International)f(Confer)o(ence)h(on)f(Functional)h(Pr)o
(ogramming)d(\(ICFP\))p Gd(,)450 2619 y F7(T)-8 b(yped)26
b(Lambda)g(Calculi)h(and)g(Applications)f(\(TLCA\))p
Gd(,)g F7(Theor)o(etical)g(Aspects)g(of)h(Computer)g(Soft-)450
2719 y(war)o(e)16 b(\(T)-8 b(ACS\))p Gd(,)15 b F7(Logic)g(in)h
(Computer)g(Science)g(\(LICS\))p Gd(,)f(\(among)h(many)g(others\).)24
b(Lea\002ng)16 b(thr)o(ough)450 2818 y(a)28 b(r)o(ecent)f(pr)o
(oceedings)h(of)g(any)g(of)g(these)h(confer)o(ences)e(should)i(yield)f
(several)g(papers)f(in-)450 2918 y(volving)d(type)f(systems.)34
b(Pick)24 b(one,)g(r)o(ead)e(it)h(car)o(efully)-9 b(,)22
b(and)h(build)h(a)e(simple)i(implementa-)450 3018 y(tion)e(of)e(the)h
(system)h(it)f(describes.)p eop
%%Page: 310 311
310 310 bop 450 1306 a F3(Appendix)44 b(D)450 1721 y
Gk(Bluf)l(fers)53 b(Guide)f(to)f(OCaml)450 2153 y Gd(The)35
b(systems)i(discussed)e(in)h(the)f(text)g(have)g(all)g(been)g
(implemented)h(in)f(the)h(Objective)450 2252 y(CAML)27
b(dialect)h(of)g(ML.)g(An)g(excellent)h(compiler)f(for)h(this)g
(language)f(is)h(fr)o(eely)e(available)450 2352 y(fr)o(om)20
b(INRIA.)575 2451 y(Students)31 b(who)i(want)f(to)g(undertake)g(the)g
(implementation)h(exer)o(cises)d(suggested)j(in)450 2551
y(many)22 b(chapters)f(will)h(need)f(to)h(pick)f(up)h(the)f(basics)h
(of)f(OCaml)h(pr)o(ogramming,)f(if)h(they)f(ar)o(e)450
2651 y(not)c(alr)o(eady)e(familiar)g(with)i(it.)25 b(For)16
b(pr)o(ogrammers)g(alr)o(eady)f(familiar)g(with)i(another)g(dialect)450
2750 y(of)22 b(ML)g(\(e.g.)30 b(Standar)o(d)20 b(ML\),)h(the)i(brief,)e
(but)i(excellent,)f(tutorial)h(in)f(the)h(OCaml)g(r)o(efer)o(ence)450
2850 y(manual)i(will)g(do)g(\002ne)g(for)f(this.)39 b(Readers)24
b(with)h(no)h(prior)e(familiarity)h(with)g(any)g(ML)f(may)450
2950 y(wish)e(to)f(r)o(ead)e(some)i(of)g(Cousineau)g(and)f(Mauny's)h
(textbook)g([CM98)n(].)575 3049 y(For)d(the)h(convenience)g(of)f(r)o
(eaders)f(who)i(just)g(want)g(to)g(understand)e(enough)j(of)e(the)h(pr)
o(o-)450 3149 y(gramming)26 b(examples)f(pr)o(esented)f(her)o(e)h(to)g
(translate)g(them)h(into)g(another)g(pr)o(ogramming)450
3248 y(language,)20 b(this)i(appendix)e(summarizes)g(the)h(key)g
(featur)o(es)e(used.)575 3348 y F7(T)-9 b(o)20 b(be)i(written.)27
b(I)21 b(have)g(in)g(mind)g(something)f(along)h(the)g(lines)h(of)f(the)
g(\223Bluffers)h(Guide)f(to)g(ML)m(\224)450 3448 y(in)29
b(Baader)f(and)g(Nipkow')-5 b(s)29 b(r)o(ecent)f(book,)j
Gd(T)-8 b(erm)28 b(Rewriting)i(and)e(All)h(That)p F7(.)49
b(In)29 b(fact,)g(it)g(might)450 3547 y(be)24 b(possible)h(to)e(r)o
(eprint)h(that)e(appendix)g(entir)o(ely)i(fr)o(om)f(this)g(book,)h(cr)o
(editing)f(the)g(original)g(authors)450 3647 y(and)e(just)g
(translating,)f Gd(mutatis)i(mutandi)p F7(,)f(SML)h(to)e(OCaml.)26
b(\(I)21 b(have)f(not)h(talked)f(to)h(Baader)f(and)450
3747 y(Nipkow)g(about)g(this.\))1888 5169 y Gd(310)p
eop
%%Page: 311 312
311 311 bop 450 1306 a F3(Appendix)44 b(E)450 1721 y
Gk(Running)52 b(the)g(Checkers)450 2177 y Gd(The)22 b(systems)h
(discussed)f(in)h(the)f(text)g(have)f(all)h(been)g(implemented)h(in)f
(Objective)h(CAML.)450 2276 y(Y)-8 b(ou'll)17 b(\002nd)f(the)g(pr)o
(ogramming)g(exer)o(cises)f(and)g(experiments)h(thr)o(oughout)h(the)f
(notes)g(much)450 2376 y(mor)o(e)29 b(enjoyable)h(if)f(you)h(use)f(the)
g(implementations)i(to)f(check)f(and)g(execute)f(your)i(solu-)450
2475 y(tions.)450 2760 y Gj(E.1)119 b(Preparing)29 b(Y)-9
b(our)30 b(Input)450 2950 y Gd(An)d(input)g(\002le)g(for)g(a)f(checker)
g(consists)i(of)f(a)f(sequence)h(of)g(clauses)g(terminated)f(by)h
(semi-)450 3049 y(colons.)g(Input)21 b(clauses)f(can)h(have)f(the)h
(following)h(forms:)658 3267 y F4(t;)1028 b Gd(typecheck)21
b(\(if)f(appr)o(opriate\))f(and)h(evaluate)f(term)i F4(t)658
3367 y(x)43 b(=)g(t;)854 b Gd(typecheck)21 b F4(t)f Gd(\(if)g(appr)o
(opriate\))f(and)h(bind)h(it)g(to)g F4(x)658 3466 y(import)41
b("filename";)327 b Gd(include)21 b F4(filename)c Gd(at)k(this)g(point)
450 3766 y Gj(E.2)119 b(Ascii)30 b(Equivalents)450 3955
y Gd(Pr)o(ograms)c(in)h(the)f(text)g(ar)o(e)f(typeset)h(using)h(some)g
(non-ascii)f(symbols.)44 b(When)26 b(pr)o(eparing)450
4055 y(input)21 b(to)g(the)g(typechecker)-6 b(,)20 b(you)h(should)h
(use)f(the)g(following)h(equivalents:)p 1554 4153 792
4 v 1554 4253 4 100 v 1609 4223 a(T)t F6(Y)t(P)t(E)t(S)t(E)t(T)p
1978 4253 V 107 w Gd(A)t F6(S)t(C)t(I)t(I)p 2342 4253
V 1554 4256 792 4 v 1554 4355 4 100 v 1607 4326 a Gb(\025)p
1978 4355 V 379 w F4(lambda)p 2342 4355 V 1554 4455 V
1607 4425 a FV(!)p 1978 4455 V 341 w F4(->)p 2342 4455
V 1554 4555 V 1615 4495 a FX(0)1638 4525 y F4(a)p 1978
4555 V 349 w('a)p 2342 4555 V 1554 4654 V 1615 4594 a
FX(0)1638 4624 y F4(b)p 1978 4654 V 349 w('b)p 2342 4654
V 1554 4754 V 1615 4694 a FX(0)1638 4724 y F4(c)p 1978
4754 V 349 w('c)p 2342 4754 V 1554 4854 V 1615 4794 a
FX(0)1638 4824 y F4(d)p 1978 4854 V 349 w('d)p 2342 4854
V 1554 4857 792 4 v 1890 5169 a Gd(31)-5 b(1)p eop
%%Page: 312 313
312 312 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)658
b Gd(E)t(.)25 b(R)t F6(U)t(N)t(N)t(I)t(N)t(G)h(T)t(H)t(E)f
Gd(C)t F6(H)t(E)t(C)t(K)t(E)t(R)t(S)660 b Gd(312)450
686 y Gj(E.3)119 b(Running)31 b(the)e(Checker)450 867
y FT(Here's)41 b(what)f(you)g(need)g(to)f(do)h(to)g(run)g(it:)489
958 y(1\))g(make)g(sure)g(you've)h(got)f(ocaml)g(installed)607
1049 y(1a\))g(If)g(you're)g(running)h(on)f(a)f(CIS)h(system:)842
1141 y(add)g(/pkg/ocaml-2.02/bin)k(to)39 b(your)i(search)f(path)842
1232 y(do)g('ocamlc)h(-v')f(to)f(make)i(sure)f(it's)g(there)607
1323 y(1b\))g(If)g(you)f(are)h(not)g(running)h(on)f(a)f(CIS)h(system,)h
(you'll)g(need)f(to)f(install)i(the)764 1415 y(OCaml)f(compiler,)h
(available)h(from)e(http://caml.inria.fr.)83 b(Please)764
1506 y(let)40 b(me)f(know)i(if)e(you)h(need)g(help)g(with)h(this.)489
1597 y(2\))f(Grab)g(the)g(sources)h(from)646 1689 y
(http://www.cis.upenn.edu/~bc)q(pierc)q(e/co)q(urses)q(/700)q(/che)q
(ckers)q(/ful)q(lunty)q(ped.)q(tar.)q(gz)607 1780 y(or)646
1871 y(/mnt/saul/home/bcpierce/pub/)q(cours)q(es/7)q(00/ch)q(ecke)q
(rs/f)q(ullun)q(type)q(d.tar)q(.gz)489 1963 y(3\))f(now)g(do)685
2054 y(gunzip)h(fulluntyped.tar.gz)685 2145 y(tar)f(xvf)g
(fulluntyped.tar)685 2237 y(cd)g(fulluntyped)607 2328
y(3a\))g(if)g(you're)g(running)h(on)f(a)f(Unix)h(system,)h(do)803
2419 y(make)764 2511 y(to)f(create)g(an)g(executable)h(file)f(f)607
2602 y(3b\))g(if)g(you're)g(running)h(on)f(a)f(Windows)i(system,)g(do)
803 2693 y(make)f(windows)764 2785 y(to)g(create)g(an)g(executable)h
(file)f(f.exe)489 2876 y(4\))g(create)h(an)e(input)i(file)f(containing)
h(one)f(or)g(more)g(lambda-terms)489 2967 y(5\))g(evaluate)h(these)f
(terms)h(by)e(doing)685 3059 y(./f)h(<filename>)607 3150
y(where)g(<filename>)i(is)d(the)h(name)h(of)e(your)h(file)450
3333 y(In)g(general,)h(your)f(input)g(file)g(can)g(contain)h(a)f
(sequence)h(of)e(commands,)j(where)450 3424 y(each)e(command)h(is)f
(either:)646 3607 y(t;)314 b(evaluate)41 b(the)f(term)h(t)e(and)h
(print)g(its)g(normal)h(form)646 3698 y(x)f(=)f(t;)157
b(bind)41 b(the)e(name)i(x)e(to)h(the)g(term)g(t)450
3880 y(The)g(terms)g(in)g(this)g(file)g(should)h(look)f(exactly)h(like)
f(the)g(examples)h(in)f(the)450 3972 y(chapter,)h(except)g(that)f(the)g
(character)h(lambda)g(is)e(spelled)i(out)f(in)g(full,)g(e.g.:)803
4154 y(id)g(=)f(lambda)i(x.)e(x;)p eop
%%Page: 313 314
313 313 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)658
b Gd(E)t(.)25 b(R)t F6(U)t(N)t(N)t(I)t(N)t(G)h(T)t(H)t(E)f
Gd(C)t F6(H)t(E)t(C)t(K)t(E)t(R)t(S)660 b Gd(313)450
686 y Gj(E.4)119 b(Old)30 b(Instructions)450 875 y Gd(Pr)o(ecompiled)c
(binaries)h(for)g(solaris)g(can)f(be)h(found)g(in)g(the)g(course)g(web)
g(dir)o(ectory)-9 b(.)43 b(Fr)o(om)450 975 y(CIS)25 b(machines,)i(you)g
(should)f(be)f(able)h(to)g(r)o(un)g(the)g(checkers)f(dir)o(ectly)g(out)
h(of)g(the)g(web)f(di-)450 1074 y(r)o(ectory:)616 1232
y FT(/mnt/saul/extra/bcpierce/pub/)q(cour)q(ses/7)q(00/c)q(heck)q
(ers/<)q(chec)q(kerna)q(me>/)q(f)45 b(<test.f>)450 1398
y Gd(\(wher)o(e)15 b F4(<checkername>)10 b Gd(is)16 b(the)g(name)g(of)g
(the)g(checker)f(that)h(you)g(want\227)p F4(untyped)m
Gd(,)h F4(fulluntyped)-5 b Gd(,)450 1498 y F4(simple)n
Gd(,)20 b(etc.\227and)g F4(<test.f>)d Gd(is)k(the)g(name)g(of)g(your)g
(input)g(\002le\).)450 1741 y F8(Compiling)k(the)g(Checkers)450
1899 y Gd(T)-8 b(o)21 b(modify)g(the)g(checker)g(itself,)f(you'll)i
(need)e(to)h(make)g(a)f(local)h(copy:)616 2056 y FT(cp)40
b(-r)f(/mnt/saul/extra/bcpierce/pu)q(b/cou)q(rses)q(/700)q(/chec)q
(kers)q(/<che)q(cker)q(name)q(>)45 b(<mydir>)450 2222
y Gd(T)-8 b(o)19 b(r)o(ecompile)f(it)h(fr)o(om)f(scratch,)g(\002rst)h
(install)g(the)g(Objective)f(CAML)f(compiler)i(if)f(necessary)450
2322 y(\(see)i(the)h(following)h(section\).)k(Do)616
2480 y FT(make)40 b(clean)450 2646 y Gd(to)21 b(thr)o(ow)g(away)f(all)h
(the)g(existing)g(object-code)g(\002les,)g(and)f(then)616
2803 y FT(make)450 2970 y Gd(to)h(r)o(ebuild)f(the)h(executable)e
(\002le)i(\(called)f F4(f)o Gd(\))h(for)f(the)h(checker)-6
b(.)450 3212 y F8(Objective)26 b(Caml)450 3370 y Gd(On)21
b(CIS)f(machines,)h(you)g(should)g(be)f(able)g(to)h(use)f(the)h
(Objective)f(CAML)f(compiler)i(simply)450 3470 y(by)g(adding)616
3628 y FT(/pkg/ocaml-XXX/bin)450 3794 y Gd(to)g(your)g(sear)o(ch)f
(path,)g(wher)o(e)g(XXX)i(is)f(the)g(latest)g(version)g(number)-6
b(.)575 3893 y(On)24 b(other)h(machines)f(\(including)h(most)g
(varieties)f(of)g(Unix)g(workstations,)i(Macs,)e(and)450
3993 y(W)-5 b(indows)23 b(95/98/NT)e(PCs\))g(you'll)i(need)f(to)g
(install)g(Objective)g(Caml)g(yourself.)29 b(It)22 b(can)f(be)450
4093 y(obtained)g(fr)o(om)f F4(http://caml.inri)o(a.)o(fr/)o(la)o(ng)p
Gd(.)f(It's)i(very)f(easy)h(to)g(install.)p eop
%%Page: 314 315
314 314 bop 450 1347 a Gk(Bibliography)450 1797 y FD([AC94a])149
b(Mart)n(\264)-23 b(\021n)23 b(Abadi)f(and)h(Luca)f(Car)o(delli.)35
b(A)22 b(theory)g(of)f(primitive)g(objects:)30 b(Second-or)o(der)871
1888 y(systems.)39 b(In)24 b Fg(Eur)o(opean)e(Symposium)h(on)g(Pr)o
(ogramming)g(\(ESOP\),)e(Edinbur)o(gh,)h(Scotland)p FD(,)871
1980 y(1994.)450 2104 y([AC94b])145 b(Mart)n(\264)-23
b(\021n)23 b(Abadi)f(and)h(Luca)f(Car)o(delli.)35 b(A)23
b(theory)e(of)h(primitive)f(objects:)30 b(Untyped)22
b(and)871 2195 y(\002rst-or)o(der)g(systems.)40 b(In)25
b Fg(Theor)o(etical)e(Aspects)i(of)e(Computer)h(Softwar)o(e)f(\(T)-7
b(ACS\),)22 b(Sendai,)871 2287 y(Japan)p FD(,)d(1994.)450
2411 y([AC96])186 b(Mart)n(\264)-23 b(\021n)20 b(Abadi)f(and)g(Luca)g
(Car)o(delli.)25 b Fg(A)18 b(Theory)i(of)e(Objects)p
FD(.)27 b(Springer)o(-V)-8 b(erlag,)15 b(1996.)450 2536
y([ACPP91])96 b(Mart)n(\264)-23 b(\021n)23 b(Abadi,)f(Luca)g(Car)o
(delli,)f(Benjamin)i(Pier)o(ce,)e(and)h(Gor)o(don)f(Plotkin.)36
b(Dynamic)871 2627 y(typing)25 b(in)g(a)g(statically)g(typed)f
(language.)46 b Fg(T)-8 b(ransactions)24 b(on)g(Pr)o(ogramming)h
(Languages)871 2719 y(and)e(Systems)p FD(,)h(13\(2\):237\226268,)i
(April)c(1991.)40 b(Pr)o(eliminary)21 b(version)h(in)h(Pr)o(oceedings)d
(of)871 2810 y(the)29 b(Sixteenth)f(Annual)h(ACM)e(Symposium)g(on)h
(Principles)e(of)i(Pr)o(ogramming)e(Lan-)871 2901 y(guages)18
b(\(Austin,)h(TX\),)f(January)-8 b(,)18 b(1989.)450 3026
y([ACPR95])91 b(Mart)n(\264)-23 b(\021n)18 b(Abadi,)f(Luca)g(Car)o
(delli,)e(Benjamin)j(Pier)o(ce,)e(and)h(Didier)e(R)5
b(\264)-30 b(emy)-8 b(.)21 b(Dynamic)c(typ-)871 3117
y(ing)i(in)g(polymorphic)f(languages.)27 b Fg(Journal)18
b(of)h(Functional)e(Pr)o(ogramming)p FD(,)i(5\(1\):1)l(1)l(1\226130,)
871 3208 y(January)d(1995.)21 b(Pr)o(eliminary)13 b(version)i(in)g(Pr)o
(oceedings)f(of)h(the)h(ACM)f(SIGPLAN)g(W)-7 b(ork-)871
3300 y(shop)19 b(on)g(ML)f(and)h(its)g(Applications,)f(June)h(1992.)450
3424 y([AJM94])143 b(Samson)24 b(Abramsky)-8 b(,)22 b(Radha)i
(Jagadeesan,)f(and)g(Pasquale)g(Malacaria.)40 b(Full)22
b(abstrac-)871 3516 y(tion)f(for)f(PCF)g(\(extended)f(abstract\).)33
b(In)21 b(Masami)f(Hagiya)g(and)h(John)g(C.)f(Mitchell,)h(ed-)871
3607 y(itors,)d Fg(Theor)o(etical)h(Aspects)h(of)f(Computer)g(Softwar)o
(e.)f(International)g(Symposium)h(T)-7 b(ACS'94)p FD(,)871
3698 y(number)21 b(789)g(in)g(Lectur)o(e)e(Notes)h(in)g(Computer)g
(Science,)g(pages)g(1\22615,)i(Sendai,)e(Japan,)871 3789
y(April)e(1994.)i(Springer)o(-V)-8 b(erlag.)450 3914
y([AS85])200 b(Har)o(old)22 b(Abelson)h(and)g(Gerald)f(Sussman.)39
b Fg(Structur)o(e)22 b(and)h(Interpr)o(etation)e(of)i(Computer)871
4005 y(Pr)o(ograms)p FD(.)k(The)19 b(MIT)f(Pr)o(ess,)f(New)i(Y)-7
b(ork,)17 b(1985.)450 4130 y([Bac81])181 b(John)19 b(Backus.)k(The)18
b(history)e(of)i(Fortran)f(I,)g(II,)h(and)g(III.)24 b(In)18
b(W)-7 b(exelblat,)17 b(editor)-6 b(,)17 b Fg(History)h(of)871
4221 y(Pr)o(ogramming)h(Languages)p FD(,)f(pages)g(25\22645.)i
(Academic)f(Pr)o(ess,)e(1981.)450 4346 y([Bar84])184
b(H.)19 b(P)-10 b(.)19 b(Bar)o(endr)o(egt.)24 b Fg(The)19
b(Lambda)g(Calculus)p FD(.)25 b(North)19 b(Holland,)g(r)o(evised)d
(edition,)i(1984.)450 4470 y([Bar90])184 b(H.)25 b(P)-10
b(.)24 b(Bar)o(endr)o(egt.)43 b(Functional)25 b(pr)o(ogramming)d(and)j
(lambda)f(calculus.)45 b(In)25 b(Jan)g(van)871 4562 y(Leeuwen,)20
b(editor)-6 b(,)19 b Fg(Handbook)h(of)g(Theor)o(etical)g(Computer)g
(Science,)f(V)-6 b(olume)20 b(B)p FD(,)f(volume)h(B,)871
4653 y(chapter)g(7,)e(pages)g(321\226364.)j(Elsevier)c(/)i(MIT)f(Pr)o
(ess,)f(1990.)450 4777 y([Bar92a])147 b(Henk)25 b(Bar)o(endr)o(egt.)42
b(Intr)o(oduction)24 b(to)g(generalized)f(type)h(systems.)43
b Fg(Journal)23 b(of)h(Func-)871 4869 y(tional)18 b(Pr)o(ogramming)p
FD(,)h(1992.)1888 5169 y Gd(314)p eop
%%Page: 315 316
315 315 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(315)450 683 y FD([Bar92b])143 b(Henk)33 b(Bar)o(endr)o(egt.)71
b(Lambda)33 b(calculi)g(with)h(types.)72 b(In)33 b(Gabbay)h(Abramsky)e
(and)871 774 y(Maibaum,)h(editors,)e Fg(Handbook)f(of)g(Logic)g(in)f
(Computer)h(Science)p FD(,)i(volume)d(II.)h(Oxfor)o(d)871
866 y(University)18 b(Pr)o(ess,)f(1992.)450 990 y([BCGS91])102
b(V)-7 b(al)20 b(Br)o(eazu-T)-7 b(annen,)19 b(Thierry)e(Coquand,)i
(Carl)g(Gunter)-6 b(,)19 b(and)h(Andr)o(e)e(Scedr)o(ov)-8
b(.)26 b(Inher)o(-)871 1082 y(itance)19 b(as)g(implicit)e(coer)o(cion.)
24 b Fg(Information)18 b(and)g(Computation)p FD(,)f(93:172\226221,)k
(1991.)27 b(Also)871 1173 y(in)h(Carl)e(A.)h(Gunter)g(and)g(John)h(C.)e
(Mitchell,)j(editors,)e Fg(Theor)o(etical)g(Aspects)g(of)g(Object-)871
1264 y(Oriented)19 b(Pr)o(ogramming:)k(T)-7 b(ypes,)19
b(Semantics,)f(and)h(Language)f(Design)h FD(\(MIT)f(Pr)o(ess,)f
(1994\).)450 1389 y([BCP99])153 b(Kim)27 b(B.)e(Br)o(uce,)i(Luca)g(Car)
o(delli,)f(and)h(Benjamin)g(C.)f(Pier)o(ce.)49 b(Comparing)26
b(object)h(en-)871 1480 y(codings.)39 b Fg(Information)22
b(and)h(Computation)p FD(,)g(1999.)42 b(T)-7 b(o)22 b(appear)h(in)g(a)g
(special)f(issue)g(with)871 1571 y(papers)i(fr)o(om)f
Fg(Theor)o(etical)i(Aspects)g(of)f(Computer)h(Softwar)o(e)e(\(T)-7
b(ACS\))p FD(,)23 b(September)-6 b(,)26 b(1997.)871 1663
y(An)k(earlier)d(version)i(appear)o(ed)f(as)h(an)h(invited)f(lectur)o
(e)f(in)h(the)g(Thir)o(d)f(International)871 1754 y(W)-7
b(orkshop)18 b(on)h(Foundations)f(of)h(Object)g(Oriented)f(Languages)g
(\(FOOL)f(3\),)i(July)f(1996.)450 1879 y([BDCd95])94
b(Franco)15 b(Barbanera,)g(Mariangiola)f(Dezani-Ciancaglini,)i(and)f
(Ugo)f(de'Liguor)o(o.)g(Inter)o(-)871 1970 y(section)24
b(and)h(union)f(types:)33 b(Syntax)24 b(and)g(semantics.)44
b Fg(Information)23 b(and)h(Computation)p FD(,)871 2061
y(1)l(19\(2\):202\226230,)e(June)d(1995.)450 2186 y([BDMN79])60
b(Graham)17 b(M.)e(Birtwistle,)g(Ole-Johan)h(Dahl,)h(Bjorn)e(Myhr)o
(haug,)h(and)g(Kristen)g(Nygaar)o(d.)871 2277 y Fg(Simula)22
b(Begin)p FD(.)40 b(Studentlitteratur)23 b(\(Lund,)h(Sweden\),)f(Bratt)
h(Institut)g(fuer)e(neues)h(Ler)o(-)871 2368 y(nen)d(\(Goch,)f(FRG\),)e
(Chartwell-Bratt)i(Ltd)g(\(Kent,)g(England\),)f(1979.)450
2493 y([Ben95])172 b(Johan)16 b(V)-7 b(an)16 b(Benthem.)i
Fg(Language)d(in)f(Action)g(:)21 b(Categories,)16 b(Lambdas,)f(and)g
(Dynamic)g(Logic)p FD(.)871 2584 y(MIT)k(Pr)o(ess,)e(1995.)450
2709 y([BFSS90])131 b(S.)28 b(Bainbridge,)g(P)-10 b(.)28
b(Fr)o(eyd,)f(A.)g(Scedr)o(ov)-8 b(,)28 b(and)g(P)-10
b(.)27 b(Scott.)56 b(Functorial)27 b(polymorphism.)871
2800 y Fg(Theor)o(etical)19 b(Computer)g(Science)p FD(,)f(70:35\22664,)
j(1990.)450 2925 y([BL90])205 b(Kim)24 b(B.)f(Br)o(uce)g(and)h
(Giuseppe)f(Longo.)42 b(A)24 b(modest)e(model)h(of)g(r)o(ecor)o(ds,)f
(inheritance,)871 3016 y(and)30 b(bounded)g(quanti\002cation.)63
b Fg(Information)28 b(and)i(Computation)p FD(,)h(87:196\226240,)k
(1990.)871 3107 y(Also)d(in)h(Carl)f(A.)g(Gunter)h(and)g(John)g(C.)g
(Mitchell,)i(editors,)f Fg(Theor)o(etical)f(Aspects)g(of)871
3199 y(Object-Oriented)18 b(Pr)o(ogramming:)k(T)-7 b(ypes,)18
b(Semantics,)g(and)f(Language)h(Design)g FD(\(MIT)f(Pr)o(ess,)871
3290 y(1994\).)k(An)g(earlier)d(version)h(appear)o(ed)f(in)i(the)h(pr)o
(oceedings)c(of)j(the)g(IEEE)f(Symposium)871 3381 y(on)g(Logic)f(in)h
(Computer)f(Science,)h(1988.)450 3506 y([BM92])180 b(Kim)23
b(Br)o(uce)f(and)h(John)h(Mitchell.)39 b(PER)22 b(models)f(of)i
(subtyping,)g(r)o(ecursive)e(types)g(and)871 3597 y(higher)o(-or)o(der)
g(polymorphism.)39 b(In)24 b Fg(Pr)o(oceedings)g(of)f(the)h(Nineteenth)
e(ACM)h(Symposium)871 3688 y(on)c(Principles)f(of)h(Pr)o(ogramming)f
(Languages)p FD(,)h(Albequer)o(que,)d(NM,)j(January)f(1992.)450
3813 y([BOSW98])78 b(Gilad)21 b(Bracha,)i(Martin)e(Odersky)-8
b(,)19 b(David)i(Stoutamir)o(e,)h(and)g(Philip)f(W)-7
b(adler)h(.)35 b(Making)871 3904 y(the)25 b(futur)o(e)f(safe)g(for)g
(the)h(past:)34 b(Adding)24 b(genericity)f(to)h(the)h(Java)g(pr)o
(ogramming)e(lan-)871 3996 y(guage.)36 b(In)23 b(Craig)e(Chambers,)h
(editor)-6 b(,)22 b Fg(Object)g(Oriented)f(Pr)o(ogramming:)29
b(Systems,)23 b(Lan-)871 4087 y(guages,)17 b(and)e(Applications)h
(\(OOPSLA\))p FD(,)d(ACM)i(SIGPLAN)h(Notices)f(volume)g(33)h(number)871
4178 y(10,)j(pages)f(183\226200,)j(V)-7 b(ancouver)h(,)20
b(BC,)e(October)g(1998.)450 4303 y([Br)o(u91])177 b(Kim)24
b(B.)e(Br)o(uce.)41 b(The)24 b(equivalence)f(of)g(two)h(semantic)g
(de\002nitions)f(for)g(inheritance)h(in)871 4394 y(object-oriented)30
b(languages.)60 b(In)30 b Fg(Pr)o(oceedings)f(of)h(Mathematical)f
(Foundations)f(of)i(Pr)o(o-)871 4485 y(gramming)20 b(Semantics)p
FD(,)e(Pittsbur)o(gh,)g(P)-7 b(A,)19 b(Mar)o(ch)f(1991.)450
4610 y([Car84])177 b(Luca)19 b(Car)o(delli.)24 b(A)19
b(semantics)f(of)g(multiple)g(inheritance.)27 b(In)19
b(G.)f(Kahn,)h(D.)f(MacQueen,)871 4701 y(and)k(G.)f(Plotkin,)g
(editors,)g Fg(Semantics)f(of)i(Data)f(T)-7 b(ypes)p
FD(,)22 b(volume)f(173)i(of)e Fg(Lectur)o(e)f(Notes)i(in)871
4793 y(Computer)h(Science)p FD(,)g(pages)f(51\22667.)j(Springer)o(-V)-8
b(erlag,)20 b(1984.)41 b(Full)22 b(version)f(in)i Fg(Informa-)871
4884 y(tion)18 b(and)h(Computation)f FD(76\(2/3\):138\226164,)k(1988.)p
eop
%%Page: 316 317
316 316 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(316)450 683 y FD([Car88])177 b(Luca)21 b(Car)o(delli.)32
b(Str)o(uctural)21 b(subtyping)g(and)g(the)g(notion)h(of)e(power)g
(type.)33 b(In)22 b Fg(Pr)o(oceed-)871 774 y(ings)h(of)f(the)h(15th)g
(ACM)f(Symposium)g(on)g(Principles)g(of)g(Pr)o(ogramming)h(Languages)p
FD(,)g(pages)871 866 y(70\22679,)e(San)e(Diego,)e(CA,)i(January)g
(1988.)450 981 y([Car89])177 b(Felice)23 b(Car)o(done.)42
b(Relational)24 b(semantics)g(for)f(r)o(ecursive)f(types)h(and)h
(bounded)f(quan-)871 1072 y(ti\002cation.)51 b(In)27
b Fg(Pr)o(oceedings)f(of)g(the)g(Sixteenth)f(International)g
(Colloquium)f(on)h(Automata,)871 1163 y(Languages,)h(and)f(Pr)o
(ogramming)p FD(,)g(volume)f(372)i(of)e Fg(Lectur)o(e)g(Notes)h(in)f
(Computer)h(Science)p FD(,)871 1255 y(pages)18 b(164\226178,)j(Str)o
(esa,)d(Italy)-8 b(,)18 b(July)g(1989.)i(Springer)o(-V)-8
b(erlag.)450 1370 y([Car90])177 b(Luca)19 b(Car)o(delli.)25
b(Notes)18 b(about)i(F)1825 1338 y FL(!)1825 1383 y(<)p
Ff(:)1894 1370 y FD(.)26 b(Unpublished)19 b(manuscript,)g(October)f
(1990.)450 1485 y([Car91])177 b(Luca)24 b(Car)o(delli.)40
b(T)-7 b(ypeful)23 b(pr)o(ogramming.)40 b(In)24 b(E.)f(J.)g(Neuhold)g
(and)h(M.)f(Paul,)i(editors,)871 1576 y Fg(Formal)33
b(Description)g(of)f(Pr)o(ogramming)h(Concepts)p FD(.)f(Springer)o(-V)
-8 b(erlag,)33 b(1991.)73 b(An)33 b(ear)o(-)871 1668
y(lier)24 b(version)g(appear)o(ed)g(as)h(DEC)g(Systems)f(Resear)o(ch)h
(Center)g(Resear)o(ch)f(Report)g(#45,)871 1759 y(Febr)o(uary)18
b(1989.)450 1874 y([Car92])177 b(Luca)27 b(Car)o(delli.)48
b(Extensible)25 b(r)o(ecor)o(ds)f(in)i(a)g(pur)o(e)f(calculus)h(of)g
(subtyping.)50 b(Resear)o(ch)871 1966 y(r)o(eport)17
b(81,)i(DEC)e(Systems)h(Resear)o(ch)f(Center)-6 b(,)19
b(January)f(1992.)27 b(Also)18 b(in)g(Carl)g(A.)g(Gunter)871
2057 y(and)e(John)f(C.)g(Mitchell,)g(editors,)f Fg(Theor)o(etical)g
(Aspects)i(of)f(Object-Oriented)f(Pr)o(ogramming:)871
2148 y(T)-7 b(ypes,)19 b(Semantics,)f(and)h(Language)g(Design)f
FD(\(MIT)g(Pr)o(ess,)f(1994\).)450 2263 y([Car96])177
b(Luca)22 b(Car)o(delli.)34 b(T)-7 b(ype)21 b(systems.)34
b(In)23 b(Allen)e(B.)g(T)-7 b(ucker)h(,)21 b(editor)-6
b(,)22 b Fg(Handbook)f(of)h(Computer)871 2355 y(Science)d(and)g
(Engineering)p FD(.)e(CRC)h(Pr)o(ess,)f(1996.)450 2470
y([Cas97])175 b(Giuseppe)43 b(Castagna.)108 b Fg(Object-Oriented)44
b(Pr)o(ogramming:)73 b(A)43 b(Uni\002ed)i(Foundation)p
FD(.)871 2561 y(Springer)o(-V)-8 b(erlag,)16 b(1997.)450
2676 y([CCH)643 2645 y Ff(+)695 2676 y FD(89])77 b(Peter)24
b(Canning,)i(W)l(illiam)c(Cook,)i(W)-7 b(alter)24 b(Hill,)g(W)-7
b(alter)23 b(Olthof)o(f,)i(and)f(John)h(Mitchell.)871
2768 y(F-bounded)20 b(quanti\002cation)j(for)d(object-oriented)h(pr)o
(ogramming.)32 b(In)21 b Fg(Fourth)g(Interna-)871 2859
y(tional)28 b(Confer)o(ence)g(on)g(Functional)f(Pr)o(ogramming)h
(Languages)h(and)f(Computer)h(Ar)o(chitec-)871 2950 y(tur)o(e)p
FD(,)18 b(pages)g(273\226280,)j(September)d(1989.)450
3066 y([CCHO89])70 b(Peter)30 b(Canning,)j(W)l(illiam)28
b(Cook,)j(W)-7 b(alt)30 b(Hill,)i(and)e(W)-7 b(alter)29
b(Olthof)o(f.)61 b(Interfaces)30 b(for)871 3157 y(str)o(ongly-typed)18
b(object-oriented)j(pr)o(ogramming.)31 b(In)21 b Fg(Object)g(Oriented)f
(Pr)o(ogramming:)871 3248 y(Systems,)f(Languages,)f(and)h(Applications)
g(\(OOPSLA\))p FD(,)e(pages)h(457\226467,)j(1989.)450
3363 y([CDC78])133 b(M.)28 b(Coppo)f(and)h(M.)g(Dezani-Ciancaglini.)56
b(A)28 b(new)h(type-assignment)e(for)g FM(\025)p FD(-terms.)871
3455 y Fg(Ar)o(chiv)20 b(Math.)e(Logik)p FD(,)g(19:139\226156,)k(1978.)
450 3570 y([CDCS79])94 b(M.)28 b(Coppo,)j(M.)d(Dezani-Ciancaglini,)j
(and)f(P)-10 b(.)28 b(Salle.)59 b(Functional)29 b(characterization)871
3661 y(of)22 b(some)g(semantic)h(equalities)e(inside)g
FM(\025)p FD(-calculus.)38 b(In)23 b(Hermann)g(A.)f(Maur)o(er)-6
b(,)22 b(editor)-6 b(,)871 3753 y Fg(Pr)o(oceedings)22
b(of)f(the)h(6th)g(Colloquium)e(on)h(Automata,)h(Languages)f(and)g(Pr)o
(ogramming)p FD(,)h(vol-)871 3844 y(ume)d(71)g(of)g Fg(LNCS)p
FD(,)e(pages)h(133\226146,)j(Graz,)e(Austria,)f(July)g(1979.)h
(Springer)-6 b(.)450 3959 y([CF58])202 b(H.)24 b(B.)f(Curry)f(and)i(R.)
g(Feys.)41 b Fg(Combinatory)23 b(Logic)p FD(,)i(volume)e(1.)43
b(North)24 b(Holland,)h(1958.)871 4050 y(\(Second)19
b(edition,)f(1968\).)450 4166 y([CG91])187 b(Pierr)o(e-Louis)21
b(Curien)j(and)h(Gior)o(gio)d(Ghelli.)43 b(Subtyping)25
b(+)f(extensionality:)33 b(Con\003u-)871 4257 y(ence)d(of)g
FM(\014\021)p FD(-r)o(eductions)e(in)i FM(F)1776 4266
y Fm(\024)1829 4257 y FD(.)62 b(In)30 b(T)-6 b(.)30 b(Ito)g(and)g(A.)g
(R.)f(Meyer)-6 b(,)31 b(editors,)g Fg(Theor)o(etical)871
4348 y(Aspects)f(of)e(Computer)g(Softwar)o(e)g(\(Sendai,)i(Japan\))p
FD(,)g(number)e(526)i(in)e(Lectur)o(e)g(Notes)g(in)871
4440 y(Computer)18 b(Science,)h(pages)f(731\226749.)j(Springer)o(-V)-8
b(erlag,)15 b(September)k(1991.)450 4555 y([CG92])187
b(Pierr)o(e-Louis)14 b(Curien)h(and)i(Gior)o(gio)d(Ghelli.)21
b(Coher)o(ence)16 b(of)g(subsumption:)21 b(Minimum)871
4646 y(typing)k(and)h(type-checking)e(in)i(F)1889 4655
y Fm(\024)1940 4646 y FD(.)48 b Fg(Mathematical)25 b(Structur)o(es)f
(in)g(Computer)i(Science)p FD(,)871 4737 y(2:55\22691,)d(1992.)32
b(Also)20 b(in)g(Carl)g(A.)g(Gunter)h(and)f(John)h(C.)f(Mitchell,)g
(editors,)f Fg(Theor)o(etical)871 4829 y(Aspects)27 b(of)e
(Object-Oriented)g(Pr)o(ogramming:)36 b(T)-7 b(ypes,)27
b(Semantics,)g(and)e(Language)g(Design)871 4920 y FD(\(MIT)19
b(Pr)o(ess,)d(1994\).)p eop
%%Page: 317 318
317 317 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(317)450 683 y FD([CH88])182 b(Thierry)15 b(Coquand)h(and)h(G)5
b(\264)-30 b(erar)o(d)15 b(Huet.)21 b(The)16 b(Calculus)g(of)g(Constr)o
(uctions.)22 b Fg(Information)871 774 y(and)d(Computation)p
FD(,)f(76\(2/3\):95\226120,)k(Febr)o(uary/Mar)o(ch)c(1988.)450
897 y([CHC90])129 b(W)l(illiam)21 b(R.)f(Cook,)h(W)-7
b(alter)21 b(L.)f(Hill,)h(and)h(Peter)f(S.)g(Canning.)36
b(Inheritance)23 b(is)d(not)i(sub-)871 988 y(typing.)59
b(In)29 b Fg(Seventeenth)f(Annual)g(ACM)g(Symposium)h(on)f(Principles)g
(of)h(Pr)o(ogramming)871 1079 y(Languages)p FD(,)f(pages)e(125\226135,)
k(San)e(Francisco,)f(CA,)f(January)h(1990.)52 b(Also)26
b(in)g(Carl)g(A.)871 1171 y(Gunter)21 b(and)h(John)f(C.)g(Mitchell,)f
(editors,)g Fg(Theor)o(etical)h(Aspects)g(of)g(Object-Oriented)g(Pr)o
(o-)871 1262 y(gramming:)j(T)-7 b(ypes,)19 b(Semantics,)f(and)g
(Language)h(Design)g FD(\(MIT)f(Pr)o(ess,)f(1994\).)450
1384 y([CHO88])123 b(Peter)27 b(Canning,)i(W)-7 b(alt)28
b(Hill,)g(and)f(W)-7 b(alter)26 b(Olthof)o(f.)53 b(A)27
b(kernel)e(language)i(for)f(object-)871 1475 y(oriented)i(pr)o
(ogramming.)57 b(T)-7 b(echnical)29 b(Report)f(STL-88-21,)k
(Hewlett-Packar)o(d)c(Labs,)871 1567 y(1988.)450 1689
y([Chu36])156 b(Alonzo)20 b(Chur)o(ch.)28 b(An)20 b(unsolvable)f(pr)o
(oblem)f(of)g(elementary)h(number)g(theory)-8 b(.)27
b Fg(Ameri-)871 1780 y(can)19 b(Journal)f(of)h(Mathematics)p
FD(,)f(58:354\226363,)k(1936.)450 1902 y([Chu40])156
b(Alonzo)16 b(Chur)o(ch.)k(A)15 b(formulation)g(of)h(the)g(simple)e
(theory)h(of)g(types.)j Fg(Journal)d(of)g(Symbolic)871
1994 y(Logic)p FD(,)k(5:56\22668,)h(1940.)450 2116 y([Chu41])156
b(Alonzo)23 b(Chur)o(ch.)37 b Fg(The)22 b(Calculi)f(of)h(Lambda)g
(Conversion)p FD(.)36 b(Princeton)23 b(University)e(Pr)o(ess,)871
2207 y(1941.)450 2329 y([CL91])198 b(Luca)16 b(Car)o(delli)e(and)i
(Giuseppe)e(Longo.)19 b(A)d(semantic)g(basis)f(for)g(Quest.)k
Fg(Journal)c(of)g(Func-)871 2421 y(tional)25 b(Pr)o(ogramming)p
FD(,)h(1\(4\):417\226458,)j(October)24 b(1991.)48 b(Pr)o(eliminary)23
b(version)h(in)h(ACM)871 2512 y(Confer)o(ence)18 b(on)g(Lisp)f(and)i
(Functional)g(Pr)o(ogramming,)d(June)i(1990.)i(Also)d(available)i(as)
871 2603 y(DEC)g(SRC)f(Resear)o(ch)g(Report)g(55,)h(Feb.)f(1990.)450
2726 y([CM91])173 b(Luca)25 b(Car)o(delli)d(and)j(John)g(Mitchell.)44
b(Operations)23 b(on)i(r)o(ecor)o(ds.)41 b Fg(Mathematical)25
b(Struc-)871 2817 y(tur)o(es)j(in)g(Computer)h(Science)p
FD(,)h(1:3\22648,)i(1991.)60 b(Also)27 b(in)i(Carl)f(A.)g(Gunter)h(and)
g(John)g(C.)871 2908 y(Mitchell,)24 b(editors,)f Fg(Theor)o(etical)h
(Aspects)g(of)f(Object-Oriented)g(Pr)o(ogramming:)33
b(T)-7 b(ypes,)25 b(Se-)871 3000 y(mantics,)e(and)f(Language)g(Design)g
FD(\(MIT)f(Pr)o(ess,)g(1994\);)k(available)e(as)f(DEC)f(Systems)g(Re-)
871 3091 y(sear)o(ch)27 b(Center)f(Resear)o(ch)g(Report)g(#48,)k
(August,)e(1989,)i(and)d(in)g(the)g(pr)o(oceedings)d(of)871
3182 y(MFPS)19 b('89,)g(Springer)e(LNCS)i(volume)f(442.)450
3304 y([CM98])173 b(Guy)25 b(Cousineau)g(and)h(Michel)f(Mauny)-8
b(.)47 b Fg(The)25 b(Functional)e(Appr)o(oach)k(to)e(Pr)o(ogramming)p
FD(.)871 3396 y(Cambridge)18 b(University)g(Pr)o(ess,)f(1998.)450
3518 y([CMMS94])63 b(Luca)25 b(Car)o(delli,)e(Simone)h(Martini,)h(John)
g(C.)f(Mitchell,)h(and)f(Andr)o(e)f(Scedr)o(ov)-8 b(.)43
b(An)25 b(ex-)871 3609 y(tension)16 b(of)f(system)f(F)h(with)h
(subtyping.)j Fg(Information)14 b(and)h(Computation)p
FD(,)g(109\(1\2262\):4\22656,)871 3701 y(1994.)28 b(Pr)o(eliminary)17
b(version)h(in)h(T)-6 b(ACS)19 b('91)h(\(Sendai,)e(Japan,)h(pp.)g
(750\226770\).)450 3823 y([Con86])160 b(Robert)21 b(L.)g(Constable,)h
Fg(et.)e(al.)35 b(Implementing)20 b(Mathematics)i(with)f(the)g(NuPRL)f
(Pr)o(oof)h(De-)871 3914 y(velopment)e(System)p FD(.)27
b(Pr)o(entice\226Hall,)18 b(Englewood)g(Clif)o(fs,)f(NJ,)h(1986.)450
4036 y([Coq85])161 b(Thierry)22 b(Coquand.)39 b Fg(Une)23
b(Th)r(\264)-27 b(eorie)23 b(des)g(Constructions)p FD(.)38
b(PhD)23 b(thesis,)h(University)e(Paris)871 4128 y(VII,)d(January)g
(1985.)450 4250 y([CP96])199 b(Adriana)22 b(B.)f(Compagnoni)g(and)h
(Benjamin)h(C.)e(Pier)o(ce.)34 b(Intersection)22 b(types)e(and)i(mul-)
871 4341 y(tiple)d(inheritance.)27 b Fg(Mathematical)19
b(Structur)o(es)f(in)g(Computer)h(Science)p FD(,)f(6\(5\):469\226501,)j
(Oc-)871 4433 y(tober)d(1996.)27 b(Pr)o(eliminary)16
b(version)h(available)i(as)f(University)f(of)h(Edinbur)o(gh)f
(technical)871 4524 y(r)o(eport)23 b(ECS-LFCS-93-275)h(and)g(Catholic)g
(University)f(Nijmegen)h(computer)f(science)871 4615
y(technical)h(r)o(eport)e(93-18,)i(Aug.)f(1993,)h(under)f(the)g(title)g
Fg(Multiple)e(Inheritance)i(via)g(Inter-)871 4706 y(section)c(T)-7
b(ypes)p FD(.)450 4829 y([CW85])169 b(Luca)28 b(Car)o(delli)d(and)i
(Peter)g(W)-7 b(egner)h(.)52 b(On)28 b(understanding)e(types,)i(data)g
(abstraction,)871 4920 y(and)20 b(polymorphism.)k Fg(Computing)18
b(Surveys)p FD(,)h(17\(4\):471\226522,)i(December)d(1985.)p
eop
%%Page: 318 319
318 318 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(318)450 683 y FD([dB72])205 b(Nicolas)27 b(G.)g(de)g(Br)o(uijn.)54
b(Lambda-calculus)27 b(notation)i(with)f(nameless)f(dummies:)39
b(a)871 774 y(tool)14 b(for)g(automatic)i(formula)d(manipulation)j
(with)f(application)g(to)f(the)h(Chur)o(ch-Rosser)871
866 y(theor)o(em.)26 b Fg(Indag.)19 b(Math.)p FD(,)f
(34\(5\):381\226392,)j(1972.)450 990 y([dB80])205 b(Nicolas)28
b(G.)h(de)f(Br)o(uijn.)58 b(A)29 b(survey)e(of)h(the)h(pr)o(oject)g
(AUT)o(OMA)-6 b(TH.)57 b(In)30 b(J.)e(P)-10 b(.)28 b(Seldin)871
1082 y(and)c(J.)e(R.)h(Hindley)-8 b(,)23 b(editors,)f
Fg(T)-8 b(o)22 b(H.)h(B.)f(Curry:)32 b(Essays)23 b(in)f(Combinatory)h
(Logic,)h(Lambda)871 1173 y(Calculus,)18 b(and)h(Formalism)p
FD(,)f(pages)g(589\226606.)j(Academic)d(Pr)o(ess,)f(1980.)450
1297 y([DLP79])148 b(Richar)o(d)18 b(A.)g(De)f(Millo,)g(Richar)o(d)g
(J.)h(Lipton,)f(and)i(Alan)g(J.)e(Perlis.)24 b(Social)18
b(pr)o(ocesses)d(and)871 1389 y(pr)o(oofs)21 b(of)h(theor)o(ems)f(and)i
(pr)o(ograms.)35 b Fg(Communications)22 b(of)g(the)g(ACM)p
FD(,)f(22\(5\):271\226280,)871 1480 y(May)27 b(1979.)55
b(An)28 b(earlier)e(version)g(appear)o(ed)g(in)h(Confer)o(ence)g(Recor)
o(d)f(of)g(the)i(Fourth)871 1571 y(ACM)18 b(Symposium)f(on)h
(Principles)f(of)g(Pr)o(ogramming)f(Languages)h(\(POPL\),)g(1977,)j
(pp.)871 1663 y(206-214.)450 1787 y([DM82])168 b(Luis)14
b(Damas)h(and)h(Robin)f(Milner)-6 b(.)17 b(Principal)e(type)f(schemes)h
(for)f(functional)h(pr)o(ograms.)871 1879 y(In)i Fg(Pr)o(oceedings)f
(of)g(the)g(9th)h(ACM)e(Symposium)h(on)f(Principles)h(of)g(Pr)o
(ogramming)f(Languages)p FD(,)871 1970 y(pages)j(207\226212,)j(1982.)
450 2094 y([FF98])213 b(Matthias)17 b(Felleisen)e(and)h(Daniel)g(P)-10
b(.)16 b(Friedman.)j Fg(A)d(little)f(Java,)i(A)f(few)f(Patterns)p
FD(.)20 b(The)c(MIT)871 2186 y(Pr)o(ess,)h(Cambridge,)g(Massachusetts,)
i(1998.)450 2310 y([Fr)o(e89])190 b(Peter)17 b(J.)g(Fr)o(eyd.)22
b(POL)-7 b(YNA)h(T)18 b(in)f(PER.)24 b(In)18 b(John)g(W)-7
b(.)17 b(Gray)g(and)h(Andr)o(e)f(Scedr)o(ov)-8 b(,)16
b(editors,)871 2402 y Fg(Categories)f(in)f(Computer)g(Science)g(and)g
(Logic)p FD(,)h(volume)f(92)h(of)f Fg(Contemporary)h(Mathematics)p
FD(,)871 2493 y(pages)j(67\22668,)j(Pr)o(ovidence,)c(Rhode)h(Island,)h
(1989.)g(American)g(Mathematical)h(Society)-8 b(.)450
2617 y([FWH92])118 b(Daniel)25 b(P)-10 b(.)25 b(Friedman,)f(Mitchell)h
(W)-7 b(and,)26 b(and)f(Christopher)f(T)-6 b(.)24 b(Haynes.)45
b Fg(Essentials)24 b(of)871 2709 y(Pr)o(ogramming)19
b(Languages)p FD(.)27 b(McGraw-Hill)18 b(Book)f(Co.,)h(New)h(Y)-7
b(ork,)17 b(N.Y)-8 b(.,)17 b(1992.)450 2833 y([Ghe90])161
b(Gior)o(gio)23 b(Ghelli.)46 b Fg(Pr)o(oof)24 b(Theor)o(etic)h(Studies)
f(about)h(a)g(Minimal)e(T)-7 b(ype)26 b(System)e(Integrating)871
2925 y(Inclusion)h(and)g(Parametric)h(Polymorphism)p
FD(.)49 b(PhD)26 b(thesis,)h(Universit)6 b(\036)-31 b(a)25
b(di)g(Pisa,)i(Mar)o(ch)871 3016 y(1990.)56 b(T)-7 b(echnical)28
b(r)o(eport)e(TD\2266/90,)k(Dipartimento)e(di)e(Informatica,)k
(Universit)6 b(\036)-31 b(a)28 b(di)871 3107 y(Pisa.)450
3232 y([Ghe95])161 b(Gior)o(gio)21 b(Ghelli.)38 b(Diver)o(gence)21
b(of)h(F)1933 3241 y Fm(\024)2007 3232 y FD(type)h(checking.)38
b Fg(Theor)o(etical)23 b(Computer)g(Science)p FD(,)871
3323 y(139\(1,2\):131\226162,)f(1995.)450 3448 y([GHJV94])99
b(Erich)34 b(Gamma,)39 b(Richar)o(d)34 b(Helm,)k(Ralph)d(Johnson,)j
(and)d(John)g(Vlissides.)75 b Fg(Design)871 3539 y(Patterns:)35
b(Elements)24 b(of)g(Reusable)g(Object-Oriented)g(Softwar)o(e)p
FD(.)46 b(Addison)23 b(W)-7 b(esley)f(,)24 b(Mas-)871
3630 y(sachusetts,)19 b(1994.)450 3755 y([Gir72])188
b(Jean-Y)-7 b(ves)22 b(Girar)o(d.)35 b Fg(Interpr)r(\264)-27
b(etation)21 b(fonctionelle)g(et)i(\264)-27 b(elimination)20
b(des)j(coupur)o(es)e(de)h(l'arith-)871 3846 y(m)r(\264)-27
b(etique)24 b(d'ordr)o(e)h(sup)r(\264)-27 b(erieur)p
FD(.)45 b(PhD)26 b(thesis,)f(Universit)5 b(\264)-30 b(e)24
b(Paris)g(VII,)h(1972.)47 b(A)25 b(summary)871 3937 y(appear)o(ed)k(in)
g(the)h(Pr)o(oceedings)d(of)i(the)h(Second)f(Scandinavian)j(Logic)c
(Symposium)871 4029 y(\(J.E.)18 b(Fenstad,)g(editor\),)f
(North-Holland,)i(1971)h(\(pp.)e(63\22692\).)450 4153
y([Gir87])188 b(Jean-Y)-7 b(ves)19 b(Girar)o(d.)25 b(Linear)19
b(logic.)25 b Fg(Theor)o(etical)19 b(Computer)g(Science)p
FD(,)f(50:1\226102,)i(1987.)450 4278 y([GL)-6 b(T89])154
b(Jean-Y)-7 b(ves)23 b(Girar)o(d,)e(Y)-7 b(ves)23 b(Lafont,)g(and)g
(Paul)g(T)-7 b(aylor)h(.)38 b Fg(Pr)o(oofs)21 b(and)i(T)-7
b(ypes)p FD(,)24 b(volume)e(7)g(of)871 4369 y Fg(Cambridge)j(T)-8
b(racts)24 b(in)f(Theor)o(etical)i(Computer)f(Science)p
FD(.)44 b(Cambridge)23 b(University)g(Pr)o(ess,)871 4461
y(Cambridge,)18 b(1989.)450 4585 y([GMW79])94 b(Michael)26
b(J.)f(Gor)o(don,)h(Robin)g(Milner)-6 b(,)27 b(and)f(Christopher)f(P)
-10 b(.)26 b(W)-7 b(adsworth.)49 b Fg(Edinbur)o(gh)871
4676 y(LCF)p FD(.)26 b(Springer)o(-V)-8 b(erlag)15 b(LNCS)k(78,)g
(1979.)450 4801 y([GR83])190 b(Adele)24 b(Goldber)o(g)e(and)j(David)f
(Robson.)45 b Fg(Smalltalk-80:)34 b(The)24 b(Language)g(and)h(Its)f
(Imple-)871 4892 y(mentation)p FD(.)i(Addison-W)-7 b(esley)f(,)16
b(Reading,)h(MA,)i(1983.)p eop
%%Page: 319 320
319 319 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(319)450 683 y FD([Gun92])152 b(C.)26 b(A.)g(Gunter)-6
b(.)52 b Fg(Semantics)26 b(of)g(Pr)o(ogramming)g(Languages:)38
b(Structur)o(es)25 b(and)i(T)-8 b(echniques)p FD(.)871
774 y(The)19 b(MIT)f(Pr)o(ess,)f(Cambridge,)h(MA,)g(1992.)450
899 y([Har94])168 b(Robert)25 b(Harper)-6 b(.)48 b(A)25
b(simpli\002ed)f(account)j(of)e(polymorphic)e(r)o(efer)o(ences.)46
b Fg(Information)871 990 y(Pr)o(ocessing)19 b(Letters)p
FD(,)f(51\(4\):201\226206,)j(August)e(1994.)28 b(See)18
b(also)g(note)i([Har96].)450 1115 y([Har96])168 b(Robert)22
b(Harper)-6 b(.)38 b(A)23 b(note)f(on:)31 b(\223A)23
b(simpli\002ed)d(account)k(of)e(polymorphic)f(r)o(efer)o(ences\224)871
1206 y([Inform.)29 b(Pr)o(ocess.)e(Lett.)h Fe(51)i FD(\(1994\),)i(no.)d
(4,)i(201\226206;)36 b(MR)29 b(95f:68142].)61 b Fg(Information)871
1297 y(Pr)o(ocessing)19 b(Letters)p FD(,)f(57\(1\):15\22616,)j(January)
d(1996.)28 b(See)19 b([Har94)q(].)450 1422 y([Hay91])156
b(S.)28 b(Hayashi.)56 b(Singleton,)29 b(union)g(and)f(intersection)f
(types)g(for)g(pr)o(ogram)f(extraction.)871 1513 y(In)c(T)-6
b(.Ito)21 b(and)g(A.R.Meyer)-6 b(,)19 b(editors,)g Fg(Theor)o(etical)h
(Aspect)i(of)e(Computer)h(Softwar)o(e)f(\(Lectur)o(e)871
1605 y(Notes)f(in)f(Comuter)h(Science)f(No.)h(526\))p
FD(,)g(pages)f(701\226730,)j(Berlin,)c(1991.)j(Springer)o(-V)-8
b(erlag.)450 1729 y([HHP92])128 b(Robert)20 b(Harper)-6
b(,)20 b(Furio)f(Honsell,)g(and)h(Gor)o(don)f(Plotkin.)31
b(A)20 b(framework)f(for)g(de\002ning)871 1820 y(logics.)25
b Fg(Journal)17 b(of)h(the)h(ACM)p FD(,)e(40\(1\):143\226184,)k(1992.)
27 b(Pr)o(eliminary)17 b(version)g(in)i(LICS'87.)450
1945 y([Hin97])170 b(J.)27 b(Roger)e(Hindley)-8 b(.)51
b Fg(Basic)27 b(Simple)f(T)-7 b(ype)27 b(Theory)p FD(,)i(volume)d(42)i
(of)e Fg(Cambridge)h(T)-8 b(racts)27 b(in)871 2036 y(Theor)o(etical)19
b(Computer)g(Science)p FD(.)26 b(Cambridge)18 b(University)g(Pr)o(ess,)
e(Cambridge,)i(1997.)450 2161 y([HJW)637 2129 y Ff(+)688
2161 y FD(92])84 b(P)-10 b(.)17 b(Hudak,)f(S.)h(Peyton)f(Jones,)g(P)-10
b(.)17 b(W)-7 b(adler)h(,)16 b(B.)g(Boutel,)f(J.)h(Fairbairn,)h(J.)e
(Fasel,)h(M.)g(M.)g(Guz-)871 2252 y(man,)k(K.)f(Hammond,)h(J.)f
(Hughes,)g(T)-6 b(.)19 b(Johnsson,)g(D.)g(Kieburtz,)g(R.)g(Nikhil,)g(W)
-7 b(.)18 b(Partian,)871 2343 y(and)29 b(J.)f(Peterson.)57
b(Report)28 b(on)h(the)g(pr)o(ogramming)d(language)i(haskell,)i
(version)e(1.2.)871 2435 y Fg(Sigplan)p FD(,)18 b(27\(5\),)h(May)g
(1992.)450 2559 y([HL94])189 b(Robert)15 b(Harper)e(and)i(Mark)f
(Lillibridge.)g(A)h(type-theor)o(etic)f(appr)o(oach)g(to)h(higher)o
(-or)o(der)871 2651 y(modules)26 b(with)i(sharing.)53
b(In)27 b Fg(Pr)o(oceedings)g(of)g(the)g(T)-7 b(wenty-First)26
b(ACM)g(Symposium)h(on)871 2742 y(Principles)f(of)g(Pr)o(ogramming)h
(Languages)f(\(POPL\),)e(Portland,)k(Or)o(egon)p FD(,)f(pages)f
(123\226137,)871 2833 y(Portland,)19 b(OR,)f(January)h(1994.)450
2958 y([HMV93])110 b(My)23 b(Hoang,)h(John)g(Mitchell,)g(and)g(Ramesh)f
(V)l(iswanathan.)44 b(Standar)o(d)24 b(ML-NJ)e(weak)871
3049 y(polymorphism)f(and)i(imperative)f(constr)o(ucts.)40
b(In)23 b Fg(Pr)o(oceedings,)g(Eighth)g(Annual)e(IEEE)871
3140 y(Symposium)k(on)e(Logic)i(in)e(Computer)h(Science)p
FD(,)h(pages)e(15\22625.)j(IEEE)d(Computer)g(Society)871
3232 y(Pr)o(ess,)17 b(1993.)450 3356 y([HO94])176 b(J.)50
b(M.)e(E.)h(Hyland)h(and)g(C.-H.)f(L.)g(Ong.)125 b(On)50
b(full)f(abstraction)h(for)f(PCF:)g(I,)871 3448 y(II)41
b(and)g(III.)97 b(Submitted)41 b(for)e(publication;)52
b(electr)o(onic)40 b(draft)g(available)h(thr)o(ough)871
3539 y FT(ftp://ftp.comlab.ox.ac.uk/p)q(ub/Do)q(cume)q(nts/t)q(echp)q
(aper)q(s/Luk)q(e.On)q(g/)p FD(,)24 b(1994.)450 3664
y([How80])132 b(W)-7 b(.)15 b(A.)g(Howar)o(d.)k(The)c
(formulas-as-types)e(notion)j(of)f(constr)o(uction.)20
b(In)c(J.)e(P)-10 b(.)16 b(Seldin)e(and)871 3755 y(J.)22
b(R.)g(Hindley)-8 b(,)21 b(editors,)g Fg(T)-8 b(o)21
b(H.)h(B.)g(Curry:)29 b(Essays)22 b(on)g(Combinatory)g(Logic,)g(Lambda)
g(Cal-)871 3846 y(culus,)c(and)h(Formalism)p FD(,)g(pages)f
(479\226490.)j(Academic)d(Pr)o(ess,)f(New)i(Y)-7 b(ork,)18
b(1980.)28 b(Reprint)871 3937 y(of)19 b(1969)h(article.)450
4062 y([HP95])190 b(Martin)26 b(Hofmann)h(and)f(Benjamin)g(Pier)o(ce.)
47 b(Positive)25 b(subtyping.)48 b(In)26 b Fg(Pr)o(oceedings)g(of)871
4153 y(T)-7 b(wenty-Second)19 b(Annual)f(ACM)g(Symposium)i(on)e
(Principles)h(of)g(Pr)o(ogramming)g(Languages)p FD(,)871
4245 y(pages)14 b(186\226197.)j(ACM,)d(January)h(1995.)k(Full)13
b(version)h(in)h Fg(Information)e(and)i(Computation)p
FD(,)871 4336 y(volume)22 b(126,)i(number)e(1,)h(April)e(1996.)i(Also)f
(available)h(as)f(University)f(of)h(Edinbur)o(gh)871
4427 y(technical)e(r)o(eport)e(ECS-LFCS-94-303,)h(September)f(1994.)450
4552 y([HP98])190 b(Martin)24 b(Hofmann)g(and)g(Benjamin)g(C.)f(Pier)o
(ce.)41 b(T)-7 b(ype)22 b(destr)o(uctors.)41 b(In)24
b(Didier)d(R)5 b(\264)-30 b(emy)-8 b(,)871 4643 y(editor)i(,)29
b Fg(Informal)e(pr)o(oceedings)h(of)f(the)h(Fourth)f(International)e(W)
o(orkshop)j(on)f(Foundations)871 4734 y(of)f(Object-Oriented)f
(Languages)g(\(FOOL\))p FD(,)f(January)i(1998.)50 b(Full)24
b(version)h(to)g(appear)h(in)871 4826 y Fg(Theory)20
b(and)f(Practice)g(of)f(Object)h(Systems)p FD(.)p eop
%%Page: 320 321
320 320 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(320)450 683 y FD([HS86])196 b(J.)29 b(Roger)g(Hindley)f(and)i
(Jonathan)i(P)-10 b(.)30 b(Seldin.)61 b Fg(Intr)o(oduction)28
b(to)i(Combinators)f(and)g FM(\025)p Fg(-)871 774 y(Calculus)p
FD(,)g(volume)e(1)h(of)g Fg(London)f(Mathematical)h(Society)f(Student)g
(Texts)p FD(.)55 b(Cambridge)871 866 y(University)18
b(Pr)o(ess,)f(1986.)450 990 y([HU79])177 b(John)24 b(E.)e(Hopcr)o(oft)f
(and)i(Jef)o(fr)o(ey)e(D.)h(Ullman.)39 b Fg(Intr)o(oduction)22
b(to)g(Automata)h(Theory)m(,)h(Lan-)871 1082 y(guages,)19
b(and)g(Computation)p FD(.)26 b(Addison-W)-7 b(esley)f(,)16
b(1979.)450 1206 y([IPW99])152 b(Atsushi)23 b(Igarashi,)h(Benjamin)g
(Pier)o(ce,)e(and)i(Philip)e(W)-7 b(adler)h(.)40 b(Featherweight)23
b(Java:)32 b(A)871 1297 y(minimal)16 b(cor)o(e)f(calculus)h(for)f(Java)
h(and)h(GJ.)j(In)c Fg(Object)g(Oriented)g(Pr)o(ogramming:)21
b(Systems,)871 1389 y(Languages,)e(and)f(Applications)h(\(OOPSLA\))p
FD(,)e(October)i(1999.)450 1513 y([JG91])215 b(Pierr)o(e)23
b(Jouvelot)h(and)h(David)f(Gif)o(for)o(d.)42 b(Algebraic)24
b(r)o(econstr)o(uction)g(of)g(types)g(and)g(ef-)871 1605
y(fects.)e(In)16 b Fg(Confer)o(ence)g(Record)h(of)f(the)h(Eighteenth)f
(Annual)f(ACM)g(Symposium)i(on)f(Principles)871 1696
y(of)h(Pr)o(ogramming)f(Languages,)h(Orlando,)g(Florida)p
FD(,)f(pages)g(303\226310.)i(ACM)f(Pr)o(ess,)e(January)871
1787 y(1991.)39 b(This)22 b(paper)g(pr)o(esents)f(the)i(\002rst)f
(algorithm)f(for)g(r)o(econstr)o(ucting)h(the)h(types)e(and)871
1879 y(ef)o(fects)c(of)g(expr)o(essions)e(in)j(the)g(pr)o(esence)e(of)i
(\002rst-class)e(pr)o(ocedur)o(es)f(in)j(a)g(polymorphi-)871
1970 y(cally)j(typed)f(language.)h(The)g(algorithm)f(involves)h(a)g
(new)h(technique)f(called)g Fg(algebraic)871 2061 y(r)o(econstruction)p
FD(,)d(whose)h(soundness)f(and)h(completeness)f(pr)o(operties)e(ar)o(e)
i(pr)o(oved.)450 2186 y([JMP94])156 b(L.S.)18 b(van)h(Benthem)f
(Jutting,)g(James)g(McKinna,)h(and)g(Robert)e(Pollack.)25
b(Checking)18 b(algo-)871 2277 y(rithms)d(for)f(Pur)o(e)g(Type)f
(Systems.)18 b(In)d(Henk)g(Bar)o(endr)o(egt)d(and)k(T)-7
b(obias)14 b(Nipkow)-7 b(,)15 b(editors,)871 2368 y Fg(Pr)o(oceedings)
22 b(of)g(the)g(International)e(W)o(orkshop)i(on)f(T)-7
b(ypes)22 b(for)g(Pr)o(oofs)f(and)g(Pr)o(ograms)p FD(,)i(pages)871
2460 y(19\22661,)e(Nijmegen,)d(The)h(Netherlands,)f(May)g(1994.)i
(Springer)o(-V)-8 b(erlag)15 b(LNCS)k(806.)450 2584 y([KCR98])140
b(Richar)o(d)25 b(Kelsey)-8 b(,)26 b(W)l(illiam)e(Clinger)-6
b(,)26 b(and)g(Jonathan)i(Rees.)48 b(Revised)2946 2552
y FL(5)3008 2584 y FD(r)o(eport)24 b(on)h(the)871 2676
y(algorithmic)19 b(language)g(Scheme.)29 b Fg(ACM)19
b(SIGPLAN)e(Notices)p FD(,)j(33\(9\):26\22676,)h(September)871
2767 y(1998.)k(W)l(ith)17 b(H.)g(Abelson,)g(N.)g(I.)g(Adams,)g(IV,)g
(D.)g(H.)g(Bartley)-8 b(,)16 b(G.)h(Br)o(ooks,)d(R.)j(K.)g(Dybvig,)871
2858 y(D.)h(P)-10 b(.)18 b(Friedman,)f(R.)h(Halstead,)g(C.)g(Hanson,)h
(C.)e(T)-6 b(.)18 b(Haynes,)g(E.)g(Kohlbecker)-6 b(,)18
b(D.)f(Oxley)-8 b(,)871 2950 y(K.)19 b(M.)f(Pitman,)h(G.)g(J.)f(Rozas,)
h(G.)f(L.)g(Steele,)g(Jr)-6 b(.,)18 b(G.)g(J.)g(Sussman,)h(and)g(M.)g
(W)-7 b(and.)450 3074 y([KS92])204 b(Dinesh)22 b(Katiyar)f(and)g
(Sriram)g(Sankar)-6 b(.)35 b(Completely)20 b(bounded)h
(quanti\002cation)i(is)e(de-)871 3165 y(cidable.)d(In)d
Fg(Pr)o(oceedings)f(of)h(the)g(ACM)f(SIGPLAN)f(W)o(orkshop)i(on)f(ML)f
(and)i(its)f(Applications)p FD(,)871 3257 y(June)19 b(1992.)450
3381 y([LAB)625 3349 y Ff(+)676 3381 y FD(81])96 b(B.)33
b(Liskov)-8 b(,)35 b(R.)d(Atkinson,)37 b(T)-6 b(.)33
b(Bloom,)j(E.)c(Moss,)j(J.C.)e(Schaf)o(fert,)k(R.)32
b(Schei\003er)-6 b(,)38 b(and)871 3473 y(A.)19 b(Snyder)-6
b(.)26 b Fg(CLU)18 b(Refer)o(ence)h(Manual)p FD(.)25
b(Springer)o(-V)-8 b(erlag,)15 b(1981.)450 3597 y([Lan64])171
b(P)-10 b(.)15 b(J.)g(Landin.)j(The)d(mechanical)h(evaluation)g(of)f
(expr)o(essions.)g Fg(Computer)g(Journal)p FD(,)g(6:308\226)871
3688 y(320,)20 b(January)f(1964.)450 3813 y([Lan65])171
b(P)-10 b(.)30 b(J.)f(Landin.)61 b(A)30 b(corr)o(espondence)e(between)i
(ALGOL)e(60)j(and)e(Chur)o(ch's)h(lambda-)871 3904 y(notation:)42
b(Parts)28 b(I)f(and)h(II.)56 b Fg(Communications)26
b(of)i(the)g(ACM)p FD(,)e(8\(2,3\):89\226101,)32 b(158\226165,)871
3996 y(Febr)o(uary)18 b(and)h(Mar)o(ch)g(1965.)450 4120
y([Lan66])171 b(P)-10 b(.)16 b(J.)f(Landin.)k(The)c(next)h(700)g(pr)o
(ogramming)d(languages.)19 b Fg(Communications)14 b(of)h(the)h(ACM)p
FD(,)871 4211 y(9\(3\):157\226166,)21 b(Mar)o(ch)e(1966.)450
4336 y([Ler94])185 b(Xavier)25 b(Ler)o(oy)-8 b(.)44 b(Manifest)25
b(types,)h(modules)e(and)h(separate)g(compilation.)47
b(In)26 b Fg(Confer-)871 4427 y(ence)18 b(r)o(ecord)g(of)f(POPL)f('94:)
23 b(21st)18 b(ACM)e(SIGPLAN-SIGACT)f(Symposium)i(on)g(Principles)g(of)
871 4519 y(Pr)o(ogramming)i(Languages)p FD(,)f(pages)g(109\226122,)j
(Portland,)e(OR,)f(January)g(1994.)450 4643 y([Ler95])185
b(Xavier)27 b(Ler)o(oy)-8 b(.)51 b(Applicative)27 b(functors)g(and)g
(fully)f(transpar)o(ent)i(higher)o(-or)o(der)c(mod-)871
4734 y(ules.)45 b(In)25 b Fg(Pr)o(oceedings)g(of)f(the)h(T)-7
b(wenty-Second)24 b(ACM)g(Symposium)h(on)f(Principles)g(of)h(Pr)o(o-)
871 4826 y(gramming)j(Languages)g(\(POPL\),)e(Portland,)j(Or)o(egon)p
FD(,)g(pages)e(142\226153,)32 b(San)d(Francisco,)871
4917 y(California,)18 b(January)h(1995.)p eop
%%Page: 321 322
321 321 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(321)450 683 y FD([Ler96])185 b(Xavier)24 b(Ler)o(oy)-8
b(.)43 b(A)25 b(syntactic)g(theory)f(of)g(type)g(generativity)g(and)h
(sharing.)45 b Fg(Journal)24 b(of)871 774 y(Functional)17
b(Pr)o(ogramming)p FD(,)i(6\(5\):667\226698,)i(September)d(1996.)450
899 y([LM91])180 b(Xavier)25 b(Ler)o(oy)e(and)j(Michel)f(Mauny)-8
b(.)47 b(Dynamics)25 b(in)h(ML.)47 b(In)26 b(John)g(Hughes,)g(editor)-6
b(,)871 990 y Fg(Functional)21 b(Pr)o(ogramming)h(Languages)g(and)h
(Computer)f(Ar)o(chitectur)o(e)g(1991)p FD(,)i(volume)e(523)871
1082 y(of)d Fg(Lectur)o(e)f(Notes)h(in)f(Computer)g(Science)p
FD(,)h(pages)f(406\226426.)i(Springer)o(-V)-8 b(erlag,)16
b(1991.)450 1206 y([LP99])206 b(Michael)21 b(Y)-8 b(.)20
b(Levin)h(and)g(Benjamin)h(C.)f(Pier)o(ce.)32 b(T)l(inkertype:)26
b(A)21 b(language)g(for)f(playing)871 1297 y(with)j(formal)d(systems.)
34 b(T)-7 b(echnical)22 b(Report)e(MS-CIS-99-19,)j(Dept)f(of)e(CIS,)i
(University)871 1389 y(of)d(Pennsylvania,)g(July)f(1999.)450
1513 y([Luo90])165 b(Zhaohui)18 b(Luo.)k Fg(An)17 b(Extended)g
(Calculus)f(of)g(Constructions)p FD(.)22 b(PhD)17 b(thesis,)g
(Department)g(of)871 1605 y(Computer)h(Science,)h(University)f(of)g
(Edinbur)o(gh,)g(June)h(1990.)450 1729 y([L)-6 b(W91])182
b(X.)14 b(Ler)o(oy)f(and)i(P)-10 b(.)14 b(W)-7 b(eis.)17
b(Polymorphic)c(type)h(infer)o(ence)g(and)h(assignment.)i(In)e
Fg(Eighteenth)871 1820 y(Annual)26 b(ACM)f(Symposium)i(on)f(Principles)
g(of)h(Pr)o(ogramming)g(Languages,)h(Orlando,)g(FL)p
FD(,)871 1912 y(pages)18 b(291\226302.)j(ACM,)d(New)h(Y)-7
b(ork,)17 b(NY)-8 b(,)18 b(1991.)450 2036 y([Mac86])156
b(David)26 b(MacQueen.)51 b(Using)25 b(dependent)h(types)g(to)g(expr)o
(ess)d(modular)j(str)o(uctur)o(e.)49 b(In)871 2128 y
Fg(13th)17 b(Annual)e(ACM)g(Symposium)h(on)g(Principles)f(of)h(Pr)o
(ogramming)g(languages)p FD(,)g(pages)g(277\226)871 2219
y(286,)k(St.)f(Petersbur)o(g)e(Beach,)i(FL,)e(January)i(1986.)450
2343 y([Mar73])159 b(Per)26 b(Martin-L)8 b(\250)-33 b(of.)49
b(An)27 b(intuitionistic)g(theory)e(of)h(types:)37 b(pr)o(edicative)25
b(part.)50 b(In)27 b(H.)f(E.)871 2435 y(Rose)19 b(and)i(J.)e(C.)g
(Shepher)o(dson,)g(editors,)g Fg(Logic)g(Colloquium,)f('73)p
FD(,)j(pages)e(73\2261)l(18,)i(Ams-)871 2526 y(ter)o(dam,)d(1973.)i
(North)f(Holland.)450 2651 y([Mar82])159 b(Per)27 b(Martin-L)8
b(\250)-33 b(of.)54 b(Constr)o(uctive)28 b(mathematics)g(and)g
(computer)f(pr)o(ogramming.)52 b(In)871 2742 y Fg(Logic,)31
b(Methodology)f(and)e(Philosophy)h(of)f(Science,)j(VI)p
FD(.)c(North)i(Holland,)h(Amster)o(dam,)871 2833 y(1982.)450
2958 y([Mar88])159 b(Simone)15 b(Martini.)j(Bounded)c(quanti\002ers)h
(have)h(interval)f(models.)h(In)g Fg(Pr)o(oceedings)f(of)g(the)871
3049 y(ACM)k(Confer)o(ence)f(on)h(Lisp)g(and)h(Functional)d(Pr)o
(ogramming)p FD(,)i(pages)g(174\226183,)j(Snowbir)o(d,)871
3140 y(Utah,)e(July)e(1988.)i(ACM.)450 3265 y([MCG)656
3233 y Ff(+)707 3265 y FD(99])65 b(Gr)o(eg)16 b(Morrisett,)g(Karl)h
(Crary)-8 b(,)16 b(Neal)h(Glew)-7 b(,)18 b(Dan)g(Gr)o(ossman,)e(Richar)
o(d)h(Samuels,)g(Fr)o(ed-)871 3356 y(erick)i(Smith,)i(David)f(W)-7
b(alker)h(,)19 b(Stephanie)i(W)-7 b(eirich,)20 b(and)g(Steve)h
(Zdancewic.)31 b(T)-6 b(ALx86:)871 3448 y(A)25 b(r)o(ealistic)e(typed)h
(assembly)g(language.)45 b(Submitted)25 b(to)g(the)g(1999)h(ACM)f
(SIGPLAN)871 3539 y(W)-7 b(orkshop)18 b(on)h(Compiler)e(Support)h(for)g
(System)g(Softwar)o(e,)h(1999.)450 3664 y([MCGW98])41
b(Gr)o(eg)21 b(Morrisett,)g(Karl)g(Crary)-8 b(,)21 b(Neal)h(Glew)-7
b(,)22 b(and)h(David)e(W)-7 b(alker)h(.)37 b(Stack-based)22
b(typed)871 3755 y(assembly)k(language.)52 b(In)28 b
Fg(Second)f(International)e(W)o(orkshop)i(on)f(T)-7 b(ypes)28
b(in)e(Compilation)p FD(,)871 3846 y(pages)31 b(95\2261)l(17,)37
b(Kyoto,)d(Mar)o(ch)e(1998.)69 b(Published)31 b(in)h(Xavier)f(Ler)o(oy)
f(and)i(Atsushi)871 3937 y(Ohori,)g(editors,)e Fg(Lectur)o(e)f(Notes)h
(in)f(Computer)h(Science)p FD(,)i(volume)d(1473,)34 b(pages)29
b(28-52.)871 4029 y(Springer)o(-V)-8 b(erlag,)16 b(1998.)450
4153 y([Mil78])182 b(Robin)29 b(Milner)-6 b(.)57 b(A)29
b(theory)f(of)g(type)g(polymorphism)e(in)j(pr)o(ogramming.)55
b Fg(Journal)28 b(of)871 4245 y(Computer)19 b(and)g(System)g(Sciences)p
FD(,)f(17:348\226375,)j(August)e(1978.)450 4369 y([Mil91])182
b(Robin)15 b(Milner)-6 b(.)18 b(The)d(polyadic)f FM(\031)p
FD(-calculus:)20 b(a)15 b(tutorial.)j(T)-7 b(echnical)16
b(Report)e(ECS\226LFCS\226)871 4461 y(91\226180,)k(Laboratory)d(for)g
(Foundations)g(of)g(Computer)g(Science,)h(Department)g(of)f(Com-)871
4552 y(puter)24 b(Science,)g(University)f(of)g(Edinbur)o(gh,)h(UK,)g
(October)f(1991.)44 b(Appear)o(ed)22 b(in)i Fg(Pr)o(o-)871
4643 y(ceedings)j(of)e(the)h(International)f(Summer)g(School)h(on)g
(Logic)g(and)f(Algebra)h(of)g(Speci\002cation)p FD(,)871
4734 y(Marktober)o(dorf,)17 b(August)h(1991.)j(Reprinted)d(in)h
Fg(Logic)g(and)g(Algebra)h(of)f(Speci\002cation)p FD(,)g(ed.)871
4826 y(F)-7 b(.)18 b(L.)g(Bauer)-6 b(,)19 b(W)-7 b(.)18
b(Brauer)-6 b(,)18 b(and)h(H.)f(Schwichtenber)o(g,)i(Springer)o(-V)-8
b(erlag,)15 b(1993.)p eop
%%Page: 322 323
322 322 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(322)450 683 y FD([Mit84a])143 b(John)23 b(C.)f(Mitchell.)37
b(Coer)o(cion)21 b(and)h(type)g(infer)o(ence)f(\(summary\).)36
b(In)23 b Fg(Pr)o(oc.)f(1)l(1th)h(ACM)871 774 y(Symp.)c(on)g
(Principles)f(of)g(Pr)o(ogramming)h(Languages)p FD(,)f(pages)g
(175\226185,)j(January)e(1984.)450 897 y([Mit84b])139
b(John)23 b(C.)e(Mitchell.)36 b(T)-7 b(ype)22 b(infer)o(ence)f(and)h
(type)f(containment.)39 b(In)22 b Fg(Pr)o(oc.)g(Int.)e(Symp.)i(on)871
988 y(Semantics)27 b(of)h(Data)f(T)-7 b(ypes,)30 b(Sophia-Antipolis)d
(\(France\))p FD(,)i(pages)e(257\226278,)32 b(Berlin,)c(June)871
1079 y(1984.)23 b(Springer)c(LNCS)i(173.)36 b(Full)20
b(version)g(in)i Fg(Information)e(and)h(Computation)p
FD(,)g(vol.)g(76,)871 1171 y(no.)k(2/3,)j(1988,)f(pp.)e(21)l(1\226249.)
i(Reprinted)d(in)h Fg(Logical)g(Foundations)f(of)h(Functional)f(Pr)o
(o-)871 1262 y(gramming,)19 b FD(ed.)f(G.)g(Huet,)h(Addison-W)-7
b(esley)16 b(\(1990\))k(153\226194.)450 1384 y([Mit90])180
b(J.)22 b(C.)g(Mitchell.)39 b(T)-7 b(ype)22 b(systems)f(for)g(pr)o
(ogramming)g(languages.)38 b(In)23 b(J.)f(van)h(Leeuwen,)871
1475 y(editor)-6 b(,)44 b Fg(Handbook)c(of)f(Theor)o(etical)h(Computer)
f(Science,)45 b(V)-6 b(olume)39 b(B)p FD(,)g(pages)g(365\226458.)871
1567 y(North-Holland,)19 b(Amster)o(dam,)e(1990.)450
1689 y([Mit96])180 b(John)19 b(C.)f(Mitchell.)26 b Fg(Foundations)17
b(for)h(Pr)o(ogramming)g(Languages)p FD(.)26 b(The)18
b(MIT)g(Pr)o(ess,)f(Cam-)871 1780 y(bridge,)g(MA,)h(1996.)450
1902 y([MP88])181 b(John)20 b(C.)e(Mitchell)h(and)g(Gor)o(don)f(D.)g
(Plotkin.)26 b(Abstract)20 b(types)e(have)i(existential)e(types.)871
1994 y Fg(ACM)d(T)-8 b(rans.)14 b(on)h(Pr)o(ogramming)g(Languages)g
(and)h(Systems)p FD(,)f(10\(3\):470\226502,)k(1988.)i(Pr)o(elim-)871
2085 y(inary)k(version)e(appear)o(ed)h(in)g Fg(Pr)o(oc.)g(12th)i(ACM)e
(Symp.)g(on)h(Principles)e(of)i(Pr)o(ogramming)871 2176
y(Languages,)19 b FD(1985.)450 2299 y([MP91])181 b(Spir)o(o)17
b(Michaylov)g(and)h(Frank)e(Pfenning.)25 b(Natural)17
b(semantics)h(and)g(some)e(of)h(its)h(meta-)871 2390
y(theory)k(in)h(Elf.)38 b(In)23 b(L.-H.)f(Eriksson,)f(L.)h(Halln)6
b(\250)-31 b(as,)23 b(and)g(P)-10 b(.)23 b(Schr)o(oeder)o(-Heister)-6
b(,)21 b(editors,)871 2481 y Fg(Pr)o(oceedings)k(of)g(the)g(Second)f
(International)f(W)o(orkshop)i(on)g(Extensions)e(of)i(Logic)g(Pr)o
(ogram-)871 2573 y(ming)p FD(,)18 b(pages)e(299\226344,)k(Stockholm,)e
(Sweden,)f(January)h(1991.)h(Springer)o(-V)-8 b(erlag)14
b(LNAI)871 2664 y(596.)450 2786 y([MP93])181 b(James)39
b(McKinna)i(and)f(Robert)f(Pollack.)92 b(Pur)o(e)39 b(Type)f(Sytems)h
(formalized.)91 b(In)871 2877 y(M.)28 b(Bezem)g(and)g(J.)g(F)-7
b(.)27 b(Gr)o(oote,)j(editors,)e Fg(Pr)o(oceedings)h(of)f(the)g
(International)f(Confer)o(ence)871 2969 y(on)18 b(T)-7
b(yped)19 b(Lambda)f(Calculi)f(and)i(Applications)p FD(,)f(pages)f
(289\226305.)j(Springer)o(-V)-8 b(erlag)15 b(LNCS)871
3060 y(664,)20 b(Mar)o(ch)e(1993.)450 3182 y([MPW92])106
b(R.)17 b(Milner)-6 b(,)17 b(J.)f(Parr)o(ow)-7 b(,)17
b(and)h(D.)e(W)-7 b(alker)h(.)23 b(A)17 b(calculus)g(of)g(mobile)f(pr)o
(ocesses)f(\(Parts)i(I)h(and)871 3274 y(II\).)27 b Fg(Information)18
b(and)h(Computation)p FD(,)f(100:1\22677,)i(1992.)450
3396 y([MTH90])118 b(Robin)25 b(Milner)-6 b(,)25 b(Mads)f(T)-7
b(ofte,)25 b(and)g(Robert)f(Harper)-6 b(.)44 b Fg(The)25
b(De\002nition)e(of)i(Standard)f(ML)p FD(.)871 3487 y(The)19
b(MIT)f(Pr)o(ess,)f(1990.)450 3609 y([MTHM97])47 b(Robin)17
b(Milner)-6 b(,)16 b(Mads)g(T)-7 b(ofte,)16 b(Robert)g(Harper)-6
b(,)16 b(and)h(David)f(MacQueen.)22 b Fg(The)17 b(De\002nition)871
3701 y(of)i(Standard)g(ML)f(\(Revised\))p FD(.)26 b(The)19
b(MIT)g(Pr)o(ess,)d(1997.)450 3823 y([MWCG98])41 b(Gr)o(eg)22
b(Morrisett,)g(David)h(W)-7 b(alker)h(,)24 b(Karl)f(Crary)-8
b(,)22 b(and)i(Neal)f(Glew)-7 b(.)41 b(Fr)o(om)21 b(System)i(F)g(to)871
3914 y(Typed)k(Assembly)h(Language.)57 b(In)29 b Fg(T)-7
b(wenty-\002fth)28 b(ACM)g(Symposium)g(on)g(Principles)g(of)871
4005 y(Pr)o(ogramming)19 b(Languages)p FD(,)f(pages)g(85\22697,)i(San)g
(Diego,)d(January)i(1998.)450 4128 y([N)537 4096 y Ff(+)589
4128 y FD(63])183 b(P)-10 b(.)18 b(Naur)g(et)f(al.)25
b(Revised)16 b(r)o(eport)g(on)i(the)g(algorithmic)f(language)h(algol)e
(60.)25 b Fg(Communica-)871 4219 y(tions)19 b(of)f(the)h(ACM)p
FD(,)f(6:1\22617,)i(January)f(1963.)450 4341 y([Nec97])166
b(Geor)o(ge)30 b(C.)h(Necula.)68 b(Pr)o(oof-carrying)29
b(code.)67 b(In)33 b Fg(Confer)o(ence)d(Record)j(of)e(POPL)g('97:)871
4433 y(The)21 b(24th)h(ACM)e(SIGPLAN-SIGACT)e(Symposium)j(on)g
(Principles)f(of)h(Pr)o(ogramming)g(Lan-)871 4524 y(guages)p
FD(,)e(pages)f(106\2261)l(19,)j(Paris,)d(France,)g(15\22617)j(January)d
(1997.)450 4646 y([NL96])189 b(Geor)o(ge)30 b(C.)i(Necula)g(and)g
(Peter)f(Lee.)68 b(Safe)32 b(kernel)f(extensions)g(without)i(r)o
(un-time)871 4737 y(checking.)41 b(In)24 b(USENIX,)f(editor)-6
b(,)23 b Fg(2nd)h(Symposium)f(on)g(Operating)h(Systems)f(Design)g(and)
871 4829 y(Implementation)33 b(\(OSDI)g('96\),)k(October)d(28\22631,)39
b(1996.)34 b(Seattle,)i(W)-7 b(A)p FD(,)33 b(pages)g(229\226243,)871
4920 y(Berkeley)-8 b(,)16 b(CA,)i(USA,)h(October)f(1996.)i(USENIX.)p
eop
%%Page: 323 324
323 323 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(323)450 683 y FD([NL98])189 b(G.)21 b(C.)f(Necula)h(and)h(P)-10
b(.)21 b(Lee.)32 b(Safe,)22 b(untr)o(usted)f(agents)g(using)f(pr)o
(oof-carrying)e(code.)33 b(In)871 774 y(G.)16 b(V)l(igna,)h(editor)-6
b(,)15 b Fg(Mobile)g(Agents)i(and)f(Security)p FD(,)g(volume)g(1419)h
(of)f Fg(LNCS)p FD(,)f(pages)h(61\22691.)871 866 y(SV)-10
b(,)19 b(1998.)450 990 y([oD80])198 b(US)20 b(Dept.)e(of)h(Defense.)27
b Fg(Refer)o(ence)19 b(Manual)f(for)h(the)g(Ada)g(Pr)o(ogramming)h
(Language)p FD(.)27 b(GPO)871 1082 y(008-000-00354-8,)c(1980.)450
1206 y([OR94])188 b(Peter)16 b(W)-7 b(.)16 b(O'Hearn)f(and)i(Jon)f(G.)g
(Riecke.)j(Fully)c(abstract)i(translations)g(and)f(parametric)871
1297 y(polymorphism.)44 b(In)26 b Fg(ESOP)d('94:)36 b(6th)25
b(Eur)o(opean)f(Symposium)h(on)f(Pr)o(ogramming)p FD(,)i(April)871
1389 y(1994.)i(Springer)18 b(Lectur)o(e)f(Notes)i(in)g(Computer)f
(Science,)h(volume)f(788.)450 1513 y([P)-7 b(A93])201
b(Gor)o(don)22 b(Plotkin)g(and)g(Mart)n(\264)-23 b(\021n)24
b(Abadi.)38 b(A)22 b(logic)g(for)f(parametric)h(polymorphism.)36
b(In)871 1605 y(M.)16 b(Bezem)g(and)h(J.)g(F)-7 b(.)15
b(Gr)o(oote,)h(editors,)f Fg(International)g(Confer)o(ence)h(on)g(T)-7
b(yped)18 b(Lambda)e(Cal-)871 1696 y(culi)j(and)h(Applications)p
FD(,)f(number)h(664)g(in)f(Lectur)o(e)g(Notes)g(in)g(Computer)g
(Science,)h(pages)871 1787 y(361\226375,)h(Utr)o(echt,)e(The)g
(Netherlands,)f(Mar)o(ch)h(1993.)h(Springer)o(-V)-8 b(erlag.)23
b(TLCA)-6 b('93.)450 1912 y([Pfe89])191 b(Frank)37 b(Pfenning.)87
b(Elf:)60 b(A)37 b(language)h(for)e(logic)h(de\002nition)g(and)h
(veri\002ed)f(meta-)871 2003 y(pr)o(ogramming.)25 b(In)20
b Fg(Fourth)e(Annual)g(Symposium)h(on)f(Logic)h(in)f(Computer)h
(Science)p FD(,)g(pages)871 2094 y(313\226322,)i(Paci\002c)f(Gr)o(ove,)
d(California,)h(June)h(1989.)h(IEEE)e(Computer)g(Society)g(Pr)o(ess.)
450 2219 y([Pfe91])191 b(Frank)22 b(Pfenning.)40 b(Logic)22
b(pr)o(ogramming)f(in)h(the)i(LF)d(logical)h(framework.)38
b(In)24 b(G)5 b(\264)-30 b(erar)o(d)871 2310 y(Huet)29
b(and)h(Gor)o(don)d(Plotkin,)k(editors,)e Fg(Logical)g(Frameworks)p
FD(,)i(pages)d(149\226181.)j(Cam-)871 2402 y(bridge)18
b(University)g(Pr)o(ess,)e(1991.)450 2526 y([Pfe94])191
b(Frank)26 b(Pfenning.)51 b(Elf:)37 b(A)26 b(meta-language)h(for)e
(deductive)g(systems.)49 b(In)27 b(A.)f(Bundy)-8 b(,)871
2617 y(editor)i(,)29 b Fg(Pr)o(oceedings)e(of)g(the)h(12th)g
(International)e(Confer)o(ence)g(on)h(Automated)g(Deduction)p
FD(,)871 2709 y(pages)d(81)l(1\226815,)k(Nancy)-8 b(,)26
b(France,)f(June)g(1994.)h(Springer)o(-V)-8 b(erlag)21
b(LNAI)j(814.)46 b(System)871 2800 y(abstract.)450 2925
y([Pfe96])191 b(Frank)15 b(Pfenning.)20 b(The)c(practice)f(of)g
(logical)f(frameworks.)k(In)e(H)5 b(\264)-30 b(el)5 b(\036)-30
b(ene)15 b(Kir)o(chner)-6 b(,)16 b(editor)-6 b(,)871
3016 y Fg(Pr)o(oceedings)16 b(of)f(the)h(Colloquium)e(on)h(T)-8
b(r)o(ees)15 b(in)f(Algebra)i(and)f(Pr)o(ogramming)p
FD(,)h(pages)f(1)l(19\226134,)871 3107 y(Link)8 b(\250)-33
b(oping,)18 b(Sweden,)g(April)g(1996.)i(Springer)o(-V)-8
b(erlag)15 b(LNCS)k(1059.)28 b(Invited)19 b(talk.)450
3232 y([Pie90])194 b(Benjamin)26 b(C.)f(Pier)o(ce.)45
b(Pr)o(eliminary)23 b(investigation)i(of)f(a)i(calculus)e(with)i
(intersection)871 3323 y(and)20 b(union)f(types.)26 b(Unpublished)18
b(manuscript,)h(June)g(1990.)450 3448 y([Pie91a])157
b(Benjamin)25 b(C.)e(Pier)o(ce.)40 b Fg(Pr)o(ogramming)23
b(with)h(Intersection)e(T)-7 b(ypes)24 b(and)g(Bounded)f(Polymor-)871
3539 y(phism)p FD(.)42 b(PhD)24 b(thesis,)g(Carnegie)e(Mellon)g
(University)-8 b(,)23 b(December)g(1991.)42 b(A)-7 b(vailable)24
b(as)871 3630 y(School)19 b(of)g(Computer)f(Science)h(technical)h(r)o
(eport)d(CMU-CS-91-205.)450 3755 y([Pie91b])153 b(Benjamin)27
b(C.)f(Pier)o(ce.)49 b(Pr)o(ogramming)25 b(with)i(intersection)f
(types,)h(union)g(types,)g(and)871 3846 y(polymorphism.)52
b(T)-7 b(echnical)28 b(Report)f(CMU-CS-91-106,)j(Carnegie)c(Mellon)h
(Univer)o(-)871 3937 y(sity)-8 b(,)18 b(Febr)o(uary)f(1991.)450
4062 y([Pie94])194 b(Benjamin)28 b(C.)e(Pier)o(ce.)51
b(Bounded)25 b(quanti\002cation)k(is)d(undecidable.)51
b Fg(Information)26 b(and)871 4153 y(Computation)p FD(,)k(1)l
(12\(1\):131\226165,)k(July)27 b(1994.)59 b(Also)27 b(in)i(Carl)e(A.)h
(Gunter)h(and)f(John)h(C.)871 4245 y(Mitchell,)24 b(editors,)f
Fg(Theor)o(etical)h(Aspects)g(of)f(Object-Oriented)g(Pr)o(ogramming:)33
b(T)-7 b(ypes,)25 b(Se-)871 4336 y(mantics,)h(and)f(Language)g(Design)g
FD(\(MIT)f(Pr)o(ess,)g(1994\).)i(Pr)o(eliminary)d(version)h(in)h(POPL)
871 4427 y('92.)450 4552 y([Pie97])194 b(Benjamin)17
b(C.)f(Pier)o(ce.)j(Intersection)e(types)e(and)h(bounded)g
(polymorphism.)j Fg(Mathemat-)871 4643 y(ical)j(Structur)o(es)e(in)h
(Computer)h(Science)p FD(,)f(7\(2\):129\226193,)k(April)c(1997.)37
b(Summary)21 b(version)871 4734 y(appear)o(ed)27 b(in)g(Confer)o(ence)g
(on)h(T)-7 b(yped)26 b(Lambda)i(Calculi)f(and)h(Applications,)h(Mar)o
(ch)871 4826 y(1993,)i(pp.)26 b(346\226360.)k(Pr)o(eliminary)25
b(version)i(available)g(as)h(University)e(of)h(Edinbur)o(gh)871
4917 y(technical)20 b(r)o(eport)e(ECS-LFCS-92-200.)p
eop
%%Page: 324 325
324 324 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(324)450 683 y FD([PJL92])181 b(Simon)18 b(L.)f(Peyton)h(Jones)f(and)
i(David)e(R.)h(Lester)-6 b(.)23 b Fg(Implementing)17
b(Functional)f(Languages)p FD(.)871 774 y(Pr)o(entice)j(Hall,)f(1992.)
450 888 y([Plo77])189 b(G.)24 b(D.)f(Plotkin.)44 b(LCF)23
b(consider)o(ed)f(as)i(a)g(pr)o(ogramming)e(language.)43
b Fg(Theor)o(etical)24 b(Com-)871 979 y(puter)19 b(Science)p
FD(,)f(5:223\226255,)j(1977.)450 1093 y([Pol94])189 b(Robert)20
b(Pollack.)30 b Fg(The)20 b(Theory)h(of)f(LEGO:)f(A)h(Pr)o(oof)f
(Checker)i(for)f(the)h(Extended)f(Calculus)f(of)871 1184
y(Constructions)p FD(.)26 b(PhD)19 b(thesis,)f(University)g(of)g
(Edinbur)o(gh,)g(1994.)450 1297 y([Pol96])189 b(Erik)17
b(Poll.)24 b(W)l(idth-subtyping)17 b(and)h(polymorphic)f(r)o(ecor)o(d)e
(update.)25 b(Manuscript,)18 b(June)871 1389 y(1996.)450
1502 y([Pot80])187 b(Garr)o(ell)25 b(Pottinger)-6 b(.)53
b(A)27 b(type)f(assignment)h(for)f(the)h(str)o(ongly)f(normalizable)g
FM(\025)p FD(-terms.)871 1594 y(In)c Fg(T)-8 b(o)20 b(H.)h(B.)f(Curry:)
27 b(Essays)22 b(on)e(Combinatory)h(Logic,)g(Lambda)g(Calculus,)g(and)f
(Formalism)p FD(,)871 1685 y(pages)e(561\226577.)j(Academic)e(Pr)o
(ess,)e(New)i(Y)-7 b(ork,)17 b(1980.)450 1798 y([Pot97])187
b(Franc)-29 b(\270)t(ois)20 b(Pottier)-6 b(.)33 b(Simplifying)19
b(subtyping)i(constraints.)33 b(In)21 b Fg(Pr)o(oceedings)g(of)g(the)g
(Inter-)871 1890 y(national)d(Confer)o(ence)g(on)g(Functional)f(Pr)o
(ogramming)i(\(ICFP\))p FD(,)e(1997.)450 2003 y([Pot98])187
b(Franc)-29 b(\270)t(ois)15 b(Pottier)-6 b(.)19 b(A)c(framework)f(for)g
(type)g(infer)o(ence)h(with)h(subtyping.)i(In)e Fg(Pr)o(oceedings)871
2094 y(of)26 b(the)g(third)h(ACM)e(SIGPLAN)g(International)f(Confer)o
(ence)h(on)h(Functional)e(Pr)o(ogramming)871 2186 y(\(ICFP)18
b('98\))p FD(,)h(pages)f(228\226238,)i(September)f(1998.)450
2299 y([PS94])213 b(Jens)15 b(Palsber)o(g)e(and)j(Michael)e(I.)h
(Schwartzbach.)21 b Fg(Object-Oriented)15 b(T)-7 b(ype)15
b(Systems)p FD(.)j(W)l(iley)-8 b(,)871 2391 y(1994.)450
2504 y([PT94])206 b(Benjamin)28 b(C.)d(Pier)o(ce)g(and)i(David)f(N.)g
(T)-7 b(urner)h(.)51 b(Simple)25 b(type-theor)o(etic)h(foundations)871
2595 y(for)21 b(object-oriented)h(pr)o(ogramming.)34
b Fg(Journal)21 b(of)h(Functional)e(Pr)o(ogramming)p
FD(,)i(4\(2\):207\226)871 2687 y(247,)f(April)d(1994.)31
b(Pr)o(eliminary)18 b(version)g(in)i(Principles)f(of)g(Pr)o(ogramming)f
(Languages)871 2778 y(\(POPL\),)g(1993.)450 2891 y([R)5
b(\264)-30 b(em89])145 b(Didier)17 b(R)5 b(\264)-30 b(emy)-8
b(.)25 b(T)-7 b(ypechecking)18 b(r)o(ecor)o(ds)e(and)j(variants)g(in)g
(a)g(natural)h(extension)e(of)g(ML.)871 2983 y(In)k Fg(Pr)o(oceedings)f
(of)g(the)g(Sixteenth)g(Annual)e(ACM)i(Symposium)g(on)f(Principles)h
(of)g(Pr)o(ogram-)871 3074 y(ming)26 b(Languages,)h(Austin)p
FD(,)f(pages)g(242\226249.)i(ACM,)d(January)h(1989.)51
b(Also)26 b(in)g(Carl)f(A.)871 3165 y(Gunter)c(and)h(John)f(C.)g
(Mitchell,)f(editors,)g Fg(Theor)o(etical)h(Aspects)g(of)g
(Object-Oriented)g(Pr)o(o-)871 3257 y(gramming:)j(T)-7
b(ypes,)19 b(Semantics,)f(and)g(Language)h(Design)g FD(\(MIT)f(Pr)o
(ess,)f(1994\).)450 3370 y([R)5 b(\264)-30 b(em90])145
b(Didier)20 b(R)5 b(\264)-30 b(emy)-8 b(.)32 b Fg(Alg)r(\036)-27
b(ebr)o(es)21 b(T)-8 b(ouffues.)18 b(Application)k(au)e(T)-7
b(ypage)22 b(Polymorphe)g(des)g(Objets)e(En-)871 3462
y(r)o(egistr)o(ements)27 b(dans)g(les)h(Langages)f(Fonctionnels)p
FD(.)53 b(PhD)28 b(thesis,)h(Universit)5 b(\264)-30 b(e)26
b(Paris)h(VII,)871 3553 y(1990.)450 3666 y([Rey74])169
b(John)29 b(Reynolds.)54 b(T)-7 b(owar)o(ds)27 b(a)h(theory)g(of)f
(type)g(str)o(uctur)o(e.)56 b(In)28 b Fg(Pr)o(oc.)g(Colloque)f(sur)g
(la)871 3758 y(Pr)o(ogrammation)p FD(,)19 b(pages)f(408\226425,)j(New)d
(Y)-7 b(ork,)18 b(1974.)h(Springer)o(-V)-8 b(erlag)16
b(LNCS)j(19.)450 3871 y([Rey80])169 b(John)34 b(Reynolds.)72
b(Using)33 b(category)f(theory)h(to)g(design)f(implicit)h(conversions)f
(and)871 3962 y(generic)27 b(operators.)55 b(In)29 b(N.)f(D.)f(Jones,)j
(editor)-6 b(,)29 b Fg(Pr)o(oceedings)g(of)e(the)i(Aar)o(hus)f(W)o
(orkshop)871 4054 y(on)19 b(Semantics-Dir)o(ected)f(Compiler)h
(Generation)p FD(,)f(number)g(94)i(in)f(Lectur)o(e)e(Notes)i(in)f(Com-)
871 4145 y(puter)h(Science.)g(Springer)o(-V)-8 b(erlag,)16
b(January)k(1980.)29 b(Also)19 b(in)g(Carl)g(A.)g(Gunter)h(and)f(John)
871 4236 y(C.)26 b(Mitchell,)h(editors,)f Fg(Theor)o(etical)h(Aspects)f
(of)g(Object-Oriented)g(Pr)o(ogramming:)38 b(T)-7 b(ypes,)871
4328 y(Semantics,)18 b(and)h(Language)g(Design)f FD(\(MIT)g(Pr)o(ess,)f
(1994\).)450 4441 y([Rey83])169 b(John)35 b(C.)f(Reynolds.)74
b(T)-7 b(ypes,)36 b(abstraction,)j(and)34 b(parametric)g(polymorphism.)
73 b(In)871 4533 y(R.)25 b(E.)f(A.)g(Mason,)i(editor)-6
b(,)26 b Fg(Information)d(Pr)o(ocessing)i(83)p FD(,)i(pages)d
(513\226523,)k(Amster)o(dam,)871 4624 y(1983.)20 b(Elsevier)d(Science)i
(Publishers)f(B.)g(V)-10 b(.)19 b(\(North-Holland\).)450
4737 y([Rey84])169 b(J.)15 b(C.)g(Reynolds.)k(Polymorphism)13
b(is)i(not)h(set-theor)o(etic.)j(In)d(G.)f(Kahn,)j(D.)c(B.)h(MacQueen,)
871 4829 y(and)21 b(G.)f(D.)g(Plotkin,)g(editors,)f Fg(Semantics)h(of)g
(Data)g(T)-7 b(ypes)p FD(,)21 b(volume)f(173)h(of)f Fg(Lectur)o(e)g
(Notes)871 4920 y(in)e(Computer)h(Science)p FD(,)f(pages)g(145\226156,)
j(Berlin,)c(1984.)j(Springer)o(-V)-8 b(erlag.)p eop
%%Page: 325 326
325 325 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(325)450 683 y FD([Rey88])169 b(John)19 b(C.)f(Reynolds.)24
b(Pr)o(eliminary)17 b(design)g(of)h(the)g(pr)o(ogramming)f(language)h
(Forsythe.)871 774 y(T)-7 b(echnical)20 b(Report)e(CMU-CS-88-159,)i
(Carnegie)e(Mellon)g(University)-8 b(,)17 b(June)i(1988.)450
896 y([Rey98])169 b(John)33 b(Reynolds.)69 b Fg(Theories)33
b(of)f(Pr)o(ogramming)g(Languages)p FD(.)71 b(Cambridge)31
b(University)871 988 y(Pr)o(ess,)17 b(1998.)450 1110
y([RP])276 b(John)20 b(C.)f(Reynolds)f(and)i(Gor)o(don)f(D.)f(Plotkin.)
29 b(On)20 b(functors)f(expr)o(essible)e(in)i(the)h(poly-)871
1201 y(morphic)k(lambda)h(calculus.)45 b(Submitted)25
b(to)g(Information)g(and)g(Computation.)g(Also)871 1293
y(available)c(as)f(CMU)f(School)i(of)e(Computer)g(Science)i(technical)g
(r)o(eport)d(number)i(CMU-)871 1384 y(CS-90-147.)450
1506 y([RR94])197 b(E.)29 b(P)-10 b(.)30 b(Robinson)f(and)h(G.)f
(Rosolini.)60 b(Re\003exive)28 b(graphs)h(and)h(parametric)f(polymor)o
(-)871 1597 y(phism.)35 b(In)22 b Fg(Pr)o(oceedings,)g(Ninth)f(Annual)f
(IEEE)g(Symposium)h(on)g(Logic)g(in)g(Computer)g(Sci-)871
1689 y(ence)p FD(,)d(pages)e(364\226371,)k(Paris,)d(France,)g(4\2267)i
(July)d(1994.)j(IEEE)d(Computer)h(Society)g(Pr)o(ess.)450
1811 y([R)l(V97])197 b(Didier)28 b(R)5 b(\264)-30 b(emy)28
b(and)i(J)5 b(\264)-30 b(er)8 b(\210)-33 b(ome)28 b(V)-8
b(ouillon.)59 b(Objective)30 b(ML:)e(A)h(simple)f(object-oriented)871
1902 y(extension)e(of)g(ML.)48 b(In)27 b Fg(Confer)o(ence)e(Record)i
(of)f(POPL)f('97:)37 b(the)26 b(24th)h(ACM)e(SIGPLAN-)871
1993 y(SIGACT)18 b(Symposium)i(on)f(Principles)f(of)h(Pr)o(ogramming)h
(Languages)p FD(,)f(pages)f(40\22653,)j(Paris,)871 2085
y(France,)h(January)g(15\22617,)i(1997.)e(ACM)g(Pr)o(ess.)34
b(Full)20 b(version)h(to)h(appear)f(in)h Fg(Theory)g(and)871
2176 y(Practice)d(of)g(Object)g(Systems,)f(1998)p FD(.)450
2298 y([Sch86])182 b(David)19 b(A.)g(Schmidt.)29 b Fg(Denotational)19
b(Semantics:)k(A)d(Methodology)g(for)f(Language)g(Develop-)871
2389 y(ment)p FD(.)27 b(Allyn)18 b(and)h(Bacon,)g(1986.)450
2512 y([SJ75])233 b(Gerald)24 b(Jay)g(Sussman)h(and)g(Guy)f(Lewis)g
(Steele)g(Jr)-6 b(.)45 b(Scheme:)35 b(an)25 b(interpr)o(eter)e(for)h
(ex-)871 2603 y(tended)f(lambda)g(calculus.)40 b(MIT)22
b(AI)h(Memo)f(349,)i(Massachusetts)g(Institute)f(of)g(T)-7
b(ech-)871 2694 y(nology)f(,)17 b(Cambridge,)h(Mass.,)f(December)h
(1975.)450 2816 y([SNP90])151 b(Jan)21 b(Smith,)f(Bengt)f(Nor)o(dstr)8
b(\250)-33 b(om,)17 b(and)j(Kent)g(Petersson.)29 b Fg(Pr)o(ogramming)19
b(in)g(Martin-L)t(\250)-29 b(of)t(')l(s)871 2908 y(T)-7
b(ype)20 b(Theory)m(.)f(An)f(Intr)o(oduction)p FD(.)26
b(Oxfor)o(d)16 b(University)i(Pr)o(ess,)f(1990.)450 3030
y([T)-7 b(ai67])199 b(W)-7 b(.)20 b(W)-7 b(.)20 b(T)-7
b(ait.)33 b(Intensional)22 b(interpr)o(etations)d(of)i(functionals)g
(of)f(\002nite)h(type)f(I.)32 b Fg(Journal)20 b(of)871
3121 y(Symbolic)f(Logic)p FD(,)f(32\(2\):198\226212,)k(June)d(1967.)450
3243 y([TB98])205 b(T)-7 b(ofte)22 b(and)g(Birkedal.)34
b(A)22 b(r)o(egion)e(infer)o(ence)h(algorithm.)36 b Fg(ACMT)o(OPLAS:)19
b(ACM)i(T)-8 b(rans-)871 3335 y(actions)19 b(on)f(Pr)o(ogramming)h
(Languages)g(and)g(Systems)p FD(,)f(20,)h(1998.)450 3457
y([T)-7 b(en81])179 b(R.)19 b(D.)f(T)-7 b(ennent.)28
b Fg(Principles)18 b(of)h(Pr)o(ogramming)f(Languages)p
FD(.)27 b(Pr)o(entice-Hall,)18 b(1981.)450 3579 y([Tho91])167
b(Simon)24 b(Thompson.)41 b Fg(T)-7 b(ype)24 b(Theory)g(and)g
(Functional)d(Pr)o(ogramming)p FD(.)42 b(Addison)22 b(W)-7
b(esley)f(,)871 3670 y(1991.)450 3792 y([TJ92])226 b(J.-P)-10
b(.)18 b(T)-7 b(alpin)18 b(and)g(P)-10 b(.)18 b(Jouvelot.)24
b(The)18 b(type)g(and)g(ef)o(fects)f(discipline.)23 b(In)c
Fg(Pr)o(oc.)e(IEEE)g(Symp.)871 3884 y(on)i(Logic)g(in)f(Computer)g
(Science)p FD(,)h(pages)f(162\226173,)i(1992.)450 4006
y([TMC)645 3974 y Ff(+)696 4006 y FD(96])76 b(D.)28 b(T)-7
b(ar)o(diti,)30 b(G.)e(Morrisett,)h(P)-10 b(.)28 b(Cheng,)j(C.)d
(Stone,)j(R.)d(Harper)-6 b(,)30 b(and)f(P)-10 b(.)29
b(Lee.)57 b(TIL)28 b(:)g(A)871 4097 y(type-dir)o(ected)16
b(optimizing)h(compiler)f(for)g(ML.)23 b(In)18 b Fg(Pr)o(oceedings)g
(of)f(the)h(ACM)e(SIGPLAN)871 4188 y(Confer)o(ence)j(on)g(Pr)o
(ogramming)h(Language)f(Design)g(and)g(Implemantation)p
FD(,)g(pages)g(181\226192,)871 4280 y(New)g(Y)-7 b(ork,)17
b(May)i(21\22624)h(1996.)g(ACM)e(Pr)o(ess.)450 4402 y([T)-7
b(of90])192 b(Mads)22 b(T)-7 b(ofte.)38 b(T)-7 b(ype)21
b(infer)o(ence)h(for)f(polymorphic)g(r)o(efer)o(ences.)35
b Fg(Information)22 b(and)g(Com-)871 4493 y(putation)p
FD(,)c(89\(1\),)h(November)f(1990.)450 4615 y([TT97])205
b(Mads)18 b(T)-7 b(ofte)18 b(and)g(Jean-Pierr)o(e)f(T)-7
b(alpin.)25 b(Region-based)17 b(memory)f(management.)27
b Fg(Infor-)871 4707 y(mation)19 b(and)g(Computation)p
FD(,)e(132\(2\):109\226176,)22 b(1)d(Febr)o(uary)f(1997.)450
4829 y([TvD88])151 b(A.)17 b(S.)g(T)-7 b(r)o(oelstra)16
b(and)h(D.)g(van)h(Dalen.)23 b Fg(Constructivism)17 b(in)f
(Mathematics,)i(An)e(Intr)o(oduction)871 4920 y(\(vol)j(I\))p
FD(.)27 b(North-Holland,)18 b(1988.)p eop
%%Page: 326 327
326 326 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)910
b Gd(B)t F6(I)t(B)t(L)t(I)t(O)t(G)t(R)t(A)t(P)t(H)t(Y)j
Gd(326)450 683 y FD([TWM95])105 b(David)23 b(N)h(T)-7
b(urner)h(,)24 b(Philip)f(W)-7 b(adler)h(,)23 b(and)h(Christian)g
(Mossin.)40 b(Once)23 b(upon)h(a)g(type.)40 b(In)871
774 y Fg(Functional)23 b(Pr)o(ogramming)h(Languages)g(and)h(Computer)f
(Ar)o(chitectur)o(e)p FD(,)h(San)g(Diego,)f(Cali-)871
866 y(fornia,)19 b(1995.)450 990 y([vBM97])138 b(J.)24
b(F)-7 b(.)24 b(A.)g(K.)g(van)h(Benthem)g(and)f(Alice)g(T)-7
b(er)23 b(Meulen,)i(editors.)43 b Fg(Handbook)24 b(of)g(Logic)h(and)871
1082 y(Language)p FD(.)i(MIT)18 b(Pr)o(ess,)f(1997.)450
1206 y([W)-7 b(ad90])146 b(Philip)20 b(W)-7 b(adler)h(.)32
b(Linear)20 b(types)f(can)j(change)f(the)g(world.)31
b(In)21 b Fg(TC)f(2)g(W)o(orking)g(Confer)o(ence)871
1297 y(on)f(Pr)o(ogramming)g(Concepts)g(and)f(Methods)h(\(Pr)o
(eprint\))p FD(,)f(pages)g(546\226566,)i(1990.)450 1422
y([W)-7 b(ad91])146 b(Philip)19 b(W)-7 b(adler)h(.)25
b(Is)19 b(ther)o(e)f(a)h(use)f(for)g(linear)g(logic?)30
b(In)20 b Fg(Pr)o(oceedings)e(of)h(ACM)f(Symposium)871
1513 y(on)j(Partial)g(Evaluation)f(and)i(Semantics-Based)f(Pr)o(ogram)g
(Manipulation)p FD(,)f(pages)h(255\226273,)871 1605 y(1991.)450
1729 y([W)-7 b(AL)647 1697 y Ff(+)698 1729 y FD(89])74
b(Pierr)o(e)48 b(W)-7 b(eis,)55 b(Mar)n(\264)-23 b(\021a-V)l(ir)o
(ginia)49 b(Aponte,)57 b(Alain)49 b(Laville,)56 b(Michel)49
b(Mauny)-8 b(,)56 b(and)871 1820 y(Asc)6 b(\264)-31 b(ander)21
b(Su)6 b(\264)-31 b(ar)o(ez.)31 b(The)21 b(CAML)f(r)o(efer)o(ence)e
(manual,)j(V)-8 b(ersion)19 b(2.6.)33 b(T)-7 b(echnical)21
b(r)o(eport,)871 1912 y(Pr)o(ojet)e(Formel,)e(INRIA-ENS,)h(1989.)450
2036 y([W)-7 b(an87])149 b(Mitchell)24 b(W)-7 b(and.)43
b(Complete)24 b(type)f(infer)o(ence)g(for)g(simple)g(objects.)44
b(In)24 b Fg(Pr)o(oceedings)g(of)871 2128 y(the)19 b(IEEE)f(Symposium)h
(on)f(Logic)h(in)f(Computer)h(Science)p FD(,)f(Ithaca,)i(NY)-8
b(,)18 b(June)h(1987.)450 2252 y([W)-7 b(an88])149 b(Mitchell)21
b(W)-7 b(and.)34 b(Corrigendum:)26 b(Complete)20 b(type)h(infer)o(ence)
f(for)g(simple)g(objects.)34 b(In)871 2343 y Fg(Pr)o(oceedings)19
b(of)g(the)g(IEEE)e(Symposium)i(on)g(Logic)f(in)g(Computer)h(Science)p
FD(,)f(1988.)450 2468 y([W)-7 b(an89])149 b(Mitchell)26
b(W)-7 b(and.)50 b(T)-7 b(ype)25 b(infer)o(ence)h(for)f(r)o(ecor)o(d)e
(concatenation)29 b(and)d(multiple)f(inher)o(-)871 2559
y(itance.)48 b(In)26 b Fg(Fourth)f(Annual)f(IEEE)g(Symposium)h(on)g
(Logic)g(in)f(Computer)i(Science)p FD(,)g(pages)871 2651
y(92\22697,)21 b(Paci\002c)e(Gr)o(ove,)e(CA,)i(June)g(1989.)450
2775 y([WF94])180 b(Andr)o(ew)15 b(K.)h(W)-6 b(right)15
b(and)h(Matthias)g(Felleisen.)i(A)e(syntactic)g(appr)o(oach)g(to)f
(type)g(sound-)871 2867 y(ness.)27 b Fg(Information)17
b(and)i(Computation)p FD(,)f(1)l(15\(1\):38\22694,)j(15)e(November)f
(1994.)450 2991 y([W)l(in93])161 b(Glynn)25 b(W)l(inskel.)43
b Fg(The)24 b(Formal)h(Semantics)e(of)i(Pr)o(ogramming)f(Languages:)34
b(An)24 b(Intr)o(oduc-)871 3082 y(tion)p FD(.)i(MIT)19
b(Pr)o(ess,)d(1993.)450 3207 y([WR25])172 b(Alfr)o(ed)22
b(North)h(Whitehead)g(and)h(Bertrand)e(Russell.)39 b
Fg(Principia)23 b(Mathematica,)h(V)-6 b(olume)871 3298
y(1)p FD(.)27 b(Cambridge)18 b(University)g(Pr)o(ess,)f(Cambridge,)g
(1925.)450 3423 y([W)-6 b(ri92])176 b(Andr)o(ew)30 b(K.)f(W)-6
b(right.)62 b(T)-7 b(yping)28 b(r)o(efer)o(ences)g(by)h(ef)o(fect)g
(infer)o(ence.)61 b(In)31 b(Bernd)d(Krieg-)871 3514 y(Br)o(uckner)-6
b(,)28 b(editor)-6 b(,)27 b Fg(ESOP)f('92,)j(4th)e(Eur)o(opean)e
(Symposium)i(on)f(Pr)o(ogramming,)i(Rennes,)871 3605
y(France,)20 b(February)g(1992,)h(Pr)o(oceedings)p FD(,)f(volume)g(582)
h(of)f Fg(Lectur)o(e)f(Notes)h(in)f(Computer)h(Sci-)871
3697 y(ence)p FD(,)f(pages)f(473\226491.)j(Springer)o(-V)-8
b(erlag,)15 b(New)k(Y)-7 b(ork,)17 b(N.Y)-8 b(.,)17 b(1992.)p
eop
%%Page: 327 328
327 327 bop 450 1164 a Gk(Index)450 1582 y FM(F)488 1543
y Fd(f)488 1592 y F9(<:)537 1582 y FD(\(\223Full\224)18
b(bounded)g(quanti\002cation\),)j(188)450 1674 y FM(F)488
1642 y Fd(k)488 1687 y F9(<:)537 1674 y FD(\(Bounded)c
(quanti\002cation\),)k(186)450 1765 y(F)503 1733 y FL(!)492
1778 y Gc(<)-11 b(:)560 1765 y FD(\(Higher)o(-or)o(der)11
b(bounded)j(quanti\002cation\),)782 1856 y(253)450 1948
y(F)503 1916 y FL(!)560 1948 y FD(\(Higher)o(-or)o(der)d(polymorphic)i
(lambda-calculus\),)782 2039 y(243)450 2130 y FM(\025\026)p
FD(\(Iso-r)o(ecursive)i(types\),)j(137)450 2222 y Fv(\000)-13
b FO(!)574 2190 y Fm(\003)628 2222 y FD(\(multi-step)18
b(evaluation\),)i(33)450 2313 y Fv(\000)-13 b FO(!)18
b FD(\(one-step)h(evaluation\),)g(33,)g(55)450 2404 y(System)e
(F\(Polymorphic)e(lambda-calculus\),)782 2496 y(159)450
2587 y FM(\025)492 2555 y FC(!)561 2587 y FD(\(Simply)j(typed)g
(lambda-calculus\),)g(77)450 2678 y(F)503 2646 y FL(!)560
2678 y FD(\(Summary\),)g(245)450 2770 y FM(\025)p FD(\(Untyped)g
(lambda-calculus\),)h(55)450 2944 y(Ad-hoc)g(polymorphism,)d(157)450
3035 y(algorithmic)i(subtyping,)g(1)l(14)450 3127 y(alpha-conversion,)h
(53)450 3301 y(beta-r)o(eduction,)f(44)450 3392 y(bound)h(variable,)f
(44)450 3567 y(captur)o(e-avoiding)g(substitution,)h(53)450
3658 y(Chur)o(ch)g(numerals,)f(48)450 3749 y(Chur)o(ch-style,)g(75)450
3841 y(closed)g(term,)g(44)450 3932 y(combinator)-6 b(,)19
b(44)450 4023 y(conservative,)f(68)450 4115 y(Curry-style,)e(75)450
4206 y(Currying,)h(46)450 4380 y(de)h(Br)o(uijn)h(indices,)f(58)450
4472 y(de)g(Br)o(uijn)h(terms,)f(58)450 4563 y(DeMillo,)f(Richar)o(d,)h
(13)450 4654 y(depth)h(of)f(a)h(term,)f(31)450 4745 y(derivable,)f(69)
450 4837 y(Dill,)g(David,)i(13)2095 1582 y(elimination)g(r)o(ule,)f(76)
2095 1674 y(explicitly)f(typed,)h(75)2095 1765 y(expr)o(ession,)e
Fg(see)j FD(term)2095 1939 y(\002xed-point)f(combinator)-6
b(,)20 b(50)2095 2031 y(fr)o(ee)e(variable,)g(44)2095
2122 y(fr)o(ee)g(variables,)g(52)2095 2296 y(generation)h(lemma,)f
Fg(see)h FD(inversion)f(lemmas)2095 2471 y(higher)o(-or)o(der)e
(functions,)j(46)2095 2645 y(identity)g(function,)g(44)2095
2736 y(implicitly)f(typed,)f(75)2095 2828 y(inductive)i(de\002nition,)g
(27)2095 2919 y(intr)o(oduction)g(r)o(ule,)f(76)2095
3010 y(inversion)g(lemmas)2261 3102 y(typing,)g(70,)h(78)2095
3276 y(lambda-calculus,)g(41,)g(42)2095 3367 y(lambda-term,)g
Fg(see)f FD(term)2095 3459 y(lexicographic)f(induction,)i(24)2095
3550 y(Lipton,)g(Richar)o(d,)e(13)2095 3724 y(metalanguage,)i(43)2095
3816 y(metavariable,)g(43)2095 3990 y(nameless)f(term,)g(58)2095
4081 y(naming)i(context,)e(58)2095 4173 y(natural-number)i(induction,)f
(24)2095 4264 y(normal)g(form,)e(34,)i(50)2095 4438 y(object,)h(122)
2095 4530 y(object)g(calculus,)e(41)2095 4621 y(object)i(language,)e
(43)2095 4712 y(Overloading,)f(157)2095 4887 y(Parametric)i
(polymorphism,)d(157)1888 5169 y Gd(327)p eop
%%Page: 328 329
328 328 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1072
b Gd(I)t F6(N)t(D)t(E)t(X)j Gd(328)450 683 y FD(Perlis,)17
b(Alan,)i(13)450 774 y(pi-calculus,)f(41)450 866 y(pr)o(eservation)f
(theor)o(em,)h(70,)h(80,)g(247)450 957 y(principal)f(typings,)g(151)450
1048 y(pr)o(ogr)o(ess)d(theor)o(em,)j(71,)h(80,)g(96,)g(248)450
1140 y(pur)o(e)f(lambda-calculus,)g(41)450 1314 y(r)o(edex,)e(44)450
1405 y(r)o(ules)618 1497 y(C)t(T-)t(A)t FE(B)t(S)p FD(,)i(147,)i(295)
618 1588 y(C)t(T-)t(A)t FE(P)t(P)p FD(,)f(147,)g(295)618
1679 y(C)t(T-)t(I)t FE(T)t(E)t(R)o FD(,)f(147,)i(295)618
1771 y(C)t(T-)t(P)t FE(R)t(O)t(J)p FD(,)e(298)618 1862
y(C)t(T-)t(S)t FE(U)t(C)t(C)p FD(,)h(147,)g(295)618 1953
y(C)t(T-)t(V)m FE(A)t(R)o FD(,)f(147,)i(295)618 2045
y(C)t(T-)t(Z)t FE(E)t(R)t(O)o FD(,)e(147,)i(295)618 2136
y(E)t(-)t(A)t FE(P)t(P)t FD(1)q(,)33 b(55,)g(77,)h(102,)g(108,)g(160,)g
(186,)782 2227 y(239,)20 b(245,)f(254,)g(270)618 2319
y(E)t(-)t(A)t FE(P)t(P)t FD(2)q(,)33 b(55,)g(77,)h(102,)g(108,)g(160,)g
(186,)782 2410 y(239,)20 b(245,)f(254,)g(270)618 2501
y(E)t(-)t(A)t FE(P)t(P)t FD(E)t FE(R)t(R)t FD(1)o(,)g(96)618
2593 y(E)t(-)t(A)t FE(P)t(P)t FD(E)t FE(R)t(R)t FD(2)o(,)g(96)618
2684 y(E)t(-)t(A)t FE(P)t(P)t FD(E)t FE(X)t(N)t FD(1)o(,)f(97)618
2775 y(E)t(-)t(A)t FE(P)t(P)t FD(E)t FE(X)t(N)t FD(2)o(,)g(97)618
2867 y(E)t(-)t(A)t FE(S)t(S)t(I)t(G)t(N)p FD(,)g(103)618
2958 y(E)t(-)t(A)t FE(S)t(S)t(I)t(G)t(N)t FD(1,)g(103)618
3049 y(E)t(-)t(A)t FE(S)t(S)t(I)t(G)t(N)t FD(2,)g(103)618
3140 y(E)t(-)t(B)t FE(E)t(TA)n FD(,)e(55,)g(61,)h(77,)f(102,)h(108,)g
(160,)g(186,)782 3232 y(239,)j(245,)f(254,)g(270)618
3323 y(E)t(-)t(B)t FE(E)t(TA)t FD(2)n(,)f(160,)i(187,)f(243,)h(245,)f
(254)618 3414 y(E)t(-)t(B)t FE(E)t(TA)t FD(N)t FE(AT)t
FD(I)t(S)l(,)f(33,)h(39)618 3506 y(E)t(-)t(B)t FE(E)t(TA)t
FD(N)t FE(AT)t FD(I)t(Z)-5 b(,)19 b(33,)g(39)618 3597
y(E)t(-)t(B)t FE(E)t(TA)t FD(N)t FE(AT)t FD(P)t(S)l(,)f(33,)h(39)618
3688 y(E)t(-)t(B)t FE(E)t(TA)t FD(N)t FE(AT)t FD(P)t(Z)-5
b(,)19 b(33,)g(39)618 3780 y(E)t(-)t(B)t FE(O)t(D)t(Y)t(O)t(F)o
FD(,)g(270)618 3871 y(E)t(-)t(B)t FE(O)t(O)t(L)t FD(B)t
FE(E)t(TA)t FD(F)-5 b(,)18 b(33,)h(39)618 3962 y(E)t(-)t(B)t
FE(O)t(O)t(L)t FD(B)t FE(E)t(TA)o FD(T)-5 b(,)19 b(33,)g(39)618
4054 y(E)t(-)t(C)t FE(A)t(S)t(E)o FD(,)g(91)618 4145
y(E)t(-)t(C)t FE(A)t(S)t(E)t FD(B)t FE(E)t(TA)l FD(,)f(91)618
4236 y(E)t(-)t(C)t FE(O)t(E)t(R)t(C)t(E)t FD(1)o(,)g(270)618
4328 y(E)t(-)t(C)t FE(O)t(N)t(S)t FD(1,)g(92)618 4419
y(E)t(-)t(C)t FE(O)t(N)t(S)t FD(2,)g(92)618 4510 y(E)t(-)t(D)t
FE(E)t(R)t(E)t(F)o FD(,)g(103)618 4602 y(E)t(-)t(D)t
FE(E)t(R)t(E)t(F)t FD(1)o(,)g(103)618 4693 y(E)t(-)t(F)t
FE(O)t(L)t(D)o FD(,)h(138)618 4784 y(E)t(-)t(F)t FE(O)t(L)t(D)t
FD(B)t FE(E)t(TA)l FD(,)f(138)618 4876 y(E)t(-)t(H)t
FE(E)t(A)t(D)o FD(,)h(93)2263 683 y(E)t(-)t(H)t FE(E)t(A)t(D)t
FD(B)t FE(E)t(TA)l FD(,)g(93)2263 774 y(E)t(-)t(I)t FE(F)q
FD(,)g(33,)g(39)2263 866 y(E)t(-)t(I)t FE(F)t FD(-)t(W)t
FE(R)t(O)t(N)t(G)n FD(,)g(35)2263 957 y(E)t(-)t(I)t FE(F)t
FD(E)t FE(R)t(R)p FD(,)f(96)2263 1048 y(E)t(-)t(I)t FE(F)t
FD(E)t FE(X)t(N)o FD(,)h(97)2263 1140 y(E)t(-)t(I)t FE(S)t
FD(Z)t FE(E)t(R)t(O)o FD(,)g(33,)g(39)2263 1231 y(E)t(-)t(I)t
FE(S)t FD(Z)t FE(E)t(R)t(O)t FD(-)t(W)t FE(R)t(O)t(N)t(G)l
FD(,)g(35)2263 1322 y(E)t(-)t(L)t FE(E)t(T)o FD(,)g(87,)g(90)2263
1414 y(E)t(-)t(L)t FE(E)t(T)t FD(B)t FE(E)t(TA)l FD(,)f(87,)h(90)2263
1505 y(E)t(-)t(L)t(L)t FE(E)t(T)t FD(B)t FE(E)t(TA)-5
b FD(,)19 b(93)2263 1596 y(E)t(-)t(L)t(R)t FE(C)t(D)t
FD(B)t FE(E)t(TA)m FD(,)g(94)2263 1688 y(E)t(-)t(N)t
FE(U)t(L)t(L)o FD(,)f(92)2263 1779 y(E)t(-)t(N)t FE(U)t(L)t(L)t
FD(B)t FE(E)t(TA)s FD(F)l(,)g(92)2263 1870 y(E)t(-)t(N)t
FE(U)t(L)t(L)t FD(B)t FE(E)t(TA)n FD(T)l(,)g(92)2263
1962 y(E)t(-)t(P)n FE(A)t(C)t(K)p FD(,)h(174)2263 2053
y(E)t(-)t(P)n FE(A)t(C)t(K)t FD(B)t FE(E)t(TA)m FD(,)g(174)2263
2144 y(E)t(-)t(P)t FE(R)t(E)t(D)p FD(,)f(33,)h(39)2263
2236 y(E)t(-)t(P)t FE(R)t(E)t(D)t FD(-)t(W)t FE(R)t(O)t(N)t(G)m
FD(,)f(35)2263 2327 y(E)t(-)t(P)t FE(R)t(O)t(J)p FD(,)g(88,)i(109)2263
2418 y(E)t(-)t(R)t FE(C)t(D)t FD(B)t FE(E)t(TA)n FD(,)e(88,)h(109,)h
(257,)f(277)2263 2510 y(E)t(-)t(R)t FE(E)t(C)t(O)t(R)t(D)p
FD(,)f(88,)h(109,)g(257,)h(277)2263 2601 y(E)t(-)t(R)t
FE(E)t(C)t(O)t(R)t(D)t FD(S)t FE(U)t(B)t(S)t(T)m FD(,)f(277)2263
2692 y(E)t(-)t(R)t FE(E)t(F)p FD(,)f(103)2263 2783 y(E)t(-)t(R)t
FE(E)t(F)t FD(1,)h(103)2263 2875 y(E)t(-)t(S)t FE(T)t(R)t(U)t(C)t(T)o
FD(,)f(270)2263 2966 y(E)t(-)t(S)t FE(T)t(R)t(U)t(C)t(T)t
FD(B)t FE(E)t(TA)l FD(,)g(270)2263 3057 y(E)t(-)t(S)t
FE(T)t(R)t(U)t(C)t(T)t FD(S)t FE(U)t(B)t(S)t(T)m FD(,)g(270)2263
3149 y(E)t(-)t(S)t FE(U)t(C)t(C)q FD(,)g(33,)h(39)2263
3240 y(E)t(-)t(S)t FE(U)t(C)t(C)t FD(-)t(W)t FE(R)t(O)t(N)t(G)n
FD(,)f(35)2263 3331 y(E)t(-)t(T)o FE(A)t(G)o FD(,)h(91)2263
3423 y(E)t(-)t(T)o FE(A)t(I)t(L)o FD(,)g(93)2263 3514
y(E)t(-)t(T)o FE(A)t(I)t(L)t FD(B)t FE(E)t(TA)l FD(,)f(93)2263
3605 y(E)t(-)t(T)n(A)t FE(P)t(P)q FD(,)g(160,)i(187,)f(245,)h(254)2263
3697 y(E)t(-)t(T)t FE(R)r(Y)p FD(,)e(96,)h(97)2263 3788
y(E)t(-)t(T)t FE(R)r(Y)t FD(B)t FE(E)t(TA)t FD(E)t FE(R)t(R)-5
b FD(,)19 b(96)2263 3879 y(E)t(-)t(T)t FE(R)r(Y)t FD(B)t
FE(E)t(TA)t FD(E)t FE(X)s(N)l FD(,)f(97)2263 3971 y(E)t(-)t(T)t
FE(R)r(Y)t FD(B)t FE(E)t(TA)t FD(O)t(K)l(,)g(96,)i(97)2263
4062 y(E)t(-)t(U)t FE(N)t(F)t(O)t(L)t(D)o FD(,)f(138)2263
4153 y(E)t(-)t(U)t FE(N)t(P)o(A)t(C)t(K)o FD(,)g(175)2263
4245 y(E)t(-)t(U)t FE(P)t(D)t(AT)t(E)t FD(B)t FE(E)t(TA)-5
b FD(,)18 b(257)2263 4336 y(K)t(-)t(A)t FE(L)t(L)p FD(,)h(243,)g(246,)g
(255)2263 4427 y(K)t(-)t(A)t FE(R)t(R)t(O)t(W)p FD(,)g(240,)g(246,)g
(255,)h(271,)f(279)2263 4519 y(K)t(-)t(S)t FE(I)t(N)t(G)t(L)t(E)t(T)s
(O)t(N)m FD(,)f(275)2263 4610 y(K)t(-)t(S)t FE(T)t(R)t(U)t(C)t(T)p
FD(,)g(271)2263 4701 y(K)t(-)t(T)n(A)t FE(B)t(S)q FD(,)g(240,)i(246,)f
(255,)h(276)2263 4793 y(K)t(-)t(T)n(A)t FE(P)t(P)q FD(,)f(240,)g(246,)h
(255,)f(276)2263 4884 y(K)t(-)t(T)n(A)t FE(R)t(R)t FD(-)t(S)t
FE(E)t(L)t(F)o FD(,)f(278)p eop
%%Page: 329 330
329 329 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1072
b Gd(I)t F6(N)t(D)t(E)t(X)j Gd(329)618 683 y FD(K)t(-)t(T)t(R)t
FE(C)t(D)q FD(,)18 b(274,)i(276)618 774 y(K)t(-)t(T)t(R)t
FE(C)t(D)t FD(-)t(S)t FE(E)t(L)t(F)o FD(,)e(278)618 866
y(K)t(-)t(T)t(V)m FE(A)t(R)o FD(,)h(240,)g(246,)h(255,)f(271)618
957 y(K)t(-)t(T)t FE(Y)t(P)t(E)t(O)t(F)o FD(,)g(271)618
1048 y(K)t(-)t(T)t FE(Y)t FD(P)t FE(R)t(O)t(J)p FD(,)f(274,)h(276)618
1140 y(K)t(E)t FE(Q)t(V)o FD(-)t(H)t(O)t(S,)f(278)618
1231 y(K)t(E)t FE(Q)t(V)o FD(-)t(H)t(O)t(S)t(-)t(S)t
FE(I)t(N)t(G)t(L)t(E)t(T)s(O)s(N)l FD(,)g(278)618 1322
y(K)t(E)t FE(Q)t(V)o FD(-)t(H)t(O)t(S)t(-)t(T)n(A)t FE(R)t(R)o
FD(,)g(278)618 1414 y(K)t(E)t FE(Q)t(V)o FD(-)t(H)t(O)t(S)t(-)t(T)t(R)t
FE(C)t(D)o FD(,)g(278)618 1505 y(K)t(E)t FE(Q)t(V)o FD(-)t(H)t(O)t(S)t
(-)t(T)t FE(Y)t(P)t(E)n FD(,)g(278)618 1596 y(K)t(E)t
FE(Q)t(V)o FD(-)t(S)t FE(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)l
FD(,)g(275)618 1688 y(K)t(E)t FE(Q)t(V)o FD(-)t(T)n(A)t
FE(R)t(R)p FD(,)g(276)618 1779 y(K)t(E)t FE(Q)t(V)o FD(-)t(T)t(R)t
FE(C)t(D)t FD(-)t(P)t FE(E)t(R)t(M)m FD(,)h(274,)g(276)618
1870 y(K)t(F)t(-)t(H)t(O)t(S,)g(278)618 1962 y(K)t(F)t(-)t(S)t
FE(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)l FD(,)f(275)618 2053
y(K)t(F)t(-)t(T)n(A)t FE(R)t(R)p FD(,)g(276)618 2144
y(K)t(F)t(-)t(T)t(R)t FE(C)t(D)p FD(,)h(273,)g(276)618
2236 y(M)t(-)t(R)t FE(C)t(D)q FD(,)f(90)618 2327 y(M)t(-)t(V)m
FE(A)t(R)o FD(,)h(90)618 2418 y(P)t(-)t(R)t FE(C)t(D)q
FD(,)g(291)618 2510 y(P)t(-)t(V)m FE(A)t(R)p FD(,)f(291)618
2601 y(Q)t(-)t(A)t FE(L)t(L)o FD(,)h(243,)g(246,)h(254)618
2692 y(Q)t(-)t(A)t FE(P)t(P)q FD(,)e(240,)h(246,)h(254)618
2783 y(Q)t(-)t(A)t FE(R)t(R)t(O)t(W)o FD(,)32 b(230,)i(232,)f(240,)g
(246,)g(254,)782 2875 y(270,)20 b(279,)f(280)618 2966
y(Q)t(-)t(B)t FE(E)t(TA)n FD(,)f(240,)i(246,)f(254)618
3057 y(Q)t(-)t(D)t FE(E)t(F)p FD(,)f(233)618 3149 y(Q)t(-)t(E)t
FE(X)t(T)o FD(,)h(240,)g(246,)h(254)618 3240 y(Q)t(-)t(R)t
FE(C)t(D)t FD(-)t(P)t FE(E)t(R)t(M)n FD(,)f(230,)g(280)618
3331 y(Q)t(-)t(R)t FE(E)t(FL)o FD(,)i(230,)h(232,)g(239,)g(245,)g(254,)
g(270,)782 3423 y(279,)e(280)618 3514 y(Q)t(-)t(S)t FE(I)t(N)t(G)t(L)t
(E)t(T)s(O)t(N)t FD(1)l(,)f(275)618 3605 y(Q)t(-)t(S)t
FE(I)t(N)t(G)t(L)t(E)t(T)s(O)t(N)t FD(2)l(,)g(275)618
3697 y(Q)t(-)t(S)t FE(T)t(R)t(U)t(C)t(T)t FD(B)t FE(E)t(TA)-5
b FD(,)19 b(270)618 3788 y(Q)t(-)t(S)t FE(U)t(B)p FD(,)f(273,)h(275)618
3879 y(Q)t(-)t(S)t FE(Y)t(M)t(M)o FD(,)c(230,)h(232,)g(239,)f(246,)h
(254,)g(270,)782 3971 y(279,)k(280)618 4062 y(Q)t(-)t(T)n(A)t
FE(B)t(S)p FD(,)f(240,)g(246,)h(254)618 4153 y(Q)t(-)t(T)t
FE(R)t(A)t(N)t(S)o FD(,)15 b(230,)h(232,)f(239,)h(246,)g(254,)g(270,)
782 4245 y(279,)k(280)618 4336 y(Q)t(-)t(T)t(R)t FE(C)t(D)p
FD(,)f(273)618 4427 y(Q)t(-)t(T)t(R)t FE(C)t(D)t FD(-)t(P)t
FE(E)t(R)t(M)n FD(,)f(273)618 4519 y(Q)t(-)t(T)t(R)t
FE(C)t(D)t FD(B)t FE(E)t(TA)m FD(,)h(273)618 4610 y(Q)t(-)t(T)t(R)t
FE(C)t(D)t FD(E)t FE(X)t(T)o FD(,)f(273)618 4701 y(Q)t(-)t(T)t
FE(Y)t FD(P)t FE(R)t(O)t(J)o FD(,)g(273)618 4793 y(Q)t(A)t(-)t(A)t
FE(L)t(L)o FD(,)h(250)618 4884 y(Q)t(A)t(-)t(A)t FE(R)t(R)t(O)t(W)o
FD(,)g(140,)g(231,)h(233,)f(250)2263 683 y(Q)t(A)t(-)t(B)t
FE(A)t(S)t(E)o FD(,)g(140,)g(233)2263 774 y(Q)t(A)t(-)t(L)t
FE(O)t(O)t(P)p FD(,)f(140)2263 866 y(Q)t(A)t(-)t(R)t
FE(C)t(D)q FD(,)g(231)2263 957 y(Q)t(A)t(-)t(R)t FE(E)t(C)t
FD(L,)g(140)2263 1048 y(Q)t(A)t(-)t(R)t FE(E)t(C)t FD(R,)g(140)2263
1140 y(Q)t(A)t(-)t(R)t FE(E)t(D)t(U)t(C)t(E)t FD(L)n(,)g(233,)i(250)
2263 1231 y(Q)t(A)t(-)t(R)t FE(E)t(D)t(U)t(C)t(E)t FD(R)n(,)f(233,)g
(250)2263 1322 y(Q)t(A)t(-)t(T)n(A)t FE(B)t(S)p FD(,)g(250)2263
1414 y(Q)t(A)t(-)t(T)n(A)t FE(P)t(P)q FD(,)f(250)2263
1505 y(Q)t(A)t(-)t(T)t(V)m FE(A)t(R)o FD(,)g(250)2263
1596 y(R)t(A)t(-)t(A)t FE(P)t(P)q FD(,)g(250)2263 1688
y(R)t(A)t(-)t(B)t FE(E)t(TA)n FD(,)h(250)2263 1779 y(R)t(A)t(-)t(D)t
FE(E)t(F)p FD(,)g(233)2263 1870 y(S)t(-)t(A)t FE(B)t(S)q
FD(,)f(255)2263 1962 y(S)t(-)t(A)t FE(L)t(L)p FD(,)h(187,)g(188,)g
(205,)h(255)2263 2053 y(S)t(-)t(A)t FE(P)t(P)q FD(,)f(255)2263
2144 y(S)t(-)t(A)t FE(R)t(R)t(O)t(W)p FD(,)g(107,)g(109,)g(187,)h(255)
2263 2236 y(S)t(-)t(E)t FE(Q)t(V)q FD(,)e(255)2263 2327
y(S)t(-)t(P)t FE(R)t(O)t(D)q FD(,)g(1)l(10)2263 2418
y(S)t(-)t(P)t FE(R)t(O)t(D)t FD(-)t(W)t FE(I)t(D)t(T)t(H)o
FD(,)g(1)l(10)2263 2510 y(S)t(-)t(R)t FE(C)t(D)r FD(,)g(1)l(13)2263
2601 y(S)t(-)t(R)t FE(C)t(D)t FD(-)t(D)t FE(E)t(P)t(T)t(H)o
FD(,)g(107,)h(109,)h(190,)f(258)2263 2692 y(S)t(-)t(R)t
FE(C)t(D)t FD(-)t(P)t FE(E)t(R)t(M)o FD(,)g(107,)g(109)2263
2783 y(S)t(-)t(R)t FE(C)t(D)t FD(-)t(V)m FE(A)t(R)t(I)t(A)t(N)t(C)t(E)m
FD(,)f(258)2263 2875 y(S)t(-)t(R)t FE(C)t(D)t FD(-)t(W)t
FE(I)t(D)t(T)t(H)o FD(,)h(107,)g(109,)h(190,)f(258)2263
2966 y(S)t(-)t(R)t FE(E)t(FL)p FD(,)f(108,)i(109,)f(187)2263
3057 y(S)t(-)t(S)t FE(O)t(M)t(E)p FD(,)f(197)2263 3149
y(S)t(-)t(T)s FE(O)t(P)q FD(,)g(107,)i(109,)f(187,)g(255)2263
3240 y(S)t(-)t(T)t FE(R)t(A)t(N)t(S)p FD(,)f(108,)i(109,)f(187,)g(255)
2263 3331 y(S)t(-)t(T)t(R)t FE(C)t(D)t FD(-)t(W)t FE(I)t(D)t(T)t(H)o
FD(,)f(274,)i(276)2263 3423 y(S)t(-)t(T)t(V)m FE(A)t(R)p
FD(,)e(185\226187,)j(255)2263 3514 y(S)t(A)t(-)t(A)t
FE(L)t(L)p FD(,)d(204,)i(205)2263 3605 y(S)t(A)t(-)t(A)t
FE(R)t(R)t(O)t(W)p FD(,)e(1)l(14,)i(204)2263 3697 y(S)t(A)t(-)t(R)t
FE(C)t(D)r FD(,)e(1)l(14)2263 3788 y(S)t(A)t(-)t(R)t
FE(E)t(FL)t FD(-)t(T)t(V)m FE(A)t(R)m FD(,)h(203)2263
3879 y(S)t(A)t(-)t(T)s FE(O)t(P)q FD(,)f(1)l(14,)h(203)2263
3971 y(S)t(A)t(-)t(T)t FE(R)t(A)t(N)t(S)t FD(-)t(T)t(V)m
FE(A)t(R)m FD(,)f(203)2263 4062 y(S)t(K)t(-)t(E)t FE(Q)t(V)q
FD(,)g(273,)i(275)2263 4153 y(S)t(K)t(-)t(S)t FE(I)t(N)t(G)t(L)t(E)t(T)
s(O)t(N)m FD(,)e(275)2263 4245 y(S)t(K)t(-)t(T)t FE(R)t(A)t(N)t(S)p
FD(,)g(274,)i(275)2263 4336 y(S)t(K)t(-)t(T)t(R)t FE(C)t(D)t
FD(-)t(D)t FE(E)t(P)t(T)t(H)n FD(,)f(274,)g(276)2263
4427 y(T-)t(A)t FE(B)t(S)q FD(,)d(75,)h(77,)h(103,)f(109,)h(160,)g
(187,)f(240,)2427 4519 y(246,)j(255,)f(271,)h(279)2263
4610 y(T-)t(A)t FE(P)t(P)q FD(,)c(76,)g(77,)h(103,)g(106,)g(109,)g
(160,)g(187,)2427 4701 y(240,)j(247,)f(256,)h(271,)f(279)2263
4793 y(T-)t(A)t FE(S)t(S)t(I)t(G)t(N)p FD(,)f(103)2263
4884 y(T-)t(B)t FE(O)t(D)t(Y)t(O)t(F)p FD(,)g(271)p eop
%%Page: 330 331
330 330 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1072
b Gd(I)t F6(N)t(D)t(E)t(X)j Gd(330)618 683 y FD(T-)t(C)t
FE(A)t(S)t(E)o FD(,)19 b(91)618 774 y(T-)t(C)t FE(O)t(E)t(R)t(C)t(E)o
FD(,)f(271)618 866 y(T-)t(C)t FE(O)t(N)t(S)p FD(,)g(93)618
957 y(T-)t(D)t FE(E)t(R)t(E)t(F)o FD(,)g(103)618 1048
y(T-)t(E)t FE(Q)p FD(,)35 b(230,)h(233,)g(240,)g(247,)g(271,)g(279,)782
1140 y(280)618 1231 y(T-)t(E)t FE(R)t(R)t(O)t(R)o FD(,)18
b(96)618 1322 y(T-)t(E)t FE(X)t(N)o FD(,)h(97)618 1414
y(T-)t(F)o FE(A)t(L)t(S)t(E)n FD(,)g(69,)g(72)618 1505
y(T-)t(F)t FE(I)t(X)p FD(,)f(91)618 1596 y(T-)t(F)t FE(O)t(L)t(D)o
FD(,)h(138)618 1688 y(T-)t(H)t FE(E)t(A)t(D)o FD(,)g(93)618
1779 y(T-)t(I)t FE(F)q FD(,)f(69,)h(72)618 1870 y(T-)t(I)t
FE(S)t FD(Z)t FE(E)t(R)t(O)o FD(,)g(68,)g(73)618 1962
y(T-)t(L)t FE(E)t(T)o FD(,)f(87,)h(291)618 2053 y(T-)t(L)t(L)t
FE(E)t(T)n FD(,)g(93)618 2144 y(T-)t(L)t FE(O)t(C)p FD(,)g(103)618
2236 y(T-)t(L)t(R)t FE(C)t(D)p FD(,)g(94)618 2327 y(T-)t(N)t
FE(I)t(L)p FD(,)f(93)618 2418 y(T-)t(N)t FE(U)t(L)t(L)o
FD(,)g(93)618 2510 y(T-)t(P)n FE(A)t(C)t(K)p FD(,)h(172,)g(175,)g(197,)
h(244)618 2601 y(T-)t(P)t FE(R)t(E)t(D)p FD(,)e(68,)h(73)618
2692 y(T-)t(P)t FE(R)t(O)t(J)p FD(,)f(89,)h(109,)h(258,)f(280)618
2783 y(T-)t(R)t FE(C)t(D)q FD(,)f(89,)h(109,)h(258,)f(277,)h(280)618
2875 y(T-)t(R)t FE(E)t(F)p FD(,)e(103)618 2966 y(T-)t(S)t
FE(T)t(R)t(U)t(C)t(T)o FD(,)g(271)618 3057 y(T-)t(S)t
FE(U)t(B)o FD(,)h(106,)g(1)l(10,)h(187,)f(256)618 3149
y(T-)t(S)t FE(U)t(C)t(C)p FD(,)g(68,)g(72)618 3240 y(T-)t(T)n(A)t
FE(B)t(S)p FD(,)g(159,)g(160,)h(187,)f(243,)g(247,)h(256)618
3331 y(T-)t(T)o FE(A)t(I)t(L)o FD(,)e(93)618 3423 y(T-)t(T)n(A)t
FE(P)t(P)q FD(,)g(159,)h(160,)h(187,)f(243,)h(247,)f(256)618
3514 y(T-)t(T)t FE(R)t(U)t(E)o FD(,)f(68,)h(72)618 3605
y(T-)t(T)t FE(R)r(Y)p FD(,)f(96,)h(97)618 3697 y(T-)t(U)t
FE(N)t(F)t(O)t(L)t(D)o FD(,)f(138)618 3788 y(T-)t(U)t
FE(N)t(I)t(T)o FD(,)h(86,)g(103)618 3879 y(T-)t(U)t FE(N)t(P)o(A)t(C)t
(K)o FD(,)f(173,)i(175,)f(197,)h(244)618 3971 y(T-)t(U)t
FE(P)t(D)t(AT)t(E)n FD(,)e(258)618 4062 y(T-)t(V)m FE(A)t(R)o
FD(,)e(75,)g(77,)g(103,)h(109,)g(160,)f(187,)h(240,)782
4153 y(246,)j(255,)f(271)618 4245 y(T-)t(V)m FE(A)t(R)t(I)t(A)t(N)t(T)m
FD(,)f(91)618 4336 y(T-)t(Z)t FE(E)t(R)t(O)o FD(,)h(68,)g(72)618
4427 y(T)n(A)t(-)t(A)t FE(B)t(S)q FD(,)f(1)l(16,)h(140,)h(200,)f(231,)h
(233,)f(251)618 4519 y(T)n(A)t(-)t(A)t FE(P)t(P)q FD(,)f(1)l(16,)i
(140,)f(200,)h(231,)f(234,)h(251)618 4610 y(T)n(A)t(-)t(C)t
FE(O)t(N)t(D)p FD(,)f(299)618 4701 y(T)n(A)t(-)t(P)t
FE(R)t(O)t(J)p FD(,)g(1)l(16,)g(231)618 4793 y(T)n(A)t(-)t(R)t
FE(C)t(D)q FD(,)g(1)l(16,)g(231)618 4884 y(T)n(A)t(-)t(T)n(A)t
FE(B)t(S)q FD(,)f(200,)i(251)2263 683 y(T)n(A)t(-)t(T)n(A)t
FE(P)t(P)q FD(,)f(201,)g(251)2263 774 y(T)n(A)t(-)t(V)m
FE(A)t(R)p FD(,)f(1)l(16,)i(140,)f(200,)h(231,)f(233,)g(251)2263
866 y(X)t(A)t(-)t(O)t FE(T)t(H)t(E)t(R)n FD(,)g(140,)g(200,)h(233,)f
(251)2263 957 y(X)t(A)t(-)t(P)t FE(R)t(O)t(M)t(O)t(T)t(E)n
FD(,)f(200)2263 1048 y(X)t(A)t(-)t(R)t FE(E)t(C)p FD(,)h(140)2263
1140 y(X)t(A)t(-)t(R)t FE(E)t(D)t(U)t(C)t(E)o FD(,)f(233,)i(251)2095
1314 y(safety)-8 b(,)18 b(70)2095 1405 y(simple)g(types,)f(74)2095
1497 y(simply)h(typed)f(lambda-terms,)h(74)2095 1588
y(size)h(of)f(a)h(term,)f(30)2095 1679 y(Smith,)h(Brian)g(Cantwell,)g
(57)2095 1771 y(soundness,)f(70)2095 1862 y(stuck)h(term,)f(34)2095
1953 y(subject)i(expansion,)e(71,)h(80)2095 2045 y(subject)h(r)o
(eduction,)d Fg(see)i FD(pr)o(eservation)2095 2136 y(substitution)h
(lemma,)e(247)2095 2227 y(subtype)h(polymorphism,)d(158)2095
2402 y(term,)i(27)2095 2493 y(T)-7 b(ype)18 b(systems)g(and)h
(components)2261 2584 y(T)-7 b(ype)18 b(systems)g(and)h(components)2344
2690 y FM(F)2382 2650 y Fd(f)2382 2700 y F9(<:)2431 2690
y FD(:)i(\223Full\224)14 b(bounded)g(quanti\002cation)2427
2781 y([)p FO(!)31 b Fv(8)g FT(<)-13 b(:)32 b Fg(bq)e(full)o
FD(],)18 b(188)2261 2872 y(Algorithmic)g(r)o(ules)g(for)g(equi-r)o
(ecursive)2427 2964 y(types)g([)p FO(!)31 b FT(B)h FM(\026)p
FD(],)17 b(140)2261 3055 y(Algorithmic)d(r)o(ules)f(for)h(r)o(ecor)o
(ds)d(with)k(per)o(-)2427 3146 y(mutation)20 b([)p FO(!)31
b Fc(fg)g FO($)p FD(],)18 b(231)2261 3238 y(Algorithmic)27
b(r)o(ules)f(for)g(simply)g(typed)2427 3329 y(lambda-calculus)19
b([)p FO(!)31 b FT(B)p FD(],)19 b(231)2261 3420 y(Algorithmic)14
b(r)o(ules)f(for)h(type)f(de\002nitions)2427 3512 y([)p
FO(!)31 b FT(B)h FO($)o FD(],)19 b(233)2261 3603 y(Algorithmic)f(r)o
(ules)g(for)g(F)3031 3571 y FL(!)3107 3603 y FD([],)g(250)2261
3694 y(Algorithmic)g(subtyping)h([],)f(203)2261 3785
y(Algorithmic)g(typing)g([],)h(200)2261 3877 y(Arithmetic)c(expr)o
(essions)c([)p Fb(B)42 b(N)21 b FD(\(untyped\)],)2427
3968 y(39)2261 4059 y(Base)d(types)g([)p FO(!)31 b FT(B)p
FD(],)19 b(86)2261 4151 y(Booleans)f([)p Fb(B)34 b FD(\(untyped\)],)17
b(38)2261 4242 y(Bounded)d(existential)f(quanti\002cation)k([)p
FM(F)3466 4210 y Fd(k)3466 4255 y F9(<:)3514 4242 y FD(+)2427
4333 y Fv(9)p FD(],)h(197)2261 4425 y(T)-7 b(ype)18 b(systems)g(and)h
(components)2344 4516 y FM(F)2382 4484 y Fd(k)2382 4529
y F9(<:)2431 4516 y FD(:)24 b(Bounded)18 b(quanti\002cation)j([)p
FO(!)31 b Fv(8)2427 4607 y FT(<)-13 b(:)32 b Fg(bq)o
FD(],)19 b(186)2261 4699 y(Dependent)g(functions)g([???],)g(279)2261
4790 y(Dependent)29 b(r)o(ecor)o(d)d(terms)i(\(??\))53
b([???],)2427 4881 y(277)p eop
%%Page: 331 332
331 331 bop 450 392 a F7(Mar)o(ch)20 b(2,)g(2000)1072
b Gd(I)t F6(N)t(D)t(E)t(X)j Gd(331)616 683 y FD(Dependent)19
b(r)o(ecor)o(ds)d([????],)j(280)616 774 y(Dependent)29
b(r)o(ecor)o(ds)d(of)i(types)g([)p FO(!)41 b(\))782 866
y Fg(tr)o(cd)32 b(depkind)19 b FD(],)f(276)616 957 y(Err)o(ors)e([)p
FO(!)31 b Fg(err)o(or)p FD(],)18 b(96)616 1048 y(Exceptions)g([)p
FO(!)31 b Fg(exceptions)p FD(],)19 b(97)616 1140 y(Existential)f(types)
g([)p FO(!)p Fv(89)p FD(],)f(174)616 1231 y(Exposur)o(e)f([],)i(200)616
1322 y(General)g(r)o(ecursion)g([)p FO(!)30 b FT(fix)q
FD(],)18 b(91)616 1414 y(T)-7 b(ype)18 b(systems)f(and)j(components)699
1505 y(F)752 1473 y FL(!)741 1518 y Gc(<)-11 b(:)809
1505 y FD(:)21 b(Higher)o(-or)o(der)11 b(bounded)j(quan-)782
1596 y(ti\002cation)20 b([F)1160 1604 y Gc(<)-11 b(:)1214
1596 y FD(+)19 b(F)1331 1565 y FL(!)1388 1596 y FD(],)f(253)616
1688 y(Higher)o(-or)o(der)d(existential)k(types)e([F)1702
1656 y FL(!)1691 1701 y Gc(<)-11 b(:)1759 1688 y FD(+)782
1779 y Fv(9)p FD(],)18 b(244)616 1870 y(T)-7 b(ype)18
b(systems)f(and)j(components)699 1962 y(F)752 1930 y
FL(!)809 1962 y FD(:)h(Higher)o(-or)o(der)11 b(polymorphic)h(lambda-)
782 2053 y(calculus)19 b([System)f(F+)g FO(\))p FD(],)g(243)616
2144 y(Higher)o(-or)o(der)d(singletons)j([????],)h(278)616
2236 y(T)-7 b(ype)18 b(systems)f(and)j(components)699
2327 y FM(\025\026)p FD(:)35 b(Iso-r)o(ecursive)23 b(types)h([)p
FO(!)38 b FT(B)g FM(\026)p FD(],)782 2418 y(137)616 2510
y(Lazy)19 b(let)f(bindings)h([)p FO(!)30 b FT(let)i(lazy)q
FD(],)18 b(93)616 2601 y(Lazy)h(r)o(ecor)o(ds)d([)p FO(!)31
b Fc(fg)g FT(lazy)q FD(],)18 b(94)616 2692 y(Let)h(binding)f([)p
FO(!)31 b FT(let)q FD(],)18 b(87)616 2783 y(Lists)g([)p
FO(!)31 b Fb(B)46 b FT(List)q FD(],)18 b(92)616 2875
y(T)-7 b(ype)18 b(systems)f(and)j(components)699 2966
y(System)14 b(F:)f(Polymorphic)g(lambda-calculus)782
3057 y([)p FO(!)p Fv(8)p FD(],)18 b(159)616 3149 y(Polymorphic)13
b(update)h([F)1373 3157 y Gc(<)-11 b(:)1427 3149 y FD(+)15
b Fc(fg)27 b Fg(update)p FD(],)782 3240 y(257)616 3331
y(Recor)o(d)c(patterns)i([)p FO(!)37 b Fc(fg)g FT(let)g
Fg(pat)25 b FD(\(un-)782 3423 y(typed\)],)17 b(89)616
3514 y(Recor)o(ds)g(and)i(tuples)f([)p FO(!)31 b Fc(fg)p
FD(],)19 b(88)616 3605 y(Recor)o(ds)e(of)h(types)g([)p
FO(!)31 b(\))g Fg(tr)o(cd)19 b FD(],)f(273)616 3697 y(Recor)o(ds)26
b(with)j(permutation)g(of)f(\002elds)782 3788 y([)p FO(!)j
Fc(fg)g FO($)p FD(],)18 b(230)616 3879 y(Refer)o(ences)f([)p
FO(!)31 b FT(Unit)h Fa(:=)o FD(],)19 b(102)616 3971 y(Simply)j(typed)g
(lambda)h(calculus)g(with)782 4062 y(r)o(ecor)o(ds)12
b(and)i(subtyping)g([)p FO(!)27 b Fc(fg)g FT(<)-13 b(:)p
FD(],)782 4153 y(108)616 4245 y(T)-7 b(ype)18 b(systems)f(and)j
(components)699 4336 y FM(\025)741 4304 y FC(!)810 4336
y FD(:)h(Simply)13 b(typed)h(lambda-calculus)782 4427
y([)p FO(!)k FD(\(typed\)],)g(77)616 4519 y(Singleton)h(kinds)f([)p
FO(!)30 b FT(Eq)q FD(],)18 b(275)616 4610 y(Str)o(uctur)o(es)h([)p
FO(!)30 b FT(X)i Fv(S)18 b FD(],)g(269)616 4701 y(T)-7
b(ype)18 b(systems)f(and)j(components)699 4793 y(F)752
4761 y FL(!)809 4793 y FD(:)h(Summary)14 b([System)f(F+)h
FO(\))p FD(],)h(245)616 4884 y(T)-7 b(ype)18 b(de\002nitions)h([)p
FO(!)30 b FT(B)i FO($)p FD(],)18 b(232)2261 683 y(T)-7
b(ype)27 b(operators)f(and)h(kinding)g([)p FO(!)39 b($)2427
774 y(\))p FD(],)18 b(239)2261 866 y(T)-7 b(yped)14 b(r)o(ecor)o(d)d
(patterns)k([)p FO(!)26 b Fc(fg)h FT(let)h Fg(pat)p FD(\(typed\)],)2427
957 y(291)2261 1048 y(T)-7 b(yping)14 b(r)o(ules)f(for)h(booleans)g([)p
Fb(B)29 b FD(\(typed\)],)2427 1140 y(72)2261 1231 y(T)-7
b(yping)14 b(r)o(ules)f(for)h(numbers)g([)p Fb(B)41 b(N)21
b FD(\(typed\)],)2427 1322 y(72)2261 1414 y(Unit)f(type)e([)p
FO(!)31 b FT(Unit)q FD(],)18 b(86)2261 1505 y(T)-7 b(ype)18
b(systems)g(and)h(components)2344 1596 y FM(\025)p FD(:)46
b(Untyped)30 b(lambda-calculus)g([)p FO(!)2427 1688 y
FD(\(untyped\)],)18 b(55)2261 1779 y(V)-7 b(ariants)20
b([)p FO(!)30 b FM(<>)q FD(],)18 b(90)2095 1870 y(type)h(variables,)f
(144)2095 1962 y(types,)g(68)2095 2053 y(typing)h(assertions,)e(69)2095
2144 y(typing)i(context,)f(75)2095 2236 y(typing)h(derivation,)f(69)
2095 2327 y(typing)h(judgements,)f(69)2095 2418 y(typing)h(r)o
(elation,)e(69)2095 2593 y(uni\002cation,)j(151)2095
2684 y(uni\002cation)g(algorithm,)e(152)2095 2775 y(uni\002er)-6
b(,)19 b(152)2095 2867 y(unify)-8 b(,)18 b(152)2095 2958
y(untyped)h(lambda-calculus,)f(41)2095 3132 y(value,)h(32)2095
3223 y(variable)g(captur)o(e,)f(53)2095 3398 y(well-founded)g
(induction,)h(24)2095 3489 y(well-founded)f(or)o(der)-6
b(,)17 b(24)2095 3664 y(Y)i(combinator)-6 b(,)19 b(50)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
